var b4e=Object.defineProperty;var _4e=(e,t,n)=>t in e?b4e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var w4e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qu=(e,t,n)=>_4e(e,typeof t!="symbol"?t+"":t,n);var sZt=w4e((men,Zte)=>{function E4e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ru(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function x4e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Cj={exports:{}},TT={},Aj={exports:{}},or={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gie;function S4e(){if(gie)return or;gie=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(U,K,q){this.props=U,this.context=K,this.refs=g,this.updater=q||h}y.prototype.isReactComponent={},y.prototype.setState=function(U,K){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,K,"setState")},y.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function b(){}b.prototype=y.prototype;function _(U,K,q){this.props=U,this.context=K,this.refs=g,this.updater=q||h}var E=_.prototype=new b;E.constructor=_,p(E,y.prototype),E.isPureReactComponent=!0;var C=Array.isArray,x=Object.prototype.hasOwnProperty,T={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function k(U,K,q){var X,Z={},ae=null,he=null;if(K!=null)for(X in K.ref!==void 0&&(he=K.ref),K.key!==void 0&&(ae=""+K.key),K)x.call(K,X)&&!A.hasOwnProperty(X)&&(Z[X]=K[X]);var ge=arguments.length-2;if(ge===1)Z.children=q;else if(1<ge){for(var be=Array(ge),Ce=0;Ce<ge;Ce++)be[Ce]=arguments[Ce+2];Z.children=be}if(U&&U.defaultProps)for(X in ge=U.defaultProps,ge)Z[X]===void 0&&(Z[X]=ge[X]);return{$$typeof:e,type:U,key:ae,ref:he,props:Z,_owner:T.current}}function N(U,K){return{$$typeof:e,type:U.type,key:K,ref:U.ref,props:U.props,_owner:U._owner}}function P(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function D(U){var K={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(q){return K[q]})}var j=/\/+/g;function M(U,K){return typeof U=="object"&&U!==null&&U.key!=null?D(""+U.key):K.toString(36)}function B(U,K,q,X,Z){var ae=typeof U;(ae==="undefined"||ae==="boolean")&&(U=null);var he=!1;if(U===null)he=!0;else switch(ae){case"string":case"number":he=!0;break;case"object":switch(U.$$typeof){case e:case t:he=!0}}if(he)return he=U,Z=Z(he),U=X===""?"."+M(he,0):X,C(Z)?(q="",U!=null&&(q=U.replace(j,"$&/")+"/"),B(Z,K,q,"",function(Ce){return Ce})):Z!=null&&(P(Z)&&(Z=N(Z,q+(!Z.key||he&&he.key===Z.key?"":(""+Z.key).replace(j,"$&/")+"/")+U)),K.push(Z)),1;if(he=0,X=X===""?".":X+":",C(U))for(var ge=0;ge<U.length;ge++){ae=U[ge];var be=X+M(ae,ge);he+=B(ae,K,q,be,Z)}else if(be=d(U),typeof be=="function")for(U=be.call(U),ge=0;!(ae=U.next()).done;)ae=ae.value,be=X+M(ae,ge++),he+=B(ae,K,q,be,Z);else if(ae==="object")throw K=String(U),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return he}function V(U,K,q){if(U==null)return U;var X=[],Z=0;return B(U,X,"","",function(ae){return K.call(q,ae,Z++)}),X}function z(U){if(U._status===-1){var K=U._result;K=K(),K.then(function(q){(U._status===0||U._status===-1)&&(U._status=1,U._result=q)},function(q){(U._status===0||U._status===-1)&&(U._status=2,U._result=q)}),U._status===-1&&(U._status=0,U._result=K)}if(U._status===1)return U._result.default;throw U._result}var G={current:null},Y={transition:null},Q={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:Y,ReactCurrentOwner:T};function L(){throw Error("act(...) is not supported in production builds of React.")}return or.Children={map:V,forEach:function(U,K,q){V(U,function(){K.apply(this,arguments)},q)},count:function(U){var K=0;return V(U,function(){K++}),K},toArray:function(U){return V(U,function(K){return K})||[]},only:function(U){if(!P(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},or.Component=y,or.Fragment=n,or.Profiler=i,or.PureComponent=_,or.StrictMode=r,or.Suspense=u,or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,or.act=L,or.cloneElement=function(U,K,q){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var X=p({},U.props),Z=U.key,ae=U.ref,he=U._owner;if(K!=null){if(K.ref!==void 0&&(ae=K.ref,he=T.current),K.key!==void 0&&(Z=""+K.key),U.type&&U.type.defaultProps)var ge=U.type.defaultProps;for(be in K)x.call(K,be)&&!A.hasOwnProperty(be)&&(X[be]=K[be]===void 0&&ge!==void 0?ge[be]:K[be])}var be=arguments.length-2;if(be===1)X.children=q;else if(1<be){ge=Array(be);for(var Ce=0;Ce<be;Ce++)ge[Ce]=arguments[Ce+2];X.children=ge}return{$$typeof:e,type:U.type,key:Z,ref:ae,props:X,_owner:he}},or.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:s,_context:U},U.Consumer=U},or.createElement=k,or.createFactory=function(U){var K=k.bind(null,U);return K.type=U,K},or.createRef=function(){return{current:null}},or.forwardRef=function(U){return{$$typeof:a,render:U}},or.isValidElement=P,or.lazy=function(U){return{$$typeof:c,_payload:{_status:-1,_result:U},_init:z}},or.memo=function(U,K){return{$$typeof:l,type:U,compare:K===void 0?null:K}},or.startTransition=function(U){var K=Y.transition;Y.transition={};try{U()}finally{Y.transition=K}},or.unstable_act=L,or.useCallback=function(U,K){return G.current.useCallback(U,K)},or.useContext=function(U){return G.current.useContext(U)},or.useDebugValue=function(){},or.useDeferredValue=function(U){return G.current.useDeferredValue(U)},or.useEffect=function(U,K){return G.current.useEffect(U,K)},or.useId=function(){return G.current.useId()},or.useImperativeHandle=function(U,K,q){return G.current.useImperativeHandle(U,K,q)},or.useInsertionEffect=function(U,K){return G.current.useInsertionEffect(U,K)},or.useLayoutEffect=function(U,K){return G.current.useLayoutEffect(U,K)},or.useMemo=function(U,K){return G.current.useMemo(U,K)},or.useReducer=function(U,K,q){return G.current.useReducer(U,K,q)},or.useRef=function(U){return G.current.useRef(U)},or.useState=function(U){return G.current.useState(U)},or.useSyncExternalStore=function(U,K,q){return G.current.useSyncExternalStore(U,K,q)},or.useTransition=function(){return G.current.useTransition()},or.version="18.3.1",or}var yie;function A$(){return yie||(yie=1,Aj.exports=S4e()),Aj.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vie;function T4e(){if(vie)return TT;vie=1;var e=A$(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!s.hasOwnProperty(c)&&(f[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return TT.Fragment=n,TT.jsx=o,TT.jsxs=o,TT}var bie;function C4e(){return bie||(bie=1,Cj.exports=T4e()),Cj.exports}var w=C4e(),O=A$();const Jr=Ru(O),mO=E4e({__proto__:null,default:Jr},[O]);var rN={},Ij={exports:{}},Wu={},kj={exports:{}},Rj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _ie;function A4e(){return _ie||(_ie=1,function(e){function t(Y,Q){var L=Y.length;Y.push(Q);e:for(;0<L;){var U=L-1>>>1,K=Y[U];if(0<i(K,Q))Y[U]=Q,Y[L]=K,L=U;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var Q=Y[0],L=Y.pop();if(L!==Q){Y[0]=L;e:for(var U=0,K=Y.length,q=K>>>1;U<q;){var X=2*(U+1)-1,Z=Y[X],ae=X+1,he=Y[ae];if(0>i(Z,L))ae<K&&0>i(he,Z)?(Y[U]=he,Y[ae]=L,U=ae):(Y[U]=Z,Y[X]=L,U=X);else if(ae<K&&0>i(he,L))Y[U]=he,Y[ae]=L,U=ae;else break e}}return Q}function i(Y,Q){var L=Y.sortIndex-Q.sortIndex;return L!==0?L:Y.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,g=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(Y){for(var Q=n(l);Q!==null;){if(Q.callback===null)r(l);else if(Q.startTime<=Y)r(l),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=n(l)}}function C(Y){if(g=!1,E(Y),!p)if(n(u)!==null)p=!0,z(x);else{var Q=n(l);Q!==null&&G(C,Q.startTime-Y)}}function x(Y,Q){p=!1,g&&(g=!1,b(k),k=-1),h=!0;var L=d;try{for(E(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||Y&&!D());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var K=U(f.expirationTime<=Q);Q=e.unstable_now(),typeof K=="function"?f.callback=K:f===n(u)&&r(u),E(Q)}else r(u);f=n(u)}if(f!==null)var q=!0;else{var X=n(l);X!==null&&G(C,X.startTime-Q),q=!1}return q}finally{f=null,d=L,h=!1}}var T=!1,A=null,k=-1,N=5,P=-1;function D(){return!(e.unstable_now()-P<N)}function j(){if(A!==null){var Y=e.unstable_now();P=Y;var Q=!0;try{Q=A(!0,Y)}finally{Q?M():(T=!1,A=null)}}else T=!1}var M;if(typeof _=="function")M=function(){_(j)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,V=B.port2;B.port1.onmessage=j,M=function(){V.postMessage(null)}}else M=function(){y(j,0)};function z(Y){A=Y,T||(T=!0,M())}function G(Y,Q){k=y(function(){Y(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,z(x))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(Y){switch(d){case 1:case 2:case 3:var Q=3;break;default:Q=d}var L=d;d=Q;try{return Y()}finally{d=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,Q){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var L=d;d=Y;try{return Q()}finally{d=L}},e.unstable_scheduleCallback=function(Y,Q,L){var U=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?U+L:U):L=U,Y){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=L+K,Y={id:c++,callback:Q,priorityLevel:Y,startTime:L,expirationTime:K,sortIndex:-1},L>U?(Y.sortIndex=L,t(l,Y),n(u)===null&&Y===n(l)&&(g?(b(k),k=-1):g=!0,G(C,L-U))):(Y.sortIndex=K,t(u,Y),p||h||(p=!0,z(x))),Y},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(Y){var Q=d;return function(){var L=d;d=Q;try{return Y.apply(this,arguments)}finally{d=L}}}}(Rj)),Rj}var wie;function I4e(){return wie||(wie=1,kj.exports=A4e()),kj.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eie;function k4e(){if(Eie)return Wu;Eie=1;var e=A$(),t=I4e();function n(m){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+m,S=1;S<arguments.length;S++)v+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+m+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(m,v){o(m,v),o(m+"Capture",v)}function o(m,v){for(i[m]=v,m=0;m<v.length;m++)r.add(v[m])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(m){return u.call(f,m)?!0:u.call(c,m)?!1:l.test(m)?f[m]=!0:(c[m]=!0,!1)}function h(m,v,S,R){if(S!==null&&S.type===0)return!1;switch(typeof v){case"function":case"symbol":return!0;case"boolean":return R?!1:S!==null?!S.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function p(m,v,S,R){if(v===null||typeof v>"u"||h(m,v,S,R))return!0;if(R)return!1;if(S!==null)switch(S.type){case 3:return!v;case 4:return v===!1;case 5:return isNaN(v);case 6:return isNaN(v)||1>v}return!1}function g(m,v,S,R,F,W,ee){this.acceptsBooleans=v===2||v===3||v===4,this.attributeName=R,this.attributeNamespace=F,this.mustUseProperty=S,this.propertyName=m,this.type=v,this.sanitizeURL=W,this.removeEmptyString=ee}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){y[m]=new g(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var v=m[0];y[v]=new g(v,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){y[m]=new g(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){y[m]=new g(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){y[m]=new g(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){y[m]=new g(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){y[m]=new g(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){y[m]=new g(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){y[m]=new g(m,5,!1,m.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function _(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var v=m.replace(b,_);y[v]=new g(v,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var v=m.replace(b,_);y[v]=new g(v,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var v=m.replace(b,_);y[v]=new g(v,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){y[m]=new g(m,1,!1,m.toLowerCase(),null,!1,!1)}),y.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){y[m]=new g(m,1,!1,m.toLowerCase(),null,!0,!0)});function E(m,v,S,R){var F=y.hasOwnProperty(v)?y[v]:null;(F!==null?F.type!==0:R||!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(p(v,S,F,R)&&(S=null),R||F===null?d(v)&&(S===null?m.removeAttribute(v):m.setAttribute(v,""+S)):F.mustUseProperty?m[F.propertyName]=S===null?F.type===3?!1:"":S:(v=F.attributeName,R=F.attributeNamespace,S===null?m.removeAttribute(v):(F=F.type,S=F===3||F===4&&S===!0?"":""+S,R?m.setAttributeNS(R,v,S):m.setAttribute(v,S))))}var C=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),T=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),D=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),Y=Symbol.iterator;function Q(m){return m===null||typeof m!="object"?null:(m=Y&&m[Y]||m["@@iterator"],typeof m=="function"?m:null)}var L=Object.assign,U;function K(m){if(U===void 0)try{throw Error()}catch(S){var v=S.stack.trim().match(/\n( *(at )?)/);U=v&&v[1]||""}return`
`+U+m}var q=!1;function X(m,v){if(!m||q)return"";q=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(He){var R=He}Reflect.construct(m,[],v)}else{try{v.call()}catch(He){R=He}m.call(v.prototype)}else{try{throw Error()}catch(He){R=He}m()}}catch(He){if(He&&R&&typeof He.stack=="string"){for(var F=He.stack.split(`
`),W=R.stack.split(`
`),ee=F.length-1,de=W.length-1;1<=ee&&0<=de&&F[ee]!==W[de];)de--;for(;1<=ee&&0<=de;ee--,de--)if(F[ee]!==W[de]){if(ee!==1||de!==1)do if(ee--,de--,0>de||F[ee]!==W[de]){var Ee=`
`+F[ee].replace(" at new "," at ");return m.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",m.displayName)),Ee}while(1<=ee&&0<=de);break}}}finally{q=!1,Error.prepareStackTrace=S}return(m=m?m.displayName||m.name:"")?K(m):""}function Z(m){switch(m.tag){case 5:return K(m.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return m=X(m.type,!1),m;case 11:return m=X(m.type.render,!1),m;case 1:return m=X(m.type,!0),m;default:return""}}function ae(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case A:return"Fragment";case T:return"Portal";case N:return"Profiler";case k:return"StrictMode";case M:return"Suspense";case B:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case D:return(m.displayName||"Context")+".Consumer";case P:return(m._context.displayName||"Context")+".Provider";case j:var v=m.render;return m=m.displayName,m||(m=v.displayName||v.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case V:return v=m.displayName||null,v!==null?v:ae(m.type)||"Memo";case z:v=m._payload,m=m._init;try{return ae(m(v))}catch{}}return null}function he(m){var v=m.type;switch(m.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=v.render,m=m.displayName||m.name||"",v.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(v);case 8:return v===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function ge(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function be(m){var v=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(v==="checkbox"||v==="radio")}function Ce(m){var v=be(m)?"checked":"value",S=Object.getOwnPropertyDescriptor(m.constructor.prototype,v),R=""+m[v];if(!m.hasOwnProperty(v)&&typeof S<"u"&&typeof S.get=="function"&&typeof S.set=="function"){var F=S.get,W=S.set;return Object.defineProperty(m,v,{configurable:!0,get:function(){return F.call(this)},set:function(ee){R=""+ee,W.call(this,ee)}}),Object.defineProperty(m,v,{enumerable:S.enumerable}),{getValue:function(){return R},setValue:function(ee){R=""+ee},stopTracking:function(){m._valueTracker=null,delete m[v]}}}}function oe(m){m._valueTracker||(m._valueTracker=Ce(m))}function re(m){if(!m)return!1;var v=m._valueTracker;if(!v)return!0;var S=v.getValue(),R="";return m&&(R=be(m)?m.checked?"true":"false":m.value),m=R,m!==S?(v.setValue(m),!0):!1}function xe(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function Re(m,v){var S=v.checked;return L({},v,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:S??m._wrapperState.initialChecked})}function Ke(m,v){var S=v.defaultValue==null?"":v.defaultValue,R=v.checked!=null?v.checked:v.defaultChecked;S=ge(v.value!=null?v.value:S),m._wrapperState={initialChecked:R,initialValue:S,controlled:v.type==="checkbox"||v.type==="radio"?v.checked!=null:v.value!=null}}function Qe(m,v){v=v.checked,v!=null&&E(m,"checked",v,!1)}function ke(m,v){Qe(m,v);var S=ge(v.value),R=v.type;if(S!=null)R==="number"?(S===0&&m.value===""||m.value!=S)&&(m.value=""+S):m.value!==""+S&&(m.value=""+S);else if(R==="submit"||R==="reset"){m.removeAttribute("value");return}v.hasOwnProperty("value")?rt(m,v.type,S):v.hasOwnProperty("defaultValue")&&rt(m,v.type,ge(v.defaultValue)),v.checked==null&&v.defaultChecked!=null&&(m.defaultChecked=!!v.defaultChecked)}function Ue(m,v,S){if(v.hasOwnProperty("value")||v.hasOwnProperty("defaultValue")){var R=v.type;if(!(R!=="submit"&&R!=="reset"||v.value!==void 0&&v.value!==null))return;v=""+m._wrapperState.initialValue,S||v===m.value||(m.value=v),m.defaultValue=v}S=m.name,S!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,S!==""&&(m.name=S)}function rt(m,v,S){(v!=="number"||xe(m.ownerDocument)!==m)&&(S==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+S&&(m.defaultValue=""+S))}var ft=Array.isArray;function Rt(m,v,S,R){if(m=m.options,v){v={};for(var F=0;F<S.length;F++)v["$"+S[F]]=!0;for(S=0;S<m.length;S++)F=v.hasOwnProperty("$"+m[S].value),m[S].selected!==F&&(m[S].selected=F),F&&R&&(m[S].defaultSelected=!0)}else{for(S=""+ge(S),v=null,F=0;F<m.length;F++){if(m[F].value===S){m[F].selected=!0,R&&(m[F].defaultSelected=!0);return}v!==null||m[F].disabled||(v=m[F])}v!==null&&(v.selected=!0)}}function st(m,v){if(v.dangerouslySetInnerHTML!=null)throw Error(n(91));return L({},v,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function Ie(m,v){var S=v.value;if(S==null){if(S=v.children,v=v.defaultValue,S!=null){if(v!=null)throw Error(n(92));if(ft(S)){if(1<S.length)throw Error(n(93));S=S[0]}v=S}v==null&&(v=""),S=v}m._wrapperState={initialValue:ge(S)}}function kt(m,v){var S=ge(v.value),R=ge(v.defaultValue);S!=null&&(S=""+S,S!==m.value&&(m.value=S),v.defaultValue==null&&m.defaultValue!==S&&(m.defaultValue=S)),R!=null&&(m.defaultValue=""+R)}function Ot(m){var v=m.textContent;v===m._wrapperState.initialValue&&v!==""&&v!==null&&(m.value=v)}function Ne(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ze(m,v){return m==null||m==="http://www.w3.org/1999/xhtml"?Ne(v):m==="http://www.w3.org/2000/svg"&&v==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var ot,St=function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(v,S,R,F){MSApp.execUnsafeLocalFunction(function(){return m(v,S,R,F)})}:m}(function(m,v){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=v;else{for(ot=ot||document.createElement("div"),ot.innerHTML="<svg>"+v.valueOf().toString()+"</svg>",v=ot.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;v.firstChild;)m.appendChild(v.firstChild)}});function $t(m,v){if(v){var S=m.firstChild;if(S&&S===m.lastChild&&S.nodeType===3){S.nodeValue=v;return}}m.textContent=v}var Vn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yr=["Webkit","ms","Moz","O"];Object.keys(Vn).forEach(function(m){Yr.forEach(function(v){v=v+m.charAt(0).toUpperCase()+m.substring(1),Vn[v]=Vn[m]})});function tr(m,v,S){return v==null||typeof v=="boolean"||v===""?"":S||typeof v!="number"||v===0||Vn.hasOwnProperty(m)&&Vn[m]?(""+v).trim():v+"px"}function vr(m,v){m=m.style;for(var S in v)if(v.hasOwnProperty(S)){var R=S.indexOf("--")===0,F=tr(S,v[S],R);S==="float"&&(S="cssFloat"),R?m.setProperty(S,F):m[S]=F}}var Fn=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Un(m,v){if(v){if(Fn[m]&&(v.children!=null||v.dangerouslySetInnerHTML!=null))throw Error(n(137,m));if(v.dangerouslySetInnerHTML!=null){if(v.children!=null)throw Error(n(60));if(typeof v.dangerouslySetInnerHTML!="object"||!("__html"in v.dangerouslySetInnerHTML))throw Error(n(61))}if(v.style!=null&&typeof v.style!="object")throw Error(n(62))}}function ur(m,v){if(m.indexOf("-")===-1)return typeof v.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lr=null;function Us(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Si=null,kn=null,ii=null;function Mr(m){if(m=cT(m)){if(typeof Si!="function")throw Error(n(280));var v=m.stateNode;v&&(v=vR(v),Si(m.stateNode,m.type,v))}}function is(m){kn?ii?ii.push(m):ii=[m]:kn=m}function Tc(){if(kn){var m=kn,v=ii;if(ii=kn=null,Mr(m),v)for(m=0;m<v.length;m++)Mr(v[m])}}function ba(m,v){return m(v)}function Ol(){}var Tr=!1;function Ti(m,v,S){if(Tr)return m(v,S);Tr=!0;try{return ba(m,v,S)}finally{Tr=!1,(kn!==null||ii!==null)&&(Ol(),Tc())}}function $r(m,v){var S=m.stateNode;if(S===null)return null;var R=vR(S);if(R===null)return null;S=R[v];e:switch(v){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(m=m.type,R=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!R;break e;default:m=!1}if(m)return null;if(S&&typeof S!="function")throw Error(n(231,v,typeof S));return S}var xo=!1;if(a)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){xo=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{xo=!1}function Ko(m,v,S,R,F,W,ee,de,Ee){var He=Array.prototype.slice.call(arguments,3);try{v.apply(S,He)}catch(dt){this.onError(dt)}}var ye=!1,ce=null,_e=!1,je=null,Be={onError:function(m){ye=!0,ce=m}};function wt(m,v,S,R,F,W,ee,de,Ee){ye=!1,ce=null,Ko.apply(Be,arguments)}function Bt(m,v,S,R,F,W,ee,de,Ee){if(wt.apply(this,arguments),ye){if(ye){var He=ce;ye=!1,ce=null}else throw Error(n(198));_e||(_e=!0,je=He)}}function en(m){var v=m,S=m;if(m.alternate)for(;v.return;)v=v.return;else{m=v;do v=m,v.flags&4098&&(S=v.return),m=v.return;while(m)}return v.tag===3?S:null}function Qn(m){if(m.tag===13){var v=m.memoizedState;if(v===null&&(m=m.alternate,m!==null&&(v=m.memoizedState)),v!==null)return v.dehydrated}return null}function nr(m){if(en(m)!==m)throw Error(n(188))}function Dn(m){var v=m.alternate;if(!v){if(v=en(m),v===null)throw Error(n(188));return v!==m?null:m}for(var S=m,R=v;;){var F=S.return;if(F===null)break;var W=F.alternate;if(W===null){if(R=F.return,R!==null){S=R;continue}break}if(F.child===W.child){for(W=F.child;W;){if(W===S)return nr(F),m;if(W===R)return nr(F),v;W=W.sibling}throw Error(n(188))}if(S.return!==R.return)S=F,R=W;else{for(var ee=!1,de=F.child;de;){if(de===S){ee=!0,S=F,R=W;break}if(de===R){ee=!0,R=F,S=W;break}de=de.sibling}if(!ee){for(de=W.child;de;){if(de===S){ee=!0,S=W,R=F;break}if(de===R){ee=!0,R=W,S=F;break}de=de.sibling}if(!ee)throw Error(n(189))}}if(S.alternate!==R)throw Error(n(190))}if(S.tag!==3)throw Error(n(188));return S.stateNode.current===S?m:v}function fr(m){return m=Dn(m),m!==null?Lr(m):null}function Lr(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var v=Lr(m);if(v!==null)return v;m=m.sibling}return null}var an=t.unstable_scheduleCallback,dr=t.unstable_cancelCallback,si=t.unstable_shouldYield,hr=t.unstable_requestPaint,On=t.unstable_now,zs=t.unstable_getCurrentPriorityLevel,ti=t.unstable_ImmediatePriority,Vs=t.unstable_UserBlockingPriority,wi=t.unstable_NormalPriority,Hi=t.unstable_LowPriority,no=t.unstable_IdlePriority,Hs=null,oi=null;function Mu(m){if(oi&&typeof oi.onCommitFiberRoot=="function")try{oi.onCommitFiberRoot(Hs,m,void 0,(m.current.flags&128)===128)}catch{}}var fs=Math.clz32?Math.clz32:ue,te=Math.log,ve=Math.LN2;function ue(m){return m>>>=0,m===0?32:31-(te(m)/ve|0)|0}var Te=64,Pe=4194304;function Se(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function Xe(m,v){var S=m.pendingLanes;if(S===0)return 0;var R=0,F=m.suspendedLanes,W=m.pingedLanes,ee=S&268435455;if(ee!==0){var de=ee&~F;de!==0?R=Se(de):(W&=ee,W!==0&&(R=Se(W)))}else ee=S&~F,ee!==0?R=Se(ee):W!==0&&(R=Se(W));if(R===0)return 0;if(v!==0&&v!==R&&!(v&F)&&(F=R&-R,W=v&-v,F>=W||F===16&&(W&4194240)!==0))return v;if(R&4&&(R|=S&16),v=m.entangledLanes,v!==0)for(m=m.entanglements,v&=R;0<v;)S=31-fs(v),F=1<<S,R|=m[S],v&=~F;return R}function at(m,v){switch(m){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lt(m,v){for(var S=m.suspendedLanes,R=m.pingedLanes,F=m.expirationTimes,W=m.pendingLanes;0<W;){var ee=31-fs(W),de=1<<ee,Ee=F[ee];Ee===-1?(!(de&S)||de&R)&&(F[ee]=at(de,v)):Ee<=v&&(m.expiredLanes|=de),W&=~de}}function ut(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function _t(){var m=Te;return Te<<=1,!(Te&4194240)&&(Te=64),m}function Lt(m){for(var v=[],S=0;31>S;S++)v.push(m);return v}function pn(m,v,S){m.pendingLanes|=v,v!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,v=31-fs(v),m[v]=S}function Qt(m,v){var S=m.pendingLanes&~v;m.pendingLanes=v,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=v,m.mutableReadLanes&=v,m.entangledLanes&=v,v=m.entanglements;var R=m.eventTimes;for(m=m.expirationTimes;0<S;){var F=31-fs(S),W=1<<F;v[F]=0,R[F]=-1,m[F]=-1,S&=~W}}function Jn(m,v){var S=m.entangledLanes|=v;for(m=m.entanglements;S;){var R=31-fs(S),F=1<<R;F&v|m[R]&v&&(m[R]|=v),S&=~F}}var Zt=0;function Fr(m){return m&=-m,1<m?4<m?m&268435455?16:536870912:4:1}var ro,$u,Cc,Mg,Hd,$g=!1,Xo=[],ss=null,So=null,Ja=null,qd=new Map,Za=new Map,Lu=[],b_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ac(m,v){switch(m){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":So=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":qd.delete(v.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(v.pointerId)}}function qs(m,v,S,R,F,W){return m===null||m.nativeEvent!==W?(m={blockedOn:v,domEventName:S,eventSystemFlags:R,nativeEvent:W,targetContainers:[F]},v!==null&&(v=cT(v),v!==null&&$u(v)),m):(m.eventSystemFlags|=R,v=m.targetContainers,F!==null&&v.indexOf(F)===-1&&v.push(F),m)}function ZS(m,v,S,R,F){switch(v){case"focusin":return ss=qs(ss,m,v,S,R,F),!0;case"dragenter":return So=qs(So,m,v,S,R,F),!0;case"mouseover":return Ja=qs(Ja,m,v,S,R,F),!0;case"pointerover":var W=F.pointerId;return qd.set(W,qs(qd.get(W)||null,m,v,S,R,F)),!0;case"gotpointercapture":return W=F.pointerId,Za.set(W,qs(Za.get(W)||null,m,v,S,R,F)),!0}return!1}function bv(m){var v=Ev(m.target);if(v!==null){var S=en(v);if(S!==null){if(v=S.tag,v===13){if(v=Qn(S),v!==null){m.blockedOn=v,Hd(m.priority,function(){Cc(S)});return}}else if(v===3&&S.stateNode.current.memoizedState.isDehydrated){m.blockedOn=S.tag===3?S.stateNode.containerInfo:null;return}}}m.blockedOn=null}function Ic(m){if(m.blockedOn!==null)return!1;for(var v=m.targetContainers;0<v.length;){var S=Cr(m.domEventName,m.eventSystemFlags,v[0],m.nativeEvent);if(S===null){S=m.nativeEvent;var R=new S.constructor(S.type,S);lr=R,S.target.dispatchEvent(R),lr=null}else return v=cT(S),v!==null&&$u(v),m.blockedOn=S,!1;v.shift()}return!0}function Wd(m,v,S){Ic(m)&&S.delete(v)}function __(){$g=!1,ss!==null&&Ic(ss)&&(ss=null),So!==null&&Ic(So)&&(So=null),Ja!==null&&Ic(Ja)&&(Ja=null),qd.forEach(Wd),Za.forEach(Wd)}function Ml(m,v){m.blockedOn===v&&(m.blockedOn=null,$g||($g=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,__)))}function Fu(m){function v(F){return Ml(F,m)}if(0<Xo.length){Ml(Xo[0],m);for(var S=1;S<Xo.length;S++){var R=Xo[S];R.blockedOn===m&&(R.blockedOn=null)}}for(ss!==null&&Ml(ss,m),So!==null&&Ml(So,m),Ja!==null&&Ml(Ja,m),qd.forEach(v),Za.forEach(v),S=0;S<Lu.length;S++)R=Lu[S],R.blockedOn===m&&(R.blockedOn=null);for(;0<Lu.length&&(S=Lu[0],S.blockedOn===null);)bv(S),S.blockedOn===null&&Lu.shift()}var kf=C.ReactCurrentBatchConfig,fe=!0;function we(m,v,S,R){var F=Zt,W=kf.transition;kf.transition=null;try{Zt=1,Ut(m,v,S,R)}finally{Zt=F,kf.transition=W}}function qe(m,v,S,R){var F=Zt,W=kf.transition;kf.transition=null;try{Zt=4,Ut(m,v,S,R)}finally{Zt=F,kf.transition=W}}function Ut(m,v,S,R){if(fe){var F=Cr(m,v,S,R);if(F===null)g5(m,v,R,Hn,S),Ac(m,R);else if(ZS(F,m,v,S,R))R.stopPropagation();else if(Ac(m,R),v&4&&-1<b_.indexOf(m)){for(;F!==null;){var W=cT(F);if(W!==null&&ro(W),W=Cr(m,v,S,R),W===null&&g5(m,v,R,Hn,S),W===F)break;F=W}F!==null&&R.stopPropagation()}else g5(m,v,R,null,S)}}var Hn=null;function Cr(m,v,S,R){if(Hn=null,m=Us(R),m=Ev(m),m!==null)if(v=en(m),v===null)m=null;else if(S=v.tag,S===13){if(m=Qn(v),m!==null)return m;m=null}else if(S===3){if(v.stateNode.current.memoizedState.isDehydrated)return v.tag===3?v.stateNode.containerInfo:null;m=null}else v!==m&&(m=null);return Hn=m,null}function ni(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(zs()){case ti:return 1;case Vs:return 4;case wi:case Hi:return 16;case no:return 536870912;default:return 16}default:return 16}}var Mn=null,Kr=null,Ci=null;function io(){if(Ci)return Ci;var m,v=Kr,S=v.length,R,F="value"in Mn?Mn.value:Mn.textContent,W=F.length;for(m=0;m<S&&v[m]===F[m];m++);var ee=S-m;for(R=1;R<=ee&&v[S-R]===F[W-R];R++);return Ci=F.slice(m,1<R?1-R:void 0)}function kc(m){var v=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&v===13&&(m=13)):m=v,m===10&&(m=13),32<=m||m===13?m:0}function ju(){return!0}function Mp(){return!1}function Ws(m){function v(S,R,F,W,ee){this._reactName=S,this._targetInst=F,this.type=R,this.nativeEvent=W,this.target=ee,this.currentTarget=null;for(var de in m)m.hasOwnProperty(de)&&(S=m[de],this[de]=S?S(W):W[de]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?ju:Mp,this.isPropagationStopped=Mp,this}return L(v.prototype,{preventDefault:function(){this.defaultPrevented=!0;var S=this.nativeEvent;S&&(S.preventDefault?S.preventDefault():typeof S.returnValue!="unknown"&&(S.returnValue=!1),this.isDefaultPrevented=ju)},stopPropagation:function(){var S=this.nativeEvent;S&&(S.stopPropagation?S.stopPropagation():typeof S.cancelBubble!="unknown"&&(S.cancelBubble=!0),this.isPropagationStopped=ju)},persist:function(){},isPersistent:ju}),v}var Rf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},w_=Ws(Rf),Gd=L({},Rf,{view:0,detail:0}),o5=Ws(Gd),E_,$p,Lg,_v=L({},Gd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yd,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Lg&&(Lg&&m.type==="mousemove"?(E_=m.screenX-Lg.screenX,$p=m.screenY-Lg.screenY):$p=E_=0,Lg=m),E_)},movementY:function(m){return"movementY"in m?m.movementY:$p}}),x_=Ws(_v),eT=L({},_v,{dataTransfer:0}),iR=Ws(eT),S_=L({},Gd,{relatedTarget:0}),T_=Ws(S_),sR=L({},Rf,{animationName:0,elapsedTime:0,pseudoElement:0}),Lp=Ws(sR),oR=L({},Rf,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),aR=Ws(oR),uR=L({},Rf,{data:0}),tT=Ws(uR),C_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cR(m){var v=this.nativeEvent;return v.getModifierState?v.getModifierState(m):(m=lR[m])?!!v[m]:!1}function Yd(){return cR}var I=L({},Gd,{key:function(m){if(m.key){var v=C_[m.key]||m.key;if(v!=="Unidentified")return v}return m.type==="keypress"?(m=kc(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?eu[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yd,charCode:function(m){return m.type==="keypress"?kc(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?kc(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),H=Ws(I),J=L({},_v,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ie=Ws(J),Oe=L({},Gd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yd}),Ge=Ws(Oe),It=L({},Rf,{propertyName:0,elapsedTime:0,pseudoElement:0}),ai=Ws(It),so=L({},_v,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=Ws(so),To=[9,13,27,32],Gs=a&&"CompositionEvent"in window,Rc=null;a&&"documentMode"in document&&(Rc=document.documentMode);var $l=a&&"TextEvent"in window&&!Rc,wv=a&&(!Gs||Rc&&8<Rc&&11>=Rc),A_=" ",cne=!1;function fne(m,v){switch(m){case"keyup":return To.indexOf(v.keyCode)!==-1;case"keydown":return v.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dne(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var I_=!1;function gFe(m,v){switch(m){case"compositionend":return dne(v);case"keypress":return v.which!==32?null:(cne=!0,A_);case"textInput":return m=v.data,m===A_&&cne?null:m;default:return null}}function yFe(m,v){if(I_)return m==="compositionend"||!Gs&&fne(m,v)?(m=io(),Ci=Kr=Mn=null,I_=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(v.ctrlKey||v.altKey||v.metaKey)||v.ctrlKey&&v.altKey){if(v.char&&1<v.char.length)return v.char;if(v.which)return String.fromCharCode(v.which)}return null;case"compositionend":return wv&&v.locale!=="ko"?null:v.data;default:return null}}var vFe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hne(m){var v=m&&m.nodeName&&m.nodeName.toLowerCase();return v==="input"?!!vFe[m.type]:v==="textarea"}function pne(m,v,S,R){is(R),v=mR(v,"onChange"),0<v.length&&(S=new w_("onChange","change",null,S,R),m.push({event:S,listeners:v}))}var nT=null,rT=null;function bFe(m){Pne(m,0)}function fR(m){var v=D_(m);if(re(v))return m}function _Fe(m,v){if(m==="change")return v}var mne=!1;if(a){var a5;if(a){var u5="oninput"in document;if(!u5){var gne=document.createElement("div");gne.setAttribute("oninput","return;"),u5=typeof gne.oninput=="function"}a5=u5}else a5=!1;mne=a5&&(!document.documentMode||9<document.documentMode)}function yne(){nT&&(nT.detachEvent("onpropertychange",vne),rT=nT=null)}function vne(m){if(m.propertyName==="value"&&fR(rT)){var v=[];pne(v,rT,m,Us(m)),Ti(bFe,v)}}function wFe(m,v,S){m==="focusin"?(yne(),nT=v,rT=S,nT.attachEvent("onpropertychange",vne)):m==="focusout"&&yne()}function EFe(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return fR(rT)}function xFe(m,v){if(m==="click")return fR(v)}function SFe(m,v){if(m==="input"||m==="change")return fR(v)}function TFe(m,v){return m===v&&(m!==0||1/m===1/v)||m!==m&&v!==v}var Nf=typeof Object.is=="function"?Object.is:TFe;function iT(m,v){if(Nf(m,v))return!0;if(typeof m!="object"||m===null||typeof v!="object"||v===null)return!1;var S=Object.keys(m),R=Object.keys(v);if(S.length!==R.length)return!1;for(R=0;R<S.length;R++){var F=S[R];if(!u.call(v,F)||!Nf(m[F],v[F]))return!1}return!0}function bne(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function _ne(m,v){var S=bne(m);m=0;for(var R;S;){if(S.nodeType===3){if(R=m+S.textContent.length,m<=v&&R>=v)return{node:S,offset:v-m};m=R}e:{for(;S;){if(S.nextSibling){S=S.nextSibling;break e}S=S.parentNode}S=void 0}S=bne(S)}}function wne(m,v){return m&&v?m===v?!0:m&&m.nodeType===3?!1:v&&v.nodeType===3?wne(m,v.parentNode):"contains"in m?m.contains(v):m.compareDocumentPosition?!!(m.compareDocumentPosition(v)&16):!1:!1}function Ene(){for(var m=window,v=xe();v instanceof m.HTMLIFrameElement;){try{var S=typeof v.contentWindow.location.href=="string"}catch{S=!1}if(S)m=v.contentWindow;else break;v=xe(m.document)}return v}function l5(m){var v=m&&m.nodeName&&m.nodeName.toLowerCase();return v&&(v==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||v==="textarea"||m.contentEditable==="true")}function CFe(m){var v=Ene(),S=m.focusedElem,R=m.selectionRange;if(v!==S&&S&&S.ownerDocument&&wne(S.ownerDocument.documentElement,S)){if(R!==null&&l5(S)){if(v=R.start,m=R.end,m===void 0&&(m=v),"selectionStart"in S)S.selectionStart=v,S.selectionEnd=Math.min(m,S.value.length);else if(m=(v=S.ownerDocument||document)&&v.defaultView||window,m.getSelection){m=m.getSelection();var F=S.textContent.length,W=Math.min(R.start,F);R=R.end===void 0?W:Math.min(R.end,F),!m.extend&&W>R&&(F=R,R=W,W=F),F=_ne(S,W);var ee=_ne(S,R);F&&ee&&(m.rangeCount!==1||m.anchorNode!==F.node||m.anchorOffset!==F.offset||m.focusNode!==ee.node||m.focusOffset!==ee.offset)&&(v=v.createRange(),v.setStart(F.node,F.offset),m.removeAllRanges(),W>R?(m.addRange(v),m.extend(ee.node,ee.offset)):(v.setEnd(ee.node,ee.offset),m.addRange(v)))}}for(v=[],m=S;m=m.parentNode;)m.nodeType===1&&v.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<v.length;S++)m=v[S],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var AFe=a&&"documentMode"in document&&11>=document.documentMode,k_=null,c5=null,sT=null,f5=!1;function xne(m,v,S){var R=S.window===S?S.document:S.nodeType===9?S:S.ownerDocument;f5||k_==null||k_!==xe(R)||(R=k_,"selectionStart"in R&&l5(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),sT&&iT(sT,R)||(sT=R,R=mR(c5,"onSelect"),0<R.length&&(v=new w_("onSelect","select",null,v,S),m.push({event:v,listeners:R}),v.target=k_)))}function dR(m,v){var S={};return S[m.toLowerCase()]=v.toLowerCase(),S["Webkit"+m]="webkit"+v,S["Moz"+m]="moz"+v,S}var R_={animationend:dR("Animation","AnimationEnd"),animationiteration:dR("Animation","AnimationIteration"),animationstart:dR("Animation","AnimationStart"),transitionend:dR("Transition","TransitionEnd")},d5={},Sne={};a&&(Sne=document.createElement("div").style,"AnimationEvent"in window||(delete R_.animationend.animation,delete R_.animationiteration.animation,delete R_.animationstart.animation),"TransitionEvent"in window||delete R_.transitionend.transition);function hR(m){if(d5[m])return d5[m];if(!R_[m])return m;var v=R_[m],S;for(S in v)if(v.hasOwnProperty(S)&&S in Sne)return d5[m]=v[S];return m}var Tne=hR("animationend"),Cne=hR("animationiteration"),Ane=hR("animationstart"),Ine=hR("transitionend"),kne=new Map,Rne="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fg(m,v){kne.set(m,v),s(v,[m])}for(var h5=0;h5<Rne.length;h5++){var p5=Rne[h5],IFe=p5.toLowerCase(),kFe=p5[0].toUpperCase()+p5.slice(1);Fg(IFe,"on"+kFe)}Fg(Tne,"onAnimationEnd"),Fg(Cne,"onAnimationIteration"),Fg(Ane,"onAnimationStart"),Fg("dblclick","onDoubleClick"),Fg("focusin","onFocus"),Fg("focusout","onBlur"),Fg(Ine,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RFe=new Set("cancel close invalid load scroll toggle".split(" ").concat(oT));function Nne(m,v,S){var R=m.type||"unknown-event";m.currentTarget=S,Bt(R,v,void 0,m),m.currentTarget=null}function Pne(m,v){v=(v&4)!==0;for(var S=0;S<m.length;S++){var R=m[S],F=R.event;R=R.listeners;e:{var W=void 0;if(v)for(var ee=R.length-1;0<=ee;ee--){var de=R[ee],Ee=de.instance,He=de.currentTarget;if(de=de.listener,Ee!==W&&F.isPropagationStopped())break e;Nne(F,de,He),W=Ee}else for(ee=0;ee<R.length;ee++){if(de=R[ee],Ee=de.instance,He=de.currentTarget,de=de.listener,Ee!==W&&F.isPropagationStopped())break e;Nne(F,de,He),W=Ee}}}if(_e)throw m=je,_e=!1,je=null,m}function Mi(m,v){var S=v[E5];S===void 0&&(S=v[E5]=new Set);var R=m+"__bubble";S.has(R)||(Dne(v,m,2,!1),S.add(R))}function m5(m,v,S){var R=0;v&&(R|=4),Dne(S,m,R,v)}var pR="_reactListening"+Math.random().toString(36).slice(2);function aT(m){if(!m[pR]){m[pR]=!0,r.forEach(function(S){S!=="selectionchange"&&(RFe.has(S)||m5(S,!1,m),m5(S,!0,m))});var v=m.nodeType===9?m:m.ownerDocument;v===null||v[pR]||(v[pR]=!0,m5("selectionchange",!1,v))}}function Dne(m,v,S,R){switch(ni(v)){case 1:var F=we;break;case 4:F=qe;break;default:F=Ut}S=F.bind(null,v,S,m),F=void 0,!xo||v!=="touchstart"&&v!=="touchmove"&&v!=="wheel"||(F=!0),R?F!==void 0?m.addEventListener(v,S,{capture:!0,passive:F}):m.addEventListener(v,S,!0):F!==void 0?m.addEventListener(v,S,{passive:F}):m.addEventListener(v,S,!1)}function g5(m,v,S,R,F){var W=R;if(!(v&1)&&!(v&2)&&R!==null)e:for(;;){if(R===null)return;var ee=R.tag;if(ee===3||ee===4){var de=R.stateNode.containerInfo;if(de===F||de.nodeType===8&&de.parentNode===F)break;if(ee===4)for(ee=R.return;ee!==null;){var Ee=ee.tag;if((Ee===3||Ee===4)&&(Ee=ee.stateNode.containerInfo,Ee===F||Ee.nodeType===8&&Ee.parentNode===F))return;ee=ee.return}for(;de!==null;){if(ee=Ev(de),ee===null)return;if(Ee=ee.tag,Ee===5||Ee===6){R=W=ee;continue e}de=de.parentNode}}R=R.return}Ti(function(){var He=W,dt=Us(S),gt=[];e:{var ct=kne.get(m);if(ct!==void 0){var jt=w_,Ht=m;switch(m){case"keypress":if(kc(S)===0)break e;case"keydown":case"keyup":jt=H;break;case"focusin":Ht="focus",jt=T_;break;case"focusout":Ht="blur",jt=T_;break;case"beforeblur":case"afterblur":jt=T_;break;case"click":if(S.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":jt=x_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":jt=iR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":jt=Ge;break;case Tne:case Cne:case Ane:jt=Lp;break;case Ine:jt=ai;break;case"scroll":jt=o5;break;case"wheel":jt=Ar;break;case"copy":case"cut":case"paste":jt=aR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":jt=ie}var Wt=(v&4)!==0,As=!Wt&&m==="scroll",Me=Wt?ct!==null?ct+"Capture":null:ct;Wt=[];for(var Ae=He,Fe;Ae!==null;){Fe=Ae;var Tt=Fe.stateNode;if(Fe.tag===5&&Tt!==null&&(Fe=Tt,Me!==null&&(Tt=$r(Ae,Me),Tt!=null&&Wt.push(uT(Ae,Tt,Fe)))),As)break;Ae=Ae.return}0<Wt.length&&(ct=new jt(ct,Ht,null,S,dt),gt.push({event:ct,listeners:Wt}))}}if(!(v&7)){e:{if(ct=m==="mouseover"||m==="pointerover",jt=m==="mouseout"||m==="pointerout",ct&&S!==lr&&(Ht=S.relatedTarget||S.fromElement)&&(Ev(Ht)||Ht[Fp]))break e;if((jt||ct)&&(ct=dt.window===dt?dt:(ct=dt.ownerDocument)?ct.defaultView||ct.parentWindow:window,jt?(Ht=S.relatedTarget||S.toElement,jt=He,Ht=Ht?Ev(Ht):null,Ht!==null&&(As=en(Ht),Ht!==As||Ht.tag!==5&&Ht.tag!==6)&&(Ht=null)):(jt=null,Ht=He),jt!==Ht)){if(Wt=x_,Tt="onMouseLeave",Me="onMouseEnter",Ae="mouse",(m==="pointerout"||m==="pointerover")&&(Wt=ie,Tt="onPointerLeave",Me="onPointerEnter",Ae="pointer"),As=jt==null?ct:D_(jt),Fe=Ht==null?ct:D_(Ht),ct=new Wt(Tt,Ae+"leave",jt,S,dt),ct.target=As,ct.relatedTarget=Fe,Tt=null,Ev(dt)===He&&(Wt=new Wt(Me,Ae+"enter",Ht,S,dt),Wt.target=Fe,Wt.relatedTarget=As,Tt=Wt),As=Tt,jt&&Ht)t:{for(Wt=jt,Me=Ht,Ae=0,Fe=Wt;Fe;Fe=N_(Fe))Ae++;for(Fe=0,Tt=Me;Tt;Tt=N_(Tt))Fe++;for(;0<Ae-Fe;)Wt=N_(Wt),Ae--;for(;0<Fe-Ae;)Me=N_(Me),Fe--;for(;Ae--;){if(Wt===Me||Me!==null&&Wt===Me.alternate)break t;Wt=N_(Wt),Me=N_(Me)}Wt=null}else Wt=null;jt!==null&&One(gt,ct,jt,Wt,!1),Ht!==null&&As!==null&&One(gt,As,Ht,Wt,!0)}}e:{if(ct=He?D_(He):window,jt=ct.nodeName&&ct.nodeName.toLowerCase(),jt==="select"||jt==="input"&&ct.type==="file")var Jt=_Fe;else if(hne(ct))if(mne)Jt=SFe;else{Jt=EFe;var fn=wFe}else(jt=ct.nodeName)&&jt.toLowerCase()==="input"&&(ct.type==="checkbox"||ct.type==="radio")&&(Jt=xFe);if(Jt&&(Jt=Jt(m,He))){pne(gt,Jt,S,dt);break e}fn&&fn(m,ct,He),m==="focusout"&&(fn=ct._wrapperState)&&fn.controlled&&ct.type==="number"&&rt(ct,"number",ct.value)}switch(fn=He?D_(He):window,m){case"focusin":(hne(fn)||fn.contentEditable==="true")&&(k_=fn,c5=He,sT=null);break;case"focusout":sT=c5=k_=null;break;case"mousedown":f5=!0;break;case"contextmenu":case"mouseup":case"dragend":f5=!1,xne(gt,S,dt);break;case"selectionchange":if(AFe)break;case"keydown":case"keyup":xne(gt,S,dt)}var dn;if(Gs)e:{switch(m){case"compositionstart":var xn="onCompositionStart";break e;case"compositionend":xn="onCompositionEnd";break e;case"compositionupdate":xn="onCompositionUpdate";break e}xn=void 0}else I_?fne(m,S)&&(xn="onCompositionEnd"):m==="keydown"&&S.keyCode===229&&(xn="onCompositionStart");xn&&(wv&&S.locale!=="ko"&&(I_||xn!=="onCompositionStart"?xn==="onCompositionEnd"&&I_&&(dn=io()):(Mn=dt,Kr="value"in Mn?Mn.value:Mn.textContent,I_=!0)),fn=mR(He,xn),0<fn.length&&(xn=new tT(xn,m,null,S,dt),gt.push({event:xn,listeners:fn}),dn?xn.data=dn:(dn=dne(S),dn!==null&&(xn.data=dn)))),(dn=$l?gFe(m,S):yFe(m,S))&&(He=mR(He,"onBeforeInput"),0<He.length&&(dt=new tT("onBeforeInput","beforeinput",null,S,dt),gt.push({event:dt,listeners:He}),dt.data=dn))}Pne(gt,v)})}function uT(m,v,S){return{instance:m,listener:v,currentTarget:S}}function mR(m,v){for(var S=v+"Capture",R=[];m!==null;){var F=m,W=F.stateNode;F.tag===5&&W!==null&&(F=W,W=$r(m,S),W!=null&&R.unshift(uT(m,W,F)),W=$r(m,v),W!=null&&R.push(uT(m,W,F))),m=m.return}return R}function N_(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function One(m,v,S,R,F){for(var W=v._reactName,ee=[];S!==null&&S!==R;){var de=S,Ee=de.alternate,He=de.stateNode;if(Ee!==null&&Ee===R)break;de.tag===5&&He!==null&&(de=He,F?(Ee=$r(S,W),Ee!=null&&ee.unshift(uT(S,Ee,de))):F||(Ee=$r(S,W),Ee!=null&&ee.push(uT(S,Ee,de)))),S=S.return}ee.length!==0&&m.push({event:v,listeners:ee})}var NFe=/\r\n?/g,PFe=/\u0000|\uFFFD/g;function Mne(m){return(typeof m=="string"?m:""+m).replace(NFe,`
`).replace(PFe,"")}function gR(m,v,S){if(v=Mne(v),Mne(m)!==v&&S)throw Error(n(425))}function yR(){}var y5=null,v5=null;function b5(m,v){return m==="textarea"||m==="noscript"||typeof v.children=="string"||typeof v.children=="number"||typeof v.dangerouslySetInnerHTML=="object"&&v.dangerouslySetInnerHTML!==null&&v.dangerouslySetInnerHTML.__html!=null}var _5=typeof setTimeout=="function"?setTimeout:void 0,DFe=typeof clearTimeout=="function"?clearTimeout:void 0,$ne=typeof Promise=="function"?Promise:void 0,OFe=typeof queueMicrotask=="function"?queueMicrotask:typeof $ne<"u"?function(m){return $ne.resolve(null).then(m).catch(MFe)}:_5;function MFe(m){setTimeout(function(){throw m})}function w5(m,v){var S=v,R=0;do{var F=S.nextSibling;if(m.removeChild(S),F&&F.nodeType===8)if(S=F.data,S==="/$"){if(R===0){m.removeChild(F),Fu(v);return}R--}else S!=="$"&&S!=="$?"&&S!=="$!"||R++;S=F}while(S);Fu(v)}function jg(m){for(;m!=null;m=m.nextSibling){var v=m.nodeType;if(v===1||v===3)break;if(v===8){if(v=m.data,v==="$"||v==="$!"||v==="$?")break;if(v==="/$")return null}}return m}function Lne(m){m=m.previousSibling;for(var v=0;m;){if(m.nodeType===8){var S=m.data;if(S==="$"||S==="$!"||S==="$?"){if(v===0)return m;v--}else S==="/$"&&v++}m=m.previousSibling}return null}var P_=Math.random().toString(36).slice(2),Kd="__reactFiber$"+P_,lT="__reactProps$"+P_,Fp="__reactContainer$"+P_,E5="__reactEvents$"+P_,$Fe="__reactListeners$"+P_,LFe="__reactHandles$"+P_;function Ev(m){var v=m[Kd];if(v)return v;for(var S=m.parentNode;S;){if(v=S[Fp]||S[Kd]){if(S=v.alternate,v.child!==null||S!==null&&S.child!==null)for(m=Lne(m);m!==null;){if(S=m[Kd])return S;m=Lne(m)}return v}m=S,S=m.parentNode}return null}function cT(m){return m=m[Kd]||m[Fp],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function D_(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(n(33))}function vR(m){return m[lT]||null}var x5=[],O_=-1;function Bg(m){return{current:m}}function $i(m){0>O_||(m.current=x5[O_],x5[O_]=null,O_--)}function Ai(m,v){O_++,x5[O_]=m.current,m.current=v}var Ug={},_a=Bg(Ug),Bu=Bg(!1),xv=Ug;function M_(m,v){var S=m.type.contextTypes;if(!S)return Ug;var R=m.stateNode;if(R&&R.__reactInternalMemoizedUnmaskedChildContext===v)return R.__reactInternalMemoizedMaskedChildContext;var F={},W;for(W in S)F[W]=v[W];return R&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=v,m.__reactInternalMemoizedMaskedChildContext=F),F}function Uu(m){return m=m.childContextTypes,m!=null}function bR(){$i(Bu),$i(_a)}function Fne(m,v,S){if(_a.current!==Ug)throw Error(n(168));Ai(_a,v),Ai(Bu,S)}function jne(m,v,S){var R=m.stateNode;if(v=v.childContextTypes,typeof R.getChildContext!="function")return S;R=R.getChildContext();for(var F in R)if(!(F in v))throw Error(n(108,he(m)||"Unknown",F));return L({},S,R)}function _R(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Ug,xv=_a.current,Ai(_a,m),Ai(Bu,Bu.current),!0}function Bne(m,v,S){var R=m.stateNode;if(!R)throw Error(n(169));S?(m=jne(m,v,xv),R.__reactInternalMemoizedMergedChildContext=m,$i(Bu),$i(_a),Ai(_a,m)):$i(Bu),Ai(Bu,S)}var jp=null,wR=!1,S5=!1;function Une(m){jp===null?jp=[m]:jp.push(m)}function FFe(m){wR=!0,Une(m)}function zg(){if(!S5&&jp!==null){S5=!0;var m=0,v=Zt;try{var S=jp;for(Zt=1;m<S.length;m++){var R=S[m];do R=R(!0);while(R!==null)}jp=null,wR=!1}catch(F){throw jp!==null&&(jp=jp.slice(m+1)),an(ti,zg),F}finally{Zt=v,S5=!1}}return null}var $_=[],L_=0,ER=null,xR=0,Nc=[],Pc=0,Sv=null,Bp=1,Up="";function Tv(m,v){$_[L_++]=xR,$_[L_++]=ER,ER=m,xR=v}function zne(m,v,S){Nc[Pc++]=Bp,Nc[Pc++]=Up,Nc[Pc++]=Sv,Sv=m;var R=Bp;m=Up;var F=32-fs(R)-1;R&=~(1<<F),S+=1;var W=32-fs(v)+F;if(30<W){var ee=F-F%5;W=(R&(1<<ee)-1).toString(32),R>>=ee,F-=ee,Bp=1<<32-fs(v)+F|S<<F|R,Up=W+m}else Bp=1<<W|S<<F|R,Up=m}function T5(m){m.return!==null&&(Tv(m,1),zne(m,1,0))}function C5(m){for(;m===ER;)ER=$_[--L_],$_[L_]=null,xR=$_[--L_],$_[L_]=null;for(;m===Sv;)Sv=Nc[--Pc],Nc[Pc]=null,Up=Nc[--Pc],Nc[Pc]=null,Bp=Nc[--Pc],Nc[Pc]=null}var Ll=null,Fl=null,qi=!1,Pf=null;function Vne(m,v){var S=$c(5,null,null,0);S.elementType="DELETED",S.stateNode=v,S.return=m,v=m.deletions,v===null?(m.deletions=[S],m.flags|=16):v.push(S)}function Hne(m,v){switch(m.tag){case 5:var S=m.type;return v=v.nodeType!==1||S.toLowerCase()!==v.nodeName.toLowerCase()?null:v,v!==null?(m.stateNode=v,Ll=m,Fl=jg(v.firstChild),!0):!1;case 6:return v=m.pendingProps===""||v.nodeType!==3?null:v,v!==null?(m.stateNode=v,Ll=m,Fl=null,!0):!1;case 13:return v=v.nodeType!==8?null:v,v!==null?(S=Sv!==null?{id:Bp,overflow:Up}:null,m.memoizedState={dehydrated:v,treeContext:S,retryLane:1073741824},S=$c(18,null,null,0),S.stateNode=v,S.return=m,m.child=S,Ll=m,Fl=null,!0):!1;default:return!1}}function A5(m){return(m.mode&1)!==0&&(m.flags&128)===0}function I5(m){if(qi){var v=Fl;if(v){var S=v;if(!Hne(m,v)){if(A5(m))throw Error(n(418));v=jg(S.nextSibling);var R=Ll;v&&Hne(m,v)?Vne(R,S):(m.flags=m.flags&-4097|2,qi=!1,Ll=m)}}else{if(A5(m))throw Error(n(418));m.flags=m.flags&-4097|2,qi=!1,Ll=m}}}function qne(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;Ll=m}function SR(m){if(m!==Ll)return!1;if(!qi)return qne(m),qi=!0,!1;var v;if((v=m.tag!==3)&&!(v=m.tag!==5)&&(v=m.type,v=v!=="head"&&v!=="body"&&!b5(m.type,m.memoizedProps)),v&&(v=Fl)){if(A5(m))throw Wne(),Error(n(418));for(;v;)Vne(m,v),v=jg(v.nextSibling)}if(qne(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));e:{for(m=m.nextSibling,v=0;m;){if(m.nodeType===8){var S=m.data;if(S==="/$"){if(v===0){Fl=jg(m.nextSibling);break e}v--}else S!=="$"&&S!=="$!"&&S!=="$?"||v++}m=m.nextSibling}Fl=null}}else Fl=Ll?jg(m.stateNode.nextSibling):null;return!0}function Wne(){for(var m=Fl;m;)m=jg(m.nextSibling)}function F_(){Fl=Ll=null,qi=!1}function k5(m){Pf===null?Pf=[m]:Pf.push(m)}var jFe=C.ReactCurrentBatchConfig;function fT(m,v,S){if(m=S.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(n(309));var R=S.stateNode}if(!R)throw Error(n(147,m));var F=R,W=""+m;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===W?v.ref:(v=function(ee){var de=F.refs;ee===null?delete de[W]:de[W]=ee},v._stringRef=W,v)}if(typeof m!="string")throw Error(n(284));if(!S._owner)throw Error(n(290,m))}return m}function TR(m,v){throw m=Object.prototype.toString.call(v),Error(n(31,m==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":m))}function Gne(m){var v=m._init;return v(m._payload)}function Yne(m){function v(Me,Ae){if(m){var Fe=Me.deletions;Fe===null?(Me.deletions=[Ae],Me.flags|=16):Fe.push(Ae)}}function S(Me,Ae){if(!m)return null;for(;Ae!==null;)v(Me,Ae),Ae=Ae.sibling;return null}function R(Me,Ae){for(Me=new Map;Ae!==null;)Ae.key!==null?Me.set(Ae.key,Ae):Me.set(Ae.index,Ae),Ae=Ae.sibling;return Me}function F(Me,Ae){return Me=Xg(Me,Ae),Me.index=0,Me.sibling=null,Me}function W(Me,Ae,Fe){return Me.index=Fe,m?(Fe=Me.alternate,Fe!==null?(Fe=Fe.index,Fe<Ae?(Me.flags|=2,Ae):Fe):(Me.flags|=2,Ae)):(Me.flags|=1048576,Ae)}function ee(Me){return m&&Me.alternate===null&&(Me.flags|=2),Me}function de(Me,Ae,Fe,Tt){return Ae===null||Ae.tag!==6?(Ae=_j(Fe,Me.mode,Tt),Ae.return=Me,Ae):(Ae=F(Ae,Fe),Ae.return=Me,Ae)}function Ee(Me,Ae,Fe,Tt){var Jt=Fe.type;return Jt===A?dt(Me,Ae,Fe.props.children,Tt,Fe.key):Ae!==null&&(Ae.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===z&&Gne(Jt)===Ae.type)?(Tt=F(Ae,Fe.props),Tt.ref=fT(Me,Ae,Fe),Tt.return=Me,Tt):(Tt=KR(Fe.type,Fe.key,Fe.props,null,Me.mode,Tt),Tt.ref=fT(Me,Ae,Fe),Tt.return=Me,Tt)}function He(Me,Ae,Fe,Tt){return Ae===null||Ae.tag!==4||Ae.stateNode.containerInfo!==Fe.containerInfo||Ae.stateNode.implementation!==Fe.implementation?(Ae=wj(Fe,Me.mode,Tt),Ae.return=Me,Ae):(Ae=F(Ae,Fe.children||[]),Ae.return=Me,Ae)}function dt(Me,Ae,Fe,Tt,Jt){return Ae===null||Ae.tag!==7?(Ae=Dv(Fe,Me.mode,Tt,Jt),Ae.return=Me,Ae):(Ae=F(Ae,Fe),Ae.return=Me,Ae)}function gt(Me,Ae,Fe){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number")return Ae=_j(""+Ae,Me.mode,Fe),Ae.return=Me,Ae;if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case x:return Fe=KR(Ae.type,Ae.key,Ae.props,null,Me.mode,Fe),Fe.ref=fT(Me,null,Ae),Fe.return=Me,Fe;case T:return Ae=wj(Ae,Me.mode,Fe),Ae.return=Me,Ae;case z:var Tt=Ae._init;return gt(Me,Tt(Ae._payload),Fe)}if(ft(Ae)||Q(Ae))return Ae=Dv(Ae,Me.mode,Fe,null),Ae.return=Me,Ae;TR(Me,Ae)}return null}function ct(Me,Ae,Fe,Tt){var Jt=Ae!==null?Ae.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Jt!==null?null:de(Me,Ae,""+Fe,Tt);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case x:return Fe.key===Jt?Ee(Me,Ae,Fe,Tt):null;case T:return Fe.key===Jt?He(Me,Ae,Fe,Tt):null;case z:return Jt=Fe._init,ct(Me,Ae,Jt(Fe._payload),Tt)}if(ft(Fe)||Q(Fe))return Jt!==null?null:dt(Me,Ae,Fe,Tt,null);TR(Me,Fe)}return null}function jt(Me,Ae,Fe,Tt,Jt){if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return Me=Me.get(Fe)||null,de(Ae,Me,""+Tt,Jt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case x:return Me=Me.get(Tt.key===null?Fe:Tt.key)||null,Ee(Ae,Me,Tt,Jt);case T:return Me=Me.get(Tt.key===null?Fe:Tt.key)||null,He(Ae,Me,Tt,Jt);case z:var fn=Tt._init;return jt(Me,Ae,Fe,fn(Tt._payload),Jt)}if(ft(Tt)||Q(Tt))return Me=Me.get(Fe)||null,dt(Ae,Me,Tt,Jt,null);TR(Ae,Tt)}return null}function Ht(Me,Ae,Fe,Tt){for(var Jt=null,fn=null,dn=Ae,xn=Ae=0,Io=null;dn!==null&&xn<Fe.length;xn++){dn.index>xn?(Io=dn,dn=null):Io=dn.sibling;var jr=ct(Me,dn,Fe[xn],Tt);if(jr===null){dn===null&&(dn=Io);break}m&&dn&&jr.alternate===null&&v(Me,dn),Ae=W(jr,Ae,xn),fn===null?Jt=jr:fn.sibling=jr,fn=jr,dn=Io}if(xn===Fe.length)return S(Me,dn),qi&&Tv(Me,xn),Jt;if(dn===null){for(;xn<Fe.length;xn++)dn=gt(Me,Fe[xn],Tt),dn!==null&&(Ae=W(dn,Ae,xn),fn===null?Jt=dn:fn.sibling=dn,fn=dn);return qi&&Tv(Me,xn),Jt}for(dn=R(Me,dn);xn<Fe.length;xn++)Io=jt(dn,Me,xn,Fe[xn],Tt),Io!==null&&(m&&Io.alternate!==null&&dn.delete(Io.key===null?xn:Io.key),Ae=W(Io,Ae,xn),fn===null?Jt=Io:fn.sibling=Io,fn=Io);return m&&dn.forEach(function(Qg){return v(Me,Qg)}),qi&&Tv(Me,xn),Jt}function Wt(Me,Ae,Fe,Tt){var Jt=Q(Fe);if(typeof Jt!="function")throw Error(n(150));if(Fe=Jt.call(Fe),Fe==null)throw Error(n(151));for(var fn=Jt=null,dn=Ae,xn=Ae=0,Io=null,jr=Fe.next();dn!==null&&!jr.done;xn++,jr=Fe.next()){dn.index>xn?(Io=dn,dn=null):Io=dn.sibling;var Qg=ct(Me,dn,jr.value,Tt);if(Qg===null){dn===null&&(dn=Io);break}m&&dn&&Qg.alternate===null&&v(Me,dn),Ae=W(Qg,Ae,xn),fn===null?Jt=Qg:fn.sibling=Qg,fn=Qg,dn=Io}if(jr.done)return S(Me,dn),qi&&Tv(Me,xn),Jt;if(dn===null){for(;!jr.done;xn++,jr=Fe.next())jr=gt(Me,jr.value,Tt),jr!==null&&(Ae=W(jr,Ae,xn),fn===null?Jt=jr:fn.sibling=jr,fn=jr);return qi&&Tv(Me,xn),Jt}for(dn=R(Me,dn);!jr.done;xn++,jr=Fe.next())jr=jt(dn,Me,xn,jr.value,Tt),jr!==null&&(m&&jr.alternate!==null&&dn.delete(jr.key===null?xn:jr.key),Ae=W(jr,Ae,xn),fn===null?Jt=jr:fn.sibling=jr,fn=jr);return m&&dn.forEach(function(v4e){return v(Me,v4e)}),qi&&Tv(Me,xn),Jt}function As(Me,Ae,Fe,Tt){if(typeof Fe=="object"&&Fe!==null&&Fe.type===A&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case x:e:{for(var Jt=Fe.key,fn=Ae;fn!==null;){if(fn.key===Jt){if(Jt=Fe.type,Jt===A){if(fn.tag===7){S(Me,fn.sibling),Ae=F(fn,Fe.props.children),Ae.return=Me,Me=Ae;break e}}else if(fn.elementType===Jt||typeof Jt=="object"&&Jt!==null&&Jt.$$typeof===z&&Gne(Jt)===fn.type){S(Me,fn.sibling),Ae=F(fn,Fe.props),Ae.ref=fT(Me,fn,Fe),Ae.return=Me,Me=Ae;break e}S(Me,fn);break}else v(Me,fn);fn=fn.sibling}Fe.type===A?(Ae=Dv(Fe.props.children,Me.mode,Tt,Fe.key),Ae.return=Me,Me=Ae):(Tt=KR(Fe.type,Fe.key,Fe.props,null,Me.mode,Tt),Tt.ref=fT(Me,Ae,Fe),Tt.return=Me,Me=Tt)}return ee(Me);case T:e:{for(fn=Fe.key;Ae!==null;){if(Ae.key===fn)if(Ae.tag===4&&Ae.stateNode.containerInfo===Fe.containerInfo&&Ae.stateNode.implementation===Fe.implementation){S(Me,Ae.sibling),Ae=F(Ae,Fe.children||[]),Ae.return=Me,Me=Ae;break e}else{S(Me,Ae);break}else v(Me,Ae);Ae=Ae.sibling}Ae=wj(Fe,Me.mode,Tt),Ae.return=Me,Me=Ae}return ee(Me);case z:return fn=Fe._init,As(Me,Ae,fn(Fe._payload),Tt)}if(ft(Fe))return Ht(Me,Ae,Fe,Tt);if(Q(Fe))return Wt(Me,Ae,Fe,Tt);TR(Me,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"?(Fe=""+Fe,Ae!==null&&Ae.tag===6?(S(Me,Ae.sibling),Ae=F(Ae,Fe),Ae.return=Me,Me=Ae):(S(Me,Ae),Ae=_j(Fe,Me.mode,Tt),Ae.return=Me,Me=Ae),ee(Me)):S(Me,Ae)}return As}var j_=Yne(!0),Kne=Yne(!1),CR=Bg(null),AR=null,B_=null,R5=null;function N5(){R5=B_=AR=null}function P5(m){var v=CR.current;$i(CR),m._currentValue=v}function D5(m,v,S){for(;m!==null;){var R=m.alternate;if((m.childLanes&v)!==v?(m.childLanes|=v,R!==null&&(R.childLanes|=v)):R!==null&&(R.childLanes&v)!==v&&(R.childLanes|=v),m===S)break;m=m.return}}function U_(m,v){AR=m,R5=B_=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&v&&(zu=!0),m.firstContext=null)}function Dc(m){var v=m._currentValue;if(R5!==m)if(m={context:m,memoizedValue:v,next:null},B_===null){if(AR===null)throw Error(n(308));B_=m,AR.dependencies={lanes:0,firstContext:m}}else B_=B_.next=m;return v}var Cv=null;function O5(m){Cv===null?Cv=[m]:Cv.push(m)}function Xne(m,v,S,R){var F=v.interleaved;return F===null?(S.next=S,O5(v)):(S.next=F.next,F.next=S),v.interleaved=S,zp(m,R)}function zp(m,v){m.lanes|=v;var S=m.alternate;for(S!==null&&(S.lanes|=v),S=m,m=m.return;m!==null;)m.childLanes|=v,S=m.alternate,S!==null&&(S.childLanes|=v),S=m,m=m.return;return S.tag===3?S.stateNode:null}var Vg=!1;function M5(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qne(m,v){m=m.updateQueue,v.updateQueue===m&&(v.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function Vp(m,v){return{eventTime:m,lane:v,tag:0,payload:null,callback:null,next:null}}function Hg(m,v,S){var R=m.updateQueue;if(R===null)return null;if(R=R.shared,Nr&2){var F=R.pending;return F===null?v.next=v:(v.next=F.next,F.next=v),R.pending=v,zp(m,S)}return F=R.interleaved,F===null?(v.next=v,O5(R)):(v.next=F.next,F.next=v),R.interleaved=v,zp(m,S)}function IR(m,v,S){if(v=v.updateQueue,v!==null&&(v=v.shared,(S&4194240)!==0)){var R=v.lanes;R&=m.pendingLanes,S|=R,v.lanes=S,Jn(m,S)}}function Jne(m,v){var S=m.updateQueue,R=m.alternate;if(R!==null&&(R=R.updateQueue,S===R)){var F=null,W=null;if(S=S.firstBaseUpdate,S!==null){do{var ee={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};W===null?F=W=ee:W=W.next=ee,S=S.next}while(S!==null);W===null?F=W=v:W=W.next=v}else F=W=v;S={baseState:R.baseState,firstBaseUpdate:F,lastBaseUpdate:W,shared:R.shared,effects:R.effects},m.updateQueue=S;return}m=S.lastBaseUpdate,m===null?S.firstBaseUpdate=v:m.next=v,S.lastBaseUpdate=v}function kR(m,v,S,R){var F=m.updateQueue;Vg=!1;var W=F.firstBaseUpdate,ee=F.lastBaseUpdate,de=F.shared.pending;if(de!==null){F.shared.pending=null;var Ee=de,He=Ee.next;Ee.next=null,ee===null?W=He:ee.next=He,ee=Ee;var dt=m.alternate;dt!==null&&(dt=dt.updateQueue,de=dt.lastBaseUpdate,de!==ee&&(de===null?dt.firstBaseUpdate=He:de.next=He,dt.lastBaseUpdate=Ee))}if(W!==null){var gt=F.baseState;ee=0,dt=He=Ee=null,de=W;do{var ct=de.lane,jt=de.eventTime;if((R&ct)===ct){dt!==null&&(dt=dt.next={eventTime:jt,lane:0,tag:de.tag,payload:de.payload,callback:de.callback,next:null});e:{var Ht=m,Wt=de;switch(ct=v,jt=S,Wt.tag){case 1:if(Ht=Wt.payload,typeof Ht=="function"){gt=Ht.call(jt,gt,ct);break e}gt=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Wt.payload,ct=typeof Ht=="function"?Ht.call(jt,gt,ct):Ht,ct==null)break e;gt=L({},gt,ct);break e;case 2:Vg=!0}}de.callback!==null&&de.lane!==0&&(m.flags|=64,ct=F.effects,ct===null?F.effects=[de]:ct.push(de))}else jt={eventTime:jt,lane:ct,tag:de.tag,payload:de.payload,callback:de.callback,next:null},dt===null?(He=dt=jt,Ee=gt):dt=dt.next=jt,ee|=ct;if(de=de.next,de===null){if(de=F.shared.pending,de===null)break;ct=de,de=ct.next,ct.next=null,F.lastBaseUpdate=ct,F.shared.pending=null}}while(!0);if(dt===null&&(Ee=gt),F.baseState=Ee,F.firstBaseUpdate=He,F.lastBaseUpdate=dt,v=F.shared.interleaved,v!==null){F=v;do ee|=F.lane,F=F.next;while(F!==v)}else W===null&&(F.shared.lanes=0);kv|=ee,m.lanes=ee,m.memoizedState=gt}}function Zne(m,v,S){if(m=v.effects,v.effects=null,m!==null)for(v=0;v<m.length;v++){var R=m[v],F=R.callback;if(F!==null){if(R.callback=null,R=S,typeof F!="function")throw Error(n(191,F));F.call(R)}}}var dT={},Xd=Bg(dT),hT=Bg(dT),pT=Bg(dT);function Av(m){if(m===dT)throw Error(n(174));return m}function $5(m,v){switch(Ai(pT,v),Ai(hT,m),Ai(Xd,dT),m=v.nodeType,m){case 9:case 11:v=(v=v.documentElement)?v.namespaceURI:ze(null,"");break;default:m=m===8?v.parentNode:v,v=m.namespaceURI||null,m=m.tagName,v=ze(v,m)}$i(Xd),Ai(Xd,v)}function z_(){$i(Xd),$i(hT),$i(pT)}function ere(m){Av(pT.current);var v=Av(Xd.current),S=ze(v,m.type);v!==S&&(Ai(hT,m),Ai(Xd,S))}function L5(m){hT.current===m&&($i(Xd),$i(hT))}var os=Bg(0);function RR(m){for(var v=m;v!==null;){if(v.tag===13){var S=v.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||S.data==="$?"||S.data==="$!"))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if(v.flags&128)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===m)break;for(;v.sibling===null;){if(v.return===null||v.return===m)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var F5=[];function j5(){for(var m=0;m<F5.length;m++)F5[m]._workInProgressVersionPrimary=null;F5.length=0}var NR=C.ReactCurrentDispatcher,B5=C.ReactCurrentBatchConfig,Iv=0,as=null,oo=null,Co=null,PR=!1,mT=!1,gT=0,BFe=0;function wa(){throw Error(n(321))}function U5(m,v){if(v===null)return!1;for(var S=0;S<v.length&&S<m.length;S++)if(!Nf(m[S],v[S]))return!1;return!0}function z5(m,v,S,R,F,W){if(Iv=W,as=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,NR.current=m===null||m.memoizedState===null?HFe:qFe,m=S(R,F),mT){W=0;do{if(mT=!1,gT=0,25<=W)throw Error(n(301));W+=1,Co=oo=null,v.updateQueue=null,NR.current=WFe,m=S(R,F)}while(mT)}if(NR.current=MR,v=oo!==null&&oo.next!==null,Iv=0,Co=oo=as=null,PR=!1,v)throw Error(n(300));return m}function V5(){var m=gT!==0;return gT=0,m}function Qd(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Co===null?as.memoizedState=Co=m:Co=Co.next=m,Co}function Oc(){if(oo===null){var m=as.alternate;m=m!==null?m.memoizedState:null}else m=oo.next;var v=Co===null?as.memoizedState:Co.next;if(v!==null)Co=v,oo=m;else{if(m===null)throw Error(n(310));oo=m,m={memoizedState:oo.memoizedState,baseState:oo.baseState,baseQueue:oo.baseQueue,queue:oo.queue,next:null},Co===null?as.memoizedState=Co=m:Co=Co.next=m}return Co}function yT(m,v){return typeof v=="function"?v(m):v}function H5(m){var v=Oc(),S=v.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=m;var R=oo,F=R.baseQueue,W=S.pending;if(W!==null){if(F!==null){var ee=F.next;F.next=W.next,W.next=ee}R.baseQueue=F=W,S.pending=null}if(F!==null){W=F.next,R=R.baseState;var de=ee=null,Ee=null,He=W;do{var dt=He.lane;if((Iv&dt)===dt)Ee!==null&&(Ee=Ee.next={lane:0,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null}),R=He.hasEagerState?He.eagerState:m(R,He.action);else{var gt={lane:dt,action:He.action,hasEagerState:He.hasEagerState,eagerState:He.eagerState,next:null};Ee===null?(de=Ee=gt,ee=R):Ee=Ee.next=gt,as.lanes|=dt,kv|=dt}He=He.next}while(He!==null&&He!==W);Ee===null?ee=R:Ee.next=de,Nf(R,v.memoizedState)||(zu=!0),v.memoizedState=R,v.baseState=ee,v.baseQueue=Ee,S.lastRenderedState=R}if(m=S.interleaved,m!==null){F=m;do W=F.lane,as.lanes|=W,kv|=W,F=F.next;while(F!==m)}else F===null&&(S.lanes=0);return[v.memoizedState,S.dispatch]}function q5(m){var v=Oc(),S=v.queue;if(S===null)throw Error(n(311));S.lastRenderedReducer=m;var R=S.dispatch,F=S.pending,W=v.memoizedState;if(F!==null){S.pending=null;var ee=F=F.next;do W=m(W,ee.action),ee=ee.next;while(ee!==F);Nf(W,v.memoizedState)||(zu=!0),v.memoizedState=W,v.baseQueue===null&&(v.baseState=W),S.lastRenderedState=W}return[W,R]}function tre(){}function nre(m,v){var S=as,R=Oc(),F=v(),W=!Nf(R.memoizedState,F);if(W&&(R.memoizedState=F,zu=!0),R=R.queue,W5(sre.bind(null,S,R,m),[m]),R.getSnapshot!==v||W||Co!==null&&Co.memoizedState.tag&1){if(S.flags|=2048,vT(9,ire.bind(null,S,R,F,v),void 0,null),Ao===null)throw Error(n(349));Iv&30||rre(S,v,F)}return F}function rre(m,v,S){m.flags|=16384,m={getSnapshot:v,value:S},v=as.updateQueue,v===null?(v={lastEffect:null,stores:null},as.updateQueue=v,v.stores=[m]):(S=v.stores,S===null?v.stores=[m]:S.push(m))}function ire(m,v,S,R){v.value=S,v.getSnapshot=R,ore(v)&&are(m)}function sre(m,v,S){return S(function(){ore(v)&&are(m)})}function ore(m){var v=m.getSnapshot;m=m.value;try{var S=v();return!Nf(m,S)}catch{return!0}}function are(m){var v=zp(m,1);v!==null&&$f(v,m,1,-1)}function ure(m){var v=Qd();return typeof m=="function"&&(m=m()),v.memoizedState=v.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yT,lastRenderedState:m},v.queue=m,m=m.dispatch=VFe.bind(null,as,m),[v.memoizedState,m]}function vT(m,v,S,R){return m={tag:m,create:v,destroy:S,deps:R,next:null},v=as.updateQueue,v===null?(v={lastEffect:null,stores:null},as.updateQueue=v,v.lastEffect=m.next=m):(S=v.lastEffect,S===null?v.lastEffect=m.next=m:(R=S.next,S.next=m,m.next=R,v.lastEffect=m)),m}function lre(){return Oc().memoizedState}function DR(m,v,S,R){var F=Qd();as.flags|=m,F.memoizedState=vT(1|v,S,void 0,R===void 0?null:R)}function OR(m,v,S,R){var F=Oc();R=R===void 0?null:R;var W=void 0;if(oo!==null){var ee=oo.memoizedState;if(W=ee.destroy,R!==null&&U5(R,ee.deps)){F.memoizedState=vT(v,S,W,R);return}}as.flags|=m,F.memoizedState=vT(1|v,S,W,R)}function cre(m,v){return DR(8390656,8,m,v)}function W5(m,v){return OR(2048,8,m,v)}function fre(m,v){return OR(4,2,m,v)}function dre(m,v){return OR(4,4,m,v)}function hre(m,v){if(typeof v=="function")return m=m(),v(m),function(){v(null)};if(v!=null)return m=m(),v.current=m,function(){v.current=null}}function pre(m,v,S){return S=S!=null?S.concat([m]):null,OR(4,4,hre.bind(null,v,m),S)}function G5(){}function mre(m,v){var S=Oc();v=v===void 0?null:v;var R=S.memoizedState;return R!==null&&v!==null&&U5(v,R[1])?R[0]:(S.memoizedState=[m,v],m)}function gre(m,v){var S=Oc();v=v===void 0?null:v;var R=S.memoizedState;return R!==null&&v!==null&&U5(v,R[1])?R[0]:(m=m(),S.memoizedState=[m,v],m)}function yre(m,v,S){return Iv&21?(Nf(S,v)||(S=_t(),as.lanes|=S,kv|=S,m.baseState=!0),v):(m.baseState&&(m.baseState=!1,zu=!0),m.memoizedState=S)}function UFe(m,v){var S=Zt;Zt=S!==0&&4>S?S:4,m(!0);var R=B5.transition;B5.transition={};try{m(!1),v()}finally{Zt=S,B5.transition=R}}function vre(){return Oc().memoizedState}function zFe(m,v,S){var R=Yg(m);if(S={lane:R,action:S,hasEagerState:!1,eagerState:null,next:null},bre(m))_re(v,S);else if(S=Xne(m,v,S,R),S!==null){var F=nu();$f(S,m,R,F),wre(S,v,R)}}function VFe(m,v,S){var R=Yg(m),F={lane:R,action:S,hasEagerState:!1,eagerState:null,next:null};if(bre(m))_re(v,F);else{var W=m.alternate;if(m.lanes===0&&(W===null||W.lanes===0)&&(W=v.lastRenderedReducer,W!==null))try{var ee=v.lastRenderedState,de=W(ee,S);if(F.hasEagerState=!0,F.eagerState=de,Nf(de,ee)){var Ee=v.interleaved;Ee===null?(F.next=F,O5(v)):(F.next=Ee.next,Ee.next=F),v.interleaved=F;return}}catch{}finally{}S=Xne(m,v,F,R),S!==null&&(F=nu(),$f(S,m,R,F),wre(S,v,R))}}function bre(m){var v=m.alternate;return m===as||v!==null&&v===as}function _re(m,v){mT=PR=!0;var S=m.pending;S===null?v.next=v:(v.next=S.next,S.next=v),m.pending=v}function wre(m,v,S){if(S&4194240){var R=v.lanes;R&=m.pendingLanes,S|=R,v.lanes=S,Jn(m,S)}}var MR={readContext:Dc,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},HFe={readContext:Dc,useCallback:function(m,v){return Qd().memoizedState=[m,v===void 0?null:v],m},useContext:Dc,useEffect:cre,useImperativeHandle:function(m,v,S){return S=S!=null?S.concat([m]):null,DR(4194308,4,hre.bind(null,v,m),S)},useLayoutEffect:function(m,v){return DR(4194308,4,m,v)},useInsertionEffect:function(m,v){return DR(4,2,m,v)},useMemo:function(m,v){var S=Qd();return v=v===void 0?null:v,m=m(),S.memoizedState=[m,v],m},useReducer:function(m,v,S){var R=Qd();return v=S!==void 0?S(v):v,R.memoizedState=R.baseState=v,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:v},R.queue=m,m=m.dispatch=zFe.bind(null,as,m),[R.memoizedState,m]},useRef:function(m){var v=Qd();return m={current:m},v.memoizedState=m},useState:ure,useDebugValue:G5,useDeferredValue:function(m){return Qd().memoizedState=m},useTransition:function(){var m=ure(!1),v=m[0];return m=UFe.bind(null,m[1]),Qd().memoizedState=m,[v,m]},useMutableSource:function(){},useSyncExternalStore:function(m,v,S){var R=as,F=Qd();if(qi){if(S===void 0)throw Error(n(407));S=S()}else{if(S=v(),Ao===null)throw Error(n(349));Iv&30||rre(R,v,S)}F.memoizedState=S;var W={value:S,getSnapshot:v};return F.queue=W,cre(sre.bind(null,R,W,m),[m]),R.flags|=2048,vT(9,ire.bind(null,R,W,S,v),void 0,null),S},useId:function(){var m=Qd(),v=Ao.identifierPrefix;if(qi){var S=Up,R=Bp;S=(R&~(1<<32-fs(R)-1)).toString(32)+S,v=":"+v+"R"+S,S=gT++,0<S&&(v+="H"+S.toString(32)),v+=":"}else S=BFe++,v=":"+v+"r"+S.toString(32)+":";return m.memoizedState=v},unstable_isNewReconciler:!1},qFe={readContext:Dc,useCallback:mre,useContext:Dc,useEffect:W5,useImperativeHandle:pre,useInsertionEffect:fre,useLayoutEffect:dre,useMemo:gre,useReducer:H5,useRef:lre,useState:function(){return H5(yT)},useDebugValue:G5,useDeferredValue:function(m){var v=Oc();return yre(v,oo.memoizedState,m)},useTransition:function(){var m=H5(yT)[0],v=Oc().memoizedState;return[m,v]},useMutableSource:tre,useSyncExternalStore:nre,useId:vre,unstable_isNewReconciler:!1},WFe={readContext:Dc,useCallback:mre,useContext:Dc,useEffect:W5,useImperativeHandle:pre,useInsertionEffect:fre,useLayoutEffect:dre,useMemo:gre,useReducer:q5,useRef:lre,useState:function(){return q5(yT)},useDebugValue:G5,useDeferredValue:function(m){var v=Oc();return oo===null?v.memoizedState=m:yre(v,oo.memoizedState,m)},useTransition:function(){var m=q5(yT)[0],v=Oc().memoizedState;return[m,v]},useMutableSource:tre,useSyncExternalStore:nre,useId:vre,unstable_isNewReconciler:!1};function Df(m,v){if(m&&m.defaultProps){v=L({},v),m=m.defaultProps;for(var S in m)v[S]===void 0&&(v[S]=m[S]);return v}return v}function Y5(m,v,S,R){v=m.memoizedState,S=S(R,v),S=S==null?v:L({},v,S),m.memoizedState=S,m.lanes===0&&(m.updateQueue.baseState=S)}var $R={isMounted:function(m){return(m=m._reactInternals)?en(m)===m:!1},enqueueSetState:function(m,v,S){m=m._reactInternals;var R=nu(),F=Yg(m),W=Vp(R,F);W.payload=v,S!=null&&(W.callback=S),v=Hg(m,W,F),v!==null&&($f(v,m,F,R),IR(v,m,F))},enqueueReplaceState:function(m,v,S){m=m._reactInternals;var R=nu(),F=Yg(m),W=Vp(R,F);W.tag=1,W.payload=v,S!=null&&(W.callback=S),v=Hg(m,W,F),v!==null&&($f(v,m,F,R),IR(v,m,F))},enqueueForceUpdate:function(m,v){m=m._reactInternals;var S=nu(),R=Yg(m),F=Vp(S,R);F.tag=2,v!=null&&(F.callback=v),v=Hg(m,F,R),v!==null&&($f(v,m,R,S),IR(v,m,R))}};function Ere(m,v,S,R,F,W,ee){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(R,W,ee):v.prototype&&v.prototype.isPureReactComponent?!iT(S,R)||!iT(F,W):!0}function xre(m,v,S){var R=!1,F=Ug,W=v.contextType;return typeof W=="object"&&W!==null?W=Dc(W):(F=Uu(v)?xv:_a.current,R=v.contextTypes,W=(R=R!=null)?M_(m,F):Ug),v=new v(S,W),m.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=$R,m.stateNode=v,v._reactInternals=m,R&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=F,m.__reactInternalMemoizedMaskedChildContext=W),v}function Sre(m,v,S,R){m=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(S,R),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(S,R),v.state!==m&&$R.enqueueReplaceState(v,v.state,null)}function K5(m,v,S,R){var F=m.stateNode;F.props=S,F.state=m.memoizedState,F.refs={},M5(m);var W=v.contextType;typeof W=="object"&&W!==null?F.context=Dc(W):(W=Uu(v)?xv:_a.current,F.context=M_(m,W)),F.state=m.memoizedState,W=v.getDerivedStateFromProps,typeof W=="function"&&(Y5(m,v,W,S),F.state=m.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(v=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),v!==F.state&&$R.enqueueReplaceState(F,F.state,null),kR(m,S,F,R),F.state=m.memoizedState),typeof F.componentDidMount=="function"&&(m.flags|=4194308)}function V_(m,v){try{var S="",R=v;do S+=Z(R),R=R.return;while(R);var F=S}catch(W){F=`
Error generating stack: `+W.message+`
`+W.stack}return{value:m,source:v,stack:F,digest:null}}function X5(m,v,S){return{value:m,source:null,stack:S??null,digest:v??null}}function Q5(m,v){try{console.error(v.value)}catch(S){setTimeout(function(){throw S})}}var GFe=typeof WeakMap=="function"?WeakMap:Map;function Tre(m,v,S){S=Vp(-1,S),S.tag=3,S.payload={element:null};var R=v.value;return S.callback=function(){VR||(VR=!0,dj=R),Q5(m,v)},S}function Cre(m,v,S){S=Vp(-1,S),S.tag=3;var R=m.type.getDerivedStateFromError;if(typeof R=="function"){var F=v.value;S.payload=function(){return R(F)},S.callback=function(){Q5(m,v)}}var W=m.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&(S.callback=function(){Q5(m,v),typeof R!="function"&&(Wg===null?Wg=new Set([this]):Wg.add(this));var ee=v.stack;this.componentDidCatch(v.value,{componentStack:ee!==null?ee:""})}),S}function Are(m,v,S){var R=m.pingCache;if(R===null){R=m.pingCache=new GFe;var F=new Set;R.set(v,F)}else F=R.get(v),F===void 0&&(F=new Set,R.set(v,F));F.has(S)||(F.add(S),m=a4e.bind(null,m,v,S),v.then(m,m))}function Ire(m){do{var v;if((v=m.tag===13)&&(v=m.memoizedState,v=v!==null?v.dehydrated!==null:!0),v)return m;m=m.return}while(m!==null);return null}function kre(m,v,S,R,F){return m.mode&1?(m.flags|=65536,m.lanes=F,m):(m===v?m.flags|=65536:(m.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(v=Vp(-1,1),v.tag=2,Hg(S,v,1))),S.lanes|=1),m)}var YFe=C.ReactCurrentOwner,zu=!1;function tu(m,v,S,R){v.child=m===null?Kne(v,null,S,R):j_(v,m.child,S,R)}function Rre(m,v,S,R,F){S=S.render;var W=v.ref;return U_(v,F),R=z5(m,v,S,R,W,F),S=V5(),m!==null&&!zu?(v.updateQueue=m.updateQueue,v.flags&=-2053,m.lanes&=~F,Hp(m,v,F)):(qi&&S&&T5(v),v.flags|=1,tu(m,v,R,F),v.child)}function Nre(m,v,S,R,F){if(m===null){var W=S.type;return typeof W=="function"&&!bj(W)&&W.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(v.tag=15,v.type=W,Pre(m,v,W,R,F)):(m=KR(S.type,null,R,v,v.mode,F),m.ref=v.ref,m.return=v,v.child=m)}if(W=m.child,!(m.lanes&F)){var ee=W.memoizedProps;if(S=S.compare,S=S!==null?S:iT,S(ee,R)&&m.ref===v.ref)return Hp(m,v,F)}return v.flags|=1,m=Xg(W,R),m.ref=v.ref,m.return=v,v.child=m}function Pre(m,v,S,R,F){if(m!==null){var W=m.memoizedProps;if(iT(W,R)&&m.ref===v.ref)if(zu=!1,v.pendingProps=R=W,(m.lanes&F)!==0)m.flags&131072&&(zu=!0);else return v.lanes=m.lanes,Hp(m,v,F)}return J5(m,v,S,R,F)}function Dre(m,v,S){var R=v.pendingProps,F=R.children,W=m!==null?m.memoizedState:null;if(R.mode==="hidden")if(!(v.mode&1))v.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(q_,jl),jl|=S;else{if(!(S&1073741824))return m=W!==null?W.baseLanes|S:S,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:m,cachePool:null,transitions:null},v.updateQueue=null,Ai(q_,jl),jl|=m,null;v.memoizedState={baseLanes:0,cachePool:null,transitions:null},R=W!==null?W.baseLanes:S,Ai(q_,jl),jl|=R}else W!==null?(R=W.baseLanes|S,v.memoizedState=null):R=S,Ai(q_,jl),jl|=R;return tu(m,v,F,S),v.child}function Ore(m,v){var S=v.ref;(m===null&&S!==null||m!==null&&m.ref!==S)&&(v.flags|=512,v.flags|=2097152)}function J5(m,v,S,R,F){var W=Uu(S)?xv:_a.current;return W=M_(v,W),U_(v,F),S=z5(m,v,S,R,W,F),R=V5(),m!==null&&!zu?(v.updateQueue=m.updateQueue,v.flags&=-2053,m.lanes&=~F,Hp(m,v,F)):(qi&&R&&T5(v),v.flags|=1,tu(m,v,S,F),v.child)}function Mre(m,v,S,R,F){if(Uu(S)){var W=!0;_R(v)}else W=!1;if(U_(v,F),v.stateNode===null)FR(m,v),xre(v,S,R),K5(v,S,R,F),R=!0;else if(m===null){var ee=v.stateNode,de=v.memoizedProps;ee.props=de;var Ee=ee.context,He=S.contextType;typeof He=="object"&&He!==null?He=Dc(He):(He=Uu(S)?xv:_a.current,He=M_(v,He));var dt=S.getDerivedStateFromProps,gt=typeof dt=="function"||typeof ee.getSnapshotBeforeUpdate=="function";gt||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(de!==R||Ee!==He)&&Sre(v,ee,R,He),Vg=!1;var ct=v.memoizedState;ee.state=ct,kR(v,R,ee,F),Ee=v.memoizedState,de!==R||ct!==Ee||Bu.current||Vg?(typeof dt=="function"&&(Y5(v,S,dt,R),Ee=v.memoizedState),(de=Vg||Ere(v,S,de,R,ct,Ee,He))?(gt||typeof ee.UNSAFE_componentWillMount!="function"&&typeof ee.componentWillMount!="function"||(typeof ee.componentWillMount=="function"&&ee.componentWillMount(),typeof ee.UNSAFE_componentWillMount=="function"&&ee.UNSAFE_componentWillMount()),typeof ee.componentDidMount=="function"&&(v.flags|=4194308)):(typeof ee.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=R,v.memoizedState=Ee),ee.props=R,ee.state=Ee,ee.context=He,R=de):(typeof ee.componentDidMount=="function"&&(v.flags|=4194308),R=!1)}else{ee=v.stateNode,Qne(m,v),de=v.memoizedProps,He=v.type===v.elementType?de:Df(v.type,de),ee.props=He,gt=v.pendingProps,ct=ee.context,Ee=S.contextType,typeof Ee=="object"&&Ee!==null?Ee=Dc(Ee):(Ee=Uu(S)?xv:_a.current,Ee=M_(v,Ee));var jt=S.getDerivedStateFromProps;(dt=typeof jt=="function"||typeof ee.getSnapshotBeforeUpdate=="function")||typeof ee.UNSAFE_componentWillReceiveProps!="function"&&typeof ee.componentWillReceiveProps!="function"||(de!==gt||ct!==Ee)&&Sre(v,ee,R,Ee),Vg=!1,ct=v.memoizedState,ee.state=ct,kR(v,R,ee,F);var Ht=v.memoizedState;de!==gt||ct!==Ht||Bu.current||Vg?(typeof jt=="function"&&(Y5(v,S,jt,R),Ht=v.memoizedState),(He=Vg||Ere(v,S,He,R,ct,Ht,Ee)||!1)?(dt||typeof ee.UNSAFE_componentWillUpdate!="function"&&typeof ee.componentWillUpdate!="function"||(typeof ee.componentWillUpdate=="function"&&ee.componentWillUpdate(R,Ht,Ee),typeof ee.UNSAFE_componentWillUpdate=="function"&&ee.UNSAFE_componentWillUpdate(R,Ht,Ee)),typeof ee.componentDidUpdate=="function"&&(v.flags|=4),typeof ee.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof ee.componentDidUpdate!="function"||de===m.memoizedProps&&ct===m.memoizedState||(v.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||de===m.memoizedProps&&ct===m.memoizedState||(v.flags|=1024),v.memoizedProps=R,v.memoizedState=Ht),ee.props=R,ee.state=Ht,ee.context=Ee,R=He):(typeof ee.componentDidUpdate!="function"||de===m.memoizedProps&&ct===m.memoizedState||(v.flags|=4),typeof ee.getSnapshotBeforeUpdate!="function"||de===m.memoizedProps&&ct===m.memoizedState||(v.flags|=1024),R=!1)}return Z5(m,v,S,R,W,F)}function Z5(m,v,S,R,F,W){Ore(m,v);var ee=(v.flags&128)!==0;if(!R&&!ee)return F&&Bne(v,S,!1),Hp(m,v,W);R=v.stateNode,YFe.current=v;var de=ee&&typeof S.getDerivedStateFromError!="function"?null:R.render();return v.flags|=1,m!==null&&ee?(v.child=j_(v,m.child,null,W),v.child=j_(v,null,de,W)):tu(m,v,de,W),v.memoizedState=R.state,F&&Bne(v,S,!0),v.child}function $re(m){var v=m.stateNode;v.pendingContext?Fne(m,v.pendingContext,v.pendingContext!==v.context):v.context&&Fne(m,v.context,!1),$5(m,v.containerInfo)}function Lre(m,v,S,R,F){return F_(),k5(F),v.flags|=256,tu(m,v,S,R),v.child}var ej={dehydrated:null,treeContext:null,retryLane:0};function tj(m){return{baseLanes:m,cachePool:null,transitions:null}}function Fre(m,v,S){var R=v.pendingProps,F=os.current,W=!1,ee=(v.flags&128)!==0,de;if((de=ee)||(de=m!==null&&m.memoizedState===null?!1:(F&2)!==0),de?(W=!0,v.flags&=-129):(m===null||m.memoizedState!==null)&&(F|=1),Ai(os,F&1),m===null)return I5(v),m=v.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(v.mode&1?m.data==="$!"?v.lanes=8:v.lanes=1073741824:v.lanes=1,null):(ee=R.children,m=R.fallback,W?(R=v.mode,W=v.child,ee={mode:"hidden",children:ee},!(R&1)&&W!==null?(W.childLanes=0,W.pendingProps=ee):W=XR(ee,R,0,null),m=Dv(m,R,S,null),W.return=v,m.return=v,W.sibling=m,v.child=W,v.child.memoizedState=tj(S),v.memoizedState=ej,m):nj(v,ee));if(F=m.memoizedState,F!==null&&(de=F.dehydrated,de!==null))return KFe(m,v,ee,R,de,F,S);if(W){W=R.fallback,ee=v.mode,F=m.child,de=F.sibling;var Ee={mode:"hidden",children:R.children};return!(ee&1)&&v.child!==F?(R=v.child,R.childLanes=0,R.pendingProps=Ee,v.deletions=null):(R=Xg(F,Ee),R.subtreeFlags=F.subtreeFlags&14680064),de!==null?W=Xg(de,W):(W=Dv(W,ee,S,null),W.flags|=2),W.return=v,R.return=v,R.sibling=W,v.child=R,R=W,W=v.child,ee=m.child.memoizedState,ee=ee===null?tj(S):{baseLanes:ee.baseLanes|S,cachePool:null,transitions:ee.transitions},W.memoizedState=ee,W.childLanes=m.childLanes&~S,v.memoizedState=ej,R}return W=m.child,m=W.sibling,R=Xg(W,{mode:"visible",children:R.children}),!(v.mode&1)&&(R.lanes=S),R.return=v,R.sibling=null,m!==null&&(S=v.deletions,S===null?(v.deletions=[m],v.flags|=16):S.push(m)),v.child=R,v.memoizedState=null,R}function nj(m,v){return v=XR({mode:"visible",children:v},m.mode,0,null),v.return=m,m.child=v}function LR(m,v,S,R){return R!==null&&k5(R),j_(v,m.child,null,S),m=nj(v,v.pendingProps.children),m.flags|=2,v.memoizedState=null,m}function KFe(m,v,S,R,F,W,ee){if(S)return v.flags&256?(v.flags&=-257,R=X5(Error(n(422))),LR(m,v,ee,R)):v.memoizedState!==null?(v.child=m.child,v.flags|=128,null):(W=R.fallback,F=v.mode,R=XR({mode:"visible",children:R.children},F,0,null),W=Dv(W,F,ee,null),W.flags|=2,R.return=v,W.return=v,R.sibling=W,v.child=R,v.mode&1&&j_(v,m.child,null,ee),v.child.memoizedState=tj(ee),v.memoizedState=ej,W);if(!(v.mode&1))return LR(m,v,ee,null);if(F.data==="$!"){if(R=F.nextSibling&&F.nextSibling.dataset,R)var de=R.dgst;return R=de,W=Error(n(419)),R=X5(W,R,void 0),LR(m,v,ee,R)}if(de=(ee&m.childLanes)!==0,zu||de){if(R=Ao,R!==null){switch(ee&-ee){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}F=F&(R.suspendedLanes|ee)?0:F,F!==0&&F!==W.retryLane&&(W.retryLane=F,zp(m,F),$f(R,m,F,-1))}return vj(),R=X5(Error(n(421))),LR(m,v,ee,R)}return F.data==="$?"?(v.flags|=128,v.child=m.child,v=u4e.bind(null,m),F._reactRetry=v,null):(m=W.treeContext,Fl=jg(F.nextSibling),Ll=v,qi=!0,Pf=null,m!==null&&(Nc[Pc++]=Bp,Nc[Pc++]=Up,Nc[Pc++]=Sv,Bp=m.id,Up=m.overflow,Sv=v),v=nj(v,R.children),v.flags|=4096,v)}function jre(m,v,S){m.lanes|=v;var R=m.alternate;R!==null&&(R.lanes|=v),D5(m.return,v,S)}function rj(m,v,S,R,F){var W=m.memoizedState;W===null?m.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:R,tail:S,tailMode:F}:(W.isBackwards=v,W.rendering=null,W.renderingStartTime=0,W.last=R,W.tail=S,W.tailMode=F)}function Bre(m,v,S){var R=v.pendingProps,F=R.revealOrder,W=R.tail;if(tu(m,v,R.children,S),R=os.current,R&2)R=R&1|2,v.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=v.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&jre(m,S,v);else if(m.tag===19)jre(m,S,v);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===v)break e;for(;m.sibling===null;){if(m.return===null||m.return===v)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}R&=1}if(Ai(os,R),!(v.mode&1))v.memoizedState=null;else switch(F){case"forwards":for(S=v.child,F=null;S!==null;)m=S.alternate,m!==null&&RR(m)===null&&(F=S),S=S.sibling;S=F,S===null?(F=v.child,v.child=null):(F=S.sibling,S.sibling=null),rj(v,!1,F,S,W);break;case"backwards":for(S=null,F=v.child,v.child=null;F!==null;){if(m=F.alternate,m!==null&&RR(m)===null){v.child=F;break}m=F.sibling,F.sibling=S,S=F,F=m}rj(v,!0,S,null,W);break;case"together":rj(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function FR(m,v){!(v.mode&1)&&m!==null&&(m.alternate=null,v.alternate=null,v.flags|=2)}function Hp(m,v,S){if(m!==null&&(v.dependencies=m.dependencies),kv|=v.lanes,!(S&v.childLanes))return null;if(m!==null&&v.child!==m.child)throw Error(n(153));if(v.child!==null){for(m=v.child,S=Xg(m,m.pendingProps),v.child=S,S.return=v;m.sibling!==null;)m=m.sibling,S=S.sibling=Xg(m,m.pendingProps),S.return=v;S.sibling=null}return v.child}function XFe(m,v,S){switch(v.tag){case 3:$re(v),F_();break;case 5:ere(v);break;case 1:Uu(v.type)&&_R(v);break;case 4:$5(v,v.stateNode.containerInfo);break;case 10:var R=v.type._context,F=v.memoizedProps.value;Ai(CR,R._currentValue),R._currentValue=F;break;case 13:if(R=v.memoizedState,R!==null)return R.dehydrated!==null?(Ai(os,os.current&1),v.flags|=128,null):S&v.child.childLanes?Fre(m,v,S):(Ai(os,os.current&1),m=Hp(m,v,S),m!==null?m.sibling:null);Ai(os,os.current&1);break;case 19:if(R=(S&v.childLanes)!==0,m.flags&128){if(R)return Bre(m,v,S);v.flags|=128}if(F=v.memoizedState,F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),Ai(os,os.current),R)break;return null;case 22:case 23:return v.lanes=0,Dre(m,v,S)}return Hp(m,v,S)}var Ure,ij,zre,Vre;Ure=function(m,v){for(var S=v.child;S!==null;){if(S.tag===5||S.tag===6)m.appendChild(S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===v)break;for(;S.sibling===null;){if(S.return===null||S.return===v)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},ij=function(){},zre=function(m,v,S,R){var F=m.memoizedProps;if(F!==R){m=v.stateNode,Av(Xd.current);var W=null;switch(S){case"input":F=Re(m,F),R=Re(m,R),W=[];break;case"select":F=L({},F,{value:void 0}),R=L({},R,{value:void 0}),W=[];break;case"textarea":F=st(m,F),R=st(m,R),W=[];break;default:typeof F.onClick!="function"&&typeof R.onClick=="function"&&(m.onclick=yR)}Un(S,R);var ee;S=null;for(He in F)if(!R.hasOwnProperty(He)&&F.hasOwnProperty(He)&&F[He]!=null)if(He==="style"){var de=F[He];for(ee in de)de.hasOwnProperty(ee)&&(S||(S={}),S[ee]="")}else He!=="dangerouslySetInnerHTML"&&He!=="children"&&He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&He!=="autoFocus"&&(i.hasOwnProperty(He)?W||(W=[]):(W=W||[]).push(He,null));for(He in R){var Ee=R[He];if(de=F!=null?F[He]:void 0,R.hasOwnProperty(He)&&Ee!==de&&(Ee!=null||de!=null))if(He==="style")if(de){for(ee in de)!de.hasOwnProperty(ee)||Ee&&Ee.hasOwnProperty(ee)||(S||(S={}),S[ee]="");for(ee in Ee)Ee.hasOwnProperty(ee)&&de[ee]!==Ee[ee]&&(S||(S={}),S[ee]=Ee[ee])}else S||(W||(W=[]),W.push(He,S)),S=Ee;else He==="dangerouslySetInnerHTML"?(Ee=Ee?Ee.__html:void 0,de=de?de.__html:void 0,Ee!=null&&de!==Ee&&(W=W||[]).push(He,Ee)):He==="children"?typeof Ee!="string"&&typeof Ee!="number"||(W=W||[]).push(He,""+Ee):He!=="suppressContentEditableWarning"&&He!=="suppressHydrationWarning"&&(i.hasOwnProperty(He)?(Ee!=null&&He==="onScroll"&&Mi("scroll",m),W||de===Ee||(W=[])):(W=W||[]).push(He,Ee))}S&&(W=W||[]).push("style",S);var He=W;(v.updateQueue=He)&&(v.flags|=4)}},Vre=function(m,v,S,R){S!==R&&(v.flags|=4)};function bT(m,v){if(!qi)switch(m.tailMode){case"hidden":v=m.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?m.tail=null:S.sibling=null;break;case"collapsed":S=m.tail;for(var R=null;S!==null;)S.alternate!==null&&(R=S),S=S.sibling;R===null?v||m.tail===null?m.tail=null:m.tail.sibling=null:R.sibling=null}}function Ea(m){var v=m.alternate!==null&&m.alternate.child===m.child,S=0,R=0;if(v)for(var F=m.child;F!==null;)S|=F.lanes|F.childLanes,R|=F.subtreeFlags&14680064,R|=F.flags&14680064,F.return=m,F=F.sibling;else for(F=m.child;F!==null;)S|=F.lanes|F.childLanes,R|=F.subtreeFlags,R|=F.flags,F.return=m,F=F.sibling;return m.subtreeFlags|=R,m.childLanes=S,v}function QFe(m,v,S){var R=v.pendingProps;switch(C5(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ea(v),null;case 1:return Uu(v.type)&&bR(),Ea(v),null;case 3:return R=v.stateNode,z_(),$i(Bu),$i(_a),j5(),R.pendingContext&&(R.context=R.pendingContext,R.pendingContext=null),(m===null||m.child===null)&&(SR(v)?v.flags|=4:m===null||m.memoizedState.isDehydrated&&!(v.flags&256)||(v.flags|=1024,Pf!==null&&(mj(Pf),Pf=null))),ij(m,v),Ea(v),null;case 5:L5(v);var F=Av(pT.current);if(S=v.type,m!==null&&v.stateNode!=null)zre(m,v,S,R,F),m.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!R){if(v.stateNode===null)throw Error(n(166));return Ea(v),null}if(m=Av(Xd.current),SR(v)){R=v.stateNode,S=v.type;var W=v.memoizedProps;switch(R[Kd]=v,R[lT]=W,m=(v.mode&1)!==0,S){case"dialog":Mi("cancel",R),Mi("close",R);break;case"iframe":case"object":case"embed":Mi("load",R);break;case"video":case"audio":for(F=0;F<oT.length;F++)Mi(oT[F],R);break;case"source":Mi("error",R);break;case"img":case"image":case"link":Mi("error",R),Mi("load",R);break;case"details":Mi("toggle",R);break;case"input":Ke(R,W),Mi("invalid",R);break;case"select":R._wrapperState={wasMultiple:!!W.multiple},Mi("invalid",R);break;case"textarea":Ie(R,W),Mi("invalid",R)}Un(S,W),F=null;for(var ee in W)if(W.hasOwnProperty(ee)){var de=W[ee];ee==="children"?typeof de=="string"?R.textContent!==de&&(W.suppressHydrationWarning!==!0&&gR(R.textContent,de,m),F=["children",de]):typeof de=="number"&&R.textContent!==""+de&&(W.suppressHydrationWarning!==!0&&gR(R.textContent,de,m),F=["children",""+de]):i.hasOwnProperty(ee)&&de!=null&&ee==="onScroll"&&Mi("scroll",R)}switch(S){case"input":oe(R),Ue(R,W,!0);break;case"textarea":oe(R),Ot(R);break;case"select":case"option":break;default:typeof W.onClick=="function"&&(R.onclick=yR)}R=F,v.updateQueue=R,R!==null&&(v.flags|=4)}else{ee=F.nodeType===9?F:F.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Ne(S)),m==="http://www.w3.org/1999/xhtml"?S==="script"?(m=ee.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof R.is=="string"?m=ee.createElement(S,{is:R.is}):(m=ee.createElement(S),S==="select"&&(ee=m,R.multiple?ee.multiple=!0:R.size&&(ee.size=R.size))):m=ee.createElementNS(m,S),m[Kd]=v,m[lT]=R,Ure(m,v,!1,!1),v.stateNode=m;e:{switch(ee=ur(S,R),S){case"dialog":Mi("cancel",m),Mi("close",m),F=R;break;case"iframe":case"object":case"embed":Mi("load",m),F=R;break;case"video":case"audio":for(F=0;F<oT.length;F++)Mi(oT[F],m);F=R;break;case"source":Mi("error",m),F=R;break;case"img":case"image":case"link":Mi("error",m),Mi("load",m),F=R;break;case"details":Mi("toggle",m),F=R;break;case"input":Ke(m,R),F=Re(m,R),Mi("invalid",m);break;case"option":F=R;break;case"select":m._wrapperState={wasMultiple:!!R.multiple},F=L({},R,{value:void 0}),Mi("invalid",m);break;case"textarea":Ie(m,R),F=st(m,R),Mi("invalid",m);break;default:F=R}Un(S,F),de=F;for(W in de)if(de.hasOwnProperty(W)){var Ee=de[W];W==="style"?vr(m,Ee):W==="dangerouslySetInnerHTML"?(Ee=Ee?Ee.__html:void 0,Ee!=null&&St(m,Ee)):W==="children"?typeof Ee=="string"?(S!=="textarea"||Ee!=="")&&$t(m,Ee):typeof Ee=="number"&&$t(m,""+Ee):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(i.hasOwnProperty(W)?Ee!=null&&W==="onScroll"&&Mi("scroll",m):Ee!=null&&E(m,W,Ee,ee))}switch(S){case"input":oe(m),Ue(m,R,!1);break;case"textarea":oe(m),Ot(m);break;case"option":R.value!=null&&m.setAttribute("value",""+ge(R.value));break;case"select":m.multiple=!!R.multiple,W=R.value,W!=null?Rt(m,!!R.multiple,W,!1):R.defaultValue!=null&&Rt(m,!!R.multiple,R.defaultValue,!0);break;default:typeof F.onClick=="function"&&(m.onclick=yR)}switch(S){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}}R&&(v.flags|=4)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return Ea(v),null;case 6:if(m&&v.stateNode!=null)Vre(m,v,m.memoizedProps,R);else{if(typeof R!="string"&&v.stateNode===null)throw Error(n(166));if(S=Av(pT.current),Av(Xd.current),SR(v)){if(R=v.stateNode,S=v.memoizedProps,R[Kd]=v,(W=R.nodeValue!==S)&&(m=Ll,m!==null))switch(m.tag){case 3:gR(R.nodeValue,S,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&gR(R.nodeValue,S,(m.mode&1)!==0)}W&&(v.flags|=4)}else R=(S.nodeType===9?S:S.ownerDocument).createTextNode(R),R[Kd]=v,v.stateNode=R}return Ea(v),null;case 13:if($i(os),R=v.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(qi&&Fl!==null&&v.mode&1&&!(v.flags&128))Wne(),F_(),v.flags|=98560,W=!1;else if(W=SR(v),R!==null&&R.dehydrated!==null){if(m===null){if(!W)throw Error(n(318));if(W=v.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(n(317));W[Kd]=v}else F_(),!(v.flags&128)&&(v.memoizedState=null),v.flags|=4;Ea(v),W=!1}else Pf!==null&&(mj(Pf),Pf=null),W=!0;if(!W)return v.flags&65536?v:null}return v.flags&128?(v.lanes=S,v):(R=R!==null,R!==(m!==null&&m.memoizedState!==null)&&R&&(v.child.flags|=8192,v.mode&1&&(m===null||os.current&1?ao===0&&(ao=3):vj())),v.updateQueue!==null&&(v.flags|=4),Ea(v),null);case 4:return z_(),ij(m,v),m===null&&aT(v.stateNode.containerInfo),Ea(v),null;case 10:return P5(v.type._context),Ea(v),null;case 17:return Uu(v.type)&&bR(),Ea(v),null;case 19:if($i(os),W=v.memoizedState,W===null)return Ea(v),null;if(R=(v.flags&128)!==0,ee=W.rendering,ee===null)if(R)bT(W,!1);else{if(ao!==0||m!==null&&m.flags&128)for(m=v.child;m!==null;){if(ee=RR(m),ee!==null){for(v.flags|=128,bT(W,!1),R=ee.updateQueue,R!==null&&(v.updateQueue=R,v.flags|=4),v.subtreeFlags=0,R=S,S=v.child;S!==null;)W=S,m=R,W.flags&=14680066,ee=W.alternate,ee===null?(W.childLanes=0,W.lanes=m,W.child=null,W.subtreeFlags=0,W.memoizedProps=null,W.memoizedState=null,W.updateQueue=null,W.dependencies=null,W.stateNode=null):(W.childLanes=ee.childLanes,W.lanes=ee.lanes,W.child=ee.child,W.subtreeFlags=0,W.deletions=null,W.memoizedProps=ee.memoizedProps,W.memoizedState=ee.memoizedState,W.updateQueue=ee.updateQueue,W.type=ee.type,m=ee.dependencies,W.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),S=S.sibling;return Ai(os,os.current&1|2),v.child}m=m.sibling}W.tail!==null&&On()>W_&&(v.flags|=128,R=!0,bT(W,!1),v.lanes=4194304)}else{if(!R)if(m=RR(ee),m!==null){if(v.flags|=128,R=!0,S=m.updateQueue,S!==null&&(v.updateQueue=S,v.flags|=4),bT(W,!0),W.tail===null&&W.tailMode==="hidden"&&!ee.alternate&&!qi)return Ea(v),null}else 2*On()-W.renderingStartTime>W_&&S!==1073741824&&(v.flags|=128,R=!0,bT(W,!1),v.lanes=4194304);W.isBackwards?(ee.sibling=v.child,v.child=ee):(S=W.last,S!==null?S.sibling=ee:v.child=ee,W.last=ee)}return W.tail!==null?(v=W.tail,W.rendering=v,W.tail=v.sibling,W.renderingStartTime=On(),v.sibling=null,S=os.current,Ai(os,R?S&1|2:S&1),v):(Ea(v),null);case 22:case 23:return yj(),R=v.memoizedState!==null,m!==null&&m.memoizedState!==null!==R&&(v.flags|=8192),R&&v.mode&1?jl&1073741824&&(Ea(v),v.subtreeFlags&6&&(v.flags|=8192)):Ea(v),null;case 24:return null;case 25:return null}throw Error(n(156,v.tag))}function JFe(m,v){switch(C5(v),v.tag){case 1:return Uu(v.type)&&bR(),m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 3:return z_(),$i(Bu),$i(_a),j5(),m=v.flags,m&65536&&!(m&128)?(v.flags=m&-65537|128,v):null;case 5:return L5(v),null;case 13:if($i(os),m=v.memoizedState,m!==null&&m.dehydrated!==null){if(v.alternate===null)throw Error(n(340));F_()}return m=v.flags,m&65536?(v.flags=m&-65537|128,v):null;case 19:return $i(os),null;case 4:return z_(),null;case 10:return P5(v.type._context),null;case 22:case 23:return yj(),null;case 24:return null;default:return null}}var jR=!1,xa=!1,ZFe=typeof WeakSet=="function"?WeakSet:Set,zt=null;function H_(m,v){var S=m.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(R){ds(m,v,R)}else S.current=null}function sj(m,v,S){try{S()}catch(R){ds(m,v,R)}}var Hre=!1;function e4e(m,v){if(y5=fe,m=Ene(),l5(m)){if("selectionStart"in m)var S={start:m.selectionStart,end:m.selectionEnd};else e:{S=(S=m.ownerDocument)&&S.defaultView||window;var R=S.getSelection&&S.getSelection();if(R&&R.rangeCount!==0){S=R.anchorNode;var F=R.anchorOffset,W=R.focusNode;R=R.focusOffset;try{S.nodeType,W.nodeType}catch{S=null;break e}var ee=0,de=-1,Ee=-1,He=0,dt=0,gt=m,ct=null;t:for(;;){for(var jt;gt!==S||F!==0&&gt.nodeType!==3||(de=ee+F),gt!==W||R!==0&&gt.nodeType!==3||(Ee=ee+R),gt.nodeType===3&&(ee+=gt.nodeValue.length),(jt=gt.firstChild)!==null;)ct=gt,gt=jt;for(;;){if(gt===m)break t;if(ct===S&&++He===F&&(de=ee),ct===W&&++dt===R&&(Ee=ee),(jt=gt.nextSibling)!==null)break;gt=ct,ct=gt.parentNode}gt=jt}S=de===-1||Ee===-1?null:{start:de,end:Ee}}else S=null}S=S||{start:0,end:0}}else S=null;for(v5={focusedElem:m,selectionRange:S},fe=!1,zt=v;zt!==null;)if(v=zt,m=v.child,(v.subtreeFlags&1028)!==0&&m!==null)m.return=v,zt=m;else for(;zt!==null;){v=zt;try{var Ht=v.alternate;if(v.flags&1024)switch(v.tag){case 0:case 11:case 15:break;case 1:if(Ht!==null){var Wt=Ht.memoizedProps,As=Ht.memoizedState,Me=v.stateNode,Ae=Me.getSnapshotBeforeUpdate(v.elementType===v.type?Wt:Df(v.type,Wt),As);Me.__reactInternalSnapshotBeforeUpdate=Ae}break;case 3:var Fe=v.stateNode.containerInfo;Fe.nodeType===1?Fe.textContent="":Fe.nodeType===9&&Fe.documentElement&&Fe.removeChild(Fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Tt){ds(v,v.return,Tt)}if(m=v.sibling,m!==null){m.return=v.return,zt=m;break}zt=v.return}return Ht=Hre,Hre=!1,Ht}function _T(m,v,S){var R=v.updateQueue;if(R=R!==null?R.lastEffect:null,R!==null){var F=R=R.next;do{if((F.tag&m)===m){var W=F.destroy;F.destroy=void 0,W!==void 0&&sj(v,S,W)}F=F.next}while(F!==R)}}function BR(m,v){if(v=v.updateQueue,v=v!==null?v.lastEffect:null,v!==null){var S=v=v.next;do{if((S.tag&m)===m){var R=S.create;S.destroy=R()}S=S.next}while(S!==v)}}function oj(m){var v=m.ref;if(v!==null){var S=m.stateNode;switch(m.tag){case 5:m=S;break;default:m=S}typeof v=="function"?v(m):v.current=m}}function qre(m){var v=m.alternate;v!==null&&(m.alternate=null,qre(v)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(v=m.stateNode,v!==null&&(delete v[Kd],delete v[lT],delete v[E5],delete v[$Fe],delete v[LFe])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Wre(m){return m.tag===5||m.tag===3||m.tag===4}function Gre(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Wre(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function aj(m,v,S){var R=m.tag;if(R===5||R===6)m=m.stateNode,v?S.nodeType===8?S.parentNode.insertBefore(m,v):S.insertBefore(m,v):(S.nodeType===8?(v=S.parentNode,v.insertBefore(m,S)):(v=S,v.appendChild(m)),S=S._reactRootContainer,S!=null||v.onclick!==null||(v.onclick=yR));else if(R!==4&&(m=m.child,m!==null))for(aj(m,v,S),m=m.sibling;m!==null;)aj(m,v,S),m=m.sibling}function uj(m,v,S){var R=m.tag;if(R===5||R===6)m=m.stateNode,v?S.insertBefore(m,v):S.appendChild(m);else if(R!==4&&(m=m.child,m!==null))for(uj(m,v,S),m=m.sibling;m!==null;)uj(m,v,S),m=m.sibling}var Qo=null,Of=!1;function qg(m,v,S){for(S=S.child;S!==null;)Yre(m,v,S),S=S.sibling}function Yre(m,v,S){if(oi&&typeof oi.onCommitFiberUnmount=="function")try{oi.onCommitFiberUnmount(Hs,S)}catch{}switch(S.tag){case 5:xa||H_(S,v);case 6:var R=Qo,F=Of;Qo=null,qg(m,v,S),Qo=R,Of=F,Qo!==null&&(Of?(m=Qo,S=S.stateNode,m.nodeType===8?m.parentNode.removeChild(S):m.removeChild(S)):Qo.removeChild(S.stateNode));break;case 18:Qo!==null&&(Of?(m=Qo,S=S.stateNode,m.nodeType===8?w5(m.parentNode,S):m.nodeType===1&&w5(m,S),Fu(m)):w5(Qo,S.stateNode));break;case 4:R=Qo,F=Of,Qo=S.stateNode.containerInfo,Of=!0,qg(m,v,S),Qo=R,Of=F;break;case 0:case 11:case 14:case 15:if(!xa&&(R=S.updateQueue,R!==null&&(R=R.lastEffect,R!==null))){F=R=R.next;do{var W=F,ee=W.destroy;W=W.tag,ee!==void 0&&(W&2||W&4)&&sj(S,v,ee),F=F.next}while(F!==R)}qg(m,v,S);break;case 1:if(!xa&&(H_(S,v),R=S.stateNode,typeof R.componentWillUnmount=="function"))try{R.props=S.memoizedProps,R.state=S.memoizedState,R.componentWillUnmount()}catch(de){ds(S,v,de)}qg(m,v,S);break;case 21:qg(m,v,S);break;case 22:S.mode&1?(xa=(R=xa)||S.memoizedState!==null,qg(m,v,S),xa=R):qg(m,v,S);break;default:qg(m,v,S)}}function Kre(m){var v=m.updateQueue;if(v!==null){m.updateQueue=null;var S=m.stateNode;S===null&&(S=m.stateNode=new ZFe),v.forEach(function(R){var F=l4e.bind(null,m,R);S.has(R)||(S.add(R),R.then(F,F))})}}function Mf(m,v){var S=v.deletions;if(S!==null)for(var R=0;R<S.length;R++){var F=S[R];try{var W=m,ee=v,de=ee;e:for(;de!==null;){switch(de.tag){case 5:Qo=de.stateNode,Of=!1;break e;case 3:Qo=de.stateNode.containerInfo,Of=!0;break e;case 4:Qo=de.stateNode.containerInfo,Of=!0;break e}de=de.return}if(Qo===null)throw Error(n(160));Yre(W,ee,F),Qo=null,Of=!1;var Ee=F.alternate;Ee!==null&&(Ee.return=null),F.return=null}catch(He){ds(F,v,He)}}if(v.subtreeFlags&12854)for(v=v.child;v!==null;)Xre(v,m),v=v.sibling}function Xre(m,v){var S=m.alternate,R=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Mf(v,m),Jd(m),R&4){try{_T(3,m,m.return),BR(3,m)}catch(Wt){ds(m,m.return,Wt)}try{_T(5,m,m.return)}catch(Wt){ds(m,m.return,Wt)}}break;case 1:Mf(v,m),Jd(m),R&512&&S!==null&&H_(S,S.return);break;case 5:if(Mf(v,m),Jd(m),R&512&&S!==null&&H_(S,S.return),m.flags&32){var F=m.stateNode;try{$t(F,"")}catch(Wt){ds(m,m.return,Wt)}}if(R&4&&(F=m.stateNode,F!=null)){var W=m.memoizedProps,ee=S!==null?S.memoizedProps:W,de=m.type,Ee=m.updateQueue;if(m.updateQueue=null,Ee!==null)try{de==="input"&&W.type==="radio"&&W.name!=null&&Qe(F,W),ur(de,ee);var He=ur(de,W);for(ee=0;ee<Ee.length;ee+=2){var dt=Ee[ee],gt=Ee[ee+1];dt==="style"?vr(F,gt):dt==="dangerouslySetInnerHTML"?St(F,gt):dt==="children"?$t(F,gt):E(F,dt,gt,He)}switch(de){case"input":ke(F,W);break;case"textarea":kt(F,W);break;case"select":var ct=F._wrapperState.wasMultiple;F._wrapperState.wasMultiple=!!W.multiple;var jt=W.value;jt!=null?Rt(F,!!W.multiple,jt,!1):ct!==!!W.multiple&&(W.defaultValue!=null?Rt(F,!!W.multiple,W.defaultValue,!0):Rt(F,!!W.multiple,W.multiple?[]:"",!1))}F[lT]=W}catch(Wt){ds(m,m.return,Wt)}}break;case 6:if(Mf(v,m),Jd(m),R&4){if(m.stateNode===null)throw Error(n(162));F=m.stateNode,W=m.memoizedProps;try{F.nodeValue=W}catch(Wt){ds(m,m.return,Wt)}}break;case 3:if(Mf(v,m),Jd(m),R&4&&S!==null&&S.memoizedState.isDehydrated)try{Fu(v.containerInfo)}catch(Wt){ds(m,m.return,Wt)}break;case 4:Mf(v,m),Jd(m);break;case 13:Mf(v,m),Jd(m),F=m.child,F.flags&8192&&(W=F.memoizedState!==null,F.stateNode.isHidden=W,!W||F.alternate!==null&&F.alternate.memoizedState!==null||(fj=On())),R&4&&Kre(m);break;case 22:if(dt=S!==null&&S.memoizedState!==null,m.mode&1?(xa=(He=xa)||dt,Mf(v,m),xa=He):Mf(v,m),Jd(m),R&8192){if(He=m.memoizedState!==null,(m.stateNode.isHidden=He)&&!dt&&m.mode&1)for(zt=m,dt=m.child;dt!==null;){for(gt=zt=dt;zt!==null;){switch(ct=zt,jt=ct.child,ct.tag){case 0:case 11:case 14:case 15:_T(4,ct,ct.return);break;case 1:H_(ct,ct.return);var Ht=ct.stateNode;if(typeof Ht.componentWillUnmount=="function"){R=ct,S=ct.return;try{v=R,Ht.props=v.memoizedProps,Ht.state=v.memoizedState,Ht.componentWillUnmount()}catch(Wt){ds(R,S,Wt)}}break;case 5:H_(ct,ct.return);break;case 22:if(ct.memoizedState!==null){Zre(gt);continue}}jt!==null?(jt.return=ct,zt=jt):Zre(gt)}dt=dt.sibling}e:for(dt=null,gt=m;;){if(gt.tag===5){if(dt===null){dt=gt;try{F=gt.stateNode,He?(W=F.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none"):(de=gt.stateNode,Ee=gt.memoizedProps.style,ee=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null,de.style.display=tr("display",ee))}catch(Wt){ds(m,m.return,Wt)}}}else if(gt.tag===6){if(dt===null)try{gt.stateNode.nodeValue=He?"":gt.memoizedProps}catch(Wt){ds(m,m.return,Wt)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===m)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===m)break e;for(;gt.sibling===null;){if(gt.return===null||gt.return===m)break e;dt===gt&&(dt=null),gt=gt.return}dt===gt&&(dt=null),gt.sibling.return=gt.return,gt=gt.sibling}}break;case 19:Mf(v,m),Jd(m),R&4&&Kre(m);break;case 21:break;default:Mf(v,m),Jd(m)}}function Jd(m){var v=m.flags;if(v&2){try{e:{for(var S=m.return;S!==null;){if(Wre(S)){var R=S;break e}S=S.return}throw Error(n(160))}switch(R.tag){case 5:var F=R.stateNode;R.flags&32&&($t(F,""),R.flags&=-33);var W=Gre(m);uj(m,W,F);break;case 3:case 4:var ee=R.stateNode.containerInfo,de=Gre(m);aj(m,de,ee);break;default:throw Error(n(161))}}catch(Ee){ds(m,m.return,Ee)}m.flags&=-3}v&4096&&(m.flags&=-4097)}function t4e(m,v,S){zt=m,Qre(m)}function Qre(m,v,S){for(var R=(m.mode&1)!==0;zt!==null;){var F=zt,W=F.child;if(F.tag===22&&R){var ee=F.memoizedState!==null||jR;if(!ee){var de=F.alternate,Ee=de!==null&&de.memoizedState!==null||xa;de=jR;var He=xa;if(jR=ee,(xa=Ee)&&!He)for(zt=F;zt!==null;)ee=zt,Ee=ee.child,ee.tag===22&&ee.memoizedState!==null?eie(F):Ee!==null?(Ee.return=ee,zt=Ee):eie(F);for(;W!==null;)zt=W,Qre(W),W=W.sibling;zt=F,jR=de,xa=He}Jre(m)}else F.subtreeFlags&8772&&W!==null?(W.return=F,zt=W):Jre(m)}}function Jre(m){for(;zt!==null;){var v=zt;if(v.flags&8772){var S=v.alternate;try{if(v.flags&8772)switch(v.tag){case 0:case 11:case 15:xa||BR(5,v);break;case 1:var R=v.stateNode;if(v.flags&4&&!xa)if(S===null)R.componentDidMount();else{var F=v.elementType===v.type?S.memoizedProps:Df(v.type,S.memoizedProps);R.componentDidUpdate(F,S.memoizedState,R.__reactInternalSnapshotBeforeUpdate)}var W=v.updateQueue;W!==null&&Zne(v,W,R);break;case 3:var ee=v.updateQueue;if(ee!==null){if(S=null,v.child!==null)switch(v.child.tag){case 5:S=v.child.stateNode;break;case 1:S=v.child.stateNode}Zne(v,ee,S)}break;case 5:var de=v.stateNode;if(S===null&&v.flags&4){S=de;var Ee=v.memoizedProps;switch(v.type){case"button":case"input":case"select":case"textarea":Ee.autoFocus&&S.focus();break;case"img":Ee.src&&(S.src=Ee.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(v.memoizedState===null){var He=v.alternate;if(He!==null){var dt=He.memoizedState;if(dt!==null){var gt=dt.dehydrated;gt!==null&&Fu(gt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}xa||v.flags&512&&oj(v)}catch(ct){ds(v,v.return,ct)}}if(v===m){zt=null;break}if(S=v.sibling,S!==null){S.return=v.return,zt=S;break}zt=v.return}}function Zre(m){for(;zt!==null;){var v=zt;if(v===m){zt=null;break}var S=v.sibling;if(S!==null){S.return=v.return,zt=S;break}zt=v.return}}function eie(m){for(;zt!==null;){var v=zt;try{switch(v.tag){case 0:case 11:case 15:var S=v.return;try{BR(4,v)}catch(Ee){ds(v,S,Ee)}break;case 1:var R=v.stateNode;if(typeof R.componentDidMount=="function"){var F=v.return;try{R.componentDidMount()}catch(Ee){ds(v,F,Ee)}}var W=v.return;try{oj(v)}catch(Ee){ds(v,W,Ee)}break;case 5:var ee=v.return;try{oj(v)}catch(Ee){ds(v,ee,Ee)}}}catch(Ee){ds(v,v.return,Ee)}if(v===m){zt=null;break}var de=v.sibling;if(de!==null){de.return=v.return,zt=de;break}zt=v.return}}var n4e=Math.ceil,UR=C.ReactCurrentDispatcher,lj=C.ReactCurrentOwner,Mc=C.ReactCurrentBatchConfig,Nr=0,Ao=null,Ys=null,Jo=0,jl=0,q_=Bg(0),ao=0,wT=null,kv=0,zR=0,cj=0,ET=null,Vu=null,fj=0,W_=1/0,qp=null,VR=!1,dj=null,Wg=null,HR=!1,Gg=null,qR=0,xT=0,hj=null,WR=-1,GR=0;function nu(){return Nr&6?On():WR!==-1?WR:WR=On()}function Yg(m){return m.mode&1?Nr&2&&Jo!==0?Jo&-Jo:jFe.transition!==null?(GR===0&&(GR=_t()),GR):(m=Zt,m!==0||(m=window.event,m=m===void 0?16:ni(m.type)),m):1}function $f(m,v,S,R){if(50<xT)throw xT=0,hj=null,Error(n(185));pn(m,S,R),(!(Nr&2)||m!==Ao)&&(m===Ao&&(!(Nr&2)&&(zR|=S),ao===4&&Kg(m,Jo)),Hu(m,R),S===1&&Nr===0&&!(v.mode&1)&&(W_=On()+500,wR&&zg()))}function Hu(m,v){var S=m.callbackNode;lt(m,v);var R=Xe(m,m===Ao?Jo:0);if(R===0)S!==null&&dr(S),m.callbackNode=null,m.callbackPriority=0;else if(v=R&-R,m.callbackPriority!==v){if(S!=null&&dr(S),v===1)m.tag===0?FFe(nie.bind(null,m)):Une(nie.bind(null,m)),OFe(function(){!(Nr&6)&&zg()}),S=null;else{switch(Fr(R)){case 1:S=ti;break;case 4:S=Vs;break;case 16:S=wi;break;case 536870912:S=no;break;default:S=wi}S=cie(S,tie.bind(null,m))}m.callbackPriority=v,m.callbackNode=S}}function tie(m,v){if(WR=-1,GR=0,Nr&6)throw Error(n(327));var S=m.callbackNode;if(G_()&&m.callbackNode!==S)return null;var R=Xe(m,m===Ao?Jo:0);if(R===0)return null;if(R&30||R&m.expiredLanes||v)v=YR(m,R);else{v=R;var F=Nr;Nr|=2;var W=iie();(Ao!==m||Jo!==v)&&(qp=null,W_=On()+500,Nv(m,v));do try{s4e();break}catch(de){rie(m,de)}while(!0);N5(),UR.current=W,Nr=F,Ys!==null?v=0:(Ao=null,Jo=0,v=ao)}if(v!==0){if(v===2&&(F=ut(m),F!==0&&(R=F,v=pj(m,F))),v===1)throw S=wT,Nv(m,0),Kg(m,R),Hu(m,On()),S;if(v===6)Kg(m,R);else{if(F=m.current.alternate,!(R&30)&&!r4e(F)&&(v=YR(m,R),v===2&&(W=ut(m),W!==0&&(R=W,v=pj(m,W))),v===1))throw S=wT,Nv(m,0),Kg(m,R),Hu(m,On()),S;switch(m.finishedWork=F,m.finishedLanes=R,v){case 0:case 1:throw Error(n(345));case 2:Pv(m,Vu,qp);break;case 3:if(Kg(m,R),(R&130023424)===R&&(v=fj+500-On(),10<v)){if(Xe(m,0)!==0)break;if(F=m.suspendedLanes,(F&R)!==R){nu(),m.pingedLanes|=m.suspendedLanes&F;break}m.timeoutHandle=_5(Pv.bind(null,m,Vu,qp),v);break}Pv(m,Vu,qp);break;case 4:if(Kg(m,R),(R&4194240)===R)break;for(v=m.eventTimes,F=-1;0<R;){var ee=31-fs(R);W=1<<ee,ee=v[ee],ee>F&&(F=ee),R&=~W}if(R=F,R=On()-R,R=(120>R?120:480>R?480:1080>R?1080:1920>R?1920:3e3>R?3e3:4320>R?4320:1960*n4e(R/1960))-R,10<R){m.timeoutHandle=_5(Pv.bind(null,m,Vu,qp),R);break}Pv(m,Vu,qp);break;case 5:Pv(m,Vu,qp);break;default:throw Error(n(329))}}}return Hu(m,On()),m.callbackNode===S?tie.bind(null,m):null}function pj(m,v){var S=ET;return m.current.memoizedState.isDehydrated&&(Nv(m,v).flags|=256),m=YR(m,v),m!==2&&(v=Vu,Vu=S,v!==null&&mj(v)),m}function mj(m){Vu===null?Vu=m:Vu.push.apply(Vu,m)}function r4e(m){for(var v=m;;){if(v.flags&16384){var S=v.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var R=0;R<S.length;R++){var F=S[R],W=F.getSnapshot;F=F.value;try{if(!Nf(W(),F))return!1}catch{return!1}}}if(S=v.child,v.subtreeFlags&16384&&S!==null)S.return=v,v=S;else{if(v===m)break;for(;v.sibling===null;){if(v.return===null||v.return===m)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function Kg(m,v){for(v&=~cj,v&=~zR,m.suspendedLanes|=v,m.pingedLanes&=~v,m=m.expirationTimes;0<v;){var S=31-fs(v),R=1<<S;m[S]=-1,v&=~R}}function nie(m){if(Nr&6)throw Error(n(327));G_();var v=Xe(m,0);if(!(v&1))return Hu(m,On()),null;var S=YR(m,v);if(m.tag!==0&&S===2){var R=ut(m);R!==0&&(v=R,S=pj(m,R))}if(S===1)throw S=wT,Nv(m,0),Kg(m,v),Hu(m,On()),S;if(S===6)throw Error(n(345));return m.finishedWork=m.current.alternate,m.finishedLanes=v,Pv(m,Vu,qp),Hu(m,On()),null}function gj(m,v){var S=Nr;Nr|=1;try{return m(v)}finally{Nr=S,Nr===0&&(W_=On()+500,wR&&zg())}}function Rv(m){Gg!==null&&Gg.tag===0&&!(Nr&6)&&G_();var v=Nr;Nr|=1;var S=Mc.transition,R=Zt;try{if(Mc.transition=null,Zt=1,m)return m()}finally{Zt=R,Mc.transition=S,Nr=v,!(Nr&6)&&zg()}}function yj(){jl=q_.current,$i(q_)}function Nv(m,v){m.finishedWork=null,m.finishedLanes=0;var S=m.timeoutHandle;if(S!==-1&&(m.timeoutHandle=-1,DFe(S)),Ys!==null)for(S=Ys.return;S!==null;){var R=S;switch(C5(R),R.tag){case 1:R=R.type.childContextTypes,R!=null&&bR();break;case 3:z_(),$i(Bu),$i(_a),j5();break;case 5:L5(R);break;case 4:z_();break;case 13:$i(os);break;case 19:$i(os);break;case 10:P5(R.type._context);break;case 22:case 23:yj()}S=S.return}if(Ao=m,Ys=m=Xg(m.current,null),Jo=jl=v,ao=0,wT=null,cj=zR=kv=0,Vu=ET=null,Cv!==null){for(v=0;v<Cv.length;v++)if(S=Cv[v],R=S.interleaved,R!==null){S.interleaved=null;var F=R.next,W=S.pending;if(W!==null){var ee=W.next;W.next=F,R.next=ee}S.pending=R}Cv=null}return m}function rie(m,v){do{var S=Ys;try{if(N5(),NR.current=MR,PR){for(var R=as.memoizedState;R!==null;){var F=R.queue;F!==null&&(F.pending=null),R=R.next}PR=!1}if(Iv=0,Co=oo=as=null,mT=!1,gT=0,lj.current=null,S===null||S.return===null){ao=1,wT=v,Ys=null;break}e:{var W=m,ee=S.return,de=S,Ee=v;if(v=Jo,de.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var He=Ee,dt=de,gt=dt.tag;if(!(dt.mode&1)&&(gt===0||gt===11||gt===15)){var ct=dt.alternate;ct?(dt.updateQueue=ct.updateQueue,dt.memoizedState=ct.memoizedState,dt.lanes=ct.lanes):(dt.updateQueue=null,dt.memoizedState=null)}var jt=Ire(ee);if(jt!==null){jt.flags&=-257,kre(jt,ee,de,W,v),jt.mode&1&&Are(W,He,v),v=jt,Ee=He;var Ht=v.updateQueue;if(Ht===null){var Wt=new Set;Wt.add(Ee),v.updateQueue=Wt}else Ht.add(Ee);break e}else{if(!(v&1)){Are(W,He,v),vj();break e}Ee=Error(n(426))}}else if(qi&&de.mode&1){var As=Ire(ee);if(As!==null){!(As.flags&65536)&&(As.flags|=256),kre(As,ee,de,W,v),k5(V_(Ee,de));break e}}W=Ee=V_(Ee,de),ao!==4&&(ao=2),ET===null?ET=[W]:ET.push(W),W=ee;do{switch(W.tag){case 3:W.flags|=65536,v&=-v,W.lanes|=v;var Me=Tre(W,Ee,v);Jne(W,Me);break e;case 1:de=Ee;var Ae=W.type,Fe=W.stateNode;if(!(W.flags&128)&&(typeof Ae.getDerivedStateFromError=="function"||Fe!==null&&typeof Fe.componentDidCatch=="function"&&(Wg===null||!Wg.has(Fe)))){W.flags|=65536,v&=-v,W.lanes|=v;var Tt=Cre(W,de,v);Jne(W,Tt);break e}}W=W.return}while(W!==null)}oie(S)}catch(Jt){v=Jt,Ys===S&&S!==null&&(Ys=S=S.return);continue}break}while(!0)}function iie(){var m=UR.current;return UR.current=MR,m===null?MR:m}function vj(){(ao===0||ao===3||ao===2)&&(ao=4),Ao===null||!(kv&268435455)&&!(zR&268435455)||Kg(Ao,Jo)}function YR(m,v){var S=Nr;Nr|=2;var R=iie();(Ao!==m||Jo!==v)&&(qp=null,Nv(m,v));do try{i4e();break}catch(F){rie(m,F)}while(!0);if(N5(),Nr=S,UR.current=R,Ys!==null)throw Error(n(261));return Ao=null,Jo=0,ao}function i4e(){for(;Ys!==null;)sie(Ys)}function s4e(){for(;Ys!==null&&!si();)sie(Ys)}function sie(m){var v=lie(m.alternate,m,jl);m.memoizedProps=m.pendingProps,v===null?oie(m):Ys=v,lj.current=null}function oie(m){var v=m;do{var S=v.alternate;if(m=v.return,v.flags&32768){if(S=JFe(S,v),S!==null){S.flags&=32767,Ys=S;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{ao=6,Ys=null;return}}else if(S=QFe(S,v,jl),S!==null){Ys=S;return}if(v=v.sibling,v!==null){Ys=v;return}Ys=v=m}while(v!==null);ao===0&&(ao=5)}function Pv(m,v,S){var R=Zt,F=Mc.transition;try{Mc.transition=null,Zt=1,o4e(m,v,S,R)}finally{Mc.transition=F,Zt=R}return null}function o4e(m,v,S,R){do G_();while(Gg!==null);if(Nr&6)throw Error(n(327));S=m.finishedWork;var F=m.finishedLanes;if(S===null)return null;if(m.finishedWork=null,m.finishedLanes=0,S===m.current)throw Error(n(177));m.callbackNode=null,m.callbackPriority=0;var W=S.lanes|S.childLanes;if(Qt(m,W),m===Ao&&(Ys=Ao=null,Jo=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||HR||(HR=!0,cie(wi,function(){return G_(),null})),W=(S.flags&15990)!==0,S.subtreeFlags&15990||W){W=Mc.transition,Mc.transition=null;var ee=Zt;Zt=1;var de=Nr;Nr|=4,lj.current=null,e4e(m,S),Xre(S,m),CFe(v5),fe=!!y5,v5=y5=null,m.current=S,t4e(S),hr(),Nr=de,Zt=ee,Mc.transition=W}else m.current=S;if(HR&&(HR=!1,Gg=m,qR=F),W=m.pendingLanes,W===0&&(Wg=null),Mu(S.stateNode),Hu(m,On()),v!==null)for(R=m.onRecoverableError,S=0;S<v.length;S++)F=v[S],R(F.value,{componentStack:F.stack,digest:F.digest});if(VR)throw VR=!1,m=dj,dj=null,m;return qR&1&&m.tag!==0&&G_(),W=m.pendingLanes,W&1?m===hj?xT++:(xT=0,hj=m):xT=0,zg(),null}function G_(){if(Gg!==null){var m=Fr(qR),v=Mc.transition,S=Zt;try{if(Mc.transition=null,Zt=16>m?16:m,Gg===null)var R=!1;else{if(m=Gg,Gg=null,qR=0,Nr&6)throw Error(n(331));var F=Nr;for(Nr|=4,zt=m.current;zt!==null;){var W=zt,ee=W.child;if(zt.flags&16){var de=W.deletions;if(de!==null){for(var Ee=0;Ee<de.length;Ee++){var He=de[Ee];for(zt=He;zt!==null;){var dt=zt;switch(dt.tag){case 0:case 11:case 15:_T(8,dt,W)}var gt=dt.child;if(gt!==null)gt.return=dt,zt=gt;else for(;zt!==null;){dt=zt;var ct=dt.sibling,jt=dt.return;if(qre(dt),dt===He){zt=null;break}if(ct!==null){ct.return=jt,zt=ct;break}zt=jt}}}var Ht=W.alternate;if(Ht!==null){var Wt=Ht.child;if(Wt!==null){Ht.child=null;do{var As=Wt.sibling;Wt.sibling=null,Wt=As}while(Wt!==null)}}zt=W}}if(W.subtreeFlags&2064&&ee!==null)ee.return=W,zt=ee;else e:for(;zt!==null;){if(W=zt,W.flags&2048)switch(W.tag){case 0:case 11:case 15:_T(9,W,W.return)}var Me=W.sibling;if(Me!==null){Me.return=W.return,zt=Me;break e}zt=W.return}}var Ae=m.current;for(zt=Ae;zt!==null;){ee=zt;var Fe=ee.child;if(ee.subtreeFlags&2064&&Fe!==null)Fe.return=ee,zt=Fe;else e:for(ee=Ae;zt!==null;){if(de=zt,de.flags&2048)try{switch(de.tag){case 0:case 11:case 15:BR(9,de)}}catch(Jt){ds(de,de.return,Jt)}if(de===ee){zt=null;break e}var Tt=de.sibling;if(Tt!==null){Tt.return=de.return,zt=Tt;break e}zt=de.return}}if(Nr=F,zg(),oi&&typeof oi.onPostCommitFiberRoot=="function")try{oi.onPostCommitFiberRoot(Hs,m)}catch{}R=!0}return R}finally{Zt=S,Mc.transition=v}}return!1}function aie(m,v,S){v=V_(S,v),v=Tre(m,v,1),m=Hg(m,v,1),v=nu(),m!==null&&(pn(m,1,v),Hu(m,v))}function ds(m,v,S){if(m.tag===3)aie(m,m,S);else for(;v!==null;){if(v.tag===3){aie(v,m,S);break}else if(v.tag===1){var R=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Wg===null||!Wg.has(R))){m=V_(S,m),m=Cre(v,m,1),v=Hg(v,m,1),m=nu(),v!==null&&(pn(v,1,m),Hu(v,m));break}}v=v.return}}function a4e(m,v,S){var R=m.pingCache;R!==null&&R.delete(v),v=nu(),m.pingedLanes|=m.suspendedLanes&S,Ao===m&&(Jo&S)===S&&(ao===4||ao===3&&(Jo&130023424)===Jo&&500>On()-fj?Nv(m,0):cj|=S),Hu(m,v)}function uie(m,v){v===0&&(m.mode&1?(v=Pe,Pe<<=1,!(Pe&130023424)&&(Pe=4194304)):v=1);var S=nu();m=zp(m,v),m!==null&&(pn(m,v,S),Hu(m,S))}function u4e(m){var v=m.memoizedState,S=0;v!==null&&(S=v.retryLane),uie(m,S)}function l4e(m,v){var S=0;switch(m.tag){case 13:var R=m.stateNode,F=m.memoizedState;F!==null&&(S=F.retryLane);break;case 19:R=m.stateNode;break;default:throw Error(n(314))}R!==null&&R.delete(v),uie(m,S)}var lie;lie=function(m,v,S){if(m!==null)if(m.memoizedProps!==v.pendingProps||Bu.current)zu=!0;else{if(!(m.lanes&S)&&!(v.flags&128))return zu=!1,XFe(m,v,S);zu=!!(m.flags&131072)}else zu=!1,qi&&v.flags&1048576&&zne(v,xR,v.index);switch(v.lanes=0,v.tag){case 2:var R=v.type;FR(m,v),m=v.pendingProps;var F=M_(v,_a.current);U_(v,S),F=z5(null,v,R,m,F,S);var W=V5();return v.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,Uu(R)?(W=!0,_R(v)):W=!1,v.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,M5(v),F.updater=$R,v.stateNode=F,F._reactInternals=v,K5(v,R,m,S),v=Z5(null,v,R,!0,W,S)):(v.tag=0,qi&&W&&T5(v),tu(null,v,F,S),v=v.child),v;case 16:R=v.elementType;e:{switch(FR(m,v),m=v.pendingProps,F=R._init,R=F(R._payload),v.type=R,F=v.tag=f4e(R),m=Df(R,m),F){case 0:v=J5(null,v,R,m,S);break e;case 1:v=Mre(null,v,R,m,S);break e;case 11:v=Rre(null,v,R,m,S);break e;case 14:v=Nre(null,v,R,Df(R.type,m),S);break e}throw Error(n(306,R,""))}return v;case 0:return R=v.type,F=v.pendingProps,F=v.elementType===R?F:Df(R,F),J5(m,v,R,F,S);case 1:return R=v.type,F=v.pendingProps,F=v.elementType===R?F:Df(R,F),Mre(m,v,R,F,S);case 3:e:{if($re(v),m===null)throw Error(n(387));R=v.pendingProps,W=v.memoizedState,F=W.element,Qne(m,v),kR(v,R,null,S);var ee=v.memoizedState;if(R=ee.element,W.isDehydrated)if(W={element:R,isDehydrated:!1,cache:ee.cache,pendingSuspenseBoundaries:ee.pendingSuspenseBoundaries,transitions:ee.transitions},v.updateQueue.baseState=W,v.memoizedState=W,v.flags&256){F=V_(Error(n(423)),v),v=Lre(m,v,R,S,F);break e}else if(R!==F){F=V_(Error(n(424)),v),v=Lre(m,v,R,S,F);break e}else for(Fl=jg(v.stateNode.containerInfo.firstChild),Ll=v,qi=!0,Pf=null,S=Kne(v,null,R,S),v.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(F_(),R===F){v=Hp(m,v,S);break e}tu(m,v,R,S)}v=v.child}return v;case 5:return ere(v),m===null&&I5(v),R=v.type,F=v.pendingProps,W=m!==null?m.memoizedProps:null,ee=F.children,b5(R,F)?ee=null:W!==null&&b5(R,W)&&(v.flags|=32),Ore(m,v),tu(m,v,ee,S),v.child;case 6:return m===null&&I5(v),null;case 13:return Fre(m,v,S);case 4:return $5(v,v.stateNode.containerInfo),R=v.pendingProps,m===null?v.child=j_(v,null,R,S):tu(m,v,R,S),v.child;case 11:return R=v.type,F=v.pendingProps,F=v.elementType===R?F:Df(R,F),Rre(m,v,R,F,S);case 7:return tu(m,v,v.pendingProps,S),v.child;case 8:return tu(m,v,v.pendingProps.children,S),v.child;case 12:return tu(m,v,v.pendingProps.children,S),v.child;case 10:e:{if(R=v.type._context,F=v.pendingProps,W=v.memoizedProps,ee=F.value,Ai(CR,R._currentValue),R._currentValue=ee,W!==null)if(Nf(W.value,ee)){if(W.children===F.children&&!Bu.current){v=Hp(m,v,S);break e}}else for(W=v.child,W!==null&&(W.return=v);W!==null;){var de=W.dependencies;if(de!==null){ee=W.child;for(var Ee=de.firstContext;Ee!==null;){if(Ee.context===R){if(W.tag===1){Ee=Vp(-1,S&-S),Ee.tag=2;var He=W.updateQueue;if(He!==null){He=He.shared;var dt=He.pending;dt===null?Ee.next=Ee:(Ee.next=dt.next,dt.next=Ee),He.pending=Ee}}W.lanes|=S,Ee=W.alternate,Ee!==null&&(Ee.lanes|=S),D5(W.return,S,v),de.lanes|=S;break}Ee=Ee.next}}else if(W.tag===10)ee=W.type===v.type?null:W.child;else if(W.tag===18){if(ee=W.return,ee===null)throw Error(n(341));ee.lanes|=S,de=ee.alternate,de!==null&&(de.lanes|=S),D5(ee,S,v),ee=W.sibling}else ee=W.child;if(ee!==null)ee.return=W;else for(ee=W;ee!==null;){if(ee===v){ee=null;break}if(W=ee.sibling,W!==null){W.return=ee.return,ee=W;break}ee=ee.return}W=ee}tu(m,v,F.children,S),v=v.child}return v;case 9:return F=v.type,R=v.pendingProps.children,U_(v,S),F=Dc(F),R=R(F),v.flags|=1,tu(m,v,R,S),v.child;case 14:return R=v.type,F=Df(R,v.pendingProps),F=Df(R.type,F),Nre(m,v,R,F,S);case 15:return Pre(m,v,v.type,v.pendingProps,S);case 17:return R=v.type,F=v.pendingProps,F=v.elementType===R?F:Df(R,F),FR(m,v),v.tag=1,Uu(R)?(m=!0,_R(v)):m=!1,U_(v,S),xre(v,R,F),K5(v,R,F,S),Z5(null,v,R,!0,m,S);case 19:return Bre(m,v,S);case 22:return Dre(m,v,S)}throw Error(n(156,v.tag))};function cie(m,v){return an(m,v)}function c4e(m,v,S,R){this.tag=m,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $c(m,v,S,R){return new c4e(m,v,S,R)}function bj(m){return m=m.prototype,!(!m||!m.isReactComponent)}function f4e(m){if(typeof m=="function")return bj(m)?1:0;if(m!=null){if(m=m.$$typeof,m===j)return 11;if(m===V)return 14}return 2}function Xg(m,v){var S=m.alternate;return S===null?(S=$c(m.tag,v,m.key,m.mode),S.elementType=m.elementType,S.type=m.type,S.stateNode=m.stateNode,S.alternate=m,m.alternate=S):(S.pendingProps=v,S.type=m.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=m.flags&14680064,S.childLanes=m.childLanes,S.lanes=m.lanes,S.child=m.child,S.memoizedProps=m.memoizedProps,S.memoizedState=m.memoizedState,S.updateQueue=m.updateQueue,v=m.dependencies,S.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},S.sibling=m.sibling,S.index=m.index,S.ref=m.ref,S}function KR(m,v,S,R,F,W){var ee=2;if(R=m,typeof m=="function")bj(m)&&(ee=1);else if(typeof m=="string")ee=5;else e:switch(m){case A:return Dv(S.children,F,W,v);case k:ee=8,F|=8;break;case N:return m=$c(12,S,v,F|2),m.elementType=N,m.lanes=W,m;case M:return m=$c(13,S,v,F),m.elementType=M,m.lanes=W,m;case B:return m=$c(19,S,v,F),m.elementType=B,m.lanes=W,m;case G:return XR(S,F,W,v);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case P:ee=10;break e;case D:ee=9;break e;case j:ee=11;break e;case V:ee=14;break e;case z:ee=16,R=null;break e}throw Error(n(130,m==null?m:typeof m,""))}return v=$c(ee,S,v,F),v.elementType=m,v.type=R,v.lanes=W,v}function Dv(m,v,S,R){return m=$c(7,m,R,v),m.lanes=S,m}function XR(m,v,S,R){return m=$c(22,m,R,v),m.elementType=G,m.lanes=S,m.stateNode={isHidden:!1},m}function _j(m,v,S){return m=$c(6,m,null,v),m.lanes=S,m}function wj(m,v,S){return v=$c(4,m.children!==null?m.children:[],m.key,v),v.lanes=S,v.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},v}function d4e(m,v,S,R,F){this.tag=v,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lt(0),this.expirationTimes=Lt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lt(0),this.identifierPrefix=R,this.onRecoverableError=F,this.mutableSourceEagerHydrationData=null}function Ej(m,v,S,R,F,W,ee,de,Ee){return m=new d4e(m,v,S,de,Ee),v===1?(v=1,W===!0&&(v|=8)):v=0,W=$c(3,null,null,v),m.current=W,W.stateNode=m,W.memoizedState={element:R,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},M5(W),m}function h4e(m,v,S){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:T,key:R==null?null:""+R,children:m,containerInfo:v,implementation:S}}function fie(m){if(!m)return Ug;m=m._reactInternals;e:{if(en(m)!==m||m.tag!==1)throw Error(n(170));var v=m;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(Uu(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(n(171))}if(m.tag===1){var S=m.type;if(Uu(S))return jne(m,S,v)}return v}function die(m,v,S,R,F,W,ee,de,Ee){return m=Ej(S,R,!0,m,F,W,ee,de,Ee),m.context=fie(null),S=m.current,R=nu(),F=Yg(S),W=Vp(R,F),W.callback=v??null,Hg(S,W,F),m.current.lanes=F,pn(m,F,R),Hu(m,R),m}function QR(m,v,S,R){var F=v.current,W=nu(),ee=Yg(F);return S=fie(S),v.context===null?v.context=S:v.pendingContext=S,v=Vp(W,ee),v.payload={element:m},R=R===void 0?null:R,R!==null&&(v.callback=R),m=Hg(F,v,ee),m!==null&&($f(m,F,ee,W),IR(m,F,ee)),ee}function JR(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function hie(m,v){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var S=m.retryLane;m.retryLane=S!==0&&S<v?S:v}}function xj(m,v){hie(m,v),(m=m.alternate)&&hie(m,v)}function p4e(){return null}var pie=typeof reportError=="function"?reportError:function(m){console.error(m)};function Sj(m){this._internalRoot=m}ZR.prototype.render=Sj.prototype.render=function(m){var v=this._internalRoot;if(v===null)throw Error(n(409));QR(m,v,null,null)},ZR.prototype.unmount=Sj.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var v=m.containerInfo;Rv(function(){QR(null,m,null,null)}),v[Fp]=null}};function ZR(m){this._internalRoot=m}ZR.prototype.unstable_scheduleHydration=function(m){if(m){var v=Mg();m={blockedOn:null,target:m,priority:v};for(var S=0;S<Lu.length&&v!==0&&v<Lu[S].priority;S++);Lu.splice(S,0,m),S===0&&bv(m)}};function Tj(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function eN(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function mie(){}function m4e(m,v,S,R,F){if(F){if(typeof R=="function"){var W=R;R=function(){var He=JR(ee);W.call(He)}}var ee=die(v,R,m,0,null,!1,!1,"",mie);return m._reactRootContainer=ee,m[Fp]=ee.current,aT(m.nodeType===8?m.parentNode:m),Rv(),ee}for(;F=m.lastChild;)m.removeChild(F);if(typeof R=="function"){var de=R;R=function(){var He=JR(Ee);de.call(He)}}var Ee=Ej(m,0,!1,null,null,!1,!1,"",mie);return m._reactRootContainer=Ee,m[Fp]=Ee.current,aT(m.nodeType===8?m.parentNode:m),Rv(function(){QR(v,Ee,S,R)}),Ee}function tN(m,v,S,R,F){var W=S._reactRootContainer;if(W){var ee=W;if(typeof F=="function"){var de=F;F=function(){var Ee=JR(ee);de.call(Ee)}}QR(v,ee,m,F)}else ee=m4e(S,v,m,F,R);return JR(ee)}ro=function(m){switch(m.tag){case 3:var v=m.stateNode;if(v.current.memoizedState.isDehydrated){var S=Se(v.pendingLanes);S!==0&&(Jn(v,S|1),Hu(v,On()),!(Nr&6)&&(W_=On()+500,zg()))}break;case 13:Rv(function(){var R=zp(m,1);if(R!==null){var F=nu();$f(R,m,1,F)}}),xj(m,1)}},$u=function(m){if(m.tag===13){var v=zp(m,134217728);if(v!==null){var S=nu();$f(v,m,134217728,S)}xj(m,134217728)}},Cc=function(m){if(m.tag===13){var v=Yg(m),S=zp(m,v);if(S!==null){var R=nu();$f(S,m,v,R)}xj(m,v)}},Mg=function(){return Zt},Hd=function(m,v){var S=Zt;try{return Zt=m,v()}finally{Zt=S}},Si=function(m,v,S){switch(v){case"input":if(ke(m,S),v=S.name,S.type==="radio"&&v!=null){for(S=m;S.parentNode;)S=S.parentNode;for(S=S.querySelectorAll("input[name="+JSON.stringify(""+v)+'][type="radio"]'),v=0;v<S.length;v++){var R=S[v];if(R!==m&&R.form===m.form){var F=vR(R);if(!F)throw Error(n(90));re(R),ke(R,F)}}}break;case"textarea":kt(m,S);break;case"select":v=S.value,v!=null&&Rt(m,!!S.multiple,v,!1)}},ba=gj,Ol=Rv;var g4e={usingClientEntryPoint:!1,Events:[cT,D_,vR,is,Tc,gj]},ST={findFiberByHostInstance:Ev,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},y4e={bundleType:ST.bundleType,version:ST.version,rendererPackageName:ST.rendererPackageName,rendererConfig:ST.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=fr(m),m===null?null:m.stateNode},findFiberByHostInstance:ST.findFiberByHostInstance||p4e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nN.isDisabled&&nN.supportsFiber)try{Hs=nN.inject(y4e),oi=nN}catch{}}return Wu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g4e,Wu.createPortal=function(m,v){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tj(v))throw Error(n(200));return h4e(m,v,null,S)},Wu.createRoot=function(m,v){if(!Tj(m))throw Error(n(299));var S=!1,R="",F=pie;return v!=null&&(v.unstable_strictMode===!0&&(S=!0),v.identifierPrefix!==void 0&&(R=v.identifierPrefix),v.onRecoverableError!==void 0&&(F=v.onRecoverableError)),v=Ej(m,1,!1,null,null,S,!1,R,F),m[Fp]=v.current,aT(m.nodeType===8?m.parentNode:m),new Sj(v)},Wu.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var v=m._reactInternals;if(v===void 0)throw typeof m.render=="function"?Error(n(188)):(m=Object.keys(m).join(","),Error(n(268,m)));return m=fr(v),m=m===null?null:m.stateNode,m},Wu.flushSync=function(m){return Rv(m)},Wu.hydrate=function(m,v,S){if(!eN(v))throw Error(n(200));return tN(null,m,v,!0,S)},Wu.hydrateRoot=function(m,v,S){if(!Tj(m))throw Error(n(405));var R=S!=null&&S.hydratedSources||null,F=!1,W="",ee=pie;if(S!=null&&(S.unstable_strictMode===!0&&(F=!0),S.identifierPrefix!==void 0&&(W=S.identifierPrefix),S.onRecoverableError!==void 0&&(ee=S.onRecoverableError)),v=die(v,null,m,1,S??null,F,!1,W,ee),m[Fp]=v.current,aT(m),R)for(m=0;m<R.length;m++)S=R[m],F=S._getVersion,F=F(S._source),v.mutableSourceEagerHydrationData==null?v.mutableSourceEagerHydrationData=[S,F]:v.mutableSourceEagerHydrationData.push(S,F);return new ZR(v)},Wu.render=function(m,v,S){if(!eN(v))throw Error(n(200));return tN(null,m,v,!1,S)},Wu.unmountComponentAtNode=function(m){if(!eN(m))throw Error(n(40));return m._reactRootContainer?(Rv(function(){tN(null,null,m,!1,function(){m._reactRootContainer=null,m[Fp]=null})}),!0):!1},Wu.unstable_batchedUpdates=gj,Wu.unstable_renderSubtreeIntoContainer=function(m,v,S,R){if(!eN(S))throw Error(n(200));if(m==null||m._reactInternals===void 0)throw Error(n(38));return tN(m,v,S,!1,R)},Wu.version="18.3.1-next-f1338f8080-20240426",Wu}var xie;function F0e(){if(xie)return Ij.exports;xie=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ij.exports=k4e(),Ij.exports}var Sie;function R4e(){if(Sie)return rN;Sie=1;var e=F0e();return rN.createRoot=e.createRoot,rN.hydrateRoot=e.hydrateRoot,rN}var N4e=R4e();const P4e=Ru(N4e);var ph=function(){return ph=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ph.apply(this,arguments)};function yI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function fm(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Tie(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function D4e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function wr(e){return this instanceof wr?(this.v=e,this):new wr(e)}function v1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(g){return new Promise(function(y,b){s.push([h,g,y,b])>1||u(h,g)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(g){d(s[0][3],g)}}function l(h){h.value instanceof wr?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function Nj(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:wr(e[i](o)),done:!1}:s?s(o):o}:s}}function u2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Tie=="function"?Tie(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var cD="right-scroll-bar-position",fD="width-before-scroll-bar",O4e="with-scroll-bars-hidden",M4e="--removed-body-scroll-bar-size";function Pj(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function $4e(e,t){var n=O.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var L4e=typeof window<"u"?O.useLayoutEffect:O.useEffect,Cie=new WeakMap;function F4e(e,t){var n=$4e(null,function(r){return e.forEach(function(i){return Pj(i,r)})});return L4e(function(){var r=Cie.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||Pj(a,null)}),s.forEach(function(a){i.has(a)||Pj(a,o)})}Cie.set(n,e)},[e]),n}function j4e(e){return e}function B4e(e,t){t===void 0&&(t=j4e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function U4e(e){e===void 0&&(e={});var t=B4e(null);return t.options=ph({async:!0,ssr:!1},e),t}var j0e=function(e){var t=e.sideCar,n=yI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return O.createElement(r,ph({},n))};j0e.isSideCarExport=!0;function z4e(e,t){return e.useMedium(t),j0e}var B0e=U4e(),Dj=function(){},I$=O.forwardRef(function(e,t){var n=O.useRef(null),r=O.useState({onScrollCapture:Dj,onWheelCapture:Dj,onTouchMoveCapture:Dj}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,g=e.allowPinchZoom,y=e.as,b=y===void 0?"div":y,_=e.gapMode,E=yI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=d,x=F4e([n,t]),T=ph(ph({},E),i);return O.createElement(O.Fragment,null,c&&O.createElement(C,{sideCar:B0e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!g,lockRef:n,gapMode:_}),o?O.cloneElement(O.Children.only(a),ph(ph({},T),{ref:x})):O.createElement(b,ph({},T,{className:u,ref:x}),a))});I$.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};I$.classNames={fullWidth:fD,zeroRight:cD};var V4e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function H4e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=V4e();return t&&e.setAttribute("nonce",t),e}function q4e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function W4e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var G4e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=H4e())&&(q4e(t,n),W4e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Y4e=function(){var e=G4e();return function(t,n){O.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},U0e=function(){var e=Y4e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},K4e={left:0,top:0,right:0,gap:0},Oj=function(e){return parseInt(e||"",10)||0},X4e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[Oj(n),Oj(r),Oj(i)]},Q4e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return K4e;var t=X4e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},J4e=U0e(),Xw="data-scroll-locked",Z4e=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(O4e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Xw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(cD,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(fD,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(cD," .").concat(cD,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(fD," .").concat(fD,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Xw,`] {
    `).concat(M4e,": ").concat(a,`px;
  }
`)},Aie=function(){var e=parseInt(document.body.getAttribute(Xw)||"0",10);return isFinite(e)?e:0},e5e=function(){O.useEffect(function(){return document.body.setAttribute(Xw,(Aie()+1).toString()),function(){var e=Aie()-1;e<=0?document.body.removeAttribute(Xw):document.body.setAttribute(Xw,e.toString())}},[])},t5e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;e5e();var s=O.useMemo(function(){return Q4e(i)},[i]);return O.createElement(J4e,{styles:Z4e(s,!t,i,n?"":"!important")})},vU=!1;if(typeof window<"u")try{var iN=Object.defineProperty({},"passive",{get:function(){return vU=!0,!0}});window.addEventListener("test",iN,iN),window.removeEventListener("test",iN,iN)}catch{vU=!1}var Y_=vU?{passive:!1}:!1,n5e=function(e){return e.tagName==="TEXTAREA"},z0e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!n5e(e)&&n[t]==="visible")},r5e=function(e){return z0e(e,"overflowY")},i5e=function(e){return z0e(e,"overflowX")},Iie=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=V0e(e,r);if(i){var s=H0e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},s5e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},o5e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},V0e=function(e,t){return e==="v"?r5e(t):i5e(t)},H0e=function(e,t){return e==="v"?s5e(t):o5e(t)},a5e=function(e,t){return e==="h"&&t==="rtl"?-1:1},u5e=function(e,t,n,r,i){var s=a5e(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=H0e(e,a),p=h[0],g=h[1],y=h[2],b=g-y-s*p;(p||b)&&V0e(e,a)&&(f+=b,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},sN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},kie=function(e){return[e.deltaX,e.deltaY]},Rie=function(e){return e&&"current"in e?e.current:e},l5e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},c5e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},f5e=0,K_=[];function d5e(e){var t=O.useRef([]),n=O.useRef([0,0]),r=O.useRef(),i=O.useState(f5e++)[0],s=O.useState(U0e)[0],o=O.useRef(e);O.useEffect(function(){o.current=e},[e]),O.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var g=D4e([e.lockRef.current],(e.shards||[]).map(Rie),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=O.useCallback(function(g,y){if("touches"in g&&g.touches.length===2)return!o.current.allowPinchZoom;var b=sN(g),_=n.current,E="deltaX"in g?g.deltaX:_[0]-b[0],C="deltaY"in g?g.deltaY:_[1]-b[1],x,T=g.target,A=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in g&&A==="h"&&T.type==="range")return!1;var k=Iie(A,T);if(!k)return!0;if(k?x=A:(x=A==="v"?"h":"v",k=Iie(A,T)),!k)return!1;if(!r.current&&"changedTouches"in g&&(E||C)&&(r.current=x),!x)return!0;var N=r.current||x;return u5e(N,y,g,N==="h"?E:C,!0)},[]),u=O.useCallback(function(g){var y=g;if(!(!K_.length||K_[K_.length-1]!==s)){var b="deltaY"in y?kie(y):sN(y),_=t.current.filter(function(x){return x.name===y.type&&(x.target===y.target||y.target===x.shadowParent)&&l5e(x.delta,b)})[0];if(_&&_.should){y.cancelable&&y.preventDefault();return}if(!_){var E=(o.current.shards||[]).map(Rie).filter(Boolean).filter(function(x){return x.contains(y.target)}),C=E.length>0?a(y,E[0]):!o.current.noIsolation;C&&y.cancelable&&y.preventDefault()}}},[]),l=O.useCallback(function(g,y,b,_){var E={name:g,delta:y,target:b,should:_,shadowParent:h5e(b)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),c=O.useCallback(function(g){n.current=sN(g),r.current=void 0},[]),f=O.useCallback(function(g){l(g.type,kie(g),g.target,a(g,e.lockRef.current))},[]),d=O.useCallback(function(g){l(g.type,sN(g),g.target,a(g,e.lockRef.current))},[]);O.useEffect(function(){return K_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,Y_),document.addEventListener("touchmove",u,Y_),document.addEventListener("touchstart",c,Y_),function(){K_=K_.filter(function(g){return g!==s}),document.removeEventListener("wheel",u,Y_),document.removeEventListener("touchmove",u,Y_),document.removeEventListener("touchstart",c,Y_)}},[]);var h=e.removeScrollBar,p=e.inert;return O.createElement(O.Fragment,null,p?O.createElement(s,{styles:c5e(i)}):null,h?O.createElement(t5e,{gapMode:e.gapMode}):null)}function h5e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const p5e=z4e(B0e,d5e);var k$=O.forwardRef(function(e,t){return O.createElement(I$,ph({},e,{ref:t,sideCar:p5e}))});k$.classNames=I$.classNames;function xi(e){return Object.keys(e)}function Mj(e){return e&&typeof e=="object"&&!Array.isArray(e)}function JH(e,t){const n={...e},r=t;return Mj(e)&&Mj(t)&&Object.keys(t).forEach(i=>{Mj(r[i])&&i in e?n[i]=JH(n[i],r[i]):n[i]=r[i]}),n}function m5e(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function g5e(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function q2(e){const t=g5e(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function $j(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function q0e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?$j(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?$j(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?$j(s):s}}return r}return n}const Ve=q0e("rem",{shouldScale:!0}),gO=q0e("em");function jy(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function W0e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function By(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==O.Fragment:!1}function Wo(e){const t=O.createContext(null);return[({children:i,value:s})=>w.jsx(t.Provider,{value:s,children:i}),()=>{const i=O.useContext(t);if(i===null)throw new Error(e);return i}]}function jx(e=null){const t=O.createContext(e);return[({children:i,value:s})=>w.jsx(t.Provider,{value:s,children:i}),()=>O.useContext(t)]}function yO(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function vO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function y5e(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function v5e(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function b5e(e,t,n){return vO(e,n)===vO(t,n)}function ZH({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=vO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(g=>b5e(a.currentTarget,g,e)),l=u.findIndex(g=>a.currentTarget===g),c=v5e(l,u,r),f=y5e(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const g=u.length-1;!u[g].disabled&&u[g].focus();break}}}}const _5e={app:100,modal:200,popover:300,overlay:400,max:9999};function Ec(e){return _5e[e]}const w5e=()=>{};function E5e(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||w5e:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Cn(e,t="size",n=!0){if(e!==void 0)return W0e(e)?n?Ve(e):e:`var(--${t}-${e})`}function Ps(e){return Cn(e,"mantine-spacing")}function vi(e){return e===void 0?"var(--mantine-radius-default)":Cn(e,"mantine-radius")}function zo(e){return Cn(e,"mantine-font-size")}function G0e(e){return Cn(e,"mantine-line-height",!1)}function eq(e){if(e)return Cn(e,"mantine-shadow",!1)}function vm(e,t){return n=>{e==null||e(n),t==null||t(n)}}function tq(e,t){return e in t.breakpoints?q2(t.breakpoints[e]):q2(e)}function W2(e,t){const n=e.map(r=>({value:r,px:tq(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function id(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function x5e(e,t,n){var r;return n?Array.from(((r=vO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function S5e(){const[e,t]=O.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Ch(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Qw(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function u1(e){const t=O.useRef(e);return O.useEffect(()=>{t.current=e}),O.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function R$(e,t){const n=u1(e),r=O.useRef(0);return O.useEffect(()=>()=>window.clearTimeout(r.current),[]),O.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const Nie=["mousedown","touchstart"];function T5e(e,t,n){const r=O.useRef();return O.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Nie).forEach(s=>document.addEventListener(s,i)),()=>{(t||Nie).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function C5e(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function A5e(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function I5e(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=O.useState(n?t:A5e(e)),s=O.useRef();return O.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),C5e(s.current,o=>i(o.matches))},[e]),r}const Ob=typeof document<"u"?O.useLayoutEffect:O.useEffect;function Gh(e,t){const n=O.useRef(!1);O.useEffect(()=>()=>{n.current=!1},[]),O.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function Y0e({opened:e,shouldReturnFocus:t=!0}){const n=O.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Gh(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function k5e(e,t="body > :not(script)"){const n=Qw(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const R5e=/input|select|textarea|button|object/,K0e="a, input, select, textarea, button, object, [tabindex]";function N5e(e){return e.style.display==="none"}function P5e(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(N5e(n))return!1;n=n.parentNode}return!0}function X0e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function bU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(X0e(e));return(R5e.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&P5e(e)}function Q0e(e){const t=X0e(e);return(Number.isNaN(t)||t>=0)&&bU(e)}function D5e(e){return Array.from(e.querySelectorAll(K0e)).filter(Q0e)}function O5e(e,t){const n=D5e(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function M5e(e=!0){const t=O.useRef(),n=O.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(K0e));o=a.find(Q0e)||a.find(bU)||null,!o&&bU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=O.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=k5e(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return O.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&O5e(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const $5e=e=>(e+1)%1e6;function L5e(){const[,e]=O.useReducer($5e,0);return e}const F5e=Jr.useId||(()=>{});function j5e(){const e=F5e();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ka(e){const t=j5e(),[n,r]=O.useState(t);return Ob(()=>{r(Qw())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function J0e(e,t,n){O.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function nq(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Z0e(...e){return t=>{e.forEach(n=>nq(n,t))}}function Ls(...e){return O.useCallback(Z0e(...e),e)}function eye(e,t,n="ltr"){const r=O.useRef(null),i=O.useRef(!1),s=O.useRef(!1),o=O.useRef(0),[a,u]=O.useState(!1);return O.useEffect(()=>{i.current=!0},[]),O.useEffect(()=>{var _,E;const l=({x:C,y:x})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const A=Ch((C-T.left)/T.width,0,1);e({x:n==="ltr"?A:1-A,y:Ch((x-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",g),document.addEventListener("mouseup",h),document.addEventListener("touchmove",b),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",b),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=C=>{d(),C.preventDefault(),g(C)},g=C=>l({x:C.clientX,y:C.clientY}),y=C=>{C.cancelable&&C.preventDefault(),d(),b(C)},b=C=>{C.cancelable&&C.preventDefault(),l({x:C.changedTouches[0].clientX,y:C.changedTouches[0].clientY})};return(_=r.current)==null||_.addEventListener("mousedown",p),(E=r.current)==null||E.addEventListener("touchstart",y,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",y))}},[n,e]),{ref:r,active:a}}function eo({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=O.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function N$(e,t){return I5e("(prefers-reduced-motion: reduce)",e,t)}const B5e={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function dd(e){const t=O.useRef(0),n=O.useRef(null),[r,i]=O.useState(B5e),s=O.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return O.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function U5e(e){const[t,{width:n,height:r}]=dd(e);return{ref:t,width:n,height:r}}function z5e(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function V5e(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function H5e(e){return t=>V5e(z5e(e),t)}function q5e(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{H5e(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function P$(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=O.useState(e),o=O.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=O.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=O.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function W5e(e,t,n={autoInvoke:!1}){const r=O.useRef(null),i=O.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=O.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return O.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function G5e(e,t,n){const r=O.useRef(),i=O.useRef(null);return O.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function Y5e(){const[e,t]=O.useState(!1);return O.useEffect(()=>t(!0),[]),e}function K5e(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function X5e(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Ob(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>K5e(`${e}:${String(r)}`,i[0])}return[t,n]}var Q5e={};function tye(){return typeof process<"u"&&Q5e?"production":"development"}function nye(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=nye(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function xs(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=nye(e))&&(r&&(r+=" "),r+=t);return r}const J5e={};function Z5e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=xs(t[r],i):t[r]=i})}),t}function D$({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||J5e);return Z5e(s)}function bO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const rye=O.createContext(null);function Uy(){const e=O.useContext(rye);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function eje(){return Uy().cssVariablesResolver}function tje(){return Uy().classNamesPrefix}function rq(){return Uy().getStyleNonce}function nje(){return Uy().withStaticClasses}function rje(){return Uy().headless}function ije(){var e;return(e=Uy().stylesTransform)==null?void 0:e.sx}function sje(){var e;return(e=Uy().stylesTransform)==null?void 0:e.styles}function oje(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function aje(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function uje(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function lje(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function iq(e){return oje(e)?aje(e):e.startsWith("rgb")?uje(e):e.startsWith("hsl")?lje(e):{r:0,g:0,b:0,a:1}}function oN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=iq(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function G2(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function Lj(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function cje(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function fje(e){if(e.startsWith("oklch("))return(cje(e)||0)/100;const{r:t,g:n,b:r}=iq(e),i=t/255,s=n/255,o=r/255,a=Lj(i),u=Lj(s),l=Lj(o);return .2126*a+.7152*u+.0722*l}function CT(e,t=.179){return e.startsWith("var(")?!1:fje(e)>t}function dp({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:CT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:CT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:CT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][G2(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:CT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:CT(e,t.luminanceThreshold),shade:s,variable:void 0}}function di(e,t){const n=dp({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function _U(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=di(n.from,t),i=di(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function sh(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=iq(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const X_=sh,dje=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=dp({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ve(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ve(1)} solid transparent`}:{background:e,hover:oN(e,.1),color:a,border:`${Ve(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ve(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:sh(a,.1),hover:sh(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ve(1)} solid transparent`}}return{background:sh(e,.1),hover:sh(e,.12),color:e,border:`${Ve(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ve(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:sh(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ve(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:sh(e,.05),color:e,border:`${Ve(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ve(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:sh(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ve(1)} solid transparent`}}return{background:"transparent",hover:sh(e,.12),color:e,border:`${Ve(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ve(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ve(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ve(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:oN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ve(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:oN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ve(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:oN(t.white,.01),color:e,border:`${Ve(1)} solid transparent`}:n==="gradient"?{background:_U(r,t),hover:_U(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ve(1)} solid var(--mantine-color-default-border)`}:{}},hje={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Pie="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",sq={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:hje,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:dje,autoContrast:!1,luminanceThreshold:.3,fontFamily:Pie,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Pie,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ve(34),lineHeight:"1.3"},h2:{fontSize:Ve(26),lineHeight:"1.35"},h3:{fontSize:Ve(22),lineHeight:"1.4"},h4:{fontSize:Ve(18),lineHeight:"1.45"},h5:{fontSize:Ve(16),lineHeight:"1.5"},h6:{fontSize:Ve(14),lineHeight:"1.5"}}},fontSizes:{xs:Ve(12),sm:Ve(14),md:Ve(16),lg:Ve(18),xl:Ve(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ve(2),sm:Ve(4),md:Ve(8),lg:Ve(16),xl:Ve(32)},spacing:{xs:Ve(10),sm:Ve(12),md:Ve(16),lg:Ve(20),xl:Ve(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ve(1)} ${Ve(3)} rgba(0, 0, 0, 0.05), 0 ${Ve(1)} ${Ve(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ve(1)} ${Ve(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ve(10)} ${Ve(15)} ${Ve(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ve(7)} ${Ve(7)} ${Ve(-5)}`,md:`0 ${Ve(1)} ${Ve(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ve(20)} ${Ve(25)} ${Ve(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ve(10)} ${Ve(10)} ${Ve(-5)}`,lg:`0 ${Ve(1)} ${Ve(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ve(28)} ${Ve(23)} ${Ve(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ve(12)} ${Ve(12)} ${Ve(-7)}`,xl:`0 ${Ve(1)} ${Ve(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ve(36)} ${Ve(28)} ${Ve(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ve(17)} ${Ve(17)} ${Ve(-7)}`},other:{},components:{}};function Die(e){return e==="auto"||e==="dark"||e==="light"}function pje({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Die(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Die(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const mje="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Oie="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function Fj(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Mie(e){if(!(e.primaryColor in e.colors))throw new Error(mje);if(typeof e.primaryShade=="object"&&(!Fj(e.primaryShade.dark)||!Fj(e.primaryShade.light)))throw new Error(Oie);if(typeof e.primaryShade=="number"&&!Fj(e.primaryShade))throw new Error(Oie)}function gje(e,t){var r;if(!t)return Mie(e),e;const n=JH(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Mie(n),n}const oq=O.createContext(null),yje=()=>O.useContext(oq)||sq;function Fs(){const e=O.useContext(oq);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function iye({theme:e,children:t,inherit:n=!0}){const r=yje(),i=O.useMemo(()=>gje(n?r:sq,e),[e,r,n]);return w.jsx(oq.Provider,{value:i,children:t})}iye.displayName="@mantine/core/MantineThemeProvider";function vje(){const e=Fs(),t=rq(),n=xi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=q2(e.breakpoints[i]),a=s?`${o-.1}px`:gO(o-.1),u=s?`${o}px`:gO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return w.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function jj(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Bj(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function bje(e,t){const n=jj(e.variables),r=n?Bj(t,n):"",i=jj(e.dark),s=i?Bj(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=jj(e.light),a=o?Bj(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function zy({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&dp({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function $ie(e,t){return zy({color:e.colors[e.primaryColor][G2(e,t)],theme:e,autoContrast:null})}function aN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=G2(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:X_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:X_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:X_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=G2(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:X_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:X_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:X_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function _je(e){return Array.isArray(e)?e:Array(10).fill(e)}function wje(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function Q_(e,t,n){xi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const sye=e=>{const t=G2(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ve(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":$ie(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":$ie(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Q_(r.variables,e.breakpoints,"breakpoint"),Q_(r.variables,e.spacing,"spacing"),Q_(r.variables,e.fontSizes,"font-size"),Q_(r.variables,e.lineHeights,"line-height"),Q_(r.variables,e.shadows,"shadow"),Q_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),xi(e.colors).forEach(s=>{const o=e.colors[s];if(wje(o)){Object.assign(r.light,aN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,aN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,aN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,aN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return xi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function Eje({theme:e,generator:t}){const n=sye(e),r=t==null?void 0:t(e);return r?JH(n,r):n}const Uj=sye(sq);function xje(e){const t={variables:{},light:{},dark:{}};return xi(e.variables).forEach(n=>{Uj.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),xi(e.light).forEach(n=>{Uj.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),xi(e.dark).forEach(n=>{Uj.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function Sje(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function oye({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Fs(),r=rq(),i=eje(),s=Eje({theme:n,generator:i}),o=e===":root"&&t,a=o?xje(s):s,u=bje(a,e);return u?w.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":Sje(e)}`}}):null}oye.displayName="@mantine/CssVariables";function Tje(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function J_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function Cje({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=O.useRef(),[s,o]=O.useState(()=>e.get(t)),a=r||s,u=O.useCallback(c=>{r||(J_(c,n),o(c),e.set(c))},[e.set,a,r]),l=O.useCallback(()=>{o(t),J_(t,n),e.clear()},[e.clear,t]);return O.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Ob(()=>{J_(e.get(t),n)},[]),O.useEffect(()=>{var f;if(r)return J_(r,n),()=>{};r===void 0&&J_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&J_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function Aje({respectReducedMotion:e,getRootElement:t}){Ob(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}Tje();function aye({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=pje(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:g,setColorScheme:y,clearColorScheme:b}=Cje({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return Aje({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),w.jsx(rye.Provider,{value:{colorScheme:g,setColorScheme:y,clearColorScheme:b,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:w.jsxs(iye,{theme:e,children:[o&&w.jsx(oye,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&w.jsx(vje,{}),t]})})}aye.displayName="@mantine/core/MantineProvider";function lg({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Fs();return{resolvedClassNames:D$({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:bO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const Ije={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function kje({theme:e,options:t,unstyled:n}){return xs((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||Ije[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function Rje({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return D$({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Lie({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return D$({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function Nje({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function Pje({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function Dje({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function Oje({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=D$({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function Mje({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function $je({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return xs(kje({theme:e,options:t,unstyled:a||h}),Oje({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),Mje({options:t,classes:o,selector:r,unstyled:a}),Lie({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Lie({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),Rje({selector:r,stylesCtx:f,options:t,props:c,theme:e}),Nje({rootSelector:l,selector:r,className:u}),Pje({selector:r,classes:o,unstyled:a||h}),d&&!h&&Dje({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function Lje({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return bO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function wU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...wU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function Fje(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...jy(n[r])}}),t),{})}function jje({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=Fje([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function Bje({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&Lje({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&bO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&bO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...jje({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?wU({style:u,theme:e}):null,...wU({style:r==null?void 0:r.style,theme:e})}}function Uje({props:e,stylesCtx:t,themeName:n}){var o;const r=Fs(),i=(o=sje())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Nt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Fs(),h=tje(),p=nje(),g=rje(),y=(Array.isArray(e)?e:[e]).filter(E=>E),{withStylesTransform:b,getTransformedStyles:_}=Uje({props:n,stylesCtx:r,themeName:y});return(E,C)=>({className:$je({theme:d,options:C,themeName:y,selector:E,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:g,transformedStyles:_([C==null?void 0:C.styles,l])}),style:Bje({theme:d,themeName:y,selector:E,options:C,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:g,withStylesTransform:b})})}function Bx(e,t){return typeof e=="boolean"?e:t.autoContrast}function Le(e,t,n){var o;const r=Fs(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...jy(n)}}function zj(e){return xi(e).reduce((t,n)=>e[n]!==void 0?`${t}${m5e(n)}:${e[n]};`:t,"").trim()}function zje({selector:e,styles:t,media:n,container:r}){const i=t?zj(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${zj(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${zj(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Mb(e){const t=rq();return w.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:zje(e)}})}function $b(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:g,pr:y,pe:b,ps:_,bd:E,bg:C,c:x,opacity:T,ff:A,fz:k,fw:N,lts:P,ta:D,lh:j,fs:M,tt:B,td:V,w:z,miw:G,maw:Y,h:Q,mih:L,mah:U,bgsz:K,bgp:q,bgr:X,bga:Z,pos:ae,top:he,left:ge,bottom:be,right:Ce,inset:oe,display:re,flex:xe,hiddenFrom:Re,visibleFrom:Ke,lightHidden:Qe,darkHidden:ke,sx:Ue,...rt}=e;return{styleProps:jy({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:g,pr:y,pe:b,ps:_,bd:E,bg:C,c:x,opacity:T,ff:A,fz:k,fw:N,lts:P,ta:D,lh:j,fs:M,tt:B,td:V,w:z,miw:G,maw:Y,h:Q,mih:L,mah:U,bgsz:K,bgp:q,bgr:X,bga:Z,pos:ae,top:he,left:ge,bottom:be,right:Ce,inset:oe,display:re,flex:xe,hiddenFrom:Re,visibleFrom:Ke,lightHidden:Qe,darkHidden:ke,sx:Ue}),rest:rt}}const Vje={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function aq(e,t){const n=dp({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function Hje(e,t){const n=dp({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:aq(e,t)}function qje(e,t){if(typeof e=="number")return Ve(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ve(n)}`;return r&&(s+=` ${r}`),_je.length>0&&(s+=` ${aq(i.join(" "),t)}`),s.trim()}return e}const Fie={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function Wje(e){return typeof e=="string"&&e in Fie?Fie[e]:e}const Gje=["h1","h2","h3","h4","h5","h6"];function Yje(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&Gje.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ve(e):e}function Kje(e){return e}const Xje=["h1","h2","h3","h4","h5","h6"];function Qje(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&Xje.includes(e)?`var(--mantine-${e}-line-height)`:e}function Jje(e){return typeof e=="number"?Ve(e):e}function Zje(e,t){if(typeof e=="number")return Ve(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ve(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const Vj={color:aq,textColor:Hje,fontSize:Yje,spacing:Zje,identity:Kje,size:Jje,lineHeight:Qje,fontFamily:Wje,border:qje};function jie(e){return e.replace("(min-width: ","").replace("em)","")}function e8e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(jie(i))-Number(jie(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function t8e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function n8e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function r8e(e){return typeof e=="object"&&e!==null?xi(e).filter(t=>t!=="base"):[]}function i8e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function uye({styleProps:e,data:t,theme:n}){return e8e(xi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=n8e(e[i]);if(!t8e(e[i]))return o.forEach(l=>{r.inlineStyles[l]=Vj[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=r8e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=Vj[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:Vj[s.type](i8e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function vI(){return`__m__-${O.useId().replace(/:/g,"")}`}function uq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...uq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function lye(e){return e.startsWith("data-")?e:`data-${e}`}function s8e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[lye(n)]=e[n]),t},{})}function cye(e){return e?typeof e=="string"?{[lye(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...cye(n)}),{}):s8e(e):null}function EU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...EU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function o8e({theme:e,style:t,vars:n,styleProps:r}){const i=EU(t,e),s=EU(n,e);return{...i,...s,...r}}const fye=O.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var k;const g=Fs(),y=e||"div",{styleProps:b,rest:_}=$b(h),E=ije(),C=(k=E==null?void 0:E())==null?void 0:k(b.sx),x=vI(),T=uye({styleProps:b,theme:g,data:Vje}),A={ref:p,style:o8e({theme:g,style:t,vars:n,styleProps:T.inlineStyles}),className:xs(r,C,{[x]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":W0e(o)?void 0:o||void 0,size:d,...cye(s),..._};return w.jsxs(w.Fragment,{children:[T.hasResponsiveStyles&&w.jsx(Mb,{selector:`.${x}`,styles:T.styles,media:T.media}),typeof f=="function"?f(A):w.jsx(y,{...A})]})});fye.displayName="@mantine/core/Box";const De=fye;function dye(e){return e}function Ze(e){const t=O.forwardRef(e);return t.extend=dye,t}function _o(e){const t=O.forwardRef(e);return t.extend=dye,t}const a8e=O.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function hp(){return O.useContext(a8e)}var O$=F0e();const bC=Ru(O$);function u8e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Hj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const AT=typeof window<"u"&&window.requestAnimationFrame;function l8e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=O.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=O.useState(r?{}:o),l=p=>{O$.flushSync(()=>u(p))},c=p=>{l(g=>({...g,...p}))};function f(p){const g=e||u8e(p);return{transition:`height ${g}ms ${t}, opacity ${g}ms ${t}`}}Gh(()=>{typeof AT=="function"&&AT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),AT(()=>{const p=Hj(i);c({...f(p),height:p})})}:()=>{const p=Hj(i);c({...f(p),willChange:"height",height:p}),AT(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const g=Hj(i);g===a.height?l({}):c({height:g}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:g="ref",...y}={}){const b=y[g];return{"aria-hidden":!r,...y,[g]:Z0e(i,b),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const c8e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},M$=Ze((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Le("Collapse",c8e,e),c=Fs(),f=N$(),h=(c.respectReducedMotion?f:!1)?0:i,p=l8e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?w.jsx(De,{...l,children:n}):null:w.jsx(De,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...uq(o,c)},ref:t,...l}),children:n})});M$.displayName="@mantine/core/Collapse";const[f8e,vf]=Wo("ScrollArea.Root component was not found in tree");function IE(e,t){const n=u1(t);Ob(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const d8e=O.forwardRef((e,t)=>{const{style:n,...r}=e,i=vf(),[s,o]=O.useState(0),[a,u]=O.useState(0),l=!!(s&&a);return IE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),IE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?w.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),h8e=O.forwardRef((e,t)=>{const n=vf(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?w.jsx(d8e,{...e,ref:t}):null}),p8e={scrollHideDelay:1e3,type:"hover"},hye=O.forwardRef((e,t)=>{const n=Le("ScrollAreaRoot",p8e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=O.useState(null),[l,c]=O.useState(null),[f,d]=O.useState(null),[h,p]=O.useState(null),[g,y]=O.useState(null),[b,_]=O.useState(0),[E,C]=O.useState(0),[x,T]=O.useState(!1),[A,k]=O.useState(!1),N=Ls(t,P=>u(P));return w.jsx(f8e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:x,onScrollbarXEnabledChange:T,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:A,onScrollbarYEnabledChange:k,onCornerWidthChange:_,onCornerHeightChange:C},children:w.jsx(De,{...o,ref:N,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${b}px`,"--sa-corner-height":s!=="xy"?"0px":`${E}px`}})})});hye.displayName="@mantine/core/ScrollAreaRoot";function pye(e,t){const n=e/t;return Number.isNaN(n)?0:n}function $$(e){const t=pye(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function mye(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function m8e(e,[t,n]){return Math.min(n,Math.max(t,e))}function Bie(e,t,n="ltr"){const r=$$(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=m8e(e,u);return mye([0,o],[0,a])(l)}function g8e(e,t,n,r="ltr"){const i=$$(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return mye([u,l],f)(e)}function gye(e,t){return e>0&&e<t}function _O(e){return e?parseInt(e,10):0}function $1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[y8e,yye]=Wo("ScrollAreaScrollbar was not found in tree"),vye=O.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=vf(),[h,p]=O.useState(null),g=Ls(t,k=>p(k)),y=O.useRef(null),b=O.useRef(""),{viewport:_}=d,E=n.content-n.viewport,C=u1(l),x=u1(a),T=R$(c,10),A=k=>{if(y.current){const N=k.clientX-y.current.left,P=k.clientY-y.current.top;u({x:N,y:P})}};return O.useEffect(()=>{const k=N=>{const P=N.target;(h==null?void 0:h.contains(P))&&C(N,E)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[_,h,E,C]),O.useEffect(x,[n,x]),IE(h,T),IE(d.content,T),w.jsx(y8e,{value:{scrollbar:h,hasThumb:r,onThumbChange:u1(i),onThumbPointerUp:u1(s),onThumbPositionChange:x,onThumbPointerDown:u1(o)},children:w.jsx("div",{...f,ref:g,style:{position:"absolute",...f.style},onPointerDown:$1(e.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),y.current=h.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",A(k))}),onPointerMove:$1(e.onPointerMove,A),onPointerUp:$1(e.onPointerUp,k=>{const N=k.target;N.hasPointerCapture(k.pointerId)&&N.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=b.current,y.current=null})})})}),v8e=O.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=vf(),[a,u]=O.useState(),l=O.useRef(null),c=Ls(t,l,o.onScrollbarXChange);return O.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),w.jsx(vye,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${$$(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),gye(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:_O(a.paddingLeft),paddingEnd:_O(a.paddingRight)}})}})}),b8e=O.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=vf(),[a,u]=O.useState(),l=O.useRef(null),c=Ls(t,l,o.onScrollbarYChange);return O.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),w.jsx(vye,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${$$(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),gye(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:_O(a.paddingTop),paddingEnd:_O(a.paddingBottom)}})}})}),lq=O.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=hp(),s=vf(),o=O.useRef(null),a=O.useRef(0),[u,l]=O.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=pye(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>g8e(h,a.current,u,p);return n==="horizontal"?w.jsx(v8e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Bie(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?w.jsx(b8e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Bie(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),bye=O.forwardRef((e,t)=>{const n=vf(),{forceMount:r,...i}=e,[s,o]=O.useState(!1),a=e.orientation==="horizontal",u=R$(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return IE(n.viewport,u),IE(n.content,u),r||s?w.jsx(lq,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),_8e=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=vf(),[s,o]=O.useState(!1);return O.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?w.jsx(bye,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),w8e=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=vf(),s=e.orientation==="horizontal",[o,a]=O.useState("hidden"),u=R$(()=>a("idle"),100);return O.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),O.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?w.jsx(lq,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:$1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:$1(e.onPointerLeave,()=>a("idle"))}):null}),Uie=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=vf(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return O.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?w.jsx(_8e,{...r,ref:t,forceMount:n}):i.type==="scroll"?w.jsx(w8e,{...r,ref:t,forceMount:n}):i.type==="auto"?w.jsx(bye,{...r,ref:t,forceMount:n}):i.type==="always"?w.jsx(lq,{...r,ref:t}):null});function E8e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const x8e=O.forwardRef((e,t)=>{const{style:n,...r}=e,i=vf(),s=yye(),{onThumbPositionChange:o}=s,a=Ls(t,c=>s.onThumbChange(c)),u=O.useRef(),l=R$(()=>{u.current&&(u.current(),u.current=void 0)},100);return O.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=E8e(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),w.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:$1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:$1(e.onPointerUp,s.onThumbPointerUp)})}),zie=O.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=yye();return n||i.hasThumb?w.jsx(x8e,{ref:t,...r}):null}),_ye=O.forwardRef(({children:e,style:t,...n},r)=>{const i=vf(),s=Ls(r,i.onViewportChange);return w.jsx(De,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:w.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});_ye.displayName="@mantine/core/ScrollAreaViewport";var cq={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const wye={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},S8e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ve(t)}}),jm=Ze((e,t)=>{const n=Le("ScrollArea",wye,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:g,offsetScrollbars:y,scrollbars:b,..._}=n,[E,C]=O.useState(!1),x=Nt({name:"ScrollArea",props:n,classes:cq,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:S8e});return w.jsxs(hye,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:b,...x("root"),..._,children:[w.jsx(_ye,{...d,...x("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":y===!0?"xy":y||void 0,"data-scrollbars":b||void 0,onScroll:T=>{var A;(A=d==null?void 0:d.onScroll)==null||A.call(d,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:g}),(b==="xy"||b==="x")&&w.jsx(Uie,{...x("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:w.jsx(zie,{...x("thumb")})}),(b==="xy"||b==="y")&&w.jsx(Uie,{...x("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:w.jsx(zie,{...x("thumb")})}),w.jsx(h8e,{...x("corner"),"data-hovered":E||void 0,"data-hidden":c==="never"||void 0})]})});jm.displayName="@mantine/core/ScrollArea";const fq=Ze((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:g,style:y,vars:b,..._}=Le("ScrollAreaAutosize",wye,e);return w.jsx(De,{..._,ref:t,style:[{display:"flex",overflow:"auto"},y],children:w.jsx(De,{style:{display:"flex",flexDirection:"column",flex:1},children:w.jsx(jm,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:b,scrollbars:g,children:n})})})});jm.classes=cq;fq.displayName="@mantine/core/ScrollAreaAutosize";fq.classes=cq;jm.Autosize=fq;var Eye={root:"m_87cf2631"};const T8e={__staticSelector:"UnstyledButton"},Zs=_o((e,t)=>{const n=Le("UnstyledButton",T8e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Nt({name:s,props:n,classes:Eye,className:r,style:l,classNames:a,styles:u,unstyled:o});return w.jsx(De,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Zs.classes=Eye;Zs.displayName="@mantine/core/UnstyledButton";var xye={root:"m_515a97f8"};const C8e={},dq=Ze((e,t)=>{const n=Le("VisuallyHidden",C8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Nt({name:"VisuallyHidden",classes:xye,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return w.jsx(De,{component:"span",ref:t,...c("root"),...l})});dq.classes=xye;dq.displayName="@mantine/core/VisuallyHidden";var Sye={root:"m_1b7284a3"};const A8e={},I8e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:vi(t),"--paper-shadow":eq(n)}}),Ux=_o((e,t)=>{const n=Le("Paper",A8e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,g=Nt({name:"Paper",props:n,classes:Sye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:I8e});return w.jsx(De,{ref:t,mod:[{"data-with-border":u},h],...g("root"),variant:d,...p})});Ux.classes=Sye;Ux.displayName="@mantine/core/Paper";function zx(e){return Tye(e)?(e.nodeName||"").toLowerCase():"#document"}function hl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function cg(e){var t;return(t=(Tye(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Tye(e){return e instanceof Node||e instanceof hl(e).Node}function Zi(e){return e instanceof Element||e instanceof hl(e).Element}function ac(e){return e instanceof HTMLElement||e instanceof hl(e).HTMLElement}function xU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof hl(e).ShadowRoot}function bI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=af(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function k8e(e){return["table","td","th"].includes(zx(e))}function hq(e){const t=pq(),n=af(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function R8e(e){let t=Bm(e);for(;ac(t)&&!ey(t);){if(hq(t))return t;t=Bm(t)}return null}function pq(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ey(e){return["html","body","#document"].includes(zx(e))}function af(e){return hl(e).getComputedStyle(e)}function L$(e){return Zi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Bm(e){if(zx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||xU(e)&&e.host||cg(e);return xU(t)?t.host:t}function Cye(e){const t=Bm(e);return ey(t)?e.ownerDocument?e.ownerDocument.body:e.body:ac(t)&&bI(t)?t:Cye(t)}function km(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=Cye(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=hl(i);return s?t.concat(o,o.visualViewport||[],bI(i)?i:[],o.frameElement&&n?km(o.frameElement):[]):t.concat(i,km(i,[],n))}function Vie(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Y2(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&xU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Aye(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Iye(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function N8e(e){return O8e()?!1:!Hie()&&e.width===0&&e.height===0||Hie()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function P8e(){return/apple/i.test(navigator.vendor)}function Hie(){const e=/android/i;return e.test(Aye())||e.test(Iye())}function D8e(){return Aye().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function O8e(){return Iye().includes("jsdom/")}function SU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function M8e(e){return"nativeEvent"in e}function $8e(e){return e.matches("html,body")}function b1(e){return(e==null?void 0:e.ownerDocument)||document}function qj(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function xw(e){return"composedPath"in e?e.composedPath()[0]:e.target}const L8e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function F8e(e){return ac(e)&&e.matches(L8e)}const Xl=Math.min,Oa=Math.max,wO=Math.round,uN=Math.floor,ty=e=>({x:e,y:e}),j8e={left:"right",right:"left",bottom:"top",top:"bottom"},B8e={start:"end",end:"start"};function TU(e,t,n){return Oa(e,Xl(t,n))}function Um(e,t){return typeof e=="function"?e(t):e}function bd(e){return e.split("-")[0]}function Vx(e){return e.split("-")[1]}function mq(e){return e==="x"?"y":"x"}function gq(e){return e==="y"?"height":"width"}function Lb(e){return["top","bottom"].includes(bd(e))?"y":"x"}function yq(e){return mq(Lb(e))}function U8e(e,t,n){n===void 0&&(n=!1);const r=Vx(e),i=yq(e),s=gq(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=EO(o)),[o,EO(o)]}function z8e(e){const t=EO(e);return[CU(e),t,CU(t)]}function CU(e){return e.replace(/start|end/g,t=>B8e[t])}function V8e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function H8e(e,t,n,r){const i=Vx(e);let s=V8e(bd(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(CU)))),s}function EO(e){return e.replace(/left|right|bottom|top/g,t=>j8e[t])}function q8e(e){return{top:0,right:0,bottom:0,left:0,...e}}function vq(e){return typeof e!="number"?q8e(e):{top:e,right:e,bottom:e,left:e}}function kE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function qie(e,t,n){let{reference:r,floating:i}=e;const s=Lb(t),o=yq(t),a=gq(o),u=bd(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Vx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const W8e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=qie(l,r,u),d=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:y,fn:b}=a[g],{x:_,y:E,data:C,reset:x}=await b({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=_??c,f=E??f,h={...h,[y]:{...h[y],...C}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(l=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:c,y:f}=qie(l,d,u)),g=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function bq(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Um(t,e),p=vq(h),y=a[d?f==="floating"?"reference":"floating":f],b=kE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),_=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),C=await(s.isElement==null?void 0:s.isElement(E))?await(s.getScale==null?void 0:s.getScale(E))||{x:1,y:1}:{x:1,y:1},x=kE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:_,offsetParent:E,strategy:u}):_);return{top:(b.top-x.top+p.top)/C.y,bottom:(x.bottom-b.bottom+p.bottom)/C.y,left:(b.left-x.left+p.left)/C.x,right:(x.right-b.right+p.right)/C.x}}const G8e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Um(e,t)||{};if(l==null)return{};const f=vq(c),d={x:n,y:r},h=yq(i),p=gq(h),g=await o.getDimensions(l),y=h==="y",b=y?"top":"left",_=y?"bottom":"right",E=y?"clientHeight":"clientWidth",C=s.reference[p]+s.reference[h]-d[h]-s.floating[p],x=d[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let A=T?T[E]:0;(!A||!await(o.isElement==null?void 0:o.isElement(T)))&&(A=a.floating[E]||s.floating[p]);const k=C/2-x/2,N=A/2-g[p]/2-1,P=Xl(f[b],N),D=Xl(f[_],N),j=P,M=A-g[p]-D,B=A/2-g[p]/2+k,V=TU(j,B,M),z=!u.arrow&&Vx(i)!=null&&B!==V&&s.reference[p]/2-(B<j?P:D)-g[p]/2<0,G=z?B<j?B-j:B-M:0;return{[h]:d[h]+G,data:{[h]:V,centerOffset:B-V-G,...z&&{alignmentOffset:G}},reset:z}}}),Y8e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...y}=Um(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=bd(i),_=bd(a)===a,E=await(u.isRTL==null?void 0:u.isRTL(l.floating)),C=d||(_||!g?[EO(a)]:z8e(a));!d&&p!=="none"&&C.push(...H8e(a,g,p,E));const x=[a,...C],T=await bq(t,y),A=[];let k=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&A.push(T[b]),f){const j=U8e(i,o,E);A.push(T[j[0]],T[j[1]])}if(k=[...k,{placement:i,overflows:A}],!A.every(j=>j<=0)){var N,P;const j=(((N=s.flip)==null?void 0:N.index)||0)+1,M=x[j];if(M)return{data:{index:j,overflows:k},reset:{placement:M}};let B=(P=k.filter(V=>V.overflows[0]<=0).sort((V,z)=>V.overflows[1]-z.overflows[1])[0])==null?void 0:P.placement;if(!B)switch(h){case"bestFit":{var D;const V=(D=k.map(z=>[z.placement,z.overflows.filter(G=>G>0).reduce((G,Y)=>G+Y,0)]).sort((z,G)=>z[1]-G[1])[0])==null?void 0:D[0];V&&(B=V);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function kye(e){const t=Xl(...e.map(s=>s.left)),n=Xl(...e.map(s=>s.top)),r=Oa(...e.map(s=>s.right)),i=Oa(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function K8e(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>kE(kye(i)))}const X8e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Um(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=K8e(c),d=kE(kye(c)),h=vq(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(y=>u>y.left-h.left&&u<y.right+h.right&&l>y.top-h.top&&l<y.bottom+h.bottom)||d;if(f.length>=2){if(Lb(n)==="y"){const P=f[0],D=f[f.length-1],j=bd(n)==="top",M=P.top,B=D.bottom,V=j?P.left:D.left,z=j?P.right:D.right,G=z-V,Y=B-M;return{top:M,bottom:B,left:V,right:z,width:G,height:Y,x:V,y:M}}const y=bd(n)==="left",b=Oa(...f.map(P=>P.right)),_=Xl(...f.map(P=>P.left)),E=f.filter(P=>y?P.left===_:P.right===b),C=E[0].top,x=E[E.length-1].bottom,T=_,A=b,k=A-T,N=x-C;return{top:C,bottom:x,left:T,right:A,width:k,height:N,x:T,y:C}}return d}const g=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==g.reference.x||i.reference.y!==g.reference.y||i.reference.width!==g.reference.width||i.reference.height!==g.reference.height?{reset:{rects:g}}:{}}}};async function Q8e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=bd(n),a=Vx(n),u=Lb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Um(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const J8e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Q8e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},Z8e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:b,y:_}=y;return{x:b,y:_}}},...u}=Um(e,t),l={x:n,y:r},c=await bq(t,u),f=Lb(bd(i)),d=mq(f);let h=l[d],p=l[f];if(s){const y=d==="y"?"top":"left",b=d==="y"?"bottom":"right",_=h+c[y],E=h-c[b];h=TU(_,h,E)}if(o){const y=f==="y"?"top":"left",b=f==="y"?"bottom":"right",_=p+c[y],E=p-c[b];p=TU(_,p,E)}const g=a.fn({...t,[d]:h,[f]:p});return{...g,data:{x:g.x-n,y:g.y-r}}}}},e9e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Um(e,t),c={x:n,y:r},f=Lb(i),d=mq(f);let h=c[d],p=c[f];const g=Um(a,t),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(u){const E=d==="y"?"height":"width",C=s.reference[d]-s.floating[E]+y.mainAxis,x=s.reference[d]+s.reference[E]-y.mainAxis;h<C?h=C:h>x&&(h=x)}if(l){var b,_;const E=d==="y"?"width":"height",C=["top","left"].includes(bd(i)),x=s.reference[f]-s.floating[E]+(C&&((b=o.offset)==null?void 0:b[f])||0)+(C?0:y.crossAxis),T=s.reference[f]+s.reference[E]+(C?0:((_=o.offset)==null?void 0:_[f])||0)-(C?y.crossAxis:0);p<x?p=x:p>T&&(p=T)}return{[d]:h,[f]:p}}}},t9e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Um(e,t),u=await bq(t,a),l=bd(n),c=Vx(n),f=Lb(n)==="y",{width:d,height:h}=r.floating;let p,g;l==="top"||l==="bottom"?(p=l,g=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(g=l,p=c==="end"?"top":"bottom");const y=h-u.top-u.bottom,b=d-u.left-u.right,_=Xl(h-u[p],y),E=Xl(d-u[g],b),C=!t.middlewareData.shift;let x=_,T=E;if(f?T=c||C?Xl(E,b):b:x=c||C?Xl(_,y):y,C&&!c){const k=Oa(u.left,0),N=Oa(u.right,0),P=Oa(u.top,0),D=Oa(u.bottom,0);f?T=d-2*(k!==0||N!==0?k+N:Oa(u.left,u.right)):x=h-2*(P!==0||D!==0?P+D:Oa(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:x});const A=await i.getDimensions(s.floating);return d!==A.width||h!==A.height?{reset:{rects:!0}}:{}}}};function Rye(e){const t=af(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=ac(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=wO(n)!==s||wO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function _q(e){return Zi(e)?e:e.contextElement}function Jw(e){const t=_q(e);if(!ac(t))return ty(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Rye(t);let o=(s?wO(n.width):n.width)/r,a=(s?wO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const n9e=ty(0);function Nye(e){const t=hl(e);return!pq()||!t.visualViewport?n9e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function r9e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==hl(e)?!1:t}function K1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=_q(e);let o=ty(1);t&&(r?Zi(r)&&(o=Jw(r)):o=Jw(e));const a=r9e(s,n,r)?Nye(s):ty(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=hl(s),h=r&&Zi(r)?hl(r):r;let p=d,g=p.frameElement;for(;g&&r&&h!==p;){const y=Jw(g),b=g.getBoundingClientRect(),_=af(g),E=b.left+(g.clientLeft+parseFloat(_.paddingLeft))*y.x,C=b.top+(g.clientTop+parseFloat(_.paddingTop))*y.y;u*=y.x,l*=y.y,c*=y.x,f*=y.y,u+=E,l+=C,p=hl(g),g=p.frameElement}}return kE({width:c,height:f,x:u,y:l})}const i9e=[":popover-open",":modal"];function wq(e){return i9e.some(t=>{try{return e.matches(t)}catch{return!1}})}function s9e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=cg(r),a=t?wq(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=ty(1);const c=ty(0),f=ac(r);if((f||!f&&!s)&&((zx(r)!=="body"||bI(o))&&(u=L$(r)),ac(r))){const d=K1(r);l=Jw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function o9e(e){return Array.from(e.getClientRects())}function Pye(e){return K1(cg(e)).left+L$(e).scrollLeft}function a9e(e){const t=cg(e),n=L$(e),r=e.ownerDocument.body,i=Oa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Oa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Pye(e);const a=-n.scrollTop;return af(r).direction==="rtl"&&(o+=Oa(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function u9e(e,t){const n=hl(e),r=cg(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=pq();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function l9e(e,t){const n=K1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=ac(e)?Jw(e):ty(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Wie(e,t,n){let r;if(t==="viewport")r=u9e(e,n);else if(t==="document")r=a9e(cg(e));else if(Zi(t))r=l9e(t,n);else{const i=Nye(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return kE(r)}function Dye(e,t){const n=Bm(e);return n===t||!Zi(n)||ey(n)?!1:af(n).position==="fixed"||Dye(n,t)}function c9e(e,t){const n=t.get(e);if(n)return n;let r=km(e,[],!1).filter(a=>Zi(a)&&zx(a)!=="body"),i=null;const s=af(e).position==="fixed";let o=s?Bm(e):e;for(;Zi(o)&&!ey(o);){const a=af(o),u=hq(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||bI(o)&&!u&&Dye(e,o))?r=r.filter(c=>c!==o):i=a,o=Bm(o)}return t.set(e,r),r}function f9e(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?wq(t)?[]:c9e(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Wie(t,c,i);return l.top=Oa(f.top,l.top),l.right=Xl(f.right,l.right),l.bottom=Xl(f.bottom,l.bottom),l.left=Oa(f.left,l.left),l},Wie(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function d9e(e){const{width:t,height:n}=Rye(e);return{width:t,height:n}}function h9e(e,t,n){const r=ac(t),i=cg(t),s=n==="fixed",o=K1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=ty(0);if(r||!r&&!s)if((zx(t)!=="body"||bI(i))&&(a=L$(t)),r){const f=K1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Pye(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Wj(e){return af(e).position==="static"}function Gie(e,t){return!ac(e)||af(e).position==="fixed"?null:t?t(e):e.offsetParent}function Oye(e,t){const n=hl(e);if(wq(e))return n;if(!ac(e)){let i=Bm(e);for(;i&&!ey(i);){if(Zi(i)&&!Wj(i))return i;i=Bm(i)}return n}let r=Gie(e,t);for(;r&&k8e(r)&&Wj(r);)r=Gie(r,t);return r&&ey(r)&&Wj(r)&&!hq(r)?n:r||R8e(e)||n}const p9e=async function(e){const t=this.getOffsetParent||Oye,n=this.getDimensions,r=await n(e.floating);return{reference:h9e(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function m9e(e){return af(e).direction==="rtl"}const g9e={convertOffsetParentRelativeRectToViewportRelativeRect:s9e,getDocumentElement:cg,getClippingRect:f9e,getOffsetParent:Oye,getElementRects:p9e,getClientRects:o9e,getDimensions:d9e,getScale:Jw,isElement:Zi,isRTL:m9e};function y9e(e,t){let n=null,r;const i=cg(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=uN(c),p=uN(i.clientWidth-(l+f)),g=uN(i.clientHeight-(c+d)),y=uN(l),_={rootMargin:-h+"px "+-p+"px "+-g+"px "+-y+"px",threshold:Oa(0,Xl(1,u))||1};let E=!0;function C(x){const T=x[0].intersectionRatio;if(T!==u){if(!E)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}E=!1}try{n=new IntersectionObserver(C,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(C,_)}n.observe(e)}return o(!0),s}function v9e(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=_q(e),c=i||s?[...l?km(l):[],...km(t)]:[];c.forEach(b=>{i&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const f=l&&a?y9e(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(b=>{let[_]=b;_&&_.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var E;(E=h)==null||E.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,g=u?K1(e):null;u&&y();function y(){const b=K1(e);g&&(b.x!==g.x||b.y!==g.y||b.width!==g.width||b.height!==g.height)&&n(),g=b,p=requestAnimationFrame(y)}return n(),()=>{var b;c.forEach(_=>{i&&_.removeEventListener("scroll",n),s&&_.removeEventListener("resize",n)}),f==null||f(),(b=h)==null||b.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const b9e=J8e,_9e=Z8e,w9e=Y8e,E9e=t9e,Yie=G8e,x9e=X8e,S9e=e9e,T9e=(e,t,n)=>{const r=new Map,i={platform:g9e,...n},s={...i.platform,_c:r};return W8e(e,t,{...i,platform:s})};var dD=typeof document<"u"?O.useLayoutEffect:O.useEffect;function xO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!xO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!xO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Mye(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Kie(e,t){const n=Mye(e);return Math.round(t*n)/n}function Xie(e){const t=O.useRef(e);return dD(()=>{t.current=e}),t}function C9e(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=O.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=O.useState(r);xO(d,r)||h(r);const[p,g]=O.useState(null),[y,b]=O.useState(null),_=O.useCallback(G=>{G!==T.current&&(T.current=G,g(G))},[]),E=O.useCallback(G=>{G!==A.current&&(A.current=G,b(G))},[]),C=s||p,x=o||y,T=O.useRef(null),A=O.useRef(null),k=O.useRef(c),N=u!=null,P=Xie(u),D=Xie(i),j=O.useCallback(()=>{if(!T.current||!A.current)return;const G={placement:t,strategy:n,middleware:d};D.current&&(G.platform=D.current),T9e(T.current,A.current,G).then(Y=>{const Q={...Y,isPositioned:!0};M.current&&!xO(k.current,Q)&&(k.current=Q,O$.flushSync(()=>{f(Q)}))})},[d,t,n,D]);dD(()=>{l===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(G=>({...G,isPositioned:!1})))},[l]);const M=O.useRef(!1);dD(()=>(M.current=!0,()=>{M.current=!1}),[]),dD(()=>{if(C&&(T.current=C),x&&(A.current=x),C&&x){if(P.current)return P.current(C,x,j);j()}},[C,x,j,P,N]);const B=O.useMemo(()=>({reference:T,floating:A,setReference:_,setFloating:E}),[_,E]),V=O.useMemo(()=>({reference:C,floating:x}),[C,x]),z=O.useMemo(()=>{const G={position:n,left:0,top:0};if(!V.floating)return G;const Y=Kie(V.floating,c.x),Q=Kie(V.floating,c.y);return a?{...G,transform:"translate("+Y+"px, "+Q+"px)",...Mye(V.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Y,top:Q}},[n,a,V.floating,c.x,c.y]);return O.useMemo(()=>({...c,update:j,refs:B,elements:V,floatingStyles:z}),[c,j,B,V,z])}const A9e=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Yie({element:r.current,padding:i}).fn(n):{}:r?Yie({element:r,padding:i}).fn(n):{}}}},$ye=(e,t)=>({...b9e(e),options:[e,t]}),Eq=(e,t)=>({..._9e(e),options:[e,t]}),Qie=(e,t)=>({...S9e(e),options:[e,t]}),AU=(e,t)=>({...w9e(e),options:[e,t]}),I9e=(e,t)=>({...E9e(e),options:[e,t]}),IU=(e,t)=>({...x9e(e),options:[e,t]}),Lye=(e,t)=>({...A9e(e),options:[e,t]}),Fye={...mO},k9e=Fye.useInsertionEffect,R9e=k9e||(e=>e());function y0(e){const t=O.useRef(()=>{});return R9e(()=>{t.current=e}),O.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Ph=typeof document<"u"?O.useLayoutEffect:O.useEffect;let Jie=!1,N9e=0;const Zie=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+N9e++;function P9e(){const[e,t]=O.useState(()=>Jie?Zie():void 0);return Ph(()=>{e==null&&t(Zie())},[]),O.useEffect(()=>{Jie=!0},[]),e}const D9e=Fye.useId,jye=D9e||P9e;function O9e(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const M9e=O.createContext(null),$9e=O.createContext(null),xq=()=>{var e;return((e=O.useContext(M9e))==null?void 0:e.id)||null},Sq=()=>O.useContext($9e);function Tq(e){return"data-floating-ui-"+e}function ese(e){const t=O.useRef(e);return Ph(()=>{t.current=e}),t}const tse=Tq("safe-polygon");function hD(e,t,n){return n&&!SU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function L9e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=Sq(),g=xq(),y=ese(c),b=ese(l),_=O.useRef(),E=O.useRef(-1),C=O.useRef(),x=O.useRef(-1),T=O.useRef(!0),A=O.useRef(!1),k=O.useRef(()=>{}),N=O.useCallback(()=>{var M;const B=(M=i.current.openEvent)==null?void 0:M.type;return(B==null?void 0:B.includes("mouse"))&&B!=="mousedown"},[i]);O.useEffect(()=>{if(!u)return;function M(B){let{open:V}=B;V||(clearTimeout(E.current),clearTimeout(x.current),T.current=!0)}return s.on("openchange",M),()=>{s.off("openchange",M)}},[u,s]),O.useEffect(()=>{if(!u||!y.current||!n)return;function M(V){N()&&r(!1,V,"hover")}const B=b1(a).documentElement;return B.addEventListener("mouseleave",M),()=>{B.removeEventListener("mouseleave",M)}},[a,n,r,u,y,N]);const P=O.useCallback(function(M,B,V){B===void 0&&(B=!0),V===void 0&&(V="hover");const z=hD(b.current,"close",_.current);z&&!C.current?(clearTimeout(E.current),E.current=window.setTimeout(()=>r(!1,M,V),z)):B&&(clearTimeout(E.current),r(!1,M,V))},[b,r]),D=y0(()=>{k.current(),C.current=void 0}),j=y0(()=>{if(A.current){const M=b1(a).body;M.style.pointerEvents="",M.removeAttribute(tse),A.current=!1}});return O.useEffect(()=>{if(!u)return;function M(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function B(G){if(clearTimeout(E.current),T.current=!1,f&&!SU(_.current)||d>0&&!hD(b.current,"open"))return;const Y=hD(b.current,"open",_.current);Y?E.current=window.setTimeout(()=>{r(!0,G,"hover")},Y):r(!0,G,"hover")}function V(G){if(M())return;k.current();const Y=b1(a);if(clearTimeout(x.current),y.current&&i.current.floatingContext){n||clearTimeout(E.current),C.current=y.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){j(),D(),P(G,!0,"safe-polygon")}});const L=C.current;Y.addEventListener("mousemove",L),k.current=()=>{Y.removeEventListener("mousemove",L)};return}(_.current==="touch"?!Y2(a,G.relatedTarget):!0)&&P(G)}function z(G){M()||i.current.floatingContext&&(y.current==null||y.current({...i.current.floatingContext,tree:p,x:G.clientX,y:G.clientY,onClose(){j(),D(),P(G)}})(G))}if(Zi(o)){const G=o;return n&&G.addEventListener("mouseleave",z),a==null||a.addEventListener("mouseleave",z),h&&G.addEventListener("mousemove",B,{once:!0}),G.addEventListener("mouseenter",B),G.addEventListener("mouseleave",V),()=>{n&&G.removeEventListener("mouseleave",z),a==null||a.removeEventListener("mouseleave",z),h&&G.removeEventListener("mousemove",B),G.removeEventListener("mouseenter",B),G.removeEventListener("mouseleave",V)}}},[o,a,u,e,f,d,h,P,D,j,r,n,p,b,y,i]),Ph(()=>{var M;if(u&&n&&(M=y.current)!=null&&M.__options.blockPointerEvents&&N()){const V=b1(a).body;if(V.setAttribute(tse,""),V.style.pointerEvents="none",A.current=!0,Zi(o)&&a){var B;const z=o,G=p==null||(B=p.nodesRef.current.find(Y=>Y.id===g))==null||(B=B.context)==null?void 0:B.elements.floating;return G&&(G.style.pointerEvents=""),z.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{z.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,g,a,o,p,y,N]),Ph(()=>{n||(_.current=void 0,D(),j())},[n,D,j]),O.useEffect(()=>()=>{D(),clearTimeout(E.current),clearTimeout(x.current),j()},[u,o,D,j]),O.useMemo(()=>{if(!u)return{};function M(B){_.current=B.pointerType}return{reference:{onPointerDown:M,onPointerEnter:M,onMouseMove(B){function V(){T.current||r(!0,B.nativeEvent,"hover")}f&&!SU(_.current)||n||d===0||(clearTimeout(x.current),_.current==="touch"?V():x.current=window.setTimeout(V,d))}},floating:{onMouseEnter(){clearTimeout(E.current)},onMouseLeave(B){P(B.nativeEvent,!1)}}}},[u,f,n,d,r,P])}const kU=()=>{},Bye=O.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:kU,setState:kU,isInstantPhase:!1}),Uye=()=>O.useContext(Bye);function F9e(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=O.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=O.useRef(null),a=O.useCallback(u=>{s({currentId:u})},[]);return Ph(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),O.createElement(Bye.Provider,{value:O.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function j9e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Uye(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Ph(()=>{u&&(f({delay:{open:1,close:hD(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Ph(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Ph(()=>{l===kU||!n||l(o)},[n,l,o]),a}function Gj(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const B9e={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},U9e={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},nse=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function z9e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:g,capture:y}=t,b=Sq(),_=y0(typeof c=="function"?c:()=>!1),E=typeof c=="function"?_:c,C=O.useRef(!1),x=O.useRef(!1),{escapeKey:T,outsidePress:A}=nse(g),{escapeKey:k,outsidePress:N}=nse(y),P=y0(B=>{var V;if(!n||!u||!l||B.key!=="Escape")return;const z=(V=a.current.floatingContext)==null?void 0:V.nodeId,G=b?Gj(b.nodesRef.current,z):[];if(!T&&(B.stopPropagation(),G.length>0)){let Y=!0;if(G.forEach(Q=>{var L;if((L=Q.context)!=null&&L.open&&!Q.context.dataRef.current.__escapeKeyBubbles){Y=!1;return}}),!Y)return}r(!1,M8e(B)?B.nativeEvent:B,"escape-key")}),D=y0(B=>{var V;const z=()=>{var G;P(B),(G=xw(B))==null||G.removeEventListener("keydown",z)};(V=xw(B))==null||V.addEventListener("keydown",z)}),j=y0(B=>{var V;const z=C.current;C.current=!1;const G=x.current;if(x.current=!1,f==="click"&&G||z||typeof E=="function"&&!E(B))return;const Y=xw(B),Q="["+Tq("inert")+"]",L=b1(o).querySelectorAll(Q);let U=Zi(Y)?Y:null;for(;U&&!ey(U);){const Z=Bm(U);if(ey(Z)||!Zi(Z))break;U=Z}if(L.length&&Zi(Y)&&!$8e(Y)&&!Y2(Y,o)&&Array.from(L).every(Z=>!Y2(U,Z)))return;if(ac(Y)&&o){const Z=Y.clientWidth>0&&Y.scrollWidth>Y.clientWidth,ae=Y.clientHeight>0&&Y.scrollHeight>Y.clientHeight;let he=ae&&B.offsetX>Y.clientWidth;if(ae&&af(Y).direction==="rtl"&&(he=B.offsetX<=Y.offsetWidth-Y.clientWidth),he||Z&&B.offsetY>Y.clientHeight)return}const K=(V=a.current.floatingContext)==null?void 0:V.nodeId,q=b&&Gj(b.nodesRef.current,K).some(Z=>{var ae;return qj(B,(ae=Z.context)==null?void 0:ae.elements.floating)});if(qj(B,o)||qj(B,s)||q)return;const X=b?Gj(b.nodesRef.current,K):[];if(X.length>0){let Z=!0;if(X.forEach(ae=>{var he;if((he=ae.context)!=null&&he.open&&!ae.context.dataRef.current.__outsidePressBubbles){Z=!1;return}}),!Z)return}r(!1,B,"outside-press")}),M=y0(B=>{var V;const z=()=>{var G;j(B),(G=xw(B))==null||G.removeEventListener(f,z)};(V=xw(B))==null||V.addEventListener(f,z)});return O.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=T,a.current.__outsidePressBubbles=A;function B(G){r(!1,G,"ancestor-scroll")}const V=b1(o);l&&V.addEventListener("keydown",k?D:P,k),E&&V.addEventListener(f,N?M:j,N);let z=[];return p&&(Zi(s)&&(z=km(s)),Zi(o)&&(z=z.concat(km(o))),!Zi(i)&&i&&i.contextElement&&(z=z.concat(km(i.contextElement)))),z=z.filter(G=>{var Y;return G!==((Y=V.defaultView)==null?void 0:Y.visualViewport)}),z.forEach(G=>{G.addEventListener("scroll",B,{passive:!0})}),()=>{l&&V.removeEventListener("keydown",k?D:P,k),E&&V.removeEventListener(f,N?M:j,N),z.forEach(G=>{G.removeEventListener("scroll",B)})}},[a,o,s,i,l,E,f,n,r,p,u,T,A,P,k,D,j,N,M]),O.useEffect(()=>{C.current=!1},[E,f]),O.useMemo(()=>u?{reference:{onKeyDown:P,[B9e[h]]:B=>{d&&r(!1,B.nativeEvent,"reference-press")}},floating:{onKeyDown:P,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[U9e[f]]:()=>{C.current=!0}}}:{},[u,d,f,h,r,P])}function V9e(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=jye(),s=O.useRef({}),[o]=O.useState(()=>O9e()),a=xq()!=null,[u,l]=O.useState(r.reference),c=y0((h,p,g)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:g,nested:a}),n==null||n(h,p,g)}),f=O.useMemo(()=>({setPositionReference:l}),[]),d=O.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return O.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function Cq(e){e===void 0&&(e={});const{nodeId:t}=e,n=V9e({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=O.useState(null),[a,u]=O.useState(null),c=(i==null?void 0:i.reference)||s,f=O.useRef(null),d=Sq();Ph(()=>{c&&(f.current=c)},[c]);const h=C9e({...e,elements:{...i,...a&&{reference:a}}}),p=O.useCallback(E=>{const C=Zi(E)?{getBoundingClientRect:()=>E.getBoundingClientRect(),contextElement:E}:E;u(C),h.refs.setReference(C)},[h.refs]),g=O.useCallback(E=>{(Zi(E)||E===null)&&(f.current=E,o(E)),(Zi(h.refs.reference.current)||h.refs.reference.current===null||E!==null&&!Zi(E))&&h.refs.setReference(E)},[h.refs]),y=O.useMemo(()=>({...h.refs,setReference:g,setPositionReference:p,domReference:f}),[h.refs,g,p]),b=O.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),_=O.useMemo(()=>({...h,...r,refs:y,elements:b,nodeId:t}),[h,y,b,t,r]);return Ph(()=>{r.dataRef.current.floatingContext=_;const E=d==null?void 0:d.nodesRef.current.find(C=>C.id===t);E&&(E.context=_)}),O.useMemo(()=>({...h,context:_,refs:y,elements:b}),[h,y,b,_])}function H9e(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=O.useRef(!1),c=O.useRef(),f=O.useRef(!0);return O.useEffect(()=>{if(!a)return;const d=hl(o);function h(){!n&&ac(o)&&o===Vie(b1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),O.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),O.useEffect(()=>()=>{clearTimeout(c.current)},[]),O.useMemo(()=>a?{reference:{onPointerDown(d){N8e(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=xw(d.nativeEvent);if(u&&Zi(h))try{if(P8e()&&D8e())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!F8e(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Zi(h)&&h.hasAttribute(Tq("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var g;const y=Vie(o?o.ownerDocument:document);!h&&y===o||Y2((g=s.current.floatingContext)==null?void 0:g.refs.floating.current,y)||Y2(o,y)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const rse="active",ise="selected";function Yj(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[rse]:o,[ise]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[rse,ise].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),g=0;g<h;g++)p[g]=arguments[g];return(d=r.get(l))==null?void 0:d.map(y=>y(...p)).find(y=>y!==void 0)}}}else o[l]=c}),o),{})}}function q9e(e){e===void 0&&(e=[]);const t=e,n=O.useCallback(s=>Yj(s,e,"reference"),t),r=O.useCallback(s=>Yj(s,e,"floating"),t),i=O.useCallback(s=>Yj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return O.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const W9e=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function G9e(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=W9e.get(o))!=null?n:o,u=jye(),c=xq()!=null;return O.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const g={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...g,"aria-selected":h&&p};case"combobox":return{...g,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function zye(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function sse(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function ose(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Y9e={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function K9e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Ve(t),height:Ve(t),transform:"rotate(45deg)",position:"absolute",[Y9e[u]]:Ve(r)},f=Ve(-t/2);return u==="left"?{...c,...sse(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...sse(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...ose(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...ose(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const Aq=O.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=hp();return s?w.jsx("div",{...l,ref:c,style:{...u,...K9e({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});Aq.displayName="@mantine/core/FloatingArrow";const[X9e,Vye]=Wo("Popover component was not found in the tree");function F$({children:e,active:t=!0,refProp:n="ref"}){const r=M5e(t),i=Ls(r,e==null?void 0:e.ref);return By(e)?O.cloneElement(e,{[n]:i}):e}function Hye(e){return w.jsx(dq,{tabIndex:-1,"data-autofocus":!0,...e})}F$.displayName="@mantine/core/FocusTrap";Hye.displayName="@mantine/core/FocusTrapInitialFocus";F$.InitialFocus=Hye;function Q9e(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const J9e={},qye=O.forwardRef((e,t)=>{const{children:n,target:r,...i}=Le("Portal",J9e,e),[s,o]=O.useState(!1),a=O.useRef(null);return Ob(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Q9e(i),nq(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:O$.createPortal(w.jsx(w.Fragment,{children:n}),a.current)});qye.displayName="@mantine/core/Portal";function Hx({withinPortal:e=!0,children:t,...n}){return e?w.jsx(qye,{...n,children:t}):w.jsx(w.Fragment,{children:t})}Hx.displayName="@mantine/core/OptionalPortal";const IT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Ve(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),lN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ve(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ve(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ve(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ve(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ve(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ve(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ve(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ve(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...IT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...IT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...IT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...IT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...IT("top"),common:{transformOrigin:"top right"}}},ase={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Z9e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in lN?{transitionProperty:lN[e].transitionProperty,...i,...lN[e].common,...lN[e][ase[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[ase[t]]}}function eBe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Fs(),l=N$(),c=u.respectReducedMotion?l:!1,[f,d]=O.useState(c?0:e),[h,p]=O.useState(r?"entered":"exited"),g=O.useRef(-1),y=O.useRef(-1),b=_=>{const E=_?i:s,C=_?o:a;window.clearTimeout(g.current);const x=c?0:_?e:t;d(x),x===0?(typeof E=="function"&&E(),typeof C=="function"&&C(),p(_?"entered":"exited")):y.current=requestAnimationFrame(()=>{bC.flushSync(()=>{p(_?"pre-entering":"pre-exiting")}),y.current=requestAnimationFrame(()=>{typeof E=="function"&&E(),p(_?"entering":"exiting"),g.current=window.setTimeout(()=>{typeof C=="function"&&C(),p(_?"entered":"exited")},x)})})};return Gh(()=>{b(r)},[r]),O.useEffect(()=>()=>{window.clearTimeout(g.current),cancelAnimationFrame(y.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function fg({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=eBe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?w.jsx(w.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:w.jsx(w.Fragment,{children:s(Z9e({transition:t,duration:f,state:d,timingFunction:h}))})}fg.displayName="@mantine/core/Transition";var Wye={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const tBe={},Iq=Ze((e,t)=>{var y,b,_,E;const n=Le("PopoverDropdown",tBe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Vye(),h=Y0e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},g=Ls(t,d.floating);return d.disabled?null:w.jsx(Hx,{...d.portalProps,withinPortal:d.withinPortal,children:w.jsx(fg,{mounted:d.opened,...d.transitionProps,transition:((y=d.transitionProps)==null?void 0:y.transition)||"fade",duration:((b=d.transitionProps)==null?void 0:b.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((_=d.transitionProps)==null?void 0:_.exitDuration)=="number"?d.transitionProps.exitDuration:(E=d.transitionProps)==null?void 0:E.duration,children:C=>w.jsx(F$,{active:d.trapFocus,children:w.jsxs(De,{...p,...f,variant:u,ref:g,onKeyDownCapture:E5e(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...C,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ve(d.width)},i]}),children:[o,w.jsx(Aq,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});Iq.classes=Wye;Iq.displayName="@mantine/core/PopoverDropdown";const nBe={refProp:"ref",popupType:"dialog"},Gye=Ze((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Le("PopoverTarget",nBe,e);if(!By(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Vye(),u=Ls(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return O.cloneElement(n,{...o,...l,...a.targetProps,className:xs(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Gye.displayName="@mantine/core/PopoverTarget";function Yye({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=O.useState(0);O.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return v9e(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Gh(()=>{t.update()},r),Gh(()=>{s(o=>o+1)},[e])}function rBe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function iBe(e,t){const n=rBe(e.middlewares),r=[$ye(e.offset)];return n.shift&&r.push(Eq(typeof n.shift=="boolean"?{limiter:Qie(),padding:5}:{limiter:Qie(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?AU():AU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?IU():IU(n.inline)),r.push(Lye({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(I9e({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function sBe(e){const[t,n]=eo({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=Cq({strategy:e.strategy,placement:e.position,middleware:iBe(e,()=>s)});return Yye({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Gh(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Gh(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const oBe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Ec("popover"),__staticSelector:"Popover",width:"max-content"},aBe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:vi(t),"--popover-shadow":eq(n)}});function ca(e){var ke,Ue,rt,ft,Rt,st;const t=Le("Popover",oBe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:g,unstyled:y,classNames:b,styles:_,closeOnClickOutside:E,withinPortal:C,portalProps:x,closeOnEscape:T,clickOutsideEvents:A,trapFocus:k,onClose:N,onOpen:P,onChange:D,zIndex:j,radius:M,shadow:B,id:V,defaultOpened:z,__staticSelector:G,withRoles:Y,disabled:Q,returnFocus:L,variant:U,keepMounted:K,vars:q,floatingStrategy:X,...Z}=t,ae=Nt({name:G,props:t,classes:Wye,classNames:b,styles:_,unstyled:y,rootSelector:"dropdown",vars:q,varsResolver:aBe}),he=O.useRef(null),[ge,be]=O.useState(null),[Ce,oe]=O.useState(null),{dir:re}=hp(),xe=Ka(V),Re=sBe({middlewares:c,width:l,position:zye(re,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:he,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:z,onChange:D,onOpen:P,onClose:N,strategy:X});T5e(()=>E&&Re.onClose(),A,[ge,Ce]);const Ke=O.useCallback(Ie=>{be(Ie),Re.floating.refs.setReference(Ie)},[Re.floating.refs.setReference]),Qe=O.useCallback(Ie=>{oe(Ie),Re.floating.refs.setFloating(Ie)},[Re.floating.refs.setFloating]);return w.jsx(X9e,{value:{returnFocus:L,disabled:Q,controlled:Re.controlled,reference:Ke,floating:Qe,x:Re.floating.x,y:Re.floating.y,arrowX:(rt=(Ue=(ke=Re.floating)==null?void 0:ke.middlewareData)==null?void 0:Ue.arrow)==null?void 0:rt.x,arrowY:(st=(Rt=(ft=Re.floating)==null?void 0:ft.middlewareData)==null?void 0:Rt.arrow)==null?void 0:st.y,opened:Re.opened,arrowRef:he,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:g,placement:Re.floating.placement,trapFocus:k,withinPortal:C,portalProps:x,zIndex:j,radius:M,shadow:B,closeOnEscape:T,onClose:Re.onClose,onToggle:Re.onToggle,getTargetId:()=>`${xe}-target`,getDropdownId:()=>`${xe}-dropdown`,withRoles:Y,targetProps:Z,__staticSelector:G,classNames:b,styles:_,unstyled:y,variant:U,keepMounted:K,getStyles:ae},children:n})}ca.Target=Gye;ca.Dropdown=Iq;ca.displayName="@mantine/core/Popover";ca.extend=e=>e;var sd={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const uBe=O.forwardRef(({className:e,...t},n)=>w.jsxs(De,{component:"span",className:xs(sd.barsLoader,e),...t,ref:n,children:[w.jsx("span",{className:sd.bar}),w.jsx("span",{className:sd.bar}),w.jsx("span",{className:sd.bar})]})),lBe=O.forwardRef(({className:e,...t},n)=>w.jsxs(De,{component:"span",className:xs(sd.dotsLoader,e),...t,ref:n,children:[w.jsx("span",{className:sd.dot}),w.jsx("span",{className:sd.dot}),w.jsx("span",{className:sd.dot})]})),cBe=O.forwardRef(({className:e,...t},n)=>w.jsx(De,{component:"span",className:xs(sd.ovalLoader,e),...t,ref:n})),Kye={bars:uBe,oval:cBe,dots:lBe},fBe={loaders:Kye,type:"oval"},dBe=(e,{size:t,color:n})=>({root:{"--loader-size":Cn(t,"loader-size"),"--loader-color":n?di(n,e):void 0}}),bf=Ze((e,t)=>{const n=Le("Loader",fBe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...g}=n,y=Nt({name:"Loader",props:n,classes:sd,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:dBe});return p?w.jsx(De,{...y("root"),ref:t,...g,children:p}):w.jsx(De,{...y("root"),ref:t,component:d[s],variant:h,size:r,...g})});bf.defaultLoaders=Kye;bf.classes=sd;bf.displayName="@mantine/core/Loader";var j$={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const use={orientation:"horizontal"},hBe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ve(t)}}),kq=Ze((e,t)=>{const n=Le("ActionIconGroup",use,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Le("ActionIconGroup",use,e),p=Nt({name:"ActionIconGroup",props:n,classes:j$,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:hBe,rootSelector:"group"});return w.jsx(De,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});kq.classes=j$;kq.displayName="@mantine/core/ActionIconGroup";const pBe={},mBe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Cn(t,"ai-size"),"--ai-radius":n===void 0?void 0:vi(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Fb=_o((e,t)=>{const n=Le("ActionIcon",pBe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:g,vars:y,children:b,disabled:_,"data-disabled":E,autoContrast:C,mod:x,...T}=n,A=Nt({name:["ActionIcon",p],props:n,className:r,style:u,classes:j$,classNames:o,styles:a,unstyled:i,vars:y,varsResolver:mBe});return w.jsxs(Zs,{...A("root",{active:!_&&!l&&!E}),...T,unstyled:i,variant:s,size:f,disabled:_||l,ref:t,mod:[{loading:l,disabled:_||E},x],children:[w.jsx(fg,{mounted:!!l,transition:"slide-down",duration:150,children:k=>w.jsx(De,{component:"span",...A("loader",{style:k}),"aria-hidden":!0,children:w.jsx(bf,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),w.jsx(De,{component:"span",mod:{loading:l},...A("icon"),children:b})]})});Fb.classes=j$;Fb.displayName="@mantine/core/ActionIcon";Fb.Group=kq;const Xye=O.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:w.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Xye.displayName="@mantine/core/CloseIcon";var Qye={root:"m_86a44da5","root--subtle":"m_220c80f2"};const gBe={variant:"subtle"},yBe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Cn(t,"cb-size"),"--cb-radius":n===void 0?void 0:vi(n),"--cb-icon-size":Ve(r)}}),dg=_o((e,t)=>{const n=Le("CloseButton",gBe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:g,mod:y,...b}=n,_=Nt({name:"CloseButton",props:n,className:a,style:l,classes:Qye,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:yBe});return w.jsxs(Zs,{ref:t,...b,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},y],..._("root",{variant:p,active:!h&&!d}),children:[g||w.jsx(Xye,{}),i]})});dg.classes=Qye;dg.displayName="@mantine/core/CloseButton";function vBe(e){return O.Children.toArray(e).filter(Boolean)}var Jye={root:"m_4081bf90"};const bBe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},_Be=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Ps(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Pi=Ze((e,t)=>{const n=Le("Group",bBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:g,variant:y,__size:b,mod:_,...E}=n,C=vBe(u),x=C.length,T=Ps(l??"md"),k={childWidth:`calc(${100/x}% - (${T} - ${T} / ${x}))`},N=Nt({name:"Group",props:n,stylesCtx:k,className:i,style:s,classes:Jye,classNames:r,styles:o,unstyled:a,vars:g,varsResolver:_Be});return w.jsx(De,{...N("root"),ref:t,variant:y,mod:[{grow:h},_],size:b,...E,children:C})});Pi.classes=Jye;Pi.displayName="@mantine/core/Group";var Zye={root:"m_9814e45f"};const wBe={zIndex:Ec("modal")},EBe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&sh(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ve(i)})`:void 0,"--overlay-radius":s===void 0?void 0:vi(s),"--overlay-z-index":o==null?void 0:o.toString()}}),K2=_o((e,t)=>{const n=Le("Overlay",wBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:g,color:y,backgroundOpacity:b,mod:_,...E}=n,C=Nt({name:"Overlay",props:n,classes:Zye,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EBe});return w.jsx(De,{ref:t,...C("root"),mod:[{center:c,fixed:l},_],...E,children:f})});K2.classes=Zye;K2.displayName="@mantine/core/Overlay";const[xBe,hg]=Wo("ModalBase component was not found in tree");function SBe({opened:e,transitionDuration:t}){const[n,r]=O.useState(e),i=O.useRef(),o=N$()?0:t;return O.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function TBe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Ka(e),[u,l]=O.useState(!1),[c,f]=O.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=SBe({opened:n,transitionDuration:d});return J0e("keydown",p=>{var g;p.key==="Escape"&&i&&n&&((g=p.target)==null?void 0:g.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),Y0e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const eve=O.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:g,__vars:y,unstyled:b,removeScrollProps:_,...E},C)=>{const{_id:x,titleMounted:T,bodyMounted:A,shouldLockScroll:k,setTitleMounted:N,setBodyMounted:P}=TBe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return w.jsx(Hx,{...c,withinPortal:l,children:w.jsx(xBe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${x}-title`,getBodyId:()=>`${x}-body`,titleMounted:T,bodyMounted:A,setTitleMounted:N,setBodyMounted:P,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:b},children:w.jsx(k$,{enabled:k&&f,..._,children:w.jsx(De,{ref:C,...E,__vars:{...y,"--mb-z-index":(h||Ec("modal")).toString(),"--mb-shadow":eq(p),"--mb-padding":Ps(g)},children:d})})})})});function CBe(){const e=hg();return O.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var RE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const Rq=O.forwardRef(({className:e,...t},n)=>{const r=CBe(),i=hg();return w.jsx(De,{ref:n,...t,id:r,className:xs({[RE.body]:!i.unstyled},e)})});Rq.displayName="@mantine/core/ModalBaseBody";const Nq=O.forwardRef(({className:e,onClick:t,...n},r)=>{const i=hg();return w.jsx(dg,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:xs({[RE.close]:!i.unstyled},e),unstyled:i.unstyled})});Nq.displayName="@mantine/core/ModalBaseCloseButton";const tve=O.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=hg();return w.jsx(fg,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>w.jsx("div",{...n,className:xs({[RE.inner]:!a.unstyled},n.className),children:w.jsx(F$,{active:a.opened&&a.trapFocus,children:w.jsx(Ux,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:xs({[RE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),Pq=O.forwardRef(({className:e,...t},n)=>{const r=hg();return w.jsx(De,{component:"header",ref:n,className:xs({[RE.header]:!r.unstyled},e),...t})});Pq.displayName="@mantine/core/ModalBaseHeader";const ABe={duration:200,timingFunction:"ease",transition:"fade"};function IBe(e){const t=hg();return{...ABe,...t.transitionProps,...e}}const Dq=O.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=hg(),o=IBe(t);return w.jsx(fg,{mounted:s.opened,...o,transition:"fade",children:a=>w.jsx(K2,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});Dq.displayName="@mantine/core/ModalBaseOverlay";function kBe(){const e=hg();return O.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const Oq=O.forwardRef(({className:e,...t},n)=>{const r=kBe(),i=hg();return w.jsx(De,{component:"h2",ref:n,className:xs({[RE.title]:!i.unstyled},e),...t,id:r})});Oq.displayName="@mantine/core/ModalBaseTitle";function nve({children:e}){return w.jsx(w.Fragment,{children:e})}const[RBe,qx]=jx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var _f={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const lse={},NBe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${zo(t)} - ${Ve(2)})`}}),B$=Ze((e,t)=>{const n=Le("InputDescription",lse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Le("InputDescription",lse,n),p=qx(),g=Nt({name:["InputWrapper",c],props:n,classes:_f,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:NBe}),y=f&&(p==null?void 0:p.getStyles)||g;return w.jsx(De,{component:"p",ref:t,variant:d,size:l,...y("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});B$.classes=_f;B$.displayName="@mantine/core/InputDescription";const PBe={},DBe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${zo(t)} - ${Ve(2)})`}}),U$=Ze((e,t)=>{const n=Le("InputError",PBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Nt({name:["InputWrapper",c],props:n,classes:_f,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:DBe}),g=qx(),y=f&&(g==null?void 0:g.getStyles)||p;return w.jsx(De,{component:"p",ref:t,variant:d,size:l,...y("error",g!=null&&g.getStyles?{className:i,style:s}:void 0),...h})});U$.classes=_f;U$.displayName="@mantine/core/InputError";const cse={labelElement:"label"},OBe=(e,{size:t})=>({label:{"--input-label-size":zo(t),"--input-asterisk-color":void 0}}),z$=Ze((e,t)=>{const n=Le("InputLabel",cse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:g,variant:y,mod:b,..._}=Le("InputLabel",cse,n),E=Nt({name:["InputWrapper",g],props:n,classes:_f,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:OBe}),C=qx(),x=(C==null?void 0:C.getStyles)||E;return w.jsxs(De,{...x("label",C!=null&&C.getStyles?{className:i,style:s}:void 0),component:l,variant:y,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},b],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},..._,children:[p,f&&w.jsx("span",{...x("required"),"aria-hidden":!0,children:" *"})]})});z$.classes=_f;z$.displayName="@mantine/core/InputLabel";const fse={},Mq=Ze((e,t)=>{const n=Le("InputPlaceholder",fse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Le("InputPlaceholder",fse,n),p=Nt({name:["InputPlaceholder",l],props:n,classes:_f,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return w.jsx(De,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});Mq.classes=_f;Mq.displayName="@mantine/core/InputPlaceholder";function MBe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const $Be={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},LBe=(e,{size:t})=>({label:{"--input-label-size":zo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${zo(t)} - ${Ve(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${zo(t)} - ${Ve(2)})`}}),$q=Ze((e,t)=>{const n=Le("InputWrapper",$Be,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:g,description:y,labelProps:b,descriptionProps:_,errorProps:E,labelElement:C,children:x,withAsterisk:T,id:A,required:k,__stylesApiProps:N,mod:P,...D}=n,j=Nt({name:["InputWrapper",f],props:N||n,classes:_f,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LBe}),M={size:l,variant:c,__staticSelector:f},B=Ka(A),V=typeof T=="boolean"?T:k,z=(E==null?void 0:E.id)||`${B}-error`,G=(_==null?void 0:_.id)||`${B}-description`,Y=B,Q=!!g&&typeof g!="boolean",L=!!y,U=`${Q?z:""} ${L?G:""}`,K=U.trim().length>0?U.trim():void 0,q=(b==null?void 0:b.id)||`${B}-label`,X=p&&w.jsx(z$,{labelElement:C,id:q,htmlFor:Y,required:V,...M,...b,children:p},"label"),Z=L&&w.jsx(B$,{..._,...M,size:(_==null?void 0:_.size)||M.size,id:(_==null?void 0:_.id)||G,children:y},"description"),ae=w.jsx(O.Fragment,{children:d(x)},"input"),he=Q&&O.createElement(U$,{...E,...M,size:(E==null?void 0:E.size)||M.size,key:"error",id:(E==null?void 0:E.id)||z},g),ge=h.map(be=>{switch(be){case"label":return X;case"input":return ae;case"description":return Z;case"error":return he;default:return null}});return w.jsx(RBe,{value:{getStyles:j,describedBy:K,inputId:Y,labelId:q,...MBe(h,{hasDescription:L,hasError:Q})},children:w.jsx(De,{ref:t,variant:c,size:l,mod:[{error:!!g},P],...j("root"),...D,children:ge})})});$q.classes=_f;$q.displayName="@mantine/core/InputWrapper";const FBe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},jBe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Cn(t.size,"input-height"),"--input-fz":zo(t.size),"--input-radius":t.radius===void 0?void 0:vi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ve(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ve(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Cn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),zi=_o((e,t)=>{const n=Le("Input",FBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:g,leftSectionProps:y,leftSectionWidth:b,rightSection:_,rightSectionProps:E,rightSectionWidth:C,rightSectionPointerEvents:x,leftSectionPointerEvents:T,variant:A,vars:k,pointer:N,multiline:P,radius:D,id:j,withAria:M,withErrorStyles:B,mod:V,inputSize:z,...G}=n,{styleProps:Y,rest:Q}=$b(G),L=qx(),U={offsetBottom:L==null?void 0:L.offsetBottom,offsetTop:L==null?void 0:L.offsetTop},K=Nt({name:["Input",l],props:c||n,classes:_f,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:U,rootSelector:"wrapper",vars:k,varsResolver:jBe}),q=M?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":L==null?void 0:L.describedBy,id:(L==null?void 0:L.inputId)||j}:{};return w.jsxs(De,{...K("wrapper"),...Y,...d,mod:[{error:!!h&&B,pointer:N,disabled:p,multiline:P,"data-with-right-section":!!_,"data-with-left-section":!!g},V],variant:A,size:f,children:[g&&w.jsx("div",{...y,"data-position":"left",...K("section",{className:y==null?void 0:y.className,style:y==null?void 0:y.style}),children:g}),w.jsx(De,{component:"input",...Q,...q,ref:t,required:u,mod:{disabled:p,error:!!h&&B},variant:A,__size:z,...K("input")}),_&&w.jsx("div",{...E,"data-position":"right",...K("section",{className:E==null?void 0:E.className,style:E==null?void 0:E.style}),children:_})]})});zi.classes=_f;zi.Wrapper=$q;zi.Label=z$;zi.Error=U$;zi.Description=B$;zi.Placeholder=Mq;zi.displayName="@mantine/core/Input";function rve(e,t,n){const r=Le(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:g,descriptionProps:y,wrapperProps:b,id:_,size:E,style:C,inputContainer:x,inputWrapperOrder:T,withAsterisk:A,variant:k,vars:N,mod:P,...D}=r,{styleProps:j,rest:M}=$b(D),B={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:g,descriptionProps:y,unstyled:f,styles:l,size:E,style:C,inputContainer:x,inputWrapperOrder:T,withAsterisk:A,variant:k,id:_,mod:P,...b};return{...M,classNames:u,styles:l,unstyled:f,wrapperProps:{...B,...j},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:E,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:k,id:_}}}const BBe={__staticSelector:"InputBase",withAria:!0},wf=_o((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=rve("InputBase",BBe,e);return w.jsx(zi.Wrapper,{...r,children:w.jsx(zi,{...n,...i,ref:t})})});wf.classes={...zi.classes,...zi.Wrapper.classes};wf.displayName="@mantine/core/InputBase";const UBe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var ive={root:"m_8bffd616"};const zBe={},Kt=_o((e,t)=>{const n=Le("Flex",zBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:g,...y}=n,b=Nt({name:"Flex",classes:ive,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),_=Fs(),E=vI(),C=uye({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:g},theme:_,data:UBe});return w.jsxs(w.Fragment,{children:[C.hasResponsiveStyles&&w.jsx(Mb,{selector:`.${E}`,styles:C.styles,media:C.media}),w.jsx(De,{ref:t,...b("root",{className:E,style:jy(C.inlineStyles)}),...y})]})});Kt.classes=ive;Kt.displayName="@mantine/core/Flex";function VBe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function HBe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=O.useRef(),[s,o]=O.useState(!1),[a,u]=O.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),g={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${g.top}px) translateX(${g.left}px)`,n.current.style.width=`${g.width}px`,n.current.style.height=`${g.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=O.useRef(),d=O.useRef();return O.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),O.useEffect(()=>{if(t){const h=p=>{VBe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),W5e(()=>{tye()!=="test"&&o(!0)},20,{autoInvoke:!0}),G5e(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var sve={root:"m_96b553a6"};const qBe={},WBe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),Lq=Ze((e,t)=>{const n=Le("FloatingIndicator",qBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,g=Nt({name:"FloatingIndicator",classes:sve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:WBe}),y=O.useRef(null),{initialized:b,hidden:_}=HBe({target:l,parent:c,ref:y,displayAfterTransitionEnd:h}),E=Ls(t,y);return!l||!c?null:w.jsx(De,{ref:E,mod:[{initialized:b,hidden:_},d],...g("root"),...p})});Lq.displayName="@mantine/core/FloatingIndicator";Lq.classes=sve;const[GBe,Fq]=Wo("Accordion component was not found in the tree");function NE({style:e,size:t=16,...n}){return w.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ve(t),height:Ve(t),display:"block"},...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}NE.displayName="@mantine/core/AccordionChevron";const[YBe,ove]=Wo("Accordion.Item component was not found in the tree");var _I={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const KBe={},jq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Le("AccordionControl",KBe,e),{value:g}=ove(),y=Fq(),b=y.isItemActive(g),_=typeof y.order=="number",E=`h${y.order}`,C=w.jsxs(Zs,{...p,...y.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:y.variant}),unstyled:y.unstyled,mod:["accordion-control",{active:b,"chevron-position":y.chevronPosition,disabled:d},h],ref:t,onClick:x=>{l==null||l(x),y.onChange(g)},type:"button",disabled:d,"aria-expanded":b,"aria-controls":y.getRegionId(g),id:y.getControlId(g),onKeyDown:ZH({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:y.loop,orientation:"vertical",onKeyDown:c}),children:[w.jsx(De,{component:"span",mod:{rotate:!y.disableChevronRotation&&b,position:y.chevronPosition},...y.getStyles("chevron",{classNames:n,styles:s}),children:a||y.chevron}),w.jsx("span",{...y.getStyles("label",{classNames:n,styles:s}),children:f}),u&&w.jsx(De,{component:"span",mod:{"chevron-position":y.chevronPosition},...y.getStyles("icon",{classNames:n,styles:s}),children:u})]});return _?w.jsx(E,{...y.getStyles("itemTitle",{classNames:n,styles:s}),children:C}):C});jq.displayName="@mantine/core/AccordionControl";jq.classes=_I;const XBe={},Bq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Le("AccordionItem",XBe,e),c=Fq();return w.jsx(YBe,{value:{value:a},children:w.jsx(De,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});Bq.displayName="@mantine/core/AccordionItem";Bq.classes=_I;const QBe={},Uq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Le("AccordionPanel",QBe,e),{value:l}=ove(),c=Fq();return w.jsx(M$,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:w.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});Uq.displayName="@mantine/core/AccordionPanel";Uq.classes=_I;const JBe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:w.jsx(NE,{})},ZBe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ve(n),"--accordion-radius":r===void 0?void 0:vi(r)}});function Ju(e){const t=Le("Accordion",JBe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:g,disableChevronRotation:y,chevronPosition:b,chevronSize:_,order:E,chevron:C,variant:x,radius:T,...A}=t,k=Ka(h),[N,P]=eo({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),D=B=>Array.isArray(N)?N.includes(B):B===N,j=B=>{const V=Array.isArray(N)?N.includes(B)?N.filter(z=>z!==B):[...N,B]:B===N?null:B;P(V)},M=Nt({name:"Accordion",classes:_I,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:ZBe});return w.jsx(GBe,{value:{isItemActive:D,onChange:j,getControlId:yO(`${k}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:yO(`${k}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:g,disableChevronRotation:y,chevronPosition:b,order:E,chevron:C,loop:p,getStyles:M,variant:x,unstyled:o},children:w.jsx(De,{...M("root"),id:k,...A,variant:x,"data-accordion":!0,children:u})})}const eUe=e=>e;Ju.extend=eUe;Ju.classes=_I;Ju.displayName="@mantine/core/Accordion";Ju.Item=Bq;Ju.Panel=Uq;Ju.Control=jq;Ju.Chevron=NE;var ave={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const tUe={},nUe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:vi(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Wx=Ze((e,t)=>{const n=Le("Alert",tUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:g,onClose:y,closeButtonLabel:b,variant:_,autoContrast:E,...C}=n,x=Nt({name:"Alert",classes:ave,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nUe}),T=Ka(h),A=f&&`${T}-title`||void 0,k=`${T}-body`;return w.jsx(De,{id:T,...x("root",{variant:_}),variant:_,ref:t,...C,role:"alert","aria-describedby":k,"aria-labelledby":A,children:w.jsxs("div",{...x("wrapper"),children:[p&&w.jsx("div",{...x("icon"),children:p}),w.jsxs("div",{...x("body"),children:[f&&w.jsx("div",{...x("title"),"data-with-close-button":g||void 0,children:w.jsx("span",{id:A,...x("label"),children:f})}),d&&w.jsx("div",{id:k,...x("message"),"data-variant":_,children:d})]}),g&&w.jsx(dg,{...x("closeButton"),onClick:y,variant:"transparent",size:16,iconSize:16,"aria-label":b,unstyled:a})]})})});Wx.classes=ave;Wx.displayName="@mantine/core/Alert";var uve={root:"m_b6d8b162"};function rUe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const iUe={inherit:!1},sUe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":zo(i),"--text-lh":G0e(i),"--text-gradient":t==="gradient"?_U(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?di(s,e):void 0}}),pt=_o((e,t)=>{const n=Le("Text",iUe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:g,variant:y,mod:b,size:_,...E}=n,C=Nt({name:["Text",l],props:n,classes:uve,className:f,style:d,classNames:h,styles:p,unstyled:g,vars:c,varsResolver:sUe});return w.jsx(De,{...C("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:y,mod:[{"data-truncate":rUe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},b],size:_,...E})});pt.classes=uve;pt.displayName="@mantine/core/Text";var lve={root:"m_849cf0da"};const oUe={underline:"hover"},jb=_o((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Le("Anchor",oUe,e);return w.jsx(pt,{component:"a",ref:t,className:xs({[lve.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});jb.classes=lve;jb.displayName="@mantine/core/Anchor";const[aUe,Gx]=Wo("AppShell was not found in tree");var Vy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const uUe={},zq=Ze((e,t)=>{const n=Le("AppShellAside",uUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Gx();return h.disabled?null:w.jsx(De,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});zq.classes=Vy;zq.displayName="@mantine/core/AppShellAside";const lUe={},Vq=Ze((e,t)=>{var p;const n=Le("AppShellFooter",lUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Gx();return h.disabled?null:w.jsx(De,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:xs({[k$.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Vq.classes=Vy;Vq.displayName="@mantine/core/AppShellFooter";const cUe={},Hq=Ze((e,t)=>{var p;const n=Le("AppShellHeader",cUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Gx();return h.disabled?null:w.jsx(De,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:xs({[k$.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Hq.classes=Vy;Hq.displayName="@mantine/core/AppShellHeader";const fUe={},qq=Ze((e,t)=>{const n=Le("AppShellMain",fUe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Gx();return w.jsx(De,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});qq.classes=Vy;qq.displayName="@mantine/core/AppShellMain";function wI(e){return typeof e=="object"?e.base:e}function EI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function xI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function dUe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),EI(s)){const f=Ve(wI(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(xI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ve(s.base),e["--app-shell-aside-offset"]=Ve(s.base)),xi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ve(s[f]),t[f]["--app-shell-aside-offset"]=Ve(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=tq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function hUe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(EI(r)){const o=Ve(wI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}xI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ve(r.base),s&&(e["--app-shell-footer-offset"]=Ve(r.base))),xi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ve(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ve(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function pUe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(EI(r)){const o=Ve(wI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}xI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ve(r.base),s&&(e["--app-shell-header-offset"]=Ve(r.base))),xi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ve(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ve(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function mUe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),EI(s)){const f=Ve(wI(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(xI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ve(s.base),e["--app-shell-navbar-offset"]=Ve(s.base)),xi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ve(s[f]),t[f]["--app-shell-navbar-offset"]=Ve(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=tq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function Kj(e){return Number(e)===0?"0px":Ps(e)}function gUe({padding:e,baseStyles:t,minMediaStyles:n}){EI(e)&&(t["--app-shell-padding"]=Kj(wI(e))),xI(e)&&(e.base&&(t["--app-shell-padding"]=Kj(e.base)),xi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Kj(e[r]))}))}function yUe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};mUe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),dUe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),pUe({baseStyles:u,minMediaStyles:o,header:t}),hUe({baseStyles:u,minMediaStyles:o,footer:n}),gUe({baseStyles:u,minMediaStyles:o,padding:i});const l=W2(xi(o),s).map(d=>({query:`(min-width: ${gO(d.px)})`,styles:o[d.value]})),c=W2(xi(a),s).map(d=>({query:`(max-width: ${gO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function vUe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Fs(),o=Uy(),{media:a,baseStyles:u}=yUe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return w.jsx(Mb,{media:a,styles:u,selector:o.cssVariablesSelector})}const bUe={},Wq=Ze((e,t)=>{const n=Le("AppShellNavbar",bUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Gx();return h.disabled?null:w.jsx(De,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});Wq.classes=Vy;Wq.displayName="@mantine/core/AppShellNavbar";const _Ue={},Gq=_o((e,t)=>{const n=Le("AppShellSection",_Ue,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Gx();return w.jsx(De,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});Gq.classes=Vy;Gq.displayName="@mantine/core/AppShellSection";function wUe({transitionDuration:e,disabled:t}){const[n,r]=O.useState(!0),i=O.useRef(),s=O.useRef();return J0e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Ob(()=>{O.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const EUe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Ec("app")},xUe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Ui=Ze((e,t)=>{const n=Le("AppShell",EUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:g,layout:y,disabled:b,aside:_,footer:E,offsetScrollbars:C,mod:x,...T}=n,A=Nt({name:"AppShell",classes:Vy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xUe}),k=wUe({disabled:b,transitionDuration:d});return w.jsxs(aUe,{value:{getStyles:A,withBorder:c,zIndex:g,disabled:b,offsetScrollbars:C},children:[w.jsx(vUe,{navbar:l,header:p,aside:_,footer:E,padding:f}),w.jsx(De,{ref:t,...A("root"),mod:[{resizing:k,layout:y,disabled:b},x],...T})]})});Ui.classes=Vy;Ui.displayName="@mantine/core/AppShell";Ui.Navbar=Wq;Ui.Header=Hq;Ui.Main=qq;Ui.Aside=zq;Ui.Footer=Vq;Ui.Section=Gq;function cve(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>cve(t))}:e}function fve(e){return e?e.map(t=>cve(t)):[]}function Yq(e){return e.reduce((t,n)=>"group"in n?{...t,...Yq(n.items)}:(t[n.value]=n,t),{})}var _l={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const SUe={error:null},TUe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Cn(t,"combobox-chevron-size")}}),Kq=Ze((e,t)=>{const n=Le("ComboboxChevron",SUe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Nt({name:"ComboboxChevron",classes:_l,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:TUe,rootSelector:"chevron"});return w.jsx(De,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:w.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});Kq.classes=_l;Kq.displayName="@mantine/core/ComboboxChevron";const[CUe,Ef]=Wo("Combobox component was not found in tree"),dve=O.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>w.jsx(dg,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));dve.displayName="@mantine/core/ComboboxClearButton";const AUe={},Xq=Ze((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Le("ComboboxDropdown",AUe,e),u=Ef();return w.jsx(ca.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});Xq.classes=_l;Xq.displayName="@mantine/core/ComboboxDropdown";const IUe={refProp:"ref"},hve=Ze((e,t)=>{const{children:n,refProp:r}=Le("ComboboxDropdownTarget",IUe,e);if(Ef(),!By(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return w.jsx(ca.Target,{ref:t,refProp:r,children:n})});hve.displayName="@mantine/core/ComboboxDropdownTarget";const kUe={},Qq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Le("ComboboxEmpty",kUe,e),u=Ef();return w.jsx(De,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});Qq.classes=_l;Qq.displayName="@mantine/core/ComboboxEmpty";function Jq({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Ef(),[a,u]=O.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const RUe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},pve=Ze((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Le("ComboboxEventsTarget",RUe,e);if(!By(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Ef(),f=Jq({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return O.cloneElement(n,{...f,...l,[r]:Ls(t,c.store.targetRef,n==null?void 0:n.ref)})});pve.displayName="@mantine/core/ComboboxEventsTarget";const NUe={},Zq=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Le("ComboboxFooter",NUe,e),u=Ef();return w.jsx(De,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});Zq.classes=_l;Zq.displayName="@mantine/core/ComboboxFooter";const PUe={},eW=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Le("ComboboxGroup",PUe,e),c=Ef();return w.jsxs(De,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&w.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});eW.classes=_l;eW.displayName="@mantine/core/ComboboxGroup";const DUe={},tW=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Le("ComboboxHeader",DUe,e),u=Ef();return w.jsx(De,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});tW.classes=_l;tW.displayName="@mantine/core/ComboboxHeader";function mve({value:e,valuesDivider:t=",",...n}){return w.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}mve.displayName="@mantine/core/ComboboxHiddenInput";const OUe={},nW=Ze((e,t)=>{const n=Le("ComboboxOption",OUe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:g,...y}=n,b=Ef(),_=O.useId(),E=l||_;return w.jsx(De,{...b.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...y,ref:t,id:E,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},g],role:"option",onClick:C=>{var x;h?C.preventDefault():((x=b.onOptionSubmit)==null||x.call(b,n.value,n),u==null||u(C))},onMouseDown:C=>{C.preventDefault(),f==null||f(C)},onMouseOver:C=>{b.resetSelectionOnOptionHover&&b.store.resetSelectedOption(),d==null||d(C)}})});nW.classes=_l;nW.displayName="@mantine/core/ComboboxOption";const MUe={},rW=Ze((e,t)=>{const n=Le("ComboboxOptions",MUe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Ef(),d=Ka(a);return O.useEffect(()=>{f.store.setListId(d)},[d]),w.jsx(De,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});rW.classes=_l;rW.displayName="@mantine/core/ComboboxOptions";const $Ue={withAriaAttributes:!0,withKeyboardNavigation:!0},iW=Ze((e,t)=>{const n=Le("ComboboxSearch",$Ue,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Ef(),h=d.getStyles("search"),p=Jq({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return w.jsx(zi,{ref:Ls(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});iW.classes=_l;iW.displayName="@mantine/core/ComboboxSearch";const LUe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},gve=Ze((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Le("ComboboxTarget",LUe,e);if(!By(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Ef(),f=Jq({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=O.cloneElement(n,{...f,...l});return w.jsx(ca.Target,{ref:Ls(t,c.store.targetRef),children:d})});gve.displayName="@mantine/core/ComboboxTarget";function FUe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function jUe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function BUe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function sW({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=eo({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=O.useRef(null),c=O.useRef(-1),f=O.useRef(null),d=O.useRef(null),h=O.useRef(-1),p=O.useRef(-1),g=O.useRef(-1),y=O.useCallback((z="unknown")=>{a||(u(!0),i==null||i(z))},[u,i,a]),b=O.useCallback((z="unknown")=>{a&&(u(!1),r==null||r(z))},[u,r,a]),_=O.useCallback((z="unknown")=>{a?b(z):y(z)},[b,y,a]),E=O.useCallback(()=>{const z=document.querySelector(`#${l.current} [data-combobox-selected]`);z==null||z.removeAttribute("data-combobox-selected"),z==null||z.removeAttribute("aria-selected")},[]),C=O.useCallback(z=>{const G=document.getElementById(l.current),Y=G==null?void 0:G.querySelectorAll("[data-combobox-option]");if(!Y)return null;const Q=z>=Y.length?0:z<0?Y.length-1:z;return c.current=Q,Y!=null&&Y[Q]&&!Y[Q].hasAttribute("data-combobox-disabled")?(E(),Y[Q].setAttribute("data-combobox-selected","true"),Y[Q].setAttribute("aria-selected","true"),Y[Q].scrollIntoView({block:"nearest",behavior:o}),Y[Q].id):null},[o,E]),x=O.useCallback(()=>{const z=document.querySelector(`#${l.current} [data-combobox-active]`);if(z){const G=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Y=Array.from(G).findIndex(Q=>Q===z);return C(Y)}return C(0)},[C]),T=O.useCallback(()=>C(jUe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[C,s]),A=O.useCallback(()=>C(FUe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[C,s]),k=O.useCallback(()=>C(BUe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[C]),N=O.useCallback((z="selected",G)=>{g.current=window.setTimeout(()=>{var L;const Y=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Q=Array.from(Y).findIndex(U=>U.hasAttribute(`data-combobox-${z}`));c.current=Q,G!=null&&G.scrollIntoView&&((L=Y[Q])==null||L.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),P=O.useCallback(()=>{c.current=-1,E()},[E]),D=O.useCallback(()=>{const z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),G=z==null?void 0:z[c.current];G==null||G.click()},[]),j=O.useCallback(z=>{l.current=z},[]),M=O.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),B=O.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),V=O.useCallback(()=>c.current,[]);return O.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(g.current)},[]),{dropdownOpened:a,openDropdown:y,closeDropdown:b,toggleDropdown:_,selectedOptionIndex:c.current,getSelectedOptionIndex:V,selectOption:C,selectFirstOption:k,selectActiveOption:x,selectNextOption:T,selectPreviousOption:A,resetSelectedOption:P,updateSelectedOptionIndex:N,listId:l.current,setListId:j,clickSelectedOption:D,searchRef:f,focusSearchInput:M,targetRef:d,focusTarget:B}}const UUe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},zUe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":zo(t),"--combobox-option-padding":Cn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ve(n),"--combobox-option-fz":zo(t),"--combobox-option-padding":Cn(t,"combobox-option-padding")}});function Er(e){const t=Le("Combobox",UUe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...g}=t,y=sW(),b=o||y,_=Nt({name:h||"Combobox",classes:_l,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:zUe}),E=()=>{l==null||l(),b.closeDropdown()};return w.jsx(CUe,{value:{getStyles:_,store:b,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:w.jsx(ca,{opened:b.dropdownOpened,...g,onClose:E,withRoles:!1,unstyled:i,children:s})})}const VUe=e=>e;Er.extend=VUe;Er.classes=_l;Er.displayName="@mantine/core/Combobox";Er.Target=gve;Er.Dropdown=Xq;Er.Options=rW;Er.Option=nW;Er.Search=iW;Er.Empty=Qq;Er.Chevron=Kq;Er.Footer=Zq;Er.Header=tW;Er.EventsTarget=pve;Er.DropdownTarget=hve;Er.Group=eW;Er.ClearButton=dve;Er.HiddenInput=mve;var yve={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const vve=yve,V$=O.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:g="label",variant:y,style:b,vars:_,mod:E,...C},x)=>{const T=Nt({name:e,props:t,className:n,style:b,classes:yve,classNames:r,styles:i,unstyled:s});return w.jsx(De,{...T("root"),ref:x,__vars:{"--label-fz":zo(d),"--label-lh":Cn(d,"label-lh")},mod:[{"label-position":h},E],variant:y,size:d,...C,children:w.jsxs(De,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,w.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&w.jsx(De,{component:g,htmlFor:g==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&w.jsx(zi.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&w.jsx(zi.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});V$.displayName="@mantine/core/InlineInput";const bve=O.createContext(null),HUe=bve.Provider,_ve=()=>O.useContext(bve),[qUe,WUe]=jx();var wve={card:"m_26775b0a"};const GUe={withBorder:!0},YUe=(e,{radius:t})=>({card:{"--card-radius":vi(t)}}),oW=Ze((e,t)=>{const n=Le("CheckboxCard",GUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,g=Nt({name:"CheckboxCard",classes:wve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YUe,rootSelector:"card"}),y=_ve(),b=typeof l=="boolean"?l:(y==null?void 0:y.value.includes(d||""))||!1;return w.jsx(qUe,{value:{checked:b},children:w.jsx(Zs,{ref:t,mod:[{"with-border":f,checked:b},c],...g("card"),...p,role:"checkbox","aria-checked":b,onClick:_=>{h==null||h(_),y==null||y.onChange(d||"")}})})});oW.displayName="@mantine/core/CheckboxCard";oW.classes=wve;function aW({children:e,role:t}){const n=qx();return n?w.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):w.jsx(w.Fragment,{children:e})}const KUe={},uW=Ze((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Le("CheckboxGroup",KUe,e),[c,f]=eo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(g=>g!==p):[...c,p])};return w.jsx(HUe,{value:{value:c,onChange:d,size:s},children:w.jsx(zi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:w.jsx(aW,{role:"group",children:a})})})});uW.classes=zi.Wrapper.classes;uW.displayName="@mantine/core/CheckboxGroup";function Eve({size:e,style:t,...n}){const r=e!==void 0?{width:Ve(e),height:Ve(e),...t}:t;return w.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:w.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function xve({indeterminate:e,...t}){return e?w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:w.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):w.jsx(Eve,{...t})}var Sve={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const XUe={icon:xve},QUe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=dp({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Cn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:vi(t),"--checkbox-color":s==="outline"?u:di(n,e),"--checkbox-icon-color":i?di(i,e):Bx(o,e)?zy({color:n,theme:e,autoContrast:o}):void 0}}},lW=Ze((e,t)=>{const n=Le("CheckboxIndicator",XUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:g,mod:y,variant:b,disabled:_,...E}=n,C=l,x=Nt({name:"CheckboxIndicator",classes:Sve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QUe,rootSelector:"indicator"}),T=WUe(),A=typeof g=="boolean"||typeof c=="boolean"?g||c:(T==null?void 0:T.checked)||!1;return w.jsx(De,{ref:t,...x("indicator",{variant:b}),variant:b,mod:[{checked:A,disabled:_},y],...E,children:w.jsx(C,{indeterminate:c,...x("icon")})})});lW.displayName="@mantine/core/CheckboxIndicator";lW.classes=Sve;var Tve={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const JUe={labelPosition:"right",icon:xve},ZUe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=dp({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Cn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:vi(t),"--checkbox-color":s==="outline"?u:di(n,e),"--checkbox-icon-color":i?di(i,e):Bx(o,e)?zy({color:n,theme:e,autoContrast:o}):void 0}}},Ql=Ze((e,t)=>{const n=Le("Checkbox",JUe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:g,checked:y,labelPosition:b,description:_,error:E,disabled:C,variant:x,indeterminate:T,icon:A,rootRef:k,iconColor:N,onChange:P,autoContrast:D,mod:j,...M}=n,B=_ve(),V=d||(B==null?void 0:B.size),z=A,G=Nt({name:"Checkbox",props:n,classes:Tve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZUe}),{styleProps:Y,rest:Q}=$b(M),L=Ka(f),U=B?{checked:B.value.includes(Q.value),onChange:K=>{B.onChange(K),P==null||P(K)}}:{};return w.jsx(V$,{...G("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:L,size:V,labelPosition:b,label:c,description:_,error:E,disabled:C,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||y||void 0,variant:x,ref:k,mod:j,...Y,...p,children:w.jsxs(De,{...G("inner"),mod:{"data-label-position":b},children:[w.jsx(De,{component:"input",id:L,ref:t,checked:y,disabled:C,mod:{error:!!E,indeterminate:T},...G("input",{focusable:!0,variant:x}),onChange:P,...Q,...U,type:"checkbox"}),w.jsx(z,{indeterminate:T,...G("icon")})]})})});Ql.classes={...Tve,...vve};Ql.displayName="@mantine/core/Checkbox";Ql.Group=uW;Ql.Indicator=lW;Ql.Card=oW;function PE(e){return"group"in e}function Cve({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;PE(o)&&i.push({group:o.group,items:Cve({options:o.items,search:t,limit:n-i.length})}),PE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function e7e(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Ave(e,t=new Set){if(Array.isArray(e))for(const n of e)if(PE(n))Ave(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function t7e(e,t){return Array.isArray(e)?e.includes(t):e===t}function Ive({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!PE(e)){const a=t7e(n,e.value),u=t&&a&&w.jsx(Eve,{className:_l.optionsDropdownCheckIcon}),l=w.jsxs(w.Fragment,{children:[r==="left"&&u,w.jsx("span",{children:e.label}),r==="right"&&u]});return w.jsx(Er.Option,{value:e.value,disabled:e.disabled,className:xs({[_l.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>w.jsx(Ive,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return w.jsx(Er.Group,{label:e.group,children:o})}function kve({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:g,scrollAreaProps:y,"aria-label":b}){Ave(e);const E=typeof i=="string"?(r||Cve)({options:e,search:u?i:"",limit:s??1/0}):e,C=e7e(E),x=E.map(T=>w.jsx(Ive,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:g},PE(T)?T.group:T.value));return w.jsx(Er.Dropdown,{hidden:t||n&&C,children:w.jsxs(Er.Options,{labelledBy:p,"aria-label":b,children:[a?w.jsx(jm.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...y,children:x}):x,C&&d&&w.jsx(Er.Empty,{children:d})]})})}var Rve={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const n7e={},r7e=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Cn(s,"badge-height"),"--badge-padding-x":Cn(s,"badge-padding-x"),"--badge-fz":Cn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:vi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?di(n,e):void 0}}},L0=_o((e,t)=>{const n=Le("Badge",n7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:g,fullWidth:y,autoContrast:b,circle:_,mod:E,...C}=n,x=Nt({name:"Badge",props:n,classes:Rve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:r7e});return w.jsxs(De,{variant:g,mod:[{block:y,circle:_},E],...x("root",{variant:g}),ref:t,...C,children:[d&&w.jsx("span",{...x("section"),"data-position":"left",children:d}),w.jsx("span",{...x("label"),children:p}),h&&w.jsx("span",{...x("section"),"data-position":"right",children:h})]})});L0.classes=Rve;L0.displayName="@mantine/core/Badge";var Nve={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const i7e={},s7e=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?di(t,e):void 0,"--burger-size":Cn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),cW=Ze((e,t)=>{const n=Le("Burger",i7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=Nt({name:"Burger",classes:Nve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:s7e});return w.jsxs(Zs,{...p("root"),ref:t,...h,children:[w.jsx(De,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});cW.classes=Nve;cW.displayName="@mantine/core/Burger";var H$={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const dse={orientation:"horizontal"},o7e=(e,{borderWidth:t})=>({group:{"--button-border-width":Ve(t)}}),fW=Ze((e,t)=>{const n=Le("ButtonGroup",dse,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Le("ButtonGroup",dse,e),p=Nt({name:"ButtonGroup",props:n,classes:H$,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:o7e,rootSelector:"group"});return w.jsx(De,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});fW.classes=H$;fW.displayName="@mantine/core/ButtonGroup";const a7e={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ve(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},u7e={},l7e=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Cn(s,"button-height"),"--button-padding-x":Cn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?zo(s.replace("compact-","")):zo(s),"--button-radius":t===void 0?void 0:vi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Sn=_o((e,t)=>{const n=Le("Button",u7e,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:g,gradient:y,classNames:b,styles:_,unstyled:E,"data-disabled":C,autoContrast:x,mod:T,...A}=n,k=Nt({name:"Button",props:n,classes:H$,className:s,style:r,classNames:b,styles:_,unstyled:E,vars:i,varsResolver:l7e}),N=!!l,P=!!c;return w.jsxs(Zs,{ref:t,...k("root",{active:!a&&!p&&!C}),unstyled:E,variant:d,disabled:a||p,mod:[{disabled:a||C,loading:p,block:f,"with-left-section":N,"with-right-section":P},T],...A,children:[w.jsx(fg,{mounted:!!p,transition:a7e,duration:150,children:D=>w.jsx(De,{component:"span",...k("loader",{style:D}),"aria-hidden":!0,children:w.jsx(bf,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...g})})}),w.jsxs("span",{...k("inner"),children:[l&&w.jsx(De,{component:"span",...k("section"),mod:{position:"left"},children:l}),w.jsx(De,{component:"span",mod:{loading:p},...k("label"),children:u}),c&&w.jsx(De,{component:"span",...k("section"),mod:{position:"right"},children:c})]})]})});Sn.classes=H$;Sn.displayName="@mantine/core/Button";Sn.Group=fW;const[c7e,f7e]=Wo("Card component was not found in tree");var dW={root:"m_e615b15f",section:"m_599a2148"};const d7e={},q$=_o((e,t)=>{const n=Le("CardSection",d7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=f7e();return w.jsx(De,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});q$.classes=dW;q$.displayName="@mantine/core/CardSection";const h7e={},p7e=(e,{padding:t})=>({root:{"--card-padding":Ps(t)}}),Bb=_o((e,t)=>{const n=Le("Card",h7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Nt({name:"Card",props:n,classes:dW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:p7e}),h=O.Children.toArray(l),p=h.map((g,y)=>typeof g=="object"&&g&&"type"in g&&g.type===q$?O.cloneElement(g,{"data-first-section":y===0||void 0,"data-last-section":y===h.length-1||void 0}):g);return w.jsx(c7e,{value:{getStyles:d},children:w.jsx(Ux,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Bb.classes=dW;Bb.displayName="@mantine/core/Card";Bb.Section=q$;var Pve={root:"m_4451eb3a"};const m7e={},uc=_o((e,t)=>{const n=Le("Center",m7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Nt({name:"Center",props:n,classes:Pve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return w.jsx(De,{ref:t,mod:[{inline:l},c],...d("root"),...f})});uc.classes=Pve;uc.displayName="@mantine/core/Center";var Dve={root:"m_b183c0a2"};const g7e={},y7e=(e,{color:t})=>({root:{"--code-bg":t?di(t,e):void 0}}),l2=Ze((e,t)=>{const n=Le("Code",g7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Nt({name:"Code",props:n,classes:Dve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:y7e});return w.jsx(De,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});l2.classes=Dve;l2.displayName="@mantine/core/Code";var Ove={root:"m_7485cace"};const v7e={},b7e=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Cn(t,"container-size")}}),uf=Ze((e,t)=>{const n=Le("Container",v7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Nt({name:"Container",classes:Ove,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:b7e});return w.jsx(De,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});uf.classes=Ove;uf.displayName="@mantine/core/Container";var Mve={root:"m_3eebeb36",label:"m_9e365f20"};const _7e={orientation:"horizontal"},w7e=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?di(t,e):void 0,"--divider-border-style":n,"--divider-size":Cn(r,"divider-size")}}),DE=Ze((e,t)=>{const n=Le("Divider",_7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,g=Nt({name:"Divider",classes:Mve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:w7e});return w.jsx(De,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...g("root"),...p,role:"separator",children:f&&w.jsx(De,{component:"span",mod:{position:d},...g("label"),children:f})})});DE.classes=Mve;DE.displayName="@mantine/core/Divider";const[E7e,Yx]=Wo("Drawer component was not found in tree");var pg={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const x7e={},W$=Ze((e,t)=>{const n=Le("DrawerBody",x7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Yx();return w.jsx(Rq,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});W$.classes=pg;W$.displayName="@mantine/core/DrawerBody";const S7e={},G$=Ze((e,t)=>{const n=Le("DrawerCloseButton",S7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Yx();return w.jsx(Nq,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});G$.classes=pg;G$.displayName="@mantine/core/DrawerCloseButton";const T7e={},Y$=Ze((e,t)=>{const n=Le("DrawerContent",T7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Yx(),d=f.scrollAreaComponent||nve;return w.jsx(tve,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:w.jsx(d,{style:{height:"100vh"},children:u})})});Y$.classes=pg;Y$.displayName="@mantine/core/DrawerContent";const C7e={},K$=Ze((e,t)=>{const n=Le("DrawerHeader",C7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Yx();return w.jsx(Pq,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});K$.classes=pg;K$.displayName="@mantine/core/DrawerHeader";const A7e={},X$=Ze((e,t)=>{const n=Le("DrawerOverlay",A7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Yx();return w.jsx(Dq,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});X$.classes=pg;X$.displayName="@mantine/core/DrawerOverlay";function I7e(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function k7e(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const R7e={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},N7e={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},P7e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ec("modal"),position:"left"},D7e=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":Cn(n,"drawer-size"),"--drawer-flex":k7e(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":I7e(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Ve(r)}}),Q$=Ze((e,t)=>{const n=Le("DrawerRoot",P7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=hp(),g=Nt({name:"Drawer",classes:pg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:D7e}),y=(p==="rtl"?N7e:R7e)[c];return w.jsx(E7e,{value:{scrollAreaComponent:l,getStyles:g,radius:d},children:w.jsx(eve,{ref:t,...g("root"),transitionProps:{transition:y,...f},unstyled:a,...h})})});Q$.classes=pg;Q$.displayName="@mantine/core/DrawerRoot";const O7e={},J$=Ze((e,t)=>{const n=Le("DrawerTitle",O7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Yx();return w.jsx(Oq,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});J$.classes=pg;J$.displayName="@mantine/core/DrawerTitle";const M7e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ec("modal"),withOverlay:!0,withCloseButton:!0},pp=Ze((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=Le("Drawer",M7e,e),l=!!n||s;return w.jsxs(Q$,{ref:t,...u,children:[r&&w.jsx(X$,{...i}),w.jsxs(Y$,{children:[l&&w.jsxs(K$,{children:[n&&w.jsx(J$,{children:n}),s&&w.jsx(G$,{...o})]}),w.jsx(W$,{children:a})]})]})});pp.classes=pg;pp.displayName="@mantine/core/Drawer";pp.Root=Q$;pp.Overlay=X$;pp.Content=Y$;pp.Body=W$;pp.Header=K$;pp.Title=J$;pp.CloseButton=G$;function $7e({open:e,close:t,openDelay:n,closeDelay:r}){const i=O.useRef(-1),s=O.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return O.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[L7e,$ve]=Wo("Grid component was not found in tree"),RU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,hse=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":RU(e,t),pse=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},mse=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function F7e({span:e,order:t,offset:n,selector:r}){var d;const i=Fs(),s=$ve(),a=id(e)===void 0?12:id(e),u=jy({"--col-order":(d=id(t))==null?void 0:d.toString(),"--col-flex-grow":pse(a,s.grow),"--col-flex-basis":RU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":hse(a,s.columns,s.grow),"--col-offset":mse(id(n),s.columns)}),l=xi(i.breakpoints).reduce((h,p)=>{var g;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(g=t[p])==null?void 0:g.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=pse(e[p],s.grow),h[p]["--col-flex-basis"]=RU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=hse(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=mse(n[p],s.columns)),h},{}),f=W2(xi(l),i).filter(h=>xi(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return w.jsx(Mb,{styles:u,media:f,selector:r})}var hW={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const j7e={span:12},pW=Ze((e,t)=>{const n=Le("GridCol",j7e,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=$ve(),h=vI();return w.jsxs(w.Fragment,{children:[w.jsx(F7e,{selector:`.${h}`,span:u,order:l,offset:c}),w.jsx(De,{ref:t,...d.getStyles("col",{className:xs(i,h),style:s,classNames:r,styles:o}),...f})]})});pW.classes=hW;pW.displayName="@mantine/core/GridCol";function B7e({gutter:e,selector:t}){const n=Fs(),r=jy({"--grid-gutter":Ps(id(e))}),i=xi(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Ps(e[u])),a),{}),o=W2(xi(i),n).filter(a=>xi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return w.jsx(Mb,{styles:r,media:o,selector:t})}const U7e={gutter:"md",grow:!1,columns:12},z7e=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),gu=Ze((e,t)=>{const n=Le("Grid",U7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...g}=n,y=Nt({name:"Grid",classes:hW,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:z7e}),b=vI();return w.jsxs(L7e,{value:{getStyles:y,grow:l,columns:f},children:[w.jsx(B7e,{selector:`.${b}`,...n}),w.jsx(De,{ref:t,...y("root",{className:b}),...g,children:w.jsx("div",{...y("inner"),children:p})})]})});gu.classes=hW;gu.displayName="@mantine/core/Grid";gu.Col=pW;var Lve={root:"m_9e117634"};const V7e={},H7e=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:vi(t),"--image-object-fit":n}}),Ub=_o((e,t)=>{const n=Le("Image",V7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...g}=n,[y,b]=O.useState(!c);O.useEffect(()=>b(!c),[c]);const _=Nt({name:"Image",classes:Lve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:H7e});return y&&h?w.jsx(De,{component:"img",ref:t,src:h,..._("root"),onError:l,mod:["fallback",p],...g}):w.jsx(De,{component:"img",ref:t,..._("root"),src:c,onError:E=>{l==null||l(E),b(!0)},mod:p,...g})});Ub.classes=Lve;Ub.displayName="@mantine/core/Image";function NU(){return NU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NU.apply(null,arguments)}function q7e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var W7e=O.useLayoutEffect,G7e=function(t){var n=O.useRef(t);return W7e(function(){n.current=t}),n},gse=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Y7e=function(t,n){var r=O.useRef();return O.useCallback(function(i){t.current=i,r.current&&gse(r.current,null),r.current=n,n&&gse(n,i)},[n])},yse={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},K7e=function(t){Object.keys(yse).forEach(function(n){t.style.setProperty(n,yse[n],"important")})},vse=K7e,ru=null,bse=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function X7e(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),ru||(ru=document.createElement("textarea"),ru.setAttribute("tabindex","-1"),ru.setAttribute("aria-hidden","true"),vse(ru)),ru.parentNode===null&&document.body.appendChild(ru);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;ru.style[h]=o[h]}),vse(ru),ru.value=t;var u=bse(ru,e);ru.value=t,u=bse(ru,e),ru.value="x";var l=ru.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var _se=function(){},Q7e=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},J7e=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Z7e=!!document.documentElement.currentStyle,eze=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Q7e(J7e,n),i=r.boxSizing;if(i==="")return null;Z7e&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},tze=eze;function Fve(e,t,n){var r=G7e(n);O.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var nze=function(t){Fve(window,"resize",t)},rze=function(t){Fve(document.fonts,"loadingdone",t)},ize=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],sze=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?_se:o,u=t.onHeightChange,l=u===void 0?_se:u,c=q7e(t,ize),f=c.value!==void 0,d=O.useRef(null),h=Y7e(d,n),p=O.useRef(0),g=O.useRef(),y=function(){var E=d.current,C=r&&g.current?g.current:tze(E);if(C){g.current=C;var x=X7e(C,E.value||E.placeholder||"x",s,i),T=x[0],A=x[1];p.current!==T&&(p.current=T,E.style.setProperty("height",T+"px","important"),l(T,{rowHeight:A}))}},b=function(E){f||y(),a(E)};return O.useLayoutEffect(y),nze(y),rze(y),O.createElement("textarea",NU({},c,{onChange:b,ref:h}))},oze=O.forwardRef(sze);const aze={},mW=Ze((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Le("Textarea",aze,e),u=n&&tye()!=="test",l=u?{maxRows:r,minRows:i}:{};return w.jsx(wf,{component:u?oze:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});mW.classes=wf.classes;mW.displayName="@mantine/core/Textarea";const[uze,lze]=Wo("List component was not found in tree");var gW={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const cze={},yW=Ze((e,t)=>{const n=Le("ListItem",cze,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=lze(),h=u||d.icon,p={classNames:r,styles:o};return w.jsx(De,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:w.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&w.jsx("span",{...d.getStyles("itemIcon",p),children:h}),w.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});yW.classes=gW;yW.displayName="@mantine/core/ListItem";const fze={type:"unordered"},dze=(e,{size:t,spacing:n})=>({root:{"--list-fz":zo(t),"--list-lh":G0e(t),"--list-spacing":Ps(n)}}),hd=Ze((e,t)=>{const n=Le("List",fze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:g,mod:y,...b}=n,_=Nt({name:"List",classes:gW,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dze});return w.jsx(uze,{value:{center:p,icon:d,getStyles:_},children:w.jsx(De,{..._("root",{style:{listStyleType:g}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},y],ref:t,...b,children:l})})});hd.classes=gW;hd.displayName="@mantine/core/List";hd.Item=yW;var jve={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const wse={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Ec("overlay")},hze=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),lc=Ze((e,t)=>{const n=Le("LoadingOverlay",wse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,g=Fs(),y=Nt({name:"LoadingOverlay",classes:jve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hze}),b={...wse.overlayProps,...f};return w.jsx(fg,{transition:"fade",...l,mounted:!!d,children:_=>w.jsxs(De,{...y("root",{style:_}),ref:t,...p,children:[w.jsx(bf,{...y("loader"),unstyled:a,...c}),w.jsx(K2,{...b,...y("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||g.white}),w.jsx(K2,{...b,...y("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||g.colors.dark[5]})]})})});lc.classes=jve;lc.displayName="@mantine/core/LoadingOverlay";const[pze,SI]=Wo("Menu component was not found in the tree");var Kx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const mze={},vW=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Le("MenuDivider",mze,e),u=SI();return w.jsx(De,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});vW.classes=Kx;vW.displayName="@mantine/core/MenuDivider";const gze={},bW=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Le("MenuDropdown",gze,e),f=O.useRef(null),d=SI(),h=y=>{var b,_;(y.key==="ArrowUp"||y.key==="ArrowDown")&&(y.preventDefault(),(_=(b=f.current)==null?void 0:b.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||_.focus())},p=vm(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),g=vm(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return w.jsxs(ca.Dropdown,{...c,onMouseEnter:p,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:Ls(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[w.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});bW.classes=Kx;bW.displayName="@mantine/core/MenuDropdown";const yze={},_W=_o((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Le("MenuItem",yze,e),p=SI(),g=Fs(),{dir:y}=hp(),b=O.useRef(),_=p.getItemIndex(b.current),E=h,C=vm(E.onMouseLeave,()=>p.setHovered(-1)),x=vm(E.onMouseEnter,()=>p.setHovered(p.getItemIndex(b.current))),T=vm(E.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),A=vm(E.onFocus,()=>p.setHovered(p.getItemIndex(b.current))),k=a?g.variantColorResolver({color:a,theme:g,variant:"light"}):void 0,N=a?dp({color:a,theme:g}):null;return w.jsxs(Zs,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:A,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:Ls(b,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===_?!0:void 0,onMouseEnter:x,onMouseLeave:C,onClick:T,onKeyDown:ZH({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:y,orientation:"vertical",onKeyDown:E.onKeydown}),__vars:{"--menu-item-color":N!=null&&N.isThemeColor&&(N==null?void 0:N.shade)===void 0?`var(--mantine-color-${N.color}-6)`:k==null?void 0:k.color,"--menu-item-hover":k==null?void 0:k.hover},children:[l&&w.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&w.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&w.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});_W.classes=Kx;_W.displayName="@mantine/core/MenuItem";const vze={},wW=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Le("MenuLabel",vze,e),u=SI();return w.jsx(De,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});wW.classes=Kx;wW.displayName="@mantine/core/MenuLabel";const bze={refProp:"ref"},Bve=O.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Le("MenuTarget",bze,e);if(!By(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=SI(),o=vm(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=vm(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=vm(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return w.jsx(ca.Target,{refProp:r,popupType:"menu",ref:t,...i,children:O.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});Bve.displayName="@mantine/core/MenuTarget";const _ze={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function nl(e){const t=Le("Menu",_ze,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:g,styles:y,unstyled:b,variant:_,vars:E,menuItemTabIndex:C,keepMounted:x,...T}=t,A=Nt({name:"Menu",classes:Kx,props:t,classNames:g,styles:y,unstyled:b}),[k,{setHovered:N,resetHovered:P}]=S5e(),[D,j]=eo({value:s,defaultValue:o,finalValue:!1,onChange:u}),[M,B]=O.useState(!1),V=()=>{j(!1),B(!1),D&&(i==null||i())},z=()=>{j(!0),!D&&(r==null||r())},G=()=>{D?V():z()},{openDropdown:Y,closeDropdown:Q}=$7e({open:z,close:V,closeDelay:p,openDelay:h}),L=q=>x5e("[data-menu-item]","[data-menu-dropdown]",q),{resolvedClassNames:U,resolvedStyles:K}=lg({classNames:g,styles:y,props:t});return Gh(()=>{P()},[D]),w.jsx(pze,{value:{getStyles:A,opened:D,toggleDropdown:G,getItemIndex:L,hovered:k,setHovered:N,openedViaClick:M,setOpenedViaClick:B,closeOnItemClick:l,closeDropdown:d==="click"?V:Q,openDropdown:d==="click"?z:Y,closeDropdownImmediately:V,loop:c,trigger:d,unstyled:b,menuItemTabIndex:C},children:w.jsx(ca,{...T,opened:D,onChange:G,defaultOpened:o,trapFocus:x?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:K,unstyled:b,variant:_,keepMounted:x,children:n})})}nl.extend=e=>e;nl.classes=Kx;nl.displayName="@mantine/core/Menu";nl.Item=_W;nl.Label=wW;nl.Dropdown=bW;nl.Target=Bve;nl.Divider=vW;const[wze,Xx]=Wo("Modal component was not found in tree");var mg={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const Eze={},Z$=Ze((e,t)=>{const n=Le("ModalBody",Eze,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Xx();return w.jsx(Rq,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});Z$.classes=mg;Z$.displayName="@mantine/core/ModalBody";const xze={},eL=Ze((e,t)=>{const n=Le("ModalCloseButton",xze,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Xx();return w.jsx(Nq,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});eL.classes=mg;eL.displayName="@mantine/core/ModalCloseButton";const Sze={},tL=Ze((e,t)=>{const n=Le("ModalContent",Sze,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Xx(),f=c.scrollAreaComponent||nve;return w.jsx(tve,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:w.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Ve(c.yOffset)} * 2))`},children:u})})});tL.classes=mg;tL.displayName="@mantine/core/ModalContent";const Tze={},nL=Ze((e,t)=>{const n=Le("ModalHeader",Tze,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Xx();return w.jsx(Pq,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});nL.classes=mg;nL.displayName="@mantine/core/ModalHeader";const Cze={},rL=Ze((e,t)=>{const n=Le("ModalOverlay",Cze,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Xx();return w.jsx(Dq,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});rL.classes=mg;rL.displayName="@mantine/core/ModalOverlay";const Aze={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ec("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},Ize=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:vi(t),"--modal-size":Cn(n,"modal-size"),"--modal-y-offset":Ve(r),"--modal-x-offset":Ve(i)}}),iL=Ze((e,t)=>{const n=Le("ModalRoot",Aze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:g,...y}=n,b=Nt({name:g,classes:mg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ize});return w.jsx(wze,{value:{yOffset:l,scrollAreaComponent:c,getStyles:b,fullScreen:d},children:w.jsx(eve,{ref:t,...b("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...y})})});iL.classes=mg;iL.displayName="@mantine/core/ModalRoot";const kze={},sL=Ze((e,t)=>{const n=Le("ModalTitle",kze,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Xx();return w.jsx(Oq,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});sL.classes=mg;sL.displayName="@mantine/core/ModalTitle";const Rze={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Ec("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},ls=Ze((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Le("Modal",Rze,e),c=!!n||s;return w.jsxs(iL,{ref:t,radius:u,...l,children:[r&&w.jsx(rL,{...i}),w.jsxs(tL,{radius:u,children:[c&&w.jsxs(nL,{children:[n&&w.jsx(sL,{children:n}),s&&w.jsx(eL,{...o})]}),w.jsx(Z$,{children:a})]})]})});ls.classes=mg;ls.displayName="@mantine/core/Modal";ls.Root=iL;ls.Overlay=rL;ls.Content=tL;ls.Body=Z$;ls.Header=nL;ls.Title=sL;ls.CloseButton=eL;const[Nze,EW]=jx(),[Pze,Dze]=jx();var oL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const Oze={},Mze=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Cn(t):Cn(n,"pg-gap")}}),xW=Ze((e,t)=>{const n=Le("PillGroup",Oze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=EW(),h=(d==null?void 0:d.size)||l||void 0,p=Nt({name:"PillGroup",classes:oL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Mze,stylesCtx:{size:h},rootSelector:"group"});return w.jsx(Pze,{value:{size:h,disabled:c},children:w.jsx(De,{ref:t,size:h,...p("group"),...f})})});xW.classes=oL;xW.displayName="@mantine/core/PillGroup";const $ze={variant:"default"},Lze=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Cn(n,"pill-fz"),"--pill-height":Cn(n,"pill-height"),"--pill-radius":t===void 0?void 0:vi(t)}}),X2=Ze((e,t)=>{const n=Le("Pill",$ze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:g,disabled:y,mod:b,..._}=n,E=Dze(),C=EW(),x=g||(E==null?void 0:E.size)||void 0,T=(C==null?void 0:C.variant)==="filled"?"contrast":l||"default",A=Nt({name:"Pill",classes:oL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Lze,stylesCtx:{size:x}});return w.jsxs(De,{component:"span",ref:t,variant:T,size:x,...A("root",{variant:T}),mod:[{"with-remove":f&&!y,disabled:y||(E==null?void 0:E.disabled)},b],..._,children:[w.jsx("span",{...A("label"),children:c}),f&&w.jsx(dg,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...A("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:k=>{var N;k.preventDefault(),k.stopPropagation(),(N=h==null?void 0:h.onMouseDown)==null||N.call(h,k)},onClick:k=>{var N;k.stopPropagation(),d==null||d(),(N=h==null?void 0:h.onClick)==null||N.call(h,k)}})]})});X2.classes=oL;X2.displayName="@mantine/core/Pill";X2.Group=xW;var Uve={field:"m_45c4369d"};const Fze={type:"visible"},SW=Ze((e,t)=>{const n=Le("PillsInputField",Fze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,g=EW(),y=qx(),b=Nt({name:"PillsInputField",classes:Uve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),_=c||(g==null?void 0:g.disabled);return w.jsx(De,{component:"input",ref:Ls(t,g==null?void 0:g.fieldRef),"data-type":l,disabled:_,mod:[{disabled:_,pointer:d},h],...b("field"),...p,id:(y==null?void 0:y.inputId)||f,"aria-invalid":g==null?void 0:g.hasError,"aria-describedby":y==null?void 0:y.describedBy,type:"text",onMouseDown:E=>!d&&E.stopPropagation()})});SW.classes=Uve;SW.displayName="@mantine/core/PillsInputField";const jze={},SO=Ze((e,t)=>{const n=Le("PillsInput",jze,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=O.useRef();return w.jsx(Nze,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:w.jsx(wf,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});SO.displayName="@mantine/core/PillsInput";SO.Field=SW;function Bze({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(PE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const Uze={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},TW=Ze((e,t)=>{const n=Le("MultiSelect",Uze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:g,dropdownOpened:y,defaultDropdownOpened:b,onDropdownOpen:_,onDropdownClose:E,selectFirstOptionOnChange:C,onOptionSubmit:x,comboboxProps:T,filter:A,limit:k,withScrollArea:N,maxDropdownHeight:P,searchValue:D,defaultSearchValue:j,onSearchChange:M,readOnly:B,disabled:V,onFocus:z,onBlur:G,onPaste:Y,radius:Q,rightSection:L,rightSectionWidth:U,rightSectionPointerEvents:K,rightSectionProps:q,leftSection:X,leftSectionWidth:Z,leftSectionPointerEvents:ae,leftSectionProps:he,inputContainer:ge,inputWrapperOrder:be,withAsterisk:Ce,labelProps:oe,descriptionProps:re,errorProps:xe,wrapperProps:Re,description:Ke,label:Qe,error:ke,maxValues:Ue,searchable:rt,nothingFoundMessage:ft,withCheckIcon:Rt,checkIconPosition:st,hidePickedOptions:Ie,withErrorStyles:kt,name:Ot,form:Ne,id:ze,clearable:ot,clearButtonProps:St,hiddenInputProps:$t,placeholder:Vn,hiddenInputValuesDivider:Yr,required:tr,mod:vr,renderOption:Fn,onRemove:Un,onClear:ur,scrollAreaProps:lr,...Us}=n,Si=Ka(ze),kn=fve(g),ii=Yq(kn),Mr=sW({opened:y,defaultOpened:b,onDropdownOpen:_,onDropdownClose:()=>{E==null||E(),Mr.resetSelectedOption()}}),{styleProps:is,rest:{type:Tc,autoComplete:ba,...Ol}}=$b(Us),[Tr,Ti]=eo({value:c,defaultValue:f,finalValue:[],onChange:d}),[$r,xo]=eo({value:D,defaultValue:j,finalValue:"",onChange:M}),Cs=Nt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ko,resolvedStyles:ye}=lg({props:n,styles:o,classNames:r}),ce=wt=>{h==null||h(wt),wt.key===" "&&!rt&&(wt.preventDefault(),Mr.toggleDropdown()),wt.key==="Backspace"&&$r.length===0&&Tr.length>0&&(Un==null||Un(Tr[Tr.length-1]),Ti(Tr.slice(0,Tr.length-1)))},_e=Tr.map((wt,Bt)=>{var en,Qn;return w.jsx(X2,{withRemoveButton:!B&&!((en=ii[wt])!=null&&en.disabled),onRemove:()=>{Ti(Tr.filter(nr=>wt!==nr)),Un==null||Un(wt)},unstyled:a,disabled:V,...Cs("pill"),children:((Qn=ii[wt])==null?void 0:Qn.label)||wt},`${wt}-${Bt}`)});O.useEffect(()=>{C&&Mr.selectFirstOption()},[C,Tr]);const je=ot&&Tr.length>0&&!V&&!B&&w.jsx(Er.ClearButton,{size:l,...St,onClear:()=>{ur==null||ur(),Ti([]),xo("")}}),Be=Bze({data:kn,value:Tr});return w.jsxs(w.Fragment,{children:[w.jsxs(Er,{store:Mr,classNames:Ko,styles:ye,unstyled:a,size:l,readOnly:B,__staticSelector:"MultiSelect",onOptionSubmit:wt=>{x==null||x(wt),xo(""),Mr.updateSelectedOptionIndex("selected"),Tr.includes(ii[wt].value)?(Ti(Tr.filter(Bt=>Bt!==ii[wt].value)),Un==null||Un(ii[wt].value)):Tr.length<Ue&&Ti([...Tr,ii[wt].value])},...T,children:[w.jsx(Er.DropdownTarget,{children:w.jsx(SO,{...is,__staticSelector:"MultiSelect",classNames:Ko,styles:ye,unstyled:a,size:l,className:i,style:s,variant:p,disabled:V,radius:Q,rightSection:L||je||w.jsx(Er.Chevron,{size:l,error:ke,unstyled:a}),rightSectionPointerEvents:K||(je?"all":"none"),rightSectionWidth:U,rightSectionProps:q,leftSection:X,leftSectionWidth:Z,leftSectionPointerEvents:ae,leftSectionProps:he,inputContainer:ge,inputWrapperOrder:be,withAsterisk:Ce,labelProps:oe,descriptionProps:re,errorProps:xe,wrapperProps:Re,description:Ke,label:Qe,error:ke,multiline:!0,withErrorStyles:kt,__stylesApiProps:{...n,rightSectionPointerEvents:K||(je?"all":"none"),multiline:!0},pointer:!rt,onClick:()=>rt?Mr.openDropdown():Mr.toggleDropdown(),"data-expanded":Mr.dropdownOpened||void 0,id:Si,required:tr,mod:vr,children:w.jsxs(X2.Group,{disabled:V,unstyled:a,...Cs("pillsList"),children:[_e,w.jsx(Er.EventsTarget,{autoComplete:ba,children:w.jsx(SO.Field,{...Ol,ref:t,id:Si,placeholder:Vn,type:!rt&&!Vn?"hidden":"visible",...Cs("inputField"),unstyled:a,onFocus:wt=>{z==null||z(wt),rt&&Mr.openDropdown()},onBlur:wt=>{G==null||G(wt),Mr.closeDropdown(),xo("")},onKeyDown:ce,value:$r,onChange:wt=>{xo(wt.currentTarget.value),rt&&Mr.openDropdown(),C&&Mr.selectFirstOption()},disabled:V,readOnly:B||!rt,pointer:!rt})})]})})}),w.jsx(kve,{data:Ie?Be:kn,hidden:B||V,filter:A,search:$r,limit:k,hiddenWhenEmpty:!rt||!ft||Ie&&Be.length===0&&$r.trim().length===0,withScrollArea:N,maxDropdownHeight:P,filterOptions:rt,value:Tr,checkIconPosition:st,withCheckIcon:Rt,nothingFoundMessage:ft,unstyled:a,labelId:Qe?`${Si}-label`:void 0,"aria-label":Qe?void 0:Us["aria-label"],renderOption:Fn,scrollAreaProps:lr})]}),w.jsx(Er.HiddenInput,{name:Ot,valuesDivider:Yr,value:Tr,form:Ne,disabled:V,...$t})]})});TW.classes={...wf.classes,...Er.classes};TW.displayName="@mantine/core/MultiSelect";var zve={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const zze={},Vze=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Ps(r)}}},aL=_o((e,t)=>{const n=Le("NavLink",zze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:g,leftSection:y,rightSection:b,label:_,description:E,disableRightSectionRotation:C,noWrap:x,childrenOffset:T,onKeyDown:A,autoContrast:k,mod:N,...P}=n,D=Nt({name:"NavLink",props:n,classes:zve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Vze}),[j,M]=eo({value:l,defaultValue:c,finalValue:!1,onChange:f}),B=!!d,V=z=>{h==null||h(z),B&&(z.preventDefault(),M(!j))};return w.jsxs(w.Fragment,{children:[w.jsxs(Zs,{...D("root"),component:"a",ref:t,onClick:V,onKeyDown:z=>{A==null||A(z),z.nativeEvent.code==="Space"&&B&&(z.preventDefault(),M(!j))},unstyled:a,mod:[{disabled:g,active:p,expanded:j},N],...P,children:[y&&w.jsx(De,{component:"span",...D("section"),mod:{position:"left"},children:y}),w.jsxs(De,{...D("body"),mod:{"no-wrap":x},children:[w.jsx(De,{component:"span",...D("label"),children:_}),w.jsx(De,{component:"span",mod:{active:p},...D("description"),children:E})]}),(B||b)&&w.jsx(De,{...D("section"),component:"span",mod:{rotate:j&&!C,position:"right"},children:B?b||w.jsx(NE,{...D("chevron")}):b})]}),w.jsx(M$,{in:j,...D("collapse"),children:w.jsx("div",{...D("children"),children:d})})]})});aL.classes=zve;aL.displayName="@mantine/core/NavLink";var Vve={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const Hze={withCloseButton:!0},qze=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:vi(t),"--notification-color":n?di(n,e):void 0}}),CW=Ze((e,t)=>{const n=Le("Notification",Hze,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:g,styles:y,unstyled:b,variant:_,vars:E,mod:C,...x}=n,T=Nt({name:"Notification",classes:Vve,props:n,className:r,style:g,classNames:p,styles:y,unstyled:b,vars:E,varsResolver:qze});return w.jsxs(De,{...T("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},C],ref:t,variant:_,...x,role:"alert",children:[c&&!o&&w.jsx("div",{...T("icon"),children:c}),o&&w.jsx(bf,{size:28,color:i,...T("loader")}),w.jsxs("div",{...T("body"),children:[l&&w.jsx("div",{...T("title"),children:l}),w.jsx(De,{...T("description"),mod:{"data-with-title":!!l},children:f})]}),a&&w.jsx(dg,{iconSize:16,color:"gray",...h,unstyled:b,onClick:d,...T("closeButton")})]})});CW.classes=Vve;CW.displayName="@mantine/core/Notification";function Hve(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var Q2;(function(e){e.event="event",e.props="prop"})(Q2||(Q2={}));function v0(){}function Wze(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function J2(e){return!!(e||"").match(/\d/)}function Zw(e){return e==null}function Gze(e){return typeof e=="number"&&isNaN(e)}function qve(e){return Zw(e)||Gze(e)||typeof e=="number"&&!isFinite(e)}function Wve(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Yze(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Kze(e,t,n){var r=Yze(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function Xze(e){var t=O.useRef(e);t.current=e;var n=O.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function AW(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function Qze(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function Gve(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Ese(e,t){return Array(t+1).join(e)}function Yve(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Ese("0",Math.abs(o))+i:o>=a?i=i+Ese("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function xse(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=AW(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(g,y,b){return g.length>b?(Number(g[0])+Number(y)).toString()+g.substring(1,g.length):y+g},c[0]));var d=Gve(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function l1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Kve=Wze(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),Jze=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function Zze(e,t,n){return Math.min(Math.max(e,t),n)}function Xj(e){return Math.max(e.selectionStart,e.selectionEnd)}function eVe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function tVe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function nVe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function rVe(e,t,n,r,i,s,o){o===void 0&&(o=nVe);var a=i.findIndex(function(C){return C}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,g=c;p<g;p++){var y=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(y&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var b=r;b<l&&(d[b]===-1||!s(n[b]));)b++;var _=b===l||d[b]===-1?c:d[b];for(b=r-1;b>0&&d[b]===-1;)b--;var E=b===-1||d[b]===-1?0:d[b]+1;return E>_?_:r-E<_-r?E:_}function Sse(e,t,n,r){var i=e.length;if(t=Zze(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function iVe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(J2(e[n])||J2(e[n-1]));return t}function Xve(e,t,n,r,i,s){s===void 0&&(s=v0);var o=Xze(function(p,g){var y,b;return qve(p)?(b="",y=""):typeof p=="number"||g?(b=typeof p=="number"?Yve(p):p,y=r(b)):(b=i(p,void 0),y=r(b)),{formattedValue:y,numAsString:b}}),a=O.useState(function(){return o(Zw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,g){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,g)},f=e,d=n;Zw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return O.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function sVe(e){return e.replace(/[^0-9]/g,"")}function oVe(e){return e}function aVe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=oVe);var a=e.removeFormatting;a===void 0&&(a=sVe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=v0);var h=e.onKeyDown;h===void 0&&(h=v0);var p=e.onMouseUp;p===void 0&&(p=v0);var g=e.onFocus;g===void 0&&(g=v0);var y=e.onBlur;y===void 0&&(y=v0);var b=e.value,_=e.getCaretBoundary;_===void 0&&(_=iVe);var E=e.isValidInputCharacter;E===void 0&&(E=J2);var C=e.isCharacterSame,x=Hve(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=Xve(b,u,!!l,o,a,c),A=T[0],k=A.formattedValue,N=A.numAsString,P=T[1],D=O.useRef(),j=O.useRef({formattedValue:k,numAsString:N}),M=function(ke,Ue){j.current={formattedValue:ke.formattedValue,numAsString:ke.value},P(ke,Ue)},B=O.useState(!1),V=B[0],z=B[1],G=O.useRef(null),Y=O.useRef({setCaretTimeout:null,focusTimeout:null});O.useEffect(function(){return z(!0),function(){clearTimeout(Y.current.setCaretTimeout),clearTimeout(Y.current.focusTimeout)}},[]);var Q=o,L=function(ke,Ue){var rt=parseFloat(Ue);return{formattedValue:ke,value:Ue,floatValue:isNaN(rt)?void 0:rt}},U=function(ke,Ue,rt){ke.selectionStart===0&&ke.selectionEnd===ke.value.length||(l1(ke,Ue),Y.current.setCaretTimeout=setTimeout(function(){ke.value===rt&&ke.selectionStart!==Ue&&l1(ke,Ue)},0))},K=function(ke,Ue,rt){return Sse(ke,Ue,_(ke),rt)},q=function(ke,Ue,rt){var ft=_(Ue),Rt=rVe(Ue,k,ke,rt,ft,E,C);return Rt=Sse(Ue,Rt,ft),Rt},X=function(ke){var Ue=ke.formattedValue;Ue===void 0&&(Ue="");var rt=ke.input,ft=ke.source,Rt=ke.event,st=ke.numAsString,Ie;if(rt){var kt=ke.inputValue||rt.value,Ot=Xj(rt);rt.value=Ue,Ie=q(kt,Ue,Ot),Ie!==void 0&&U(rt,Ie,Ue)}Ue!==k&&M(L(Ue,st),{event:Rt,source:ft})};O.useEffect(function(){var ke=j.current,Ue=ke.formattedValue,rt=ke.numAsString;(k!==Ue||N!==rt)&&M(L(k,N),{event:void 0,source:Q2.props})},[k,N]);var Z=G.current?Xj(G.current):void 0,ae=typeof window<"u"?O.useLayoutEffect:O.useEffect;ae(function(){var ke=G.current;if(k!==j.current.formattedValue&&ke){var Ue=q(j.current.formattedValue,k,Z);ke.value=k,U(ke,Ue,k)}},[k]);var he=function(ke,Ue,rt){var ft=Ue.target,Rt=D.current?Jze(D.current,ft.selectionEnd):Kve(k,ke),st=Object.assign(Object.assign({},Rt),{lastValue:k}),Ie=a(ke,st),kt=Q(Ie);if(Ie=a(kt,void 0),f&&!f(L(kt,Ie))){var Ot=Ue.target,Ne=Xj(Ot),ze=q(ke,k,Ne);return Ot.value=k,U(Ot,ze,k),!1}return X({formattedValue:kt,numAsString:Ie,inputValue:ke,event:Ue,source:rt,input:Ue.target}),!0},ge=function(ke,Ue){Ue===void 0&&(Ue=0);var rt=ke.selectionStart,ft=ke.selectionEnd;D.current={selectionStart:rt,selectionEnd:ft+Ue}},be=function(ke){var Ue=ke.target,rt=Ue.value,ft=he(rt,ke,Q2.event);ft&&d(ke),D.current=void 0},Ce=function(ke){var Ue=ke.target,rt=ke.key,ft=Ue.selectionStart,Rt=Ue.selectionEnd,st=Ue.value;st===void 0&&(st="");var Ie;rt==="ArrowLeft"||rt==="Backspace"?Ie=Math.max(ft-1,0):rt==="ArrowRight"?Ie=Math.min(ft+1,st.length):rt==="Delete"&&(Ie=ft);var kt=0;rt==="Delete"&&ft===Rt&&(kt=1);var Ot=rt==="ArrowLeft"||rt==="ArrowRight";if(Ie===void 0||ft!==Rt&&!Ot){h(ke),ge(Ue,kt);return}var Ne=Ie;if(Ot){var ze=rt==="ArrowLeft"?"left":"right";Ne=K(st,Ie,ze),Ne!==Ie&&ke.preventDefault()}else rt==="Delete"&&!E(st[Ie])?Ne=K(st,Ie,"right"):rt==="Backspace"&&!E(st[Ie])&&(Ne=K(st,Ie,"left"));Ne!==Ie&&U(Ue,Ne,st),h(ke),ge(Ue,kt)},oe=function(ke){var Ue=ke.target,rt=function(){var ft=Ue.selectionStart,Rt=Ue.selectionEnd,st=Ue.value;if(st===void 0&&(st=""),ft===Rt){var Ie=K(st,ft);Ie!==ft&&U(Ue,Ie,st)}};rt(),requestAnimationFrame(function(){rt()}),p(ke),ge(Ue)},re=function(ke){ke.persist&&ke.persist();var Ue=ke.target,rt=ke.currentTarget;G.current=Ue,Y.current.focusTimeout=setTimeout(function(){var ft=Ue.selectionStart,Rt=Ue.selectionEnd,st=Ue.value;st===void 0&&(st="");var Ie=K(st,ft);Ie!==ft&&!(ft===0&&Rt===st.length)&&U(Ue,Ie,st),g(Object.assign(Object.assign({},ke),{currentTarget:rt}))},0)},xe=function(ke){G.current=null,clearTimeout(Y.current.focusTimeout),clearTimeout(Y.current.setCaretTimeout),y(ke)},Re=V&&eVe()?"numeric":void 0,Ke=Object.assign({inputMode:Re},x,{type:t,value:k,onChange:be,onKeyDown:Ce,onMouseUp:oe,onFocus:re,onBlur:xe});if(n==="text")return i?Jr.createElement(Jr.Fragment,null,i(k,x)||null):Jr.createElement("span",Object.assign({},x,{ref:s}),k);if(r){var Qe=r;return Jr.createElement(Qe,Object.assign({},Ke,{ref:s}))}return Jr.createElement("input",Object.assign({},Ke,{ref:s}))}function Tse(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=uL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=AW(e,o),h=d.beforeDecimal,p=d.afterDecimal,g=d.addNegation;return n!==void 0&&(p=Gve(p,n,!!r)),l&&(h=Kze(h,l,a)),i&&(h=i+h),s&&(p=p+s),g&&(h="-"+h),e=h+(f&&c||"")+p,e}function uL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function uVe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function lVe(e,t){return new RegExp("(^-)|[0-9]|"+Wve(e),"g")}function cVe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function fVe(e,t,n){var r;t===void 0&&(t=tVe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=uL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,g=e[f]===p;if(J2(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var y=a===0?"":p;e=e.substring(0,c)+y+e.substring(c+1,e.length)}var b=function(G,Y,Q){var L=!1,U=!1;s.startsWith("-")?L=!1:G.startsWith("--")?(L=!1,U=!0):o.startsWith("-")&&G.length===o.length?L=!1:G[0]==="-"&&(L=!0);var K=L?1:0;return U&&(K=2),K&&(G=G.substring(K),Y-=K,Q-=K),{value:G,start:Y,end:Q,hasNegation:L}},_=b(e,c,f),E=_.hasNegation;r=_,e=r.value,c=r.start,f=r.end;var C=b(t.lastValue,u.start,u.end),x=C.start,T=C.end,A=C.value,k=e.substring(c,f);e.length&&A.length&&(x>A.length-o.length||T<s.length)&&!(k&&o.startsWith(k))&&(e=A);var N=0;e.startsWith(s)?N+=s.length:c<s.length&&(N=c),e=e.substring(N),f-=N;var P=e.length,D=e.length-o.length;e.endsWith(o)?P=D:(f>D||f>e.length-o.length)&&(P=f),e=e.substring(0,P),e=uVe(E?"-"+e:e,i),e=(e.match(lVe(p))||[]).join("");var j=e.indexOf(p);e=e.replace(new RegExp(Wve(p),"g"),function(G,Y){return Y===j?".":""});var M=AW(e,i),B=M.beforeDecimal,V=M.afterDecimal,z=M.addNegation;return l.end-l.start<u.end-u.start&&B===""&&g&&!parseFloat(V)&&(e=z?"-":""),e}function dVe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function hVe(e){var t=uL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function pVe(e){e=hVe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=v0);var s=e.onBlur;s===void 0&&(s=v0);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=Hve(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),g=uL(e),y=g.decimalSeparator,b=g.allowedDecimalSeparators,_=function(z){return Tse(z,e)},E=function(z,G){return fVe(z,G,e)},C=Zw(f)?c:f,x=d??cVe(C,l,t);Zw(f)?Zw(c)||(x=x||typeof c=="number"):x=x||typeof f=="number";var T=function(z){return qve(z)?z:(typeof z=="number"&&(z=Yve(z)),x&&typeof a=="number"?xse(z,a,!!u):z)},A=Xve(T(f),T(c),!!x,_,E,h),k=A[0],N=k.numAsString,P=k.formattedValue,D=A[1],j=function(z){var G=z.target,Y=z.key,Q=G.selectionStart,L=G.selectionEnd,U=G.value;if(U===void 0&&(U=""),(Y==="Backspace"||Y==="Delete")&&L<l.length){z.preventDefault();return}if(Q!==L){i(z);return}Y==="Backspace"&&U[0]==="-"&&Q===l.length+1&&n&&l1(G,1),a&&u&&(Y==="Backspace"&&U[Q-1]===y?(l1(G,Q-1),z.preventDefault()):Y==="Delete"&&U[Q]===y&&z.preventDefault()),b!=null&&b.includes(Y)&&U[Q]===y&&l1(G,Q+1);var K=o===!0?",":o;Y==="Backspace"&&U[Q-1]===K&&l1(G,Q-1),Y==="Delete"&&U[Q]===K&&l1(G,Q+1),i(z)},M=function(z){var G=N;if(G.match(/\d/g)||(G=""),r||(G=Qze(G)),u&&a&&(G=xse(G,a,u)),G!==N){var Y=Tse(G,e);D({formattedValue:Y,value:G,floatValue:parseFloat(G)},{event:z,source:Q2.event})}s(z)},B=function(z){return z===y?!0:J2(z)},V=function(z){var G=z.currentValue,Y=z.lastValue,Q=z.formattedValue,L=z.currentValueIndex,U=z.formattedValueIndex,K=G[L],q=Q[U],X=Kve(Y,G),Z=X.to;return L>=Z.start&&L<Z.end&&b&&b.includes(K)&&q===y?!0:K===q};return Object.assign(Object.assign({},p),{value:P,valueIsNumericString:!1,isValidInputCharacter:B,isCharacterSame:V,onValueChange:D,format:_,removeFormatting:E,getCaretBoundary:function(z){return dVe(z,e)},onKeyDown:j,onBlur:M})}function mVe(e){var t=pVe(e);return Jr.createElement(aVe,Object.assign({},t))}function Cse({direction:e,style:t,...n}){return w.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:w.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var PU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const gVe=/^(0\.0*|-0(\.0*)?)$/,yVe=/^-?0\d+(\.\d+)?\.?$/;function vVe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Ase(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const bVe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},_Ve=(e,{size:t})=>({controls:{"--ni-chevron-size":Cn(t,"ni-chevron-size")}}),IW=Ze((e,t)=>{const n=Le("NumberInput",bVe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:g,rightSection:y,isAllowed:b,clampBehavior:_,onBlur:E,allowDecimal:C,decimalScale:x,onKeyDown:T,onKeyDownCapture:A,handlersRef:k,startValue:N,disabled:P,rightSectionPointerEvents:D,allowNegative:j,readOnly:M,size:B,rightSectionWidth:V,stepHoldInterval:z,stepHoldDelay:G,allowLeadingZeros:Y,withKeyboardEvents:Q,trimLeadingZeroesOnBlur:L,...U}=n,K=Nt({name:"NumberInput",classes:PU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:_Ve}),{resolvedClassNames:q,resolvedStyles:X}=lg({classNames:i,styles:s,props:n}),[Z,ae]=eo({value:c,defaultValue:f,onChange:u}),he=G!==void 0&&z!==void 0,ge=O.useRef(null),be=O.useRef(null),Ce=O.useRef(0),oe=(Ie,kt)=>{kt.source==="event"&&ae(vVe(Ie.floatValue)&&!gVe.test(Ie.value)&&!(Y&&yVe.test(Ie.value))?Ie.floatValue:Ie.value),l==null||l(Ie,kt)},re=Ie=>{const kt=String(Ie).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return kt?Math.max(0,(kt[1]?kt[1].length:0)-(kt[2]?+kt[2]:0)):0},xe=Ie=>{ge.current&&typeof Ie<"u"&&ge.current.setSelectionRange(Ie,Ie)},Re=O.useRef();Re.current=()=>{let Ie;const kt=re(Z),Ot=re(p),Ne=Math.max(kt,Ot),ze=10**Ne;if(typeof Z!="number"||Number.isNaN(Z))Ie=Ch(N,h,d);else if(d!==void 0){const St=(Math.round(Z*ze)+Math.round(p*ze))/ze;Ie=St<=d?St:d}else Ie=(Math.round(Z*ze)+Math.round(p*ze))/ze;const ot=Ie.toFixed(Ne);ae(parseFloat(ot)),l==null||l({floatValue:parseFloat(ot),formattedValue:ot,value:ot},{source:"increment"}),setTimeout(()=>{var St;return xe((St=ge.current)==null?void 0:St.value.length)},0)};const Ke=O.useRef();Ke.current=()=>{let Ie;const kt=h!==void 0?h:j?Number.MIN_SAFE_INTEGER:0,Ot=re(Z),Ne=re(p),ze=Math.max(Ot,Ne),ot=10**ze;if(typeof Z!="number"||Number.isNaN(Z))Ie=Ch(N,kt,d);else{const $t=(Math.round(Z*ot)-Math.round(p*ot))/ot;Ie=kt!==void 0&&$t<kt?kt:$t}const St=Ie.toFixed(ze);ae(parseFloat(St)),l==null||l({floatValue:parseFloat(St),formattedValue:St,value:St},{source:"decrement"}),setTimeout(()=>{var $t;return xe(($t=ge.current)==null?void 0:$t.value.length)},0)};const Qe=Ie=>{T==null||T(Ie),!(M||!Q)&&(Ie.key==="ArrowUp"&&(Ie.preventDefault(),Re.current()),Ie.key==="ArrowDown"&&(Ie.preventDefault(),Ke.current()))},ke=Ie=>{if(A==null||A(Ie),Ie.key==="Backspace"){const kt=ge.current;kt.selectionStart===0&&kt.selectionStart===kt.selectionEnd&&(Ie.preventDefault(),window.setTimeout(()=>xe(0),0))}};nq(k,{increment:Re.current,decrement:Ke.current});const Ue=Ie=>{Ie?Re.current():Ke.current(),Ce.current+=1},rt=Ie=>{if(Ue(Ie),he){const kt=typeof z=="number"?z:z(Ce.current);be.current=window.setTimeout(()=>rt(Ie),kt)}},ft=(Ie,kt)=>{var Ot;Ie.preventDefault(),(Ot=ge.current)==null||Ot.focus(),Ue(kt),he&&(be.current=window.setTimeout(()=>rt(kt),G))},Rt=()=>{be.current&&window.clearTimeout(be.current),be.current=null,Ce.current=0},st=w.jsxs("div",{...K("controls"),children:[w.jsx(Zs,{...K("control"),tabIndex:-1,"aria-hidden":!0,disabled:P||typeof Z=="number"&&d!==void 0&&Z>=d,mod:{direction:"up"},onMouseDown:Ie=>Ie.preventDefault(),onPointerDown:Ie=>{ft(Ie,!0)},onPointerUp:Rt,onPointerLeave:Rt,children:w.jsx(Cse,{direction:"up"})}),w.jsx(Zs,{...K("control"),tabIndex:-1,"aria-hidden":!0,disabled:P||typeof Z=="number"&&h!==void 0&&Z<=h,mod:{direction:"down"},onMouseDown:Ie=>Ie.preventDefault(),onPointerDown:Ie=>{ft(Ie,!1)},onPointerUp:Rt,onPointerLeave:Rt,children:w.jsx(Cse,{direction:"down"})})]});return w.jsx(wf,{component:mVe,allowNegative:j,className:xs(PU.root,r),size:B,...U,readOnly:M,disabled:P,value:Z,getInputRef:Ls(t,ge),onValueChange:oe,rightSection:g||M?y:y||st,classNames:q,styles:X,unstyled:o,__staticSelector:"NumberInput",decimalScale:C?x:0,onKeyDown:Qe,onKeyDownCapture:ke,rightSectionPointerEvents:D??(P?"none":void 0),rightSectionWidth:V??`var(--ni-right-section-width-${B||"sm"})`,allowLeadingZeros:Y,onBlur:Ie=>{if(E==null||E(Ie),_==="blur"&&typeof Z=="number"&&Ch(Z,h,d)!==Z&&ae(Ch(Z,h,d)),L&&typeof Z=="string"){const kt=Z.replace(/^0+/,""),Ot=parseFloat(kt);ae(Number.isNaN(Ot)?kt:Ot)}},isAllowed:Ie=>_==="strict"?b?b(Ie)&&Ase(Ie.floatValue,h,d):Ase(Ie.floatValue,h,d):b?b(Ie):!0})});IW.classes={...wf.classes,...PU};IW.displayName="@mantine/core/NumberInput";const[wVe,Qve]=Wo("Progress.Root component was not found in tree");var TI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const EVe={},kW=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Le("ProgressLabel",EVe,e),u=Qve();return w.jsx(De,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});kW.classes=TI;kW.displayName="@mantine/core/ProgressLabel";const xVe={},SVe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Cn(t,"progress-size"),"--progress-radius":n===void 0?void 0:vi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),lL=Ze((e,t)=>{const n=Le("ProgressRoot",xVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Nt({name:"Progress",classes:TI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SVe});return w.jsx(wVe,{value:{getStyles:d,autoContrast:l},children:w.jsx(De,{ref:t,...d("root"),...f})})});lL.classes=TI;lL.displayName="@mantine/core/ProgressRoot";const TVe={withAria:!0},cL=Ze((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Le("ProgressSection",TVe,e),p=Qve(),g=Fs(),y=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return w.jsx(De,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...y,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":di(l,g),"--progress-label-color":Bx(p.autoContrast,g)?zy({color:l,theme:g,autoContrast:p.autoContrast}):void 0}})});cL.classes=TI;cL.displayName="@mantine/core/ProgressSection";const CVe={},Qx=Ze((e,t)=>{const n=Le("Progress",CVe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=lg({classNames:i,styles:s,props:n});return w.jsx(lL,{ref:t,classNames:d,styles:h,vars:o,...f,children:w.jsx(cL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});Qx.classes=TI;Qx.displayName="@mantine/core/Progress";Qx.Section=cL;Qx.Root=lL;Qx.Label=kW;const[AVe,Jve]=jx(),[IVe,kVe]=jx();var Zve={card:"m_9dc8ae12"};const RVe={withBorder:!0},NVe=(e,{radius:t})=>({card:{"--card-radius":vi(t)}}),RW=Ze((e,t)=>{const n=Le("RadioCard",RVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:g,...y}=n,b=Nt({name:"RadioCard",classes:Zve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NVe,rootSelector:"card"}),{dir:_}=hp(),E=Jve(),C=typeof l=="boolean"?l:(E==null?void 0:E.value)===d||!1,x=p||(E==null?void 0:E.name),T=A=>{if(g==null||g(A),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(A.nativeEvent.code)){A.preventDefault();const k=Array.from(document.querySelectorAll(`[role="radio"][name="${x||"__mantine"}"]`)),N=k.findIndex(j=>j===A.target),P=N+1>=k.length?0:N+1,D=N-1<0?k.length-1:N-1;A.nativeEvent.code==="ArrowDown"&&(k[P].focus(),k[P].click()),A.nativeEvent.code==="ArrowUp"&&(k[D].focus(),k[D].click()),A.nativeEvent.code==="ArrowLeft"&&(k[_==="ltr"?D:P].focus(),k[_==="ltr"?D:P].click()),A.nativeEvent.code==="ArrowRight"&&(k[_==="ltr"?P:D].focus(),k[_==="ltr"?P:D].click())}};return w.jsx(IVe,{value:{checked:C},children:w.jsx(Zs,{ref:t,mod:[{"with-border":f,checked:C},c],...b("card"),...y,role:"radio","aria-checked":C,name:x,onClick:A=>{h==null||h(A),E==null||E.onChange(d||"")},onKeyDown:T})})});RW.displayName="@mantine/core/RadioCard";RW.classes=Zve;const PVe={},NW=Ze((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Le("RadioGroup",PVe,e),f=Ka(u),[d,h]=eo({value:n,defaultValue:r,finalValue:"",onChange:i}),p=g=>!l&&h(typeof g=="string"?g:g.currentTarget.value);return w.jsx(AVe,{value:{value:d,onChange:p,size:s,name:f},children:w.jsx(zi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:w.jsx(aW,{role:"radiogroup",children:a})})})});NW.classes=zi.Wrapper.classes;NW.displayName="@mantine/core/RadioGroup";function e1e({size:e,style:t,...n}){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ve(e),height:Ve(e),...t},"aria-hidden":!0,...n,children:w.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var t1e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const DVe={icon:e1e},OVe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=dp({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Cn(r,"radio-size"),"--radio-radius":t===void 0?void 0:vi(t),"--radio-color":s==="outline"?u:di(n,e),"--radio-icon-size":Cn(r,"radio-icon-size"),"--radio-icon-color":i?di(i,e):Bx(o,e)?zy({color:n,theme:e,autoContrast:o}):void 0}}},PW=Ze((e,t)=>{const n=Le("RadioIndicator",DVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:g,variant:y,disabled:b,..._}=n,E=l,C=Nt({name:"RadioIndicator",classes:t1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OVe,rootSelector:"indicator"}),x=kVe(),T=typeof p=="boolean"?p:(x==null?void 0:x.checked)||!1;return w.jsx(De,{ref:t,...C("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:b},g],..._,children:w.jsx(E,{...C("icon")})})});PW.displayName="@mantine/core/RadioIndicator";PW.classes=t1e;var n1e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const MVe={labelPosition:"right"},$Ve=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=dp({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Cn(t,"radio-size"),"--radio-radius":n===void 0?void 0:vi(n),"--radio-color":s==="outline"?u:di(r,e),"--radio-icon-color":i?di(i,e):Bx(o,e)?zy({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Cn(t,"radio-icon-size")}}},X1=Ze((e,t)=>{const n=Le("Radio",MVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:g,color:y,variant:b,disabled:_,wrapperProps:E,icon:C=e1e,rootRef:x,iconColor:T,onChange:A,mod:k,...N}=n,P=Nt({name:"Radio",classes:n1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$Ve}),D=Jve(),j=(D==null?void 0:D.size)??c,M=n.size?c:j,{styleProps:B,rest:V}=$b(N),z=Ka(l),G=D?{checked:D.value===V.value,name:V.name??D.name,onChange:Y=>{D.onChange(Y),A==null||A(Y)}}:{};return w.jsx(V$,{...P("root"),__staticSelector:"Radio",__stylesApiProps:n,id:z,size:M,labelPosition:d,label:f,description:h,error:p,disabled:_,classNames:r,styles:o,unstyled:a,"data-checked":G.checked||void 0,variant:b,ref:x,mod:k,...B,...E,children:w.jsxs(De,{...P("inner"),mod:{"label-position":d},children:[w.jsx(De,{...P("radio",{focusable:!0,variant:b}),onChange:A,...V,...G,component:"input",mod:{error:!!p},ref:t,id:z,disabled:_,type:"radio"}),w.jsx(C,{...P("icon"),"aria-hidden":!0})]})})});X1.classes=n1e;X1.displayName="@mantine/core/Radio";X1.Group=NW;X1.Card=RW;X1.Indicator=PW;const LVe={duration:100,transition:"fade"};function FVe(e,t){return{...LVe,...t,...e}}function jVe({offset:e,position:t}){const[n,r]=O.useState(!1),i=O.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=Cq({placement:t,middleware:[Eq({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=O.useCallback(({clientX:p,clientY:g})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:g,left:p+f,top:g+d,right:p,bottom:g}}})},[a.reference]);return O.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const g=km(u.floating.current);return g.forEach(y=>{y.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),g.forEach(y=>{y.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var fL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const BVe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Ec("popover")},UVe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:vi(t),"--tooltip-bg":n?di(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),DW=Ze((e,t)=>{const n=Le("TooltipFloating",BVe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:g,multiline:y,zIndex:b,disabled:_,variant:E,vars:C,portalProps:x,...T}=n,A=Fs(),k=Nt({name:"TooltipFloating",props:n,classes:fL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:C,varsResolver:UVe}),{handleMouseMove:N,x:P,y:D,opened:j,boundaryRef:M,floating:B,setOpened:V}=jVe({offset:p,position:g});if(!By(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const z=Ls(M,r.ref,t),G=Q=>{var L,U;(U=(L=r.props).onMouseEnter)==null||U.call(L,Q),N(Q),V(!0)},Y=Q=>{var L,U;(U=(L=r.props).onMouseLeave)==null||U.call(L,Q),V(!1)};return w.jsxs(w.Fragment,{children:[w.jsx(Hx,{...x,withinPortal:s,children:w.jsx(De,{...T,...k("tooltip",{style:{...uq(o,A),zIndex:b,display:!_&&j?"block":"none",top:(D&&Math.round(D))??"",left:(P&&Math.round(P))??""}}),variant:E,ref:B,mod:{multiline:y},children:h})}),O.cloneElement(r,{...r.props,[i]:z,onMouseEnter:G,onMouseLeave:Y})]})});DW.classes=fL;DW.displayName="@mantine/core/TooltipFloating";const r1e=O.createContext(!1),zVe=r1e.Provider,VVe=()=>O.useContext(r1e),HVe={openDelay:0,closeDelay:0};function i1e(e){const{openDelay:t,closeDelay:n,children:r}=Le("TooltipGroup",HVe,e);return w.jsx(zVe,{value:!0,children:w.jsx(F9e,{delay:{open:t,close:n},children:r})})}i1e.displayName="@mantine/core/TooltipGroup";function qVe(e){var T,A,k;const[t,n]=O.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=VVe(),o=Ka(),{delay:a,currentId:u,setCurrentId:l}=Uye(),c=O.useCallback(N=>{n(N),N&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:g,placement:y,middlewareData:{arrow:{x:b,y:_}={}}}=Cq({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[$ye(e.offset),Eq({padding:8}),AU(),Lye({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[IU()]:[]]}),{getReferenceProps:E,getFloatingProps:C}=q9e([L9e(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((A=e.events)!=null&&A.touch)}),H9e(h,{enabled:(k=e.events)==null?void 0:k.focus,visibleOnly:!0}),G9e(h,{role:"tooltip"}),z9e(h,{enabled:typeof e.opened>"u"}),j9e(h,{id:o})]);Yye({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:g}}),Gh(()=>{var N;(N=e.onPositionChange)==null||N.call(e,y)},[y]);const x=i&&u&&u!==o;return{x:f,y:d,arrowX:b,arrowY:_,reference:p.setReference,floating:p.setFloating,getFloatingProps:C,getReferenceProps:E,isGroupPhase:x,opened:i,placement:y}}const Ise={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Ec("popover"),positionDependencies:[]},WVe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:vi(t),"--tooltip-bg":n?di(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Li=Ze((e,t)=>{const n=Le("Tooltip",Ise,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:g,unstyled:y,style:b,className:_,withArrow:E,arrowSize:C,arrowOffset:x,arrowRadius:T,arrowPosition:A,offset:k,transitionProps:N,multiline:P,events:D,zIndex:j,disabled:M,positionDependencies:B,onClick:V,onMouseEnter:z,onMouseLeave:G,inline:Y,variant:Q,keepMounted:L,vars:U,portalProps:K,mod:q,floatingStrategy:X,...Z}=Le("Tooltip",Ise,n),{dir:ae}=hp(),he=O.useRef(null),ge=qVe({position:zye(ae,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:D,arrowRef:he,arrowOffset:x,offset:typeof k=="number"?k+(E?C/2:0):k,positionDependencies:[...B,r],inline:Y,strategy:X}),be=Nt({name:"Tooltip",props:n,classes:fL,className:_,style:b,classNames:p,styles:g,unstyled:y,rootSelector:"tooltip",vars:U,varsResolver:WVe});if(!By(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Ce=Ls(ge.reference,r.ref,t),oe=FVe(N,{duration:100,transition:"fade"});return w.jsxs(w.Fragment,{children:[w.jsx(Hx,{...K,withinPortal:f,children:w.jsx(fg,{...oe,keepMounted:L,mounted:!M&&!!ge.opened,duration:ge.isGroupPhase?10:oe.duration,children:re=>w.jsxs(De,{...Z,variant:Q,mod:[{multiline:P},q],...ge.getFloatingProps({ref:ge.floating,className:be("tooltip").className,style:{...be("tooltip").style,...re,zIndex:j,top:ge.y??0,left:ge.x??0}}),children:[o,w.jsx(Aq,{ref:he,arrowX:ge.arrowX,arrowY:ge.arrowY,visible:E,position:ge.placement,arrowSize:C,arrowOffset:x,arrowRadius:T,arrowPosition:A,...be("arrow")})]})})}),O.cloneElement(r,ge.getReferenceProps({onClick:V,onMouseEnter:z,onMouseLeave:G,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:Ce,className:xs(_,r.props.className),...r.props}))]})});Li.classes=fL;Li.displayName="@mantine/core/Tooltip";Li.Floating=DW;Li.Group=i1e;var s1e={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const GVe={withItemsBorders:!0},YVe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:vi(t),"--sc-color":n?di(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Cn(i,"sc-padding"),"--sc-font-size":zo(i)}}),dL=Ze((e,t)=>{var ae,he;const n=Le("SegmentedControl",GVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:g,readOnly:y,fullWidth:b,orientation:_,radius:E,color:C,transitionDuration:x,transitionTimingFunction:T,variant:A,autoContrast:k,withItemsBorders:N,mod:P,...D}=n,j=Nt({name:"SegmentedControl",props:n,classes:s1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YVe}),M=Fs(),B=l.map(ge=>typeof ge=="string"?{label:ge,value:ge}:ge),V=Y5e(),[z,G]=O.useState(null),[Y,Q]=O.useState({}),L=(ge,be)=>{Y[be]=ge,Q(Y)},[U,K]=eo({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ae=B.find(ge=>!ge.disabled))==null?void 0:ae.value)??((he=l[0])==null?void 0:he.value)??null:null,onChange:d}),q=Ka(p),X=B.map(ge=>O.createElement(De,{...j("control"),mod:{active:U===ge.value,orientation:_},key:ge.value},O.createElement("input",{...j("input"),disabled:g||ge.disabled,type:"radio",name:q,value:ge.value,id:`${q}-${ge.value}`,checked:U===ge.value,onChange:()=>!y&&K(ge.value),"data-focus-ring":M.focusRing,key:`${ge.value}-input`}),O.createElement(De,{component:"label",...j("label"),mod:{active:U===ge.value&&!(g||ge.disabled),disabled:g||ge.disabled,"read-only":y},htmlFor:`${q}-${ge.value}`,ref:be=>L(be,ge.value),__vars:{"--sc-label-color":C!==void 0?zy({color:C,theme:M,autoContrast:k}):void 0},key:`${ge.value}-label`},w.jsx("span",{...j("innerLabel"),children:ge.label})))),Z=Ls(t,ge=>G(ge));return l.length===0?null:w.jsxs(De,{...j("root"),variant:A,size:h,ref:Z,mod:[{"full-width":b,orientation:_,initialized:V,"with-items-borders":N},P],...D,role:"radiogroup",children:[typeof U=="string"&&w.jsx(Lq,{target:Y[U],parent:z,component:"span",transitionDuration:"var(--sc-transition-duration)",...j("indicator")}),X]})});dL.classes=s1e;dL.displayName="@mantine/core/SegmentedControl";const KVe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},CI=Ze((e,t)=>{const n=Le("Select",KVe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:g,value:y,defaultValue:b,selectFirstOptionOnChange:_,onOptionSubmit:E,comboboxProps:C,readOnly:x,disabled:T,filter:A,limit:k,withScrollArea:N,maxDropdownHeight:P,size:D,searchable:j,rightSection:M,checkIconPosition:B,withCheckIcon:V,nothingFoundMessage:z,name:G,form:Y,searchValue:Q,defaultSearchValue:L,onSearchChange:U,allowDeselect:K,error:q,rightSectionPointerEvents:X,id:Z,clearable:ae,clearButtonProps:he,hiddenInputProps:ge,renderOption:be,onClear:Ce,autoComplete:oe,scrollAreaProps:re,...xe}=n,Re=O.useMemo(()=>fve(g),[g]),Ke=O.useMemo(()=>Yq(Re),[Re]),Qe=Ka(Z),[ke,Ue,rt]=eo({value:y,defaultValue:b,finalValue:null,onChange:p}),ft=typeof ke=="string"?Ke[ke]:void 0,[Rt,st]=eo({value:Q,defaultValue:L,finalValue:ft?ft.label:"",onChange:U}),Ie=sW({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Ie.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Ie.resetSelectedOption()}}),{resolvedClassNames:kt,resolvedStyles:Ot}=lg({props:n,styles:i,classNames:r});O.useEffect(()=>{_&&Ie.selectFirstOption()},[_,ke]),O.useEffect(()=>{y===null&&st(""),typeof y=="string"&&ft&&st(ft.label)},[y,ft]);const Ne=ae&&!!ke&&!T&&!x&&w.jsx(Er.ClearButton,{size:D,...he,onClear:()=>{Ue(null,null),st(""),Ce==null||Ce()}});return w.jsxs(w.Fragment,{children:[w.jsxs(Er,{store:Ie,__staticSelector:"Select",classNames:kt,styles:Ot,unstyled:s,readOnly:x,onOptionSubmit:ze=>{E==null||E(ze);const ot=K&&Ke[ze].value===ke?null:Ke[ze],St=ot?ot.value:null;Ue(St,ot),!rt&&st(typeof St=="string"&&(ot==null?void 0:ot.label)||""),Ie.closeDropdown()},size:D,...C,children:[w.jsx(Er.Target,{targetType:j?"input":"button",autoComplete:oe,children:w.jsx(wf,{id:Qe,ref:t,rightSection:M||Ne||w.jsx(Er.Chevron,{size:D,error:q,unstyled:s}),rightSectionPointerEvents:X||(Ne?"all":"none"),...xe,size:D,__staticSelector:"Select",disabled:T,readOnly:x||!j,value:Rt,onChange:ze=>{st(ze.currentTarget.value),Ie.openDropdown(),_&&Ie.selectFirstOption()},onFocus:ze=>{j&&Ie.openDropdown(),f==null||f(ze)},onBlur:ze=>{var ot;j&&Ie.closeDropdown(),st(ke!=null&&((ot=Ke[ke])==null?void 0:ot.label)||""),d==null||d(ze)},onClick:ze=>{j?Ie.openDropdown():Ie.toggleDropdown(),h==null||h(ze)},classNames:kt,styles:Ot,unstyled:s,pointer:!j,error:q})}),w.jsx(kve,{data:Re,hidden:x||T,filter:A,search:Rt,limit:k,hiddenWhenEmpty:!j||!z,withScrollArea:N,maxDropdownHeight:P,filterOptions:j&&(ft==null?void 0:ft.label)!==Rt,value:ke,checkIconPosition:B,withCheckIcon:V,nothingFoundMessage:z,unstyled:s,labelId:xe.label?`${Qe}-label`:void 0,"aria-label":xe.label?void 0:xe["aria-label"],renderOption:be,scrollAreaProps:re})]}),w.jsx(Er.HiddenInput,{value:ke,name:G,form:Y,disabled:T,...ge})]})});CI.classes={...wf.classes,...Er.classes};CI.displayName="@mantine/core/Select";function XVe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=Fs(),s=t===void 0?e:t,o=jy({"--sg-spacing-x":Ps(id(e)),"--sg-spacing-y":Ps(id(s)),"--sg-cols":(c=id(n))==null?void 0:c.toString()}),a=xi(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=Ps(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=Ps(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=W2(xi(a),i).filter(f=>xi(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return w.jsx(Mb,{styles:o,media:l,selector:r})}function Qj(e){return typeof e=="object"&&e!==null?xi(e):[]}function QVe(e){return e.sort((t,n)=>q2(t)-q2(n))}function JVe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...Qj(e),...Qj(t),...Qj(n)]));return QVe(r)}function ZVe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=jy({"--sg-spacing-x":Ps(id(e)),"--sg-spacing-y":Ps(id(i)),"--sg-cols":(l=id(n))==null?void 0:l.toString()}),o=JVe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=Ps(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=Ps(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return w.jsx(Mb,{styles:s,container:u,selector:r})}var o1e={container:"m_925c2d2c",root:"m_2415a157"};const eHe={cols:1,spacing:"md",type:"media"},OW=Ze((e,t)=>{const n=Le("SimpleGrid",eHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Nt({name:"SimpleGrid",classes:o1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),g=vI();return d==="container"?w.jsxs(w.Fragment,{children:[w.jsx(ZVe,{...n,selector:`.${g}`}),w.jsx("div",{...p("container"),children:w.jsx(De,{ref:t,...p("root",{className:g}),...h})})]}):w.jsxs(w.Fragment,{children:[w.jsx(XVe,{...n,selector:`.${g}`}),w.jsx(De,{ref:t,...p("root",{className:g}),...h})]})});OW.classes=o1e;OW.displayName="@mantine/core/SimpleGrid";const[a1e,hL]=Wo("SliderProvider was not found in tree"),MW=O.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=hL();return w.jsx(De,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});MW.displayName="@mantine/core/SliderRoot";const TO=O.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:g=null,disabled:y},b)=>{const{getStyles:_}=hL(),[E,C]=O.useState(!1),x=l||s||E||h&&p;return w.jsxs(De,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:b,__vars:{"--slider-thumb-offset":`${r}%`},..._("thumb",{focusable:!0}),mod:{dragging:s,disabled:y},onFocus:()=>{C(!0),typeof f=="function"&&f()},onBlur:()=>{C(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[g,w.jsx(fg,{mounted:i!=null&&!!x,transition:"fade",duration:0,...u,children:T=>w.jsx("div",{..._("label",{style:T}),children:i})})]})});TO.displayName="@mantine/core/SliderThumb";function CO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function tHe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function u1e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=hL();if(!e)return null;const u=e.map((l,c)=>O.createElement(De,{...a("markWrapper"),__vars:{"--mark-offset":`${CO({value:l.value,min:t,max:n})}%`},key:c},w.jsx(De,{...a("mark"),mod:{filled:tHe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&w.jsx("div",{...a("markLabel"),children:l.label})));return w.jsx("div",{children:u})}u1e.displayName="@mantine/core/SliderMarks";function $W({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=hL();return w.jsx(w.Fragment,{children:w.jsx(De,{...u("trackContainer"),mod:{disabled:r},...o,children:w.jsxs(De,{...u("track"),mod:{inverted:s,disabled:r},children:[w.jsx(De,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,w.jsx(u1e,{...a,offset:i,disabled:r,inverted:s})]})})})}$W.displayName="@mantine/core/SliderTrack";function DU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function Wc(e,t){return parseFloat(e.toFixed(t))}function l1e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var pL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const nHe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},rHe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Cn(t,"slider-size"),"--slider-color":n?di(n,e):void 0,"--slider-radius":i===void 0?void 0:vi(i),"--slider-thumb-size":r!==void 0?Ve(r):"calc(var(--slider-size) * 2)"}}),mL=Ze((e,t)=>{const n=Le("Slider",nHe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:g,label:y,labelTransitionProps:b,labelAlwaysOn:_,thumbLabel:E,showLabelOnHover:C,thumbChildren:x,disabled:T,unstyled:A,scale:k,inverted:N,className:P,style:D,vars:j,hiddenInputProps:M,...B}=n,V=Nt({name:"Slider",props:n,classes:pL,classNames:r,className:P,styles:i,style:D,vars:j,varsResolver:rHe,unstyled:A}),{dir:z}=hp(),[G,Y]=O.useState(!1),[Q,L]=eo({value:typeof s=="number"?Ch(s,l,c):s,defaultValue:typeof h=="number"?Ch(h,l,c):h,finalValue:Ch(0,l,c),onChange:o}),U=O.useRef(Q),K=O.useRef(),q=O.useRef(),X=CO({value:Q,min:l,max:c}),Z=k(Q),ae=typeof y=="function"?y(Z):y,he=d??l1e(f),ge=O.useCallback(({x:re})=>{if(!T){const xe=DU({value:re,min:l,max:c,step:f,precision:he});L(xe),U.current=xe}},[T,l,c,f,he,L]),{ref:be,active:Ce}=eye(ge,{onScrubEnd:()=>a==null?void 0:a(U.current)},z),oe=re=>{var xe,Re,Ke,Qe,ke,Ue;if(!T)switch(re.key){case"ArrowUp":{re.preventDefault(),(xe=q.current)==null||xe.focus();const rt=Wc(Math.min(Math.max(Q+f,l),c),he);L(rt),a==null||a(rt);break}case"ArrowRight":{re.preventDefault(),(Re=q.current)==null||Re.focus();const rt=Wc(Math.min(Math.max(z==="rtl"?Q-f:Q+f,l),c),he);L(rt),a==null||a(rt);break}case"ArrowDown":{re.preventDefault(),(Ke=q.current)==null||Ke.focus();const rt=Wc(Math.min(Math.max(Q-f,l),c),he);L(rt),a==null||a(rt);break}case"ArrowLeft":{re.preventDefault(),(Qe=q.current)==null||Qe.focus();const rt=Wc(Math.min(Math.max(z==="rtl"?Q+f:Q-f,l),c),he);L(rt),a==null||a(rt);break}case"Home":{re.preventDefault(),(ke=q.current)==null||ke.focus(),L(l),a==null||a(l);break}case"End":{re.preventDefault(),(Ue=q.current)==null||Ue.focus(),L(c),a==null||a(c);break}}};return w.jsx(a1e,{value:{getStyles:V},children:w.jsxs(MW,{...B,ref:Ls(t,K),onKeyDownCapture:oe,onMouseDownCapture:()=>{var re;return(re=K.current)==null?void 0:re.focus()},size:u,disabled:T,children:[w.jsx($W,{inverted:N,offset:0,filled:X,marks:g,min:l,max:c,value:Z,disabled:T,containerProps:{ref:be,onMouseEnter:C?()=>Y(!0):void 0,onMouseLeave:C?()=>Y(!1):void 0},children:w.jsx(TO,{max:c,min:l,value:Z,position:X,dragging:Ce,label:ae,ref:q,labelTransitionProps:b,labelAlwaysOn:_,thumbLabel:E,showLabelOnHover:C,isHovered:G,disabled:T,children:x})}),w.jsx("input",{type:"hidden",name:p,value:Z,...M})]})})});mL.classes=pL;mL.displayName="@mantine/core/Slider";function iHe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const sHe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Cn(t,"slider-size"),"--slider-color":n?di(n,e):void 0,"--slider-radius":i===void 0?void 0:vi(i),"--slider-thumb-size":r!==void 0?Ve(r):"calc(var(--slider-size) * 2)"}}),oHe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},OE=Ze((e,t)=>{const n=Le("RangeSlider",oHe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:g,name:y,marks:b,label:_,labelTransitionProps:E,labelAlwaysOn:C,thumbFromLabel:x,thumbToLabel:T,showLabelOnHover:A,thumbChildren:k,disabled:N,unstyled:P,scale:D,inverted:j,className:M,style:B,vars:V,hiddenInputProps:z,...G}=n,Y=Nt({name:"Slider",props:n,classes:pL,classNames:r,className:M,styles:i,style:B,vars:V,varsResolver:sHe,unstyled:P}),{dir:Q}=hp(),[L,U]=O.useState(-1),[K,q]=O.useState(!1),[X,Z]=eo({value:s,defaultValue:g,finalValue:[l,c],onChange:o}),ae=O.useRef(X),he=O.useRef([]),ge=O.useRef(void 0),be=[CO({value:X[0],min:l,max:c}),CO({value:X[1],min:l,max:c})],Ce=p??l1e(h),oe=st=>{Z(st),ae.current=st};O.useEffect(()=>{Array.isArray(s)&&(ae.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const re=(st,Ie,kt)=>{const Ot=[...ae.current];Ot[Ie]=st,Ie===0&&(st>Ot[1]-(f-1e-9)&&(Ot[1]=Math.min(st+f,c)),st>(c-(f-1e-9)||l)&&(Ot[Ie]=ae.current[Ie]),Ot[1]-st>d&&(Ot[1]=st+d)),Ie===1&&(st<Ot[0]+f&&(Ot[0]=Math.max(st-f,l)),st<Ot[0]+f&&(Ot[Ie]=ae.current[Ie]),st-Ot[0]>d&&(Ot[0]=st-d)),Ot[0]=Wc(Ot[0],Ce),Ot[1]=Wc(Ot[1],Ce),oe(Ot),kt&&(a==null||a(ae.current))},xe=st=>{if(!N){const Ie=DU({value:st,min:l,max:c,step:h,precision:Ce});re(Ie,ge.current,!1)}},{ref:Re,active:Ke}=eye(({x:st})=>xe(st),{onScrubEnd:()=>a==null?void 0:a(ae.current)},Q);function Qe(st){ge.current=st}const ke=st=>{Re.current.focus();const Ie=Re.current.getBoundingClientRect(),kt=iHe(st.nativeEvent),Ot=DU({value:kt-Ie.left,max:c,min:l,step:h,containerWidth:Ie.width}),Ne=Math.abs(X[0]-Ot)>Math.abs(X[1]-Ot)?1:0,ze=Q==="ltr"?Ne:Ne===1?0:1;ge.current=ze},Ue=()=>L!==1&&L!==0?(U(0),0):L,rt=st=>{if(!N)switch(st.key){case"ArrowUp":{st.preventDefault();const Ie=Ue();he.current[Ie].focus(),re(Wc(Math.min(Math.max(ae.current[Ie]+h,l),c),Ce),Ie,!0);break}case"ArrowRight":{st.preventDefault();const Ie=Ue();he.current[Ie].focus(),re(Wc(Math.min(Math.max(Q==="rtl"?ae.current[Ie]-h:ae.current[Ie]+h,l),c),Ce),Ie,!0);break}case"ArrowDown":{st.preventDefault();const Ie=Ue();he.current[Ie].focus(),re(Wc(Math.min(Math.max(ae.current[Ie]-h,l),c),Ce),Ie,!0);break}case"ArrowLeft":{st.preventDefault();const Ie=Ue();he.current[Ie].focus(),re(Wc(Math.min(Math.max(Q==="rtl"?ae.current[Ie]+h:ae.current[Ie]-h,l),c),Ce),Ie,!0);break}}},ft={max:c,min:l,size:u,labelTransitionProps:E,labelAlwaysOn:C,onBlur:()=>U(-1)},Rt=Array.isArray(k);return w.jsx(a1e,{value:{getStyles:Y},children:w.jsxs(MW,{...G,size:u,ref:t,disabled:N,children:[w.jsxs($W,{offset:be[0],marksOffset:X[0],filled:be[1]-be[0],marks:b,inverted:j,min:l,max:c,value:X[1],disabled:N,containerProps:{ref:Re,onMouseEnter:A?()=>q(!0):void 0,onMouseLeave:A?()=>q(!1):void 0,onTouchStartCapture:ke,onTouchEndCapture:()=>{ge.current=-1},onMouseDownCapture:ke,onMouseUpCapture:()=>{ge.current=-1},onKeyDownCapture:rt},children:[w.jsx(TO,{...ft,value:D(X[0]),position:be[0],dragging:Ke,label:typeof _=="function"?_(Wc(D(X[0]),Ce)):_,ref:st=>{he.current[0]=st},thumbLabel:x,onMouseDown:()=>Qe(0),onFocus:()=>U(0),showLabelOnHover:A,isHovered:K,disabled:N,children:Rt?k[0]:k}),w.jsx(TO,{...ft,thumbLabel:T,value:D(X[1]),position:be[1],dragging:Ke,label:typeof _=="function"?_(Wc(D(X[1]),Ce)):_,ref:st=>{he.current[1]=st},onMouseDown:()=>Qe(1),onFocus:()=>U(1),showLabelOnHover:A,isHovered:K,disabled:N,children:Rt?k[1]:k})]}),w.jsx("input",{type:"hidden",name:`${y}_from`,value:X[0],...z}),w.jsx("input",{type:"hidden",name:`${y}_to`,value:X[1],...z})]})})});OE.classes=pL;OE.displayName="@mantine/core/RangeSlider";const aHe={},rc=Ze((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Le("Space",aHe,e);return w.jsx(De,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});rc.displayName="@mantine/core/Space";var c1e={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const uHe={maxHeight:100,initialState:!1},lHe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),LW=Ze((e,t)=>{const n=Le("Spoiler",uHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:g,id:y,...b}=n,_=Nt({name:"Spoiler",classes:c1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lHe}),E=Ka(y),C=`${E}-region`,[x,T]=O.useState(l),{ref:A,height:k}=U5e(),N=x?f:d,P=N!==null&&c<k;return w.jsxs(De,{..._("root"),id:E,ref:t,"data-has-spoiler":P||void 0,...b,children:[P&&w.jsx(jb,{component:"button",type:"button",ref:p,onClick:()=>T(D=>!D),"aria-expanded":x,"aria-controls":C,..._("control"),children:N}),w.jsx("div",{..._("content",{style:{maxHeight:x?k?Ve(k):void 0:Ve(c)}}),"data-reduce-motion":!0,role:"region",id:C,children:w.jsx("div",{ref:A,children:h})})]})});LW.classes=c1e;LW.displayName="@mantine/core/Spoiler";var f1e={root:"m_6d731127"};const cHe={gap:"md",align:"stretch",justify:"flex-start"},fHe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Ps(t),"--stack-align":n,"--stack-justify":r}}),yu=Ze((e,t)=>{const n=Le("Stack",cHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Nt({name:"Stack",props:n,classes:f1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fHe});return w.jsx(De,{ref:t,...p("root"),variant:d,...h})});yu.classes=f1e;yu.displayName="@mantine/core/Stack";const d1e=O.createContext(null),dHe=d1e.Provider,hHe=()=>O.useContext(d1e),pHe={},FW=Ze((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Le("SwitchGroup",pHe,e),[c,f]=eo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(g=>g!==p):[...c,p])};return w.jsx(dHe,{value:{value:c,onChange:d,size:s},children:w.jsx(zi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:w.jsx(aW,{role:"group",children:a})})})});FW.classes=zi.Wrapper.classes;FW.displayName="@mantine/core/SwitchGroup";var h1e={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const mHe={labelPosition:"right"},gHe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:vi(t),"--switch-height":Cn(r,"switch-height"),"--switch-width":Cn(r,"switch-width"),"--switch-thumb-size":Cn(r,"switch-thumb-size"),"--switch-label-font-size":Cn(r,"switch-label-font-size"),"--switch-track-label-padding":Cn(r,"switch-track-label-padding"),"--switch-color":n?di(n,e):void 0}}),eE=Ze((e,t)=>{const n=Le("Switch",mHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:g,wrapperProps:y,children:b,thumbIcon:_,checked:E,defaultChecked:C,onChange:x,labelPosition:T,description:A,error:k,disabled:N,variant:P,rootRef:D,mod:j,...M}=n,B=hHe(),V=p||(B==null?void 0:B.size),z=Nt({name:"Switch",props:n,classes:h1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gHe}),{styleProps:G,rest:Y}=$b(M),Q=Ka(h),L=B?{checked:B.value.includes(Y.value),onChange:B.onChange}:{},[U,K]=eo({value:L.checked??E,defaultValue:C,finalValue:!1});return w.jsxs(V$,{...z("root"),__staticSelector:"Switch",__stylesApiProps:n,id:Q,size:V,labelPosition:T,label:c,description:A,error:k,disabled:N,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":L.checked||void 0,variant:P,ref:D,mod:j,...G,...y,children:[w.jsx("input",{...Y,disabled:N,checked:U,onChange:q=>{var X;B?(X=L.onChange)==null||X.call(L,q):x==null||x(q),K(q.currentTarget.checked)},id:Q,ref:t,type:"checkbox",role:"switch",...z("input")}),w.jsxs(De,{"aria-hidden":"true",mod:{error:k,"label-position":T},...z("track"),children:[w.jsx(De,{component:"span",mod:"reduce-motion",...z("thumb"),children:_}),w.jsx("span",{...z("trackLabel"),children:U?d:f})]})]})});eE.classes={...h1e,...vve};eE.displayName="@mantine/core/Switch";eE.Group=FW;const[yHe,vHe]=Wo("Table component was not found in the tree");var AI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function bHe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function zb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Ze((i,s)=>{const o=Le(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=vHe();return w.jsx(De,{component:e,ref:s,...bHe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=AI,r}const OU=zb("th",{columnBorder:!0}),p1e=zb("td",{columnBorder:!0}),pD=zb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),m1e=zb("thead",{stickyHeader:!0}),g1e=zb("tbody"),y1e=zb("tfoot"),v1e=zb("caption",{captionSide:!0});function jW({data:e}){return w.jsxs(w.Fragment,{children:[e.caption&&w.jsx(v1e,{children:e.caption}),e.head&&w.jsx(m1e,{children:w.jsx(pD,{children:e.head.map((t,n)=>w.jsx(OU,{children:t},n))})}),e.body&&w.jsx(g1e,{children:e.body.map((t,n)=>w.jsx(pD,{children:t.map((r,i)=>w.jsx(p1e,{children:r},i))},n))}),e.foot&&w.jsx(y1e,{children:w.jsx(pD,{children:e.foot.map((t,n)=>w.jsx(OU,{children:t},n))})})]})}jW.displayName="@mantine/core/TableDataRenderer";const _He={type:"scrollarea"},wHe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ve(t),"--table-overflow":n==="native"?"auto":void 0}}),BW=Ze((e,t)=>{const n=Le("TableScrollContainer",_He,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Nt({name:"TableScrollContainer",classes:AI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wHe,rootSelector:"scrollContainer"});return w.jsx(De,{component:f==="scrollarea"?jm:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:w.jsx("div",{...h("scrollContainerInner"),children:l})})});BW.classes=AI;BW.displayName="@mantine/core/TableScrollContainer";const EHe={withRowBorders:!0,verticalSpacing:7},xHe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Ps(r),"--table-vertical-spacing":Ps(i),"--table-border-color":s?di(s,e):void 0,"--table-striped-color":u&&o?di(o,e):void 0,"--table-highlight-on-hover-color":l&&a?di(a,e):void 0,"--table-sticky-header-offset":f?Ve(c):void 0}}),hn=Ze((e,t)=>{const n=Le("Table",EHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:g,withColumnBorders:y,withRowBorders:b,withTableBorder:_,borderColor:E,layout:C,variant:x,data:T,children:A,stickyHeader:k,stickyHeaderOffset:N,mod:P,...D}=n,j=Nt({name:"Table",props:n,className:i,style:s,classes:AI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:xHe});return w.jsx(yHe,{value:{getStyles:j,stickyHeader:k,striped:p===!0?"odd":p||void 0,highlightOnHover:g,withColumnBorders:y,withRowBorders:b,captionSide:f||"bottom"},children:w.jsx(De,{component:"table",variant:x,ref:t,mod:[{"data-with-table-border":_},P],...j("table"),...D,children:A||!!T&&w.jsx(jW,{data:T})})})});hn.classes=AI;hn.displayName="@mantine/core/Table";hn.Td=p1e;hn.Th=OU;hn.Tr=pD;hn.Thead=m1e;hn.Tbody=g1e;hn.Tfoot=y1e;hn.Caption=v1e;hn.ScrollContainer=BW;hn.DataRenderer=jW;const[SHe,UW]=Wo("Tabs component was not found in the tree");var II={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const THe={},zW=Ze((e,t)=>{const n=Le("TabsList",THe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=UW();return w.jsx(De,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});zW.classes=II;zW.displayName="@mantine/core/TabsList";const CHe={},VW=Ze((e,t)=>{const n=Le("TabsPanel",CHe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=UW(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return w.jsx(De,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});VW.classes=II;VW.displayName="@mantine/core/TabsPanel";const AHe={},HW=Ze((e,t)=>{const n=Le("TabsTab",AHe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:g,mod:y,...b}=n,_=Fs(),{dir:E}=hp(),C=UW(),x=a===C.value,T=k=>{C.onChange(C.allowTabDeactivation&&a===C.value?null:a),u==null||u(k)},A={classNames:h,styles:p,props:n};return w.jsxs(Zs,{...b,...C.getStyles("tab",{className:r,style:d,variant:C.variant,...A}),disabled:c,unstyled:C.unstyled,variant:C.variant,mod:[{active:x,disabled:c,orientation:C.orientation,inverted:C.inverted,placement:C.orientation==="vertical"&&C.placement},y],ref:t,role:"tab",id:C.getTabId(a),"aria-selected":x,tabIndex:x||C.value===null?0:-1,"aria-controls":C.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?di(f,_):void 0},onKeyDown:ZH({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:C.activateTabWithKeyboard,loop:C.loop,orientation:C.orientation||"horizontal",dir:E,onKeyDown:l}),children:[o&&w.jsx("span",{...C.getStyles("tabSection",A),"data-position":"left",children:o}),i&&w.jsx("span",{...C.getStyles("tabLabel",A),children:i}),s&&w.jsx("span",{...C.getStyles("tabSection",A),"data-position":"right",children:s})]})});HW.classes=II;HW.displayName="@mantine/core/TabsTab";const kse="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",IHe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},kHe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":vi(t),"--tabs-color":di(n,e),"--tabs-text-color":Bx(r,e)?zy({color:n,theme:e,autoContrast:r}):void 0}}),ks=Ze((e,t)=>{const n=Le("Tabs",IHe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:g,placement:y,keepMounted:b,classNames:_,styles:E,unstyled:C,className:x,style:T,vars:A,autoContrast:k,mod:N,...P}=n,D=Ka(l),[j,M]=eo({value:i,defaultValue:r,finalValue:null,onChange:s}),B=Nt({name:"Tabs",props:n,classes:II,className:x,style:T,classNames:_,styles:E,unstyled:C,vars:A,varsResolver:kHe});return w.jsx(SHe,{value:{placement:y,value:j,orientation:o,id:D,loop:u,activateTabWithKeyboard:c,getTabId:yO(`${D}-tab`,kse),getPanelId:yO(`${D}-panel`,kse),onChange:M,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:g,keepMounted:b,unstyled:C,getStyles:B},children:w.jsx(De,{ref:t,id:D,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&g,placement:o==="vertical"&&y},N],...B("root"),...P,children:a})})});ks.classes=II;ks.displayName="@mantine/core/Tabs";ks.Tab=HW;ks.Panel=VW;ks.List=zW;const RHe={},bm=Ze((e,t)=>{const n=Le("TextInput",RHe,e);return w.jsx(wf,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});bm.classes=wf.classes;bm.displayName="@mantine/core/TextInput";const NHe=["h1","h2","h3","h4","h5","h6"];function PHe(e,t){const n=t!==void 0?t:`h${e}`;return NHe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Ve(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var b1e={root:"m_8a5d1357"};const DHe={order:1},OHe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=PHe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},es=Ze((e,t)=>{const n=Le("Title",DHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...g}=n,y=Nt({name:"Title",props:n,classes:b1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:OHe});return[1,2,3,4,5,6].includes(u)?w.jsx(De,{...y("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...g}):null});es.classes=b1e;es.displayName="@mantine/core/Title";function MHe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function $He(e){return O.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function LHe(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const FHe=()=>MHe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Vb=FHe(),jHe=(e=Vb)=>$He(e);function Jx(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=LHe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function BHe(e,t=Vb){const n=e.id||Qw();return Jx(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function _1e(e,t=Vb){return Jx(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function UHe(e,t=Vb){return Jx(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function zHe(e=Vb){Jx(e,()=>[])}function VHe(e=Vb){Jx(e,t=>t.slice(0,e.getState().limit))}const Hb={show:BHe,hide:_1e,update:UHe,clean:zHe,cleanQueue:VHe,updateState:Jx};function MU(){return MU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},MU.apply(null,arguments)}function w1e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function $U(e,t){return $U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},$U(e,t)}function E1e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,$U(e,t)}var Jj={exports:{}},Zj,Rse;function HHe(){if(Rse)return Zj;Rse=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Zj=e,Zj}var e8,Nse;function qHe(){if(Nse)return e8;Nse=1;var e=HHe();function t(){}function n(){}return n.resetWarningCache=t,e8=function(){function r(o,a,u,l,c,f){if(f!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},e8}var Pse;function WHe(){return Pse||(Pse=1,Jj.exports=qHe()()),Jj.exports}var GHe=WHe();const Dse=Ru(GHe),Ose={disabled:!1},AO=Jr.createContext(null);var YHe=function(t){return t.scrollTop},_C="unmounted",Yv="exited",Kv="entering",Sw="entered",LU="exiting",gg=function(e){E1e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Yv,s.appearStatus=Kv):u=Sw:r.unmountOnExit||r.mountOnEnter?u=_C:u=Yv,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===_C?{status:Yv}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Kv&&o!==Sw&&(s=Kv):(o===Kv||o===Sw)&&(s=LU)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Kv){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:bC.findDOMNode(this);o&&YHe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Yv&&this.setState({status:_C})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[bC.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||Ose.disabled){this.safeSetState({status:Sw},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Kv},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:Sw},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:bC.findDOMNode(this);if(!s||Ose.disabled){this.safeSetState({status:Yv},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:LU},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Yv},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:bC.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===_C)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=w1e(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Jr.createElement(AO.Provider,{value:null},typeof o=="function"?o(i,a):Jr.cloneElement(Jr.Children.only(o),a))},t}(Jr.Component);gg.contextType=AO;gg.propTypes={};function Z_(){}gg.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Z_,onEntering:Z_,onEntered:Z_,onExit:Z_,onExiting:Z_,onExited:Z_};gg.UNMOUNTED=_C;gg.EXITED=Yv;gg.ENTERING=Kv;gg.ENTERED=Sw;gg.EXITING=LU;function KHe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qW(e,t){var n=function(s){return t&&O.isValidElement(s)?t(s):s},r=Object.create(null);return e&&O.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function XHe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function _1(e,t,n){return n[t]!=null?n[t]:e.props[t]}function QHe(e,t){return qW(e.children,function(n){return O.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:_1(n,"appear",e),enter:_1(n,"enter",e),exit:_1(n,"exit",e)})})}function JHe(e,t,n){var r=qW(e.children),i=XHe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(O.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=O.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=O.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:_1(o,"exit",e),enter:_1(o,"enter",e)}):!u&&a&&!c?i[s]=O.cloneElement(o,{in:!1}):u&&a&&O.isValidElement(l)&&(i[s]=O.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:_1(o,"exit",e),enter:_1(o,"enter",e)}))}}),i}var ZHe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},eqe={component:"div",childFactory:function(t){return t}},l0=function(e){E1e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(KHe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?QHe(i,a):JHe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=qW(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=MU({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=w1e(i,["component","childFactory"]),u=this.state.contextValue,l=ZHe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Jr.createElement(AO.Provider,{value:u},l):Jr.createElement(AO.Provider,{value:u},Jr.createElement(s,a,l))},t}(Jr.Component);l0.propTypes={};l0.defaultProps=eqe;const x1e=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function tqe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),x1e.reduce((n,r)=>(n[r]=[],n),{}))}const Mse={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},nqe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function rqe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Mse[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:nqe[o]},l={opacity:0,maxHeight:0,transform:Mse[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function iqe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const S1e=O.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=iqe(n,e.autoClose),l=O.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return O.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),O.useEffect(()=>(d(),c),[u]),w.jsx(CW,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});S1e.displayName="@mantine/notifications/NotificationContainer";var T1e={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const sqe=gg,oqe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Ec("overlay"),store:Vb,withinPortal:!0},aqe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Ve(n)}}),yg=Ze((e,t)=>{const n=Le("Notifications",oqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:g,store:y,portalProps:b,withinPortal:_,...E}=n,C=Fs(),x=jHe(y),T=L5e(),A=N$(),k=O.useRef({}),N=O.useRef(0),D=(C.respectReducedMotion?A:!1)?1:f,j=Nt({name:"Notifications",classes:T1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aqe});O.useEffect(()=>{y==null||y.updateState(V=>({...V,limit:p||5,defaultPosition:l}))},[p,l]),Gh(()=>{x.notifications.length>N.current&&setTimeout(()=>T(),0),N.current=x.notifications.length},[x.notifications]);const M=tqe(x.notifications,l),B=x1e.reduce((V,z)=>(V[z]=M[z].map(({style:G,...Y})=>w.jsx(sqe,{timeout:D,onEnter:()=>k.current[Y.id].offsetHeight,nodeRef:{current:k.current[Y.id]},children:Q=>w.jsx(S1e,{ref:L=>{k.current[Y.id]=L},data:Y,onHide:L=>_1e(L,y),autoClose:c,...j("notification",{style:{...rqe({state:Q,position:z,transitionDuration:D,maxHeight:h}),...G}})})},Y.id)),V),{});return w.jsxs(Hx,{withinPortal:_,...b,children:[w.jsx(De,{...j("root"),"data-position":"top-center",ref:t,...E,children:w.jsx(l0,{children:B["top-center"]})}),w.jsx(De,{...j("root"),"data-position":"top-left",...E,children:w.jsx(l0,{children:B["top-left"]})}),w.jsx(De,{...j("root"),"data-position":"top-right",...E,children:w.jsx(l0,{children:B["top-right"]})}),w.jsx(De,{...j("root"),"data-position":"bottom-right",...E,children:w.jsx(l0,{children:B["bottom-right"]})}),w.jsx(De,{...j("root"),"data-position":"bottom-left",...E,children:w.jsx(l0,{children:B["bottom-left"]})}),w.jsx(De,{...j("root"),"data-position":"bottom-center",...E,children:w.jsx(l0,{children:B["bottom-center"]})})]})});yg.classes=T1e;yg.displayName="@mantine/notifications/Notifications";yg.show=Hb.show;yg.hide=Hb.hide;yg.update=Hb.update;yg.clean=Hb.clean;yg.cleanQueue=Hb.cleanQueue;yg.updateState=Hb.updateState;const C1e=O.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),js=()=>O.useContext(C1e);function uqe({children:e}){const[t,n]=Jr.useState(void 0),r=Jr.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return w.jsx(C1e.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Z2(){return Z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z2.apply(this,arguments)}var T0;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(T0||(T0={}));const $se="popstate";function lqe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return FU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:I1e(i)}return fqe(t,n,null,e)}function Ds(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function A1e(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function cqe(){return Math.random().toString(36).substr(2,8)}function Lse(e,t){return{usr:e.state,key:e.key,idx:t}}function FU(e,t,n,r){return n===void 0&&(n=null),Z2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Zx(t):t,{state:n,key:t&&t.key||r||cqe()})}function I1e(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Zx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function fqe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=T0.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(Z2({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=T0.Pop;let y=c(),b=y==null?null:y-l;l=y,u&&u({action:a,location:g.location,delta:b})}function d(y,b){a=T0.Push;let _=FU(g.location,y,b);l=c()+1;let E=Lse(_,l),C=g.createHref(_);try{o.pushState(E,"",C)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(C)}s&&u&&u({action:a,location:g.location,delta:1})}function h(y,b){a=T0.Replace;let _=FU(g.location,y,b);l=c();let E=Lse(_,l),C=g.createHref(_);o.replaceState(E,"",C),s&&u&&u({action:a,location:g.location,delta:0})}function p(y){let b=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof y=="string"?y:I1e(y);return _=_.replace(/ $/,"%20"),Ds(b,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,b)}let g={get action(){return a},get location(){return e(i,o)},listen(y){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener($se,f),u=y,()=>{i.removeEventListener($se,f),u=null}},createHref(y){return t(i,y)},createURL:p,encodeLocation(y){let b=p(y);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:d,replace:h,go(y){return o.go(y)}};return g}var Fse;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Fse||(Fse={}));function dqe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Zx(t):t,i=N1e(r.pathname||"/",n);if(i==null)return null;let s=k1e(e);hqe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=Tqe(i);o=Eqe(s[a],u)}return o}function k1e(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ds(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=F0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(Ds(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),k1e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:_qe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of R1e(s.path))i(s,o,u)}),t}function R1e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=R1e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function hqe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:wqe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const pqe=/^:[\w-]+$/,mqe=3,gqe=2,yqe=1,vqe=10,bqe=-2,jse=e=>e==="*";function _qe(e,t){let n=e.split("/"),r=n.length;return n.some(jse)&&(r+=bqe),t&&(r+=gqe),n.filter(i=>!jse(i)).reduce((i,s)=>i+(pqe.test(s)?mqe:s===""?yqe:vqe),r)}function wqe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function Eqe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=xqe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:F0([i,c.pathname]),pathnameBase:kqe(F0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=F0([i,c.pathnameBase]))}return s}function xqe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Sqe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let g=a[f]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function Sqe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),A1e(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Tqe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return A1e(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function N1e(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Cqe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Zx(e):e;return{pathname:n?n.startsWith("/")?n:Aqe(n,t):t,search:Rqe(r),hash:Nqe(i)}}function Aqe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function t8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Iqe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function WW(e,t){let n=Iqe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function GW(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Zx(e):(i=Z2({},e),Ds(!i.pathname||!i.pathname.includes("?"),t8("?","pathname","search",i)),Ds(!i.pathname||!i.pathname.includes("#"),t8("#","pathname","hash",i)),Ds(!i.search||!i.search.includes("#"),t8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=Cqe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const F0=e=>e.join("/").replace(/\/\/+/g,"/"),kqe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Rqe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Nqe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Pqe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const P1e=["post","put","patch","delete"];new Set(P1e);const Dqe=["get",...P1e];new Set(Dqe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eA(){return eA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eA.apply(this,arguments)}const YW=O.createContext(null),Oqe=O.createContext(null),qb=O.createContext(null),gL=O.createContext(null),mp=O.createContext({outlet:null,matches:[],isDataRoute:!1}),D1e=O.createContext(null);function O1e(e,t){let{relative:n}={};eS()||Ds(!1);let{basename:r,navigator:i}=O.useContext(qb),{hash:s,pathname:o,search:a}=Fqe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:F0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function eS(){return O.useContext(gL)!=null}function Hy(){return eS()||Ds(!1),O.useContext(gL).location}function M1e(e){O.useContext(qb).static||O.useLayoutEffect(e)}function gp(){let{isDataRoute:e}=O.useContext(mp);return e?Kqe():Mqe()}function Mqe(){eS()||Ds(!1);let e=O.useContext(YW),{basename:t,future:n,navigator:r}=O.useContext(qb),{matches:i}=O.useContext(mp),{pathname:s}=Hy(),o=JSON.stringify(WW(i,n.v7_relativeSplatPath)),a=O.useRef(!1);return M1e(()=>{a.current=!0}),O.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=GW(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:F0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const $qe=O.createContext(null);function Lqe(e){let t=O.useContext(mp).outlet;return t&&O.createElement($qe.Provider,{value:e},t)}function zm(){let{matches:e}=O.useContext(mp),t=e[e.length-1];return t?t.params:{}}function Fqe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=O.useContext(qb),{matches:i}=O.useContext(mp),{pathname:s}=Hy(),o=JSON.stringify(WW(i,r.v7_relativeSplatPath));return O.useMemo(()=>GW(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function $1e(e,t){return jqe(e,t)}function jqe(e,t,n,r){eS()||Ds(!1);let{navigator:i}=O.useContext(qb),{matches:s}=O.useContext(mp),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Hy(),c;if(t){var f;let y=typeof t=="string"?Zx(t):t;u==="/"||(f=y.pathname)!=null&&f.startsWith(u)||Ds(!1),c=y}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let y=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(y.length).join("/")}let p=dqe(e,{pathname:h}),g=Hqe(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:F0([u,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?u:F0([u,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,r);return t&&g?O.createElement(gL.Provider,{value:{location:eA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:T0.Pop}},g):g}function Bqe(){let e=Yqe(),t=Pqe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),n?O.createElement("pre",{style:i},n):null,null)}const Uqe=O.createElement(Bqe,null);class zqe extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?O.createElement(mp.Provider,{value:this.props.routeContext},O.createElement(D1e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vqe(e){let{routeContext:t,match:n,children:r}=e,i=O.useContext(YW);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(mp.Provider,{value:t},r)}function Hqe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||Ds(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,g=null,y=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,g=f.route.errorElement||Uqe,u&&(l<0&&d===0?(p=!0,y=null):l===d&&(p=!0,y=f.route.hydrateFallbackElement||null)));let b=t.concat(o.slice(0,d+1)),_=()=>{let E;return h?E=g:p?E=y:f.route.Component?E=O.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=c,O.createElement(Vqe,{match:f,routeContext:{outlet:c,matches:b,isDataRoute:n!=null},children:E})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?O.createElement(zqe,{location:n.location,revalidation:n.revalidation,component:g,error:h,children:_(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):_()},null)}var L1e=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(L1e||{}),IO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(IO||{});function qqe(e){let t=O.useContext(YW);return t||Ds(!1),t}function Wqe(e){let t=O.useContext(Oqe);return t||Ds(!1),t}function Gqe(e){let t=O.useContext(mp);return t||Ds(!1),t}function F1e(e){let t=Gqe(),n=t.matches[t.matches.length-1];return n.route.id||Ds(!1),n.route.id}function Yqe(){var e;let t=O.useContext(D1e),n=Wqe(IO.UseRouteError),r=F1e(IO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Kqe(){let{router:e}=qqe(L1e.UseNavigateStable),t=F1e(IO.UseNavigateStable),n=O.useRef(!1);return M1e(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,eA({fromRouteId:t},s)))},[e,t])}function KW(e){let{to:t,replace:n,state:r,relative:i}=e;eS()||Ds(!1);let{future:s,static:o}=O.useContext(qb),{matches:a}=O.useContext(mp),{pathname:u}=Hy(),l=gp(),c=GW(t,WW(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return O.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function Xqe(e){return Lqe(e.context)}function tm(e){Ds(!1)}function Qqe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=T0.Pop,navigator:s,static:o=!1,future:a}=e;eS()&&Ds(!1);let u=t.replace(/^\/*/,"/"),l=O.useMemo(()=>({basename:u,navigator:s,static:o,future:eA({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Zx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,g=O.useMemo(()=>{let y=N1e(c,u);return y==null?null:{location:{pathname:y,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return g==null?null:O.createElement(qb.Provider,{value:l},O.createElement(gL.Provider,{children:n,value:g}))}function Jqe(e){let{children:t,location:n}=e;return $1e(jU(t),n)}new Promise(()=>{});function jU(e,t){t===void 0&&(t=[]);let n=[];return O.Children.forEach(e,(r,i)=>{if(!O.isValidElement(r))return;let s=[...t,i];if(r.type===O.Fragment){n.push.apply(n,jU(r.props.children,s));return}r.type!==tm&&Ds(!1),!r.props.index||!r.props.children||Ds(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=jU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function BU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Zqe(e,t){let n=BU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const eWe="6";try{window.__reactRouterVersion=eWe}catch{}const tWe="startTransition",Bse=mO[tWe];function nWe(e){let{basename:t,children:n,future:r,window:i}=e,s=O.useRef();s.current==null&&(s.current=lqe({window:i,v5Compat:!0}));let o=s.current,[a,u]=O.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=O.useCallback(f=>{l&&Bse?Bse(()=>u(f)):u(f)},[u,l]);return O.useLayoutEffect(()=>o.listen(c),[o,c]),O.createElement(Qqe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Use;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Use||(Use={}));var zse;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(zse||(zse={}));function XW(e){let t=O.useRef(BU(e)),n=O.useRef(!1),r=Hy(),i=O.useMemo(()=>Zqe(r.search,n.current?null:t.current),[r.search]),s=gp(),o=O.useCallback((a,u)=>{const l=BU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const QW=O.createContext(null);QW.displayName="@mantine/modals/ModalsContext";function rWe(){const e=O.useContext(QW);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function iWe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=rWe(),h=g=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(g)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=g=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(g)),typeof u=="function"&&u(),i&&d.closeModal(e)};return w.jsxs(w.Fragment,{children:[l&&w.jsx(De,{mb:"md",children:l}),w.jsxs(Pi,{justify:"flex-end",...o,children:[w.jsx(Sn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),w.jsx(Sn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[sWe,yL]=X5e("mantine-modals");yL("openModal");yL("closeModal");yL("closeAllModals");const Vse=yL("openConfirmModal");function Hse(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function oWe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Hse(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Hse(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function aWe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function uWe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=O.useReducer(oWe,{modals:[],current:null}),o=O.useRef(i);o.current=i;const a=O.useCallback(y=>{s({type:"CLOSE_ALL",canceled:y})},[o,s]),u=O.useCallback(({modalId:y,...b})=>{const _=y||Qw();return s({type:"OPEN",modal:{id:_,type:"content",props:b}}),_},[s]),l=O.useCallback(({modalId:y,...b})=>{const _=y||Qw();return s({type:"OPEN",modal:{id:_,type:"confirm",props:b}}),_},[s]),c=O.useCallback((y,{modalId:b,..._})=>{const E=b||Qw();return s({type:"OPEN",modal:{id:E,type:"context",props:_,ctx:y}}),E},[s]),f=O.useCallback((y,b)=>{s({type:"CLOSE",modalId:y,canceled:b})},[o,s]);sWe({openModal:u,openConfirmModal:l,openContextModal:({modal:y,...b})=>c(y,b),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const y=o.current.current;switch(y==null?void 0:y.type){case"context":{const{innerProps:b,..._}=y.props,E=r[y.ctx];return{modalProps:_,content:w.jsx(E,{innerProps:b,context:d,id:y.id})}}case"confirm":{const{modalProps:b,confirmProps:_}=aWe(y.props);return{modalProps:b,content:w.jsx(iWe,{..._,id:y.id,labels:y.props.labels||n})}}case"content":{const{children:b,..._}=y.props;return{modalProps:_,content:w.jsx(w.Fragment,{children:b})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:g}=h();return w.jsxs(QW.Provider,{value:d,children:[w.jsx(ls,{zIndex:Ec("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var y;return f((y=i.current)==null?void 0:y.id)},children:g}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lWe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=(e,t,n,r)=>{const i=O.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>O.createElement("svg",{ref:f,...lWe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>O.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cWe=Zn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fWe=Zn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qse=Zn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dWe=Zn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hWe=Zn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pWe=Zn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mWe=Zn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gWe=Zn("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yWe=Zn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vWe=Zn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var j1e=Zn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bWe=Zn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wse=Zn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _We=Zn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wWe=Zn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EWe=Zn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xWe=Zn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SWe=Zn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TWe=Zn("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CWe=Zn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var B1e=Zn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AWe=Zn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IWe=Zn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kWe=Zn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RWe=Zn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NWe=Zn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var U1e=Zn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PWe=Zn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DWe=Zn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OWe=Zn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MWe=Zn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $We=Zn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var z1e=Zn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LWe=Zn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var V1e=Zn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FWe=Zn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H1e=Zn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JW=Zn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZW=Zn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jWe=Zn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function q1e(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const cc="/test/";function Gse(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function W1e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const BWe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,UWe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,zWe={};function Yse(e,t){return(zWe.jsx?UWe:BWe).test(e)}const VWe=/[ \t\n\f\r]/g;function HWe(e){return typeof e=="object"?e.type==="text"?Kse(e.value):!1:Kse(e)}function Kse(e){return e.replace(VWe,"")===""}let kI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};kI.prototype.property={};kI.prototype.normal={};kI.prototype.space=null;function G1e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new kI(n,r,t)}function tA(e){return e.toLowerCase()}let xf=class{constructor(t,n){this.property=t,this.attribute=n}};xf.prototype.space=null;xf.prototype.boolean=!1;xf.prototype.booleanish=!1;xf.prototype.overloadedBoolean=!1;xf.prototype.number=!1;xf.prototype.commaSeparated=!1;xf.prototype.spaceSeparated=!1;xf.prototype.commaOrSpaceSeparated=!1;xf.prototype.mustUseProperty=!1;xf.prototype.defined=!1;let qWe=0;const qn=Wb(),Xs=Wb(),Y1e=Wb(),Et=Wb(),ki=Wb(),tE=Wb(),Ul=Wb();function Wb(){return 2**++qWe}const UU=Object.freeze(Object.defineProperty({__proto__:null,boolean:qn,booleanish:Xs,commaOrSpaceSeparated:Ul,commaSeparated:tE,number:Et,overloadedBoolean:Y1e,spaceSeparated:ki},Symbol.toStringTag,{value:"Module"})),n8=Object.keys(UU);class eG extends xf{constructor(t,n,r,i){let s=-1;if(super(t,n),Xse(this,"space",i),typeof r=="number")for(;++s<n8.length;){const o=n8[s];Xse(this,n8[s],(r&UU[o])===UU[o])}}}eG.prototype.defined=!0;function Xse(e,t,n){n&&(e[t]=n)}const WWe={}.hasOwnProperty;function tS(e){const t={},n={};let r;for(r in e.properties)if(WWe.call(e.properties,r)){const i=e.properties[r],s=new eG(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[tA(r)]=r,n[tA(s.attribute)]=r}return new kI(t,n,e.space)}const K1e=tS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),X1e=tS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Q1e(e,t){return t in e?e[t]:t}function J1e(e,t){return Q1e(e,t.toLowerCase())}const Z1e=tS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:J1e,properties:{xmlns:null,xmlnsXLink:null}}),ebe=tS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Xs,ariaAutoComplete:null,ariaBusy:Xs,ariaChecked:Xs,ariaColCount:Et,ariaColIndex:Et,ariaColSpan:Et,ariaControls:ki,ariaCurrent:null,ariaDescribedBy:ki,ariaDetails:null,ariaDisabled:Xs,ariaDropEffect:ki,ariaErrorMessage:null,ariaExpanded:Xs,ariaFlowTo:ki,ariaGrabbed:Xs,ariaHasPopup:null,ariaHidden:Xs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ki,ariaLevel:Et,ariaLive:null,ariaModal:Xs,ariaMultiLine:Xs,ariaMultiSelectable:Xs,ariaOrientation:null,ariaOwns:ki,ariaPlaceholder:null,ariaPosInSet:Et,ariaPressed:Xs,ariaReadOnly:Xs,ariaRelevant:null,ariaRequired:Xs,ariaRoleDescription:ki,ariaRowCount:Et,ariaRowIndex:Et,ariaRowSpan:Et,ariaSelected:Xs,ariaSetSize:Et,ariaSort:null,ariaValueMax:Et,ariaValueMin:Et,ariaValueNow:Et,ariaValueText:null,role:null}}),GWe=tS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:J1e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:tE,acceptCharset:ki,accessKey:ki,action:null,allow:null,allowFullScreen:qn,allowPaymentRequest:qn,allowUserMedia:qn,alt:null,as:null,async:qn,autoCapitalize:null,autoComplete:ki,autoFocus:qn,autoPlay:qn,blocking:ki,capture:null,charSet:null,checked:qn,cite:null,className:ki,cols:Et,colSpan:null,content:null,contentEditable:Xs,controls:qn,controlsList:ki,coords:Et|tE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:qn,defer:qn,dir:null,dirName:null,disabled:qn,download:Y1e,draggable:Xs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:qn,formTarget:null,headers:ki,height:Et,hidden:qn,high:Et,href:null,hrefLang:null,htmlFor:ki,httpEquiv:ki,id:null,imageSizes:null,imageSrcSet:null,inert:qn,inputMode:null,integrity:null,is:null,isMap:qn,itemId:null,itemProp:ki,itemRef:ki,itemScope:qn,itemType:ki,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:qn,low:Et,manifest:null,max:null,maxLength:Et,media:null,method:null,min:null,minLength:Et,multiple:qn,muted:qn,name:null,nonce:null,noModule:qn,noValidate:qn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:qn,optimum:Et,pattern:null,ping:ki,placeholder:null,playsInline:qn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:qn,referrerPolicy:null,rel:ki,required:qn,reversed:qn,rows:Et,rowSpan:Et,sandbox:ki,scope:null,scoped:qn,seamless:qn,selected:qn,shadowRootClonable:qn,shadowRootDelegatesFocus:qn,shadowRootMode:null,shape:null,size:Et,sizes:null,slot:null,span:Et,spellCheck:Xs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Et,step:null,style:null,tabIndex:Et,target:null,title:null,translate:null,type:null,typeMustMatch:qn,useMap:null,value:Xs,width:Et,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ki,axis:null,background:null,bgColor:null,border:Et,borderColor:null,bottomMargin:Et,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:qn,declare:qn,event:null,face:null,frame:null,frameBorder:null,hSpace:Et,leftMargin:Et,link:null,longDesc:null,lowSrc:null,marginHeight:Et,marginWidth:Et,noResize:qn,noHref:qn,noShade:qn,noWrap:qn,object:null,profile:null,prompt:null,rev:null,rightMargin:Et,rules:null,scheme:null,scrolling:Xs,standby:null,summary:null,text:null,topMargin:Et,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Et,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:qn,disableRemotePlayback:qn,prefix:null,property:null,results:Et,security:null,unselectable:null}}),YWe=tS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Q1e,properties:{about:Ul,accentHeight:Et,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Et,amplitude:Et,arabicForm:null,ascent:Et,attributeName:null,attributeType:null,azimuth:Et,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Et,by:null,calcMode:null,capHeight:Et,className:ki,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Et,diffuseConstant:Et,direction:null,display:null,dur:null,divisor:Et,dominantBaseline:null,download:qn,dx:null,dy:null,edgeMode:null,editable:null,elevation:Et,enableBackground:null,end:null,event:null,exponent:Et,externalResourcesRequired:null,fill:null,fillOpacity:Et,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:tE,g2:tE,glyphName:tE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Et,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Et,horizOriginX:Et,horizOriginY:Et,id:null,ideographic:Et,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Et,k:Et,k1:Et,k2:Et,k3:Et,k4:Et,kernelMatrix:Ul,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Et,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Et,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Et,overlineThickness:Et,paintOrder:null,panose1:null,path:null,pathLength:Et,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ki,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Et,pointsAtY:Et,pointsAtZ:Et,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Ul,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Ul,rev:Ul,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Ul,requiredFeatures:Ul,requiredFonts:Ul,requiredFormats:Ul,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Et,specularExponent:Et,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Et,strikethroughThickness:Et,string:null,stroke:null,strokeDashArray:Ul,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Et,strokeOpacity:Et,strokeWidth:null,style:null,surfaceScale:Et,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Ul,tabIndex:Et,tableValues:null,target:null,targetX:Et,targetY:Et,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Ul,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Et,underlineThickness:Et,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Et,values:null,vAlphabetic:Et,vMathematical:Et,vectorEffect:null,vHanging:Et,vIdeographic:Et,version:null,vertAdvY:Et,vertOriginX:Et,vertOriginY:Et,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Et,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),KWe=/^data[-\w.:]+$/i,Qse=/-[a-z]/g,XWe=/[A-Z]/g;function vL(e,t){const n=tA(t);let r=t,i=xf;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&KWe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Qse,JWe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Qse.test(s)){let o=s.replace(XWe,QWe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=eG}return new i(r,t)}function QWe(e){return"-"+e.toLowerCase()}function JWe(e){return e.charAt(1).toUpperCase()}const ZWe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},RI=G1e([X1e,K1e,Z1e,ebe,GWe],"html"),qy=G1e([X1e,K1e,Z1e,ebe,YWe],"svg");function Jse(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function tbe(e){return e.join(" ").trim()}var ew={},r8,Zse;function eGe(){if(Zse)return r8;Zse=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",f="",d="comment",h="declaration";r8=function(g,y){if(typeof g!="string")throw new TypeError("First argument must be a string");if(!g)return[];y=y||{};var b=1,_=1;function E(M){var B=M.match(t);B&&(b+=B.length);var V=M.lastIndexOf(u);_=~V?M.length-V:_+M.length}function C(){var M={line:b,column:_};return function(B){return B.position=new x(M),k(),B}}function x(M){this.start=M,this.end={line:b,column:_},this.source=y.source}x.prototype.content=g;function T(M){var B=new Error(y.source+":"+b+":"+_+": "+M);if(B.reason=M,B.filename=y.source,B.line=b,B.column=_,B.source=g,!y.silent)throw B}function A(M){var B=M.exec(g);if(B){var V=B[0];return E(V),g=g.slice(V.length),B}}function k(){A(n)}function N(M){var B;for(M=M||[];B=P();)B!==!1&&M.push(B);return M}function P(){var M=C();if(!(l!=g.charAt(0)||c!=g.charAt(1))){for(var B=2;f!=g.charAt(B)&&(c!=g.charAt(B)||l!=g.charAt(B+1));)++B;if(B+=2,f===g.charAt(B-1))return T("End of comment missing");var V=g.slice(2,B-2);return _+=2,E(V),g=g.slice(B),_+=2,M({type:d,comment:V})}}function D(){var M=C(),B=A(r);if(B){if(P(),!A(i))return T("property missing ':'");var V=A(s),z=M({type:h,property:p(B[0].replace(e,f)),value:V?p(V[0].replace(e,f)):f});return A(o),z}}function j(){var M=[];N(M);for(var B;B=D();)B!==!1&&(M.push(B),N(M));return M}return k(),j()};function p(g){return g?g.replace(a,f):f}return r8}var eoe;function tGe(){if(eoe)return ew;eoe=1;var e=ew&&ew.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ew,"__esModule",{value:!0});var t=e(eGe());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return ew.default=n,ew}var nGe=tGe();const toe=Ru(nGe),rGe=toe.default||toe,bL=nbe("end"),yp=nbe("start");function nbe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function iGe(e){const t=yp(e),n=bL(e);if(t&&n)return{start:t,end:n}}function c2(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?noe(e.position):"start"in e||"end"in e?noe(e):"line"in e||"column"in e?zU(e):""}function zU(e){return roe(e&&e.line)+":"+roe(e&&e.column)}function noe(e){return zU(e&&e.start)+"-"+zU(e&&e.end)}function roe(e){return e&&typeof e=="number"?e:1}class Xa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=c2(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Xa.prototype.file="";Xa.prototype.name="";Xa.prototype.reason="";Xa.prototype.message="";Xa.prototype.stack="";Xa.prototype.column=void 0;Xa.prototype.line=void 0;Xa.prototype.ancestors=void 0;Xa.prototype.cause=void 0;Xa.prototype.fatal=void 0;Xa.prototype.place=void 0;Xa.prototype.ruleId=void 0;Xa.prototype.source=void 0;const tG={}.hasOwnProperty,sGe=new Map,oGe=/[A-Z]/g,aGe=/-([a-z])/g,uGe=new Set(["table","tbody","thead","tfoot","tr"]),lGe=new Set(["td","th"]),rbe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function cGe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=vGe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=yGe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?qy:RI,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=ibe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function ibe(e,t,n){if(t.type==="element")return fGe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return dGe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return pGe(e,t,n);if(t.type==="mdxjsEsm")return hGe(e,t);if(t.type==="root")return mGe(e,t,n);if(t.type==="text")return gGe(e,t)}function fGe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=qy,e.schema=i),e.ancestors.push(t);const s=obe(e,t.tagName,!1),o=bGe(e,t);let a=rG(e,t);return uGe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!HWe(u):!0})),sbe(e,o,s,t),nG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function dGe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}nA(e,t.position)}function hGe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);nA(e,t.position)}function pGe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=qy,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:obe(e,t.name,!0),o=_Ge(e,t),a=rG(e,t);return sbe(e,o,s,t),nG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function mGe(e,t,n){const r={};return nG(r,rG(e,t)),e.create(t,e.Fragment,r,n)}function gGe(e,t){return t.value}function sbe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function nG(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function yGe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function vGe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=yp(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function bGe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&tG.call(t.properties,i)){const s=wGe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&lGe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function _Ge(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else nA(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else nA(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function rG(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:sGe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=ibe(e,s,o);a!==void 0&&n.push(a)}return n}function wGe(e,t,n){const r=vL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?W1e(n):tbe(n)),r.property==="style"){let i=typeof n=="object"?n:EGe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=xGe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?ZWe[r.property]||r.property:r.attribute,n]}}function EGe(e,t){const n={};try{rGe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Xa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=rbe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(aGe,TGe)),n[o]=s}}function obe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Yse(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Yse(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return tG.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);nA(e)}function nA(e,t){const n=new Xa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=rbe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function xGe(e){const t={};let n;for(n in e)tG.call(e,n)&&(t[SGe(n)]=e[n]);return t}function SGe(e){let t=e.replace(oGe,CGe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function TGe(e,t){return t.toUpperCase()}function CGe(e){return"-"+e.toLowerCase()}const i8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},AGe={};function IGe(e,t){const n=AGe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return abe(e,r,i)}function abe(e,t,n){if(kGe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return ioe(e.children,t,n)}return Array.isArray(e)?ioe(e,t,n):""}function ioe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=abe(e[i],t,n);return r.join("")}function kGe(e){return!!(e&&typeof e=="object")}const soe=document.createElement("i");function iG(e){const t="&"+e+";";soe.innerHTML=t;const n=soe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Vm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Gc(e,t){return e.length>0?(Vm(e,e.length,0,t),e):t}const ooe={}.hasOwnProperty;function RGe(e){const t={};let n=-1;for(;++n<e.length;)NGe(t,e[n]);return t}function NGe(e,t){let n;for(n in t){const i=(ooe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){ooe.call(i,o)||(i[o]=[]);const a=s[o];PGe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function PGe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Vm(e,0,0,r)}function ube(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function nE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const mh=Wy(/[A-Za-z]/),Jl=Wy(/[\dA-Za-z]/),DGe=Wy(/[#-'*+\--9=?A-Z^-~]/);function VU(e){return e!==null&&(e<32||e===127)}const HU=Wy(/\d/),OGe=Wy(/[\dA-Fa-f]/),MGe=Wy(/[!-/:-@[-`{-~]/);function Tn(e){return e!==null&&e<-2}function pl(e){return e!==null&&(e<0||e===32)}function Qr(e){return e===-2||e===-1||e===32}const $Ge=Wy(new RegExp("\\p{P}|\\p{S}","u")),LGe=Wy(/\s/);function Wy(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function nS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Jl(e.charCodeAt(n+1))&&Jl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Ri(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Qr(u)?(e.enter(n),a(u)):t(u)}function a(u){return Qr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const FGe={tokenize:jGe};function jGe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Ri(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Tn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const BGe={tokenize:UGe},aoe={tokenize:zGe};function UGe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(E){if(r<n.length){const C=n[r];return t.containerState=C[1],e.attempt(C[0].continuation,u,l)(E)}return l(E)}function u(E){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&_();const C=t.events.length;let x=C,T;for(;x--;)if(t.events[x][0]==="exit"&&t.events[x][1].type==="chunkFlow"){T=t.events[x][1].end;break}b(r);let A=C;for(;A<t.events.length;)t.events[A][1].end=Object.assign({},T),A++;return Vm(t.events,x+1,0,t.events.slice(C)),t.events.length=A,l(E)}return a(E)}function l(E){if(r===n.length){if(!i)return d(E);if(i.currentConstruct&&i.currentConstruct.concrete)return p(E);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(aoe,c,f)(E)}function c(E){return i&&_(),b(r),d(E)}function f(E){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(E)}function d(E){return t.containerState={},e.attempt(aoe,h,p)(E)}function h(E){return r++,n.push([t.currentConstruct,t.containerState]),d(E)}function p(E){if(E===null){i&&_(),b(0),e.consume(E);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),g(E)}function g(E){if(E===null){y(e.exit("chunkFlow"),!0),b(0),e.consume(E);return}return Tn(E)?(e.consume(E),y(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(E),g)}function y(E,C){const x=t.sliceStream(E);if(C&&x.push(null),E.previous=s,s&&(s.next=E),s=E,i.defineSkip(E.start),i.write(x),t.parser.lazy[E.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const A=t.events.length;let k=A,N,P;for(;k--;)if(t.events[k][0]==="exit"&&t.events[k][1].type==="chunkFlow"){if(N){P=t.events[k][1].end;break}N=!0}for(b(r),T=A;T<t.events.length;)t.events[T][1].end=Object.assign({},P),T++;Vm(t.events,k+1,0,t.events.slice(A)),t.events.length=T}}function b(E){let C=n.length;for(;C-- >E;){const x=n[C];t.containerState=x[1],x[0].exit.call(t,e)}n.length=E}function _(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function zGe(e,t,n){return Ri(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function uoe(e){if(e===null||pl(e)||LGe(e))return 1;if($Ge(e))return 2}function sG(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const qU={name:"attention",tokenize:HGe,resolveAll:VGe};function VGe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);loe(f,-u),loe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Gc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Gc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Gc(l,sG(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Gc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Gc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Vm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function HGe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=uoe(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=uoe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function loe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const qGe={name:"autolink",tokenize:WGe};function WGe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return mh(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Jl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Jl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||VU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):DGe(h)?(e.consume(h),l):n(h)}function c(h){return Jl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Jl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const _L={tokenize:GGe,partial:!0};function GGe(e,t,n){return r;function r(s){return Qr(s)?Ri(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Tn(s)?t(s):n(s)}}const lbe={name:"blockQuote",tokenize:YGe,continuation:{tokenize:KGe},exit:XGe};function YGe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Qr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function KGe(e,t,n){const r=this;return i;function i(o){return Qr(o)?Ri(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(lbe,t,n)(o)}}function XGe(e){e.exit("blockQuote")}const cbe={name:"characterEscape",tokenize:QGe};function QGe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return MGe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const fbe={name:"characterReference",tokenize:JGe};function JGe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Jl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=OGe,c):(e.enter("characterReferenceValue"),s=7,o=HU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Jl&&!iG(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const coe={tokenize:eYe,partial:!0},foe={name:"codeFenced",tokenize:ZGe,concrete:!0};function ZGe(e,t,n){const r=this,i={tokenize:x,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const A=r.events[r.events.length-1];return s=A&&A[1].type==="linePrefix"?A[2].sliceSerialize(A[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),Qr(T)?Ri(e,f,"whitespace")(T):f(T))}function f(T){return T===null||Tn(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(coe,g,C)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||Tn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):Qr(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Ri(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||Tn(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||Tn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),p)}function g(T){return e.attempt(i,C,y)(T)}function y(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),b}function b(T){return s>0&&Qr(T)?Ri(e,_,"linePrefix",s+1)(T):_(T)}function _(T){return T===null||Tn(T)?e.check(coe,g,C)(T):(e.enter("codeFlowValue"),E(T))}function E(T){return T===null||Tn(T)?(e.exit("codeFlowValue"),_(T)):(e.consume(T),E)}function C(T){return e.exit("codeFenced"),t(T)}function x(T,A,k){let N=0;return P;function P(V){return T.enter("lineEnding"),T.consume(V),T.exit("lineEnding"),D}function D(V){return T.enter("codeFencedFence"),Qr(V)?Ri(T,j,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(V):j(V)}function j(V){return V===a?(T.enter("codeFencedFenceSequence"),M(V)):k(V)}function M(V){return V===a?(N++,T.consume(V),M):N>=o?(T.exit("codeFencedFenceSequence"),Qr(V)?Ri(T,B,"whitespace")(V):B(V)):k(V)}function B(V){return V===null||Tn(V)?(T.exit("codeFencedFence"),A(V)):k(V)}}}function eYe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const s8={name:"codeIndented",tokenize:nYe},tYe={tokenize:rYe,partial:!0};function nYe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Ri(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Tn(l)?e.attempt(tYe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Tn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function rYe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Tn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Ri(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Tn(o)?i(o):n(o)}}const iYe={name:"codeText",tokenize:aYe,resolve:sYe,previous:oYe};function sYe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function oYe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function aYe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Tn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Tn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class uYe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&kT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),kT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),kT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);kT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);kT(this.left,n.reverse())}}}function kT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function dbe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new uYe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,lYe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Vm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function lYe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,g=0;const y=[g];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(g=d+1,y.push(g),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):y.pop(),d=y.length;d--;){const b=a.slice(y[d],y[d+1]),_=s.pop();u.push([_,_+b.length-1]),e.splice(_,2,b)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const cYe={tokenize:hYe,resolve:dYe},fYe={tokenize:pYe,partial:!0};function dYe(e){return dbe(e),e}function hYe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Tn(a)?e.check(fYe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function pYe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Ri(e,s,"linePrefix")}function s(o){if(o===null||Tn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function hbe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(b){return b===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(b),e.exit(s),d):b===null||b===32||b===41||VU(b)?n(b):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),g(b))}function d(b){return b===62?(e.enter(s),e.consume(b),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(b))}function h(b){return b===62?(e.exit("chunkString"),e.exit(a),d(b)):b===null||b===60||Tn(b)?n(b):(e.consume(b),b===92?p:h)}function p(b){return b===60||b===62||b===92?(e.consume(b),h):h(b)}function g(b){return!c&&(b===null||b===41||pl(b))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(b)):c<l&&b===40?(e.consume(b),c++,g):b===41?(e.consume(b),c--,g):b===null||b===32||b===40||VU(b)?n(b):(e.consume(b),b===92?y:g)}function y(b){return b===40||b===41||b===92?(e.consume(b),g):g(b)}}function pbe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Tn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Tn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Qr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function mbe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Tn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Ri(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Tn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function f2(e,t){let n;return r;function r(i){return Tn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Qr(i)?Ri(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const mYe={name:"definition",tokenize:yYe},gYe={tokenize:vYe,partial:!0};function yYe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return pbe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=nE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return pl(h)?f2(e,l)(h):l(h)}function l(h){return hbe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(gYe,f,f)(h)}function f(h){return Qr(h)?Ri(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Tn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function vYe(e,t,n){return r;function r(a){return pl(a)?f2(e,i)(a):n(a)}function i(a){return mbe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Qr(a)?Ri(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Tn(a)?t(a):n(a)}}const bYe={name:"hardBreakEscape",tokenize:_Ye};function _Ye(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Tn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const wYe={name:"headingAtx",tokenize:xYe,resolve:EYe};function EYe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Vm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function xYe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||pl(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Tn(c)?(e.exit("atxHeading"),t(c)):Qr(c)?Ri(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||pl(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const SYe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],doe=["pre","script","style","textarea"],TYe={name:"htmlFlow",tokenize:kYe,resolveTo:IYe,concrete:!0},CYe={tokenize:NYe,partial:!0},AYe={tokenize:RYe,partial:!0};function IYe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function kYe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(q){return c(q)}function c(q){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(q),f}function f(q){return q===33?(e.consume(q),d):q===47?(e.consume(q),s=!0,g):q===63?(e.consume(q),i=3,r.interrupt?t:L):mh(q)?(e.consume(q),o=String.fromCharCode(q),y):n(q)}function d(q){return q===45?(e.consume(q),i=2,h):q===91?(e.consume(q),i=5,a=0,p):mh(q)?(e.consume(q),i=4,r.interrupt?t:L):n(q)}function h(q){return q===45?(e.consume(q),r.interrupt?t:L):n(q)}function p(q){const X="CDATA[";return q===X.charCodeAt(a++)?(e.consume(q),a===X.length?r.interrupt?t:j:p):n(q)}function g(q){return mh(q)?(e.consume(q),o=String.fromCharCode(q),y):n(q)}function y(q){if(q===null||q===47||q===62||pl(q)){const X=q===47,Z=o.toLowerCase();return!X&&!s&&doe.includes(Z)?(i=1,r.interrupt?t(q):j(q)):SYe.includes(o.toLowerCase())?(i=6,X?(e.consume(q),b):r.interrupt?t(q):j(q)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(q):s?_(q):E(q))}return q===45||Jl(q)?(e.consume(q),o+=String.fromCharCode(q),y):n(q)}function b(q){return q===62?(e.consume(q),r.interrupt?t:j):n(q)}function _(q){return Qr(q)?(e.consume(q),_):P(q)}function E(q){return q===47?(e.consume(q),P):q===58||q===95||mh(q)?(e.consume(q),C):Qr(q)?(e.consume(q),E):P(q)}function C(q){return q===45||q===46||q===58||q===95||Jl(q)?(e.consume(q),C):x(q)}function x(q){return q===61?(e.consume(q),T):Qr(q)?(e.consume(q),x):E(q)}function T(q){return q===null||q===60||q===61||q===62||q===96?n(q):q===34||q===39?(e.consume(q),u=q,A):Qr(q)?(e.consume(q),T):k(q)}function A(q){return q===u?(e.consume(q),u=null,N):q===null||Tn(q)?n(q):(e.consume(q),A)}function k(q){return q===null||q===34||q===39||q===47||q===60||q===61||q===62||q===96||pl(q)?x(q):(e.consume(q),k)}function N(q){return q===47||q===62||Qr(q)?E(q):n(q)}function P(q){return q===62?(e.consume(q),D):n(q)}function D(q){return q===null||Tn(q)?j(q):Qr(q)?(e.consume(q),D):n(q)}function j(q){return q===45&&i===2?(e.consume(q),z):q===60&&i===1?(e.consume(q),G):q===62&&i===4?(e.consume(q),U):q===63&&i===3?(e.consume(q),L):q===93&&i===5?(e.consume(q),Q):Tn(q)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(CYe,K,M)(q)):q===null||Tn(q)?(e.exit("htmlFlowData"),M(q)):(e.consume(q),j)}function M(q){return e.check(AYe,B,K)(q)}function B(q){return e.enter("lineEnding"),e.consume(q),e.exit("lineEnding"),V}function V(q){return q===null||Tn(q)?M(q):(e.enter("htmlFlowData"),j(q))}function z(q){return q===45?(e.consume(q),L):j(q)}function G(q){return q===47?(e.consume(q),o="",Y):j(q)}function Y(q){if(q===62){const X=o.toLowerCase();return doe.includes(X)?(e.consume(q),U):j(q)}return mh(q)&&o.length<8?(e.consume(q),o+=String.fromCharCode(q),Y):j(q)}function Q(q){return q===93?(e.consume(q),L):j(q)}function L(q){return q===62?(e.consume(q),U):q===45&&i===2?(e.consume(q),L):j(q)}function U(q){return q===null||Tn(q)?(e.exit("htmlFlowData"),K(q)):(e.consume(q),U)}function K(q){return e.exit("htmlFlow"),t(q)}}function RYe(e,t,n){const r=this;return i;function i(o){return Tn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function NYe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(_L,t,n)}}const PYe={name:"htmlText",tokenize:DYe};function DYe(e,t,n){const r=this;let i,s,o;return a;function a(L){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(L),u}function u(L){return L===33?(e.consume(L),l):L===47?(e.consume(L),x):L===63?(e.consume(L),E):mh(L)?(e.consume(L),k):n(L)}function l(L){return L===45?(e.consume(L),c):L===91?(e.consume(L),s=0,p):mh(L)?(e.consume(L),_):n(L)}function c(L){return L===45?(e.consume(L),h):n(L)}function f(L){return L===null?n(L):L===45?(e.consume(L),d):Tn(L)?(o=f,G(L)):(e.consume(L),f)}function d(L){return L===45?(e.consume(L),h):f(L)}function h(L){return L===62?z(L):L===45?d(L):f(L)}function p(L){const U="CDATA[";return L===U.charCodeAt(s++)?(e.consume(L),s===U.length?g:p):n(L)}function g(L){return L===null?n(L):L===93?(e.consume(L),y):Tn(L)?(o=g,G(L)):(e.consume(L),g)}function y(L){return L===93?(e.consume(L),b):g(L)}function b(L){return L===62?z(L):L===93?(e.consume(L),b):g(L)}function _(L){return L===null||L===62?z(L):Tn(L)?(o=_,G(L)):(e.consume(L),_)}function E(L){return L===null?n(L):L===63?(e.consume(L),C):Tn(L)?(o=E,G(L)):(e.consume(L),E)}function C(L){return L===62?z(L):E(L)}function x(L){return mh(L)?(e.consume(L),T):n(L)}function T(L){return L===45||Jl(L)?(e.consume(L),T):A(L)}function A(L){return Tn(L)?(o=A,G(L)):Qr(L)?(e.consume(L),A):z(L)}function k(L){return L===45||Jl(L)?(e.consume(L),k):L===47||L===62||pl(L)?N(L):n(L)}function N(L){return L===47?(e.consume(L),z):L===58||L===95||mh(L)?(e.consume(L),P):Tn(L)?(o=N,G(L)):Qr(L)?(e.consume(L),N):z(L)}function P(L){return L===45||L===46||L===58||L===95||Jl(L)?(e.consume(L),P):D(L)}function D(L){return L===61?(e.consume(L),j):Tn(L)?(o=D,G(L)):Qr(L)?(e.consume(L),D):N(L)}function j(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),i=L,M):Tn(L)?(o=j,G(L)):Qr(L)?(e.consume(L),j):(e.consume(L),B)}function M(L){return L===i?(e.consume(L),i=void 0,V):L===null?n(L):Tn(L)?(o=M,G(L)):(e.consume(L),M)}function B(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||pl(L)?N(L):(e.consume(L),B)}function V(L){return L===47||L===62||pl(L)?N(L):n(L)}function z(L){return L===62?(e.consume(L),e.exit("htmlTextData"),e.exit("htmlText"),t):n(L)}function G(L){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),Y}function Y(L){return Qr(L)?Ri(e,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):Q(L)}function Q(L){return e.enter("htmlTextData"),o(L)}}const oG={name:"labelEnd",tokenize:jYe,resolveTo:FYe,resolveAll:LYe},OYe={tokenize:BYe},MYe={tokenize:UYe},$Ye={tokenize:zYe};function LYe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function FYe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Gc(a,e.slice(s+1,s+r+3)),a=Gc(a,[["enter",c,t]]),a=Gc(a,sG(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Gc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Gc(a,e.slice(o+1)),a=Gc(a,[["exit",u,t]]),Vm(e,s,e.length,a),e}function jYe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(nE(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(OYe,c,o?c:f)(d):d===91?e.attempt(MYe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt($Ye,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function BYe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return pl(f)?f2(e,s)(f):s(f)}function s(f){return f===41?c(f):hbe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return pl(f)?f2(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?mbe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return pl(f)?f2(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function UYe(e,t,n){const r=this;return i;function i(a){return pbe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(nE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function zYe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const VYe={name:"labelStartImage",tokenize:HYe,resolveAll:oG.resolveAll};function HYe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const qYe={name:"labelStartLink",tokenize:WYe,resolveAll:oG.resolveAll};function WYe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const o8={name:"lineEnding",tokenize:GYe};function GYe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Ri(e,t,"linePrefix")}}const mD={name:"thematicBreak",tokenize:YYe};function YYe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Tn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Qr(l)?Ri(e,a,"whitespace")(l):a(l))}}const Ku={name:"list",tokenize:QYe,continuation:{tokenize:JYe},exit:eKe},KYe={tokenize:tKe,partial:!0},XYe={tokenize:ZYe,partial:!0};function QYe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:HU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(mD,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return HU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(_L,r.interrupt?n:c,e.attempt(KYe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Qr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function JYe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(_L,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ri(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Qr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(XYe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ri(e,e.attempt(Ku,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function ZYe(e,t,n){const r=this;return Ri(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function eKe(e){e.exit(this.containerState.type)}function tKe(e,t,n){const r=this;return Ri(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Qr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const hoe={name:"setextUnderline",tokenize:rKe,resolveTo:nKe};function nKe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function rKe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Qr(l)?Ri(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Tn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const iKe={tokenize:sKe};function sKe(e){const t=this,n=e.attempt(_L,r,e.attempt(this.parser.constructs.flowInitial,i,Ri(e,e.attempt(this.parser.constructs.flow,i,e.attempt(cYe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const oKe={resolveAll:ybe()},aKe=gbe("string"),uKe=gbe("text");function gbe(e){return{tokenize:t,resolveAll:ybe(e==="text"?lKe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function ybe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function lKe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function cKe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:_,enter:E,exit:C,attempt:A(x),check:A(T),interrupt:A(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:g,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(D){return o=Gc(o,D),y(),o[o.length-1]!==null?[]:(k(t,0),l.events=sG(s,l.events,l),l.events)}function d(D,j){return dKe(h(D),j)}function h(D){return fKe(o,D)}function p(){const{line:D,column:j,offset:M,_index:B,_bufferIndex:V}=r;return{line:D,column:j,offset:M,_index:B,_bufferIndex:V}}function g(D){i[D.line]=D.column,P()}function y(){let D;for(;r._index<o.length;){const j=o[r._index];if(typeof j=="string")for(D=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===D&&r._bufferIndex<j.length;)b(j.charCodeAt(r._bufferIndex));else b(j)}}function b(D){c=c(D)}function _(D){Tn(D)?(r.line++,r.column=1,r.offset+=D===-3?2:1,P()):D!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=D}function E(D,j){const M=j||{};return M.type=D,M.start=p(),l.events.push(["enter",M,l]),a.push(M),M}function C(D){const j=a.pop();return j.end=p(),l.events.push(["exit",j,l]),j}function x(D,j){k(D,j.from)}function T(D,j){j.restore()}function A(D,j){return M;function M(B,V,z){let G,Y,Q,L;return Array.isArray(B)?K(B):"tokenize"in B?K([B]):U(B);function U(ae){return he;function he(ge){const be=ge!==null&&ae[ge],Ce=ge!==null&&ae.null,oe=[...Array.isArray(be)?be:be?[be]:[],...Array.isArray(Ce)?Ce:Ce?[Ce]:[]];return K(oe)(ge)}}function K(ae){return G=ae,Y=0,ae.length===0?z:q(ae[Y])}function q(ae){return he;function he(ge){return L=N(),Q=ae,ae.partial||(l.currentConstruct=ae),ae.name&&l.parser.constructs.disable.null.includes(ae.name)?Z():ae.tokenize.call(j?Object.assign(Object.create(l),j):l,u,X,Z)(ge)}}function X(ae){return D(Q,L),V}function Z(ae){return L.restore(),++Y<G.length?q(G[Y]):z}}}function k(D,j){D.resolveAll&&!s.includes(D)&&s.push(D),D.resolve&&Vm(l.events,j,l.events.length-j,D.resolve(l.events.slice(j),l)),D.resolveTo&&(l.events=D.resolveTo(l.events,l))}function N(){const D=p(),j=l.previous,M=l.currentConstruct,B=l.events.length,V=Array.from(a);return{restore:z,from:B};function z(){r=D,l.previous=j,l.currentConstruct=M,l.events.length=B,a=V,P()}}function P(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function fKe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function dKe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const hKe={42:Ku,43:Ku,45:Ku,48:Ku,49:Ku,50:Ku,51:Ku,52:Ku,53:Ku,54:Ku,55:Ku,56:Ku,57:Ku,62:lbe},pKe={91:mYe},mKe={[-2]:s8,[-1]:s8,32:s8},gKe={35:wYe,42:mD,45:[hoe,mD],60:TYe,61:hoe,95:mD,96:foe,126:foe},yKe={38:fbe,92:cbe},vKe={[-5]:o8,[-4]:o8,[-3]:o8,33:VYe,38:fbe,42:qU,60:[qGe,PYe],91:qYe,92:[bYe,cbe],93:oG,95:qU,96:iYe},bKe={null:[qU,oKe]},_Ke={null:[42,95]},wKe={null:[]},EKe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:_Ke,contentInitial:pKe,disable:wKe,document:hKe,flow:gKe,flowInitial:mKe,insideSpan:bKe,string:yKe,text:vKe},Symbol.toStringTag,{value:"Module"}));function xKe(e){const n=RGe([EKe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(FGe),document:i(BGe),flow:i(iKe),string:i(aKe),text:i(uKe)};return r;function i(s){return o;function o(a){return cKe(r,s,a)}}}function SKe(e){for(;!dbe(e););return e}const poe=/[\0\t\n\r]/g;function TKe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(poe.lastIndex=f,l=poe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const CKe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function AKe(e){return e.replace(CKe,IKe)}function IKe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return ube(n.slice(s?2:1),s?16:10)}return iG(n)||e}const vbe={}.hasOwnProperty;function kKe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),RKe(n)(SKe(xKe(n).document().write(TKe()(e,t,!0))))}function RKe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(rt),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(Ke),blockQuote:s(Ce),characterEscape:N,characterReference:N,codeFenced:s(oe),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(oe,o),codeText:s(re,o),codeTextData:N,data:N,codeFlowValue:N,definition:s(xe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Re),hardBreakEscape:s(Qe),hardBreakTrailing:s(Qe),htmlFlow:s(ke,o),htmlFlowData:N,htmlText:s(ke,o),htmlTextData:N,image:s(Ue),label:o,link:s(rt),listItem:s(Rt),listItemValue:d,listOrdered:s(ft,f),listUnordered:s(ft),paragraph:s(st),reference:q,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ke),strong:s(Ie),thematicBreak:s(Ot)},exit:{atxHeading:u(),atxHeadingSequence:x,autolink:u(),autolinkEmail:be,autolinkProtocol:ge,blockQuote:u(),characterEscapeValue:P,characterReferenceMarkerHexadecimal:Z,characterReferenceMarkerNumeric:Z,characterReferenceValue:ae,characterReference:he,codeFenced:u(y),codeFencedFence:g,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:P,codeIndented:u(b),codeText:u(V),codeTextData:P,data:P,definition:u(),definitionDestinationString:C,definitionLabelString:_,definitionTitleString:E,emphasis:u(),hardBreakEscape:u(j),hardBreakTrailing:u(j),htmlFlow:u(M),htmlFlowData:P,htmlText:u(B),htmlTextData:P,image:u(G),label:Q,labelText:Y,lineEnding:D,link:u(z),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:X,resourceDestinationString:L,resourceTitleString:U,resource:K,setextHeading:u(k),setextHeadingLineSequence:A,setextHeadingText:T,strong:u(),thematicBreak:u()}};bbe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Ne){let ze={type:"root",children:[]};const ot={stack:[ze],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},St=[];let $t=-1;for(;++$t<Ne.length;)if(Ne[$t][1].type==="listOrdered"||Ne[$t][1].type==="listUnordered")if(Ne[$t][0]==="enter")St.push($t);else{const Vn=St.pop();$t=i(Ne,Vn,$t)}for($t=-1;++$t<Ne.length;){const Vn=t[Ne[$t][0]];vbe.call(Vn,Ne[$t][1].type)&&Vn[Ne[$t][1].type].call(Object.assign({sliceSerialize:Ne[$t][2].sliceSerialize},ot),Ne[$t][1])}if(ot.tokenStack.length>0){const Vn=ot.tokenStack[ot.tokenStack.length-1];(Vn[1]||moe).call(ot,void 0,Vn[0])}for(ze.position={start:Jg(Ne.length>0?Ne[0][1].start:{line:1,column:1,offset:0}),end:Jg(Ne.length>0?Ne[Ne.length-2][1].end:{line:1,column:1,offset:0})},$t=-1;++$t<t.transforms.length;)ze=t.transforms[$t](ze)||ze;return ze}function i(Ne,ze,ot){let St=ze-1,$t=-1,Vn=!1,Yr,tr,vr,Fn;for(;++St<=ot;){const Un=Ne[St];switch(Un[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Un[0]==="enter"?$t++:$t--,Fn=void 0;break}case"lineEndingBlank":{Un[0]==="enter"&&(Yr&&!Fn&&!$t&&!vr&&(vr=St),Fn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Fn=void 0}if(!$t&&Un[0]==="enter"&&Un[1].type==="listItemPrefix"||$t===-1&&Un[0]==="exit"&&(Un[1].type==="listUnordered"||Un[1].type==="listOrdered")){if(Yr){let ur=St;for(tr=void 0;ur--;){const lr=Ne[ur];if(lr[1].type==="lineEnding"||lr[1].type==="lineEndingBlank"){if(lr[0]==="exit")continue;tr&&(Ne[tr][1].type="lineEndingBlank",Vn=!0),lr[1].type="lineEnding",tr=ur}else if(!(lr[1].type==="linePrefix"||lr[1].type==="blockQuotePrefix"||lr[1].type==="blockQuotePrefixWhitespace"||lr[1].type==="blockQuoteMarker"||lr[1].type==="listItemIndent"))break}vr&&(!tr||vr<tr)&&(Yr._spread=!0),Yr.end=Object.assign({},tr?Ne[tr][1].start:Un[1].end),Ne.splice(tr||St,0,["exit",Yr,Un[2]]),St++,ot++}if(Un[1].type==="listItemPrefix"){const ur={type:"listItem",_spread:!1,start:Object.assign({},Un[1].start),end:void 0};Yr=ur,Ne.splice(St,0,["enter",ur,Un[2]]),St++,ot++,vr=void 0,Fn=!0}}}return Ne[ze][1]._spread=Vn,ot}function s(Ne,ze){return ot;function ot(St){a.call(this,Ne(St),St),ze&&ze.call(this,St)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Ne,ze,ot){this.stack[this.stack.length-1].children.push(Ne),this.stack.push(Ne),this.tokenStack.push([ze,ot]),Ne.position={start:Jg(ze.start),end:void 0}}function u(Ne){return ze;function ze(ot){Ne&&Ne.call(this,ot),l.call(this,ot)}}function l(Ne,ze){const ot=this.stack.pop(),St=this.tokenStack.pop();if(St)St[0].type!==Ne.type&&(ze?ze.call(this,Ne,St[0]):(St[1]||moe).call(this,Ne,St[0]));else throw new Error("Cannot close `"+Ne.type+"` ("+c2({start:Ne.start,end:Ne.end})+"): its not open");ot.position.end=Jg(Ne.end)}function c(){return IGe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(Ne){if(this.data.expectingFirstListItemValue){const ze=this.stack[this.stack.length-2];ze.start=Number.parseInt(this.sliceSerialize(Ne),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Ne=this.resume(),ze=this.stack[this.stack.length-1];ze.lang=Ne}function p(){const Ne=this.resume(),ze=this.stack[this.stack.length-1];ze.meta=Ne}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function y(){const Ne=this.resume(),ze=this.stack[this.stack.length-1];ze.value=Ne.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function b(){const Ne=this.resume(),ze=this.stack[this.stack.length-1];ze.value=Ne.replace(/(\r?\n|\r)$/g,"")}function _(Ne){const ze=this.resume(),ot=this.stack[this.stack.length-1];ot.label=ze,ot.identifier=nE(this.sliceSerialize(Ne)).toLowerCase()}function E(){const Ne=this.resume(),ze=this.stack[this.stack.length-1];ze.title=Ne}function C(){const Ne=this.resume(),ze=this.stack[this.stack.length-1];ze.url=Ne}function x(Ne){const ze=this.stack[this.stack.length-1];if(!ze.depth){const ot=this.sliceSerialize(Ne).length;ze.depth=ot}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function A(Ne){const ze=this.stack[this.stack.length-1];ze.depth=this.sliceSerialize(Ne).codePointAt(0)===61?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function N(Ne){const ot=this.stack[this.stack.length-1].children;let St=ot[ot.length-1];(!St||St.type!=="text")&&(St=kt(),St.position={start:Jg(Ne.start),end:void 0},ot.push(St)),this.stack.push(St)}function P(Ne){const ze=this.stack.pop();ze.value+=this.sliceSerialize(Ne),ze.position.end=Jg(Ne.end)}function D(Ne){const ze=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ot=ze.children[ze.children.length-1];ot.position.end=Jg(Ne.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(ze.type)&&(N.call(this,Ne),P.call(this,Ne))}function j(){this.data.atHardBreak=!0}function M(){const Ne=this.resume(),ze=this.stack[this.stack.length-1];ze.value=Ne}function B(){const Ne=this.resume(),ze=this.stack[this.stack.length-1];ze.value=Ne}function V(){const Ne=this.resume(),ze=this.stack[this.stack.length-1];ze.value=Ne}function z(){const Ne=this.stack[this.stack.length-1];if(this.data.inReference){const ze=this.data.referenceType||"shortcut";Ne.type+="Reference",Ne.referenceType=ze,delete Ne.url,delete Ne.title}else delete Ne.identifier,delete Ne.label;this.data.referenceType=void 0}function G(){const Ne=this.stack[this.stack.length-1];if(this.data.inReference){const ze=this.data.referenceType||"shortcut";Ne.type+="Reference",Ne.referenceType=ze,delete Ne.url,delete Ne.title}else delete Ne.identifier,delete Ne.label;this.data.referenceType=void 0}function Y(Ne){const ze=this.sliceSerialize(Ne),ot=this.stack[this.stack.length-2];ot.label=AKe(ze),ot.identifier=nE(ze).toLowerCase()}function Q(){const Ne=this.stack[this.stack.length-1],ze=this.resume(),ot=this.stack[this.stack.length-1];if(this.data.inReference=!0,ot.type==="link"){const St=Ne.children;ot.children=St}else ot.alt=ze}function L(){const Ne=this.resume(),ze=this.stack[this.stack.length-1];ze.url=Ne}function U(){const Ne=this.resume(),ze=this.stack[this.stack.length-1];ze.title=Ne}function K(){this.data.inReference=void 0}function q(){this.data.referenceType="collapsed"}function X(Ne){const ze=this.resume(),ot=this.stack[this.stack.length-1];ot.label=ze,ot.identifier=nE(this.sliceSerialize(Ne)).toLowerCase(),this.data.referenceType="full"}function Z(Ne){this.data.characterReferenceType=Ne.type}function ae(Ne){const ze=this.sliceSerialize(Ne),ot=this.data.characterReferenceType;let St;ot?(St=ube(ze,ot==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):St=iG(ze);const $t=this.stack[this.stack.length-1];$t.value+=St}function he(Ne){const ze=this.stack.pop();ze.position.end=Jg(Ne.end)}function ge(Ne){P.call(this,Ne);const ze=this.stack[this.stack.length-1];ze.url=this.sliceSerialize(Ne)}function be(Ne){P.call(this,Ne);const ze=this.stack[this.stack.length-1];ze.url="mailto:"+this.sliceSerialize(Ne)}function Ce(){return{type:"blockquote",children:[]}}function oe(){return{type:"code",lang:null,meta:null,value:""}}function re(){return{type:"inlineCode",value:""}}function xe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Re(){return{type:"emphasis",children:[]}}function Ke(){return{type:"heading",depth:0,children:[]}}function Qe(){return{type:"break"}}function ke(){return{type:"html",value:""}}function Ue(){return{type:"image",title:null,url:"",alt:null}}function rt(){return{type:"link",title:null,url:"",children:[]}}function ft(Ne){return{type:"list",ordered:Ne.type==="listOrdered",start:null,spread:Ne._spread,children:[]}}function Rt(Ne){return{type:"listItem",spread:Ne._spread,checked:null,children:[]}}function st(){return{type:"paragraph",children:[]}}function Ie(){return{type:"strong",children:[]}}function kt(){return{type:"text",value:""}}function Ot(){return{type:"thematicBreak"}}}function Jg(e){return{line:e.line,column:e.column,offset:e.offset}}function bbe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?bbe(e,r):NKe(e,r)}}function NKe(e,t){let n;for(n in t)if(vbe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function moe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+c2({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+c2({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+c2({start:t.start,end:t.end})+") is still open")}function PKe(e){const t=this;t.parser=n;function n(r){return kKe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function DKe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function OKe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function MKe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function $Ke(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function LKe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function FKe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=nS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function jKe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function BKe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function _be(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function UKe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return _be(e,t);const i={src:nS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function zKe(e,t){const n={src:nS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function VKe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function HKe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return _be(e,t);const i={href:nS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function qKe(e,t){const n={href:nS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function WKe(e,t,n){const r=e.all(t),i=n?GKe(n):wbe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function GKe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=wbe(n[r])}return t}function wbe(e){const t=e.spread;return t??e.children.length>1}function YKe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function KKe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function XKe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function QKe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function JKe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=yp(t.children[1]),u=bL(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function ZKe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function eXe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const goe=9,yoe=32;function tXe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(voe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(voe(t.slice(i),i>0,!1)),s.join("")}function voe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===goe||s===yoe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===goe||s===yoe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function nXe(e,t){const n={type:"text",value:tXe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function rXe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const iXe={blockquote:DKe,break:OKe,code:MKe,delete:$Ke,emphasis:LKe,footnoteReference:FKe,heading:jKe,html:BKe,imageReference:UKe,image:zKe,inlineCode:VKe,linkReference:HKe,link:qKe,listItem:WKe,list:YKe,paragraph:KKe,root:XKe,strong:QKe,table:JKe,tableCell:eXe,tableRow:ZKe,text:nXe,thematicBreak:rXe,toml:cN,yaml:cN,definition:cN,footnoteDefinition:cN};function cN(){}const Ebe=-1,wL=0,kO=1,RO=2,aG=3,uG=4,lG=5,cG=6,xbe=7,Sbe=8,boe=typeof self=="object"?self:globalThis,sXe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case wL:case Ebe:return n(o,i);case kO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case RO:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case aG:return n(new Date(o),i);case uG:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case lG:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case cG:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case xbe:{const{name:a,message:u}=o;return n(new boe[a](u),i)}case Sbe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new boe[s](o),i)};return r},_oe=e=>sXe(new Map,e)(0),tw="",{toString:oXe}={},{keys:aXe}=Object,RT=e=>{const t=typeof e;if(t!=="object"||!e)return[wL,t];const n=oXe.call(e).slice(8,-1);switch(n){case"Array":return[kO,tw];case"Object":return[RO,tw];case"Date":return[aG,tw];case"RegExp":return[uG,tw];case"Map":return[lG,tw];case"Set":return[cG,tw]}return n.includes("Array")?[kO,n]:n.includes("Error")?[xbe,n]:[RO,n]},fN=([e,t])=>e===wL&&(t==="function"||t==="symbol"),uXe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=RT(o);switch(a){case wL:{let c=o;switch(u){case"bigint":a=Sbe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([Ebe],o)}return i([a,c],o)}case kO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case RO:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of aXe(o))(e||!fN(RT(o[d])))&&c.push([s(d),s(o[d])]);return f}case aG:return i([a,o.toISOString()],o);case uG:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case lG:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(fN(RT(d))||fN(RT(h))))&&c.push([s(d),s(h)]);return f}case cG:{const c=[],f=i([a,c],o);for(const d of o)(e||!fN(RT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},woe=(e,{json:t,lossy:n}={})=>{const r=[];return uXe(!(t||n),!!t,new Map,r)(e),r},ME=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?_oe(woe(e,t)):structuredClone(e):(e,t)=>_oe(woe(e,t));function lXe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function cXe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function fXe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||lXe,r=e.options.footnoteBackLabel||cXe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=nS(f.toLowerCase());let h=0;const p=[],g=e.footnoteCounts.get(f);for(;g!==void 0&&++h<=g;){p.length>0&&p.push({type:"text",value:" "});let _=typeof n=="string"?n:n(u,h);typeof _=="string"&&(_={type:"text",value:_}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const y=c[c.length-1];if(y&&y.type==="element"&&y.tagName==="p"){const _=y.children[y.children.length-1];_&&_.type==="text"?_.value+=" ":y.children.push({type:"text",value:" "}),y.children.push(...p)}else c.push(...p);const b={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,b),a.push(b)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...ME(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const Tbe=function(e){if(e==null)return mXe;if(typeof e=="function")return EL(e);if(typeof e=="object")return Array.isArray(e)?dXe(e):hXe(e);if(typeof e=="string")return pXe(e);throw new Error("Expected function, string, or object as test")};function dXe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Tbe(e[n]);return EL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function hXe(e){const t=e;return EL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function pXe(e){return EL(t);function t(n){return n&&n.type===e}}function EL(e){return t;function t(n,r,i){return!!(gXe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function mXe(){return!0}function gXe(e){return e!==null&&typeof e=="object"&&"type"in e}const Cbe=[],yXe=!0,Eoe=!1,vXe="skip";function bXe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=Tbe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=Cbe,p,g,y;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=_Xe(n(u,c)),h[0]===Eoe))return h;if("children"in u&&u.children){const b=u;if(b.children&&h[0]!==vXe)for(g=(r?b.children.length:-1)+o,y=c.concat(b);g>-1&&g<b.children.length;){const _=b.children[g];if(p=a(_,g,y)(),p[0]===Eoe)return p;g=typeof p[1]=="number"?p[1]:g+o}}return h}}}function _Xe(e){return Array.isArray(e)?e:typeof e=="number"?[yXe,e]:e==null?Cbe:[e]}function fG(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),bXe(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const WU={}.hasOwnProperty,wXe={};function EXe(e,t){const n=t||wXe,r=new Map,i=new Map,s=new Map,o={...iXe,...n.handlers},a={all:l,applyData:SXe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:xXe,wrap:CXe};return fG(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(WU.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:g,...y}=c,b=ME(y);return b.children=a.all(c),b}return ME(c)}return(a.options.unknownHandler||TXe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=xoe(p.value)),!Array.isArray(p)&&p.type==="element")){const g=p.children[0];g&&g.type==="text"&&(g.value=xoe(g.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function xXe(e,t){e.position&&(t.position=iGe(e))}function SXe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,ME(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function TXe(e,t){const n=t.data||{},r="value"in t&&!(WU.call(n,"hProperties")||WU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function CXe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function xoe(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Soe(e,t){const n=EXe(e,t),r=n.one(e,void 0),i=fXe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function AXe(e,t){return e&&"run"in e?async function(n,r){const i=Soe(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Soe(n,{file:r,...t||e})}}function Toe(e){if(e)throw e}var a8,Coe;function IXe(){if(Coe)return a8;Coe=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),f=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!f)return!1;var d;for(d in l);return typeof d>"u"||e.call(l,d)},o=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return a8=function u(){var l,c,f,d,h,p,g=arguments[0],y=1,b=arguments.length,_=!1;for(typeof g=="boolean"&&(_=g,g=arguments[1]||{},y=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});y<b;++y)if(l=arguments[y],l!=null)for(c in l)f=a(g,c),d=a(l,c),g!==d&&(_&&d&&(s(d)||(h=i(d)))?(h?(h=!1,p=f&&i(f)?f:[]):p=f&&s(f)?f:{},o(g,{name:c,newValue:u(_,p,d)})):typeof d<"u"&&o(g,{name:c,newValue:d}));return g},a8}var kXe=IXe();const u8=Ru(kXe);function GU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function RXe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?NXe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function NXe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const oh={basename:PXe,dirname:DXe,extname:OXe,join:MXe,sep:"/"};function PXe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');NI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function DXe(e){if(NI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function OXe(e){NI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function MXe(...e){let t=-1,n;for(;++t<e.length;)NI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":$Xe(n)}function $Xe(e){NI(e);const t=e.codePointAt(0)===47;let n=LXe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function LXe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function NI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const FXe={cwd:jXe};function jXe(){return"/"}function YU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function BXe(e){if(typeof e=="string")e=new URL(e);else if(!YU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return UXe(e)}function UXe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const l8=["history","path","basename","stem","extname","dirname"];class Abe{constructor(t){let n;t?YU(t)?n={path:t}:typeof t=="string"||zXe(t)?n={value:t}:n=t:n={},this.cwd=FXe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<l8.length;){const s=l8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)l8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?oh.basename(this.path):void 0}set basename(t){f8(t,"basename"),c8(t,"basename"),this.path=oh.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?oh.dirname(this.path):void 0}set dirname(t){Aoe(this.basename,"dirname"),this.path=oh.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?oh.extname(this.path):void 0}set extname(t){if(c8(t,"extname"),Aoe(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=oh.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){YU(t)&&(t=BXe(t)),f8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?oh.basename(this.path,this.extname):void 0}set stem(t){f8(t,"stem"),c8(t,"stem"),this.path=oh.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Xa(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function c8(e,t){if(e&&e.includes(oh.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+oh.sep+"`")}function f8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Aoe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function zXe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const VXe=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},HXe={}.hasOwnProperty;class dG extends VXe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=RXe()}copy(){const t=new dG;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(u8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(p8("data",this.frozen),this.namespace[t]=n,this):HXe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(p8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=dN(t),r=this.parser||this.Parser;return d8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),d8("process",this.parser||this.Parser),h8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=dN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);GXe(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),d8("processSync",this.parser||this.Parser),h8("processSync",this.compiler||this.Compiler),this.process(t,i),koe("processSync","process",n),r;function i(s,o){n=!0,Toe(s),r=o}}run(t,n,r){Ioe(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=dN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),koe("runSync","run",r),i;function s(o,a){Toe(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=dN(n),i=this.compiler||this.Compiler;return h8("stringify",i),Ioe(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(p8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=u8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const g=r[d][1];GU(g)&&GU(h)&&(h=u8(!0,g,h)),r[d]=[l,h,...p]}}}}const qXe=new dG().freeze();function d8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function h8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function p8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ioe(e){if(!GU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function koe(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function dN(e){return WXe(e)?e:new Abe(e)}function WXe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function GXe(e){return typeof e=="string"||YXe(e)}function YXe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const KXe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Roe=[],Noe={allowDangerousHtml:!0},XXe=/^(https?|ircs?|mailto|xmpp)$/i,QXe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function JXe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Roe,u=e.remarkPlugins||Roe,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Noe}:Noe,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||ZXe,h=qXe().use(PKe).use(u).use(AXe,l).use(a),p=new Abe;typeof r=="string"&&(p.value=r);for(const _ of QXe)Object.hasOwn(e,_.from)&&(""+_.from+(_.to?"use `"+_.to+"` instead":"remove it")+KXe+_.id,void 0);const g=h.parse(p);let y=h.runSync(g,p);return i&&(y={type:"element",tagName:"div",properties:{className:i},children:y.type==="root"?y.children:[y]}),fG(y,b),cGe(y,{Fragment:w.Fragment,components:s,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function b(_,E,C){if(_.type==="raw"&&C&&typeof E=="number")return c?C.children.splice(E,1):C.children[E]={type:"text",value:_.value},E;if(_.type==="element"){let x;for(x in i8)if(Object.hasOwn(i8,x)&&Object.hasOwn(_.properties,x)){const T=_.properties[x],A=i8[x];(A===null||A.includes(_.tagName))&&(_.properties[x]=d(String(T||""),x,_))}}if(_.type==="element"){let x=t?!t.includes(_.tagName):o?o.includes(_.tagName):!1;if(!x&&n&&typeof E=="number"&&(x=!n(_,E,C)),x&&C&&typeof E=="number")return f&&_.children?C.children.splice(E,1,..._.children):C.children.splice(E,1),E}}}function ZXe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||XXe.test(e.slice(0,t))?e:""}const Poe=/[#.]/g;function eQe(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Poe.lastIndex=i;const a=Poe.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const tQe=new Set(["button","menu","reset","submit"]),KU={}.hasOwnProperty;function Ibe(e,t,n){const r=n&&sQe(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=eQe(s,t),l.tagName=l.tagName.toLowerCase(),r&&KU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),nQe(o,l.tagName)){let c;for(c in o)KU.call(o,c)&&rQe(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)XU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function nQe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?tQe.has(e.type.toLowerCase()):!("value"in e)}function rQe(e,t,n,r){const i=vL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Jse(r):i.commaSeparated?o=Gse(r):i.commaOrSpaceSeparated?o=Jse(Gse(r).join(" ")):o=Doe(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?iQe(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Doe(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function XU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)XU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?XU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Doe(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||tA(n)===tA(t)))return!0}return n}function iQe(e){const t=[];let n;for(n in e)KU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function sQe(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const oQe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],aQe=Ibe(RI,"div"),uQe=Ibe(qy,"g",oQe),m8=/\r?\n|\r/g;function lQe(e){const t=String(e),n=[];for(m8.lastIndex=0;m8.test(t);)n.push(m8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const w1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},kbe={}.hasOwnProperty,cQe=Object.prototype;function fQe(e,t){const n=t||{};return hG({file:n.file||void 0,location:!1,schema:n.space==="svg"?qy:RI,verbose:n.verbose||!1},e)}function hG(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},gD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Rbe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=lQe(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},gD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},gD(e,r,n),n}default:return n=dQe(e,t),n}}function Rbe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=hG(e,t[n]);r.push(i)}return r}function dQe(e,t){const n=e.schema;e.schema=t.namespaceURI===w1.svg?qy:RI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;kbe.call(cQe,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?uQe:aQe)(t.tagName,i,Rbe(e,t.childNodes));if(gD(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&$w(u.startTag),c=u&&u.endTag&&$w(u.endTag),f=hG(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function gD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=hQe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function hQe(e,t,n){const r=$w(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)kbe.call(n.attrs,o)&&(s[vL(e.schema,o).property]=$w(n.attrs[o]));n.startTag;const a=$w(n.startTag),u=n.endTag?$w(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function $w(e){const t=Ooe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Ooe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Ooe(e){return e.line&&e.column?e:void 0}const Moe={}.hasOwnProperty;function Nbe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Moe.call(i,e)){const u=String(i[e]);o=Moe.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const pQe={},mQe={}.hasOwnProperty,Pbe=Nbe("type",{handlers:{root:yQe,element:EQe,text:_Qe,comment:wQe,doctype:bQe}});function gQe(e,t){const r=(t||pQe).space;return Pbe(e,r==="svg"?qy:RI)}function yQe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=pG(e.children,n,t),rS(e,n),n}function vQe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=pG(e.children,n,t),rS(e,n),n}function bQe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return rS(e,t),t}function _Qe(e){const t={nodeName:"#text",value:e.value,parentNode:null};return rS(e,t),t}function wQe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return rS(e,t),t}function EQe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=qy);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&mQe.call(e.properties,s)){const u=xQe(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:w1[o],childNodes:[],parentNode:null};return a.childNodes=pG(e.children,a,r),rS(e,a),e.tagName==="template"&&e.content&&(a.content=vQe(e.content,r)),a}function xQe(e,t,n){const r=vL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?W1e(n):tbe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=w1[r.space]}return i}function pG(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=Pbe(e[r],n);s.parentNode=t,i.push(s)}return i}function rS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const SQe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],TQe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Yi="";var se;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(se=se||(se={}));const Gu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Dbe(e){return e>=55296&&e<=57343}function CQe(e){return e>=56320&&e<=57343}function AQe(e,t){return(e-55296)*1024+9216+t}function Obe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Mbe(e){return e>=64976&&e<=65007||TQe.has(e)}var We;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(We=We||(We={}));const IQe=65536;class kQe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=IQe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(CQe(n))return this.pos++,this._addGap(),AQe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,se.EOF;return this._err(We.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,se.EOF;const r=this.html.charCodeAt(n);return r===se.CARRIAGE_RETURN?se.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,se.EOF;let t=this.html.charCodeAt(this.pos);return t===se.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,se.LINE_FEED):t===se.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Dbe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===se.LINE_FEED||t===se.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Obe(t)?this._err(We.controlCharacterInInputStream):Mbe(t)&&this._err(We.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var ir;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(ir=ir||(ir={}));function $be(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const r0=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),RQe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var g8;const NQe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),PQe=(g8=String.fromCodePoint)!==null&&g8!==void 0?g8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function DQe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=NQe.get(e))!==null&&t!==void 0?t:e}var Mo;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Mo||(Mo={}));const OQe=32;var Ah;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Ah||(Ah={}));function QU(e){return e>=Mo.ZERO&&e<=Mo.NINE}function MQe(e){return e>=Mo.UPPER_A&&e<=Mo.UPPER_F||e>=Mo.LOWER_A&&e<=Mo.LOWER_F}function $Qe(e){return e>=Mo.UPPER_A&&e<=Mo.UPPER_Z||e>=Mo.LOWER_A&&e<=Mo.LOWER_Z||QU(e)}function LQe(e){return e===Mo.EQUALS||$Qe(e)}var ko;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(ko||(ko={}));var c1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(c1||(c1={}));class FQe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=ko.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=c1.Strict}startEntity(t){this.decodeMode=t,this.state=ko.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case ko.EntityStart:return t.charCodeAt(n)===Mo.NUM?(this.state=ko.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=ko.NamedEntity,this.stateNamedEntity(t,n));case ko.NumericStart:return this.stateNumericStart(t,n);case ko.NumericDecimal:return this.stateNumericDecimal(t,n);case ko.NumericHex:return this.stateNumericHex(t,n);case ko.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|OQe)===Mo.LOWER_X?(this.state=ko.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=ko.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(QU(i)||MQe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(QU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Mo.SEMI)this.consumed+=1;else if(this.decodeMode===c1.Strict)return 0;return this.emitCodePoint(DQe(this.result),this.consumed),this.errors&&(t!==Mo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Ah.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Fbe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===c1.Attribute&&(s===0||LQe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Ah.VALUE_LENGTH)>>14,s!==0){if(o===Mo.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==c1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Ah.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Ah.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case ko.NamedEntity:return this.result!==0&&(this.decodeMode!==c1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case ko.NumericDecimal:return this.emitNumericEntity(0,2);case ko.NumericHex:return this.emitNumericEntity(0,3);case ko.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case ko.EntityStart:return 0}}}function Lbe(e){let t="";const n=new FQe(e,r=>t+=PQe(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function Fbe(e,t,n,r){const i=(t&Ah.BRANCH_LENGTH)>>7,s=t&Ah.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}Lbe(r0);Lbe(RQe);var tt;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(tt=tt||(tt={}));var j0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(j0=j0||(j0={}));var ql;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(ql=ql||(ql={}));var $e;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})($e=$e||($e={}));var $;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})($=$||($={}));const jQe=new Map([[$e.A,$.A],[$e.ADDRESS,$.ADDRESS],[$e.ANNOTATION_XML,$.ANNOTATION_XML],[$e.APPLET,$.APPLET],[$e.AREA,$.AREA],[$e.ARTICLE,$.ARTICLE],[$e.ASIDE,$.ASIDE],[$e.B,$.B],[$e.BASE,$.BASE],[$e.BASEFONT,$.BASEFONT],[$e.BGSOUND,$.BGSOUND],[$e.BIG,$.BIG],[$e.BLOCKQUOTE,$.BLOCKQUOTE],[$e.BODY,$.BODY],[$e.BR,$.BR],[$e.BUTTON,$.BUTTON],[$e.CAPTION,$.CAPTION],[$e.CENTER,$.CENTER],[$e.CODE,$.CODE],[$e.COL,$.COL],[$e.COLGROUP,$.COLGROUP],[$e.DD,$.DD],[$e.DESC,$.DESC],[$e.DETAILS,$.DETAILS],[$e.DIALOG,$.DIALOG],[$e.DIR,$.DIR],[$e.DIV,$.DIV],[$e.DL,$.DL],[$e.DT,$.DT],[$e.EM,$.EM],[$e.EMBED,$.EMBED],[$e.FIELDSET,$.FIELDSET],[$e.FIGCAPTION,$.FIGCAPTION],[$e.FIGURE,$.FIGURE],[$e.FONT,$.FONT],[$e.FOOTER,$.FOOTER],[$e.FOREIGN_OBJECT,$.FOREIGN_OBJECT],[$e.FORM,$.FORM],[$e.FRAME,$.FRAME],[$e.FRAMESET,$.FRAMESET],[$e.H1,$.H1],[$e.H2,$.H2],[$e.H3,$.H3],[$e.H4,$.H4],[$e.H5,$.H5],[$e.H6,$.H6],[$e.HEAD,$.HEAD],[$e.HEADER,$.HEADER],[$e.HGROUP,$.HGROUP],[$e.HR,$.HR],[$e.HTML,$.HTML],[$e.I,$.I],[$e.IMG,$.IMG],[$e.IMAGE,$.IMAGE],[$e.INPUT,$.INPUT],[$e.IFRAME,$.IFRAME],[$e.KEYGEN,$.KEYGEN],[$e.LABEL,$.LABEL],[$e.LI,$.LI],[$e.LINK,$.LINK],[$e.LISTING,$.LISTING],[$e.MAIN,$.MAIN],[$e.MALIGNMARK,$.MALIGNMARK],[$e.MARQUEE,$.MARQUEE],[$e.MATH,$.MATH],[$e.MENU,$.MENU],[$e.META,$.META],[$e.MGLYPH,$.MGLYPH],[$e.MI,$.MI],[$e.MO,$.MO],[$e.MN,$.MN],[$e.MS,$.MS],[$e.MTEXT,$.MTEXT],[$e.NAV,$.NAV],[$e.NOBR,$.NOBR],[$e.NOFRAMES,$.NOFRAMES],[$e.NOEMBED,$.NOEMBED],[$e.NOSCRIPT,$.NOSCRIPT],[$e.OBJECT,$.OBJECT],[$e.OL,$.OL],[$e.OPTGROUP,$.OPTGROUP],[$e.OPTION,$.OPTION],[$e.P,$.P],[$e.PARAM,$.PARAM],[$e.PLAINTEXT,$.PLAINTEXT],[$e.PRE,$.PRE],[$e.RB,$.RB],[$e.RP,$.RP],[$e.RT,$.RT],[$e.RTC,$.RTC],[$e.RUBY,$.RUBY],[$e.S,$.S],[$e.SCRIPT,$.SCRIPT],[$e.SECTION,$.SECTION],[$e.SELECT,$.SELECT],[$e.SOURCE,$.SOURCE],[$e.SMALL,$.SMALL],[$e.SPAN,$.SPAN],[$e.STRIKE,$.STRIKE],[$e.STRONG,$.STRONG],[$e.STYLE,$.STYLE],[$e.SUB,$.SUB],[$e.SUMMARY,$.SUMMARY],[$e.SUP,$.SUP],[$e.TABLE,$.TABLE],[$e.TBODY,$.TBODY],[$e.TEMPLATE,$.TEMPLATE],[$e.TEXTAREA,$.TEXTAREA],[$e.TFOOT,$.TFOOT],[$e.TD,$.TD],[$e.TH,$.TH],[$e.THEAD,$.THEAD],[$e.TITLE,$.TITLE],[$e.TR,$.TR],[$e.TRACK,$.TRACK],[$e.TT,$.TT],[$e.U,$.U],[$e.UL,$.UL],[$e.SVG,$.SVG],[$e.VAR,$.VAR],[$e.WBR,$.WBR],[$e.XMP,$.XMP]]);function iS(e){var t;return(t=jQe.get(e))!==null&&t!==void 0?t:$.UNKNOWN}const yt=$,BQe={[tt.HTML]:new Set([yt.ADDRESS,yt.APPLET,yt.AREA,yt.ARTICLE,yt.ASIDE,yt.BASE,yt.BASEFONT,yt.BGSOUND,yt.BLOCKQUOTE,yt.BODY,yt.BR,yt.BUTTON,yt.CAPTION,yt.CENTER,yt.COL,yt.COLGROUP,yt.DD,yt.DETAILS,yt.DIR,yt.DIV,yt.DL,yt.DT,yt.EMBED,yt.FIELDSET,yt.FIGCAPTION,yt.FIGURE,yt.FOOTER,yt.FORM,yt.FRAME,yt.FRAMESET,yt.H1,yt.H2,yt.H3,yt.H4,yt.H5,yt.H6,yt.HEAD,yt.HEADER,yt.HGROUP,yt.HR,yt.HTML,yt.IFRAME,yt.IMG,yt.INPUT,yt.LI,yt.LINK,yt.LISTING,yt.MAIN,yt.MARQUEE,yt.MENU,yt.META,yt.NAV,yt.NOEMBED,yt.NOFRAMES,yt.NOSCRIPT,yt.OBJECT,yt.OL,yt.P,yt.PARAM,yt.PLAINTEXT,yt.PRE,yt.SCRIPT,yt.SECTION,yt.SELECT,yt.SOURCE,yt.STYLE,yt.SUMMARY,yt.TABLE,yt.TBODY,yt.TD,yt.TEMPLATE,yt.TEXTAREA,yt.TFOOT,yt.TH,yt.THEAD,yt.TITLE,yt.TR,yt.TRACK,yt.UL,yt.WBR,yt.XMP]),[tt.MATHML]:new Set([yt.MI,yt.MO,yt.MN,yt.MS,yt.MTEXT,yt.ANNOTATION_XML]),[tt.SVG]:new Set([yt.TITLE,yt.FOREIGN_OBJECT,yt.DESC]),[tt.XLINK]:new Set,[tt.XML]:new Set,[tt.XMLNS]:new Set};function jbe(e){return e===yt.H1||e===yt.H2||e===yt.H3||e===yt.H4||e===yt.H5||e===yt.H6}$e.STYLE,$e.SCRIPT,$e.XMP,$e.IFRAME,$e.NOEMBED,$e.NOFRAMES,$e.PLAINTEXT;const UQe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var le;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(le||(le={}));const Ns={DATA:le.DATA,RCDATA:le.RCDATA,RAWTEXT:le.RAWTEXT,SCRIPT_DATA:le.SCRIPT_DATA,PLAINTEXT:le.PLAINTEXT,CDATA_SECTION:le.CDATA_SECTION};function d2(e){return e>=se.DIGIT_0&&e<=se.DIGIT_9}function wC(e){return e>=se.LATIN_CAPITAL_A&&e<=se.LATIN_CAPITAL_Z}function zQe(e){return e>=se.LATIN_SMALL_A&&e<=se.LATIN_SMALL_Z}function i0(e){return zQe(e)||wC(e)}function JU(e){return i0(e)||d2(e)}function Bbe(e){return e>=se.LATIN_CAPITAL_A&&e<=se.LATIN_CAPITAL_F}function Ube(e){return e>=se.LATIN_SMALL_A&&e<=se.LATIN_SMALL_F}function VQe(e){return d2(e)||Bbe(e)||Ube(e)}function hN(e){return e+32}function zbe(e){return e===se.SPACE||e===se.LINE_FEED||e===se.TABULATION||e===se.FORM_FEED}function HQe(e){return e===se.EQUALS_SIGN||JU(e)}function $oe(e){return zbe(e)||e===se.SOLIDUS||e===se.GREATER_THAN_SIGN}class qQe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=le.DATA,this.returnState=le.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new kQe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:ir.START_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:ir.END_TAG,tagName:"",tagID:$.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:ir.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:ir.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if($be(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(We.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=iS(t.tagName),t.type===ir.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(We.endTagWithAttributes),t.selfClosing&&this._err(We.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case ir.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case ir.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case ir.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:ir.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=zbe(t)?ir.WHITESPACE_CHARACTER:t===se.NULL?ir.NULL_CHARACTER:ir.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(ir.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=r0[0];s>=0&&(s=Fbe(r0,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=r0[s];const a=o&Ah.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==se.SEMICOLON&&this._isCharacterReferenceInAttribute()&&HQe(this.preprocessor.peek(1))?(n=[se.AMPERSAND],s+=u):(n=u===0?[r0[s]&~Ah.VALUE_LENGTH]:u===1?[r0[++s]]:[r0[++s],r0[++s]],r=0,i=t!==se.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(We.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===le.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===le.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case le.DATA:{this._stateData(t);break}case le.RCDATA:{this._stateRcdata(t);break}case le.RAWTEXT:{this._stateRawtext(t);break}case le.SCRIPT_DATA:{this._stateScriptData(t);break}case le.PLAINTEXT:{this._statePlaintext(t);break}case le.TAG_OPEN:{this._stateTagOpen(t);break}case le.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case le.TAG_NAME:{this._stateTagName(t);break}case le.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case le.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case le.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case le.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case le.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case le.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case le.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case le.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case le.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case le.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case le.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case le.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case le.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case le.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case le.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case le.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case le.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case le.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case le.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case le.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case le.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case le.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case le.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case le.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case le.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case le.BOGUS_COMMENT:{this._stateBogusComment(t);break}case le.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case le.COMMENT_START:{this._stateCommentStart(t);break}case le.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case le.COMMENT:{this._stateComment(t);break}case le.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case le.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case le.COMMENT_END:{this._stateCommentEnd(t);break}case le.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case le.DOCTYPE:{this._stateDoctype(t);break}case le.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case le.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case le.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case le.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case le.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case le.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case le.CDATA_SECTION:{this._stateCdataSection(t);break}case le.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case le.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case le.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case le.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case le.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case le.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case le.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case le.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case le.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case se.LESS_THAN_SIGN:{this.state=le.TAG_OPEN;break}case se.AMPERSAND:{this.returnState=le.DATA,this.state=le.CHARACTER_REFERENCE;break}case se.NULL:{this._err(We.unexpectedNullCharacter),this._emitCodePoint(t);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case se.AMPERSAND:{this.returnState=le.RCDATA,this.state=le.CHARACTER_REFERENCE;break}case se.LESS_THAN_SIGN:{this.state=le.RCDATA_LESS_THAN_SIGN;break}case se.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Yi);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case se.LESS_THAN_SIGN:{this.state=le.RAWTEXT_LESS_THAN_SIGN;break}case se.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Yi);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_LESS_THAN_SIGN;break}case se.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Yi);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case se.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Yi);break}case se.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(i0(t))this._createStartTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case se.EXCLAMATION_MARK:{this.state=le.MARKUP_DECLARATION_OPEN;break}case se.SOLIDUS:{this.state=le.END_TAG_OPEN;break}case se.QUESTION_MARK:{this._err(We.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t);break}case se.EOF:{this._err(We.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(We.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=le.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(i0(t))this._createEndTagToken(),this.state=le.TAG_NAME,this._stateTagName(t);else switch(t){case se.GREATER_THAN_SIGN:{this._err(We.missingEndTagName),this.state=le.DATA;break}case se.EOF:{this._err(We.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(We.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_ATTRIBUTE_NAME;break}case se.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case se.NULL:{this._err(We.unexpectedNullCharacter),n.tagName+=Yi;break}case se.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(wC(t)?hN(t):t)}}_stateRcdataLessThanSign(t){t===se.SOLIDUS?this.state=le.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){i0(t)?(this.state=le.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=le.BEFORE_ATTRIBUTE_NAME,!1;case se.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=le.SELF_CLOSING_START_TAG,!1;case se.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=le.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===se.SOLIDUS?this.state=le.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){i0(t)?(this.state=le.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case se.SOLIDUS:{this.state=le.SCRIPT_DATA_END_TAG_OPEN;break}case se.EXCLAMATION_MARK:{this.state=le.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=le.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){i0(t)?(this.state=le.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===se.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===se.HYPHEN_MINUS?(this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=le.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case se.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Yi);break}case se.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case se.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(Yi);break}case se.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case se.HYPHEN_MINUS:{this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case se.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case se.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_ESCAPED,this._emitChars(Yi);break}case se.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===se.SOLIDUS?this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:i0(t)?(this._emitChars("<"),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){i0(t)?(this.state=le.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Gu.SCRIPT,!1)&&$oe(this.preprocessor.peek(Gu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Gu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case se.NULL:{this._err(We.unexpectedNullCharacter),this._emitChars(Yi);break}case se.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case se.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Yi);break}case se.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case se.HYPHEN_MINUS:{this._emitChars("-");break}case se.LESS_THAN_SIGN:{this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case se.GREATER_THAN_SIGN:{this.state=le.SCRIPT_DATA,this._emitChars(">");break}case se.NULL:{this._err(We.unexpectedNullCharacter),this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Yi);break}case se.EOF:{this._err(We.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===se.SOLIDUS?(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Gu.SCRIPT,!1)&&$oe(this.preprocessor.peek(Gu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Gu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=le.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=le.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.SOLIDUS:case se.GREATER_THAN_SIGN:case se.EOF:{this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case se.EQUALS_SIGN:{this._err(We.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=le.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:case se.SOLIDUS:case se.GREATER_THAN_SIGN:case se.EOF:{this._leaveAttrName(),this.state=le.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case se.EQUALS_SIGN:{this._leaveAttrName(),this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case se.QUOTATION_MARK:case se.APOSTROPHE:case se.LESS_THAN_SIGN:{this._err(We.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case se.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.name+=Yi;break}default:this.currentAttr.name+=String.fromCodePoint(wC(t)?hN(t):t)}}_stateAfterAttributeName(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.SOLIDUS:{this.state=le.SELF_CLOSING_START_TAG;break}case se.EQUALS_SIGN:{this.state=le.BEFORE_ATTRIBUTE_VALUE;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentTagToken();break}case se.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=le.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.QUOTATION_MARK:{this.state=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this.state=le.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(We.missingAttributeValue),this.state=le.DATA,this.emitCurrentTagToken();break}default:this.state=le.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case se.QUOTATION_MARK:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case se.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case se.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Yi;break}case se.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case se.APOSTROPHE:{this.state=le.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case se.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=le.CHARACTER_REFERENCE;break}case se.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Yi;break}case se.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case se.AMPERSAND:{this.returnState=le.ATTRIBUTE_VALUE_UNQUOTED,this.state=le.CHARACTER_REFERENCE;break}case se.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case se.NULL:{this._err(We.unexpectedNullCharacter),this.currentAttr.value+=Yi;break}case se.QUOTATION_MARK:case se.APOSTROPHE:case se.LESS_THAN_SIGN:case se.EQUALS_SIGN:case se.GRAVE_ACCENT:{this._err(We.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case se.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this._leaveAttrValue(),this.state=le.BEFORE_ATTRIBUTE_NAME;break}case se.SOLIDUS:{this._leaveAttrValue(),this.state=le.SELF_CLOSING_START_TAG;break}case se.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=le.DATA,this.emitCurrentTagToken();break}case se.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._err(We.missingWhitespaceBetweenAttributes),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case se.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=le.DATA,this.emitCurrentTagToken();break}case se.EOF:{this._err(We.eofInTag),this._emitEOFToken();break}default:this._err(We.unexpectedSolidusInTag),this.state=le.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case se.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case se.NULL:{this._err(We.unexpectedNullCharacter),n.data+=Yi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Gu.DASH_DASH,!0)?(this._createCommentToken(Gu.DASH_DASH.length+1),this.state=le.COMMENT_START):this._consumeSequenceIfMatch(Gu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Gu.DOCTYPE.length+1),this.state=le.DOCTYPE):this._consumeSequenceIfMatch(Gu.CDATA_START,!0)?this.inForeignNode?this.state=le.CDATA_SECTION:(this._err(We.cdataInHtmlContent),this._createCommentToken(Gu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=le.BOGUS_COMMENT):this._ensureHibernation()||(this._err(We.incorrectlyOpenedComment),this._createCommentToken(2),this.state=le.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_START_DASH;break}case se.GREATER_THAN_SIGN:{this._err(We.abruptClosingOfEmptyComment),this.state=le.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case se.GREATER_THAN_SIGN:{this._err(We.abruptClosingOfEmptyComment),this.state=le.DATA,this.emitCurrentComment(n);break}case se.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_END_DASH;break}case se.LESS_THAN_SIGN:{n.data+="<",this.state=le.COMMENT_LESS_THAN_SIGN;break}case se.NULL:{this._err(We.unexpectedNullCharacter),n.data+=Yi;break}case se.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case se.EXCLAMATION_MARK:{n.data+="!",this.state=le.COMMENT_LESS_THAN_SIGN_BANG;break}case se.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=le.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===se.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=le.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===se.HYPHEN_MINUS?this.state=le.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=le.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==se.GREATER_THAN_SIGN&&t!==se.EOF&&this._err(We.nestedComment),this.state=le.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{this.state=le.COMMENT_END;break}case se.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentComment(n);break}case se.EXCLAMATION_MARK:{this.state=le.COMMENT_END_BANG;break}case se.HYPHEN_MINUS:{n.data+="-";break}case se.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=le.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case se.HYPHEN_MINUS:{n.data+="--!",this.state=le.COMMENT_END_DASH;break}case se.GREATER_THAN_SIGN:{this._err(We.incorrectlyClosedComment),this.state=le.DATA,this.emitCurrentComment(n);break}case se.EOF:{this._err(We.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=le.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_NAME;break}case se.GREATER_THAN_SIGN:{this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case se.EOF:{this._err(We.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingWhitespaceBeforeDoctypeName),this.state=le.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(wC(t))this._createDoctypeToken(String.fromCharCode(hN(t))),this.state=le.DOCTYPE_NAME;else switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.NULL:{this._err(We.unexpectedNullCharacter),this._createDoctypeToken(Yi),this.state=le.DOCTYPE_NAME;break}case se.GREATER_THAN_SIGN:{this._err(We.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(We.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=le.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.AFTER_DOCTYPE_NAME;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.NULL:{this._err(We.unexpectedNullCharacter),n.name+=Yi;break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(wC(t)?hN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Gu.PUBLIC,!1)?this.state=le.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Gu.SYSTEM,!1)?this.state=le.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(We.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case se.QUOTATION_MARK:{this._err(We.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this._err(We.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(We.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.QUOTATION_MARK:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{n.publicId="",this.state=le.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(We.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case se.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case se.NULL:{this._err(We.unexpectedNullCharacter),n.publicId+=Yi;break}case se.GREATER_THAN_SIGN:{this._err(We.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case se.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case se.NULL:{this._err(We.unexpectedNullCharacter),n.publicId+=Yi;break}case se.GREATER_THAN_SIGN:{this._err(We.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case se.GREATER_THAN_SIGN:{this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.QUOTATION_MARK:{this._err(We.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this._err(We.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:{this.state=le.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case se.QUOTATION_MARK:{this._err(We.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{this._err(We.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(We.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.QUOTATION_MARK:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case se.APOSTROPHE:{n.systemId="",this.state=le.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case se.GREATER_THAN_SIGN:{this._err(We.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.DATA,this.emitCurrentDoctype(n);break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case se.QUOTATION_MARK:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case se.NULL:{this._err(We.unexpectedNullCharacter),n.systemId+=Yi;break}case se.GREATER_THAN_SIGN:{this._err(We.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case se.APOSTROPHE:{this.state=le.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case se.NULL:{this._err(We.unexpectedNullCharacter),n.systemId+=Yi;break}case se.GREATER_THAN_SIGN:{this._err(We.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case se.SPACE:case se.LINE_FEED:case se.TABULATION:case se.FORM_FEED:break;case se.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.EOF:{this._err(We.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(We.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=le.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case se.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=le.DATA;break}case se.NULL:{this._err(We.unexpectedNullCharacter);break}case se.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case se.RIGHT_SQUARE_BRACKET:{this.state=le.CDATA_SECTION_BRACKET;break}case se.EOF:{this._err(We.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===se.RIGHT_SQUARE_BRACKET?this.state=le.CDATA_SECTION_END:(this._emitChars("]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case se.GREATER_THAN_SIGN:{this.state=le.DATA;break}case se.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=le.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===se.NUMBER_SIGN?this.state=le.NUMERIC_CHARACTER_REFERENCE:JU(t)?(this.state=le.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this.state=le.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){JU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===se.SEMICOLON&&this._err(We.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===se.LATIN_SMALL_X||t===se.LATIN_CAPITAL_X?this.state=le.HEXADEMICAL_CHARACTER_REFERENCE_START:d2(t)?(this.state=le.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(We.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(se.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){VQe(t)?(this.state=le.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(We.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(se.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(se.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){Bbe(t)?this.charRefCode=this.charRefCode*16+t-55:Ube(t)?this.charRefCode=this.charRefCode*16+t-87:d2(t)?this.charRefCode=this.charRefCode*16+t-48:t===se.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(We.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){d2(t)?this.charRefCode=this.charRefCode*10+t-48:t===se.SEMICOLON?this.state=le.NUMERIC_CHARACTER_REFERENCE_END:(this._err(We.missingSemicolonAfterCharacterReference),this.state=le.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===se.NULL)this._err(We.nullCharacterReference),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(We.characterReferenceOutsideUnicodeRange),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(Dbe(this.charRefCode))this._err(We.surrogateCharacterReference),this.charRefCode=se.REPLACEMENT_CHARACTER;else if(Mbe(this.charRefCode))this._err(We.noncharacterCharacterReference);else if(Obe(this.charRefCode)||this.charRefCode===se.CARRIAGE_RETURN){this._err(We.controlCharacterReference);const n=UQe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Vbe=new Set([$.DD,$.DT,$.LI,$.OPTGROUP,$.OPTION,$.P,$.RB,$.RP,$.RT,$.RTC]),Loe=new Set([...Vbe,$.CAPTION,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]),pN=new Map([[$.APPLET,tt.HTML],[$.CAPTION,tt.HTML],[$.HTML,tt.HTML],[$.MARQUEE,tt.HTML],[$.OBJECT,tt.HTML],[$.TABLE,tt.HTML],[$.TD,tt.HTML],[$.TEMPLATE,tt.HTML],[$.TH,tt.HTML],[$.ANNOTATION_XML,tt.MATHML],[$.MI,tt.MATHML],[$.MN,tt.MATHML],[$.MO,tt.MATHML],[$.MS,tt.MATHML],[$.MTEXT,tt.MATHML],[$.DESC,tt.SVG],[$.FOREIGN_OBJECT,tt.SVG],[$.TITLE,tt.SVG]]),WQe=[$.H1,$.H2,$.H3,$.H4,$.H5,$.H6],GQe=[$.TR,$.TEMPLATE,$.HTML],YQe=[$.TBODY,$.TFOOT,$.THEAD,$.TEMPLATE,$.HTML],KQe=[$.TABLE,$.TEMPLATE,$.HTML],XQe=[$.TD,$.TH];class QQe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=$.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===$.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===tt.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==tt.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(WQe,tt.HTML)}popUntilTableCellPopped(){this.popUntilPopped(XQe,tt.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(KQe,tt.HTML)}clearBackToTableBodyContext(){this.clearBackTo(YQe,tt.HTML)}clearBackToTableRowContext(){this.clearBackTo(GQe,tt.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===$.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===$.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===tt.HTML)return!0;if(pN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(jbe(n)&&r===tt.HTML)return!0;if(pN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===tt.HTML)return!0;if((r===$.UL||r===$.OL)&&i===tt.HTML||pN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===tt.HTML)return!0;if(r===$.BUTTON&&i===tt.HTML||pN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===tt.HTML){if(r===t)return!0;if(r===$.TABLE||r===$.TEMPLATE||r===$.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===tt.HTML){if(n===$.TBODY||n===$.THEAD||n===$.TFOOT)return!0;if(n===$.TABLE||n===$.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===tt.HTML){if(r===t)return!0;if(r!==$.OPTION&&r!==$.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Vbe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Loe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Loe.has(this.currentTagId);)this.pop()}}const y8=3;var Xf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Xf=Xf||(Xf={}));const Foe={type:Xf.Marker};class JQe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Xf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<y8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<y8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=y8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Foe)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Xf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Xf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Foe);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Xf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Xf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Xf.Element&&n.element===t)}}function joe(e){return{nodeName:"#text",value:e,parentNode:null}}const Tw={createDocument(){return{nodeName:"#document",mode:ql.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};Tw.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Tw.isTextNode(n)){n.value+=t;return}}Tw.appendChild(e,joe(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&Tw.isTextNode(r)?r.value+=t:Tw.insertBefore(e,joe(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Hbe="html",ZQe="about:legacy-compat",eJe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",qbe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],tJe=[...qbe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],nJe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Wbe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],rJe=[...Wbe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Boe(e,t){return t.some(n=>e.startsWith(n))}function iJe(e){return e.name===Hbe&&e.publicId===null&&(e.systemId===null||e.systemId===ZQe)}function sJe(e){if(e.name!==Hbe)return ql.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===eJe)return ql.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),nJe.has(n))return ql.QUIRKS;let r=t===null?tJe:qbe;if(Boe(n,r))return ql.QUIRKS;if(r=t===null?Wbe:rJe,Boe(n,r))return ql.LIMITED_QUIRKS}return ql.NO_QUIRKS}const Uoe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},oJe="definitionurl",aJe="definitionURL",uJe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),lJe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:tt.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:tt.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:tt.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:tt.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:tt.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:tt.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:tt.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:tt.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:tt.XML}],["xml:space",{prefix:"xml",name:"space",namespace:tt.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:tt.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:tt.XMLNS}]]),cJe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),fJe=new Set([$.B,$.BIG,$.BLOCKQUOTE,$.BODY,$.BR,$.CENTER,$.CODE,$.DD,$.DIV,$.DL,$.DT,$.EM,$.EMBED,$.H1,$.H2,$.H3,$.H4,$.H5,$.H6,$.HEAD,$.HR,$.I,$.IMG,$.LI,$.LISTING,$.MENU,$.META,$.NOBR,$.OL,$.P,$.PRE,$.RUBY,$.S,$.SMALL,$.SPAN,$.STRONG,$.STRIKE,$.SUB,$.SUP,$.TABLE,$.TT,$.U,$.UL,$.VAR]);function dJe(e){const t=e.tagID;return t===$.FONT&&e.attrs.some(({name:r})=>r===j0.COLOR||r===j0.SIZE||r===j0.FACE)||fJe.has(t)}function Gbe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===oJe){e.attrs[t].name=aJe;break}}function Ybe(e){for(let t=0;t<e.attrs.length;t++){const n=uJe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function mG(e){for(let t=0;t<e.attrs.length;t++){const n=lJe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function hJe(e){const t=cJe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=iS(e.tagName))}function pJe(e,t){return t===tt.MATHML&&(e===$.MI||e===$.MO||e===$.MN||e===$.MS||e===$.MTEXT)}function mJe(e,t,n){if(t===tt.MATHML&&e===$.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===j0.ENCODING){const i=n[r].value.toLowerCase();return i===Uoe.TEXT_HTML||i===Uoe.APPLICATION_XML}}return t===tt.SVG&&(e===$.FOREIGN_OBJECT||e===$.DESC||e===$.TITLE)}function gJe(e,t,n,r){return(!r||r===tt.HTML)&&mJe(e,t,n)||(!r||r===tt.MATHML)&&pJe(e,t)}const yJe="hidden",vJe=8,bJe=3;var me;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(me||(me={}));const _Je={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Kbe=new Set([$.TABLE,$.TBODY,$.TFOOT,$.THEAD,$.TR]),zoe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Tw,onParseError:null};let Voe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=me.INITIAL,this.originalInsertionMode=me.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...zoe,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new qQe(this.options,this),this.activeFormattingElements=new JQe(this.treeAdapter),this.fragmentContextID=r?iS(this.treeAdapter.getTagName(r)):$.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new QQe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...zoe,...n};t??(t=r.treeAdapter.createElement($e.TEMPLATE,tt.HTML,[]));const i=r.treeAdapter.createElement("documentmock",tt.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===$.TEMPLATE&&s.tmplInsertionModeStack.unshift(me.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:_Je,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===tt.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,tt.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=me.TEXT}switchToPlaintextParsing(){this.insertionMode=me.TEXT,this.originalInsertionMode=me.IN_BODY,this.tokenizer.state=Ns.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===$e.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==tt.HTML))switch(this.fragmentContextID){case $.TITLE:case $.TEXTAREA:{this.tokenizer.state=Ns.RCDATA;break}case $.STYLE:case $.XMP:case $.IFRAME:case $.NOEMBED:case $.NOFRAMES:case $.NOSCRIPT:{this.tokenizer.state=Ns.RAWTEXT;break}case $.SCRIPT:{this.tokenizer.state=Ns.SCRIPT_DATA;break}case $.PLAINTEXT:{this.tokenizer.state=Ns.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,tt.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,tt.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement($e.HTML,tt.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,$.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===ir.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===$.SVG&&this.treeAdapter.getTagName(n)===$e.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===tt.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===$.MGLYPH||t.tagID===$.MALIGNMARK)&&!this._isIntegrationPoint(r,n,tt.HTML)}_processToken(t){switch(t.type){case ir.CHARACTER:{this.onCharacter(t);break}case ir.NULL_CHARACTER:{this.onNullCharacter(t);break}case ir.COMMENT:{this.onComment(t);break}case ir.DOCTYPE:{this.onDoctype(t);break}case ir.START_TAG:{this._processStartTag(t);break}case ir.END_TAG:{this.onEndTag(t);break}case ir.EOF:{this.onEof(t);break}case ir.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return gJe(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Xf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=me.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion($.P),this.openElements.popUntilTagNamePopped($.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case $.TR:{this.insertionMode=me.IN_ROW;return}case $.TBODY:case $.THEAD:case $.TFOOT:{this.insertionMode=me.IN_TABLE_BODY;return}case $.CAPTION:{this.insertionMode=me.IN_CAPTION;return}case $.COLGROUP:{this.insertionMode=me.IN_COLUMN_GROUP;return}case $.TABLE:{this.insertionMode=me.IN_TABLE;return}case $.BODY:{this.insertionMode=me.IN_BODY;return}case $.FRAMESET:{this.insertionMode=me.IN_FRAMESET;return}case $.SELECT:{this._resetInsertionModeForSelect(t);return}case $.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case $.HTML:{this.insertionMode=this.headElement?me.AFTER_HEAD:me.BEFORE_HEAD;return}case $.TD:case $.TH:{if(t>0){this.insertionMode=me.IN_CELL;return}break}case $.HEAD:{if(t>0){this.insertionMode=me.IN_HEAD;return}break}}this.insertionMode=me.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===$.TEMPLATE)break;if(r===$.TABLE){this.insertionMode=me.IN_SELECT_IN_TABLE;return}}this.insertionMode=me.IN_SELECT}_isElementCausesFosterParenting(t){return Kbe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case $.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===tt.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case $.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return BQe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){XZe(this,t);return}switch(this.insertionMode){case me.INITIAL:{NT(this,t);break}case me.BEFORE_HTML:{h2(this,t);break}case me.BEFORE_HEAD:{p2(this,t);break}case me.IN_HEAD:{m2(this,t);break}case me.IN_HEAD_NO_SCRIPT:{g2(this,t);break}case me.AFTER_HEAD:{y2(this,t);break}case me.IN_BODY:case me.IN_CAPTION:case me.IN_CELL:case me.IN_TEMPLATE:{Qbe(this,t);break}case me.TEXT:case me.IN_SELECT:case me.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case me.IN_TABLE:case me.IN_TABLE_BODY:case me.IN_ROW:{v8(this,t);break}case me.IN_TABLE_TEXT:{r_e(this,t);break}case me.IN_COLUMN_GROUP:{NO(this,t);break}case me.AFTER_BODY:{PO(this,t);break}case me.AFTER_AFTER_BODY:{yD(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){KZe(this,t);return}switch(this.insertionMode){case me.INITIAL:{NT(this,t);break}case me.BEFORE_HTML:{h2(this,t);break}case me.BEFORE_HEAD:{p2(this,t);break}case me.IN_HEAD:{m2(this,t);break}case me.IN_HEAD_NO_SCRIPT:{g2(this,t);break}case me.AFTER_HEAD:{y2(this,t);break}case me.TEXT:{this._insertCharacters(t);break}case me.IN_TABLE:case me.IN_TABLE_BODY:case me.IN_ROW:{v8(this,t);break}case me.IN_COLUMN_GROUP:{NO(this,t);break}case me.AFTER_BODY:{PO(this,t);break}case me.AFTER_AFTER_BODY:{yD(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){ZU(this,t);return}switch(this.insertionMode){case me.INITIAL:case me.BEFORE_HTML:case me.BEFORE_HEAD:case me.IN_HEAD:case me.IN_HEAD_NO_SCRIPT:case me.AFTER_HEAD:case me.IN_BODY:case me.IN_TABLE:case me.IN_CAPTION:case me.IN_COLUMN_GROUP:case me.IN_TABLE_BODY:case me.IN_ROW:case me.IN_CELL:case me.IN_SELECT:case me.IN_SELECT_IN_TABLE:case me.IN_TEMPLATE:case me.IN_FRAMESET:case me.AFTER_FRAMESET:{ZU(this,t);break}case me.IN_TABLE_TEXT:{PT(this,t);break}case me.AFTER_BODY:{AJe(this,t);break}case me.AFTER_AFTER_BODY:case me.AFTER_AFTER_FRAMESET:{IJe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case me.INITIAL:{kJe(this,t);break}case me.BEFORE_HEAD:case me.IN_HEAD:case me.IN_HEAD_NO_SCRIPT:case me.AFTER_HEAD:{this._err(t,We.misplacedDoctype);break}case me.IN_TABLE_TEXT:{PT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,We.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?QZe(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case me.INITIAL:{NT(this,t);break}case me.BEFORE_HTML:{RJe(this,t);break}case me.BEFORE_HEAD:{PJe(this,t);break}case me.IN_HEAD:{Rd(this,t);break}case me.IN_HEAD_NO_SCRIPT:{MJe(this,t);break}case me.AFTER_HEAD:{LJe(this,t);break}case me.IN_BODY:{Qa(this,t);break}case me.IN_TABLE:{$E(this,t);break}case me.IN_TABLE_TEXT:{PT(this,t);break}case me.IN_CAPTION:{DZe(this,t);break}case me.IN_COLUMN_GROUP:{vG(this,t);break}case me.IN_TABLE_BODY:{TL(this,t);break}case me.IN_ROW:{CL(this,t);break}case me.IN_CELL:{$Ze(this,t);break}case me.IN_SELECT:{o_e(this,t);break}case me.IN_SELECT_IN_TABLE:{FZe(this,t);break}case me.IN_TEMPLATE:{BZe(this,t);break}case me.AFTER_BODY:{zZe(this,t);break}case me.IN_FRAMESET:{VZe(this,t);break}case me.AFTER_FRAMESET:{qZe(this,t);break}case me.AFTER_AFTER_BODY:{GZe(this,t);break}case me.AFTER_AFTER_FRAMESET:{YZe(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?JZe(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case me.INITIAL:{NT(this,t);break}case me.BEFORE_HTML:{NJe(this,t);break}case me.BEFORE_HEAD:{DJe(this,t);break}case me.IN_HEAD:{OJe(this,t);break}case me.IN_HEAD_NO_SCRIPT:{$Je(this,t);break}case me.AFTER_HEAD:{FJe(this,t);break}case me.IN_BODY:{SL(this,t);break}case me.TEXT:{xZe(this,t);break}case me.IN_TABLE:{rA(this,t);break}case me.IN_TABLE_TEXT:{PT(this,t);break}case me.IN_CAPTION:{OZe(this,t);break}case me.IN_COLUMN_GROUP:{MZe(this,t);break}case me.IN_TABLE_BODY:{e7(this,t);break}case me.IN_ROW:{s_e(this,t);break}case me.IN_CELL:{LZe(this,t);break}case me.IN_SELECT:{a_e(this,t);break}case me.IN_SELECT_IN_TABLE:{jZe(this,t);break}case me.IN_TEMPLATE:{UZe(this,t);break}case me.AFTER_BODY:{l_e(this,t);break}case me.IN_FRAMESET:{HZe(this,t);break}case me.AFTER_FRAMESET:{WZe(this,t);break}case me.AFTER_AFTER_BODY:{yD(this,t);break}}}onEof(t){switch(this.insertionMode){case me.INITIAL:{NT(this,t);break}case me.BEFORE_HTML:{h2(this,t);break}case me.BEFORE_HEAD:{p2(this,t);break}case me.IN_HEAD:{m2(this,t);break}case me.IN_HEAD_NO_SCRIPT:{g2(this,t);break}case me.AFTER_HEAD:{y2(this,t);break}case me.IN_BODY:case me.IN_TABLE:case me.IN_CAPTION:case me.IN_COLUMN_GROUP:case me.IN_TABLE_BODY:case me.IN_ROW:case me.IN_CELL:case me.IN_SELECT:case me.IN_SELECT_IN_TABLE:{t_e(this,t);break}case me.TEXT:{SZe(this,t);break}case me.IN_TABLE_TEXT:{PT(this,t);break}case me.IN_TEMPLATE:{u_e(this,t);break}case me.AFTER_BODY:case me.IN_FRAMESET:case me.AFTER_FRAMESET:case me.AFTER_AFTER_BODY:case me.AFTER_AFTER_FRAMESET:{yG(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===se.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case me.IN_HEAD:case me.IN_HEAD_NO_SCRIPT:case me.AFTER_HEAD:case me.TEXT:case me.IN_COLUMN_GROUP:case me.IN_SELECT:case me.IN_SELECT_IN_TABLE:case me.IN_FRAMESET:case me.AFTER_FRAMESET:{this._insertCharacters(t);break}case me.IN_BODY:case me.IN_CAPTION:case me.IN_CELL:case me.IN_TEMPLATE:case me.AFTER_BODY:case me.AFTER_AFTER_BODY:case me.AFTER_AFTER_FRAMESET:{Xbe(this,t);break}case me.IN_TABLE:case me.IN_TABLE_BODY:case me.IN_ROW:{v8(this,t);break}case me.IN_TABLE_TEXT:{n_e(this,t);break}}}};function wJe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):e_e(e,t),n}function EJe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function xJe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=bJe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=SJe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function SJe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function TJe(e,t,n){const r=e.treeAdapter.getTagName(t),i=iS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===$.TEMPLATE&&s===tt.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function CJe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function gG(e,t){for(let n=0;n<vJe;n++){const r=wJe(e,t);if(!r)break;const i=EJe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=xJe(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&TJe(e,o,s),CJe(e,i,r)}}function ZU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function AJe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function IJe(e,t){e._appendCommentNode(t,e.document)}function yG(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function kJe(e,t){e._setDocumentType(t);const n=t.forceQuirks?ql.QUIRKS:sJe(t);iJe(t)||e._err(t,We.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=me.BEFORE_HTML}function NT(e,t){e._err(t,We.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,ql.QUIRKS),e.insertionMode=me.BEFORE_HTML,e._processToken(t)}function RJe(e,t){t.tagID===$.HTML?(e._insertElement(t,tt.HTML),e.insertionMode=me.BEFORE_HEAD):h2(e,t)}function NJe(e,t){const n=t.tagID;(n===$.HTML||n===$.HEAD||n===$.BODY||n===$.BR)&&h2(e,t)}function h2(e,t){e._insertFakeRootElement(),e.insertionMode=me.BEFORE_HEAD,e._processToken(t)}function PJe(e,t){switch(t.tagID){case $.HTML:{Qa(e,t);break}case $.HEAD:{e._insertElement(t,tt.HTML),e.headElement=e.openElements.current,e.insertionMode=me.IN_HEAD;break}default:p2(e,t)}}function DJe(e,t){const n=t.tagID;n===$.HEAD||n===$.BODY||n===$.HTML||n===$.BR?p2(e,t):e._err(t,We.endTagWithoutMatchingOpenElement)}function p2(e,t){e._insertFakeElement($e.HEAD,$.HEAD),e.headElement=e.openElements.current,e.insertionMode=me.IN_HEAD,e._processToken(t)}function Rd(e,t){switch(t.tagID){case $.HTML:{Qa(e,t);break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:{e._appendElement(t,tt.HTML),t.ackSelfClosing=!0;break}case $.TITLE:{e._switchToTextParsing(t,Ns.RCDATA);break}case $.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Ns.RAWTEXT):(e._insertElement(t,tt.HTML),e.insertionMode=me.IN_HEAD_NO_SCRIPT);break}case $.NOFRAMES:case $.STYLE:{e._switchToTextParsing(t,Ns.RAWTEXT);break}case $.SCRIPT:{e._switchToTextParsing(t,Ns.SCRIPT_DATA);break}case $.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=me.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(me.IN_TEMPLATE);break}case $.HEAD:{e._err(t,We.misplacedStartTagForHeadElement);break}default:m2(e,t)}}function OJe(e,t){switch(t.tagID){case $.HEAD:{e.openElements.pop(),e.insertionMode=me.AFTER_HEAD;break}case $.BODY:case $.BR:case $.HTML:{m2(e,t);break}case $.TEMPLATE:{Gb(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function Gb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==$.TEMPLATE&&e._err(t,We.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,We.endTagWithoutMatchingOpenElement)}function m2(e,t){e.openElements.pop(),e.insertionMode=me.AFTER_HEAD,e._processToken(t)}function MJe(e,t){switch(t.tagID){case $.HTML:{Qa(e,t);break}case $.BASEFONT:case $.BGSOUND:case $.HEAD:case $.LINK:case $.META:case $.NOFRAMES:case $.STYLE:{Rd(e,t);break}case $.NOSCRIPT:{e._err(t,We.nestedNoscriptInHead);break}default:g2(e,t)}}function $Je(e,t){switch(t.tagID){case $.NOSCRIPT:{e.openElements.pop(),e.insertionMode=me.IN_HEAD;break}case $.BR:{g2(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function g2(e,t){const n=t.type===ir.EOF?We.openElementsLeftAfterEof:We.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=me.IN_HEAD,e._processToken(t)}function LJe(e,t){switch(t.tagID){case $.HTML:{Qa(e,t);break}case $.BODY:{e._insertElement(t,tt.HTML),e.framesetOk=!1,e.insertionMode=me.IN_BODY;break}case $.FRAMESET:{e._insertElement(t,tt.HTML),e.insertionMode=me.IN_FRAMESET;break}case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{e._err(t,We.abandonedHeadElementChild),e.openElements.push(e.headElement,$.HEAD),Rd(e,t),e.openElements.remove(e.headElement);break}case $.HEAD:{e._err(t,We.misplacedStartTagForHeadElement);break}default:y2(e,t)}}function FJe(e,t){switch(t.tagID){case $.BODY:case $.HTML:case $.BR:{y2(e,t);break}case $.TEMPLATE:{Gb(e,t);break}default:e._err(t,We.endTagWithoutMatchingOpenElement)}}function y2(e,t){e._insertFakeElement($e.BODY,$.BODY),e.insertionMode=me.IN_BODY,xL(e,t)}function xL(e,t){switch(t.type){case ir.CHARACTER:{Qbe(e,t);break}case ir.WHITESPACE_CHARACTER:{Xbe(e,t);break}case ir.COMMENT:{ZU(e,t);break}case ir.START_TAG:{Qa(e,t);break}case ir.END_TAG:{SL(e,t);break}case ir.EOF:{t_e(e,t);break}}}function Xbe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Qbe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function jJe(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function BJe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function UJe(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,tt.HTML),e.insertionMode=me.IN_FRAMESET)}function zJe(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,tt.HTML)}function VJe(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),jbe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,tt.HTML)}function HJe(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,tt.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function qJe(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,tt.HTML),n||(e.formElement=e.openElements.current))}function WJe(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===$.LI&&i===$.LI||(n===$.DD||n===$.DT)&&(i===$.DD||i===$.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==$.ADDRESS&&i!==$.DIV&&i!==$.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,tt.HTML)}function GJe(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,tt.HTML),e.tokenizer.state=Ns.PLAINTEXT}function YJe(e,t){e.openElements.hasInScope($.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,tt.HTML),e.framesetOk=!1}function KJe(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName($e.A);n&&(gG(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,tt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function XJe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,tt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function QJe(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope($.NOBR)&&(gG(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,tt.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function JJe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,tt.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function ZJe(e,t){e.treeAdapter.getDocumentMode(e.document)!==ql.QUIRKS&&e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._insertElement(t,tt.HTML),e.framesetOk=!1,e.insertionMode=me.IN_TABLE}function Jbe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,tt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Zbe(e){const t=$be(e,j0.TYPE);return t!=null&&t.toLowerCase()===yJe}function eZe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,tt.HTML),Zbe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function tZe(e,t){e._appendElement(t,tt.HTML),t.ackSelfClosing=!0}function nZe(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._appendElement(t,tt.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function rZe(e,t){t.tagName=$e.IMG,t.tagID=$.IMG,Jbe(e,t)}function iZe(e,t){e._insertElement(t,tt.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Ns.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=me.TEXT}function sZe(e,t){e.openElements.hasInButtonScope($.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Ns.RAWTEXT)}function oZe(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Ns.RAWTEXT)}function Hoe(e,t){e._switchToTextParsing(t,Ns.RAWTEXT)}function aZe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,tt.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===me.IN_TABLE||e.insertionMode===me.IN_CAPTION||e.insertionMode===me.IN_TABLE_BODY||e.insertionMode===me.IN_ROW||e.insertionMode===me.IN_CELL?me.IN_SELECT_IN_TABLE:me.IN_SELECT}function uZe(e,t){e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,tt.HTML)}function lZe(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,tt.HTML)}function cZe(e,t){e.openElements.hasInScope($.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion($.RTC),e._insertElement(t,tt.HTML)}function fZe(e,t){e._reconstructActiveFormattingElements(),Gbe(t),mG(t),t.selfClosing?e._appendElement(t,tt.MATHML):e._insertElement(t,tt.MATHML),t.ackSelfClosing=!0}function dZe(e,t){e._reconstructActiveFormattingElements(),Ybe(t),mG(t),t.selfClosing?e._appendElement(t,tt.SVG):e._insertElement(t,tt.SVG),t.ackSelfClosing=!0}function qoe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,tt.HTML)}function Qa(e,t){switch(t.tagID){case $.I:case $.S:case $.B:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.SMALL:case $.STRIKE:case $.STRONG:{XJe(e,t);break}case $.A:{KJe(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{VJe(e,t);break}case $.P:case $.DL:case $.OL:case $.UL:case $.DIV:case $.DIR:case $.NAV:case $.MAIN:case $.MENU:case $.ASIDE:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.DETAILS:case $.ADDRESS:case $.ARTICLE:case $.SECTION:case $.SUMMARY:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{zJe(e,t);break}case $.LI:case $.DD:case $.DT:{WJe(e,t);break}case $.BR:case $.IMG:case $.WBR:case $.AREA:case $.EMBED:case $.KEYGEN:{Jbe(e,t);break}case $.HR:{nZe(e,t);break}case $.RB:case $.RTC:{lZe(e,t);break}case $.RT:case $.RP:{cZe(e,t);break}case $.PRE:case $.LISTING:{HJe(e,t);break}case $.XMP:{sZe(e,t);break}case $.SVG:{dZe(e,t);break}case $.HTML:{jJe(e,t);break}case $.BASE:case $.LINK:case $.META:case $.STYLE:case $.TITLE:case $.SCRIPT:case $.BGSOUND:case $.BASEFONT:case $.TEMPLATE:{Rd(e,t);break}case $.BODY:{BJe(e,t);break}case $.FORM:{qJe(e,t);break}case $.NOBR:{QJe(e,t);break}case $.MATH:{fZe(e,t);break}case $.TABLE:{ZJe(e,t);break}case $.INPUT:{eZe(e,t);break}case $.PARAM:case $.TRACK:case $.SOURCE:{tZe(e,t);break}case $.IMAGE:{rZe(e,t);break}case $.BUTTON:{YJe(e,t);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{JJe(e,t);break}case $.IFRAME:{oZe(e,t);break}case $.SELECT:{aZe(e,t);break}case $.OPTION:case $.OPTGROUP:{uZe(e,t);break}case $.NOEMBED:{Hoe(e,t);break}case $.FRAMESET:{UJe(e,t);break}case $.TEXTAREA:{iZe(e,t);break}case $.NOSCRIPT:{e.options.scriptingEnabled?Hoe(e,t):qoe(e,t);break}case $.PLAINTEXT:{GJe(e,t);break}case $.COL:case $.TH:case $.TD:case $.TR:case $.HEAD:case $.FRAME:case $.TBODY:case $.TFOOT:case $.THEAD:case $.CAPTION:case $.COLGROUP:break;default:qoe(e,t)}}function hZe(e,t){if(e.openElements.hasInScope($.BODY)&&(e.insertionMode=me.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function pZe(e,t){e.openElements.hasInScope($.BODY)&&(e.insertionMode=me.AFTER_BODY,l_e(e,t))}function mZe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function gZe(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope($.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped($.FORM):n&&e.openElements.remove(n))}function yZe(e){e.openElements.hasInButtonScope($.P)||e._insertFakeElement($e.P,$.P),e._closePElement()}function vZe(e){e.openElements.hasInListItemScope($.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion($.LI),e.openElements.popUntilTagNamePopped($.LI))}function bZe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function _Ze(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function wZe(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function EZe(e){e._reconstructActiveFormattingElements(),e._insertFakeElement($e.BR,$.BR),e.openElements.pop(),e.framesetOk=!1}function e_e(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==$.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function SL(e,t){switch(t.tagID){case $.A:case $.B:case $.I:case $.S:case $.U:case $.EM:case $.TT:case $.BIG:case $.CODE:case $.FONT:case $.NOBR:case $.SMALL:case $.STRIKE:case $.STRONG:{gG(e,t);break}case $.P:{yZe(e);break}case $.DL:case $.UL:case $.OL:case $.DIR:case $.DIV:case $.NAV:case $.PRE:case $.MAIN:case $.MENU:case $.ASIDE:case $.BUTTON:case $.CENTER:case $.FIGURE:case $.FOOTER:case $.HEADER:case $.HGROUP:case $.DIALOG:case $.ADDRESS:case $.ARTICLE:case $.DETAILS:case $.SECTION:case $.SUMMARY:case $.LISTING:case $.FIELDSET:case $.BLOCKQUOTE:case $.FIGCAPTION:{mZe(e,t);break}case $.LI:{vZe(e);break}case $.DD:case $.DT:{bZe(e,t);break}case $.H1:case $.H2:case $.H3:case $.H4:case $.H5:case $.H6:{_Ze(e);break}case $.BR:{EZe(e);break}case $.BODY:{hZe(e,t);break}case $.HTML:{pZe(e,t);break}case $.FORM:{gZe(e);break}case $.APPLET:case $.OBJECT:case $.MARQUEE:{wZe(e,t);break}case $.TEMPLATE:{Gb(e,t);break}default:e_e(e,t)}}function t_e(e,t){e.tmplInsertionModeStack.length>0?u_e(e,t):yG(e,t)}function xZe(e,t){var n;t.tagID===$.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function SZe(e,t){e._err(t,We.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function v8(e,t){if(Kbe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=me.IN_TABLE_TEXT,t.type){case ir.CHARACTER:{r_e(e,t);break}case ir.WHITESPACE_CHARACTER:{n_e(e,t);break}}else PI(e,t)}function TZe(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,tt.HTML),e.insertionMode=me.IN_CAPTION}function CZe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,tt.HTML),e.insertionMode=me.IN_COLUMN_GROUP}function AZe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement($e.COLGROUP,$.COLGROUP),e.insertionMode=me.IN_COLUMN_GROUP,vG(e,t)}function IZe(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,tt.HTML),e.insertionMode=me.IN_TABLE_BODY}function kZe(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement($e.TBODY,$.TBODY),e.insertionMode=me.IN_TABLE_BODY,TL(e,t)}function RZe(e,t){e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function NZe(e,t){Zbe(t)?e._appendElement(t,tt.HTML):PI(e,t),t.ackSelfClosing=!0}function PZe(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,tt.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function $E(e,t){switch(t.tagID){case $.TD:case $.TH:case $.TR:{kZe(e,t);break}case $.STYLE:case $.SCRIPT:case $.TEMPLATE:{Rd(e,t);break}case $.COL:{AZe(e,t);break}case $.FORM:{PZe(e,t);break}case $.TABLE:{RZe(e,t);break}case $.TBODY:case $.TFOOT:case $.THEAD:{IZe(e,t);break}case $.INPUT:{NZe(e,t);break}case $.CAPTION:{TZe(e,t);break}case $.COLGROUP:{CZe(e,t);break}default:PI(e,t)}}function rA(e,t){switch(t.tagID){case $.TABLE:{e.openElements.hasInTableScope($.TABLE)&&(e.openElements.popUntilTagNamePopped($.TABLE),e._resetInsertionMode());break}case $.TEMPLATE:{Gb(e,t);break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:PI(e,t)}}function PI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,xL(e,t),e.fosterParentingEnabled=n}function n_e(e,t){e.pendingCharacterTokens.push(t)}function r_e(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function PT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)PI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const i_e=new Set([$.CAPTION,$.COL,$.COLGROUP,$.TBODY,$.TD,$.TFOOT,$.TH,$.THEAD,$.TR]);function DZe(e,t){const n=t.tagID;i_e.has(n)?e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=me.IN_TABLE,$E(e,t)):Qa(e,t)}function OZe(e,t){const n=t.tagID;switch(n){case $.CAPTION:case $.TABLE:{e.openElements.hasInTableScope($.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped($.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=me.IN_TABLE,n===$.TABLE&&rA(e,t));break}case $.BODY:case $.COL:case $.COLGROUP:case $.HTML:case $.TBODY:case $.TD:case $.TFOOT:case $.TH:case $.THEAD:case $.TR:break;default:SL(e,t)}}function vG(e,t){switch(t.tagID){case $.HTML:{Qa(e,t);break}case $.COL:{e._appendElement(t,tt.HTML),t.ackSelfClosing=!0;break}case $.TEMPLATE:{Rd(e,t);break}default:NO(e,t)}}function MZe(e,t){switch(t.tagID){case $.COLGROUP:{e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=me.IN_TABLE);break}case $.TEMPLATE:{Gb(e,t);break}case $.COL:break;default:NO(e,t)}}function NO(e,t){e.openElements.currentTagId===$.COLGROUP&&(e.openElements.pop(),e.insertionMode=me.IN_TABLE,e._processToken(t))}function TL(e,t){switch(t.tagID){case $.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,tt.HTML),e.insertionMode=me.IN_ROW;break}case $.TH:case $.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement($e.TR,$.TR),e.insertionMode=me.IN_ROW,CL(e,t);break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=me.IN_TABLE,$E(e,t));break}default:$E(e,t)}}function e7(e,t){const n=t.tagID;switch(t.tagID){case $.TBODY:case $.TFOOT:case $.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=me.IN_TABLE);break}case $.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=me.IN_TABLE,rA(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:case $.TR:break;default:rA(e,t)}}function CL(e,t){switch(t.tagID){case $.TH:case $.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,tt.HTML),e.insertionMode=me.IN_CELL,e.activeFormattingElements.insertMarker();break}case $.CAPTION:case $.COL:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=me.IN_TABLE_BODY,TL(e,t));break}default:$E(e,t)}}function s_e(e,t){switch(t.tagID){case $.TR:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=me.IN_TABLE_BODY);break}case $.TABLE:{e.openElements.hasInTableScope($.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=me.IN_TABLE_BODY,e7(e,t));break}case $.TBODY:case $.TFOOT:case $.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope($.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=me.IN_TABLE_BODY,e7(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:case $.TD:case $.TH:break;default:rA(e,t)}}function $Ze(e,t){const n=t.tagID;i_e.has(n)?(e.openElements.hasInTableScope($.TD)||e.openElements.hasInTableScope($.TH))&&(e._closeTableCell(),CL(e,t)):Qa(e,t)}function LZe(e,t){const n=t.tagID;switch(n){case $.TD:case $.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=me.IN_ROW);break}case $.TABLE:case $.TBODY:case $.TFOOT:case $.THEAD:case $.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),s_e(e,t));break}case $.BODY:case $.CAPTION:case $.COL:case $.COLGROUP:case $.HTML:break;default:SL(e,t)}}function o_e(e,t){switch(t.tagID){case $.HTML:{Qa(e,t);break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e._insertElement(t,tt.HTML);break}case $.OPTGROUP:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop(),e._insertElement(t,tt.HTML);break}case $.INPUT:case $.KEYGEN:case $.TEXTAREA:case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),t.tagID!==$.SELECT&&e._processStartTag(t));break}case $.SCRIPT:case $.TEMPLATE:{Rd(e,t);break}}}function a_e(e,t){switch(t.tagID){case $.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===$.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===$.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===$.OPTGROUP&&e.openElements.pop();break}case $.OPTION:{e.openElements.currentTagId===$.OPTION&&e.openElements.pop();break}case $.SELECT:{e.openElements.hasInSelectScope($.SELECT)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode());break}case $.TEMPLATE:{Gb(e,t);break}}}function FZe(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e._processStartTag(t)):o_e(e,t)}function jZe(e,t){const n=t.tagID;n===$.CAPTION||n===$.TABLE||n===$.TBODY||n===$.TFOOT||n===$.THEAD||n===$.TR||n===$.TD||n===$.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped($.SELECT),e._resetInsertionMode(),e.onEndTag(t)):a_e(e,t)}function BZe(e,t){switch(t.tagID){case $.BASE:case $.BASEFONT:case $.BGSOUND:case $.LINK:case $.META:case $.NOFRAMES:case $.SCRIPT:case $.STYLE:case $.TEMPLATE:case $.TITLE:{Rd(e,t);break}case $.CAPTION:case $.COLGROUP:case $.TBODY:case $.TFOOT:case $.THEAD:{e.tmplInsertionModeStack[0]=me.IN_TABLE,e.insertionMode=me.IN_TABLE,$E(e,t);break}case $.COL:{e.tmplInsertionModeStack[0]=me.IN_COLUMN_GROUP,e.insertionMode=me.IN_COLUMN_GROUP,vG(e,t);break}case $.TR:{e.tmplInsertionModeStack[0]=me.IN_TABLE_BODY,e.insertionMode=me.IN_TABLE_BODY,TL(e,t);break}case $.TD:case $.TH:{e.tmplInsertionModeStack[0]=me.IN_ROW,e.insertionMode=me.IN_ROW,CL(e,t);break}default:e.tmplInsertionModeStack[0]=me.IN_BODY,e.insertionMode=me.IN_BODY,Qa(e,t)}}function UZe(e,t){t.tagID===$.TEMPLATE&&Gb(e,t)}function u_e(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped($.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):yG(e,t)}function zZe(e,t){t.tagID===$.HTML?Qa(e,t):PO(e,t)}function l_e(e,t){var n;if(t.tagID===$.HTML){if(e.fragmentContext||(e.insertionMode=me.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===$.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else PO(e,t)}function PO(e,t){e.insertionMode=me.IN_BODY,xL(e,t)}function VZe(e,t){switch(t.tagID){case $.HTML:{Qa(e,t);break}case $.FRAMESET:{e._insertElement(t,tt.HTML);break}case $.FRAME:{e._appendElement(t,tt.HTML),t.ackSelfClosing=!0;break}case $.NOFRAMES:{Rd(e,t);break}}}function HZe(e,t){t.tagID===$.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==$.FRAMESET&&(e.insertionMode=me.AFTER_FRAMESET))}function qZe(e,t){switch(t.tagID){case $.HTML:{Qa(e,t);break}case $.NOFRAMES:{Rd(e,t);break}}}function WZe(e,t){t.tagID===$.HTML&&(e.insertionMode=me.AFTER_AFTER_FRAMESET)}function GZe(e,t){t.tagID===$.HTML?Qa(e,t):yD(e,t)}function yD(e,t){e.insertionMode=me.IN_BODY,xL(e,t)}function YZe(e,t){switch(t.tagID){case $.HTML:{Qa(e,t);break}case $.NOFRAMES:{Rd(e,t);break}}}function KZe(e,t){t.chars=Yi,e._insertCharacters(t)}function XZe(e,t){e._insertCharacters(t),e.framesetOk=!1}function c_e(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==tt.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function QZe(e,t){if(dJe(t))c_e(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===tt.MATHML?Gbe(t):r===tt.SVG&&(hJe(t),Ybe(t)),mG(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function JZe(e,t){if(t.tagID===$.P||t.tagID===$.BR){c_e(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===tt.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}$e.AREA,$e.BASE,$e.BASEFONT,$e.BGSOUND,$e.BR,$e.COL,$e.EMBED,$e.FRAME,$e.HR,$e.IMG,$e.INPUT,$e.KEYGEN,$e.LINK,$e.META,$e.PARAM,$e.SOURCE,$e.TRACK,$e.WBR;const ZZe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Woe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function f_e(e,t){const n=cet(e),r=Nbe("type",{handlers:{root:eet,element:tet,text:net,comment:h_e,doctype:ret,raw:set},unknown:oet}),i={parser:n?new Voe(Woe):Voe.getFragmentParser(void 0,Woe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),sS(i,yp());const s=n?i.parser.document:i.parser.getFragment(),o=fQe(s,{file:i.options.file});return i.stitches&&fG(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function d_e(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function eet(e,t){d_e(e.children,t)}function tet(e,t){aet(e,t),d_e(e.children,t),uet(e,t)}function net(e,t){const n={type:ir.CHARACTER,chars:e.value,location:DI(e)};sS(t,yp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function ret(e,t){const n={type:ir.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:DI(e)};sS(t,yp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function iet(e,t){t.stitches=!0;const n=fet(e);if("children"in e&&"children"in n){const r=f_e({type:"root",children:e.children},t.options);n.children=r.children}h_e({type:"comment",value:{stitch:n}},t)}function h_e(e,t){const n=e.value,r={type:ir.COMMENT,data:n,location:DI(e)};sS(t,yp(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function set(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,p_e(t,yp(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function oet(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))iet(n,t);else{let r="";throw ZZe.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function sS(e,t){p_e(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Ns.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function p_e(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function aet(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Ns.PLAINTEXT)return;sS(t,yp(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:w1.html;i===w1.html&&n==="svg"&&(i=w1.svg);const s=gQe({...e,children:[]},{space:i===w1.svg?"svg":"html"}),o={type:ir.START_TAG,tagName:n,tagID:iS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:DI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function uet(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&SQe.includes(n)||t.parser.tokenizer.state===Ns.PLAINTEXT)return;sS(t,bL(e));const r={type:ir.END_TAG,tagName:n,tagID:iS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:DI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Ns.RCDATA||t.parser.tokenizer.state===Ns.RAWTEXT||t.parser.tokenizer.state===Ns.SCRIPT_DATA)&&(t.parser.tokenizer.state=Ns.DATA)}function cet(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function DI(e){const t=yp(e)||{line:void 0,column:void 0,offset:void 0},n=bL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function fet(e){return"children"in e?ME({...e,children:[]}):ME(e)}function det(e){return function(t,n){return f_e(t,{...e,file:n})}}function xu({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return w.jsx(Ub,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return w.jsx(pt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return w.jsx(es,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return w.jsx(es,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return w.jsx(es,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return w.jsx(es,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return w.jsx(es,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return w.jsx(es,{...s,order:6,...s,pb:12})},a({node:i,...s}){return w.jsx(jb,{...s,ref:void 0})},ul({node:i,...s}){return w.jsx(hd,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return w.jsx(hd,{type:"ordered",withPadding:!0,...o,pb:8})}};return w.jsx(JXe,{components:n,rehypePlugins:[det],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function t7({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return w.jsx(xu,{text:n})}const het="https://github.com/revisit-studies/study/tree/main/public/";function pet({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=gp();return w.jsx(Ui.Main,{children:w.jsxs(uf,{size:"xs",px:"xs",children:[w.jsx(Ub,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${cc}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),w.jsx(pt,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=q1e(i);return w.jsx(Zs,{onClick:a=>{a.preventDefault(),r(`/${o}`)},my:"sm",style:{width:"100%"},children:w.jsxs(Bb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?w.jsxs(w.Fragment,{children:[w.jsx(pt,{fw:"bold",children:i}),w.jsxs(Kt,{align:"center",direction:"row",children:[w.jsx(qse,{color:"red"}),w.jsx(pt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),w.jsx(t7,{issues:s.errors,type:"error"})]}):w.jsxs(w.Fragment,{children:[w.jsxs(Kt,{direction:"row",justify:"space-between",children:[w.jsx(pt,{fw:"bold",children:s.studyMetadata.title}),w.jsx(Fb,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${cc}${o}`,children:w.jsx(SWe,{style:{paddingTop:4}})})]}),w.jsxs(pt,{c:"dimmed",children:[w.jsx(pt,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),w.jsx(pt,{c:"dimmed",children:s.studyMetadata.description}),w.jsx(pt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:w.jsx(jb,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${het}${o}`})})]}),s.warnings.length>0&&w.jsxs(w.Fragment,{children:[w.jsxs(Kt,{align:"center",direction:"row",children:[w.jsx(qse,{color:"orange"}),w.jsx(pt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),w.jsx(t7,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var b8={exports:{}},_8={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Goe;function met(){if(Goe)return _8;Goe=1;var e=A$();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return _8.useSyncExternalStoreWithSelector=function(u,l,c,f,d){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function y(x){if(!b){if(b=!0,_=x,x=f(x),d!==void 0&&p.hasValue){var T=p.value;if(d(T,x))return E=T}return E=x}if(T=E,n(_,x))return T;var A=f(x);return d!==void 0&&d(T,A)?T:(_=x,E=A)}var b=!1,_,E,C=c===void 0?null:c;return[function(){return y(l())},C===null?void 0:function(){return y(C())}]},[l,c,f,d]);var g=r(u,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=g},[g]),a(g),g},_8}var Yoe;function get(){return Yoe||(Yoe=1,b8.exports=met()),b8.exports}var yet=get(),Zl="default"in mO?Jr:mO,Koe=Symbol.for("react-redux-context"),Xoe=typeof globalThis<"u"?globalThis:{};function vet(){if(!Zl.createContext)return{};const e=Xoe[Koe]??(Xoe[Koe]=new Map);let t=e.get(Zl.createContext);return t||(t=Zl.createContext(null),e.set(Zl.createContext,t)),t}var ny=vet(),bet=()=>{throw new Error("uSES not initialized!")};function bG(e=ny){return function(){return Zl.useContext(e)}}var m_e=bG(),g_e=bet,_et=e=>{g_e=e},wet=(e,t)=>e===t;function Eet(e=ny){const t=e===ny?m_e:bG(e),n=(r,i={})=>{const{equalityFn:s=wet,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Zl.useRef(!0);const d=Zl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=g_e(u.addNestedSub,a.getState,l||a.getState,d,s);return Zl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var xet=Eet();function Tet(e){e()}function Cet(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Tet(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Qoe={notify(){},get:()=>[]};function Aet(e,t){let n,r=Qoe,i=0,s=!1;function o(g){c();const y=r.subscribe(g);let b=!1;return()=>{b||(b=!0,y(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Cet())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Qoe)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Iet=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ket=typeof navigator<"u"&&navigator.product==="ReactNative",Ret=Iet||ket?Zl.useLayoutEffect:Zl.useEffect;function Net({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Zl.useMemo(()=>{const l=Aet(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Zl.useMemo(()=>e.getState(),[e]);Ret(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||ny;return Zl.createElement(u.Provider,{value:o},n)}var Pet=Net;function y_e(e=ny){const t=e===ny?m_e:bG(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Det=y_e();function Oet(e=ny){const t=e===ny?Det:y_e(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var v_e=Oet();_et(yet.useSyncExternalStoreWithSelector);function ra(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Met=typeof Symbol=="function"&&Symbol.observable||"@@observable",Joe=Met,w8=()=>Math.random().toString(36).substring(7).split("").join("."),$et={INIT:`@@redux/INIT${w8()}`,REPLACE:`@@redux/REPLACE${w8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${w8()}`},DO=$et;function _G(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function b_e(e,t,n){if(typeof e!="function")throw new Error(ra(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ra(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ra(1));return n(b_e)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((y,b)=>{o.set(b,y)}))}function c(){if(u)throw new Error(ra(3));return i}function f(y){if(typeof y!="function")throw new Error(ra(4));if(u)throw new Error(ra(5));let b=!0;l();const _=a++;return o.set(_,y),function(){if(b){if(u)throw new Error(ra(6));b=!1,l(),o.delete(_),s=null}}}function d(y){if(!_G(y))throw new Error(ra(7));if(typeof y.type>"u")throw new Error(ra(8));if(typeof y.type!="string")throw new Error(ra(17));if(u)throw new Error(ra(9));try{u=!0,i=r(i,y)}finally{u=!1}return(s=o).forEach(_=>{_()}),y}function h(y){if(typeof y!="function")throw new Error(ra(10));r=y,d({type:DO.REPLACE})}function p(){const y=f;return{subscribe(b){if(typeof b!="object"||b===null)throw new Error(ra(11));function _(){const C=b;C.next&&C.next(c())}return _(),{unsubscribe:y(_)}},[Joe](){return this}}}return d({type:DO.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Joe]:p}}function Let(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:DO.INIT})>"u")throw new Error(ra(12));if(typeof n(void 0,{type:DO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ra(13))})}function Fet(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Let(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(ra(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function OO(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function jet(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(ra(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=OO(...a)(i.dispatch),{...i,dispatch:s}}}function Bet(e){return _G(e)&&"type"in e&&typeof e.type=="string"}var __e=Symbol.for("immer-nothing"),Zoe=Symbol.for("immer-draftable"),fc=Symbol.for("immer-state");function Zf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var LE=Object.getPrototypeOf;function ry(e){return!!e&&!!e[fc]}function Hm(e){var t;return e?w_e(e)||Array.isArray(e)||!!e[Zoe]||!!((t=e.constructor)!=null&&t[Zoe])||IL(e)||kL(e):!1}var Uet=Object.prototype.constructor.toString();function w_e(e){if(!e||typeof e!="object")return!1;const t=LE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Uet}function MO(e,t){AL(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function AL(e){const t=e[fc];return t?t.type_:Array.isArray(e)?1:IL(e)?2:kL(e)?3:0}function n7(e,t){return AL(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function E_e(e,t,n){const r=AL(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function zet(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function IL(e){return e instanceof Map}function kL(e){return e instanceof Set}function Xv(e){return e.copy_||e.base_}function r7(e,t){if(IL(e))return new Map(e);if(kL(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=w_e(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[fc];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(LE(e),r)}else{const r=LE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function wG(e,t=!1){return RL(e)||ry(e)||!Hm(e)||(AL(e)>1&&(e.set=e.add=e.clear=e.delete=Vet),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>wG(r,!0))),e}function Vet(){Zf(2)}function RL(e){return Object.isFrozen(e)}var Het={};function Q1(e){const t=Het[e];return t||Zf(0,e),t}var iA;function x_e(){return iA}function qet(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function eae(e,t){t&&(Q1("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function i7(e){s7(e),e.drafts_.forEach(Wet),e.drafts_=null}function s7(e){e===iA&&(iA=e.parent_)}function tae(e){return iA=qet(iA,e)}function Wet(e){const t=e[fc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function nae(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[fc].modified_&&(i7(t),Zf(4)),Hm(e)&&(e=$O(t,e),t.parent_||LO(t,e)),t.patches_&&Q1("Patches").generateReplacementPatches_(n[fc].base_,e,t.patches_,t.inversePatches_)):e=$O(t,n,[]),i7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==__e?e:void 0}function $O(e,t,n){if(RL(t))return t;const r=t[fc];if(!r)return MO(t,(i,s)=>rae(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return LO(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),MO(s,(a,u)=>rae(e,r,i,a,u,n,o)),LO(e,i,!1),n&&e.patches_&&Q1("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function rae(e,t,n,r,i,s,o){if(ry(i)){const a=s&&t&&t.type_!==3&&!n7(t.assigned_,r)?s.concat(r):void 0,u=$O(e,i,a);if(E_e(n,r,u),ry(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Hm(i)&&!RL(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;$O(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&LO(e,i)}}function LO(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&wG(t,n)}function Get(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:x_e(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=EG;n&&(i=[r],s=sA);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var EG={get(e,t){if(t===fc)return e;const n=Xv(e);if(!n7(n,t))return Yet(e,n,t);const r=n[t];return e.finalized_||!Hm(r)?r:r===E8(e.base_,t)?(x8(e),e.copy_[t]=a7(r,e)):r},has(e,t){return t in Xv(e)},ownKeys(e){return Reflect.ownKeys(Xv(e))},set(e,t,n){const r=S_e(Xv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=E8(Xv(e),t),s=i==null?void 0:i[fc];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(zet(n,i)&&(n!==void 0||n7(e.base_,t)))return!0;x8(e),o7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return E8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,x8(e),o7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Xv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Zf(11)},getPrototypeOf(e){return LE(e.base_)},setPrototypeOf(){Zf(12)}},sA={};MO(EG,(e,t)=>{sA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});sA.deleteProperty=function(e,t){return sA.set.call(this,e,t,void 0)};sA.set=function(e,t,n){return EG.set.call(this,e[0],t,n,e[0])};function E8(e,t){const n=e[fc];return(n?Xv(n):e)[t]}function Yet(e,t,n){var i;const r=S_e(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function S_e(e,t){if(!(t in e))return;let n=LE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=LE(n)}}function o7(e){e.modified_||(e.modified_=!0,e.parent_&&o7(e.parent_))}function x8(e){e.copy_||(e.copy_=r7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ket=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&Zf(6),r!==void 0&&typeof r!="function"&&Zf(7);let i;if(Hm(t)){const s=tae(this),o=a7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?i7(s):s7(s)}return eae(s,r),nae(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===__e&&(i=void 0),this.autoFreeze_&&wG(i,!0),r){const s=[],o=[];Q1("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Zf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Hm(e)||Zf(8),ry(e)&&(e=T_e(e));const t=tae(this),n=a7(e,void 0);return n[fc].isManual_=!0,s7(t),n}finishDraft(e,t){const n=e&&e[fc];(!n||!n.isManual_)&&Zf(9);const{scope_:r}=n;return eae(r,t),nae(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Q1("Patches").applyPatches_;return ry(e)?r(e,t):this.produce(e,i=>r(i,t))}};function a7(e,t){const n=IL(e)?Q1("MapSet").proxyMap_(e,t):kL(e)?Q1("MapSet").proxySet_(e,t):Get(e,t);return(t?t.scope_:x_e()).drafts_.push(n),n}function T_e(e){return ry(e)||Zf(10,e),C_e(e)}function C_e(e){if(!Hm(e)||RL(e))return e;const t=e[fc];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=r7(e,t.scope_.immer_.useStrictShallowCopy_)}else n=r7(e,!0);return MO(n,(r,i)=>{E_e(n,r,C_e(i))}),t&&(t.finalized_=!1),n}var dc=new Ket,A_e=dc.produce;dc.produceWithPatches.bind(dc);dc.setAutoFreeze.bind(dc);dc.setUseStrictShallowCopy.bind(dc);dc.applyPatches.bind(dc);dc.createDraft.bind(dc);dc.finishDraft.bind(dc);function Xet(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Qet(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Jet(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var iae=e=>Array.isArray(e)?e:[e];function Zet(e){const t=Array.isArray(e[0])?e[0]:e;return Jet(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function ett(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var ttt=class{constructor(e){this.value=e}deref(){return this.value}},ntt=typeof WeakRef<"u"?WeakRef:ttt,rtt=0,sae=1;function mN(){return{s:rtt,v:void 0,o:null,p:null}}function xG(e,t={}){let n=mN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let g=a.o;g===null&&(a.o=g=new WeakMap);const y=g.get(p);y===void 0?(a=mN(),g.set(p,a)):a=y}else{let g=a.p;g===null&&(a.p=g=new Map);const y=g.get(p);y===void 0?(a=mN(),g.set(p,a)):a=y}}const l=a;let c;if(a.s===sae)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new ntt(c):c}return l.s=sae,l.v=c,c}return o.clearCache=()=>{n=mN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function I_e(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),Xet(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=xG,argsMemoizeOptions:p=[],devModeChecks:g={}}=c,y=iae(d),b=iae(p),_=Zet(i),E=f(function(){return s++,l.apply(null,arguments)},...y),C=h(function(){o++;const T=ett(_,arguments);return a=E.apply(null,T),a},...b);return Object.assign(C,{resultFunc:l,memoizedResultFunc:E,dependencies:_,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var k_e=I_e(xG),itt=Object.assign((e,t=k_e)=>{Qet(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>itt});function R_e(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var stt=R_e(),ott=R_e,att=(...e)=>{const t=I_e(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(ry(o)?T_e(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};att(xG);var utt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?OO:OO.apply(null,arguments)};function FE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(ml(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Bet(r)&&r.type===e,n}var N_e=class EC extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,EC.prototype)}static get[Symbol.species](){return EC}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new EC(...t[0].concat(this)):new EC(...t.concat(this))}};function oae(e){return Hm(e)?A_e(e,()=>{}):e}function aae(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(ml(10));const r=n.insert(t,e);return e.set(t,r),r}function ltt(e){return typeof e=="boolean"}var ctt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new N_e;return n&&(ltt(n)?o.push(stt):o.push(ott(n.extraArgument))),o},ftt="RTK_autoBatch",P_e=e=>t=>{setTimeout(t,e)},dtt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:P_e(10),htt=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?dtt:e.type==="callback"?e.queueNotification:P_e(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[ftt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},ptt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new N_e(e);return r&&i.push(htt(typeof r=="object"?r:void 0)),i},mtt=!0;function gtt(e){const t=ctt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(_G(n))a=Fet(n);else throw new Error(ml(1));let u;typeof r=="function"?u=r(t):u=t();let l=OO;i&&(l=utt({trace:!mtt,...typeof i=="object"&&i}));const c=jet(...u),f=ptt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return b_e(a,s,h)}function D_e(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(ml(28));if(a in t)throw new Error(ml(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function ytt(e){return typeof e=="function"}function vtt(e,t){let[n,r,i]=D_e(t),s;if(ytt(e))s=()=>oae(e());else{const a=oae(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(ry(c)){const h=f(c,u);return h===void 0?c:h}else{if(Hm(c))return A_e(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(ml(9))}return d}}return c},a)}return o.getInitialState=s,o}var btt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",_tt=(e=21)=>{let t="",n=e;for(;n--;)t+=btt[Math.random()*64|0];return t},wtt=Symbol.for("rtk-slice-createasyncthunk");function Ett(e,t){return`${e}/${t}`}function xtt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[wtt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(ml(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Ctt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(E,C){const x=typeof E=="string"?E:E.type;if(!x)throw new Error(ml(12));if(x in l.sliceCaseReducersByType)throw new Error(ml(13));return l.sliceCaseReducersByType[x]=C,c},addMatcher(E,C){return l.sliceMatchers.push({matcher:E,reducer:C}),c},exposeAction(E,C){return l.actionCreators[E]=C,c},exposeCaseReducer(E,C){return l.sliceCaseReducersByName[E]=C,c}};u.forEach(E=>{const C=a[E],x={reducerName:E,type:Ett(s,E),createNotation:typeof i.reducers=="function"};Itt(C)?Rtt(x,C,c,t):Att(x,C,c)});function f(){const[E={},C=[],x=void 0]=typeof i.extraReducers=="function"?D_e(i.extraReducers):[i.extraReducers],T={...E,...l.sliceCaseReducersByType};return vtt(i.initialState,A=>{for(let k in T)A.addCase(k,T[k]);for(let k of l.sliceMatchers)A.addMatcher(k.matcher,k.reducer);for(let k of C)A.addMatcher(k.matcher,k.reducer);x&&A.addDefaultCase(x)})}const d=E=>E,h=new Map;let p;function g(E,C){return p||(p=f()),p(E,C)}function y(){return p||(p=f()),p.getInitialState()}function b(E,C=!1){function x(A){let k=A[E];return typeof k>"u"&&C&&(k=y()),k}function T(A=d){const k=aae(h,C,{insert:()=>new WeakMap});return aae(k,A,{insert:()=>{const N={};for(const[P,D]of Object.entries(i.selectors??{}))N[P]=Stt(D,A,y,C);return N}})}return{reducerPath:E,getSelectors:T,get selectors(){return T(x)},selectSlice:x}}const _={name:s,reducer:g,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:y,...b(o),injectInto(E,{reducerPath:C,...x}={}){const T=C??o;return E.inject({reducerPath:T,reducer:g},x),{..._,...b(T,!0)}}};return _}}function Stt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Ttt=xtt();function Ctt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Att({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!ktt(r))throw new Error(ml(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?FE(e,o):FE(e))}function Itt(e){return e._reducerDefinitionType==="asyncThunk"}function ktt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Rtt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(ml(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||gN,pending:a||gN,rejected:u||gN,settled:l||gN})}function gN(){}var Ntt=(e,t)=>{if(typeof e!="function")throw new Error(ml(32))},SG="listenerMiddleware",Ptt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=FE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ml(21));return Ntt(s),{predicate:i,type:t,effect:s}},Dtt=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Ptt(e);return{id:_tt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ml(22))}}},{withTypes:()=>Dtt}),Ott=Object.assign(FE(`${SG}/add`),{withTypes:()=>Ott});FE(`${SG}/removeAll`);var Mtt=Object.assign(FE(`${SG}/remove`),{withTypes:()=>Mtt});function ml(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function qm(e){return e.components.flatMap(t=>typeof t=="string"?t:qm(t))}function O_e(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:O_e(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function M_e(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+qm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+qm(e).length-1}];r+=1}else{const o=M_e(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function $_e(e,t){const n=M_e(e,t,0);return typeof n=="number"?null:n}function L_e(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=L_e(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function $tt(e,t){const n=L_e(e,t,0);return n.found?n.distance:-1}function F_e(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...F_e(i,`${t}-${s}`))}),n}function TG(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>TG(n,`${t}-${r}`))}}async function Ltt(e,t,n,r,i){const s=qm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[]}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=Ttt({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:g,startTime:y,endTime:b,provenanceGraph:_,windowEvents:E}=h;d.answers[p]={answer:g,startTime:y,endTime:b,provenanceGraph:_,windowEvents:E}}}});return{store:gtt({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const j_e=O.createContext(null);function vp(){return O.useContext(j_e).actions}const bp=v_e,Vo=xet;function Ftt(e){return Vo(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const jtt=k_e(e=>e.sequence,e=>qm(e));function CG(){return Vo(jtt)}function Gy(){const{studyId:e}=zm();return`${e}`}function vg(){const{index:e}=zm(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Yy(){const e=vg(),t=CG();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var xC={exports:{}};xC.exports;var uae;function Btt(){return uae||(uae=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",g="[object Map]",y="[object Number]",b="[object Null]",_="[object Object]",E="[object Proxy]",C="[object RegExp]",x="[object Set]",T="[object String]",A="[object Undefined]",k="[object WeakMap]",N="[object ArrayBuffer]",P="[object DataView]",D="[object Float32Array]",j="[object Float64Array]",M="[object Int8Array]",B="[object Int16Array]",V="[object Int32Array]",z="[object Uint8Array]",G="[object Uint8ClampedArray]",Y="[object Uint16Array]",Q="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,K=/^(?:0|[1-9]\d*)$/,q={};q[D]=q[j]=q[M]=q[B]=q[V]=q[z]=q[G]=q[Y]=q[Q]=!0,q[a]=q[u]=q[N]=q[c]=q[P]=q[f]=q[d]=q[h]=q[g]=q[y]=q[_]=q[C]=q[x]=q[T]=q[k]=!1;var X=typeof Zc=="object"&&Zc&&Zc.Object===Object&&Zc,Z=typeof self=="object"&&self&&self.Object===Object&&self,ae=X||Z||Function("return this")(),he=t&&!t.nodeType&&t,ge=he&&!0&&e&&!e.nodeType&&e,be=ge&&ge.exports===he,Ce=be&&X.process,oe=function(){try{var fe=ge&&ge.require&&ge.require("util").types;return fe||Ce&&Ce.binding&&Ce.binding("util")}catch{}}(),re=oe&&oe.isTypedArray;function xe(fe,we,qe){switch(qe.length){case 0:return fe.call(we);case 1:return fe.call(we,qe[0]);case 2:return fe.call(we,qe[0],qe[1]);case 3:return fe.call(we,qe[0],qe[1],qe[2])}return fe.apply(we,qe)}function Re(fe,we){for(var qe=-1,Ut=Array(fe);++qe<fe;)Ut[qe]=we(qe);return Ut}function Ke(fe){return function(we){return fe(we)}}function Qe(fe,we){return fe==null?void 0:fe[we]}function ke(fe,we){return function(qe){return fe(we(qe))}}var Ue=Array.prototype,rt=Function.prototype,ft=Object.prototype,Rt=ae["__core-js_shared__"],st=rt.toString,Ie=ft.hasOwnProperty,kt=function(){var fe=/[^.]+$/.exec(Rt&&Rt.keys&&Rt.keys.IE_PROTO||"");return fe?"Symbol(src)_1."+fe:""}(),Ot=ft.toString,Ne=st.call(Object),ze=RegExp("^"+st.call(Ie).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=be?ae.Buffer:void 0,St=ae.Symbol,$t=ae.Uint8Array;ot&&ot.allocUnsafe;var Vn=ke(Object.getPrototypeOf,Object),Yr=Object.create,tr=ft.propertyIsEnumerable,vr=Ue.splice,Fn=St?St.toStringTag:void 0,Un=function(){try{var fe=lt(Object,"defineProperty");return fe({},"",{}),fe}catch{}}(),ur=ot?ot.isBuffer:void 0,lr=Math.max,Us=Date.now,Si=lt(ae,"Map"),kn=lt(Object,"create"),ii=function(){function fe(){}return function(we){if(!Ac(we))return{};if(Yr)return Yr(we);fe.prototype=we;var qe=new fe;return fe.prototype=void 0,qe}}();function Mr(fe){var we=-1,qe=fe==null?0:fe.length;for(this.clear();++we<qe;){var Ut=fe[we];this.set(Ut[0],Ut[1])}}function is(){this.__data__=kn?kn(null):{},this.size=0}function Tc(fe){var we=this.has(fe)&&delete this.__data__[fe];return this.size-=we?1:0,we}function ba(fe){var we=this.__data__;if(kn){var qe=we[fe];return qe===r?void 0:qe}return Ie.call(we,fe)?we[fe]:void 0}function Ol(fe){var we=this.__data__;return kn?we[fe]!==void 0:Ie.call(we,fe)}function Tr(fe,we){var qe=this.__data__;return this.size+=this.has(fe)?0:1,qe[fe]=kn&&we===void 0?r:we,this}Mr.prototype.clear=is,Mr.prototype.delete=Tc,Mr.prototype.get=ba,Mr.prototype.has=Ol,Mr.prototype.set=Tr;function Ti(fe){var we=-1,qe=fe==null?0:fe.length;for(this.clear();++we<qe;){var Ut=fe[we];this.set(Ut[0],Ut[1])}}function $r(){this.__data__=[],this.size=0}function xo(fe){var we=this.__data__,qe=hr(we,fe);if(qe<0)return!1;var Ut=we.length-1;return qe==Ut?we.pop():vr.call(we,qe,1),--this.size,!0}function Cs(fe){var we=this.__data__,qe=hr(we,fe);return qe<0?void 0:we[qe][1]}function Ko(fe){return hr(this.__data__,fe)>-1}function ye(fe,we){var qe=this.__data__,Ut=hr(qe,fe);return Ut<0?(++this.size,qe.push([fe,we])):qe[Ut][1]=we,this}Ti.prototype.clear=$r,Ti.prototype.delete=xo,Ti.prototype.get=Cs,Ti.prototype.has=Ko,Ti.prototype.set=ye;function ce(fe){var we=-1,qe=fe==null?0:fe.length;for(this.clear();++we<qe;){var Ut=fe[we];this.set(Ut[0],Ut[1])}}function _e(){this.size=0,this.__data__={hash:new Mr,map:new(Si||Ti),string:new Mr}}function je(fe){var we=at(this,fe).delete(fe);return this.size-=we?1:0,we}function Be(fe){return at(this,fe).get(fe)}function wt(fe){return at(this,fe).has(fe)}function Bt(fe,we){var qe=at(this,fe),Ut=qe.size;return qe.set(fe,we),this.size+=qe.size==Ut?0:1,this}ce.prototype.clear=_e,ce.prototype.delete=je,ce.prototype.get=Be,ce.prototype.has=wt,ce.prototype.set=Bt;function en(fe){var we=this.__data__=new Ti(fe);this.size=we.size}function Qn(){this.__data__=new Ti,this.size=0}function nr(fe){var we=this.__data__,qe=we.delete(fe);return this.size=we.size,qe}function Dn(fe){return this.__data__.get(fe)}function fr(fe){return this.__data__.has(fe)}function Lr(fe,we){var qe=this.__data__;if(qe instanceof Ti){var Ut=qe.__data__;if(!Si||Ut.length<n-1)return Ut.push([fe,we]),this.size=++qe.size,this;qe=this.__data__=new ce(Ut)}return qe.set(fe,we),this.size=qe.size,this}en.prototype.clear=Qn,en.prototype.delete=nr,en.prototype.get=Dn,en.prototype.has=fr,en.prototype.set=Lr;function an(fe,we){var qe=So(fe),Ut=!qe&&ss(fe),Hn=!qe&&!Ut&&Za(fe),Cr=!qe&&!Ut&&!Hn&&bv(fe),ni=qe||Ut||Hn||Cr,Mn=ni?Re(fe.length,String):[],Kr=Mn.length;for(var Ci in fe)ni&&(Ci=="length"||Hn&&(Ci=="offset"||Ci=="parent")||Cr&&(Ci=="buffer"||Ci=="byteLength"||Ci=="byteOffset")||Lt(Ci,Kr))||Mn.push(Ci);return Mn}function dr(fe,we,qe){(qe!==void 0&&!Xo(fe[we],qe)||qe===void 0&&!(we in fe))&&On(fe,we,qe)}function si(fe,we,qe){var Ut=fe[we];(!(Ie.call(fe,we)&&Xo(Ut,qe))||qe===void 0&&!(we in fe))&&On(fe,we,qe)}function hr(fe,we){for(var qe=fe.length;qe--;)if(Xo(fe[qe][0],we))return qe;return-1}function On(fe,we,qe){we=="__proto__"&&Un?Un(fe,we,{configurable:!0,enumerable:!0,value:qe,writable:!0}):fe[we]=qe}var zs=Xe();function ti(fe){return fe==null?fe===void 0?A:b:Fn&&Fn in Object(fe)?ut(fe):ro(fe)}function Vs(fe){return qs(fe)&&ti(fe)==a}function wi(fe){if(!Ac(fe)||Jn(fe))return!1;var we=Lu(fe)?ze:U;return we.test($g(fe))}function Hi(fe){return qs(fe)&&b_(fe.length)&&!!q[ti(fe)]}function no(fe){if(!Ac(fe))return Fr(fe);var we=Zt(fe),qe=[];for(var Ut in fe)Ut=="constructor"&&(we||!Ie.call(fe,Ut))||qe.push(Ut);return qe}function Hs(fe,we,qe,Ut,Hn){fe!==we&&zs(we,function(Cr,ni){if(Hn||(Hn=new en),Ac(Cr))oi(fe,we,ni,qe,Hs,Ut,Hn);else{var Mn=Ut?Ut(Cc(fe,ni),Cr,ni+"",fe,we,Hn):void 0;Mn===void 0&&(Mn=Cr),dr(fe,ni,Mn)}},Wd)}function oi(fe,we,qe,Ut,Hn,Cr,ni){var Mn=Cc(fe,qe),Kr=Cc(we,qe),Ci=ni.get(Kr);if(Ci){dr(fe,qe,Ci);return}var io=Cr?Cr(Mn,Kr,qe+"",fe,we,ni):void 0,kc=io===void 0;if(kc){var ju=So(Kr),Mp=!ju&&Za(Kr),Ws=!ju&&!Mp&&bv(Kr);io=Kr,ju||Mp||Ws?So(Mn)?io=Mn:qd(Mn)?io=Te(Mn):Mp?(kc=!1,io=te(Kr)):Ws?(kc=!1,io=ue(Kr)):io=[]:ZS(Kr)||ss(Kr)?(io=Mn,ss(Mn)?io=Ic(Mn):(!Ac(Mn)||Lu(Mn))&&(io=_t(Kr))):kc=!1}kc&&(ni.set(Kr,io),Hn(io,Kr,Ut,Cr,ni),ni.delete(Kr)),dr(fe,qe,io)}function Mu(fe,we){return Mg($u(fe,we,Fu),fe+"")}var fs=Un?function(fe,we){return Un(fe,"toString",{configurable:!0,enumerable:!1,value:Ml(we),writable:!0})}:Fu;function te(fe,we){return fe.slice()}function ve(fe){var we=new fe.constructor(fe.byteLength);return new $t(we).set(new $t(fe)),we}function ue(fe,we){var qe=ve(fe.buffer);return new fe.constructor(qe,fe.byteOffset,fe.length)}function Te(fe,we){var qe=-1,Ut=fe.length;for(we||(we=Array(Ut));++qe<Ut;)we[qe]=fe[qe];return we}function Pe(fe,we,qe,Ut){var Hn=!qe;qe||(qe={});for(var Cr=-1,ni=we.length;++Cr<ni;){var Mn=we[Cr],Kr=void 0;Kr===void 0&&(Kr=fe[Mn]),Hn?On(qe,Mn,Kr):si(qe,Mn,Kr)}return qe}function Se(fe){return Mu(function(we,qe){var Ut=-1,Hn=qe.length,Cr=Hn>1?qe[Hn-1]:void 0,ni=Hn>2?qe[2]:void 0;for(Cr=fe.length>3&&typeof Cr=="function"?(Hn--,Cr):void 0,ni&&pn(qe[0],qe[1],ni)&&(Cr=Hn<3?void 0:Cr,Hn=1),we=Object(we);++Ut<Hn;){var Mn=qe[Ut];Mn&&fe(we,Mn,Ut,Cr)}return we})}function Xe(fe){return function(we,qe,Ut){for(var Hn=-1,Cr=Object(we),ni=Ut(we),Mn=ni.length;Mn--;){var Kr=ni[++Hn];if(qe(Cr[Kr],Kr,Cr)===!1)break}return we}}function at(fe,we){var qe=fe.__data__;return Qt(we)?qe[typeof we=="string"?"string":"hash"]:qe.map}function lt(fe,we){var qe=Qe(fe,we);return wi(qe)?qe:void 0}function ut(fe){var we=Ie.call(fe,Fn),qe=fe[Fn];try{fe[Fn]=void 0;var Ut=!0}catch{}var Hn=Ot.call(fe);return Ut&&(we?fe[Fn]=qe:delete fe[Fn]),Hn}function _t(fe){return typeof fe.constructor=="function"&&!Zt(fe)?ii(Vn(fe)):{}}function Lt(fe,we){var qe=typeof fe;return we=we??o,!!we&&(qe=="number"||qe!="symbol"&&K.test(fe))&&fe>-1&&fe%1==0&&fe<we}function pn(fe,we,qe){if(!Ac(qe))return!1;var Ut=typeof we;return(Ut=="number"?Ja(qe)&&Lt(we,qe.length):Ut=="string"&&we in qe)?Xo(qe[we],fe):!1}function Qt(fe){var we=typeof fe;return we=="string"||we=="number"||we=="symbol"||we=="boolean"?fe!=="__proto__":fe===null}function Jn(fe){return!!kt&&kt in fe}function Zt(fe){var we=fe&&fe.constructor,qe=typeof we=="function"&&we.prototype||ft;return fe===qe}function Fr(fe){var we=[];if(fe!=null)for(var qe in Object(fe))we.push(qe);return we}function ro(fe){return Ot.call(fe)}function $u(fe,we,qe){return we=lr(we===void 0?fe.length-1:we,0),function(){for(var Ut=arguments,Hn=-1,Cr=lr(Ut.length-we,0),ni=Array(Cr);++Hn<Cr;)ni[Hn]=Ut[we+Hn];Hn=-1;for(var Mn=Array(we+1);++Hn<we;)Mn[Hn]=Ut[Hn];return Mn[we]=qe(ni),xe(fe,this,Mn)}}function Cc(fe,we){if(!(we==="constructor"&&typeof fe[we]=="function")&&we!="__proto__")return fe[we]}var Mg=Hd(fs);function Hd(fe){var we=0,qe=0;return function(){var Ut=Us(),Hn=s-(Ut-qe);if(qe=Ut,Hn>0){if(++we>=i)return arguments[0]}else we=0;return fe.apply(void 0,arguments)}}function $g(fe){if(fe!=null){try{return st.call(fe)}catch{}try{return fe+""}catch{}}return""}function Xo(fe,we){return fe===we||fe!==fe&&we!==we}var ss=Vs(function(){return arguments}())?Vs:function(fe){return qs(fe)&&Ie.call(fe,"callee")&&!tr.call(fe,"callee")},So=Array.isArray;function Ja(fe){return fe!=null&&b_(fe.length)&&!Lu(fe)}function qd(fe){return qs(fe)&&Ja(fe)}var Za=ur||kf;function Lu(fe){if(!Ac(fe))return!1;var we=ti(fe);return we==h||we==p||we==l||we==E}function b_(fe){return typeof fe=="number"&&fe>-1&&fe%1==0&&fe<=o}function Ac(fe){var we=typeof fe;return fe!=null&&(we=="object"||we=="function")}function qs(fe){return fe!=null&&typeof fe=="object"}function ZS(fe){if(!qs(fe)||ti(fe)!=_)return!1;var we=Vn(fe);if(we===null)return!0;var qe=Ie.call(we,"constructor")&&we.constructor;return typeof qe=="function"&&qe instanceof qe&&st.call(qe)==Ne}var bv=re?Ke(re):Hi;function Ic(fe){return Pe(fe,Wd(fe))}function Wd(fe){return Ja(fe)?an(fe):no(fe)}var __=Se(function(fe,we,qe){Hs(fe,we,qe)});function Ml(fe){return function(){return fe}}function Fu(fe){return fe}function kf(){return!1}e.exports=__}(xC,xC.exports)),xC.exports}var Utt=Btt();const AG=Ru(Utt);function B0(e){return structuredClone(e)}function IG(){const e=vg(),n=`${Yy()}_${e}`;return Vo(i=>i.answers[n])}const B_e=O.createContext(null);function ztt(){const e=O.useContext(B_e);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function iy(){return Vo(e=>e.config)}function lae(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function U_e(){const e=vg(),t=CG(),r=`${Yy()}_${e}`,i=Vo(T=>T.trialValidation),s=Vo(T=>T.sequence),o=Vo(T=>T.answers),a=bp(),{saveTrialAnswer:u,setIframeAnswers:l}=vp(),{storageEngine:c}=js(),f=Gy(),[d,h]=O.useState(!0);O.useEffect(()=>{(async()=>{if(c){const A=await c.getModes(f);h(A.dataCollectionEnabled)}})()},[c,f]);const p=Ftt(r),g=typeof e!="number"||!p,y=IG(),b=gp(),_=iy(),E=O.useMemo(()=>Date.now(),[]),C=ztt(),x=O.useCallback(()=>{if(typeof e!="number")return;const T=B0(i[r]),A=Object.values(T).reduce((V,z)=>Object.hasOwn(z,"values")?{...V,...z.values}:V,{}),{provenanceGraph:k}=T,N=Date.now(),P=C&&"current"in C&&C.current?C.current.splice(0,C.current.length):[];d&&y.endTime===-1&&(a(u({identifier:r,answer:A,startTime:E,endTime:N,provenanceGraph:k,windowEvents:P})),c&&c.saveAnswers({...o,[r]:{answer:A,startTime:E,endTime:N,provenanceGraph:k,windowEvents:P}}),a(l({})));let D=e+1;const j=$_e(s,e),M=j!==null&&j.some(V=>Object.hasOwn(V.currentBlock,"skip")&&V.currentBlock.skip!==void 0),B={...o,[r]:{answer:A,startTime:E,endTime:N,provenanceGraph:k,windowEvents:P}};M&&[...j.flatMap(z=>z.currentBlock.skip?z.currentBlock.skip.map(G=>({...G,firstIndex:z.firstIndex,lastIndex:z.lastIndex})):[])].some(z=>{let G=!1;const Y=Object.fromEntries(Object.entries(B).filter(([L])=>{const U=parseInt(L.slice(L.lastIndexOf("_")+1),10);return U>=z.firstIndex&&U<=e})),Q=z.check!=="block"?Object.entries(Y).filter(([L])=>L.slice(0,L.lastIndexOf("_"))===z.name):Object.entries(Y);if(Q.length===0)return!1;if(Q.some(([L,U])=>!U))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(z,null,2)}`);if(z.check==="response"||z.check==="responses"){const[L,U]=Q[0];z.check==="response"?G=z.comparison==="equal"?z.value===U.answer[z.responseId]:z.value!==U.answer[z.responseId]:G=!lae(U.answer,L,_.components[L.slice(0,L.lastIndexOf("_"))],_)}else if(z.check==="block"||z.check==="repeatedComponent"){if(Q.length<z.value)return!1;const L=Q.map(([q,X])=>lae(X.answer,q,_.components[q.slice(0,q.lastIndexOf("_"))],_)),U=L.filter(q=>q).length,K=L.length-U;G=z.condition==="numCorrect"&&U===z.value||z.condition==="numIncorrect"&&K===z.value}if(G){const L=t.indexOf(z.to),U=L===-1?$tt(s,z.to):-1;return D=L===-1?U:L,!0}return!1}),b(`/${f}/${D}${window.location.search}`)},[e,i,r,C,d,y==null?void 0:y.endTime,s,o,E,b,f,a,u,c,l,_,t]);return{isNextDisabled:g,goToNextStep:x}}function Vtt({label:e="Next",disabled:t=!1,onClick:n}){const{isNextDisabled:r,goToNextStep:i}=U_e(),s=O.useCallback(()=>{n&&n(),i()},[i,n]);return w.jsx(Sn,{type:"submit",disabled:t||r,onClick:s,children:e})}function Htt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const qtt=typeof window<"u"?O.useLayoutEffect:O.useEffect;function Zo(e,t){qtt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Wtt(e,t){e&&Htt(e),Zo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Zo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Zo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Zo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Zo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Zo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Zo(`mantine-form:${e}:clear-errors`,t.clearErrors),Zo(`mantine-form:${e}:reset`,t.reset),Zo(`mantine-form:${e}:validate`,t.validate),Zo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Zo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Zo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Zo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Zo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Zo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Zo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Zo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Gtt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function u7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Ytt(e){const[t,n]=O.useState(u7(e)),r=O.useRef(t),i=O.useCallback(u=>{n(l=>{const c=u7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=O.useCallback(()=>i({}),[]),o=O.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=O.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function z_e(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function cae(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function fae(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=z_e(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=cae(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=cae(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Ktt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function dae(e,t,n){typeof n.value=="object"&&(n.value=Lw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Lw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Lw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Lw(a),Lw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Lw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)dae(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||dae(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function V_e(e){return typeof e!="string"?[]:e.split(".")}function ul(e,t){const n=V_e(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function NL(e,t,n){const r=V_e(e);if(r.length===0)return n;const i=Lw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Xtt(e,{from:t,to:n},r){const i=ul(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),NL(e,s,r)}function Qtt(e,t,n,r){const i=ul(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),NL(e,s,r)}function Jtt(e,t,n){const r=ul(e,n);return Array.isArray(r)?NL(e,r.filter((i,s)=>s!==t),n):n}function Ztt({$values:e,$errors:t,$status:n}){const r=O.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Ktt(o,a,u)),e.setValues({values:Xtt(o,a,e.refValues.current),updateState:!0})},[]),i=O.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>fae(o,a,u,-1)),e.setValues({values:Jtt(o,a,e.refValues.current),updateState:!0})},[]),s=O.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>fae(o,u,l,1)),e.setValues({values:Qtt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var S8,hae;function kG(){return hae||(hae=1,S8=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),S8}var ent=kG();const vD=Ru(ent);function yN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function tnt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=O.useState(t),[o,a]=O.useState(e),u=O.useRef(t),l=O.useRef(e),c=O.useCallback(x=>{const T=typeof x=="function"?x(u.current):x;u.current=T,n==="controlled"&&s(T)},[]),f=O.useCallback(x=>{const T=typeof x=="function"?x(l.current):x;l.current=T,n==="controlled"&&a(T)},[]),d=O.useCallback(()=>c({}),[]),h=x=>{const T=x?{...x,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),f({})},p=O.useCallback((x,T)=>{c(A=>yN(A,x)===T?A:{...A,[x]:T})},[]),g=O.useCallback((x,T)=>{f(A=>yN(A,x)===T?A:{...A,[x]:T})},[]),y=O.useCallback(x=>yN(u.current,x),[]),b=O.useCallback(x=>f(T=>{if(typeof x!="string")return T;const A=z_e(x,T);return delete A[x],vD(A,T)?T:A}),[]),_=O.useCallback(x=>{if(x){const A=ul(x,l.current);if(typeof A=="boolean")return A;const k=ul(x,r.refValues.current),N=ul(x,r.valuesSnapshot.current);return!vD(k,N)}return Object.keys(l.current).length>0?yN(l.current):!vD(r.refValues.current,r.valuesSnapshot.current)},[]),E=O.useCallback(()=>l.current,[]),C=O.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:y,setFieldTouched:p,setFieldDirty:g,setTouchedState:s,setDirtyState:a,clearFieldDirty:b,isDirty:_,getDirty:E,getTouched:C}}function nnt({initialValues:e,onValuesChange:t,mode:n}){const r=O.useRef(!1),[i,s]=O.useState(e||{}),o=O.useRef(i),a=O.useRef(i),u=O.useCallback(({values:p,subscribers:g,updateState:y=!0,mergeWithPreviousValues:b=!0})=>{const _=o.current,E=p instanceof Function?p(o.current):p,C=b?{..._,...E}:E;o.current=C,y&&s(C),t==null||t(C,_),g==null||g.filter(Boolean).forEach(x=>x({updatedValues:C,previousValues:_}))},[t]),l=O.useCallback(p=>{var b;const g=ul(p.path,o.current),y=p.value instanceof Function?p.value(g):p.value;if(g!==y){const _=o.current,E=NL(p.path,y,o.current);u({values:E,updateState:p.updateState}),(b=p.subscribers)==null||b.filter(Boolean).forEach(C=>C({path:p.path,updatedValues:E,previousValues:_}))}},[]),c=O.useCallback(p=>{a.current=p},[]),f=O.useCallback((p,g)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),g())},[]),d=O.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=O.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function rnt({$status:e}){const t=O.useRef({}),n=O.useCallback((i,s)=>{O.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=O.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:ul(i,o.previousValues),value:ul(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function pae(e,t){return e?`${e}-${t.toString()}`:t.toString()}function mae(e){const t=u7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function l7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=ul(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>l7(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||l7(o,t,a,i)),i},r)}function c7(e,t){return mae(typeof e=="function"?e(t):l7(e,t))}function vN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=c7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const int="__MANTINE_FORM_INDEX__";function gae(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${int}`)):!1:!1}function H_e({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=Ytt(r),p=nnt({initialValues:n,onValuesChange:l,mode:t}),g=tnt({initialDirty:i,initialTouched:s,$values:p,mode:t}),y=Ztt({$values:p,$errors:h,$status:g}),b=rnt({$status:g}),[_,E]=O.useState(0),[C,x]=O.useState({}),T=O.useCallback(()=>{p.resetValues(),h.clearErrors(),g.resetDirty(),g.resetTouched(),t==="uncontrolled"&&E(L=>L+1)},[]),A=O.useCallback(L=>{p.initialize(L,()=>t==="uncontrolled"&&E(U=>U+1))},[]),k=O.useCallback((L,U,K)=>{const q=gae(L,a);g.clearFieldDirty(L),g.setFieldTouched(L,!0),!q&&o&&h.clearFieldError(L),p.setFieldValue({path:L,value:U,updateState:t==="controlled",subscribers:[...b.getFieldSubscribers(L),q?X=>{const Z=vN(L,d,X.updatedValues);Z.hasError?h.setFieldError(L,Z.error):h.clearFieldError(L)}:null,(K==null?void 0:K.forceUpdate)!==!1&&t!=="controlled"?()=>x(X=>({...X,[L]:(X[L]||0)+1})):null]})},[l,d]),N=O.useCallback(L=>{const U=p.refValues.current;p.setValues({values:L,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&E(K=>K+1),Object.keys(b.subscribers.current).forEach(K=>{const q=ul(K,p.refValues.current),X=ul(K,U);q!==X&&b.getFieldSubscribers(K).forEach(Z=>Z({previousValues:U,updatedValues:p.refValues.current}))})},[l,o]),P=O.useCallback(()=>{const L=c7(d,p.refValues.current);return h.setErrors(L.errors),L},[d]),D=O.useCallback(L=>{const U=vN(L,d,p.refValues.current);return U.hasError?h.setFieldError(L,U.error):h.clearFieldError(L),U},[d]),j=(L,{type:U="input",withError:K=!0,withFocus:q=!0,...X}={})=>{const ae={onChange:Gtt(he=>k(L,he,{forceUpdate:!1})),"data-path":pae(e,L)};return K&&(ae.error=h.errorsState[L]),U==="checkbox"?ae[t==="controlled"?"checked":"defaultChecked"]=ul(L,p.refValues.current):ae[t==="controlled"?"value":"defaultValue"]=ul(L,p.refValues.current),q&&(ae.onFocus=()=>g.setFieldTouched(L,!0),ae.onBlur=()=>{if(gae(L,u)){const he=vN(L,d,p.refValues.current);he.hasError?h.setFieldError(L,he.error):h.clearFieldError(L)}}),Object.assign(ae,f==null?void 0:f({inputProps:ae,field:L,options:{type:U,withError:K,withFocus:q,...X},form:Q}))},M=(L,U)=>K=>{K==null||K.preventDefault();const q=P();q.hasErrors?U==null||U(q.errors,p.refValues.current,K):L==null||L(c(p.refValues.current),K)},B=L=>c(L||p.refValues.current),V=O.useCallback(L=>{L.preventDefault(),T()},[]),z=O.useCallback(L=>L?!vN(L,d,p.refValues.current).hasError:!c7(d,p.refValues.current).hasErrors,[d]),G=L=>`${_}-${L}-${C[L]||0}`,Y=O.useCallback(L=>document.querySelector(`[data-path="${pae(e,L)}"]`),[]),Q={watch:b.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:A,setValues:N,setFieldValue:k,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:g.resetDirty,setTouched:g.setTouched,setDirty:g.setDirty,isTouched:g.isTouched,resetTouched:g.resetTouched,isDirty:g.isDirty,getTouched:g.getTouched,getDirty:g.getDirty,reorderListItem:y.reorderListItem,insertListItem:y.insertListItem,removeListItem:y.removeListItem,reset:T,validate:P,validateField:D,getInputProps:j,onSubmit:M,onReset:V,isValid:z,getTransformedValues:B,key:G,getInputNode:Y};return Wtt(e,Q),Q}function snt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function ont(e){return snt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function q_e(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const ant=new URLSearchParams(window.location.search),unt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?ant.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},lnt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?q_e(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function cnt(e,t,n){const[r,i]=O.useState(null),s=H_e({initialValues:unt(e,n),validate:lnt(e)});return O.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Yb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=q_e(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function fnt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return w.jsx(Ql.Group,{label:w.jsxs(Kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(De,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(De,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(xu,{text:s,required:o})})]}),description:u,...n,error:Yb(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:w.jsx(Pi,{mt:"xs",children:l.map(c=>w.jsx(Ql,{disabled:t,value:c.value,label:c.label},c.value))})})}function dnt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return w.jsx(CI,{disabled:t,label:w.jsxs(Kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(De,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(De,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(xu,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:Yb(e,n,c)})}function hnt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return w.jsx(zi.Wrapper,{label:w.jsxs(Kt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&w.jsx(De,{style:{minWidth:"fit-content"},children:`${n}. `}),w.jsx(De,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(xu,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&w.jsx(hd,{children:Array.isArray(t.value)?t.value.map(a=>w.jsx(hd.Item,{children:a},a)):w.jsx(hd.Item,{children:t.value})})})}function W_e({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e,f=a.map(d=>typeof d=="string"?{value:d,label:d}:d);return w.jsx(X1.Group,{name:`radioInput${e.id}`,label:w.jsxs(Kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(De,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(De,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(xu,{text:s,required:o})})]}),description:c,...n,error:Yb(e,n,f),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:w.jsxs(Pi,{mt:"xs",children:[u?w.jsx(pt,{style:{textAlign:"center"},children:u}):null,f.map(d=>w.jsx(X1,{disabled:t,value:d.value,label:d.label},d.label)),w.jsx(pt,{children:l})]})},e.id)}function pnt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return w.jsx(W_e,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function mnt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return w.jsx(IW,{disabled:t,placeholder:l,label:w.jsxs(Kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(De,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(De,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(xu,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Yb(e,n)})}function gnt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Yb(e,n);return w.jsx(zi.Wrapper,{label:w.jsxs(Kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(De,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(De,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(xu,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:w.jsx(mL,{disabled:t,marks:a,...n,h:40})})}function ynt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return w.jsx(bm,{disabled:t,placeholder:s,label:w.jsxs(Kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(De,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(De,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(xu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Yb(e,n)})}function vnt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return w.jsx(mW,{disabled:t,placeholder:s,label:w.jsxs(Kt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&w.jsx(De,{style:{minWidth:"fit-content"},children:`${r}. `}),w.jsx(De,{style:{display:"block"},className:"no-last-child-bottom-padding",children:w.jsx(xu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Yb(e,n)})}function bnt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=XW(),u=iy().uiConfig.enumerateQuestions??!1,l=O.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return w.jsxs(De,{mb:"md",children:[e.type==="numerical"&&w.jsx(mnt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&w.jsx(ynt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&w.jsx(vnt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&w.jsx(pnt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&w.jsx(dnt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&w.jsx(gnt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&w.jsx(W_e,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&w.jsx(fnt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&w.jsx(hnt,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function FO({config:e,location:t,status:n,style:r}){var z;const{storageEngine:i}=js(),s=bp(),{updateResponseBlockValidation:o,toggleShowHelpText:a}=vp(),u=vg(),l=Yy(),c=n==null?void 0:n.answer,f=Gy(),d=gp(),h=e,p=O.useMemo(()=>{var G;return((G=h==null?void 0:h.response)==null?void 0:G.filter(Y=>Y.location?Y.location===t:t==="belowStimulus"))||[]},[h==null?void 0:h.response,t]),g=cnt(p,u,c||{}),[y,b]=O.useState(void 0),_=Vo(G=>G.iframeAnswers),E=Vo(G=>G.iframeProvenance),C=(h==null?void 0:h.provideFeedback)&&(((z=h==null?void 0:h.correctAnswer)==null?void 0:z.length)||0)>0,x=(h==null?void 0:h.allowFailedTraining)===void 0?!0:h.allowFailedTraining,[T,A]=O.useState(0),k=(h==null?void 0:h.trainingAttempts)||2,[N,P]=O.useState(!1),D=t===((h==null?void 0:h.nextButtonLocation)||"belowStimulus");O.useEffect(()=>{const G=p.find(Y=>Y.type==="iframe");if(_&&G){const Y=G.id;g.setValues({...g.values,[Y]:_[Y]})}},[_]),O.useEffect(()=>{E&&b(E)},[E]),O.useEffect(()=>{s(o({location:t,identifier:`${l}_${u}`,status:g.isValid(),values:B0(g.values),provenanceGraph:y}))},[g.values,l,u,t,s,o,y]);const[j,M]=O.useState(Object.fromEntries(p.map(G=>[G.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),B=(G,Y,Q,L,U)=>{M(K=>({...K,[G]:{visible:Y,title:Q,message:L,color:U}}))},V=()=>{const G=T+1;A(G);const Y=Object.fromEntries(p.map(Q=>{var K,q;const L=(q=(K=h.correctAnswer)==null?void 0:K.find(X=>X.id===Q.id))==null?void 0:q.answer,U=g.values[Q.id];return[Q.id,Array.isArray(U)?typeof L=="string"?U.length===1&&L===U[0]:U.length===L.length&&U.every(X=>L.includes(X)):L===U]}));C&&(p.forEach(Q=>{var L;if(Y[Q.id]&&!((L=j[Q.id])!=null&&L.message.includes("You've failed to answer this question correctly")))B(Q.id,!0,"Correct Answer","You have answered the question correctly.","green");else{let U="";G>=k?(U=`You didn't answer this question correctly after ${k} attempts. ${x?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!x&&i&&i.rejectCurrentParticipant(f,"Failed training").then(()=>{setTimeout(()=>{d("./__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{d("./__trainingFailed")},5e3)})):k-G===1?U="Please try again. You have 1 attempt left.":U=`Please try again. You have ${k-G} attempts left.`,B(Q.id,!0,"Incorrect Answer",U,"red")}}),P(x&&G>=k||Object.values(Y).every(Q=>Q)&&G<=k))};return w.jsxs("div",{style:r,children:[p.map((G,Y)=>{var L,U;const Q=(U=(L=h.correctAnswer)==null?void 0:L.find(K=>K.id===G.id))==null?void 0:U.answer;return w.jsx(Jr.Fragment,{children:G.hidden?"":w.jsxs(w.Fragment,{children:[w.jsx(bnt,{storedAnswer:c?c[G.id]:void 0,answer:{...g.getInputProps(G.id,{type:G.type==="checkbox"?"checkbox":"input"})},response:G,index:Y+1}),j[G.id].visible&&w.jsxs(Wx,{mb:"md",title:j[G.id].title,color:j[G.id].color,children:[j[G.id].message," ",j[G.id].message.includes("Please try again")&&w.jsxs(w.Fragment,{children:["Please"," ",w.jsx(jb,{style:{fontSize:14},onClick:()=>s(a()),children:"click here"})," ","and read the help text carefully."]}),w.jsx("br",{}),w.jsx("br",{}),T>=k&&Q&&` The correct answer was: ${Q}.`]})]})},`${G.id}-${u}`)}),w.jsxs(Pi,{justify:"right",gap:"xs",children:[C&&D&&w.jsx(Sn,{onClick:()=>V(),disabled:!g.isValid()||T>=k,children:"Check Answer"}),D&&w.jsx(Vtt,{disabled:C&&!N||!g.isValid(),label:h.nextButtonText||"Next"})]})]})}const DT="@REVISIT_COMMS",_nt={minHeight:"500px",width:"100%",border:0};function wnt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=vp(),r=bp(),i=v_e(),s=O.useRef(null),o=O.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Yy(),u=gp(),l=O.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${DT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return O.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${DT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${DT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${DT}/ANSWERS`:r(t(d.message));break;case`${DT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),w.jsx("iframe",{ref:s,src:`${cc}${e.path}?trialid=${a}&id=${o}`,style:_nt})}async function RG(e){const n=await(await fetch(`${cc}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function J1({email:e,path:t}){const n=Hy();return w.jsxs(uf,{fluid:!0,my:50,maw:800,mx:"auto",children:[w.jsx(es,{order:2,children:w.jsx(pt,{span:!0,c:"orange",children:"404"})}),w.jsxs(pt,{children:[w.jsx(pt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),w.jsx(rc,{h:"lg"}),w.jsxs(hd,{children:[w.jsx(hd.Item,{children:w.jsx(pt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),w.jsx(hd.Item,{children:w.jsxs(pt,{children:["If you're a participant, please contact the study administrator"," ",e&&w.jsxs(w.Fragment,{children:["at"," ",w.jsxs(jb,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Ent={maxWidth:"100%"};function xnt({currentConfig:e}){const t={...Ent,...e.style},[n,r]=O.useState(!0),[i,s]=O.useState(!1);return O.useEffect(()=>{async function o(){const a=await RG(e.path);s(!!a),r(!1)}o()},[e]),n||i?w.jsx(Ub,{mx:"auto",src:`${cc}${e.path}`,style:t}):w.jsx(J1,{path:e.path})}function Rm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Snt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function oS(e){let t,n,r;e.length!==2?(t=Rm,n=(a,u)=>Rm(e(a),u),r=(a,u)=>e(a)-u):(t=e===Rm||e===Snt?e:Tnt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Tnt(){return 0}function G_e(e){return e===null?NaN:+e}function*Cnt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Y_e=oS(Rm),sy=Y_e.right,Ant=Y_e.left;oS(G_e).center;function Int(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function knt(e,t){const n=Int(e,t);return n&&Math.sqrt(n)}function jO(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class _u{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class yae extends Map{constructor(t,n=Q_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(f7(this,t))}has(t){return super.has(f7(this,t))}set(t,n){return super.set(K_e(this,t),n)}delete(t){return super.delete(X_e(this,t))}}class BO extends Set{constructor(t,n=Q_e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(f7(this,t))}add(t){return super.add(K_e(this,t))}delete(t){return super.delete(X_e(this,t))}}function f7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function K_e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function X_e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Q_e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Rnt(e,t){return Array.from(t,n=>e[n])}function Nnt(e=Rm){if(e===Rm)return J_e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function J_e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Pnt=Math.sqrt(50),Dnt=Math.sqrt(10),Ont=Math.sqrt(2);function UO(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Pnt?10:s>=Dnt?5:s>=Ont?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?UO(e,t,n*2):[a,u,l]}function d7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?UO(t,e,n):UO(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function h7(e,t,n){return t=+t,e=+e,n=+n,UO(e,t,n)[2]}function oy(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?h7(t,e,n):h7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Nm(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function p7(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Z_e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?J_e:Nnt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));Z_e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(OT(e,n,t),i(e[r],s)>0&&OT(e,n,r);o<a;){for(OT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?OT(e,n,a):(++a,OT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function OT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function m7(e,t,n){if(e=Float64Array.from(Cnt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return p7(e);if(t>=1)return Nm(e);var r,i=(r-1)*t,s=Math.floor(i),o=Nm(Z_e(e,s).subarray(0,s+1)),a=p7(e.subarray(s+1));return o+(a-o)*(i-s)}}function ewe(e,t,n=G_e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Mnt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function twe(e,t){return m7(e,.5,t)}function*$nt(e){for(const t of e)yield*t}function nwe(e){return Array.from($nt(e))}function ll(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function rwe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Lnt(e,...t){e=new BO(e),t=t.map(Fnt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Fnt(e){return e instanceof BO?e:new BO(e)}function jnt(...e){const t=new BO;for(const n of e)for(const r of n)t.add(r);return t}var Bnt={value:()=>{}};function PL(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new bD(n)}function bD(e){this._=e}function Unt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}bD.prototype=PL.prototype={constructor:bD,on:function(e,t){var n=this._,r=Unt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=znt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=vae(n[i],e.name,t);else if(t==null)for(i in n)n[i]=vae(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new bD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function znt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function vae(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Bnt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var g7="http://www.w3.org/1999/xhtml";const bae={svg:"http://www.w3.org/2000/svg",xhtml:g7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function DL(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),bae.hasOwnProperty(t)?{space:bae[t],local:e}:e}function Vnt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===g7&&t.documentElement.namespaceURI===g7?t.createElement(e):t.createElementNS(n,e)}}function Hnt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function iwe(e){var t=DL(e);return(t.local?Hnt:Vnt)(t)}function qnt(){}function NG(e){return e==null?qnt:function(){return this.querySelector(e)}}function Wnt(e){typeof e!="function"&&(e=NG(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Su(r,this._parents)}function swe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Gnt(){return[]}function owe(e){return e==null?Gnt:function(){return this.querySelectorAll(e)}}function Ynt(e){return function(){return swe(e.apply(this,arguments))}}function Knt(e){typeof e=="function"?e=Ynt(e):e=owe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Su(r,i)}function awe(e){return function(){return this.matches(e)}}function uwe(e){return function(t){return t.matches(e)}}var Xnt=Array.prototype.find;function Qnt(e){return function(){return Xnt.call(this.children,e)}}function Jnt(){return this.firstElementChild}function Znt(e){return this.select(e==null?Jnt:Qnt(typeof e=="function"?e:uwe(e)))}var ert=Array.prototype.filter;function trt(){return Array.from(this.children)}function nrt(e){return function(){return ert.call(this.children,e)}}function rrt(e){return this.selectAll(e==null?trt:nrt(typeof e=="function"?e:uwe(e)))}function irt(e){typeof e!="function"&&(e=awe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Su(r,this._parents)}function lwe(e){return new Array(e.length)}function srt(){return new Su(this._enter||this._groups.map(lwe),this._parents)}function zO(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}zO.prototype={constructor:zO,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function ort(e){return function(){return e}}function art(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new zO(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function urt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new zO(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function lrt(e){return e.__data__}function crt(e,t){if(!arguments.length)return Array.from(this,lrt);var n=t?urt:art,r=this._parents,i=this._groups;typeof e!="function"&&(e=ort(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=frt(e.call(c,c&&c.__data__,l,r)),p=h.length,g=a[l]=new Array(p),y=o[l]=new Array(p),b=u[l]=new Array(d);n(c,f,g,y,b,h,t);for(var _=0,E=0,C,x;_<p;++_)if(C=g[_]){for(_>=E&&(E=_+1);!(x=y[E])&&++E<p;);C._next=x||null}}return o=new Su(o,r),o._enter=a,o._exit=u,o}function frt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function drt(){return new Su(this._exit||this._groups.map(lwe),this._parents)}function hrt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function prt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Su(a,this._parents)}function mrt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function grt(e){e||(e=yrt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Su(i,this._parents).order()}function yrt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vrt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function brt(){return Array.from(this)}function _rt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function wrt(){let e=0;for(const t of this)++e;return e}function Ert(){return!this.node()}function xrt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Srt(e){return function(){this.removeAttribute(e)}}function Trt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Crt(e,t){return function(){this.setAttribute(e,t)}}function Art(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Irt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function krt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Rrt(e,t){var n=DL(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Trt:Srt:typeof t=="function"?n.local?krt:Irt:n.local?Art:Crt)(n,t))}function cwe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Nrt(e){return function(){this.style.removeProperty(e)}}function Prt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Drt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ort(e,t,n){return arguments.length>1?this.each((t==null?Nrt:typeof t=="function"?Drt:Prt)(e,t,n??"")):jE(this.node(),e)}function jE(e,t){return e.style.getPropertyValue(t)||cwe(e).getComputedStyle(e,null).getPropertyValue(t)}function Mrt(e){return function(){delete this[e]}}function $rt(e,t){return function(){this[e]=t}}function Lrt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Frt(e,t){return arguments.length>1?this.each((t==null?Mrt:typeof t=="function"?Lrt:$rt)(e,t)):this.node()[e]}function fwe(e){return e.trim().split(/^|\s+/)}function PG(e){return e.classList||new dwe(e)}function dwe(e){this._node=e,this._names=fwe(e.getAttribute("class")||"")}dwe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function hwe(e,t){for(var n=PG(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function pwe(e,t){for(var n=PG(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function jrt(e){return function(){hwe(this,e)}}function Brt(e){return function(){pwe(this,e)}}function Urt(e,t){return function(){(t.apply(this,arguments)?hwe:pwe)(this,e)}}function zrt(e,t){var n=fwe(e+"");if(arguments.length<2){for(var r=PG(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Urt:t?jrt:Brt)(n,t))}function Vrt(){this.textContent=""}function Hrt(e){return function(){this.textContent=e}}function qrt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Wrt(e){return arguments.length?this.each(e==null?Vrt:(typeof e=="function"?qrt:Hrt)(e)):this.node().textContent}function Grt(){this.innerHTML=""}function Yrt(e){return function(){this.innerHTML=e}}function Krt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Xrt(e){return arguments.length?this.each(e==null?Grt:(typeof e=="function"?Krt:Yrt)(e)):this.node().innerHTML}function Qrt(){this.nextSibling&&this.parentNode.appendChild(this)}function Jrt(){return this.each(Qrt)}function Zrt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function eit(){return this.each(Zrt)}function tit(e){var t=typeof e=="function"?e:iwe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function nit(){return null}function rit(e,t){var n=typeof e=="function"?e:iwe(e),r=t==null?nit:typeof t=="function"?t:NG(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function iit(){var e=this.parentNode;e&&e.removeChild(this)}function sit(){return this.each(iit)}function oit(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ait(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uit(e){return this.select(e?ait:oit)}function lit(e){return arguments.length?this.property("__data__",e):this.node().__data__}function cit(e){return function(t){e.call(this,t,this.__data__)}}function fit(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function dit(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function hit(e,t,n){return function(){var r=this.__on,i,s=cit(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function pit(e,t,n){var r=fit(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?hit:dit,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function mwe(e,t,n){var r=cwe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function mit(e,t){return function(){return mwe(this,e,t)}}function git(e,t){return function(){return mwe(this,e,t.apply(this,arguments))}}function yit(e,t){return this.each((typeof t=="function"?git:mit)(e,t))}function*vit(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var DG=[null];function Su(e,t){this._groups=e,this._parents=t}function OI(){return new Su([[document.documentElement]],DG)}function bit(){return this}Su.prototype=OI.prototype={constructor:Su,select:Wnt,selectAll:Knt,selectChild:Znt,selectChildren:rrt,filter:irt,data:crt,enter:srt,exit:drt,join:hrt,merge:prt,selection:bit,order:mrt,sort:grt,call:vrt,nodes:brt,node:_rt,size:wrt,empty:Ert,each:xrt,attr:Rrt,style:Ort,property:Frt,classed:zrt,text:Wrt,html:Xrt,raise:Jrt,lower:eit,append:tit,insert:rit,remove:sit,clone:uit,datum:lit,on:pit,dispatch:yit,[Symbol.iterator]:vit};function Br(e){return typeof e=="string"?new Su([[document.querySelector(e)]],[document.documentElement]):new Su([[e]],DG)}function _it(e){let t;for(;t=e.sourceEvent;)e=t;return e}function VO(e,t){if(e=_it(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function gwe(e){return typeof e=="string"?new Su([document.querySelectorAll(e)],[document.documentElement]):new Su([swe(e)],DG)}const y7={capture:!0,passive:!1};function v7(e){e.preventDefault(),e.stopImmediatePropagation()}function wit(e){var t=e.document.documentElement,n=Br(e).on("dragstart.drag",v7,y7);"onselectstart"in t?n.on("selectstart.drag",v7,y7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Eit(e,t){var n=e.document.documentElement,r=Br(e).on("dragstart.drag",null);t&&(r.on("click.drag",v7,y7),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function aS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function MI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ky(){}var Z1=.7,BE=1/Z1,rE="\\s*([+-]?\\d+)\\s*",oA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xit=/^#([0-9a-f]{3,8})$/,Sit=new RegExp(`^rgb\\(${rE},${rE},${rE}\\)$`),Tit=new RegExp(`^rgb\\(${Dh},${Dh},${Dh}\\)$`),Cit=new RegExp(`^rgba\\(${rE},${rE},${rE},${oA}\\)$`),Ait=new RegExp(`^rgba\\(${Dh},${Dh},${Dh},${oA}\\)$`),Iit=new RegExp(`^hsl\\(${oA},${Dh},${Dh}\\)$`),kit=new RegExp(`^hsla\\(${oA},${Dh},${Dh},${oA}\\)$`),_ae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aS(Ky,eb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wae,formatHex:wae,formatHex8:Rit,formatHsl:Nit,formatRgb:Eae,toString:Eae});function wae(){return this.rgb().formatHex()}function Rit(){return this.rgb().formatHex8()}function Nit(){return ywe(this).formatHsl()}function Eae(){return this.rgb().formatRgb()}function eb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xit.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xae(t):n===3?new Lo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?bN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?bN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Sit.exec(e))?new Lo(t[1],t[2],t[3],1):(t=Tit.exec(e))?new Lo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Cit.exec(e))?bN(t[1],t[2],t[3],t[4]):(t=Ait.exec(e))?bN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Iit.exec(e))?Cae(t[1],t[2]/100,t[3]/100,1):(t=kit.exec(e))?Cae(t[1],t[2]/100,t[3]/100,t[4]):_ae.hasOwnProperty(e)?xae(_ae[e]):e==="transparent"?new Lo(NaN,NaN,NaN,0):null}function xae(e){return new Lo(e>>16&255,e>>8&255,e&255,1)}function bN(e,t,n,r){return r<=0&&(e=t=n=NaN),new Lo(e,t,n,r)}function OG(e){return e instanceof Ky||(e=eb(e)),e?(e=e.rgb(),new Lo(e.r,e.g,e.b,e.opacity)):new Lo}function ay(e,t,n,r){return arguments.length===1?OG(e):new Lo(e,t,n,r??1)}function Lo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}aS(Lo,ay,MI(Ky,{brighter(e){return e=e==null?BE:Math.pow(BE,e),new Lo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Z1:Math.pow(Z1,e),new Lo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Lo(L1(this.r),L1(this.g),L1(this.b),HO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sae,formatHex:Sae,formatHex8:Pit,formatRgb:Tae,toString:Tae}));function Sae(){return`#${E1(this.r)}${E1(this.g)}${E1(this.b)}`}function Pit(){return`#${E1(this.r)}${E1(this.g)}${E1(this.b)}${E1((isNaN(this.opacity)?1:this.opacity)*255)}`}function Tae(){const e=HO(this.opacity);return`${e===1?"rgb(":"rgba("}${L1(this.r)}, ${L1(this.g)}, ${L1(this.b)}${e===1?")":`, ${e})`}`}function HO(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function L1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function E1(e){return e=L1(e),(e<16?"0":"")+e.toString(16)}function Cae(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ed(e,t,n,r)}function ywe(e){if(e instanceof ed)return new ed(e.h,e.s,e.l,e.opacity);if(e instanceof Ky||(e=eb(e)),!e)return new ed;if(e instanceof ed)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new ed(o,a,u,e.opacity)}function qO(e,t,n,r){return arguments.length===1?ywe(e):new ed(e,t,n,r??1)}function ed(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}aS(ed,qO,MI(Ky,{brighter(e){return e=e==null?BE:Math.pow(BE,e),new ed(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Z1:Math.pow(Z1,e),new ed(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Lo(T8(e>=240?e-240:e+120,i,r),T8(e,i,r),T8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new ed(Aae(this.h),_N(this.s),_N(this.l),HO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=HO(this.opacity);return`${e===1?"hsl(":"hsla("}${Aae(this.h)}, ${_N(this.s)*100}%, ${_N(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Aae(e){return e=(e||0)%360,e<0?e+360:e}function _N(e){return Math.max(0,Math.min(1,e||0))}function T8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const vwe=Math.PI/180,bwe=180/Math.PI,WO=18,_we=.96422,wwe=1,Ewe=.82521,xwe=4/29,iE=6/29,Swe=3*iE*iE,Dit=iE*iE*iE;function Twe(e){if(e instanceof Oh)return new Oh(e.l,e.a,e.b,e.opacity);if(e instanceof _m)return Cwe(e);e instanceof Lo||(e=OG(e));var t=k8(e.r),n=k8(e.g),r=k8(e.b),i=C8((.2225045*t+.7168786*n+.0606169*r)/wwe),s,o;return t===n&&n===r?s=o=i:(s=C8((.4360747*t+.3850649*n+.1430804*r)/_we),o=C8((.0139322*t+.0971045*n+.7141733*r)/Ewe)),new Oh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function GO(e,t,n,r){return arguments.length===1?Twe(e):new Oh(e,t,n,r??1)}function Oh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}aS(Oh,GO,MI(Ky,{brighter(e){return new Oh(this.l+WO*(e??1),this.a,this.b,this.opacity)},darker(e){return new Oh(this.l-WO*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=_we*A8(t),e=wwe*A8(e),n=Ewe*A8(n),new Lo(I8(3.1338561*t-1.6168667*e-.4906146*n),I8(-.9787684*t+1.9161415*e+.033454*n),I8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function C8(e){return e>Dit?Math.pow(e,1/3):e/Swe+xwe}function A8(e){return e>iE?e*e*e:Swe*(e-xwe)}function I8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function k8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Oit(e){if(e instanceof _m)return new _m(e.h,e.c,e.l,e.opacity);if(e instanceof Oh||(e=Twe(e)),e.a===0&&e.b===0)return new _m(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*bwe;return new _m(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function YO(e,t,n,r){return arguments.length===1?Oit(e):new _m(e,t,n,r??1)}function _m(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Cwe(e){if(isNaN(e.h))return new Oh(e.l,0,0,e.opacity);var t=e.h*vwe;return new Oh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}aS(_m,YO,MI(Ky,{brighter(e){return new _m(this.h,this.c,this.l+WO*(e??1),this.opacity)},darker(e){return new _m(this.h,this.c,this.l-WO*(e??1),this.opacity)},rgb(){return Cwe(this).rgb()}}));var Awe=-.14861,MG=1.78277,$G=-.29227,OL=-.90649,aA=1.97294,Iae=aA*OL,kae=aA*MG,Rae=MG*$G-OL*Awe;function Mit(e){if(e instanceof F1)return new F1(e.h,e.s,e.l,e.opacity);e instanceof Lo||(e=OG(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Rae*r+Iae*t-kae*n)/(Rae+Iae-kae),s=r-i,o=(aA*(n-i)-$G*s)/OL,a=Math.sqrt(o*o+s*s)/(aA*i*(1-i)),u=a?Math.atan2(o,s)*bwe-120:NaN;return new F1(u<0?u+360:u,a,i,e.opacity)}function b7(e,t,n,r){return arguments.length===1?Mit(e):new F1(e,t,n,r??1)}function F1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}aS(F1,b7,MI(Ky,{brighter(e){return e=e==null?BE:Math.pow(BE,e),new F1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Z1:Math.pow(Z1,e),new F1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*vwe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Lo(255*(t+n*(Awe*r+MG*i)),255*(t+n*($G*r+OL*i)),255*(t+n*(aA*r)),this.opacity)}}));function Iwe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function kwe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return Iwe((n-r/t)*t,o,i,s,a)}}function Rwe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return Iwe((n-r/t)*t,i,s,o,a)}}const ML=e=>()=>e;function Nwe(e,t){return function(n){return e+n*t}}function $it(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function $L(e,t){var n=t-e;return n?Nwe(e,n>180||n<-180?n-360*Math.round(n/360):n):ML(isNaN(e)?t:e)}function Lit(e){return(e=+e)==1?Fo:function(t,n){return n-t?$it(t,n,e):ML(isNaN(t)?n:t)}}function Fo(e,t){var n=t-e;return n?Nwe(e,n):ML(isNaN(e)?t:e)}const uA=function e(t){var n=Lit(t);function r(i,s){var o=n((i=ay(i)).r,(s=ay(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Fo(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function Pwe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=ay(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Fit=Pwe(kwe),jit=Pwe(Rwe);function LG(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Dwe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Bit(e,t){return(Dwe(t)?LG:Owe)(e,t)}function Owe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=bg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Mwe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Yc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function $we(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=bg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var _7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R8=new RegExp(_7.source,"g");function Uit(e){return function(){return e}}function zit(e){return function(t){return e(t)+""}}function FG(e,t){var n=_7.lastIndex=R8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=_7.exec(e))&&(i=R8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Yc(r,i)})),n=R8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?zit(u[0].x):Uit(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function bg(e,t){var n=typeof t,r;return t==null||n==="boolean"?ML(t):(n==="number"?Yc:n==="string"?(r=eb(t))?(t=r,uA):FG:t instanceof eb?uA:t instanceof Date?Mwe:Dwe(t)?LG:Array.isArray(t)?Owe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?$we:Yc)(e,t)}function Vit(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Hit(e,t){var n=$L(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function $I(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Nae=180/Math.PI,w7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Lwe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Nae,skewX:Math.atan(u)*Nae,scaleX:o,scaleY:a}}var wN;function qit(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?w7:Lwe(t.a,t.b,t.c,t.d,t.e,t.f)}function Wit(e){return e==null||(wN||(wN=document.createElementNS("http://www.w3.org/2000/svg","g")),wN.setAttribute("transform",e),!(e=wN.transform.baseVal.consolidate()))?w7:(e=e.matrix,Lwe(e.a,e.b,e.c,e.d,e.e,e.f))}function Fwe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push("translate(",null,t,null,n);p.push({i:g-4,x:Yc(l,f)},{i:g-2,x:Yc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Yc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Yc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var g=h.push(i(h)+"scale(",null,",",null,")");p.push({i:g-4,x:Yc(l,f)},{i:g-2,x:Yc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,g=d.length,y;++p<g;)f[(y=d[p]).i]=y.x(h);return f.join("")}}}var jwe=Fwe(qit,"px, ","px)","deg)"),Bwe=Fwe(Wit,", ",")",")"),Git=1e-12;function Pae(e){return((e=Math.exp(e))+1/e)/2}function Yit(e){return((e=Math.exp(e))-1/e)/2}function Kit(e){return((e=Math.exp(2*e))-1)/(e+1)}const Xit=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,g=h*h+p*p,y,b;if(g<Git)b=Math.log(d/l)/t,y=function(A){return[a+A*h,u+A*p,l*Math.exp(t*A*b)]};else{var _=Math.sqrt(g),E=(d*d-l*l+r*g)/(2*l*n*_),C=(d*d-l*l-r*g)/(2*d*n*_),x=Math.log(Math.sqrt(E*E+1)-E),T=Math.log(Math.sqrt(C*C+1)-C);b=(T-x)/t,y=function(A){var k=A*b,N=Pae(x),P=l/(n*_)*(N*Kit(t*k+x)-Yit(x));return[a+P*h,u+P*p,l*N/Pae(t*k+x)]}}return y.duration=b*1e3*t/Math.SQRT2,y}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function Uwe(e){return function(t,n){var r=e((t=qO(t)).h,(n=qO(n)).h),i=Fo(t.s,n.s),s=Fo(t.l,n.l),o=Fo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Qit=Uwe($L);var Jit=Uwe(Fo);function Zit(e,t){var n=Fo((e=GO(e)).l,(t=GO(t)).l),r=Fo(e.a,t.a),i=Fo(e.b,t.b),s=Fo(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function zwe(e){return function(t,n){var r=e((t=YO(t)).h,(n=YO(n)).h),i=Fo(t.c,n.c),s=Fo(t.l,n.l),o=Fo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const est=zwe($L);var tst=zwe(Fo);function Vwe(e){return function t(n){n=+n;function r(i,s){var o=e((i=b7(i)).h,(s=b7(s)).h),a=Fo(i.s,s.s),u=Fo(i.l,s.l),l=Fo(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const nst=Vwe($L);var rst=Vwe(Fo);function jG(e,t){t===void 0&&(t=e,e=bg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function ist(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const sst=Object.freeze(Object.defineProperty({__proto__:null,interpolate:bg,interpolateArray:Bit,interpolateBasis:kwe,interpolateBasisClosed:Rwe,interpolateCubehelix:nst,interpolateCubehelixLong:rst,interpolateDate:Mwe,interpolateDiscrete:Vit,interpolateHcl:est,interpolateHclLong:tst,interpolateHsl:Qit,interpolateHslLong:Jit,interpolateHue:Hit,interpolateLab:Zit,interpolateNumber:Yc,interpolateNumberArray:LG,interpolateObject:$we,interpolateRgb:uA,interpolateRgbBasis:Fit,interpolateRgbBasisClosed:jit,interpolateRound:$I,interpolateString:FG,interpolateTransformCss:jwe,interpolateTransformSvg:Bwe,interpolateZoom:Xit,piecewise:jG,quantize:ist},Symbol.toStringTag,{value:"Module"}));var UE=0,SC=0,MT=0,Hwe=1e3,KO,TC,XO=0,tb=0,LL=0,lA=typeof performance=="object"&&performance.now?performance:Date,qwe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function FL(){return tb||(qwe(ost),tb=lA.now()+LL)}function ost(){tb=0}function cA(){this._call=this._time=this._next=null}cA.prototype=BG.prototype={constructor:cA,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?FL():+n)+(t==null?0:+t),!this._next&&TC!==this&&(TC?TC._next=this:KO=this,TC=this),this._call=e,this._time=n,E7()},stop:function(){this._call&&(this._call=null,this._time=1/0,E7())}};function BG(e,t,n){var r=new cA;return r.restart(e,t,n),r}function ast(){FL(),++UE;for(var e=KO,t;e;)(t=tb-e._time)>=0&&e._call.call(void 0,t),e=e._next;--UE}function Dae(){tb=(XO=lA.now())+LL,UE=SC=0;try{ast()}finally{UE=0,lst(),tb=0}}function ust(){var e=lA.now(),t=e-XO;t>Hwe&&(LL-=t,XO=e)}function lst(){for(var e,t=KO,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:KO=n);TC=e,E7(r)}function E7(e){if(!UE){SC&&(SC=clearTimeout(SC));var t=e-tb;t>24?(e<1/0&&(SC=setTimeout(Dae,e-lA.now()-LL)),MT&&(MT=clearInterval(MT))):(MT||(XO=lA.now(),MT=setInterval(ust,Hwe)),UE=1,qwe(Dae))}}function Oae(e,t,n){var r=new cA;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function cst(e,t,n){var r=new cA,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?FL():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var fst=PL("start","end","cancel","interrupt"),dst=[],Wwe=0,Mae=1,x7=2,_D=3,$ae=4,S7=5,wD=6;function jL(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;hst(e,n,{name:t,index:r,group:i,on:fst,tween:dst,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Wwe})}function UG(e,t){var n=Nd(e,t);if(n.state>Wwe)throw new Error("too late; already scheduled");return n}function _p(e,t){var n=Nd(e,t);if(n.state>_D)throw new Error("too late; already running");return n}function Nd(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function hst(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=BG(s,0,n.time);function s(l){n.state=Mae,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Mae)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===_D)return Oae(o);h.state===$ae?(h.state=wD,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=wD,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Oae(function(){n.state===_D&&(n.state=$ae,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=x7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===x7){for(n.state=_D,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=S7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===S7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=wD,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function T7(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>x7&&r.state<S7,r.state=wD,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function pst(e){return this.each(function(){T7(this,e)})}function mst(e,t){var n,r;return function(){var i=_p(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function gst(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=_p(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function yst(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Nd(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?mst:gst)(n,e,t))}function zG(e,t,n){var r=e._id;return e.each(function(){var i=_p(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Nd(i,r).value[t]}}function Gwe(e,t){var n;return(typeof t=="number"?Yc:t instanceof eb?uA:(n=eb(t))?(t=n,uA):FG)(e,t)}function vst(e){return function(){this.removeAttribute(e)}}function bst(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _st(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function wst(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Est(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function xst(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Sst(e,t){var n=DL(e),r=n==="transform"?Bwe:Gwe;return this.attrTween(e,typeof t=="function"?(n.local?xst:Est)(n,r,zG(this,"attr."+e,t)):t==null?(n.local?bst:vst)(n):(n.local?wst:_st)(n,r,t))}function Tst(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Cst(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ast(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Cst(e,s)),n}return i._value=t,i}function Ist(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Tst(e,s)),n}return i._value=t,i}function kst(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=DL(e);return this.tween(n,(r.local?Ast:Ist)(r,t))}function Rst(e,t){return function(){UG(this,e).delay=+t.apply(this,arguments)}}function Nst(e,t){return t=+t,function(){UG(this,e).delay=t}}function Pst(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rst:Nst)(t,e)):Nd(this.node(),t).delay}function Dst(e,t){return function(){_p(this,e).duration=+t.apply(this,arguments)}}function Ost(e,t){return t=+t,function(){_p(this,e).duration=t}}function Mst(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Dst:Ost)(t,e)):Nd(this.node(),t).duration}function $st(e,t){if(typeof t!="function")throw new Error;return function(){_p(this,e).ease=t}}function Lst(e){var t=this._id;return arguments.length?this.each($st(t,e)):Nd(this.node(),t).ease}function Fst(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;_p(this,e).ease=n}}function jst(e){if(typeof e!="function")throw new Error;return this.each(Fst(this._id,e))}function Bst(e){typeof e!="function"&&(e=awe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Wm(r,this._parents,this._name,this._id)}function Ust(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Wm(o,this._parents,this._name,this._id)}function zst(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Vst(e,t,n){var r,i,s=zst(t)?UG:_p;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Hst(e,t){var n=this._id;return arguments.length<2?Nd(this.node(),n).on.on(e):this.each(Vst(n,e,t))}function qst(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Wst(){return this.on("end.remove",qst(this._id))}function Gst(e){var t=this._name,n=this._id;typeof e!="function"&&(e=NG(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,jL(l[d],t,n,d,l,Nd(c,n)));return new Wm(s,this._parents,t,n)}function Yst(e){var t=this._name,n=this._id;typeof e!="function"&&(e=owe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Nd(c,n),g=0,y=d.length;g<y;++g)(h=d[g])&&jL(h,t,n,g,d,p);s.push(d),o.push(c)}return new Wm(s,o,t,n)}var Kst=OI.prototype.constructor;function Xst(){return new Kst(this._groups,this._parents)}function Qst(e,t){var n,r,i;return function(){var s=jE(this,e),o=(this.style.removeProperty(e),jE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Ywe(e){return function(){this.style.removeProperty(e)}}function Jst(e,t,n){var r,i=n+"",s;return function(){var o=jE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Zst(e,t,n){var r,i,s;return function(){var o=jE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),jE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function eot(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=_p(this,e),l=u.on,c=u.value[s]==null?a||(a=Ywe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function tot(e,t,n){var r=(e+="")=="transform"?jwe:Gwe;return t==null?this.styleTween(e,Qst(e,r)).on("end.style."+e,Ywe(e)):typeof t=="function"?this.styleTween(e,Zst(e,r,zG(this,"style."+e,t))).each(eot(this._id,e)):this.styleTween(e,Jst(e,r,t),n).on("end.style."+e,null)}function not(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function rot(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&not(e,o,n)),r}return s._value=t,s}function iot(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,rot(e,t,n??""))}function sot(e){return function(){this.textContent=e}}function oot(e){return function(){var t=e(this);this.textContent=t??""}}function aot(e){return this.tween("text",typeof e=="function"?oot(zG(this,"text",e)):sot(e==null?"":e+""))}function uot(e){return function(t){this.textContent=e.call(this,t)}}function lot(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&uot(i)),t}return r._value=e,r}function cot(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,lot(e))}function fot(){for(var e=this._name,t=this._id,n=Kwe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Nd(u,t);jL(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Wm(r,this._parents,e,n)}function dot(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=_p(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var hot=0;function Wm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Kwe(){return++hot}var Wp=OI.prototype;Wm.prototype={constructor:Wm,select:Gst,selectAll:Yst,selectChild:Wp.selectChild,selectChildren:Wp.selectChildren,filter:Bst,merge:Ust,selection:Xst,transition:fot,call:Wp.call,nodes:Wp.nodes,node:Wp.node,size:Wp.size,empty:Wp.empty,each:Wp.each,on:Hst,attr:Sst,attrTween:kst,style:tot,styleTween:iot,text:aot,textTween:cot,remove:Wst,tween:yst,delay:Pst,duration:Mst,ease:Lst,easeVarying:jst,end:dot,[Symbol.iterator]:Wp[Symbol.iterator]};const pot=e=>+e;function mot(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var got={time:null,delay:0,duration:250,ease:mot};function yot(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function vot(e){var t,n;e instanceof Wm?(t=e._id,e=e._name):(t=Kwe(),(n=got).time=FL(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&jL(u,e,t,l,o,n||yot(u,t));return new Wm(r,this._parents,e,t)}OI.prototype.interrupt=pst;OI.prototype.transition=vot;const N8=e=>()=>e;function bot(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function _ot(e){e.stopImmediatePropagation()}function P8(e){e.preventDefault(),e.stopImmediatePropagation()}var Lae={name:"drag"},D8={name:"space"},nw={name:"handle"},rw={name:"center"};const{abs:Fae,max:Sa,min:Ta}=Math;function jae(e){return[+e[0],+e[1]]}function C7(e){return[jae(e[0]),jae(e[1])]}var ED={name:"x",handles:["w","e"].map(fA),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},xD={name:"y",handles:["n","s"].map(fA),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},wot={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(fA),input:function(e){return e==null?null:C7(e)},output:function(e){return e}},Gp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bae={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Uae={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Eot={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},xot={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function fA(e){return{type:e}}function Sot(e){return!e.ctrlKey&&!e.button}function Tot(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Cot(){return navigator.maxTouchPoints||"ontouchstart"in this}function O8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Aot(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Xwe(){return VG(ED)}function Qwe(){return VG(xD)}function Jwe(){return VG(wot)}function VG(e){var t=Tot,n=Sot,r=Cot,i=!0,s=PL("start","brush","end"),o=6,a;function u(y){var b=y.property("__brush",g).selectAll(".overlay").data([fA("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Gp.overlay).merge(b).each(function(){var E=O8(this).extent;Br(this).attr("x",E[0][0]).attr("y",E[0][1]).attr("width",E[1][0]-E[0][0]).attr("height",E[1][1]-E[0][1])}),y.selectAll(".selection").data([fA("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Gp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var _=y.selectAll(".handle").data(e.handles,function(E){return E.type});_.exit().remove(),_.enter().append("rect").attr("class",function(E){return"handle handle--"+E.type}).attr("cursor",function(E){return Gp[E.type]}),y.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(y,b,_){y.tween?y.on("start.brush",function(E){c(this,arguments).beforestart().start(E)}).on("interrupt.brush end.brush",function(E){c(this,arguments).end(E)}).tween("brush",function(){var E=this,C=E.__brush,x=c(E,arguments),T=C.selection,A=e.input(typeof b=="function"?b.apply(this,arguments):b,C.extent),k=bg(T,A);function N(P){C.selection=P===1&&A===null?null:k(P),l.call(E),x.brush()}return T!==null&&A!==null?N:N(1)}):y.each(function(){var E=this,C=arguments,x=E.__brush,T=e.input(typeof b=="function"?b.apply(E,C):b,x.extent),A=c(E,C).beforestart();T7(E),x.selection=T===null?null:T,l.call(E),A.start(_).brush(_).end(_)})},u.clear=function(y,b){u.move(y,null,b)};function l(){var y=Br(this),b=O8(this).selection;b?(y.selectAll(".selection").style("display",null).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1]),y.selectAll(".handle").style("display",null).attr("x",function(_){return _.type[_.type.length-1]==="e"?b[1][0]-o/2:b[0][0]-o/2}).attr("y",function(_){return _.type[0]==="s"?b[1][1]-o/2:b[0][1]-o/2}).attr("width",function(_){return _.type==="n"||_.type==="s"?b[1][0]-b[0][0]+o:o}).attr("height",function(_){return _.type==="e"||_.type==="w"?b[1][1]-b[0][1]+o:o})):y.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(y,b,_){var E=y.__brush.emitter;return E&&(!_||!E.clean)?E:new f(y,b,_)}function f(y,b,_){this.that=y,this.args=b,this.state=y.__brush,this.active=0,this.clean=_}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(y,b){return this.starting?(this.starting=!1,this.emit("start",y,b)):this.emit("brush",y),this},brush:function(y,b){return this.emit("brush",y,b),this},end:function(y,b){return--this.active===0&&(delete this.state.emitter,this.emit("end",y,b)),this},emit:function(y,b,_){var E=Br(this.that).datum();s.call(y,this.that,new bot(y,{sourceEvent:b,target:u,selection:e.output(this.state.selection),mode:_,dispatch:s}),E)}};function d(y){if(a&&!y.touches||!n.apply(this,arguments))return;var b=this,_=y.target.__data__.type,E=(i&&y.metaKey?_="overlay":_)==="selection"?Lae:i&&y.altKey?rw:nw,C=e===xD?null:Eot[_],x=e===ED?null:xot[_],T=O8(b),A=T.extent,k=T.selection,N=A[0][0],P,D,j=A[0][1],M,B,V=A[1][0],z,G,Y=A[1][1],Q,L,U=0,K=0,q,X=C&&x&&i&&y.shiftKey,Z,ae,he=Array.from(y.touches||[y],ke=>{const Ue=ke.identifier;return ke=VO(ke,b),ke.point0=ke.slice(),ke.identifier=Ue,ke});T7(b);var ge=c(b,arguments,!0).beforestart();if(_==="overlay"){k&&(q=!0);const ke=[he[0],he[1]||he[0]];T.selection=k=[[P=e===xD?N:Ta(ke[0][0],ke[1][0]),M=e===ED?j:Ta(ke[0][1],ke[1][1])],[z=e===xD?V:Sa(ke[0][0],ke[1][0]),Q=e===ED?Y:Sa(ke[0][1],ke[1][1])]],he.length>1&&xe(y)}else P=k[0][0],M=k[0][1],z=k[1][0],Q=k[1][1];D=P,B=M,G=z,L=Q;var be=Br(b).attr("pointer-events","none"),Ce=be.selectAll(".overlay").attr("cursor",Gp[_]);if(y.touches)ge.moved=re,ge.ended=Re;else{var oe=Br(y.view).on("mousemove.brush",re,!0).on("mouseup.brush",Re,!0);i&&oe.on("keydown.brush",Ke,!0).on("keyup.brush",Qe,!0),wit(y.view)}l.call(b),ge.start(y,E.name);function re(ke){for(const Ue of ke.changedTouches||[ke])for(const rt of he)rt.identifier===Ue.identifier&&(rt.cur=VO(Ue,b));if(X&&!Z&&!ae&&he.length===1){const Ue=he[0];Fae(Ue.cur[0]-Ue[0])>Fae(Ue.cur[1]-Ue[1])?ae=!0:Z=!0}for(const Ue of he)Ue.cur&&(Ue[0]=Ue.cur[0],Ue[1]=Ue.cur[1]);q=!0,P8(ke),xe(ke)}function xe(ke){const Ue=he[0],rt=Ue.point0;var ft;switch(U=Ue[0]-rt[0],K=Ue[1]-rt[1],E){case D8:case Lae:{C&&(U=Sa(N-P,Ta(V-z,U)),D=P+U,G=z+U),x&&(K=Sa(j-M,Ta(Y-Q,K)),B=M+K,L=Q+K);break}case nw:{he[1]?(C&&(D=Sa(N,Ta(V,he[0][0])),G=Sa(N,Ta(V,he[1][0])),C=1),x&&(B=Sa(j,Ta(Y,he[0][1])),L=Sa(j,Ta(Y,he[1][1])),x=1)):(C<0?(U=Sa(N-P,Ta(V-P,U)),D=P+U,G=z):C>0&&(U=Sa(N-z,Ta(V-z,U)),D=P,G=z+U),x<0?(K=Sa(j-M,Ta(Y-M,K)),B=M+K,L=Q):x>0&&(K=Sa(j-Q,Ta(Y-Q,K)),B=M,L=Q+K));break}case rw:{C&&(D=Sa(N,Ta(V,P-U*C)),G=Sa(N,Ta(V,z+U*C))),x&&(B=Sa(j,Ta(Y,M-K*x)),L=Sa(j,Ta(Y,Q+K*x)));break}}G<D&&(C*=-1,ft=P,P=z,z=ft,ft=D,D=G,G=ft,_ in Bae&&Ce.attr("cursor",Gp[_=Bae[_]])),L<B&&(x*=-1,ft=M,M=Q,Q=ft,ft=B,B=L,L=ft,_ in Uae&&Ce.attr("cursor",Gp[_=Uae[_]])),T.selection&&(k=T.selection),Z&&(D=k[0][0],G=k[1][0]),ae&&(B=k[0][1],L=k[1][1]),(k[0][0]!==D||k[0][1]!==B||k[1][0]!==G||k[1][1]!==L)&&(T.selection=[[D,B],[G,L]],l.call(b),ge.brush(ke,E.name))}function Re(ke){if(_ot(ke),ke.touches){if(ke.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Eit(ke.view,q),oe.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);be.attr("pointer-events","all"),Ce.attr("cursor",Gp.overlay),T.selection&&(k=T.selection),Aot(k)&&(T.selection=null,l.call(b)),ge.end(ke,E.name)}function Ke(ke){switch(ke.keyCode){case 16:{X=C&&x;break}case 18:{E===nw&&(C&&(z=G-U*C,P=D+U*C),x&&(Q=L-K*x,M=B+K*x),E=rw,xe(ke));break}case 32:{(E===nw||E===rw)&&(C<0?z=G-U:C>0&&(P=D-U),x<0?Q=L-K:x>0&&(M=B-K),E=D8,Ce.attr("cursor",Gp.selection),xe(ke));break}default:return}P8(ke)}function Qe(ke){switch(ke.keyCode){case 16:{X&&(Z=ae=X=!1,xe(ke));break}case 18:{E===rw&&(C<0?z=G:C>0&&(P=D),x<0?Q=L:x>0&&(M=B),E=nw,xe(ke));break}case 32:{E===D8&&(ke.altKey?(C&&(z=G-U*C,P=D+U*C),x&&(Q=L-K*x,M=B+K*x),E=rw):(C<0?z=G:C>0&&(P=D),x<0?Q=L:x>0&&(M=B),E=nw),Ce.attr("cursor",Gp[_]),xe(ke));break}default:return}P8(ke)}}function h(y){c(this,arguments).moved(y)}function p(y){c(this,arguments).ended(y)}function g(){var y=this.__brush||{selection:null};return y.extent=C7(t.apply(this,arguments)),y.dim=e,y}return u.extent=function(y){return arguments.length?(t=typeof y=="function"?y:N8(C7(y)),u):t},u.filter=function(y){return arguments.length?(n=typeof y=="function"?y:N8(!!y),u):n},u.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:N8(!!y),u):r},u.handleSize=function(y){return arguments.length?(o=+y,u):o},u.keyModifiers=function(y){return arguments.length?(i=!!y,u):i},u.on=function(){var y=s.on.apply(s,arguments);return y===s?u:y},u}const A7=Math.PI,I7=2*A7,Qv=1e-6,Iot=I7-Qv;function Zwe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function kot(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Zwe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let HG=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Zwe:kot(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Qv)if(!(Math.abs(f*u-l*c)>Qv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,g=u*u+l*l,y=h*h+p*p,b=Math.sqrt(g),_=Math.sqrt(d),E=s*Math.tan((A7-Math.acos((g+d-y)/(2*b*_)))/2),C=E/_,x=E/b;Math.abs(C-1)>Qv&&this._append`L${t+C*c},${n+C*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+x*u},${this._y1=n+x*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Qv||Math.abs(this._y1-c)>Qv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%I7+I7),d>Iot?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Qv&&this._append`A${r},${r},0,${+(d>=A7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function BL(){return new HG}BL.prototype=HG.prototype;const Pm=11102230246251565e-32,Ca=134217729,Rot=(3+8*Pm)*Pm;function M8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Not(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function LI(e){return new Float64Array(e)}const Pot=(3+16*Pm)*Pm,Dot=(2+12*Pm)*Pm,Oot=(9+64*Pm)*Pm*Pm,iw=LI(4),zae=LI(8),Vae=LI(12),Hae=LI(16),iu=LI(4);function Mot(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,g,y,b,_,E,C,x,T,A,k;const N=e-i,P=n-i,D=t-s,j=r-s;C=N*j,d=Ca*N,h=d-(d-N),p=N-h,d=Ca*j,g=d-(d-j),y=j-g,x=p*y-(C-h*g-p*g-h*y),T=D*P,d=Ca*D,h=d-(d-D),p=D-h,d=Ca*P,g=d-(d-P),y=P-g,A=p*y-(T-h*g-p*g-h*y),b=x-A,f=x-b,iw[0]=x-(b+f)+(f-A),_=C+b,f=_-C,E=C-(_-f)+(b-f),b=E-T,f=E-b,iw[1]=E-(b+f)+(f-T),k=_+b,f=k-_,iw[2]=_-(k-f)+(b-f),iw[3]=k;let M=Not(4,iw),B=Dot*o;if(M>=B||-M>=B||(f=e-N,a=e-(N+f)+(f-i),f=n-P,l=n-(P+f)+(f-i),f=t-D,u=t-(D+f)+(f-s),f=r-j,c=r-(j+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(B=Oot*o+Rot*Math.abs(M),M+=N*c+j*a-(D*l+P*u),M>=B||-M>=B))return M;C=a*j,d=Ca*a,h=d-(d-a),p=a-h,d=Ca*j,g=d-(d-j),y=j-g,x=p*y-(C-h*g-p*g-h*y),T=u*P,d=Ca*u,h=d-(d-u),p=u-h,d=Ca*P,g=d-(d-P),y=P-g,A=p*y-(T-h*g-p*g-h*y),b=x-A,f=x-b,iu[0]=x-(b+f)+(f-A),_=C+b,f=_-C,E=C-(_-f)+(b-f),b=E-T,f=E-b,iu[1]=E-(b+f)+(f-T),k=_+b,f=k-_,iu[2]=_-(k-f)+(b-f),iu[3]=k;const V=M8(4,iw,4,iu,zae);C=N*c,d=Ca*N,h=d-(d-N),p=N-h,d=Ca*c,g=d-(d-c),y=c-g,x=p*y-(C-h*g-p*g-h*y),T=D*l,d=Ca*D,h=d-(d-D),p=D-h,d=Ca*l,g=d-(d-l),y=l-g,A=p*y-(T-h*g-p*g-h*y),b=x-A,f=x-b,iu[0]=x-(b+f)+(f-A),_=C+b,f=_-C,E=C-(_-f)+(b-f),b=E-T,f=E-b,iu[1]=E-(b+f)+(f-T),k=_+b,f=k-_,iu[2]=_-(k-f)+(b-f),iu[3]=k;const z=M8(V,zae,4,iu,Vae);C=a*c,d=Ca*a,h=d-(d-a),p=a-h,d=Ca*c,g=d-(d-c),y=c-g,x=p*y-(C-h*g-p*g-h*y),T=u*l,d=Ca*u,h=d-(d-u),p=u-h,d=Ca*l,g=d-(d-l),y=l-g,A=p*y-(T-h*g-p*g-h*y),b=x-A,f=x-b,iu[0]=x-(b+f)+(f-A),_=C+b,f=_-C,E=C-(_-f)+(b-f),b=E-T,f=E-b,iu[1]=E-(b+f)+(f-T),k=_+b,f=k-_,iu[2]=_-(k-f)+(b-f),iu[3]=k;const G=M8(z,Vae,4,iu,Hae);return Hae[G-1]}function EN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=Pot*l?u:-Mot(e,t,n,r,i,s,l)}const qae=Math.pow(2,-52),xN=new Uint32Array(512);class QO{static from(t,n=Bot,r=Uot){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new QO(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let N=0;N<o;N++){const P=t[2*N],D=t[2*N+1];P<a&&(a=P),D<u&&(u=D),P>l&&(l=P),D>c&&(c=D),this._ids[N]=N}const f=(a+l)/2,d=(u+c)/2;let h,p,g;for(let N=0,P=1/0;N<o;N++){const D=$8(f,d,t[2*N],t[2*N+1]);D<P&&(h=N,P=D)}const y=t[2*h],b=t[2*h+1];for(let N=0,P=1/0;N<o;N++){if(N===h)continue;const D=$8(y,b,t[2*N],t[2*N+1]);D<P&&D>0&&(p=N,P=D)}let _=t[2*p],E=t[2*p+1],C=1/0;for(let N=0;N<o;N++){if(N===h||N===p)continue;const P=Fot(y,b,_,E,t[2*N],t[2*N+1]);P<C&&(g=N,C=P)}let x=t[2*g],T=t[2*g+1];if(C===1/0){for(let D=0;D<o;D++)this._dists[D]=t[2*D]-t[0]||t[2*D+1]-t[1];Fw(this._ids,this._dists,0,o-1);const N=new Uint32Array(o);let P=0;for(let D=0,j=-1/0;D<o;D++){const M=this._ids[D],B=this._dists[M];B>j&&(N[P++]=M,j=B)}this.hull=N.subarray(0,P),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(EN(y,b,_,E,x,T)<0){const N=p,P=_,D=E;p=g,_=x,E=T,g=N,x=P,T=D}const A=jot(y,b,_,E,x,T);this._cx=A.x,this._cy=A.y;for(let N=0;N<o;N++)this._dists[N]=$8(t[2*N],t[2*N+1],A.x,A.y);Fw(this._ids,this._dists,0,o-1),this._hullStart=h;let k=3;r[h]=n[g]=p,r[p]=n[h]=g,r[g]=n[p]=h,i[h]=0,i[p]=1,i[g]=2,s.fill(-1),s[this._hashKey(y,b)]=h,s[this._hashKey(_,E)]=p,s[this._hashKey(x,T)]=g,this.trianglesLen=0,this._addTriangle(h,p,g,-1,-1,-1);for(let N=0,P,D;N<this._ids.length;N++){const j=this._ids[N],M=t[2*j],B=t[2*j+1];if(N>0&&Math.abs(M-P)<=qae&&Math.abs(B-D)<=qae||(P=M,D=B,j===h||j===p||j===g))continue;let V=0;for(let L=0,U=this._hashKey(M,B);L<this._hashSize&&(V=s[(U+L)%this._hashSize],!(V!==-1&&V!==r[V]));L++);V=n[V];let z=V,G;for(;G=r[z],EN(M,B,t[2*z],t[2*z+1],t[2*G],t[2*G+1])>=0;)if(z=G,z===V){z=-1;break}if(z===-1)continue;let Y=this._addTriangle(z,j,r[z],-1,-1,i[z]);i[j]=this._legalize(Y+2),i[z]=Y,k++;let Q=r[z];for(;G=r[Q],EN(M,B,t[2*Q],t[2*Q+1],t[2*G],t[2*G+1])<0;)Y=this._addTriangle(Q,j,G,i[j],-1,i[Q]),i[j]=this._legalize(Y+2),r[Q]=Q,k--,Q=G;if(z===V)for(;G=n[z],EN(M,B,t[2*G],t[2*G+1],t[2*z],t[2*z+1])<0;)Y=this._addTriangle(G,j,z,-1,i[z],i[G]),this._legalize(Y+2),i[G]=Y,r[z]=z,k--,z=G;this._hullStart=n[j]=z,r[z]=n[Q]=j,r[j]=Q,s[this._hashKey(M,B)]=j,s[this._hashKey(t[2*z],t[2*z+1])]=z}this.hull=new Uint32Array(k);for(let N=0,P=this._hullStart;N<k;N++)this.hull[N]=P,P=r[P];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor($ot(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=xN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],g=n[f];if(Lot(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*g],i[2*g+1])){n[t]=g,n[a]=d;const b=r[f];if(b===-1){let E=this._hullStart;do{if(this._hullTri[E]===f){this._hullTri[E]=t;break}E=this._hullPrev[E]}while(E!==this._hullStart)}this._link(t,b),this._link(a,r[o]),this._link(o,f);const _=l+(a+1)%3;s<xN.length&&(xN[s++]=_)}else{if(s===0)break;t=xN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function $ot(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function $8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Lot(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,g=c*c+f*f,y=d*d+h*h;return u*(f*y-g*h)-l*(c*y-g*d)+p*(c*h-f*d)<0}function Fot(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function jot(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Fw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;$T(e,i,s),t[e[n]]>t[e[r]]&&$T(e,n,r),t[e[s]]>t[e[r]]&&$T(e,s,r),t[e[n]]>t[e[s]]&&$T(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;$T(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Fw(e,t,s,r),Fw(e,t,n,o-1)):(Fw(e,t,n,o-1),Fw(e,t,s,r))}}function $T(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Bot(e){return e[0]}function Uot(e){return e[1]}const Wae=1e-6;class x1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Wae||Math.abs(this._y1-s)>Wae)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class k7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let zot=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let g=0,y=0,b=r.length,_,E;g<b;g+=3,y+=2){const C=r[g]*2,x=r[g+1]*2,T=r[g+2]*2,A=t[C],k=t[C+1],N=t[x],P=t[x+1],D=t[T],j=t[T+1],M=N-A,B=P-k,V=D-A,z=j-k,G=(M*z-B*V)*2;if(Math.abs(G)<1e-9){if(s===void 0){s=o=0;for(const Q of n)s+=t[Q*2],o+=t[Q*2+1];s/=n.length,o/=n.length}const Y=1e9*Math.sign((s-A)*z-(o-k)*V);_=(A+D)/2-Y*z,E=(k+j)/2+Y*V}else{const Y=1/G,Q=M*M+B*B,L=V*V+z*z;_=A+(z*Q-B*L)*Y,E=k+(M*L-V*Q)*Y}a[y]=_,a[y+1]=E}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let g=0;g<n.length;++g)u=n[g],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new x1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,g=o[h],y=o[h+1],b=o[p],_=o[p+1];this._renderSegment(g,y,b,_,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,g=this._project(d,h,a[p+2],a[p+3]);g&&this._renderSegment(d,h,g[0],g[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new x1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new x1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new k7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,g,y,b,_;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[g,y,b,_]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[b,_,g,y]=p,f=d,d=this._edgecode(g,y),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(g,y):i=[g,y]}f=d,d=this._edgecode(b,_),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(b,_):i=[b,_]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Vot=2*Math.PI,sw=Math.pow;function Hot(e){return e[0]}function qot(e){return e[1]}function Wot(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Got(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class qG{static from(t,n=Hot,r=qot,i){return new qG("length"in t?Yot(t,n,r,i):Float64Array.from(Kot(t,n,r,i)))}constructor(t){this._delaunator=new QO(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Wot(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Got(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new QO(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new zot(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=sw(n-l[t*2],2)+sw(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const g=sw(n-l[p*2],2)+sw(r-l[p*2+1],2);if(g<f&&(f=g,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&sw(n-l[h*2],2)+sw(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new x1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new x1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Vot)}return r&&r.value()}renderHull(t){const n=t==null?t=new x1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new k7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new x1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new k7;return this.renderTriangle(t,n),n.value()}}function Yot(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Kot(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Gae={},L8={},F8=34,LT=10,j8=13;function eEe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Xot(e,t){var n=eEe(e);return function(r,i){return t(n(r),i,e)}}function Yae(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Xu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Qot(e){return e<0?"-"+Xu(-e,6):e>9999?"+"+Xu(e,6):Xu(e,4)}function Jot(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Qot(e.getUTCFullYear())+"-"+Xu(e.getUTCMonth()+1,2)+"-"+Xu(e.getUTCDate(),2)+(i?"T"+Xu(t,2)+":"+Xu(n,2)+":"+Xu(r,2)+"."+Xu(i,3)+"Z":r?"T"+Xu(t,2)+":"+Xu(n,2)+":"+Xu(r,2)+"Z":n||t?"T"+Xu(t,2)+":"+Xu(n,2)+"Z":"")}function tEe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,g=i(f,function(y,b){if(h)return h(y,b-1);p=y,h=d?Xot(y,d):eEe(y)});return g.columns=p||[],g}function i(f,d){var h=[],p=f.length,g=0,y=0,b,_=p<=0,E=!1;f.charCodeAt(p-1)===LT&&--p,f.charCodeAt(p-1)===j8&&--p;function C(){if(_)return L8;if(E)return E=!1,Gae;var T,A=g,k;if(f.charCodeAt(A)===F8){for(;g++<p&&f.charCodeAt(g)!==F8||f.charCodeAt(++g)===F8;);return(T=g)>=p?_=!0:(k=f.charCodeAt(g++))===LT?E=!0:k===j8&&(E=!0,f.charCodeAt(g)===LT&&++g),f.slice(A+1,T-1).replace(/""/g,'"')}for(;g<p;){if((k=f.charCodeAt(T=g++))===LT)E=!0;else if(k===j8)E=!0,f.charCodeAt(g)===LT&&++g;else if(k!==n)continue;return f.slice(A,T)}return _=!0,f.slice(A,p)}for(;(b=C())!==L8;){for(var x=[];b!==Gae&&b!==L8;)x.push(b),b=C();d&&(x=d(x,y++))==null||h.push(x)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Yae(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Yae(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Jot(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Zot=tEe(","),eat=Zot.parse;function tat(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function nat(e,t){return fetch(e,t).then(tat)}function rat(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),nat(t,n).then(function(i){return e(i,r)})}}var nEe=rat(eat);function iat(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function sat(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return rEe(this.cover(t,n),t,n,e)}function rEe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,g,y,b,_;if(!s)return e._root=o,e;for(;s.length;)if((g=t>=(f=(a+l)/2))?a=f:l=f,(y=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[b=y<<1|g]))return i[b]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[b]=o:e._root=o,e;do i=i?i[b]=new Array(4):e._root=new Array(4),(g=t>=(f=(a+l)/2))?a=f:l=f,(y=n>=(d=(u+c)/2))?u=d:c=d;while((b=y<<1|g)===(_=(p>=d)<<1|h>=f));return i[_]=s,i[b]=o,e}function oat(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)rEe(this,o[n],a[n],e[n]);return this}function aat(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function uat(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function lat(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function pu(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function cat(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,g;for(h&&d.push(new pu(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var y=(o+u)/2,b=(a+l)/2;d.push(new pu(h[3],y,b,u,l),new pu(h[2],o,b,y,l),new pu(h[1],y,a,u,b),new pu(h[0],o,a,y,b)),(g=(t>=b)<<1|e>=y)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var _=e-+this._x.call(null,h.data),E=t-+this._y.call(null,h.data),C=_*_+E*E;if(C<n){var x=Math.sqrt(n=C);i=e-x,s=t-x,c=e+x,f=t+x,r=h.data}}return r}function fat(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,g,y,b;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(g=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[y=g<<1|p]))return this;if(!n.length)break;(t[y+1&3]||t[y+2&3]||t[y+3&3])&&(r=t,b=y)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[y]=s:delete t[y],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[b]=n:this._root=n),this):(this._root=s,this)}function dat(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function hat(){return this._root}function pat(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function mat(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new pu(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new pu(i,l,c,a,u)),(i=r[2])&&t.push(new pu(i,s,c,l,u)),(i=r[1])&&t.push(new pu(i,l,o,a,c)),(i=r[0])&&t.push(new pu(i,s,o,l,c))}return this}function gat(e){var t=[],n=[],r;for(this._root&&t.push(new pu(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new pu(s,o,a,c,f)),(s=i[1])&&t.push(new pu(s,c,a,u,f)),(s=i[2])&&t.push(new pu(s,o,f,c,l)),(s=i[3])&&t.push(new pu(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function yat(e){return e[0]}function vat(e){return arguments.length?(this._x=e,this):this._x}function bat(e){return e[1]}function _at(e){return arguments.length?(this._y=e,this):this._y}function WG(e,t,n){var r=new GG(t??yat,n??bat,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function GG(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Kae(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Nu=WG.prototype=GG.prototype;Nu.copy=function(){var e=new GG(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Kae(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Kae(r));return e};Nu.add=sat;Nu.addAll=oat;Nu.cover=aat;Nu.data=uat;Nu.extent=lat;Nu.find=cat;Nu.remove=fat;Nu.removeAll=dat;Nu.root=hat;Nu.size=pat;Nu.visit=mat;Nu.visitAfter=gat;Nu.x=vat;Nu.y=_at;function vu(e){return function(){return e}}function C0(e){return(e()-.5)*1e-6}function wat(e){return e.x+e.vx}function Eat(e){return e.y+e.vy}function xat(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=vu(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,g,y,b=0;b<s;++b)for(f=WG(t,wat,Eat).visitAfter(a),l=0;l<c;++l)d=t[l],g=n[d.index],y=g*g,h=d.x+d.vx,p=d.y+d.vy,f.visit(_);function _(E,C,x,T,A){var k=E.data,N=E.r,P=g+N;if(k){if(k.index>d.index){var D=h-k.x-k.vx,j=p-k.y-k.vy,M=D*D+j*j;M<P*P&&(D===0&&(D=C0(r),M+=D*D),j===0&&(j=C0(r),M+=j*j),M=(P-(M=Math.sqrt(M)))/M*i,d.vx+=(D*=M)*(P=(N*=N)/(y+N)),d.vy+=(j*=M)*P,k.vx-=D*(P=1-P),k.vy-=j*P)}return}return C>h+P||T<h-P||x>p+P||A<p-P}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:vu(+l),u(),o):e},o}function Sat(e){return e.index}function Xae(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Tat(e){var t=Sat,n=f,r,i=vu(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(y){return 1/Math.min(a[y.source.index],a[y.target.index])}function d(y){for(var b=0,_=e.length;b<c;++b)for(var E=0,C,x,T,A,k,N,P;E<_;++E)C=e[E],x=C.source,T=C.target,A=T.x+T.vx-x.x-x.vx||C0(l),k=T.y+T.vy-x.y-x.vy||C0(l),N=Math.sqrt(A*A+k*k),N=(N-s[E])/N*y*r[E],A*=N,k*=N,T.vx-=A*(P=u[E]),T.vy-=k*P,x.vx+=A*(P=1-P),x.vy+=k*P}function h(){if(o){var y,b=o.length,_=e.length,E=new Map(o.map((x,T)=>[t(x,T,o),x])),C;for(y=0,a=new Array(b);y<_;++y)C=e[y],C.index=y,typeof C.source!="object"&&(C.source=Xae(E,C.source)),typeof C.target!="object"&&(C.target=Xae(E,C.target)),a[C.source.index]=(a[C.source.index]||0)+1,a[C.target.index]=(a[C.target.index]||0)+1;for(y=0,u=new Array(_);y<_;++y)C=e[y],u[y]=a[C.source.index]/(a[C.source.index]+a[C.target.index]);r=new Array(_),p(),s=new Array(_),g()}}function p(){if(o)for(var y=0,b=e.length;y<b;++y)r[y]=+n(e[y],y,e)}function g(){if(o)for(var y=0,b=e.length;y<b;++y)s[y]=+i(e[y],y,e)}return d.initialize=function(y,b){o=y,l=b,h()},d.links=function(y){return arguments.length?(e=y,h(),d):e},d.id=function(y){return arguments.length?(t=y,d):t},d.iterations=function(y){return arguments.length?(c=+y,d):c},d.strength=function(y){return arguments.length?(n=typeof y=="function"?y:vu(+y),p(),d):n},d.distance=function(y){return arguments.length?(i=typeof y=="function"?y:vu(+y),g(),d):i},d}const Cat=1664525,Aat=1013904223,Qae=4294967296;function Iat(){let e=1;return()=>(e=(Cat*e+Aat)%Qae)/Qae}function kat(e){return e.x}function Rat(e){return e.y}var Nat=10,Pat=Math.PI*(3-Math.sqrt(5));function Dat(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=BG(f),l=PL("tick","end"),c=Iat();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(g){var y,b=e.length,_;g===void 0&&(g=1);for(var E=0;E<g;++E)for(n+=(s-n)*i,a.forEach(function(C){C(n)}),y=0;y<b;++y)_=e[y],_.fx==null?_.x+=_.vx*=o:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=o:(_.y=_.fy,_.vy=0);return t}function h(){for(var g=0,y=e.length,b;g<y;++g){if(b=e[g],b.index=g,b.fx!=null&&(b.x=b.fx),b.fy!=null&&(b.y=b.fy),isNaN(b.x)||isNaN(b.y)){var _=Nat*Math.sqrt(.5+g),E=g*Pat;b.x=_*Math.cos(E),b.y=_*Math.sin(E)}(isNaN(b.vx)||isNaN(b.vy))&&(b.vx=b.vy=0)}}function p(g){return g.initialize&&g.initialize(e,c),g}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(g){return arguments.length?(e=g,h(),a.forEach(p),t):e},alpha:function(g){return arguments.length?(n=+g,t):n},alphaMin:function(g){return arguments.length?(r=+g,t):r},alphaDecay:function(g){return arguments.length?(i=+g,t):+i},alphaTarget:function(g){return arguments.length?(s=+g,t):s},velocityDecay:function(g){return arguments.length?(o=1-g,t):1-o},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),t):c},force:function(g,y){return arguments.length>1?(y==null?a.delete(g):a.set(g,p(y)),t):a.get(g)},find:function(g,y,b){var _=0,E=e.length,C,x,T,A,k;for(b==null?b=1/0:b*=b,_=0;_<E;++_)A=e[_],C=g-A.x,x=y-A.y,T=C*C+x*x,T<b&&(k=A,b=T);return k},on:function(g,y){return arguments.length>1?(l.on(g,y),t):l.on(g)}}}function Oat(){var e,t,n,r,i=vu(-30),s,o=1,a=1/0,u=.81;function l(h){var p,g=e.length,y=WG(e,kat,Rat).visitAfter(f);for(r=h,p=0;p<g;++p)t=e[p],y.visit(d)}function c(){if(e){var h,p=e.length,g;for(s=new Array(p),h=0;h<p;++h)g=e[h],s[g.index]=+i(g,h,e)}}function f(h){var p=0,g,y,b=0,_,E,C;if(h.length){for(_=E=C=0;C<4;++C)(g=h[C])&&(y=Math.abs(g.value))&&(p+=g.value,b+=y,_+=y*g.x,E+=y*g.y);h.x=_/b,h.y=E/b}else{g=h,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}h.value=p}function d(h,p,g,y){if(!h.value)return!0;var b=h.x-t.x,_=h.y-t.y,E=y-p,C=b*b+_*_;if(E*E/u<C)return C<a&&(b===0&&(b=C0(n),C+=b*b),_===0&&(_=C0(n),C+=_*_),C<o&&(C=Math.sqrt(o*C)),t.vx+=b*h.value*r/C,t.vy+=_*h.value*r/C),!0;if(h.length||C>=a)return;(h.data!==t||h.next)&&(b===0&&(b=C0(n),C+=b*b),_===0&&(_=C0(n),C+=_*_),C<o&&(C=Math.sqrt(o*C)));do h.data!==t&&(E=s[h.data.index]*r/C,t.vx+=b*E,t.vy+=_*E);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:vu(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Mat(e){var t=vu(.1),n,r,i;typeof e!="function"&&(e=vu(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:vu(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:vu(+a),o(),s):e},s}function $at(e){var t=vu(.1),n,r,i;typeof e!="function"&&(e=vu(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:vu(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:vu(+a),o(),s):e},s}function Lat(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function JO(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function zE(e){return e=JO(Math.abs(e)),e?e[1]:NaN}function Fat(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function jat(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Bat=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nb(e){if(!(t=Bat.exec(e)))throw new Error("invalid format: "+e);var t;return new YG({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}nb.prototype=YG.prototype;function YG(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}YG.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Uat(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var iEe;function zat(e,t){var n=JO(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(iEe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+JO(e,Math.max(0,t+s-1))[0]}function Jae(e,t){var n=JO(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Zae={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Lat,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Jae(e*100,t),r:Jae,s:zat,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function eue(e){return e}var tue=Array.prototype.map,nue=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function sEe(e){var t=e.grouping===void 0||e.thousands===void 0?eue:Fat(tue.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?eue:jat(tue.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=nb(f);var d=f.fill,h=f.align,p=f.sign,g=f.symbol,y=f.zero,b=f.width,_=f.comma,E=f.precision,C=f.trim,x=f.type;x==="n"?(_=!0,x="g"):Zae[x]||(E===void 0&&(E=12),C=!0,x="g"),(y||d==="0"&&h==="=")&&(y=!0,d="0",h="=");var T=g==="$"?n:g==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",A=g==="$"?r:/[%p]/.test(x)?o:"",k=Zae[x],N=/[defgprs%]/.test(x);E=E===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function P(D){var j=T,M=A,B,V,z;if(x==="c")M=k(D)+M,D="";else{D=+D;var G=D<0||1/D<0;if(D=isNaN(D)?u:k(Math.abs(D),E),C&&(D=Uat(D)),G&&+D==0&&p!=="+"&&(G=!1),j=(G?p==="("?p:a:p==="-"||p==="("?"":p)+j,M=(x==="s"?nue[8+iEe/3]:"")+M+(G&&p==="("?")":""),N){for(B=-1,V=D.length;++B<V;)if(z=D.charCodeAt(B),48>z||z>57){M=(z===46?i+D.slice(B+1):D.slice(B))+M,D=D.slice(0,B);break}}}_&&!y&&(D=t(D,1/0));var Y=j.length+D.length+M.length,Q=Y<b?new Array(b-Y+1).join(d):"";switch(_&&y&&(D=t(Q+D,Q.length?b-M.length:1/0),Q=""),h){case"<":D=j+D+M+Q;break;case"=":D=j+Q+D+M;break;case"^":D=Q.slice(0,Y=Q.length>>1)+j+D+M+Q.slice(Y);break;default:D=Q+j+D+M;break}return s(D)}return P.toString=function(){return f+""},P}function c(f,d){var h=l((f=nb(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(zE(d)/3)))*3,g=Math.pow(10,-p),y=nue[8+p/3];return function(b){return h(g*b)+y}}return{format:l,formatPrefix:c}}var SN,Xy,KG;Vat({thousands:",",grouping:[3],currency:["$",""]});function Vat(e){return SN=sEe(e),Xy=SN.format,KG=SN.formatPrefix,SN}function oEe(e){return Math.max(0,-zE(Math.abs(e)))}function aEe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(zE(t)/3)))*3-zE(Math.abs(e)))}function uEe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,zE(t)-zE(e))+1}var un=1e-6,ZO=1e-12,ar=Math.PI,ws=ar/2,e3=ar/4,Tu=ar*2,Rs=180/ar,sr=ar/180,xr=Math.abs,uS=Math.atan,lf=Math.atan2,cn=Math.cos,TN=Math.ceil,lEe=Math.exp,R7=Math.hypot,t3=Math.log,B8=Math.pow,sn=Math.sin,ef=Math.sign||function(e){return e>0?1:e<0?-1:0},Cu=Math.sqrt,XG=Math.tan;function cEe(e){return e>1?0:e<-1?ar:Math.acos(e)}function wl(e){return e>1?ws:e<-1?-ws:Math.asin(e)}function ua(){}function n3(e,t){e&&iue.hasOwnProperty(e.type)&&iue[e.type](e,t)}var rue={Feature:function(e,t){n3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)n3(n[r].geometry,t)}},iue={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){N7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)N7(n[r],t,0)},Polygon:function(e,t){sue(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)sue(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)n3(n[r],t)}};function N7(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function sue(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)N7(e[n],t,1);t.polygonEnd()}function dm(e,t){e&&rue.hasOwnProperty(e.type)?rue[e.type](e,t):n3(e,t)}var r3=new _u,i3=new _u,fEe,dEe,P7,D7,O7,Yh={point:ua,lineStart:ua,lineEnd:ua,polygonStart:function(){r3=new _u,Yh.lineStart=Hat,Yh.lineEnd=qat},polygonEnd:function(){var e=+r3;i3.add(e<0?Tu+e:e),this.lineStart=this.lineEnd=this.point=ua},sphere:function(){i3.add(Tu)}};function Hat(){Yh.point=Wat}function qat(){hEe(fEe,dEe)}function Wat(e,t){Yh.point=hEe,fEe=e,dEe=t,e*=sr,t*=sr,P7=e,D7=cn(t=t/2+e3),O7=sn(t)}function hEe(e,t){e*=sr,t*=sr,t=t/2+e3;var n=e-P7,r=n>=0?1:-1,i=r*n,s=cn(t),o=sn(t),a=O7*o,u=D7*s+a*cn(i),l=a*r*sn(i);r3.add(lf(l,u)),P7=e,D7=s,O7=o}function Gat(e){return i3=new _u,dm(e,Yh),i3*2}function s3(e){return[lf(e[1],e[0]),wl(e[2])]}function rb(e){var t=e[0],n=e[1],r=cn(n);return[r*cn(t),r*sn(t),sn(n)]}function CN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function VE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function U8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function AN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function o3(e){var t=Cu(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var us,rl,ps,Wl,Jv,pEe,mEe,sE,v2,c0,Gm,am={point:M7,lineStart:oue,lineEnd:aue,polygonStart:function(){am.point=yEe,am.lineStart=Yat,am.lineEnd=Kat,v2=new _u,Yh.polygonStart()},polygonEnd:function(){Yh.polygonEnd(),am.point=M7,am.lineStart=oue,am.lineEnd=aue,r3<0?(us=-(ps=180),rl=-(Wl=90)):v2>un?Wl=90:v2<-un&&(rl=-90),Gm[0]=us,Gm[1]=ps},sphere:function(){us=-(ps=180),rl=-(Wl=90)}};function M7(e,t){c0.push(Gm=[us=e,ps=e]),t<rl&&(rl=t),t>Wl&&(Wl=t)}function gEe(e,t){var n=rb([e*sr,t*sr]);if(sE){var r=VE(sE,n),i=[r[1],-r[0],0],s=VE(i,r);o3(s),s=s3(s);var o=e-Jv,a=o>0?1:-1,u=s[0]*Rs*a,l,c=xr(o)>180;c^(a*Jv<u&&u<a*e)?(l=s[1]*Rs,l>Wl&&(Wl=l)):(u=(u+360)%360-180,c^(a*Jv<u&&u<a*e)?(l=-s[1]*Rs,l<rl&&(rl=l)):(t<rl&&(rl=t),t>Wl&&(Wl=t))),c?e<Jv?Hl(us,e)>Hl(us,ps)&&(ps=e):Hl(e,ps)>Hl(us,ps)&&(us=e):ps>=us?(e<us&&(us=e),e>ps&&(ps=e)):e>Jv?Hl(us,e)>Hl(us,ps)&&(ps=e):Hl(e,ps)>Hl(us,ps)&&(us=e)}else c0.push(Gm=[us=e,ps=e]);t<rl&&(rl=t),t>Wl&&(Wl=t),sE=n,Jv=e}function oue(){am.point=gEe}function aue(){Gm[0]=us,Gm[1]=ps,am.point=M7,sE=null}function yEe(e,t){if(sE){var n=e-Jv;v2.add(xr(n)>180?n+(n>0?360:-360):n)}else pEe=e,mEe=t;Yh.point(e,t),gEe(e,t)}function Yat(){Yh.lineStart()}function Kat(){yEe(pEe,mEe),Yh.lineEnd(),xr(v2)>un&&(us=-(ps=180)),Gm[0]=us,Gm[1]=ps,sE=null}function Hl(e,t){return(t-=e)<0?t+360:t}function Xat(e,t){return e[0]-t[0]}function uue(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Qat(e){var t,n,r,i,s,o,a;if(Wl=ps=-(us=rl=1/0),c0=[],dm(e,am),n=c0.length){for(c0.sort(Xat),t=1,r=c0[0],s=[r];t<n;++t)i=c0[t],uue(r,i[0])||uue(r,i[1])?(Hl(r[0],i[1])>Hl(r[0],r[1])&&(r[1]=i[1]),Hl(i[0],r[1])>Hl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Hl(r[1],i[0]))>o&&(o=a,us=i[0],ps=r[1])}return c0=Gm=null,us===1/0||rl===1/0?[[NaN,NaN],[NaN,NaN]]:[[us,rl],[ps,Wl]]}var CC,a3,u3,l3,c3,f3,d3,h3,$7,L7,F7,vEe,bEe,fu,du,hu,od={sphere:ua,point:QG,lineStart:lue,lineEnd:cue,polygonStart:function(){od.lineStart=eut,od.lineEnd=tut},polygonEnd:function(){od.lineStart=lue,od.lineEnd=cue}};function QG(e,t){e*=sr,t*=sr;var n=cn(t);FI(n*cn(e),n*sn(e),sn(t))}function FI(e,t,n){++CC,u3+=(e-u3)/CC,l3+=(t-l3)/CC,c3+=(n-c3)/CC}function lue(){od.point=Jat}function Jat(e,t){e*=sr,t*=sr;var n=cn(t);fu=n*cn(e),du=n*sn(e),hu=sn(t),od.point=Zat,FI(fu,du,hu)}function Zat(e,t){e*=sr,t*=sr;var n=cn(t),r=n*cn(e),i=n*sn(e),s=sn(t),o=lf(Cu((o=du*s-hu*i)*o+(o=hu*r-fu*s)*o+(o=fu*i-du*r)*o),fu*r+du*i+hu*s);a3+=o,f3+=o*(fu+(fu=r)),d3+=o*(du+(du=i)),h3+=o*(hu+(hu=s)),FI(fu,du,hu)}function cue(){od.point=QG}function eut(){od.point=nut}function tut(){_Ee(vEe,bEe),od.point=QG}function nut(e,t){vEe=e,bEe=t,e*=sr,t*=sr,od.point=_Ee;var n=cn(t);fu=n*cn(e),du=n*sn(e),hu=sn(t),FI(fu,du,hu)}function _Ee(e,t){e*=sr,t*=sr;var n=cn(t),r=n*cn(e),i=n*sn(e),s=sn(t),o=du*s-hu*i,a=hu*r-fu*s,u=fu*i-du*r,l=R7(o,a,u),c=wl(l),f=l&&-c/l;$7.add(f*o),L7.add(f*a),F7.add(f*u),a3+=c,f3+=c*(fu+(fu=r)),d3+=c*(du+(du=i)),h3+=c*(hu+(hu=s)),FI(fu,du,hu)}function rut(e){CC=a3=u3=l3=c3=f3=d3=h3=0,$7=new _u,L7=new _u,F7=new _u,dm(e,od);var t=+$7,n=+L7,r=+F7,i=R7(t,n,r);return i<ZO&&(t=f3,n=d3,r=h3,a3<un&&(t=u3,n=l3,r=c3),i=R7(t,n,r),i<ZO)?[NaN,NaN]:[lf(n,t)*Rs,wl(r/i)*Rs]}function j7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function B7(e,t){return xr(e)>ar&&(e-=Math.round(e/Tu)*Tu),[e,t]}B7.invert=B7;function wEe(e,t,n){return(e%=Tu)?t||n?j7(due(e),hue(t,n)):due(e):t||n?hue(t,n):B7}function fue(e){return function(t,n){return t+=e,xr(t)>ar&&(t-=Math.round(t/Tu)*Tu),[t,n]}}function due(e){var t=fue(e);return t.invert=fue(-e),t}function hue(e,t){var n=cn(e),r=sn(e),i=cn(t),s=sn(t);function o(a,u){var l=cn(u),c=cn(a)*l,f=sn(a)*l,d=sn(u),h=d*n+c*r;return[lf(f*i-h*s,c*n-d*r),wl(h*i+f*s)]}return o.invert=function(a,u){var l=cn(u),c=cn(a)*l,f=sn(a)*l,d=sn(u),h=d*i-f*s;return[lf(f*i+d*s,c*n+h*r),wl(h*n-c*r)]},o}function iut(e){e=wEe(e[0]*sr,e[1]*sr,e.length>2?e[2]*sr:0);function t(n){return n=e(n[0]*sr,n[1]*sr),n[0]*=Rs,n[1]*=Rs,n}return t.invert=function(n){return n=e.invert(n[0]*sr,n[1]*sr),n[0]*=Rs,n[1]*=Rs,n},t}function sut(e,t,n,r,i,s){if(n){var o=cn(t),a=sn(t),u=r*n;i==null?(i=t+r*Tu,s=t-u/2):(i=pue(o,i),s=pue(o,s),(r>0?i<s:i>s)&&(i+=r*Tu));for(var l,c=i;r>0?c>s:c<s;c-=u)l=s3([o,-a*cn(c),-a*sn(c)]),e.point(l[0],l[1])}}function pue(e,t){t=rb(t),t[0]-=e,o3(t);var n=cEe(-t[1]);return((-t[2]<0?-n:n)+Tu-un)%Tu}function EEe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:ua,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function SD(e,t){return xr(e[0]-t[0])<un&&xr(e[1]-t[1])<un}function IN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function xEe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((g=p.length-1)<=0)){var g,y=p[0],b=p[g],_;if(SD(y,b)){if(!y[2]&&!b[2]){for(i.lineStart(),a=0;a<g;++a)i.point((y=p[a])[0],y[1]);i.lineEnd();return}b[0]+=2*un}s.push(_=new IN(y,p,null,!0)),o.push(_.o=new IN(y,null,_,!1)),s.push(_=new IN(b,p,null,!1)),o.push(_.o=new IN(b,null,_,!0))}}),!!s.length){for(o.sort(t),mue(s),mue(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function mue(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function z8(e){return xr(e[0])<=ar?e[0]:ef(e[0])*((xr(e[0])+ar)%Tu-ar)}function out(e,t){var n=z8(t),r=t[1],i=sn(r),s=[sn(n),-cn(n),0],o=0,a=0,u=new _u;i===1?r=ws+un:i===-1&&(r=-ws-un);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=z8(h),g=h[1]/2+e3,y=sn(g),b=cn(g),_=0;_<d;++_,p=C,y=T,b=A,h=E){var E=f[_],C=z8(E),x=E[1]/2+e3,T=sn(x),A=cn(x),k=C-p,N=k>=0?1:-1,P=N*k,D=P>ar,j=y*T;if(u.add(lf(j*N*sn(P),b*A+j*cn(P))),o+=D?k+N*Tu:k,D^p>=n^C>=n){var M=VE(rb(h),rb(E));o3(M);var B=VE(s,M);o3(B);var V=(D^k>=0?-1:1)*wl(B[2]);(r>V||r===V&&(M[0]||M[1]))&&(a+=D^k>=0?1:-1)}}return(o<-un||o<un&&u<-ZO)^a&1}function SEe(e,t,n,r){return function(i){var s=t(i),o=EEe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:g,lineEnd:y,polygonStart:function(){d.point=b,d.lineStart=_,d.lineEnd=E,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=g,d.lineEnd=y,c=nwe(c);var C=out(l,r);c.length?(u||(i.polygonStart(),u=!0),xEe(c,uut,C,n,i)):C&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(C,x){e(C,x)&&i.point(C,x)}function p(C,x){s.point(C,x)}function g(){d.point=p,s.lineStart()}function y(){d.point=h,s.lineEnd()}function b(C,x){f.push([C,x]),a.point(C,x)}function _(){a.lineStart(),f=[]}function E(){b(f[0][0],f[0][1]),a.lineEnd();var C=a.clean(),x=o.result(),T,A=x.length,k,N,P;if(f.pop(),l.push(f),f=null,!!A){if(C&1){if(N=x[0],(k=N.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<k;++T)i.point((P=N[T])[0],P[1]);i.lineEnd()}return}A>1&&C&2&&x.push(x.pop().concat(x.shift())),c.push(x.filter(aut))}}return d}}function aut(e){return e.length>1}function uut(e,t){return((e=e.x)[0]<0?e[1]-ws-un:ws-e[1])-((t=t.x)[0]<0?t[1]-ws-un:ws-t[1])}const gue=SEe(function(){return!0},lut,fut,[-ar,-ws]);function lut(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?ar:-ar,u=xr(s-t);xr(u-ar)<un?(e.point(t,n=(n+o)/2>0?ws:-ws),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=ar&&(xr(t-r)<un&&(t-=r*un),xr(s-a)<un&&(s-=a*un),n=cut(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function cut(e,t,n,r){var i,s,o=sn(e-n);return xr(o)>un?uS((sn(t)*(s=cn(r))*sn(n)-sn(r)*(i=cn(t))*sn(e))/(i*s*o)):(t+r)/2}function fut(e,t,n,r){var i;if(e==null)i=n*ws,r.point(-ar,i),r.point(0,i),r.point(ar,i),r.point(ar,0),r.point(ar,-i),r.point(0,-i),r.point(-ar,-i),r.point(-ar,0),r.point(-ar,i);else if(xr(e[0]-t[0])>un){var s=e[0]<t[0]?ar:-ar;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function dut(e){var t=cn(e),n=2*sr,r=t>0,i=xr(t)>un;function s(c,f,d,h){sut(h,e,n,d,c,f)}function o(c,f){return cn(c)*cn(f)>t}function a(c){var f,d,h,p,g;return{lineStart:function(){p=h=!1,g=1},point:function(y,b){var _=[y,b],E,C=o(y,b),x=r?C?0:l(y,b):C?l(y+(y<0?ar:-ar),b):0;if(!f&&(p=h=C)&&c.lineStart(),C!==h&&(E=u(f,_),(!E||SD(f,E)||SD(_,E))&&(_[2]=1)),C!==h)g=0,C?(c.lineStart(),E=u(_,f),c.point(E[0],E[1])):(E=u(f,_),c.point(E[0],E[1],2),c.lineEnd()),f=E;else if(i&&f&&r^C){var T;!(x&d)&&(T=u(_,f,!0))&&(g=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}C&&(!f||!SD(f,_))&&c.point(_[0],_[1]),f=_,h=C,d=x},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return g|(p&&h)<<1}}}function u(c,f,d){var h=rb(c),p=rb(f),g=[1,0,0],y=VE(h,p),b=CN(y,y),_=y[0],E=b-_*_;if(!E)return!d&&c;var C=t*b/E,x=-t*_/E,T=VE(g,y),A=AN(g,C),k=AN(y,x);U8(A,k);var N=T,P=CN(A,N),D=CN(N,N),j=P*P-D*(CN(A,A)-1);if(!(j<0)){var M=Cu(j),B=AN(N,(-P-M)/D);if(U8(B,A),B=s3(B),!d)return B;var V=c[0],z=f[0],G=c[1],Y=f[1],Q;z<V&&(Q=V,V=z,z=Q);var L=z-V,U=xr(L-ar)<un,K=U||L<un;if(!U&&Y<G&&(Q=G,G=Y,Y=Q),K?U?G+Y>0^B[1]<(xr(B[0]-V)<un?G:Y):G<=B[1]&&B[1]<=Y:L>ar^(V<=B[0]&&B[0]<=z)){var q=AN(N,(-P+M)/D);return U8(q,A),[B,s3(q)]}}}function l(c,f){var d=r?e:ar-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return SEe(o,a,s,r?[0,-e]:[-ar,e-ar])}function hut(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var AC=1e9,kN=-AC;function TEe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return xr(l[0]-e)<un?c>0?0:3:xr(l[0]-n)<un?c>0?2:1:xr(l[1]-t)<un?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=EEe(),d,h,p,g,y,b,_,E,C,x,T,A={point:k,lineStart:j,lineEnd:M,polygonStart:P,polygonEnd:D};function k(V,z){i(V,z)&&c.point(V,z)}function N(){for(var V=0,z=0,G=h.length;z<G;++z)for(var Y=h[z],Q=1,L=Y.length,U=Y[0],K,q,X=U[0],Z=U[1];Q<L;++Q)K=X,q=Z,U=Y[Q],X=U[0],Z=U[1],q<=r?Z>r&&(X-K)*(r-q)>(Z-q)*(e-K)&&++V:Z<=r&&(X-K)*(r-q)<(Z-q)*(e-K)&&--V;return V}function P(){c=f,d=[],h=[],T=!0}function D(){var V=N(),z=T&&V,G=(d=nwe(d)).length;(z||G)&&(l.polygonStart(),z&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),G&&xEe(d,a,V,s,l),l.polygonEnd()),c=l,d=h=p=null}function j(){A.point=B,h&&h.push(p=[]),x=!0,C=!1,_=E=NaN}function M(){d&&(B(g,y),b&&C&&f.rejoin(),d.push(f.result())),A.point=k,C&&c.lineEnd()}function B(V,z){var G=i(V,z);if(h&&p.push([V,z]),x)g=V,y=z,b=G,x=!1,G&&(c.lineStart(),c.point(V,z));else if(G&&C)c.point(V,z);else{var Y=[_=Math.max(kN,Math.min(AC,_)),E=Math.max(kN,Math.min(AC,E))],Q=[V=Math.max(kN,Math.min(AC,V)),z=Math.max(kN,Math.min(AC,z))];hut(Y,Q,e,t,n,r)?(C||(c.lineStart(),c.point(Y[0],Y[1])),c.point(Q[0],Q[1]),G||c.lineEnd(),T=!1):G&&(c.lineStart(),c.point(V,z),T=!1)}_=V,E=z,C=G}return A}}function yue(e,t,n){var r=ll(e,t-un,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function vue(e,t,n){var r=ll(e,t-un,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function put(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,g,y=2.5;function b(){return{type:"MultiLineString",coordinates:_()}}function _(){return ll(TN(r/c)*c,n,c).map(p).concat(ll(TN(a/f)*f,o,f).map(g)).concat(ll(TN(t/u)*u,e,u).filter(function(E){return xr(E%c)>un}).map(d)).concat(ll(TN(s/l)*l,i,l).filter(function(E){return xr(E%f)>un}).map(h))}return b.lines=function(){return _().map(function(E){return{type:"LineString",coordinates:E}})},b.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(a).reverse().slice(1))]}},b.extent=function(E){return arguments.length?b.extentMajor(E).extentMinor(E):b.extentMinor()},b.extentMajor=function(E){return arguments.length?(r=+E[0][0],n=+E[1][0],a=+E[0][1],o=+E[1][1],r>n&&(E=r,r=n,n=E),a>o&&(E=a,a=o,o=E),b.precision(y)):[[r,a],[n,o]]},b.extentMinor=function(E){return arguments.length?(t=+E[0][0],e=+E[1][0],s=+E[0][1],i=+E[1][1],t>e&&(E=t,t=e,e=E),s>i&&(E=s,s=i,i=E),b.precision(y)):[[t,s],[e,i]]},b.step=function(E){return arguments.length?b.stepMajor(E).stepMinor(E):b.stepMinor()},b.stepMajor=function(E){return arguments.length?(c=+E[0],f=+E[1],b):[c,f]},b.stepMinor=function(E){return arguments.length?(u=+E[0],l=+E[1],b):[u,l]},b.precision=function(E){return arguments.length?(y=+E,d=yue(s,i,90),h=vue(t,e,y),p=yue(a,o,90),g=vue(r,n,y),b):y},b.extentMajor([[-180,-90+un],[180,90-un]]).extentMinor([[-180,-80-un],[180,80+un]])}const dA=e=>e;var V8=new _u,U7=new _u,CEe,AEe,z7,V7,hm={point:ua,lineStart:ua,lineEnd:ua,polygonStart:function(){hm.lineStart=mut,hm.lineEnd=yut},polygonEnd:function(){hm.lineStart=hm.lineEnd=hm.point=ua,V8.add(xr(U7)),U7=new _u},result:function(){var e=V8/2;return V8=new _u,e}};function mut(){hm.point=gut}function gut(e,t){hm.point=IEe,CEe=z7=e,AEe=V7=t}function IEe(e,t){U7.add(V7*e-z7*t),z7=e,V7=t}function yut(){IEe(CEe,AEe)}var HE=1/0,p3=HE,hA=-HE,m3=hA,g3={point:vut,lineStart:ua,lineEnd:ua,polygonStart:ua,polygonEnd:ua,result:function(){var e=[[HE,p3],[hA,m3]];return hA=m3=-(p3=HE=1/0),e}};function vut(e,t){e<HE&&(HE=e),e>hA&&(hA=e),t<p3&&(p3=t),t>m3&&(m3=t)}var H7=0,q7=0,IC=0,y3=0,v3=0,jw=0,W7=0,G7=0,kC=0,kEe,REe,gh,yh,Qc={point:ib,lineStart:bue,lineEnd:_ue,polygonStart:function(){Qc.lineStart=wut,Qc.lineEnd=Eut},polygonEnd:function(){Qc.point=ib,Qc.lineStart=bue,Qc.lineEnd=_ue},result:function(){var e=kC?[W7/kC,G7/kC]:jw?[y3/jw,v3/jw]:IC?[H7/IC,q7/IC]:[NaN,NaN];return H7=q7=IC=y3=v3=jw=W7=G7=kC=0,e}};function ib(e,t){H7+=e,q7+=t,++IC}function bue(){Qc.point=but}function but(e,t){Qc.point=_ut,ib(gh=e,yh=t)}function _ut(e,t){var n=e-gh,r=t-yh,i=Cu(n*n+r*r);y3+=i*(gh+e)/2,v3+=i*(yh+t)/2,jw+=i,ib(gh=e,yh=t)}function _ue(){Qc.point=ib}function wut(){Qc.point=xut}function Eut(){NEe(kEe,REe)}function xut(e,t){Qc.point=NEe,ib(kEe=gh=e,REe=yh=t)}function NEe(e,t){var n=e-gh,r=t-yh,i=Cu(n*n+r*r);y3+=i*(gh+e)/2,v3+=i*(yh+t)/2,jw+=i,i=yh*e-gh*t,W7+=i*(gh+e),G7+=i*(yh+t),kC+=i*3,ib(gh=e,yh=t)}function PEe(e){this._context=e}PEe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Tu);break}}},result:ua};var Y7=new _u,H8,DEe,OEe,RC,NC,pA={point:ua,lineStart:function(){pA.point=Sut},lineEnd:function(){H8&&MEe(DEe,OEe),pA.point=ua},polygonStart:function(){H8=!0},polygonEnd:function(){H8=null},result:function(){var e=+Y7;return Y7=new _u,e}};function Sut(e,t){pA.point=MEe,DEe=RC=e,OEe=NC=t}function MEe(e,t){RC-=e,NC-=t,Y7.add(Cu(RC*RC+NC*NC)),RC=e,NC=t}let wue,b3,Eue,xue;class Sue{constructor(t){this._append=t==null?$Ee:Tut(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Eue||this._append!==b3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Eue=r,b3=this._append,xue=this._,this._=i}this._+=xue;break}}}result(){const t=this._;return this._="",t.length?t:null}}function $Ee(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Tut(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return $Ee;if(t!==wue){const n=10**t;wue=t,b3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return b3}function LEe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),dm(a,i(s))),s.result()}return o.area=function(a){return dm(a,i(hm)),hm.result()},o.measure=function(a){return dm(a,i(pA)),pA.result()},o.bounds=function(a){return dm(a,i(g3)),g3.result()},o.centroid=function(a){return dm(a,i(Qc)),Qc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,dA):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Sue(n)):new PEe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Sue(n)),o},o.projection(e).digits(n).context(t)}function UL(e){return function(t){var n=new K7;for(var r in e)n[r]=e[r];return n.stream=t,n}}function K7(){}K7.prototype={constructor:K7,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function JG(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),dm(n,e.stream(g3)),t(g3.result()),r!=null&&e.clipExtent(r),e}function zL(e,t,n){return JG(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function ZG(e,t,n){return zL(e,[[0,0],t],n)}function eY(e,t,n){return JG(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function tY(e,t,n){return JG(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Tue=16,Cut=cn(30*sr);function Cue(e,t){return+t?Iut(e,t):Aut(e)}function Aut(e){return UL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Iut(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,g,y){var b=l-r,_=c-i,E=b*b+_*_;if(E>4*t&&g--){var C=o+d,x=a+h,T=u+p,A=Cu(C*C+x*x+T*T),k=wl(T/=A),N=xr(xr(T)-1)<un||xr(s-f)<un?(s+f)/2:lf(x,C),P=e(N,k),D=P[0],j=P[1],M=D-r,B=j-i,V=_*M-b*B;(V*V/E>t||xr((b*M+_*B)/E-.5)>.3||o*d+a*h+u*p<Cut)&&(n(r,i,s,o,a,u,D,j,N,C/=A,x/=A,T,g,y),y.point(D,j),n(D,j,N,C,x,T,l,c,f,d,h,p,g,y))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,g,y={point:b,lineStart:_,lineEnd:C,polygonStart:function(){r.polygonStart(),y.lineStart=x},polygonEnd:function(){r.polygonEnd(),y.lineStart=_}};function b(k,N){k=e(k,N),r.point(k[0],k[1])}function _(){f=NaN,y.point=E,r.lineStart()}function E(k,N){var P=rb([k,N]),D=e(k,N);n(f,d,c,h,p,g,f=D[0],d=D[1],c=k,h=P[0],p=P[1],g=P[2],Tue,r),r.point(f,d)}function C(){y.point=b,r.lineEnd()}function x(){_(),y.point=T,y.lineEnd=A}function T(k,N){E(i=k,N),s=f,o=d,a=h,u=p,l=g,y.point=E}function A(){n(f,d,c,h,p,g,s,o,i,a,u,l,Tue,r),y.lineEnd=C,C()}return y}}var kut=UL({point:function(e,t){this.stream.point(e*sr,t*sr)}});function Rut(e){return UL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Nut(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Aue(e,t,n,r,i,s){if(!s)return Nut(e,t,n,r,i);var o=cn(s),a=sn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(g,y){return g*=r,y*=i,[u*g-l*y+t,n-l*g-u*y]}return p.invert=function(g,y){return[r*(c*g-f*y+d),i*(h-f*g-c*y)]},p}function wp(e){return FEe(function(){return e})()}function FEe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,g=gue,y=null,b,_,E,C=dA,x=.5,T,A,k,N,P;function D(V){return k(V[0]*sr,V[1]*sr)}function j(V){return V=k.invert(V[0],V[1]),V&&[V[0]*Rs,V[1]*Rs]}D.stream=function(V){return N&&P===V?N:N=kut(Rut(c)(g(T(C(P=V)))))},D.preclip=function(V){return arguments.length?(g=V,p=void 0,B()):g},D.postclip=function(V){return arguments.length?(C=V,y=b=_=E=null,B()):C},D.clipAngle=function(V){return arguments.length?(g=+V?dut(p=V*sr):(p=null,gue),B()):p*Rs},D.clipExtent=function(V){return arguments.length?(C=V==null?(y=b=_=E=null,dA):TEe(y=+V[0][0],b=+V[0][1],_=+V[1][0],E=+V[1][1]),B()):y==null?null:[[y,b],[_,E]]},D.scale=function(V){return arguments.length?(n=+V,M()):n},D.translate=function(V){return arguments.length?(r=+V[0],i=+V[1],M()):[r,i]},D.center=function(V){return arguments.length?(s=V[0]%360*sr,o=V[1]%360*sr,M()):[s*Rs,o*Rs]},D.rotate=function(V){return arguments.length?(a=V[0]%360*sr,u=V[1]%360*sr,l=V.length>2?V[2]%360*sr:0,M()):[a*Rs,u*Rs,l*Rs]},D.angle=function(V){return arguments.length?(f=V%360*sr,M()):f*Rs},D.reflectX=function(V){return arguments.length?(d=V?-1:1,M()):d<0},D.reflectY=function(V){return arguments.length?(h=V?-1:1,M()):h<0},D.precision=function(V){return arguments.length?(T=Cue(A,x=V*V),B()):Cu(x)},D.fitExtent=function(V,z){return zL(D,V,z)},D.fitSize=function(V,z){return ZG(D,V,z)},D.fitWidth=function(V,z){return eY(D,V,z)},D.fitHeight=function(V,z){return tY(D,V,z)};function M(){var V=Aue(n,0,0,d,h,f).apply(null,t(s,o)),z=Aue(n,r-V[0],i-V[1],d,h,f);return c=wEe(a,u,l),A=j7(t,z),k=j7(c,A),T=Cue(A,x),B()}function B(){return N=P=null,D}return function(){return t=e.apply(this,arguments),D.invert=t.invert&&j,M()}}function nY(e){var t=0,n=ar/3,r=FEe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*sr,n=s[1]*sr):[t*Rs,n*Rs]},i}function Put(e){var t=cn(e);function n(r,i){return[r*t,sn(i)/t]}return n.invert=function(r,i){return[r/t,wl(i*t)]},n}function Dut(e,t){var n=sn(e),r=(n+sn(t))/2;if(xr(r)<un)return Put(e);var i=1+n*(2*r-n),s=Cu(i)/r;function o(a,u){var l=Cu(i-2*r*sn(u))/r;return[l*sn(a*=r),s-l*cn(a)]}return o.invert=function(a,u){var l=s-u,c=lf(a,xr(l))*ef(l);return l*r<0&&(c-=ar*ef(a)*ef(l)),[c/r,wl((i-(a*a+l*l)*r*r)/(2*r))]},o}function _3(){return nY(Dut).scale(155.424).center([0,33.6442])}function jEe(){return _3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Out(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Mut(){var e,t,n=jEe(),r,i=_3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=_3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),g=(d[0]-p[0])/h,y=(d[1]-p[1])/h;return(y>=.12&&y<.234&&g>=-.425&&g<-.214?i:y>=.166&&y<.234&&g>=-.214&&g<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Out([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],g=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,g-.238*h],[p+.455*h,g+.238*h]]).stream(l),s=i.translate([p-.307*h,g+.201*h]).clipExtent([[p-.425*h+un,g+.12*h+un],[p-.214*h-un,g+.234*h-un]]).stream(l),a=o.translate([p-.205*h,g+.212*h]).clipExtent([[p-.214*h+un,g+.166*h+un],[p-.115*h-un,g+.234*h-un]]).stream(l),f()},c.fitExtent=function(d,h){return zL(c,d,h)},c.fitSize=function(d,h){return ZG(c,d,h)},c.fitWidth=function(d,h){return eY(c,d,h)},c.fitHeight=function(d,h){return tY(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function BEe(e){return function(t,n){var r=cn(t),i=cn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*sn(t),s*sn(n)]}}function jI(e){return function(t,n){var r=Cu(t*t+n*n),i=e(r),s=sn(i),o=cn(i);return[lf(t*s,r*o),wl(r&&n*s/r)]}}var UEe=BEe(function(e){return Cu(2/(1+e))});UEe.invert=jI(function(e){return 2*wl(e/2)});function $ut(){return wp(UEe).scale(124.75).clipAngle(180-.001)}var zEe=BEe(function(e){return(e=cEe(e))&&e/sn(e)});zEe.invert=jI(function(e){return e});function Lut(){return wp(zEe).scale(79.4188).clipAngle(180-.001)}function VL(e,t){return[e,t3(XG((ws+t)/2))]}VL.invert=function(e,t){return[e,2*uS(lEe(t))-ws]};function Fut(){return VEe(VL).scale(961/Tu)}function VEe(e){var t=wp(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=ar*r(),d=t(iut(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===VL?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function RN(e){return XG((ws+e)/2)}function jut(e,t){var n=cn(e),r=e===t?sn(e):t3(n/cn(t))/t3(RN(t)/RN(e)),i=n*B8(RN(e),r)/r;if(!r)return VL;function s(o,a){i>0?a<-ws+un&&(a=-ws+un):a>ws-un&&(a=ws-un);var u=i/B8(RN(a),r);return[u*sn(r*o),i-u*cn(r*o)]}return s.invert=function(o,a){var u=i-a,l=ef(r)*Cu(o*o+u*u),c=lf(o,xr(u))*ef(u);return u*r<0&&(c-=ar*ef(o)*ef(u)),[c/r,2*uS(B8(i/l,1/r))-ws]},s}function But(){return nY(jut).scale(109.5).parallels([30,30])}function w3(e,t){return[e,t]}w3.invert=w3;function Uut(){return wp(w3).scale(152.63)}function zut(e,t){var n=cn(e),r=e===t?sn(e):(n-cn(t))/(t-e),i=n/r+e;if(xr(r)<un)return w3;function s(o,a){var u=i-a,l=r*o;return[u*sn(l),i-u*cn(l)]}return s.invert=function(o,a){var u=i-a,l=lf(o,xr(u))*ef(u);return u*r<0&&(l-=ar*ef(o)*ef(u)),[l/r,i-ef(r)*Cu(o*o+u*u)]},s}function Vut(){return nY(zut).scale(131.154).center([0,13.9389])}var b2=1.340264,_2=-.081106,w2=893e-6,E2=.003796,E3=Cu(3)/2,Hut=12;function HEe(e,t){var n=wl(E3*sn(t)),r=n*n,i=r*r*r;return[e*cn(n)/(E3*(b2+3*_2*r+i*(7*w2+9*E2*r))),n*(b2+_2*r+i*(w2+E2*r))]}HEe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<Hut&&(a=n*(b2+_2*r+i*(w2+E2*r))-t,u=b2+3*_2*r+i*(7*w2+9*E2*r),n-=o=a/u,r=n*n,i=r*r*r,!(xr(o)<ZO));++s);return[E3*e*(b2+3*_2*r+i*(7*w2+9*E2*r))/cn(n),wl(sn(n)/E3)]};function qut(){return wp(HEe).scale(177.158)}function qEe(e,t){var n=cn(t),r=cn(e)*n;return[n*sn(e)/r,sn(t)/r]}qEe.invert=jI(uS);function Wut(){return wp(qEe).scale(144.049).clipAngle(60)}function Gut(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=UL({point:function(C,x){var T=E([C,x]);this.stream.point(T[0],T[1])}}),g=dA,y,b;function _(){return d=e*r,h=e*i,y=b=null,E}function E(C){var x=C[0]*d,T=C[1]*h;if(s){var A=T*o-x*a;x=x*o+T*a,T=A}return[x+t,T+n]}return E.invert=function(C){var x=C[0]-t,T=C[1]-n;if(s){var A=T*o+x*a;x=x*o-T*a,T=A}return[x/d,T/h]},E.stream=function(C){return y&&b===C?y:y=p(g(b=C))},E.postclip=function(C){return arguments.length?(g=C,u=l=c=f=null,_()):g},E.clipExtent=function(C){return arguments.length?(g=C==null?(u=l=c=f=null,dA):TEe(u=+C[0][0],l=+C[0][1],c=+C[1][0],f=+C[1][1]),_()):u==null?null:[[u,l],[c,f]]},E.scale=function(C){return arguments.length?(e=+C,_()):e},E.translate=function(C){return arguments.length?(t=+C[0],n=+C[1],_()):[t,n]},E.angle=function(C){return arguments.length?(s=C%360*sr,a=sn(s),o=cn(s),_()):s*Rs},E.reflectX=function(C){return arguments.length?(r=C?-1:1,_()):r<0},E.reflectY=function(C){return arguments.length?(i=C?-1:1,_()):i<0},E.fitExtent=function(C,x){return zL(E,C,x)},E.fitSize=function(C,x){return ZG(E,C,x)},E.fitWidth=function(C,x){return eY(E,C,x)},E.fitHeight=function(C,x){return tY(E,C,x)},E}function WEe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}WEe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(xr(i)>un&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Yut(){return wp(WEe).scale(175.295)}function GEe(e,t){return[cn(t)*sn(e),sn(t)]}GEe.invert=jI(wl);function Kut(){return wp(GEe).scale(249.5).clipAngle(90+un)}function YEe(e,t){var n=cn(t),r=1+cn(e)*n;return[n*sn(e)/r,sn(t)/r]}YEe.invert=jI(function(e){return 2*uS(e)});function Xut(){return wp(YEe).scale(250).clipAngle(142)}function KEe(e,t){return[t3(XG((ws+t)/2)),-e]}KEe.invert=function(e,t){return[-t,2*uS(lEe(e))-ws]};function Qut(){var e=VEe(KEe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Jut(e,t){return e.parent===t.parent?1:2}function Zut(e){return e.reduce(elt,0)/e.length}function elt(e,t){return e+t.x}function tlt(e){return 1+e.reduce(nlt,0)}function nlt(e,t){return Math.max(e,t.y)}function rlt(e){for(var t;t=e.children;)e=t[0];return e}function ilt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function slt(){var e=Jut,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Zut(h),d.y=tlt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=rlt(s),l=ilt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function olt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function alt(){return this.eachAfter(olt)}function ult(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function llt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function clt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function flt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function dlt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function hlt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function plt(e){for(var t=this,n=mlt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function mlt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function glt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function ylt(){return Array.from(this)}function vlt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function blt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*_lt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function HL(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=xlt)):t===void 0&&(t=Elt);for(var n=new qE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new qE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(XEe)}function wlt(){return HL(this).eachBefore(Slt)}function Elt(e){return e.children}function xlt(e){return Array.isArray(e)?e[1]:null}function Slt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function XEe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function qE(e){this.data=e,this.depth=this.height=0,this.parent=null}qE.prototype=HL.prototype={constructor:qE,count:alt,each:ult,eachAfter:clt,eachBefore:llt,find:flt,sum:dlt,sort:hlt,path:plt,ancestors:glt,descendants:ylt,leaves:vlt,links:blt,copy:wlt,[Symbol.iterator]:_lt};function TD(e){return e==null?null:QEe(e)}function QEe(e){if(typeof e!="function")throw new Error;return e}function f1(){return 0}function Cw(e){return function(){return e}}const Tlt=1664525,Clt=1013904223,Iue=4294967296;function Alt(){let e=1;return()=>(e=(Tlt*e+Clt)%Iue)/Iue}function Ilt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function klt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Rlt(e,t){for(var n=0,r=(e=klt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&JEe(o,s)?++n:(o=Plt(i=Nlt(i,s)),n=0);return o}function Nlt(e,t){var n,r;if(q8(t,e))return[t];for(n=0;n<e.length;++n)if(NN(t,e[n])&&q8(PC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(NN(PC(e[n],e[r]),t)&&NN(PC(e[n],t),e[r])&&NN(PC(e[r],t),e[n])&&q8(ZEe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function NN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function JEe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function q8(e,t){for(var n=0;n<t.length;++n)if(!JEe(e,t[n]))return!1;return!0}function Plt(e){switch(e.length){case 1:return Dlt(e[0]);case 2:return PC(e[0],e[1]);case 3:return ZEe(e[0],e[1],e[2])}}function Dlt(e){return{x:e.x,y:e.y,r:e.r}}function PC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function ZEe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,g=i-c,y=u-s,b=f-s,_=r*r+i*i-s*s,E=_-o*o-a*a+u*u,C=_-l*l-c*c+f*f,x=h*p-d*g,T=(p*C-g*E)/(x*2)-r,A=(g*y-p*b)/x,k=(h*E-d*C)/(x*2)-i,N=(d*b-h*y)/x,P=A*A+N*N-1,D=2*(s+T*A+k*N),j=T*T+k*k-s*s,M=-(Math.abs(P)>1e-6?(D+Math.sqrt(D*D-4*P*j))/(2*P):j/D);return{x:r+T+A*M,y:i+k+N*M,r:M}}function kue(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Rue(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Nue(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function PN(e){this._=e,this.next=null,this.previous=null}function Olt(e,t){if(!(s=(e=Ilt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;kue(r,n,i=e[2]),n=new PN(n),r=new PN(r),i=new PN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){kue(n._,r._,i=e[u]),i=new PN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Rue(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Rue(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Nue(n);(i=i.next)!==r;)(a=Nue(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Rlt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Mlt(e){return Math.sqrt(e.value)}function exe(){var e=null,t=1,n=1,r=f1;function i(s){const o=Alt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Pue(e)).eachAfter(W8(r,.5,o)).eachBefore(Due(1)):s.eachBefore(Pue(Mlt)).eachAfter(W8(f1,1,o)).eachAfter(W8(r,s.r/Math.min(t,n),o)).eachBefore(Due(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=TD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Cw(+s),i):r},i}function Pue(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function W8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Olt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Due(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function txe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function BI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function $lt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(txe),o}function s(o,a){return function(u){u.children&&BI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Llt={depth:-1},Oue={},G8={};function Flt(e){return e.id}function jlt(e){return e.parentId}function Mue(){var e=Flt,t=jlt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,g,y=new Map;if(n!=null){const b=s.map((C,x)=>Blt(n(C,x,i))),_=b.map($ue),E=new Set(b).add("");for(const C of _)E.has(C)||(E.add(C),b.push(C),_.push($ue(C)),s.push(G8));o=(C,x)=>b[x],a=(C,x)=>_[x]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new qE(l),(p=o(l,c,i))!=null&&(p+="")&&(g=h.id=p,y.set(g,y.has(g)?Oue:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=y.get(p),!d)throw new Error("missing: "+p);if(d===Oue)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===G8&&f.children.length===1;)f=f.children[0],--u;for(let b=s.length-1;b>=0&&(h=s[b],h.data===G8);--b)h.data=null}if(f.parent=Llt,f.eachBefore(function(b){b.depth=b.parent.depth+1,--u}).eachBefore(XEe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=TD(i),r):e},r.parentId=function(i){return arguments.length?(t=TD(i),r):t},r.path=function(i){return arguments.length?(n=TD(i),r):n},r}function Blt(e){e=`${e}`;let t=e.length;return X7(e,t-1)&&!X7(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function $ue(e){let t=e.length;if(t<2)return"";for(;--t>1&&!X7(e,t););return e.slice(0,t)}function X7(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Ult(e,t){return e.parent===t.parent?1:2}function Y8(e){var t=e.children;return t?t[0]:e.t}function K8(e){var t=e.children;return t?t[t.length-1]:e.t}function zlt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Vlt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Hlt(e,t,n){return e.a.parent===t.parent?e.a:n}function CD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}CD.prototype=Object.create(qE.prototype);function qlt(e){for(var t=new CD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new CD(s[o],o)),i.parent=n;return(t.parent=new CD(null,0)).children=[t],t}function Wlt(){var e=Ult,t=1,n=1,r=null;function i(l){var c=qlt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(_){_.x<f.x&&(f=_),_.x>d.x&&(d=_),_.depth>h.depth&&(h=_)});var p=f===d?1:e(f,d)/2,g=p-f.x,y=t/(d.x+p+g),b=n/(h.depth||1);l.eachBefore(function(_){_.x=(_.x+g)*y,_.y=_.depth*b})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Vlt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,g=d.parent.children[0],y=d.m,b=h.m,_=p.m,E=g.m,C;p=K8(p),d=Y8(d),p&&d;)g=Y8(g),h=K8(h),h.a=l,C=p.z+_-d.z-y+e(p._,d._),C>0&&(zlt(Hlt(p,l,f),l,C),y+=C,b+=C),_+=p.m,y+=d.m,E+=g.m,b+=h.m;p&&!K8(h)&&(h.t=p,h.m+=_-b),d&&!Y8(g)&&(g.t=d,g.m+=y-E,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function qL(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var nxe=(1+Math.sqrt(5))/2;function rxe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,g=t.value,y,b,_,E,C,x,T;c<d;){h=i-n,p=s-r;do y=a[f++].value;while(!y&&f<d);for(b=_=y,x=Math.max(p/h,h/p)/(g*e),T=y*y*x,C=Math.max(_/T,T/b);f<d;++f){if(y+=l=a[f].value,l<b&&(b=l),l>_&&(_=l),T=y*y*x,E=Math.max(_/T,T/b),E>C){y-=l;break}C=E}o.push(u={value:y,dice:h<p,children:a.slice(c,f)}),u.dice?BI(u,n,r,i,g?r+=p*y/g:s):qL(u,n,r,g?n+=h*y/g:i,s),g-=y,c=f}return o}const ixe=function e(t){function n(r,i,s,o,a){rxe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(nxe);function Glt(){var e=ixe,t=!1,n=1,r=1,i=[0],s=f1,o=f1,a=f1,u=f1,l=f1;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(txe),d}function f(d){var h=i[d.depth],p=d.x0+h,g=d.y0+h,y=d.x1-h,b=d.y1-h;y<p&&(p=y=(p+y)/2),b<g&&(g=b=(g+b)/2),d.x0=p,d.y0=g,d.x1=y,d.y1=b,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,g+=o(d)-h,y-=a(d)-h,b-=u(d)-h,y<p&&(p=y=(p+y)/2),b<g&&(g=b=(g+b)/2),e(d,p,g,y,b))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=QEe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:Cw(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:Cw(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:Cw(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:Cw(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:Cw(+d),c):l},c}function Ylt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,g,y,b){if(f>=d-1){var _=s[f];_.x0=p,_.y0=g,_.x1=y,_.y1=b;return}for(var E=l[f],C=h/2+E,x=f+1,T=d-1;x<T;){var A=x+T>>>1;l[A]<C?x=A+1:T=A}C-l[x-1]<l[x]-C&&f+1<x&&--x;var k=l[x]-E,N=h-k;if(y-p>b-g){var P=h?(p*N+y*k)/h:y;c(f,x,k,p,g,P,b),c(x,d,N,P,g,y,b)}else{var D=h?(g*N+b*k)/h:b;c(f,x,k,p,g,y,D),c(x,d,N,p,D,y,b)}}}function Klt(e,t,n,r,i){(e.depth&1?qL:BI)(e,t,n,r,i)}const Xlt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,g=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?BI(l,i,s,o,g?s+=(a-s)*l.value/g:a):qL(l,i,s,g?i+=(o-i)*l.value/g:o,a),g-=l.value}else r._squarify=u=rxe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(nxe);function Pd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Qy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Q7=Symbol("implicit");function Jy(){var e=new yae,t=[],n=[],r=Q7;function i(s){let o=e.get(s);if(o===void 0){if(r!==Q7)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new yae;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Jy(t,n).unknown(r)},Pd.apply(i,arguments),i}function lS(){var e=Jy().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,g=h?r:i;s=(g-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(g-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var y=ll(d).map(function(b){return p+s*b});return n(h?y.reverse():y)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return lS(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Pd.apply(f(),arguments)}function Qlt(e){return function(){return e}}function J7(e){return+e}var Lue=[0,1];function cl(e){return e}function Z7(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Qlt(isNaN(t)?NaN:.5)}function Jlt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Zlt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=Z7(i,r),s=n(o,s)):(r=Z7(r,i),s=n(s,o)),function(a){return s(r(a))}}function ect(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=Z7(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=sy(e,a,1,r)-1;return s[u](i[u](a))}}function UI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function WL(){var e=Lue,t=Lue,n=bg,r,i,s,o=cl,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==cl&&(o=Jlt(e[0],e[d-1])),a=d>2?ect:Zlt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Yc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,J7),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=$I,c()},f.clamp=function(d){return arguments.length?(o=d?!0:cl,c()):o!==cl},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function sxe(){return WL()(cl,cl)}function oxe(e,t,n,r){var i=oy(e,t,n),s;switch(r=nb(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=aEe(i,o))&&(r.precision=s),KG(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=uEe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=oEe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Xy(r)}function Kb(e){var t=e.domain;return e.ticks=function(n){var r=t();return d7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return oxe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=h7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function cf(){var e=sxe();return e.copy=function(){return UI(e,cf())},Pd.apply(e,arguments),Kb(e)}function axe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,J7),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return axe(e).unknown(t)},e=arguments.length?Array.from(e,J7):[0,1],Kb(n)}function uxe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Fue(e){return Math.log(e)}function jue(e){return Math.exp(e)}function tct(e){return-Math.log(-e)}function nct(e){return-Math.exp(-e)}function rct(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ict(e){return e===10?rct:e===Math.E?Math.exp:t=>Math.pow(e,t)}function sct(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Bue(e){return(t,n)=>-e(-t,n)}function rY(e){const t=e(Fue,jue),n=t.domain;let r=10,i,s;function o(){return i=sct(r),s=ict(r),n()[0]<0?(i=Bue(i),s=Bue(s),e(tct,nct)):e(Fue,jue),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,g;const y=a==null?10:+a;let b=[];if(!(r%1)&&h-d<y){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(g=d<0?p/s(-d):p*s(d),!(g<l)){if(g>c)break;b.push(g)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(g=d>0?p/s(-d):p*s(d),!(g<l)){if(g>c)break;b.push(g)}b.length*2<y&&(b=d7(l,c,y))}else b=d7(d,h,Math.min(h-d,y)).map(s);return f?b.reverse():b},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=nb(u)).precision==null&&(u.trim=!0),u=Xy(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(uxe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function lxe(){const e=rY(WL()).domain([1,10]);return e.copy=()=>UI(e,lxe()).base(e.base()),Pd.apply(e,arguments),e}function Uue(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function zue(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function iY(e){var t=1,n=e(Uue(t),zue(t));return n.constant=function(r){return arguments.length?e(Uue(t=+r),zue(t)):t},Kb(n)}function cxe(){var e=iY(WL());return e.copy=function(){return UI(e,cxe()).constant(e.constant())},Pd.apply(e,arguments)}function Vue(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oct(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function act(e){return e<0?-e*e:e*e}function sY(e){var t=e(cl,cl),n=1;function r(){return n===1?e(cl,cl):n===.5?e(oct,act):e(Vue(n),Vue(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Kb(t)}function oY(){var e=sY(WL());return e.copy=function(){return UI(e,oY()).exponent(e.exponent())},Pd.apply(e,arguments),e}function uct(){return oY.apply(null,arguments).exponent(.5)}function fxe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=ewe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[sy(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Rm),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return fxe().domain(e).range(t).unknown(r)},Pd.apply(s,arguments)}function dxe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[sy(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return dxe().domain([e,t]).range(i).unknown(s)},Pd.apply(Kb(o),arguments)}function hxe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[sy(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return hxe().domain(e).range(t).unknown(n)},Pd.apply(i,arguments)}const X8=new Date,Q8=new Date;function wo(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>wo(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(X8.setTime(+s),Q8.setTime(+o),e(X8),e(Q8),Math.floor(n(X8,Q8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const WE=wo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);WE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?wo(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):WE);WE.range;const wm=1e3,tf=wm*60,Em=tf*60,Ym=Em*24,aY=Ym*7,Hue=Ym*30,J8=Ym*365,xm=wo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*wm)},(e,t)=>(t-e)/wm,e=>e.getUTCSeconds());xm.range;const GL=wo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wm)},(e,t)=>{e.setTime(+e+t*tf)},(e,t)=>(t-e)/tf,e=>e.getMinutes());GL.range;const YL=wo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*tf)},(e,t)=>(t-e)/tf,e=>e.getUTCMinutes());YL.range;const KL=wo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wm-e.getMinutes()*tf)},(e,t)=>{e.setTime(+e+t*Em)},(e,t)=>(t-e)/Em,e=>e.getHours());KL.range;const XL=wo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Em)},(e,t)=>(t-e)/Em,e=>e.getUTCHours());XL.range;const Dm=wo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*tf)/Ym,e=>e.getDate()-1);Dm.range;const U0=wo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ym,e=>e.getUTCDate()-1);U0.range;const pxe=wo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ym,e=>Math.floor(e/Ym));pxe.range;function Xb(e){return wo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*tf)/aY)}const cS=Xb(0),x3=Xb(1),lct=Xb(2),cct=Xb(3),GE=Xb(4),fct=Xb(5),dct=Xb(6);cS.range;x3.range;lct.range;cct.range;GE.range;fct.range;dct.range;function Qb(e){return wo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/aY)}const fS=Qb(0),S3=Qb(1),hct=Qb(2),pct=Qb(3),YE=Qb(4),mct=Qb(5),gct=Qb(6);fS.range;S3.range;hct.range;pct.range;YE.range;mct.range;gct.range;const mA=wo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());mA.range;const gA=wo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());gA.range;const Kh=wo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Kh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Kh.range;const Xh=wo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Xh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:wo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Xh.range;function mxe(e,t,n,r,i,s){const o=[[xm,1,wm],[xm,5,5*wm],[xm,15,15*wm],[xm,30,30*wm],[s,1,tf],[s,5,5*tf],[s,15,15*tf],[s,30,30*tf],[i,1,Em],[i,3,3*Em],[i,6,6*Em],[i,12,12*Em],[r,1,Ym],[r,2,2*Ym],[n,1,aY],[t,1,Hue],[t,3,3*Hue],[e,1,J8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=oS(([,,y])=>y).right(o,d);if(h===o.length)return e.every(oy(l/J8,c/J8,f));if(h===0)return WE.every(Math.max(oy(l,c,f),1));const[p,g]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(g)}return[a,u]}const[yct,vct]=mxe(Xh,gA,fS,pxe,XL,YL),[bct,_ct]=mxe(Kh,mA,cS,Dm,KL,GL);function Z8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function e9(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function FT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function gxe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=jT(i),c=BT(i),f=jT(s),d=BT(s),h=jT(o),p=BT(o),g=jT(a),y=BT(a),b=jT(u),_=BT(u),E={a:G,A:Y,b:Q,B:L,c:null,d:Xue,e:Xue,f:Vct,g:Zct,G:tft,H:Bct,I:Uct,j:zct,L:yxe,m:Hct,M:qct,p:U,q:K,Q:Zue,s:ele,S:Wct,u:Gct,U:Yct,V:Kct,w:Xct,W:Qct,x:null,X:null,y:Jct,Y:eft,Z:nft,"%":Jue},C={a:q,A:X,b:Z,B:ae,c:null,d:Que,e:Que,f:oft,g:gft,G:vft,H:rft,I:ift,j:sft,L:bxe,m:aft,M:uft,p:he,q:ge,Q:Zue,s:ele,S:lft,u:cft,U:fft,V:dft,w:hft,W:pft,x:null,X:null,y:mft,Y:yft,Z:bft,"%":Jue},x={a:P,A:D,b:j,B:M,c:B,d:Yue,e:Yue,f:$ct,g:Gue,G:Wue,H:Kue,I:Kue,j:Pct,L:Mct,m:Nct,M:Dct,p:N,q:Rct,Q:Fct,s:jct,S:Oct,u:Tct,U:Cct,V:Act,w:Sct,W:Ict,x:V,X:z,y:Gue,Y:Wue,Z:kct,"%":Lct};E.x=T(n,E),E.X=T(r,E),E.c=T(t,E),C.x=T(n,C),C.X=T(r,C),C.c=T(t,C);function T(be,Ce){return function(oe){var re=[],xe=-1,Re=0,Ke=be.length,Qe,ke,Ue;for(oe instanceof Date||(oe=new Date(+oe));++xe<Ke;)be.charCodeAt(xe)===37&&(re.push(be.slice(Re,xe)),(ke=que[Qe=be.charAt(++xe)])!=null?Qe=be.charAt(++xe):ke=Qe==="e"?" ":"0",(Ue=Ce[Qe])&&(Qe=Ue(oe,ke)),re.push(Qe),Re=xe+1);return re.push(be.slice(Re,xe)),re.join("")}}function A(be,Ce){return function(oe){var re=FT(1900,void 0,1),xe=k(re,be,oe+="",0),Re,Ke;if(xe!=oe.length)return null;if("Q"in re)return new Date(re.Q);if("s"in re)return new Date(re.s*1e3+("L"in re?re.L:0));if(Ce&&!("Z"in re)&&(re.Z=0),"p"in re&&(re.H=re.H%12+re.p*12),re.m===void 0&&(re.m="q"in re?re.q:0),"V"in re){if(re.V<1||re.V>53)return null;"w"in re||(re.w=1),"Z"in re?(Re=e9(FT(re.y,0,1)),Ke=Re.getUTCDay(),Re=Ke>4||Ke===0?S3.ceil(Re):S3(Re),Re=U0.offset(Re,(re.V-1)*7),re.y=Re.getUTCFullYear(),re.m=Re.getUTCMonth(),re.d=Re.getUTCDate()+(re.w+6)%7):(Re=Z8(FT(re.y,0,1)),Ke=Re.getDay(),Re=Ke>4||Ke===0?x3.ceil(Re):x3(Re),Re=Dm.offset(Re,(re.V-1)*7),re.y=Re.getFullYear(),re.m=Re.getMonth(),re.d=Re.getDate()+(re.w+6)%7)}else("W"in re||"U"in re)&&("w"in re||(re.w="u"in re?re.u%7:"W"in re?1:0),Ke="Z"in re?e9(FT(re.y,0,1)).getUTCDay():Z8(FT(re.y,0,1)).getDay(),re.m=0,re.d="W"in re?(re.w+6)%7+re.W*7-(Ke+5)%7:re.w+re.U*7-(Ke+6)%7);return"Z"in re?(re.H+=re.Z/100|0,re.M+=re.Z%100,e9(re)):Z8(re)}}function k(be,Ce,oe,re){for(var xe=0,Re=Ce.length,Ke=oe.length,Qe,ke;xe<Re;){if(re>=Ke)return-1;if(Qe=Ce.charCodeAt(xe++),Qe===37){if(Qe=Ce.charAt(xe++),ke=x[Qe in que?Ce.charAt(xe++):Qe],!ke||(re=ke(be,oe,re))<0)return-1}else if(Qe!=oe.charCodeAt(re++))return-1}return re}function N(be,Ce,oe){var re=l.exec(Ce.slice(oe));return re?(be.p=c.get(re[0].toLowerCase()),oe+re[0].length):-1}function P(be,Ce,oe){var re=h.exec(Ce.slice(oe));return re?(be.w=p.get(re[0].toLowerCase()),oe+re[0].length):-1}function D(be,Ce,oe){var re=f.exec(Ce.slice(oe));return re?(be.w=d.get(re[0].toLowerCase()),oe+re[0].length):-1}function j(be,Ce,oe){var re=b.exec(Ce.slice(oe));return re?(be.m=_.get(re[0].toLowerCase()),oe+re[0].length):-1}function M(be,Ce,oe){var re=g.exec(Ce.slice(oe));return re?(be.m=y.get(re[0].toLowerCase()),oe+re[0].length):-1}function B(be,Ce,oe){return k(be,t,Ce,oe)}function V(be,Ce,oe){return k(be,n,Ce,oe)}function z(be,Ce,oe){return k(be,r,Ce,oe)}function G(be){return o[be.getDay()]}function Y(be){return s[be.getDay()]}function Q(be){return u[be.getMonth()]}function L(be){return a[be.getMonth()]}function U(be){return i[+(be.getHours()>=12)]}function K(be){return 1+~~(be.getMonth()/3)}function q(be){return o[be.getUTCDay()]}function X(be){return s[be.getUTCDay()]}function Z(be){return u[be.getUTCMonth()]}function ae(be){return a[be.getUTCMonth()]}function he(be){return i[+(be.getUTCHours()>=12)]}function ge(be){return 1+~~(be.getUTCMonth()/3)}return{format:function(be){var Ce=T(be+="",E);return Ce.toString=function(){return be},Ce},parse:function(be){var Ce=A(be+="",!1);return Ce.toString=function(){return be},Ce},utcFormat:function(be){var Ce=T(be+="",C);return Ce.toString=function(){return be},Ce},utcParse:function(be){var Ce=A(be+="",!0);return Ce.toString=function(){return be},Ce}}}var que={"-":"",_:" ",0:"0"},Go=/^\s*\d+/,wct=/^%/,Ect=/[\\^$*+?|[\]().{}]/g;function Hr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function xct(e){return e.replace(Ect,"\\$&")}function jT(e){return new RegExp("^(?:"+e.map(xct).join("|")+")","i")}function BT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Sct(e,t,n){var r=Go.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Tct(e,t,n){var r=Go.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Cct(e,t,n){var r=Go.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Act(e,t,n){var r=Go.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ict(e,t,n){var r=Go.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Wue(e,t,n){var r=Go.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Gue(e,t,n){var r=Go.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function kct(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Rct(e,t,n){var r=Go.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Nct(e,t,n){var r=Go.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Yue(e,t,n){var r=Go.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Pct(e,t,n){var r=Go.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Kue(e,t,n){var r=Go.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Dct(e,t,n){var r=Go.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Oct(e,t,n){var r=Go.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Mct(e,t,n){var r=Go.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function $ct(e,t,n){var r=Go.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Lct(e,t,n){var r=wct.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Fct(e,t,n){var r=Go.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function jct(e,t,n){var r=Go.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Xue(e,t){return Hr(e.getDate(),t,2)}function Bct(e,t){return Hr(e.getHours(),t,2)}function Uct(e,t){return Hr(e.getHours()%12||12,t,2)}function zct(e,t){return Hr(1+Dm.count(Kh(e),e),t,3)}function yxe(e,t){return Hr(e.getMilliseconds(),t,3)}function Vct(e,t){return yxe(e,t)+"000"}function Hct(e,t){return Hr(e.getMonth()+1,t,2)}function qct(e,t){return Hr(e.getMinutes(),t,2)}function Wct(e,t){return Hr(e.getSeconds(),t,2)}function Gct(e){var t=e.getDay();return t===0?7:t}function Yct(e,t){return Hr(cS.count(Kh(e)-1,e),t,2)}function vxe(e){var t=e.getDay();return t>=4||t===0?GE(e):GE.ceil(e)}function Kct(e,t){return e=vxe(e),Hr(GE.count(Kh(e),e)+(Kh(e).getDay()===4),t,2)}function Xct(e){return e.getDay()}function Qct(e,t){return Hr(x3.count(Kh(e)-1,e),t,2)}function Jct(e,t){return Hr(e.getFullYear()%100,t,2)}function Zct(e,t){return e=vxe(e),Hr(e.getFullYear()%100,t,2)}function eft(e,t){return Hr(e.getFullYear()%1e4,t,4)}function tft(e,t){var n=e.getDay();return e=n>=4||n===0?GE(e):GE.ceil(e),Hr(e.getFullYear()%1e4,t,4)}function nft(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Hr(t/60|0,"0",2)+Hr(t%60,"0",2)}function Que(e,t){return Hr(e.getUTCDate(),t,2)}function rft(e,t){return Hr(e.getUTCHours(),t,2)}function ift(e,t){return Hr(e.getUTCHours()%12||12,t,2)}function sft(e,t){return Hr(1+U0.count(Xh(e),e),t,3)}function bxe(e,t){return Hr(e.getUTCMilliseconds(),t,3)}function oft(e,t){return bxe(e,t)+"000"}function aft(e,t){return Hr(e.getUTCMonth()+1,t,2)}function uft(e,t){return Hr(e.getUTCMinutes(),t,2)}function lft(e,t){return Hr(e.getUTCSeconds(),t,2)}function cft(e){var t=e.getUTCDay();return t===0?7:t}function fft(e,t){return Hr(fS.count(Xh(e)-1,e),t,2)}function _xe(e){var t=e.getUTCDay();return t>=4||t===0?YE(e):YE.ceil(e)}function dft(e,t){return e=_xe(e),Hr(YE.count(Xh(e),e)+(Xh(e).getUTCDay()===4),t,2)}function hft(e){return e.getUTCDay()}function pft(e,t){return Hr(S3.count(Xh(e)-1,e),t,2)}function mft(e,t){return Hr(e.getUTCFullYear()%100,t,2)}function gft(e,t){return e=_xe(e),Hr(e.getUTCFullYear()%100,t,2)}function yft(e,t){return Hr(e.getUTCFullYear()%1e4,t,4)}function vft(e,t){var n=e.getUTCDay();return e=n>=4||n===0?YE(e):YE.ceil(e),Hr(e.getUTCFullYear()%1e4,t,4)}function bft(){return"+0000"}function Jue(){return"%"}function Zue(e){return+e}function ele(e){return Math.floor(+e/1e3)}var ow,uY,wxe,zI,Exe;_ft({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _ft(e){return ow=gxe(e),uY=ow.format,wxe=ow.parse,zI=ow.utcFormat,Exe=ow.utcParse,ow}function wft(e){return new Date(e)}function Eft(e){return e instanceof Date?+e:+new Date(+e)}function lY(e,t,n,r,i,s,o,a,u,l){var c=sxe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),g=l("%I:%M"),y=l("%I %p"),b=l("%a %d"),_=l("%b %d"),E=l("%B"),C=l("%Y");function x(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?g:s(T)<T?y:r(T)<T?i(T)<T?b:_:n(T)<T?E:C)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,Eft)):d().map(wft)},c.ticks=function(T){var A=d();return e(A[0],A[A.length-1],T??10)},c.tickFormat=function(T,A){return A==null?x:l(A)},c.nice=function(T){var A=d();return(!T||typeof T.range!="function")&&(T=t(A[0],A[A.length-1],T??10)),T?d(uxe(A,T)):c},c.copy=function(){return UI(c,lY(e,t,n,r,i,s,o,a,u,l))},c}function cY(){return Pd.apply(lY(bct,_ct,Kh,mA,cS,Dm,KL,GL,xm,uY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xft(){return Pd.apply(lY(yct,vct,Xh,gA,fS,U0,XL,YL,xm,zI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function QL(){var e=0,t=1,n,r,i,s,o=cl,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(bg),l.rangeRound=c($I),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Zy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function fY(){var e=Kb(QL()(cl));return e.copy=function(){return Zy(e,fY())},Qy.apply(e,arguments)}function xxe(){var e=rY(QL()).domain([1,10]);return e.copy=function(){return Zy(e,xxe()).base(e.base())},Qy.apply(e,arguments)}function Sxe(){var e=iY(QL());return e.copy=function(){return Zy(e,Sxe()).constant(e.constant())},Qy.apply(e,arguments)}function dY(){var e=sY(QL());return e.copy=function(){return Zy(e,dY()).exponent(e.exponent())},Qy.apply(e,arguments)}function Sft(){return dY.apply(null,arguments).exponent(.5)}function JL(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=cl,c,f=!1,d;function h(g){return isNaN(g=+g)?d:(g=.5+((g=+c(g))-s)*(r*g<r*s?a:u),l(f?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,n]=g,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(g){return arguments.length?(f=!!g,h):f},h.interpolator=function(g){return arguments.length?(l=g,h):l};function p(g){return function(y){var b,_,E;return arguments.length?([b,_,E]=y,l=jG(g,[b,_,E]),h):[l(0),l(.5),l(1)]}}return h.range=p(bg),h.rangeRound=p($I),h.unknown=function(g){return arguments.length?(d=g,h):d},function(g){return c=g,i=g(e),s=g(t),o=g(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function Txe(){var e=Kb(JL()(cl));return e.copy=function(){return Zy(e,Txe())},Qy.apply(e,arguments)}function Cxe(){var e=rY(JL()).domain([.1,1,10]);return e.copy=function(){return Zy(e,Cxe()).base(e.base())},Qy.apply(e,arguments)}function Axe(){var e=iY(JL());return e.copy=function(){return Zy(e,Axe()).constant(e.constant())},Qy.apply(e,arguments)}function hY(){var e=sY(JL());return e.copy=function(){return Zy(e,hY()).exponent(e.exponent())},Qy.apply(e,arguments)}function Tft(){return hY.apply(null,arguments).exponent(.5)}function Dd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Cft=Dd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Aft=Dd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Ift=Dd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),kft=Dd("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Rft=Dd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Nft=Dd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Pft=Dd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Dft=Dd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Oft=Dd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Mft=Dd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),ZL=Dd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Kn(e){return function(){return e}}const tle=Math.abs,Aa=Math.atan2,Ov=Math.cos,$ft=Math.max,t9=Math.min,Zd=Math.sin,S1=Math.sqrt,ka=1e-12,KE=Math.PI,T3=KE/2,x2=2*KE;function Lft(e){return e>1?0:e<-1?KE:Math.acos(e)}function nle(e){return e>=1?T3:e<=-1?-T3:Math.asin(e)}function e6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new HG(t)}function Fft(e){return e.innerRadius}function jft(e){return e.outerRadius}function Bft(e){return e.startAngle}function Uft(e){return e.endAngle}function zft(e){return e&&e.padAngle}function Vft(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ka))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function DN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/S1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,g=r+f,y=(d+p)/2,b=(h+g)/2,_=p-d,E=g-h,C=_*_+E*E,x=i-s,T=d*g-p*h,A=(E<0?-1:1)*S1($ft(0,x*x*C-T*T)),k=(T*E-_*A)/C,N=(-T*_-E*A)/C,P=(T*E+_*A)/C,D=(-T*_+E*A)/C,j=k-y,M=N-b,B=P-y,V=D-b;return j*j+M*M>B*B+V*V&&(k=P,N=D),{cx:k,cy:N,x01:-c,y01:-f,x11:k*(i/x-1),y11:N*(i/x-1)}}function ez(){var e=Fft,t=jft,n=Kn(0),r=null,i=Bft,s=Uft,o=zft,a=null,u=e6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-T3,g=s.apply(this,arguments)-T3,y=tle(g-p),b=g>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ka))a.moveTo(0,0);else if(y>x2-ka)a.moveTo(h*Ov(p),h*Zd(p)),a.arc(0,0,h,p,g,!b),d>ka&&(a.moveTo(d*Ov(g),d*Zd(g)),a.arc(0,0,d,g,p,b));else{var _=p,E=g,C=p,x=g,T=y,A=y,k=o.apply(this,arguments)/2,N=k>ka&&(r?+r.apply(this,arguments):S1(d*d+h*h)),P=t9(tle(h-d)/2,+n.apply(this,arguments)),D=P,j=P,M,B;if(N>ka){var V=nle(N/d*Zd(k)),z=nle(N/h*Zd(k));(T-=V*2)>ka?(V*=b?1:-1,C+=V,x-=V):(T=0,C=x=(p+g)/2),(A-=z*2)>ka?(z*=b?1:-1,_+=z,E-=z):(A=0,_=E=(p+g)/2)}var G=h*Ov(_),Y=h*Zd(_),Q=d*Ov(x),L=d*Zd(x);if(P>ka){var U=h*Ov(E),K=h*Zd(E),q=d*Ov(C),X=d*Zd(C),Z;if(y<KE)if(Z=Vft(G,Y,q,X,U,K,Q,L)){var ae=G-Z[0],he=Y-Z[1],ge=U-Z[0],be=K-Z[1],Ce=1/Zd(Lft((ae*ge+he*be)/(S1(ae*ae+he*he)*S1(ge*ge+be*be)))/2),oe=S1(Z[0]*Z[0]+Z[1]*Z[1]);D=t9(P,(d-oe)/(Ce-1)),j=t9(P,(h-oe)/(Ce+1))}else D=j=0}A>ka?j>ka?(M=DN(q,X,G,Y,h,j,b),B=DN(U,K,Q,L,h,j,b),a.moveTo(M.cx+M.x01,M.cy+M.y01),j<P?a.arc(M.cx,M.cy,j,Aa(M.y01,M.x01),Aa(B.y01,B.x01),!b):(a.arc(M.cx,M.cy,j,Aa(M.y01,M.x01),Aa(M.y11,M.x11),!b),a.arc(0,0,h,Aa(M.cy+M.y11,M.cx+M.x11),Aa(B.cy+B.y11,B.cx+B.x11),!b),a.arc(B.cx,B.cy,j,Aa(B.y11,B.x11),Aa(B.y01,B.x01),!b))):(a.moveTo(G,Y),a.arc(0,0,h,_,E,!b)):a.moveTo(G,Y),!(d>ka)||!(T>ka)?a.lineTo(Q,L):D>ka?(M=DN(Q,L,U,K,d,-D,b),B=DN(G,Y,q,X,d,-D,b),a.lineTo(M.cx+M.x01,M.cy+M.y01),D<P?a.arc(M.cx,M.cy,D,Aa(M.y01,M.x01),Aa(B.y01,B.x01),!b):(a.arc(M.cx,M.cy,D,Aa(M.y01,M.x01),Aa(M.y11,M.x11),!b),a.arc(0,0,d,Aa(M.cy+M.y11,M.cx+M.x11),Aa(B.cy+B.y11,B.cx+B.x11),b),a.arc(B.cx,B.cy,D,Aa(B.y11,B.x11),Aa(B.y01,B.x01),!b))):a.arc(0,0,d,x,C,b)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-KE/2;return[Ov(f)*c,Zd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Kn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Kn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Kn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Kn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Kn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Kn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Kn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function t6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ixe(e){this._context=e}Ixe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function pY(e){return new Ixe(e)}function kxe(e){return e[0]}function Rxe(e){return e[1]}function Nxe(e,t){var n=Kn(!0),r=null,i=pY,s=null,o=e6(a);e=typeof e=="function"?e:e===void 0?kxe:Kn(e),t=typeof t=="function"?t:t===void 0?Rxe:Kn(t);function a(u){var l,c=(u=t6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Kn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Kn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Kn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function Pxe(e,t,n){var r=null,i=Kn(!0),s=null,o=pY,a=null,u=e6(l);e=typeof e=="function"?e:e===void 0?kxe:Kn(+e),t=typeof t=="function"?t:Kn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Rxe:Kn(+n);function l(f){var d,h,p,g=(f=t6(f)).length,y,b=!1,_,E=new Array(g),C=new Array(g);for(s==null&&(a=o(_=u())),d=0;d<=g;++d){if(!(d<g&&i(y=f[d],d,f))===b)if(b=!b)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(E[p],C[p]);a.lineEnd(),a.areaEnd()}b&&(E[d]=+e(y,d,f),C[d]=+t(y,d,f),a.point(r?+r(y,d,f):E[d],n?+n(y,d,f):C[d]))}if(_)return a=null,_+""||null}function c(){return Nxe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Kn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Kn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Kn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Kn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Kn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Kn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Kn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function Hft(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function qft(e){return e}function Wft(){var e=qft,t=Hft,n=null,r=Kn(0),i=Kn(x2),s=Kn(0);function o(a){var u,l=(a=t6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),g=+r.apply(this,arguments),y=Math.min(x2,Math.max(-x2,i.apply(this,arguments)-g)),b,_=Math.min(Math.abs(y)/l,s.apply(this,arguments)),E=_*(y<0?-1:1),C;for(u=0;u<l;++u)(C=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=C);for(t!=null?h.sort(function(x,T){return t(p[x],p[T])}):n!=null&&h.sort(function(x,T){return n(a[x],a[T])}),u=0,f=d?(y-l*E)/d:0;u<l;++u,g=b)c=h[u],C=p[c],b=g+(C>0?C*f:0)+E,p[c]={data:a[c],index:u,value:C,startAngle:g,endAngle:b,padAngle:_};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:Kn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:Kn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:Kn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Kn(+a),o):s},o}const Gft={draw(e,t){const n=S1(t/KE);e.moveTo(n,0),e.arc(0,0,n,0,x2)}};function Yft(e,t){let n=null,r=e6(i);e=typeof e=="function"?e:Kn(e||Gft),t=typeof t=="function"?t:Kn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Kn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Kn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function uy(){}function C3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function n6(e){this._context=e}n6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:C3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:C3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Kft(e){return new n6(e)}function Dxe(e){this._context=e}Dxe.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:C3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Xft(e){return new Dxe(e)}function Oxe(e){this._context=e}Oxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:C3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Qft(e){return new Oxe(e)}function Mxe(e,t){this._basis=new n6(e),this._beta=t}Mxe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Jft=function e(t){function n(r){return t===1?new n6(r):new Mxe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function A3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function mY(e,t){this._context=e,this._k=(1-t)/6}mY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:A3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:A3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zft=function e(t){function n(r){return new mY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function gY(e,t){this._context=e,this._k=(1-t)/6}gY.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:A3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const edt=function e(t){function n(r){return new gY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function yY(e,t){this._context=e,this._k=(1-t)/6}yY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:A3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const tdt=function e(t){function n(r){return new yY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function vY(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ka){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ka){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function $xe(e,t){this._context=e,this._alpha=t}$xe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:vY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ndt=function e(t){function n(r){return t?new $xe(r,t):new mY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Lxe(e,t){this._context=e,this._alpha=t}Lxe.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:vY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const rdt=function e(t){function n(r){return t?new Lxe(r,t):new gY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Fxe(e,t){this._context=e,this._alpha=t}Fxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:vY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const idt=function e(t){function n(r){return t?new Fxe(r,t):new yY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function jxe(e){this._context=e}jxe.prototype={areaStart:uy,areaEnd:uy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function sdt(e){return new jxe(e)}function rle(e){return e<0?-1:1}function ile(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(rle(s)+rle(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function sle(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function n9(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function I3(e){this._context=e}I3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:n9(this,this._t0,sle(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,n9(this,sle(this,n=ile(this,e,t)),n);break;default:n9(this,this._t0,n=ile(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Bxe(e){this._context=new Uxe(e)}(Bxe.prototype=Object.create(I3.prototype)).point=function(e,t){I3.prototype.point.call(this,t,e)};function Uxe(e){this._context=e}Uxe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function odt(e){return new I3(e)}function adt(e){return new Bxe(e)}function zxe(e){this._context=e}zxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=ole(e),i=ole(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function ole(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function udt(e){return new zxe(e)}function r6(e,t){this._context=e,this._t=t}r6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ldt(e){return new r6(e,.5)}function cdt(e){return new r6(e,0)}function fdt(e){return new r6(e,1)}function ale(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function ule(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function ddt(e,t){return e[t]}function hdt(e){const t=[];return t.key=e,t}function pdt(){var e=Kn([]),t=ule,n=ale,r=ddt;function i(s){var o=Array.from(e.apply(this,arguments),hdt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=t6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Kn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Kn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?ule:typeof s=="function"?s:Kn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??ale,i):n},i}function DC(e,t,n){this.k=e,this.x=t,this.y=n}DC.prototype={constructor:DC,scale:function(e){return e===1?this:new DC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new DC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};DC.prototype;function bY({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=O.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=O.useCallback(c=>(s?zI("%B"):Xy(".2s"))(c),[s]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:w.jsx(uc,{children:w.jsx(Pi,{gap:3,children:w.jsx(pt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?w.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>w.jsxs("g",{transform:`translate(${f}, ${n})`,children:[w.jsx("line",{y2:"6",stroke:"currentColor"}),o?w.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,w.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:w.jsx(uc,{children:w.jsx(Li,{withinPortal:!0,label:c,children:w.jsx(pt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const mdt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:bY},Symbol.toStringTag,{value:"Module"}));function Vxe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=O.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(uc,{children:w.jsx(Pi,{gap:3,children:w.jsx(pt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>w.jsxs("g",{transform:`translate(${n}, ${l})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),s?w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,w.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:w.jsx("foreignObject",{width:a,height:20,children:w.jsx(Pi,{style:{width:"100%",height:"100%"},justify:"right",children:w.jsx(pt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const gdt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:Vxe},Symbol.toStringTag,{value:"Module"})),Lc={top:15,left:100,right:50,bottom:50};function tz({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=dd(),o=O.useMemo(()=>s-Lc.left-Lc.right,[s]),a=O.useMemo(()=>i-Lc.top-Lc.bottom,[i]),u=O.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Jy(ZL).domain(d)},[n,t.category]),l=O.useMemo(()=>e?cf([Lc.left,o+Lc.left]).domain([0,Nm(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=O.useMemo(()=>e?lS([Lc.top,a+Lc.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=O.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:w.jsxs("g",{children:[w.jsx("rect",{x:Lc.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Lc.left},h),w.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?w.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w.jsx(bY,{xScale:l,yRange:c.range(),vertPosition:a+Lc.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?w.jsx(Vxe,{yScale:c,horizontalPosition:Lc.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):w.jsx(bf,{})}const ydt=Object.freeze(Object.defineProperty({__proto__:null,Bar:tz,default:tz},Symbol.toStringTag,{value:"Module"})),Ur=Array.isArray;function El(e){return e!=null?Ur(e)?e:[e]:[]}function vdt(e=0,t=1/0){return`${lle(e)} < row_number() && row_number() <= ${lle(t)}`}function lle(e){return e<0?`count() + ${e}`:e}class Hxe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(vdt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,El(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Xn(e){throw Error(e)}function Au(e){return typeof e=="number"}function Vi(e){return typeof e=="function"}function i6(e,t){const n=Array(e);if(Vi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let bdt=class extends Hxe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Xn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Xn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Xn("Not implemented")}getter(t){Xn("Not implemented")}objects(t){Xn("Not implemented")}object(t){Xn("Not implemented")}[Symbol.iterator](){Xn("Not implemented")}print(t={}){Au(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=i6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},_dt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},wdt=function(e){return e&&Vi(e.get)?e:new _dt(e)};function Km(e){return e instanceof Date}function qa(e){return e===Object(e)}function k3(e){return e instanceof RegExp}function ya(e){return typeof e=="string"}function Edt(e,t){const n=r=>Xn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?cle(e.entries(),t):Km(e)?n("Date"):k3(e)?n("RegExp"):ya(e)?n():Ur(e)?xdt(e,t):Vi(e[Symbol.iterator])?Sdt(e,t):qa(e)?cle(Object.entries(e),t):n()}function cle(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function xdt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function Sdt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:Tdt}=Object.prototype;function _d(e,t){return Tdt.call(e,t)}function xc(e){return e?new fle({...e.data()},e.columnNames()):new fle}class fle{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return _d(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Dr=void 0,Cdt=Object.getPrototypeOf(Int8Array);function VI(e){return e instanceof Cdt}function T1(e){return Ur(e)||VI(e)}function ad(e){return e!=null&&e===e}const UT=e=>T1(e)||ya(e),Adt={compact:e=>T1(e)?e.filter(t=>ad(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>UT(e)?e.includes(t,n):!1,indexof:(e,t)=>UT(e)?e.indexOf(t):-1,join:(e,t)=>T1(e)?e.join(t):Dr,lastindexof:(e,t)=>UT(e)?e.lastIndexOf(t):-1,length:e=>UT(e)?e.length:0,pluck:(e,t)=>T1(e)?e.map(n=>ad(n)?n[t]:Dr):Dr,reverse:e=>T1(e)?e.slice().reverse():ya(e)?e.split("").reverse().join(""):Dr,slice:(e,t,n)=>UT(e)?e.slice(t,n):Dr};function Idt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function AD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const eh=e=>(e<10?"0":"")+e,kdt=e=>e<0?"-"+AD(-e,6):e>9999?"+"+AD(e,6):AD(e,4);function qxe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return kdt(e)+"-"+eh(t+1)+"-"+eh(n)+(!u||o?"T"+eh(r)+":"+eh(i)+":"+eh(s)+"."+AD(o,3)+l:s?"T"+eh(r)+":"+eh(i)+":"+eh(s)+l:i||r||!a?"T"+eh(r)+":"+eh(i)+l:"")}function Wxe(e,t){return isNaN(e)?"Invalid Date":qxe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function s6(e,t){return isNaN(e)?"Invalid Date":qxe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const Rdt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function Ndt(e){return e.match(Rdt)&&!isNaN(Date.parse(e))}function Pdt(e,t=Date.parse){return Ndt(e)?t(e):e}const Gxe=6e4,Yxe=864e5,Kxe=6048e5,ys=new Date,vs=new Date,Is=e=>(ys.setTime(typeof e=="string"?Pdt(e):e),ys);function Ddt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function Odt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function Mdt(e){vs.setTime(+e),vs.setHours(0,0,0,0),ys.setTime(+vs),ys.setMonth(0),ys.setDate(1);const t=(vs.getTimezoneOffset()-ys.getTimezoneOffset())*Gxe;return Math.floor(1+(vs-ys-t)/Yxe)}function $dt(e){vs.setTime(+e),vs.setUTCHours(0,0,0,0);const t=Date.UTC(vs.getUTCFullYear(),0,1);return Math.floor(1+(vs-t)/Yxe)}function Ldt(e,t){const n=t||0;vs.setTime(+e),vs.setDate(vs.getDate()-(vs.getDay()+7-n)%7),vs.setHours(0,0,0,0),ys.setTime(+e),ys.setMonth(0),ys.setDate(1),ys.setDate(1-(ys.getDay()+7-n)%7),ys.setHours(0,0,0,0);const r=(vs.getTimezoneOffset()-ys.getTimezoneOffset())*Gxe;return Math.floor((1+(vs-ys)-r)/Kxe)}function Fdt(e,t){const n=t||0;return vs.setTime(+e),vs.setUTCDate(vs.getUTCDate()-(vs.getUTCDay()+7-n)%7),vs.setUTCHours(0,0,0,0),ys.setTime(+e),ys.setUTCMonth(0),ys.setUTCDate(1),ys.setUTCDate(1-(ys.getUTCDay()+7-n)%7),ys.setUTCHours(0,0,0,0),Math.floor((1+(vs-ys))/Kxe)}const jdt={format_date:(e,t)=>Wxe(Is(e),!t),format_utcdate:(e,t)=>s6(Is(e),!t),timestamp:e=>+Is(e),year:e=>Is(e).getFullYear(),quarter:e=>Math.floor(Is(e).getMonth()/3),month:e=>Is(e).getMonth(),date:e=>Is(e).getDate(),dayofweek:e=>Is(e).getDay(),hours:e=>Is(e).getHours(),minutes:e=>Is(e).getMinutes(),seconds:e=>Is(e).getSeconds(),milliseconds:e=>Is(e).getMilliseconds(),utcyear:e=>Is(e).getUTCFullYear(),utcquarter:e=>Math.floor(Is(e).getUTCMonth()/3),utcmonth:e=>Is(e).getUTCMonth(),utcdate:e=>Is(e).getUTCDate(),utcdayofweek:e=>Is(e).getUTCDay(),utchours:e=>Is(e).getUTCHours(),utcminutes:e=>Is(e).getUTCMinutes(),utcseconds:e=>Is(e).getUTCSeconds(),utcmilliseconds:e=>Is(e).getUTCMilliseconds(),datetime:Ddt,dayofyear:Mdt,week:Ldt,utcdatetime:Odt,utcdayofyear:$dt,utcweek:Fdt,now:Date.now};function _Y(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Km(e)||Km(t)?+e==+t:k3(e)&&k3(t)?e+""==t+"":qa(e)&&qa(t)?Bdt(e,t):!1}function Bdt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return dle(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!dle(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!_Y(e[o],t[o]))return!1}return!0}function dle(e,t,n=_Y){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const Udt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let zdt=Math.random;function dS(){return zdt()}const Vdt={random:dS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function wY(e){return e instanceof Map}function Hdt(e){return e instanceof Set}function ID(e){return wY(e)||Hdt(e)}function r9(e){return Array.from(e)}const qdt={has:(e,t)=>ID(e)?e.has(t):e!=null?_d(e,t):!1,keys:e=>wY(e)?r9(e.keys()):e!=null?Object.keys(e):[],values:e=>ID(e)?r9(e.values()):e!=null?Object.values(e):[],entries:e=>ID(e)?r9(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Dr};function Wdt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(_d(t,e))return t[e];return n!==void 0?n:e}function Gdt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const Ydt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Bw={bin:Idt,equal:_Y,recode:Wdt,sequence:Gdt,...Adt,...jdt,...Udt,...Vdt,...qdt,...Ydt};function yA(e){return typeof e=="bigint"}function Qh(e){return e===void 0?e+"":yA(e)?e+"n":JSON.stringify(e)}function Wn(e,t=[],n=[]){return new Kdt(e,El(t),El(n))}let Kdt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Qh(n)}]`),...this.params.map(Qh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const Xxe=e=>Wn("any",e),Qxe=()=>Wn("count"),Jxe=e=>Wn("array_agg",e),Zxe=e=>Wn("array_agg_distinct",e),eSe=(e,t)=>Wn("map_agg",[e,t]),tSe=(e,t)=>Wn("object_agg",[e,t]),nSe=(e,t)=>Wn("entries_agg",[e,t]);({...Bw});function Xdt(e,t){e=ID(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function Qdt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function Jdt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,g)=>p+g,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function Zdt(e,t,n,r){const i=r==="map"||r===!0?eSe:r==="entries"?nSe:r==="object"?tSe:Xn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=Xdt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:Jxe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const eht="ArrayPattern",tht="ArrowFunctionExpression",nht="FunctionExpression",z0="Identifier",hS="Literal",rSe="MemberExpression",rht="ObjectExpression",iSe="ObjectPattern",sSe="Property",HI="Column",iht="Constant",sht="Dictionary",oht="Function",aht="Parameter",oSe="Op",Ii=(e,t)=>{const n=uht[e.type];return n?n(e,t):Xn(`Unsupported expression construct: ${e.type}`)},i9=(e,t)=>"("+Ii(e.left,t)+" "+e.operator+" "+Ii(e.right,t)+")",s9=(e,t)=>"("+ah(e.params,t)+")=>"+Ii(e.body,t),hle=(e,t)=>Ii(e.callee,t)+"("+ah(e.arguments,t)+")",ah=(e,t,n=",")=>e.map(r=>Ii(r,t)).join(n),aSe=e=>e.computed?`[${Qh(e.name)}]`:`.${e.name}`,ple=(e,t,n)=>{const r=e.table||"";return`data${r}${aSe(e)}.${n}(${t.index}${r})`},uht={Constant:e=>e.raw,Column:(e,t)=>ple(e,t,"get"),Dictionary:(e,t)=>ple(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${aSe(e)}`,Op:(e,t)=>`op(${Qh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Ii(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Ii(e.object,t),i=Ii(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:hle,NewExpression:(e,t)=>"new "+hle(e,t),ArrayExpression:(e,t)=>"["+ah(e.elements,t)+"]",AssignmentExpression:i9,BinaryExpression:i9,LogicalExpression:i9,UnaryExpression:(e,t)=>"("+e.operator+Ii(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Ii(e.test,t)+"?"+Ii(e.consequent,t)+":"+Ii(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+ah(e.properties,t)+"})",Property:(e,t)=>{const n=Ii(e.key,t);return(e.computed?`[${n}]`:n)+":"+Ii(e.value,t)},ArrowFunctionExpression:s9,FunctionExpression:s9,FunctionDeclaration:s9,ArrayPattern:(e,t)=>"["+ah(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+ah(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+ah(e.declarations,t,","),VariableDeclarator:(e,t)=>Ii(e.id,t)+"="+Ii(e.init,t),SpreadElement:(e,t)=>"..."+Ii(e.argument,t),BlockStatement:(e,t)=>"{"+ah(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Ii(e.expression,t),IfStatement:(e,t)=>"if ("+Ii(e.test,t)+")"+Ii(e.consequent,t)+(e.alternate?" else "+Ii(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Ii(e.discriminant,t)+") {"+ah(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Ii(e.test,t):"default")+": "+ah(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Ii(e.argument,t),Program:(e,t)=>Ii(e.body[0],t)};function R3(e,t={index:"row"}){return Ii(e,t)}function lht(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function XE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Km(e)?+e:Ur(e)||VI(e)?`[${e.map(XE)}]`:k3(e)?e+"":cht(e)}function cht(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${XE(e[r])}`;return t+="}",t}function N3(e,t){const n=e.length;return n===1?(r,i)=>XE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=XE(a)}return s}}function fht(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=XE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=XE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function um(){}function dht(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function uo(e){return e.init=e.init||um,e.add=e.add||um,e.rem=e.rem||um,e}function mle(e,t){return e.product_v=!1,e.product=t}const uSe={count:{create:()=>uo({value:e=>e.count}),param:[]},array_agg:{create:()=>uo({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>uo({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>uo({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>uo({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>uo({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Dr}),param:[1]},valid:{create:()=>uo({value:e=>e.valid}),param:[1]},invalid:{create:()=>uo({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=fht(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>uo({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>uo({value:e=>{let t=Dr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Dr,add:(e,t)=>yA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>mle(e,1),value:e=>e.valid?e.product_v?mle(e,dht(e.list.values())):e.product:void 0,add:(e,t)=>yA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Dr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>uo({value:e=>e.valid?e.mean:Dr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Dr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>uo({value:e=>e.valid>1?e.dev/e.valid:Dr}),param:[1],req:["variance"]},stdev:{create:()=>uo({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Dr}),param:[1],req:["variance"]},stdevp:{create:()=>uo({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Dr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Dr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Dr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Dr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Dr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>uo({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>uo({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Dr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>uo({value:e=>e.valid>1?e.cov/e.valid:Dr}),param:[2],req:["covariance"]},corr:{create:()=>uo({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Dr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>uo({value:i=>lht(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},gle={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},yle={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},lSe={row_number:{create(){return{init:um,value:e=>e.index+1}},param:[]},rank:gle,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=gle.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:yle,ntile:{create(e){e=+e,e>0||Xn("ntile num must be greater than zero.");const{init:t,value:n}=yle.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Dr){return e=+e||1,{init:um,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Dr){return e=+e||1,{init:um,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:um,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:um,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Xn("nth_value nth must be greater than zero."),{init:um,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Dr}}},param:[1,1]},fill_down:{create(e=Dr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return ad(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Dr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=hht(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function hht(e,t,n){for(const r=e.size;n<r;++n)if(ad(e.value(n,t)))return n;return-1}function EY(e){return _d(uSe,e)}function xY(e){return _d(lSe,e)}function cSe(e){return _d(Bw,e)||e==="row_object"}function fSe(e){return EY(e)&&uSe[e]}function dSe(e){return xY(e)&&lSe[e]}function zT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const SY={escape:(e,t,n)=>zT(e,t,n),expr:(e,t)=>zT(`(row,data,op)=>${e}`,Bw,t),expr2:(e,t)=>zT(`(row0,data0,row,data)=>${e}`,Bw,t),join:(e,t)=>zT(`(row1,data1,row2,data2)=>${e}`,Bw,t),param:(e,t)=>zT(e,Bw,t)},pht={"==":1,"!=":1,"===":1,"!==":1};function hSe(e,t,n=0,r,i){if(e.type=HI,e.name=t,e.table=n,i&&r&&Vi(r.keyFor)){const s=pht[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===hS&&mht(i,e,s,r.keyFor(s.value))}return e}function mht(e,t,n,r){return r<0?(e.type=hS,e.value=!1,e.raw="false"):(t.type=sht,n.value=r,n.raw=r+""),!0}function o6(e){return Ur(e)?e:wY(e)?e.entries():e?Object.entries(e):[]}const pSe="row_object";function mSe(e,t){e.type=rht;const n=e.properties=[];for(const r of o6(t)){const[i,s]=Ur(r)?r:[r,r];n.push({type:sSe,key:{type:hS,raw:Qh(s)},value:hSe({computed:!0},i)})}return e}function gSe(e){return R3(mSe({},e))}function ySe(e){return SY.expr(gSe(e))}const ght=new TextDecoder("utf-8"),nz=e=>ght.decode(e),yht=new TextEncoder,TY=e=>yht.encode(e),vht=e=>typeof e=="boolean",Zu=e=>typeof e=="function",ev=e=>e!=null&&Object(e)===e,a6=e=>ev(e)&&Zu(e.then),CY=e=>ev(e)&&Zu(e[Symbol.iterator]),u6=e=>ev(e)&&Zu(e[Symbol.asyncIterator]),bht=e=>ev(e)&&"done"in e&&"value"in e,vSe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,_ht=e=>ev(e)&&Zu(e.abort)&&Zu(e.getWriter)&&!vSe(e),wht=e=>ev(e)&&Zu(e.end)&&Zu(e.write)&&vht(e.writable)&&!vSe(e),Eht=e=>ev(e)&&Zu(e.clear)&&Zu(e.bytes)&&Zu(e.position)&&Zu(e.setPosition)&&Zu(e.capacity)&&Zu(e.getBufferIdentifier)&&Zu(e.createLong),AY=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function xht(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function P3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Jh(e,t){const n=xht(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?P3(o,s,a):o=s;break}P3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function No(e,t){let n=bht(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=TY(n)),n instanceof ArrayBuffer?new e(n):n instanceof AY?new e(n):Eht(n)?No(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const VT=e=>No(Int32Array,e),ci=e=>No(Uint8Array,e),rz=e=>(e.next(),e);function*Sht(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof AY?n(t):CY(t)?t:n(t);return yield*rz(function*(i){let s=null;do s=i.next(yield No(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Tht=e=>Sht(Uint8Array,e);function bSe(e,t){return v1(this,arguments,function*(){if(a6(t))return yield wr(yield wr(yield*Nj(u2(bSe(e,yield wr(t))))));const r=function(o){return v1(this,arguments,function*(){yield yield wr(yield wr(o))})},i=function(o){return v1(this,arguments,function*(){yield wr(yield*Nj(u2(rz(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof AY?r(t):CY(t)?i(t):u6(t)?t:r(t);return yield wr(yield*Nj(u2(rz(function(o){return v1(this,arguments,function*(){let a=null;do a=yield wr(o.next(yield yield wr(No(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield wr(new e)})}const Cht=e=>bSe(Uint8Array,e);function _Se(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function Aht(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const vle={fromIterable(e){return ON(Iht(e))},fromAsyncIterable(e){return ON(kht(e))},fromDOMStream(e){return ON(Rht(e))},fromNodeStream(e){return ON(Pht(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},ON=e=>(e.next(),e);function*Iht(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Jh(r,o)[0]:([i,r,a]=Jh(r,o),i)}({cmd:s,size:o}=yield null);const l=Tht(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function kht(e){return v1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Jh(i,a)[0]:([s,i,u]=Jh(i,a),s)}({cmd:o,size:a}=yield yield wr(null));const c=Cht(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield wr(c.next()):yield wr(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield wr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield wr(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield wr(c.return(new Uint8Array(0))))}return yield wr(null)})}function Rht(e){return v1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Jh(i,a)[0]:([s,i,u]=Jh(i,a),s)}({cmd:o,size:a}=yield yield wr(null));const c=new Nht(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield wr(c.read()):yield wr(c.read(a-u)),!n&&s.byteLength>0&&(i.push(ci(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield wr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield wr(c.cancel(f)))}finally{r===!1?yield wr(c.cancel()):e.locked&&c.releaseLock()}return yield wr(null)})}class Nht{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return fm(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return fm(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=ci(n)),n})}}const o9=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function Pht(e){return v1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Jh(l,a)[0]:([c,l,u]=Jh(l,a),c)}if({cmd:o,size:a}=yield yield wr(null),e.isTTY)return yield yield wr(new Uint8Array(0)),yield wr(null);try{n[0]=o9(e,"end"),n[1]=o9(e,"error");do{if(n[2]=o9(e,"readable"),[r,s]=yield wr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=ci(e.read(a-u)),c.byteLength<a-u&&(c=ci(e.read()))):c=ci(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield wr(f()));while(a<u)}while(!i)}finally{yield wr(d(n,r==="error"?s:null))}return yield wr(null);function d(h,p){return c=l=null,new Promise((g,y)=>{for(const[b,_]of h)e.off(b,_);try{const b=e.destroy;b&&b.call(e,p),p=void 0}catch(b){p=b||p}finally{p!=null?y(p):g()}})}})}var mu;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(mu||(mu={}));var xl;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(xl||(xl={}));var fa;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(fa||(fa={}));var Zh;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Zh||(Zh={}));var mn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(mn||(mn={}));var ep;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(ep||(ep={}));var Do;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Do||(Do={}));var pe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(pe||(pe={}));var rm;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(rm||(rm={}));const Dht=void 0;function sb(e){if(e===null)return"null";if(e===Dht)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>sb(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Oht=Symbol.for("isArrowBigNum");function Od(e,...t){return t.length===0?Object.setPrototypeOf(No(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Od.prototype[Oht]=!0;Od.prototype.toJSON=function(){return`"${bA(this)}"`};Od.prototype.valueOf=function(){return wSe(this)};Od.prototype.toString=function(){return bA(this)};Od.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return wSe(this);case"string":return bA(this);case"default":return Mht(this)}return bA(this)};function oE(...e){return Od.apply(this,e)}function aE(...e){return Od.apply(this,e)}function vA(...e){return Od.apply(this,e)}Object.setPrototypeOf(oE.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(aE.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(vA.prototype,Object.create(Uint32Array.prototype));Object.assign(oE.prototype,Od.prototype,{constructor:oE,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(aE.prototype,Od.prototype,{constructor:aE,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(vA.prototype,Od.prototype,{constructor:vA,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function wSe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const bA=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return a9(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return a9(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${a9(t)}`},Mht=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:bA(e);function a9(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class IY{static new(t,n){switch(n){case!0:return new oE(t);case!1:return new aE(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new oE(t)}return t.byteLength===16?new vA(t):new aE(t)}static signed(t){return new oE(t)}static unsigned(t){return new aE(t)}static decimal(t){return new vA(t)}constructor(t,n){return IY.new(t,n)}}function wd(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var ESe,xSe,SSe,TSe,CSe,ASe,ISe,kSe,RSe,NSe,PSe,DSe,OSe,MSe,$Se,LSe,FSe,jSe,BSe,USe;class zn{static isNull(t){return(t==null?void 0:t.typeId)===pe.Null}static isInt(t){return(t==null?void 0:t.typeId)===pe.Int}static isFloat(t){return(t==null?void 0:t.typeId)===pe.Float}static isBinary(t){return(t==null?void 0:t.typeId)===pe.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===pe.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===pe.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===pe.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===pe.Date}static isTime(t){return(t==null?void 0:t.typeId)===pe.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===pe.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===pe.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===pe.Duration}static isList(t){return(t==null?void 0:t.typeId)===pe.List}static isStruct(t){return(t==null?void 0:t.typeId)===pe.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===pe.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===pe.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===pe.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===pe.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===pe.Dictionary}static isDenseUnion(t){return zn.isUnion(t)&&t.mode===xl.Dense}static isSparseUnion(t){return zn.isUnion(t)&&t.mode===xl.Sparse}get typeId(){return pe.NONE}}ESe=Symbol.toStringTag;zn[ESe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(zn.prototype);let Xm=class extends zn{toString(){return"Null"}get typeId(){return pe.Null}};xSe=Symbol.toStringTag;Xm[xSe]=(e=>e[Symbol.toStringTag]="Null")(Xm.prototype);class Iu extends zn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return pe.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}SSe=Symbol.toStringTag;Iu[SSe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Iu.prototype);class kY extends Iu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class RY extends Iu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class ly extends Iu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class NY extends Iu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class PY extends Iu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class DY extends Iu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class OY extends Iu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class MY extends Iu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(kY.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(RY.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(ly.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(NY.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(PY.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(DY.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(OY.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(MY.prototype,"ArrayType",{value:BigUint64Array});class cy extends zn{constructor(t){super(),this.precision=t}get typeId(){return pe.Float}get ArrayType(){switch(this.precision){case fa.HALF:return Uint16Array;case fa.SINGLE:return Float32Array;case fa.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}TSe=Symbol.toStringTag;cy[TSe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(cy.prototype);class zSe extends cy{constructor(){super(fa.HALF)}}class $Y extends cy{constructor(){super(fa.SINGLE)}}class LY extends cy{constructor(){super(fa.DOUBLE)}}Object.defineProperty(zSe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty($Y.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(LY.prototype,"ArrayType",{value:Float64Array});let _A=class extends zn{constructor(){super()}get typeId(){return pe.Binary}toString(){return"Binary"}};CSe=Symbol.toStringTag;_A[CSe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(_A.prototype);let QE=class extends zn{constructor(){super()}get typeId(){return pe.Utf8}toString(){return"Utf8"}};ASe=Symbol.toStringTag;QE[ASe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(QE.prototype);let wA=class extends zn{constructor(){super()}get typeId(){return pe.Bool}toString(){return"Bool"}};ISe=Symbol.toStringTag;wA[ISe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(wA.prototype);let D3=class extends zn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return pe.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};kSe=Symbol.toStringTag;D3[kSe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(D3.prototype);class JE extends zn{constructor(t){super(),this.unit=t}get typeId(){return pe.Date}toString(){return`Date${(this.unit+1)*32}<${Zh[this.unit]}>`}}RSe=Symbol.toStringTag;JE[RSe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(JE.prototype);class $ht extends JE{constructor(){super(Zh.DAY)}}class Lht extends JE{constructor(){super(Zh.MILLISECOND)}}class Qm extends zn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return pe.Time}toString(){return`Time${this.bitWidth}<${mn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}NSe=Symbol.toStringTag;Qm[NSe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Qm.prototype);class Fht extends Qm{constructor(){super(mn.SECOND,32)}}class jht extends Qm{constructor(){super(mn.MILLISECOND,32)}}class Bht extends Qm{constructor(){super(mn.MICROSECOND,64)}}class Uht extends Qm{constructor(){super(mn.NANOSECOND,64)}}class O3 extends zn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return pe.Timestamp}toString(){return`Timestamp<${mn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}PSe=Symbol.toStringTag;O3[PSe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(O3.prototype);class ZE extends zn{constructor(t){super(),this.unit=t}get typeId(){return pe.Interval}toString(){return`Interval<${ep[this.unit]}>`}}DSe=Symbol.toStringTag;ZE[DSe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(ZE.prototype);class zht extends ZE{constructor(){super(ep.DAY_TIME)}}class Vht extends ZE{constructor(){super(ep.YEAR_MONTH)}}let M3=class extends zn{constructor(t){super(),this.unit=t}get typeId(){return pe.Duration}toString(){return`Duration<${mn[this.unit]}>`}};OSe=Symbol.toStringTag;M3[OSe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(M3.prototype);let ex=class extends zn{constructor(t){super(),this.children=[t]}get typeId(){return pe.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};MSe=Symbol.toStringTag;ex[MSe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(ex.prototype);class $a extends zn{constructor(t){super(),this.children=t}get typeId(){return pe.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}$Se=Symbol.toStringTag;$a[$Se]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))($a.prototype);class EA extends zn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return pe.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}LSe=Symbol.toStringTag;EA[LSe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(EA.prototype);let $3=class extends zn{constructor(t){super(),this.byteWidth=t}get typeId(){return pe.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};FSe=Symbol.toStringTag;$3[FSe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))($3.prototype);let tx=class extends zn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return pe.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};jSe=Symbol.toStringTag;tx[jSe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(tx.prototype);class xA extends zn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return pe.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}BSe=Symbol.toStringTag;xA[BSe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(xA.prototype);const Hht=(e=>()=>++e)(-1);class fy extends zn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?Hht():wd(r)}get typeId(){return pe.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}USe=Symbol.toStringTag;fy[USe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(fy.prototype);function ch(e){const t=e;switch(e.typeId){case pe.Decimal:return e.bitWidth/32;case pe.Timestamp:return 2;case pe.Date:return 1+t.unit;case pe.Interval:return 1+t.unit;case pe.FixedSizeList:return t.listSize;case pe.FixedSizeBinary:return t.byteWidth;default:return 1}}class er{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return qht(this,t,n)}getVisitFnByTypeId(t,n=!0){return Aw(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function qht(e,t,n=!0){return typeof t=="number"?Aw(e,t,n):typeof t=="string"&&t in pe?Aw(e,pe[t],n):t&&t instanceof zn?Aw(e,ble(t),n):t!=null&&t.type&&t.type instanceof zn?Aw(e,ble(t.type),n):Aw(e,pe.NONE,n)}function Aw(e,t,n=!0){let r=null;switch(t){case pe.Null:r=e.visitNull;break;case pe.Bool:r=e.visitBool;break;case pe.Int:r=e.visitInt;break;case pe.Int8:r=e.visitInt8||e.visitInt;break;case pe.Int16:r=e.visitInt16||e.visitInt;break;case pe.Int32:r=e.visitInt32||e.visitInt;break;case pe.Int64:r=e.visitInt64||e.visitInt;break;case pe.Uint8:r=e.visitUint8||e.visitInt;break;case pe.Uint16:r=e.visitUint16||e.visitInt;break;case pe.Uint32:r=e.visitUint32||e.visitInt;break;case pe.Uint64:r=e.visitUint64||e.visitInt;break;case pe.Float:r=e.visitFloat;break;case pe.Float16:r=e.visitFloat16||e.visitFloat;break;case pe.Float32:r=e.visitFloat32||e.visitFloat;break;case pe.Float64:r=e.visitFloat64||e.visitFloat;break;case pe.Utf8:r=e.visitUtf8;break;case pe.Binary:r=e.visitBinary;break;case pe.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case pe.Date:r=e.visitDate;break;case pe.DateDay:r=e.visitDateDay||e.visitDate;break;case pe.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case pe.Timestamp:r=e.visitTimestamp;break;case pe.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case pe.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case pe.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case pe.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case pe.Time:r=e.visitTime;break;case pe.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case pe.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case pe.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case pe.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case pe.Decimal:r=e.visitDecimal;break;case pe.List:r=e.visitList;break;case pe.Struct:r=e.visitStruct;break;case pe.Union:r=e.visitUnion;break;case pe.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case pe.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case pe.Dictionary:r=e.visitDictionary;break;case pe.Interval:r=e.visitInterval;break;case pe.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case pe.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case pe.Duration:r=e.visitDuration;break;case pe.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case pe.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case pe.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case pe.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case pe.FixedSizeList:r=e.visitFixedSizeList;break;case pe.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${pe[t]}'`)}function ble(e){switch(e.typeId){case pe.Null:return pe.Null;case pe.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?pe.Int8:pe.Uint8;case 16:return n?pe.Int16:pe.Uint16;case 32:return n?pe.Int32:pe.Uint32;case 64:return n?pe.Int64:pe.Uint64}return pe.Int}case pe.Float:switch(e.precision){case fa.HALF:return pe.Float16;case fa.SINGLE:return pe.Float32;case fa.DOUBLE:return pe.Float64}return pe.Float;case pe.Binary:return pe.Binary;case pe.Utf8:return pe.Utf8;case pe.Bool:return pe.Bool;case pe.Decimal:return pe.Decimal;case pe.Time:switch(e.unit){case mn.SECOND:return pe.TimeSecond;case mn.MILLISECOND:return pe.TimeMillisecond;case mn.MICROSECOND:return pe.TimeMicrosecond;case mn.NANOSECOND:return pe.TimeNanosecond}return pe.Time;case pe.Timestamp:switch(e.unit){case mn.SECOND:return pe.TimestampSecond;case mn.MILLISECOND:return pe.TimestampMillisecond;case mn.MICROSECOND:return pe.TimestampMicrosecond;case mn.NANOSECOND:return pe.TimestampNanosecond}return pe.Timestamp;case pe.Date:switch(e.unit){case Zh.DAY:return pe.DateDay;case Zh.MILLISECOND:return pe.DateMillisecond}return pe.Date;case pe.Interval:switch(e.unit){case ep.DAY_TIME:return pe.IntervalDayTime;case ep.YEAR_MONTH:return pe.IntervalYearMonth}return pe.Interval;case pe.Duration:switch(e.unit){case mn.SECOND:return pe.DurationSecond;case mn.MILLISECOND:return pe.DurationMillisecond;case mn.MICROSECOND:return pe.DurationMicrosecond;case mn.NANOSECOND:return pe.DurationNanosecond}return pe.Duration;case pe.Map:return pe.Map;case pe.List:return pe.List;case pe.Struct:return pe.Struct;case pe.Union:switch(e.mode){case xl.Dense:return pe.DenseUnion;case xl.Sparse:return pe.SparseUnion}return pe.Union;case pe.FixedSizeBinary:return pe.FixedSizeBinary;case pe.FixedSizeList:return pe.FixedSizeList;case pe.Dictionary:return pe.Dictionary}throw new Error(`Unrecognized type '${pe[e.typeId]}'`)}er.prototype.visitInt8=null;er.prototype.visitInt16=null;er.prototype.visitInt32=null;er.prototype.visitInt64=null;er.prototype.visitUint8=null;er.prototype.visitUint16=null;er.prototype.visitUint32=null;er.prototype.visitUint64=null;er.prototype.visitFloat16=null;er.prototype.visitFloat32=null;er.prototype.visitFloat64=null;er.prototype.visitDateDay=null;er.prototype.visitDateMillisecond=null;er.prototype.visitTimestampSecond=null;er.prototype.visitTimestampMillisecond=null;er.prototype.visitTimestampMicrosecond=null;er.prototype.visitTimestampNanosecond=null;er.prototype.visitTimeSecond=null;er.prototype.visitTimeMillisecond=null;er.prototype.visitTimeMicrosecond=null;er.prototype.visitTimeNanosecond=null;er.prototype.visitDenseUnion=null;er.prototype.visitSparseUnion=null;er.prototype.visitIntervalDayTime=null;er.prototype.visitIntervalYearMonth=null;er.prototype.visitDuration=null;er.prototype.visitDurationSecond=null;er.prototype.visitDurationMillisecond=null;er.prototype.visitDurationMicrosecond=null;er.prototype.visitDurationNanosecond=null;const VSe=new Float64Array(1),aw=new Uint32Array(VSe.buffer);function HSe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function qSe(e){if(e!==e)return 32256;VSe[0]=e;const t=(aw[1]&2147483648)>>16&65535;let n=aw[1]&2146435072,r=0;return n>=1089470464?aw[0]>0?n=31744:(n=(n&2080374784)>>16,r=(aw[1]&1048575)>>10):n<=1056964608?(r=1048576+(aw[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(aw[1]&1048575)+512>>10),t|n|r&65535}class _n extends er{}function In(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const Wht=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},FY=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},Ght=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},Yht=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},WSe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},Kht=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},_g=({values:e},t,n)=>{e[t]=n},jY=({values:e},t,n)=>{e[t]=n},GSe=({values:e},t,n)=>{e[t]=qSe(n)},Xht=(e,t,n)=>{switch(e.type.precision){case fa.HALF:return GSe(e,t,n);case fa.SINGLE:case fa.DOUBLE:return jY(e,t,n)}},BY=({values:e},t,n)=>{Wht(e,t,n.valueOf())},UY=({values:e},t,n)=>{FY(e,t*2,n.valueOf())},YSe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},Qht=({values:e,valueOffsets:t},n,r)=>WSe(e,t,n,r),Jht=({values:e,valueOffsets:t},n,r)=>{WSe(e,t,n,TY(r))},KSe=(e,t,n)=>{e.type.unit===Zh.DAY?BY(e,t,n):UY(e,t,n)},zY=({values:e},t,n)=>FY(e,t*2,n/1e3),VY=({values:e},t,n)=>FY(e,t*2,n),HY=({values:e},t,n)=>Ght(e,t*2,n),qY=({values:e},t,n)=>Yht(e,t*2,n),XSe=(e,t,n)=>{switch(e.type.unit){case mn.SECOND:return zY(e,t,n);case mn.MILLISECOND:return VY(e,t,n);case mn.MICROSECOND:return HY(e,t,n);case mn.NANOSECOND:return qY(e,t,n)}},WY=({values:e},t,n)=>{e[t]=n},GY=({values:e},t,n)=>{e[t]=n},YY=({values:e},t,n)=>{e[t]=n},KY=({values:e},t,n)=>{e[t]=n},QSe=(e,t,n)=>{switch(e.type.unit){case mn.SECOND:return WY(e,t,n);case mn.MILLISECOND:return GY(e,t,n);case mn.MICROSECOND:return YY(e,t,n);case mn.NANOSECOND:return KY(e,t,n)}},JSe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},Zht=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=ff.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},ept=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=ff.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},tpt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),npt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),rpt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),ipt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),spt=(e,t,n)=>{const r=e.type.children.map(s=>ff.getVisitFn(s.type)),i=n instanceof Map?rpt(t,n):n instanceof zr?npt(t,n):Array.isArray(n)?tpt(t,n):ipt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},opt=(e,t,n)=>{e.type.mode===xl.Dense?ZSe(e,t,n):eTe(e,t,n)},ZSe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ff.visit(i,e.valueOffsets[t],n)},eTe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ff.visit(i,t,n)},apt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},tTe=(e,t,n)=>{e.type.unit===ep.DAY_TIME?XY(e,t,n):QY(e,t,n)},XY=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},QY=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},JY=({values:e},t,n)=>{e[t]=n},ZY=({values:e},t,n)=>{e[t]=n},eK=({values:e},t,n)=>{e[t]=n},tK=({values:e},t,n)=>{e[t]=n},nTe=(e,t,n)=>{switch(e.type.unit){case mn.SECOND:return JY(e,t,n);case mn.MILLISECOND:return ZY(e,t,n);case mn.MICROSECOND:return eK(e,t,n);case mn.NANOSECOND:return tK(e,t,n)}},upt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=ff.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};_n.prototype.visitBool=In(Kht);_n.prototype.visitInt=In(_g);_n.prototype.visitInt8=In(_g);_n.prototype.visitInt16=In(_g);_n.prototype.visitInt32=In(_g);_n.prototype.visitInt64=In(_g);_n.prototype.visitUint8=In(_g);_n.prototype.visitUint16=In(_g);_n.prototype.visitUint32=In(_g);_n.prototype.visitUint64=In(_g);_n.prototype.visitFloat=In(Xht);_n.prototype.visitFloat16=In(GSe);_n.prototype.visitFloat32=In(jY);_n.prototype.visitFloat64=In(jY);_n.prototype.visitUtf8=In(Jht);_n.prototype.visitBinary=In(Qht);_n.prototype.visitFixedSizeBinary=In(YSe);_n.prototype.visitDate=In(KSe);_n.prototype.visitDateDay=In(BY);_n.prototype.visitDateMillisecond=In(UY);_n.prototype.visitTimestamp=In(XSe);_n.prototype.visitTimestampSecond=In(zY);_n.prototype.visitTimestampMillisecond=In(VY);_n.prototype.visitTimestampMicrosecond=In(HY);_n.prototype.visitTimestampNanosecond=In(qY);_n.prototype.visitTime=In(QSe);_n.prototype.visitTimeSecond=In(WY);_n.prototype.visitTimeMillisecond=In(GY);_n.prototype.visitTimeMicrosecond=In(YY);_n.prototype.visitTimeNanosecond=In(KY);_n.prototype.visitDecimal=In(JSe);_n.prototype.visitList=In(Zht);_n.prototype.visitStruct=In(spt);_n.prototype.visitUnion=In(opt);_n.prototype.visitDenseUnion=In(ZSe);_n.prototype.visitSparseUnion=In(eTe);_n.prototype.visitDictionary=In(apt);_n.prototype.visitInterval=In(tTe);_n.prototype.visitIntervalDayTime=In(XY);_n.prototype.visitIntervalYearMonth=In(QY);_n.prototype.visitDuration=In(nTe);_n.prototype.visitDurationSecond=In(JY);_n.prototype.visitDurationMillisecond=In(ZY);_n.prototype.visitDurationMicrosecond=In(eK);_n.prototype.visitDurationNanosecond=In(tK);_n.prototype.visitFixedSizeList=In(upt);_n.prototype.visitMap=In(ept);const ff=new _n,Gf=Symbol.for("parent"),uE=Symbol.for("rowIndex");class nK{constructor(t,n){return this[Gf]=t,this[uE]=n,new Proxy(this,new cpt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[uE],n=this[Gf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Sl.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${sb(t)}: ${sb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new lpt(this[Gf],this[uE])}}class lpt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Sl.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(nK.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Gf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[uE]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class cpt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Gf].type.children.map(n=>n.name)}has(t,n){return t[Gf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Gf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Gf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Sl.visit(t[Gf].children[r],t[uE]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Gf].type.children.findIndex(s=>s.name===n);return i!==-1?(ff.visit(t[Gf].children[i],t[uE],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class gn extends er{}function wn(e){return(t,n)=>t.getValid(n)?e(t,n):null}const fpt=(e,t)=>864e5*e[t],rK=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),dpt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,hpt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,rTe=e=>new Date(e),ppt=(e,t)=>rTe(fpt(e,t)),mpt=(e,t)=>rTe(rK(e,t)),gpt=(e,t)=>null,iTe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},ypt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},sTe=({values:e},t)=>ppt(e,t),oTe=({values:e},t)=>mpt(e,t*2),tv=({stride:e,values:t},n)=>t[e*n],vpt=({stride:e,values:t},n)=>HSe(t[e*n]),aTe=({values:e},t)=>e[t],bpt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),_pt=({values:e,valueOffsets:t},n)=>iTe(e,t,n),wpt=({values:e,valueOffsets:t},n)=>{const r=iTe(e,t,n);return r!==null?nz(r):null},Ept=({values:e},t)=>e[t],xpt=({type:e,values:t},n)=>e.precision!==fa.HALF?t[n]:HSe(t[n]),Spt=(e,t)=>e.type.unit===Zh.DAY?sTe(e,t):oTe(e,t),uTe=({values:e},t)=>1e3*rK(e,t*2),lTe=({values:e},t)=>rK(e,t*2),cTe=({values:e},t)=>dpt(e,t*2),fTe=({values:e},t)=>hpt(e,t*2),Tpt=(e,t)=>{switch(e.type.unit){case mn.SECOND:return uTe(e,t);case mn.MILLISECOND:return lTe(e,t);case mn.MICROSECOND:return cTe(e,t);case mn.NANOSECOND:return fTe(e,t)}},dTe=({values:e},t)=>e[t],hTe=({values:e},t)=>e[t],pTe=({values:e},t)=>e[t],mTe=({values:e},t)=>e[t],Cpt=(e,t)=>{switch(e.type.unit){case mn.SECOND:return dTe(e,t);case mn.MILLISECOND:return hTe(e,t);case mn.MICROSECOND:return pTe(e,t);case mn.NANOSECOND:return mTe(e,t)}},Apt=({values:e,stride:t},n)=>IY.decimal(e.subarray(t*n,t*(n+1))),Ipt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new zr([u])},kpt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new l6(o.slice(i,s-i))},Rpt=(e,t)=>new nK(e,t),Npt=(e,t)=>e.type.mode===xl.Dense?gTe(e,t):yTe(e,t),gTe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Sl.visit(r,e.valueOffsets[t])},yTe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Sl.visit(r,t)},Ppt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},Dpt=(e,t)=>e.type.unit===ep.DAY_TIME?vTe(e,t):bTe(e,t),vTe=({values:e},t)=>e.subarray(2*t,2*(t+1)),bTe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},_Te=({values:e},t)=>e[t],wTe=({values:e},t)=>e[t],ETe=({values:e},t)=>e[t],xTe=({values:e},t)=>e[t],Opt=(e,t)=>{switch(e.type.unit){case mn.SECOND:return _Te(e,t);case mn.MILLISECOND:return wTe(e,t);case mn.MICROSECOND:return ETe(e,t);case mn.NANOSECOND:return xTe(e,t)}},Mpt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new zr([s])};gn.prototype.visitNull=wn(gpt);gn.prototype.visitBool=wn(ypt);gn.prototype.visitInt=wn(Ept);gn.prototype.visitInt8=wn(tv);gn.prototype.visitInt16=wn(tv);gn.prototype.visitInt32=wn(tv);gn.prototype.visitInt64=wn(aTe);gn.prototype.visitUint8=wn(tv);gn.prototype.visitUint16=wn(tv);gn.prototype.visitUint32=wn(tv);gn.prototype.visitUint64=wn(aTe);gn.prototype.visitFloat=wn(xpt);gn.prototype.visitFloat16=wn(vpt);gn.prototype.visitFloat32=wn(tv);gn.prototype.visitFloat64=wn(tv);gn.prototype.visitUtf8=wn(wpt);gn.prototype.visitBinary=wn(_pt);gn.prototype.visitFixedSizeBinary=wn(bpt);gn.prototype.visitDate=wn(Spt);gn.prototype.visitDateDay=wn(sTe);gn.prototype.visitDateMillisecond=wn(oTe);gn.prototype.visitTimestamp=wn(Tpt);gn.prototype.visitTimestampSecond=wn(uTe);gn.prototype.visitTimestampMillisecond=wn(lTe);gn.prototype.visitTimestampMicrosecond=wn(cTe);gn.prototype.visitTimestampNanosecond=wn(fTe);gn.prototype.visitTime=wn(Cpt);gn.prototype.visitTimeSecond=wn(dTe);gn.prototype.visitTimeMillisecond=wn(hTe);gn.prototype.visitTimeMicrosecond=wn(pTe);gn.prototype.visitTimeNanosecond=wn(mTe);gn.prototype.visitDecimal=wn(Apt);gn.prototype.visitList=wn(Ipt);gn.prototype.visitStruct=wn(Rpt);gn.prototype.visitUnion=wn(Npt);gn.prototype.visitDenseUnion=wn(gTe);gn.prototype.visitSparseUnion=wn(yTe);gn.prototype.visitDictionary=wn(Ppt);gn.prototype.visitInterval=wn(Dpt);gn.prototype.visitIntervalDayTime=wn(vTe);gn.prototype.visitIntervalYearMonth=wn(bTe);gn.prototype.visitDuration=wn(Opt);gn.prototype.visitDurationSecond=wn(_Te);gn.prototype.visitDurationMillisecond=wn(wTe);gn.prototype.visitDurationMicrosecond=wn(ETe);gn.prototype.visitDurationNanosecond=wn(xTe);gn.prototype.visitFixedSizeList=wn(Mpt);gn.prototype.visitMap=wn(kpt);const Sl=new gn,td=Symbol.for("keys"),lE=Symbol.for("vals");class l6{constructor(t){return this[td]=new zr([t.children[0]]).memoize(),this[lE]=t.children[1],new Proxy(this,new Lpt)}[Symbol.iterator](){return new $pt(this[td],this[lE])}get size(){return this[td].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[td],n=this[lE],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Sl.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${sb(t)}: ${sb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class $pt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Sl.visit(this.vals,t)]})}}class Lpt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[td].toArray().map(String)}has(t,n){return t[td].includes(n)}getOwnPropertyDescriptor(t,n){if(t[td].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[td].indexOf(n);if(r!==-1){const i=Sl.visit(Reflect.get(t,lE),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[td].indexOf(n);return i!==-1?(ff.visit(Reflect.get(t,lE),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(l6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[td]:{writable:!0,enumerable:!1,configurable:!1,value:null},[lE]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let _le;function STe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(_le=s,s=o,o=_le),o>i&&(o=i),r?r(e,s,o):[s,o]}const wle=e=>e!==e;function pS(e){if(typeof e!=="object"||e===null)return wle(e)?wle:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Aht(e,n):!1:e instanceof Map?jpt(e):Array.isArray(e)?Fpt(e):e instanceof zr?Bpt(e):Upt(e,!0)}function Fpt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=pS(e[n]);return c6(t)}function jpt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=pS(r);return c6(n)}function Bpt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=pS(e.get(n));return c6(t)}function Upt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=pS(e[n[i]]);return c6(r,n)}function c6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return zpt(e,n);case Map:return Ele(e,n,n.keys());case l6:case nK:case Object:case void 0:return Ele(e,n,t||Object.keys(n))}return n instanceof zr?Vpt(e,n):!1}}function zpt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Vpt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Ele(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function TTe(e,t,n,r){return(n&1<<r)!==0}function Hpt(e,t,n,r){return(n&1<<r)>>r}function L3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):CTe(new iK(n,e,t,null,TTe)).subarray(0,r)),i}return n}function CTe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class iK{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function iz(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new iK(e,t,n-t,e,Hpt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return iz(e,t,i)+iz(e,r,n)+qpt(e,i>>3,r-i>>3)}function qpt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=u9(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=u9(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=u9(s.getUint8(i)),i+=1;return r}function u9(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Wpt=-1;class li{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return zn.isSparseUnion(t)?this.children.some(n=>n.nullable):zn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(zn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Wpt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-iz(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof li?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=ch(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(zn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===xl.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(zn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===xl.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(L3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new li(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===pe.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(L3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[rm.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[rm.TYPE])&&(o[rm.TYPE]=s.subarray(t,t+n)),(s=o[rm.OFFSET])&&(o[rm.OFFSET]=s.subarray(t,t+n+1))||(s=o[rm.DATA])&&(o[rm.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}li.prototype.children=Object.freeze([]);class S2 extends er{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new li(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.nullBitmap),s=No(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.nullBitmap),s=No(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.nullBitmap),s=No(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.data),s=ci(t.nullBitmap),o=VT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new li(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.data),s=ci(t.nullBitmap),o=VT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new li(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.nullBitmap),s=No(n.ArrayType,t.data),{["length"]:o=s.length/ch(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.nullBitmap),s=No(n.ArrayType,t.data),{["length"]:o=s.length/ch(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.nullBitmap),s=No(n.ArrayType,t.data),{["length"]:o=s.length/ch(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.nullBitmap),s=No(n.ArrayType,t.data),{["length"]:o=s.length/ch(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.nullBitmap),s=No(n.ArrayType,t.data),{["length"]:o=s.length/ch(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=ci(t.nullBitmap),o=VT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new li(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ci(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=No(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(zn.isSparseUnion(n))return new li(n,r,o,a,[void 0,void 0,void 0,s],i);const u=VT(t.valueOffsets);return new li(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.nullBitmap),s=No(n.indices.ArrayType,t.data),{["dictionary"]:o=new zr([new S2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new li(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.nullBitmap),s=No(n.ArrayType,t.data),{["length"]:o=s.length/ch(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=ci(t.nullBitmap),s=No(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new S2().visit({type:n.valueType})}=t,s=ci(t.nullBitmap),{["length"]:o=i.length/ch(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new li(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new S2().visit({type:n.childType})}=t,s=ci(t.nullBitmap),o=VT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new li(n,r,a,u,[o,void 0,s],[i])}}const Gpt=new S2;function Da(e){return Gpt.visit(e)}class xle{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function ATe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function ITe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function kTe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function sK(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function oK(e,t){return e.getValid(t)}function cE(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return sK(r,this._offsets,n,t)}}function RTe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=sK(s,this._offsets,r,n);return t=void 0,o}}function NTe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):sK(s,this._offsets,i,n);return t=void 0,o}}class yn extends er{}function Ypt(e,t){return t===null&&e.length>0?0:-1}function Kpt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new iK(n,e.offset+(t||0),e.length,n,TTe)){if(!i)return r;++r}return-1}function Ln(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case pe.Union:break;case pe.Dictionary:break;default:return Kpt(e,n)}const r=Sl.getVisitFn(e),i=pS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function PTe(e,t,n){const r=Sl.getVisitFn(e),i=pS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}yn.prototype.visitNull=Ypt;yn.prototype.visitBool=Ln;yn.prototype.visitInt=Ln;yn.prototype.visitInt8=Ln;yn.prototype.visitInt16=Ln;yn.prototype.visitInt32=Ln;yn.prototype.visitInt64=Ln;yn.prototype.visitUint8=Ln;yn.prototype.visitUint16=Ln;yn.prototype.visitUint32=Ln;yn.prototype.visitUint64=Ln;yn.prototype.visitFloat=Ln;yn.prototype.visitFloat16=Ln;yn.prototype.visitFloat32=Ln;yn.prototype.visitFloat64=Ln;yn.prototype.visitUtf8=Ln;yn.prototype.visitBinary=Ln;yn.prototype.visitFixedSizeBinary=Ln;yn.prototype.visitDate=Ln;yn.prototype.visitDateDay=Ln;yn.prototype.visitDateMillisecond=Ln;yn.prototype.visitTimestamp=Ln;yn.prototype.visitTimestampSecond=Ln;yn.prototype.visitTimestampMillisecond=Ln;yn.prototype.visitTimestampMicrosecond=Ln;yn.prototype.visitTimestampNanosecond=Ln;yn.prototype.visitTime=Ln;yn.prototype.visitTimeSecond=Ln;yn.prototype.visitTimeMillisecond=Ln;yn.prototype.visitTimeMicrosecond=Ln;yn.prototype.visitTimeNanosecond=Ln;yn.prototype.visitDecimal=Ln;yn.prototype.visitList=Ln;yn.prototype.visitStruct=Ln;yn.prototype.visitUnion=Ln;yn.prototype.visitDenseUnion=PTe;yn.prototype.visitSparseUnion=PTe;yn.prototype.visitDictionary=Ln;yn.prototype.visitInterval=Ln;yn.prototype.visitIntervalDayTime=Ln;yn.prototype.visitIntervalYearMonth=Ln;yn.prototype.visitDuration=Ln;yn.prototype.visitDurationSecond=Ln;yn.prototype.visitDurationMillisecond=Ln;yn.prototype.visitDurationMicrosecond=Ln;yn.prototype.visitDurationNanosecond=Ln;yn.prototype.visitFixedSizeList=Ln;yn.prototype.visitMap=Ln;const F3=new yn;class vn extends er{}function En(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===pe.Timestamp||t instanceof Iu&&t.bitWidth!==64||t instanceof Qm&&t.bitWidth!==64||t instanceof cy&&t.precision!==fa.HALF))return new xle(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new xle(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new Xpt(o)})}class Xpt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}vn.prototype.visitNull=En;vn.prototype.visitBool=En;vn.prototype.visitInt=En;vn.prototype.visitInt8=En;vn.prototype.visitInt16=En;vn.prototype.visitInt32=En;vn.prototype.visitInt64=En;vn.prototype.visitUint8=En;vn.prototype.visitUint16=En;vn.prototype.visitUint32=En;vn.prototype.visitUint64=En;vn.prototype.visitFloat=En;vn.prototype.visitFloat16=En;vn.prototype.visitFloat32=En;vn.prototype.visitFloat64=En;vn.prototype.visitUtf8=En;vn.prototype.visitBinary=En;vn.prototype.visitFixedSizeBinary=En;vn.prototype.visitDate=En;vn.prototype.visitDateDay=En;vn.prototype.visitDateMillisecond=En;vn.prototype.visitTimestamp=En;vn.prototype.visitTimestampSecond=En;vn.prototype.visitTimestampMillisecond=En;vn.prototype.visitTimestampMicrosecond=En;vn.prototype.visitTimestampNanosecond=En;vn.prototype.visitTime=En;vn.prototype.visitTimeSecond=En;vn.prototype.visitTimeMillisecond=En;vn.prototype.visitTimeMicrosecond=En;vn.prototype.visitTimeNanosecond=En;vn.prototype.visitDecimal=En;vn.prototype.visitList=En;vn.prototype.visitStruct=En;vn.prototype.visitUnion=En;vn.prototype.visitDenseUnion=En;vn.prototype.visitSparseUnion=En;vn.prototype.visitDictionary=En;vn.prototype.visitInterval=En;vn.prototype.visitIntervalDayTime=En;vn.prototype.visitIntervalYearMonth=En;vn.prototype.visitDuration=En;vn.prototype.visitDurationSecond=En;vn.prototype.visitDurationMillisecond=En;vn.prototype.visitDurationMicrosecond=En;vn.prototype.visitDurationNanosecond=En;vn.prototype.visitFixedSizeList=En;vn.prototype.visitMap=En;const aK=new vn,Qpt=(e,t)=>e+t;class nv extends er{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===mn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+tp.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+tp.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const Jpt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Zpt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),emt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=tp.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},tmt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=tp.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},nmt=(e,t)=>e.type.mode===xl.Dense?DTe(e,t):OTe(e,t),DTe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+tp.visit(t[s],r[i])},OTe=({children:e},t)=>4+tp.visitMany(e,e.map(()=>t)).reduce(Qpt,0);nv.prototype.visitUtf8=Jpt;nv.prototype.visitBinary=Zpt;nv.prototype.visitList=emt;nv.prototype.visitFixedSizeList=tmt;nv.prototype.visitUnion=nmt;nv.prototype.visitDenseUnion=DTe;nv.prototype.visitSparseUnion=OTe;const tp=new nv;var MTe;const $Te={},LTe={};class zr{constructor(t){var n,r,i;const s=t[0]instanceof zr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof li)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=$Te[o.typeId],f=s[0];this.isValid=d=>oK(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,LTe[o.typeId]),this._offsets=ITe(s);break}this.data=s,this.type=o,this.stride=ch(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return ATe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${pe[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return aK.visit(this)}concat(...t){return new zr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new zr(STe(this,t,n,({data:r,_offsets:i},s,o)=>kTe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case pe.Int:case pe.Float:case pe.Decimal:case pe.Time:case pe.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new zr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return zn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(zn.isDictionary(this.type)){const t=new j3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new zr(n)}return new j3(this)}unmemoize(){if(zn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new zr(n)}return this}}MTe=Symbol.toStringTag;zr[MTe]=(e=>{e.type=zn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(pe).map(n=>pe[n]).filter(n=>typeof n=="number"&&n!==pe.NONE);for(const n of t){const r=Sl.getVisitFnByTypeId(n),i=ff.getVisitFnByTypeId(n),s=F3.getVisitFnByTypeId(n),o=tp.getVisitFnByTypeId(n);$Te[n]={get:r,set:i,indexOf:s,byteLength:o},LTe[n]=Object.create(e,{isValid:{value:cE(oK)},get:{value:cE(Sl.getVisitFnByTypeId(n))},set:{value:RTe(ff.getVisitFnByTypeId(n))},indexOf:{value:NTe(F3.getVisitFnByTypeId(n))},getByteLength:{value:cE(tp.getVisitFnByTypeId(n))}})}return"Vector"})(zr.prototype);class j3 extends zr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new j3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new zr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function rmt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${imt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function imt(e){return typeof e!="bigint"?sb(e):`${sb(e)}n`}const l9=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,smt=(e,t=0)=>e.length>=t?e.subarray(0,t):P3(new e.constructor(t),e,0);class f6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?l9(r*1,this.BYTES_PER_ELEMENT):l9(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=l9(t*this.stride,this.BYTES_PER_ELEMENT);const n=smt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=P3(new this.ArrayType(t),this.buffer)}}f6.prototype.offset=0;class qI extends f6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class FTe extends qI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class jTe extends qI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Nl=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=ch(t),this._nulls=new FTe,n&&n.length>0&&(this._isValid=rmt(n))}toVector(){return new zr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),Da({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Nl.prototype.length=1;Nl.prototype.stride=1;Nl.prototype.children=null;Nl.prototype.finished=!1;Nl.prototype.nullValues=null;Nl.prototype._isValid=()=>!0;class wg extends Nl{constructor(t){super(t),this._values=new qI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class d6 extends Nl{constructor(t){super(t),this._pendingLength=0,this._offsets=new jTe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof l6?n[td].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class sz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const c9=2,vh=4,pm=4,bi=4,f0=new Int32Array(2),Sle=new Float32Array(f0.buffer),Tle=new Float64Array(f0.buffer),MN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var oz;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(oz||(oz={}));let B3=class BTe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new BTe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return f0[0]=this.readInt32(t),Sle[0]}readFloat64(t){return f0[MN?0:1]=this.readInt32(t),f0[MN?1:0]=this.readInt32(t+4),Tle[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Sle[0]=n,this.writeInt32(t,f0[0])}writeFloat64(t,n){Tle[0]=n,this.writeInt32(t,f0[MN?0:1]),this.writeInt32(t+4,f0[MN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+vh+pm)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<pm;n++)t+=String.fromCharCode(this.readInt8(this.position_+vh+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=vh;const i=this.bytes_.subarray(t,t+r);return n===oz.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+vh}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=pm)throw new Error("FlatBuffers: file identifier must be length "+pm);for(let n=0;n<pm;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+vh+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},UTe=class zTe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=B3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=zTe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=B3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(vh,0),this.writeInt32(this.offset()-t+vh)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*c9;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=c9;l<s;l+=c9)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?bi:0;if(n){const s=n;if(this.prep(this.minalign,vh+pm+i),s.length!=pm)throw new TypeError("FlatBuffers: file identifier must be length "+pm);for(let o=pm-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,vh+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(vh,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class lo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new lo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+bi),(n||new lo).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return lo.startKeyValue(t),lo.addKey(t,n),lo.addValue(t,r),lo.endKeyValue(t)}}var nx;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(nx||(nx={}));var rx;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(rx||(rx={}));var U3;(function(e){e[e.DenseArray=0]="DenseArray"})(U3||(U3={}));class Gl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Gl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+bi),(n||new Gl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Gl.startInt(t),Gl.addBitWidth(t,n),Gl.addIsSigned(t,r),Gl.endInt(t)}}class mm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new mm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+bi),(n||new mm).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Gl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):U3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,U3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class C1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new C1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+bi),(n||new C1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return C1.startBinary(t),C1.endBinary(t)}}class A1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new A1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+bi),(n||new A1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return A1.startBool(t),A1.endBool(t)}}var z3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(z3||(z3={}));let kD=class Iw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new Iw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+bi),(n||new Iw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):z3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,z3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return Iw.startDate(t),Iw.addUnit(t,n),Iw.endDate(t)}};class el{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new el).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+bi),(n||new el).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return el.startDecimal(t),el.addPrecision(t,n),el.addScale(t,r),el.addBitWidth(t,i),el.endDecimal(t)}}var dy;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(dy||(dy={}));class bh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new bh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+bi),(n||new bh).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dy.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,dy.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return bh.startDuration(t),bh.addUnit(t,n),bh.endDuration(t)}}class _h{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new _h).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+bi),(n||new _h).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return _h.startFixedSizeBinary(t),_h.addByteWidth(t,n),_h.endFixedSizeBinary(t)}}class wh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new wh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+bi),(n||new wh).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return wh.startFixedSizeList(t),wh.addListSize(t,n),wh.endFixedSizeList(t)}}var V3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(V3||(V3={}));class Eh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Eh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+bi),(n||new Eh).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):V3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,V3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Eh.startFloatingPoint(t),Eh.addPrecision(t,n),Eh.endFloatingPoint(t)}}var H3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(H3||(H3={}));class xh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new xh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+bi),(n||new xh).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):H3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,H3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return xh.startInterval(t),xh.addUnit(t,n),xh.endInterval(t)}}class I1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new I1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+bi),(n||new I1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return I1.startList(t),I1.endList(t)}}let RD=class kw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new kw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+bi),(n||new kw).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return kw.startMap(t),kw.addKeysSorted(t,n),kw.endMap(t)}};class k1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new k1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+bi),(n||new k1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return k1.startNull(t),k1.endNull(t)}}class R1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new R1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+bi),(n||new R1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return R1.startStruct_(t),R1.endStruct_(t)}}let OC=class Zv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Zv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+bi),(n||new Zv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dy.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,dy.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Zv.startTime(t),Zv.addUnit(t,n),Zv.addBitWidth(t,r),Zv.endTime(t)}},MC=class e1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new e1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+bi),(n||new e1).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dy.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,dy.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return e1.startTimestamp(t),e1.addUnit(t,n),e1.addTimezone(t,r),e1.endTimestamp(t)}};var q3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(q3||(q3={}));let t1=class n1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new n1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+bi),(n||new n1).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):q3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,q3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return n1.startUnion(t),n1.addMode(t,n),n1.addTypeIds(t,r),n1.endUnion(t)}};class N1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new N1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+bi),(n||new N1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return N1.startUtf8(t),N1.endUtf8(t)}}var Ki;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ki||(Ki={}));let Hc=class ND{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new ND).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+bi),(n||new ND).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ki.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new mm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new ND).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new lo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ki.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},uh=class nm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new nm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+bi),(n||new nm).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):rx.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Hc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new lo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,rx.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return nm.startSchema(t),nm.addEndianness(t,n),nm.addFields(t,r),nm.addCustomMetadata(t,i),nm.addFeatures(t,s),nm.endSchema(t)}};class Vl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Vl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+bi),(n||new Vl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):nx.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new uh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new sz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new sz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new lo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,nx.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class ri{constructor(t=[],n,r,i=mu.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=uz(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new ri(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new ri(n,this.metadata)}assign(...t){const n=t[0]instanceof ri?t[0]:Array.isArray(t[0])?new ri(t[0]):new ri(t),r=[...this.fields],i=$N($N(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:$N($N(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=uz(s,new Map);return new ri([...r,...s],i,new Map([...this.dictionaries,...o]))}}ri.prototype.fields=null;ri.prototype.metadata=null;ri.prototype.dictionaries=null;let mi=class az{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new az(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],az.new(n,r,i,s)}};mi.prototype.type=null;mi.prototype.name=null;mi.prototype.nullable=null;mi.prototype.metadata=null;function $N(e,t){return new Map([...e||new Map,...t||new Map])}function uz(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(zn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&uz(s.children,t)}return t}var omt=UTe,amt=B3;class lz{static decode(t){t=new amt(ci(t));const n=Vl.getRootAsFooter(t),r=ri.decode(n.schema(),new Map,n.version());return new umt(r,n)}static encode(t){const n=new omt,r=ri.encode(n,t.schema);Vl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())hy.encode(n,o);const i=n.endVector();Vl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())hy.encode(n,o);const s=n.endVector();return Vl.startFooter(n),Vl.addSchema(n,r),Vl.addVersion(n,mu.V5),Vl.addRecordBatches(n,i),Vl.addDictionaries(n,s),Vl.finishFooterBuffer(n,Vl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=mu.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class umt extends lz{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return hy.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return hy.decode(n)}return null}}class hy{static decode(t){return new hy(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return sz.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=wd(r),this.bodyLength=wd(n)}}const LN=Object.freeze({done:!0,value:void 0});class VTe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class lmt extends VTe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return fm(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(LN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return vle.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return vle.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return fm(this,void 0,void 0,function*(){return yield this.abort(t),LN})}return(t){return fm(this,void 0,void 0,function*(){return yield this.close(),LN})}read(t){return fm(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return fm(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(LN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class f9 extends lmt{write(t){if((t=ci(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?nz(this.toUint8Array(!0)):this.toUint8Array(!1).then(nz)}toUint8Array(t=!1){return t?Jh(this._values)[0]:fm(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=u2(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Jh(o,a)[0]})}}class HTe extends d6{constructor(t){super(t),this._values=new f6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,ci(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class cmt extends Nl{constructor(t){super(t),this._values=new FTe}setValue(t,n){this._values.set(t,+n)}}class h6 extends wg{}h6.prototype._setValue=KSe;class qTe extends h6{}qTe.prototype._setValue=BY;class WTe extends h6{}WTe.prototype._setValue=UY;class GTe extends wg{}GTe.prototype._setValue=JSe;class fmt extends Nl{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new fy(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=W3({type:this.type.indices,nullValues:n}),this.dictionary=W3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class YTe extends wg{}YTe.prototype._setValue=YSe;class dmt extends Nl{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new tx(this.type.listSize,new mi(n,t.type,!0)),r}}class p6 extends wg{setValue(t,n){this._values.set(t,n)}}class hmt extends p6{setValue(t,n){super.setValue(t,qSe(n))}}class pmt extends p6{}class mmt extends p6{}class m6 extends wg{}m6.prototype._setValue=tTe;class KTe extends m6{}KTe.prototype._setValue=XY;class XTe extends m6{}XTe.prototype._setValue=QY;class mS extends wg{}mS.prototype._setValue=nTe;class QTe extends mS{}QTe.prototype._setValue=JY;class JTe extends mS{}JTe.prototype._setValue=ZY;class ZTe extends mS{}ZTe.prototype._setValue=eK;class eCe extends mS{}eCe.prototype._setValue=tK;class Eg extends wg{setValue(t,n){this._values.set(t,n)}}class gmt extends Eg{}class ymt extends Eg{}class vmt extends Eg{}class bmt extends Eg{}class _mt extends Eg{}class wmt extends Eg{}class Emt extends Eg{}class xmt extends Eg{}class Smt extends d6{constructor(t){super(t),this._offsets=new jTe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ex(new mi(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class Tmt extends d6{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new xA(new mi(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class Cmt extends Nl{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class Amt extends Nl{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new $a([...this.type.children,new mi(n,t.type,!0)]),r}}class gS extends wg{}gS.prototype._setValue=XSe;class tCe extends gS{}tCe.prototype._setValue=zY;class nCe extends gS{}nCe.prototype._setValue=VY;class rCe extends gS{}rCe.prototype._setValue=HY;class iCe extends gS{}iCe.prototype._setValue=qY;class yS extends wg{}yS.prototype._setValue=QSe;class sCe extends yS{}sCe.prototype._setValue=WY;class oCe extends yS{}oCe.prototype._setValue=GY;class aCe extends yS{}aCe.prototype._setValue=YY;class uCe extends yS{}uCe.prototype._setValue=KY;class uK extends Nl{constructor(t){super(t),this._typeIds=new qI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new mi(n,t.type)];return this.type=new EA(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Imt extends uK{}class kmt extends uK{constructor(t){super(t),this._offsets=new qI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class lCe extends d6{constructor(t){super(t),this._values=new f6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,TY(n))}_flushPending(t,n){}}lCe.prototype._flushPending=HTe.prototype._flushPending;class Rmt extends er{visitNull(){return Cmt}visitBool(){return cmt}visitInt(){return Eg}visitInt8(){return gmt}visitInt16(){return ymt}visitInt32(){return vmt}visitInt64(){return bmt}visitUint8(){return _mt}visitUint16(){return wmt}visitUint32(){return Emt}visitUint64(){return xmt}visitFloat(){return p6}visitFloat16(){return hmt}visitFloat32(){return pmt}visitFloat64(){return mmt}visitUtf8(){return lCe}visitBinary(){return HTe}visitFixedSizeBinary(){return YTe}visitDate(){return h6}visitDateDay(){return qTe}visitDateMillisecond(){return WTe}visitTimestamp(){return gS}visitTimestampSecond(){return tCe}visitTimestampMillisecond(){return nCe}visitTimestampMicrosecond(){return rCe}visitTimestampNanosecond(){return iCe}visitTime(){return yS}visitTimeSecond(){return sCe}visitTimeMillisecond(){return oCe}visitTimeMicrosecond(){return aCe}visitTimeNanosecond(){return uCe}visitDecimal(){return GTe}visitList(){return Smt}visitStruct(){return Amt}visitUnion(){return uK}visitDenseUnion(){return kmt}visitSparseUnion(){return Imt}visitDictionary(){return fmt}visitInterval(){return m6}visitIntervalDayTime(){return KTe}visitIntervalYearMonth(){return XTe}visitDuration(){return mS}visitDurationSecond(){return QTe}visitDurationMillisecond(){return JTe}visitDurationMicrosecond(){return ZTe}visistDurationNanosecond(){return eCe}visitFixedSizeList(){return dmt}visitMap(){return Tmt}}const Nmt=new Rmt;class bn extends er{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function Pu(e,t){return t instanceof e.constructor}function WI(e,t){return e===t||Pu(e,t)}function xg(e,t){return e===t||Pu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function g6(e,t){return e===t||Pu(e,t)&&e.precision===t.precision}function Pmt(e,t){return e===t||Pu(e,t)&&e.byteWidth===t.byteWidth}function lK(e,t){return e===t||Pu(e,t)&&e.unit===t.unit}function GI(e,t){return e===t||Pu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function YI(e,t){return e===t||Pu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Dmt(e,t){return e===t||Pu(e,t)&&e.children.length===t.children.length&&py.compareManyFields(e.children,t.children)}function Omt(e,t){return e===t||Pu(e,t)&&e.children.length===t.children.length&&py.compareManyFields(e.children,t.children)}function cK(e,t){return e===t||Pu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&py.compareManyFields(e.children,t.children)}function Mmt(e,t){return e===t||Pu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&py.visit(e.indices,t.indices)&&py.visit(e.dictionary,t.dictionary)}function fK(e,t){return e===t||Pu(e,t)&&e.unit===t.unit}function KI(e,t){return e===t||Pu(e,t)&&e.unit===t.unit}function $mt(e,t){return e===t||Pu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&py.compareManyFields(e.children,t.children)}function Lmt(e,t){return e===t||Pu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&py.compareManyFields(e.children,t.children)}bn.prototype.visitNull=WI;bn.prototype.visitBool=WI;bn.prototype.visitInt=xg;bn.prototype.visitInt8=xg;bn.prototype.visitInt16=xg;bn.prototype.visitInt32=xg;bn.prototype.visitInt64=xg;bn.prototype.visitUint8=xg;bn.prototype.visitUint16=xg;bn.prototype.visitUint32=xg;bn.prototype.visitUint64=xg;bn.prototype.visitFloat=g6;bn.prototype.visitFloat16=g6;bn.prototype.visitFloat32=g6;bn.prototype.visitFloat64=g6;bn.prototype.visitUtf8=WI;bn.prototype.visitBinary=WI;bn.prototype.visitFixedSizeBinary=Pmt;bn.prototype.visitDate=lK;bn.prototype.visitDateDay=lK;bn.prototype.visitDateMillisecond=lK;bn.prototype.visitTimestamp=GI;bn.prototype.visitTimestampSecond=GI;bn.prototype.visitTimestampMillisecond=GI;bn.prototype.visitTimestampMicrosecond=GI;bn.prototype.visitTimestampNanosecond=GI;bn.prototype.visitTime=YI;bn.prototype.visitTimeSecond=YI;bn.prototype.visitTimeMillisecond=YI;bn.prototype.visitTimeMicrosecond=YI;bn.prototype.visitTimeNanosecond=YI;bn.prototype.visitDecimal=WI;bn.prototype.visitList=Dmt;bn.prototype.visitStruct=Omt;bn.prototype.visitUnion=cK;bn.prototype.visitDenseUnion=cK;bn.prototype.visitSparseUnion=cK;bn.prototype.visitDictionary=Mmt;bn.prototype.visitInterval=fK;bn.prototype.visitIntervalDayTime=fK;bn.prototype.visitIntervalYearMonth=fK;bn.prototype.visitDuration=KI;bn.prototype.visitDurationSecond=KI;bn.prototype.visitDurationMillisecond=KI;bn.prototype.visitDurationMicrosecond=KI;bn.prototype.visitDurationNanosecond=KI;bn.prototype.visitFixedSizeList=$mt;bn.prototype.visitMap=Lmt;const py=new bn;function cz(e,t){return py.compareSchemas(e,t)}function W3(e){const t=e.type,n=new(Nmt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(W3(Object.assign(Object.assign({},l),{type:u})))}}return n}function d9(e,t){return Fmt(e,t.map(n=>n.data.concat()))}function Fmt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=jmt(n,o,c,t,i),o>0&&(r[s++]=Da({type:new $a(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Yl(e,f))]}function jmt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Da({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var cCe;class il{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new ri([]),this._offsets=[0],this;let i,s;t[0]instanceof ri&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Yl)return[u];if(u instanceof il)return u.batches;if(u instanceof li){if(u.type instanceof $a)return[new Yl(new ri(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new zr([u[h]])),f=new ri(l.map((h,p)=>new mi(String(h),c[p].type))),[,d]=d9(f,c);return d.length===0?[new Yl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new ri([]),!(i instanceof ri))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Yl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!cz(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??ITe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=ATe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?aK.visit(new zr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new il(n,r.map(i=>new Yl(n,i)))}slice(t,n){const r=this.schema;[t,n]=STe({length:this.numRows},t,n);const i=kTe(this.data,this._offsets,t,n);return new il(r,i.map(s=>new Yl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Da({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new zr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new zr([Da({type:new Xm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=d9(r,a)}return new il(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new il(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new il(...d9(s,o))}}cCe=Symbol.toStringTag;il[cCe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=cE(oK),e.get=cE(Sl.getVisitFn(pe.Struct)),e.set=RTe(ff.getVisitFn(pe.Struct)),e.indexOf=NTe(F3.getVisitFn(pe.Struct)),e.getByteLength=cE(tp.getVisitFn(pe.Struct)),"Table"))(il.prototype);var fCe;let Yl=class $C{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof ri))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Da({nullCount:0,type:new $a(this.schema.fields),children:this.schema.fields.map(n=>Da({type:n.type,nullCount:0}))})]=t,!(this.data instanceof li))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Cle(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=mi.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new ri(r),a=Da({type:new $a(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Cle(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=dCe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Sl.visit(this.data,t)}set(t,n){return ff.visit(this.data,t,n)}indexOf(t,n){return F3.visit(this.data,t,n)}getByteLength(t){return tp.visit(this.data,t)}[Symbol.iterator](){return aK.visit(new zr([this.data]))}toArray(){return[...this]}concat(...t){return new il(this.schema,[this,...t])}slice(t,n){const[r]=new zr([this.data]).slice(t,n).data;return new $C(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new zr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new zr([Da({type:new Xm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new ri(s,new Map(this.schema.metadata)),i=Da({type:new $a(s),children:o})}return new $C(r,i)}select(t){const n=this.schema.select(t),r=new $a(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new $C(n,Da({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Da({type:new $a(n.fields),length:this.numRows,children:r});return new $C(n,i)}};fCe=Symbol.toStringTag;Yl[fCe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Yl.prototype);function Cle(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Da({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Da({type:new $a(i),length:n,children:s})]}function dCe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])dCe(a.children,l==null?void 0:l.children,n);if(zn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class Bmt extends Yl{constructor(t){const n=t.fields.map(i=>Da({type:i.type})),r=Da({type:new $a(t.fields),nullCount:0,children:n});super(t,r)}}var G3;(function(e){e[e.BUFFER=0]="BUFFER"})(G3||(G3={}));var Y3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(Y3||(Y3={}));class d0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new d0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+bi),(n||new d0).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Y3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):G3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,Y3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,G3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return d0.startBodyCompression(t),d0.addCodec(t,n),d0.addMethod(t,r),d0.endBodyCompression(t)}}let hCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},pCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},im=class fz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new fz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+bi),(n||new fz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new pCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new hCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new d0).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},Rw=class dz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new dz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+bi),(n||new dz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new im).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var K3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(K3||(K3={}));let Zg=class nh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new nh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+bi),(n||new nh).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):nx.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):K3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new lo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,nx.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,K3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return nh.startMessage(t),nh.addVersion(t,n),nh.addHeaderType(t,r),nh.addHeader(t,i),nh.addBodyLength(t,s),nh.addCustomMetadata(t,o),nh.endMessage(t)}};class Umt extends er{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return k1.startNull(n),k1.endNull(n)}visitInt(t,n){return Gl.startInt(n),Gl.addBitWidth(n,t.bitWidth),Gl.addIsSigned(n,t.isSigned),Gl.endInt(n)}visitFloat(t,n){return Eh.startFloatingPoint(n),Eh.addPrecision(n,t.precision),Eh.endFloatingPoint(n)}visitBinary(t,n){return C1.startBinary(n),C1.endBinary(n)}visitBool(t,n){return A1.startBool(n),A1.endBool(n)}visitUtf8(t,n){return N1.startUtf8(n),N1.endUtf8(n)}visitDecimal(t,n){return el.startDecimal(n),el.addScale(n,t.scale),el.addPrecision(n,t.precision),el.addBitWidth(n,t.bitWidth),el.endDecimal(n)}visitDate(t,n){return kD.startDate(n),kD.addUnit(n,t.unit),kD.endDate(n)}visitTime(t,n){return OC.startTime(n),OC.addUnit(n,t.unit),OC.addBitWidth(n,t.bitWidth),OC.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return MC.startTimestamp(n),MC.addUnit(n,t.unit),r!==void 0&&MC.addTimezone(n,r),MC.endTimestamp(n)}visitInterval(t,n){return xh.startInterval(n),xh.addUnit(n,t.unit),xh.endInterval(n)}visitDuration(t,n){return bh.startDuration(n),bh.addUnit(n,t.unit),bh.endDuration(n)}visitList(t,n){return I1.startList(n),I1.endList(n)}visitStruct(t,n){return R1.startStruct_(n),R1.endStruct_(n)}visitUnion(t,n){t1.startTypeIdsVector(n,t.typeIds.length);const r=t1.createTypeIdsVector(n,t.typeIds);return t1.startUnion(n),t1.addMode(n,t.mode),t1.addTypeIds(n,r),t1.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return mm.startDictionaryEncoding(n),mm.addId(n,BigInt(t.id)),mm.addIsOrdered(n,t.isOrdered),r!==void 0&&mm.addIndexType(n,r),mm.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return _h.startFixedSizeBinary(n),_h.addByteWidth(n,t.byteWidth),_h.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return wh.startFixedSizeList(n),wh.addListSize(n,t.listSize),wh.endFixedSizeList(n)}visitMap(t,n){return RD.startMap(n),RD.addKeysSorted(n,t.keysSorted),RD.endMap(n)}}const h9=new Umt;function zmt(e,t=new Map){return new ri(Hmt(e,t),PD(e.metadata),t)}function mCe(e){return new hc(e.count,gCe(e.columns),yCe(e.columns))}function Vmt(e){return new np(mCe(e.data),e.id,e.isDelta)}function Hmt(e,t){return(e.fields||[]).filter(Boolean).map(n=>mi.fromJSON(n,t))}function Ale(e,t){return(e.children||[]).filter(Boolean).map(n=>mi.fromJSON(n,t))}function gCe(e){return(e||[]).reduce((t,n)=>[...t,new my(n.count,qmt(n.VALIDITY)),...gCe(n.children)],[])}function yCe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Ih(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Ih(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Ih(t.length,i.OFFSET.length)),i.DATA&&t.push(new Ih(t.length,i.DATA.length)),t=yCe(i.children,t)}return t}function qmt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function Wmt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=kle(e,Ale(e,t)),i=new mi(e.name,o,e.nullable,PD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Ile(r):new ly,a=new fy(t.get(n),r,n,s.isOrdered),i=new mi(e.name,a,e.nullable,PD(e.metadata))):(r=(r=s.indexType)?Ile(r):new ly,t.set(n,o=kle(e,Ale(e,t))),a=new fy(o,r,n,s.isOrdered),i=new mi(e.name,a,e.nullable,PD(e.metadata))),i||null}function PD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Ile(e){return new Iu(e.isSigned,e.bitWidth)}function kle(e,t){const n=e.type.name;switch(n){case"NONE":return new Xm;case"null":return new Xm;case"binary":return new _A;case"utf8":return new QE;case"bool":return new wA;case"list":return new ex((t||[])[0]);case"struct":return new $a(t||[]);case"struct_":return new $a(t||[])}switch(n){case"int":{const r=e.type;return new Iu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new cy(fa[r.precision])}case"decimal":{const r=e.type;return new D3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new JE(Zh[r.unit])}case"time":{const r=e.type;return new Qm(mn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new O3(mn[r.unit],r.timezone)}case"interval":{const r=e.type;return new ZE(ep[r.unit])}case"duration":{const r=e.type;return new M3(mn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new EA(xl[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new $3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new tx(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new xA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Gmt=UTe,Ymt=B3;class Sh{static fromJSON(t,n){const r=new Sh(0,mu.V5,n);return r._createHeader=Kmt(t,n),r}static decode(t){t=new Ymt(ci(t));const n=Zg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Sh(r,i,s);return o._createHeader=Xmt(n,s),o}static encode(t){const n=new Gmt;let r=-1;return t.isSchema()?r=ri.encode(n,t.header()):t.isRecordBatch()?r=hc.encode(n,t.header()):t.isDictionaryBatch()&&(r=np.encode(n,t.header())),Zg.startMessage(n),Zg.addVersion(n,mu.V5),Zg.addHeader(n,r),Zg.addHeaderType(n,t.headerType),Zg.addBodyLength(n,BigInt(t.bodyLength)),Zg.finishMessageBuffer(n,Zg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof ri)return new Sh(0,mu.V5,Do.Schema,t);if(t instanceof hc)return new Sh(n,mu.V5,Do.RecordBatch,t);if(t instanceof np)return new Sh(n,mu.V5,Do.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Do.Schema}isRecordBatch(){return this.headerType===Do.RecordBatch}isDictionaryBatch(){return this.headerType===Do.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=wd(t)}}class hc{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=wd(t)}}class np{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=wd(n)}}class Ih{constructor(t,n){this.offset=wd(t),this.length=wd(n)}}class my{constructor(t,n){this.length=wd(t),this.nullCount=wd(n)}}function Kmt(e,t){return()=>{switch(t){case Do.Schema:return ri.fromJSON(e);case Do.RecordBatch:return hc.fromJSON(e);case Do.DictionaryBatch:return np.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Do[t]}, type: ${t} }`)}}function Xmt(e,t){return()=>{switch(t){case Do.Schema:return ri.decode(e.header(new uh),new Map,e.version());case Do.RecordBatch:return hc.decode(e.header(new im),e.version());case Do.DictionaryBatch:return np.decode(e.header(new Rw),e.version())}throw new Error(`Unrecognized Message type: { name: ${Do[t]}, type: ${t} }`)}}mi.encode=agt;mi.decode=sgt;mi.fromJSON=Wmt;ri.encode=ogt;ri.decode=Qmt;ri.fromJSON=zmt;hc.encode=ugt;hc.decode=Jmt;hc.fromJSON=mCe;np.encode=lgt;np.decode=Zmt;np.fromJSON=Vmt;my.encode=cgt;my.decode=tgt;Ih.encode=fgt;Ih.decode=egt;function Qmt(e,t=new Map,n=mu.V5){const r=igt(e,t);return new ri(r,DD(e),t,n)}function Jmt(e,t=mu.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new hc(e.length(),ngt(e),rgt(e,t))}function Zmt(e,t=mu.V5){return new np(hc.decode(e.data(),t),e.id(),e.isDelta())}function egt(e){return new Ih(e.offset(),e.length())}function tgt(e){return new my(e.length(),e.nullCount())}function ngt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=my.decode(n));return t}function rgt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<mu.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Ih.decode(r));return n}function igt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=mi.decode(r,t));return n}function Rle(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=mi.decode(r,t));return n}function sgt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Ple(e,Rle(e,t)),r=new mi(e.name(),i,e.nullable(),DD(e))):t.has(n=wd(a.id()))?(s=(s=a.indexType())?Nle(s):new ly,o=new fy(t.get(n),s,n,a.isOrdered()),r=new mi(e.name(),o,e.nullable(),DD(e))):(s=(s=a.indexType())?Nle(s):new ly,t.set(n,i=Ple(e,Rle(e,t))),o=new fy(i,s,n,a.isOrdered()),r=new mi(e.name(),o,e.nullable(),DD(e))),r||null}function DD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Nle(e){return new Iu(e.isSigned(),e.bitWidth())}function Ple(e,t){const n=e.typeType();switch(n){case Ki.NONE:return new Xm;case Ki.Null:return new Xm;case Ki.Binary:return new _A;case Ki.Utf8:return new QE;case Ki.Bool:return new wA;case Ki.List:return new ex((t||[])[0]);case Ki.Struct_:return new $a(t||[])}switch(n){case Ki.Int:{const r=e.type(new Gl);return new Iu(r.isSigned(),r.bitWidth())}case Ki.FloatingPoint:{const r=e.type(new Eh);return new cy(r.precision())}case Ki.Decimal:{const r=e.type(new el);return new D3(r.scale(),r.precision(),r.bitWidth())}case Ki.Date:{const r=e.type(new kD);return new JE(r.unit())}case Ki.Time:{const r=e.type(new OC);return new Qm(r.unit(),r.bitWidth())}case Ki.Timestamp:{const r=e.type(new MC);return new O3(r.unit(),r.timezone())}case Ki.Interval:{const r=e.type(new xh);return new ZE(r.unit())}case Ki.Duration:{const r=e.type(new bh);return new M3(r.unit())}case Ki.Union:{const r=e.type(new t1);return new EA(r.mode(),r.typeIdsArray()||[],t||[])}case Ki.FixedSizeBinary:{const r=e.type(new _h);return new $3(r.byteWidth())}case Ki.FixedSizeList:{const r=e.type(new wh);return new tx(r.listSize(),(t||[])[0])}case Ki.Map:{const r=e.type(new RD);return new xA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ki[n]}" (${n})`)}function ogt(e,t){const n=t.fields.map(s=>mi.encode(e,s));uh.startFieldsVector(e,n.length);const r=uh.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?uh.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return lo.startKeyValue(e),lo.addKey(e,a),lo.addValue(e,u),lo.endKeyValue(e)})):-1;return uh.startSchema(e),uh.addFields(e,r),uh.addEndianness(e,dgt?rx.Little:rx.Big),i!==-1&&uh.addCustomMetadata(e,i),uh.endSchema(e)}function agt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;zn.isDictionary(s)?(o=s.dictionary.typeId,i=h9.visit(s,e),r=h9.visit(s.dictionary,e)):r=h9.visit(s,e);const a=(s.children||[]).map(c=>mi.encode(e,c)),u=Hc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Hc.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return lo.startKeyValue(e),lo.addKey(e,d),lo.addValue(e,h),lo.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Hc.startField(e),Hc.addType(e,r),Hc.addTypeType(e,o),Hc.addChildren(e,u),Hc.addNullable(e,!!t.nullable),n!==-1&&Hc.addName(e,n),i!==-1&&Hc.addDictionary(e,i),l!==-1&&Hc.addCustomMetadata(e,l),Hc.endField(e)}function ugt(e,t){const n=t.nodes||[],r=t.buffers||[];im.startNodesVector(e,n.length);for(const o of n.slice().reverse())my.encode(e,o);const i=e.endVector();im.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Ih.encode(e,o);const s=e.endVector();return im.startRecordBatch(e),im.addLength(e,BigInt(t.length)),im.addNodes(e,i),im.addBuffers(e,s),im.endRecordBatch(e)}function lgt(e,t){const n=hc.encode(e,t.data);return Rw.startDictionaryBatch(e),Rw.addId(e,BigInt(t.id)),Rw.addIsDelta(e,t.isDelta),Rw.addData(e,n),Rw.endDictionaryBatch(e)}function cgt(e,t){return pCe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function fgt(e,t){return hCe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const dgt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),hz="ARROW1",dK=new Uint8Array(hz.length);for(let e=0;e<hz.length;e+=1)dK[e]=hz.codePointAt(e);dK.length;class Os extends er{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Yl?s.data.children:s.data),r=new Os;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof zr)return this.visitMany(t.data),this;const{type:n}=t;if(!zn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(zn.isUnion(n))this.nodes.push(new my(r,0));else{const{nullCount:i}=t;zn.isNull(n)||pd.call(this,i<=0?new Uint8Array(0):L3(t.offset,r,t.nullBitmap)),this.nodes.push(new my(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function pd(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Ih(this._byteLength,t)),this._byteLength+=t,this}function hgt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(pd.call(this,i),n.mode===xl.Sparse)return pz.call(this,e);if(n.mode===xl.Dense){if(e.offset<=0)return pd.call(this,s),pz.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);pd.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function pgt(e){let t;return e.nullCount>=e.length?pd.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?pd.call(this,L3(e.offset,e.length,t)):pd.call(this,CTe(e.values))}function Sg(e){return pd.call(this,e.values.subarray(0,e.length*e.stride))}function vCe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return pd.call(this,_Se(-i,t+1,r)),pd.call(this,n.subarray(i,i+o)),this}function hK(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return pd.call(this,_Se(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function pz(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Os.prototype.visitBool=pgt;Os.prototype.visitInt=Sg;Os.prototype.visitFloat=Sg;Os.prototype.visitUtf8=vCe;Os.prototype.visitBinary=vCe;Os.prototype.visitFixedSizeBinary=Sg;Os.prototype.visitDate=Sg;Os.prototype.visitTimestamp=Sg;Os.prototype.visitTime=Sg;Os.prototype.visitDecimal=Sg;Os.prototype.visitList=hK;Os.prototype.visitStruct=pz;Os.prototype.visitUnion=hgt;Os.prototype.visitInterval=Sg;Os.prototype.visitDuration=Sg;Os.prototype.visitFixedSizeList=hK;Os.prototype.visitMap=hK;class bCe extends VTe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new f9,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ev(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return a6(t)?t.then(n=>this.writeAll(n)):u6(t)?yK(this,t):gK(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof f9?this._sink=t:(this._sink=new f9,t&&_ht(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&wht(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!cz(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof il&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Yl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!cz(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Yl?t instanceof Bmt||this._writeRecordBatch(t):t instanceof il?this.writeAll(t.batches):CY(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Sh.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Do.RecordBatch?this._recordBatchBlocks.push(new hy(a,t.bodyLength,this._position)):t.headerType===Do.DictionaryBatch&&this._dictionaryBlocks.push(new hy(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=ci(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Sh.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(dK)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Os.assemble(t),o=new hc(t.numRows,r,i),a=Sh.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Os.assemble(new zr([t])),u=new hc(t.length,s,o),l=new np(u,n,r),c=Sh.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class pK extends bCe{static writeAll(t,n){const r=new pK(n);return a6(t)?t.then(i=>r.writeAll(i)):u6(t)?yK(r,t):gK(r,t)}}class mK extends bCe{static writeAll(t){const n=new mK;return a6(t)?t.then(r=>n.writeAll(r)):u6(t)?yK(n,t):gK(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=lz.encode(new lz(t,mu.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function gK(e,t){let n=t;t instanceof il&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function yK(e,t){var n,r,i,s,o,a,u;return fm(this,void 0,void 0,function*(){try{for(n=!0,r=u2(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function mgt(e,t="stream"){return(t==="stream"?pK:mK).writeAll(e).toUint8Array(!0)}function vK(e,t=1){return(e*t+63&-64||64)/t}function gy(e,t,n=e.BYTES_PER_ELEMENT){return new e(vK(t,n))}function bK(e){return e instanceof li?e:new li(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function ggt(e){return new zr([bK(e)])}const _K=new TextEncoder;function ygt(e,t,n){const r=_K.encode(n);return e.set(r,t),r.length}function vgt(e,t,n){return _K.encodeInto(n,e.subarray(t)).written}const bgt=_K.encodeInto?vgt:ygt;function Dle(e,t){const n=gy(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function _gt(e,t){const n=gy(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function wgt(e,t){const n=gy(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Egt(e,t){const n=gy(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function xgt(e){const t=W3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function Sgt(e,t,n){const r=gy(Int32Array,t+1),i=gy(Uint8Array,3*n);let s=0;return{set(o,a){s+=bgt(i,s,o),r[a+1]=s},data:()=>{const o=vK(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function Tgt(e,t){const n=[],r=gy(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:Cgt(e.dictionary,n,o)})}}function Cgt(e,t,n){const r=Sgt(e,t.length,n);return t.forEach(r.set),ggt(r.data())}function Agt(e,t){const n=gy(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function Igt(e,t,n=!0){let r;switch(e.typeId){case pe.Int:r=e.bitWidth<64?Dle:null;break;case pe.Float:r=e.precision>0?Dle:null;break;case pe.Dictionary:r=e.dictionary.typeId===pe.Utf8&&e.indices.typeId===pe.Int&&e.indices.bitWidth<64?Tgt:null;break;case pe.Bool:r=_gt;break;case pe.Date:r=e.unit?Egt:wgt;break}return r==null?xgt(e):n?Agt(r(e,t),t):r(e,t)}function kgt(e,t){const n=e.length,r=vK(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),bK({type:t,length:n,buffers:[null,i]})}function _Ce(e,t,n,r,i=!0){const s=Igt(r,e,i);return t(n,s.set),bK(s.data())}function wK(e){if(e instanceof zn||e==null)return e;switch(e){case pe.Binary:return new _A;case pe.Bool:return new wA;case pe.DateDay:return new $ht;case pe.DateMillisecond:case pe.Date:return new Lht;case pe.Dictionary:return new fy(new QE,new ly);case pe.Float16:return new zSe;case pe.Float32:return new $Y;case pe.Float64:case pe.Float:return new LY;case pe.Int8:return new kY;case pe.Int16:return new RY;case pe.Int32:case pe.Int:return new ly;case pe.Int64:return new NY;case pe.IntervalDayTime:return new zht;case pe.Interval:case pe.IntervalYearMonth:return new Vht;case pe.Null:return new Xm;case pe.TimeMicrosecond:return new Bht;case pe.TimeMillisecond:case pe.Time:return new jht;case pe.TimeNanosecond:return new Uht;case pe.TimeSecond:return new Fht;case pe.Uint8:return new PY;case pe.Uint16:return new DY;case pe.Uint32:return new OY;case pe.Uint64:return new MY;case pe.Utf8:return new QE;default:Xn(`Unsupported type code: ${Qh(e)}. Use a data type constructor instead?`)}}function Rgt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function wCe(e,t){const n=mz();return e(t,n.add),n}function mz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Km(t))++e.dates,Rgt(t)&&++e.utcdays;else if(T1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=mz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=mz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return wK(Ngt(e))}};return e}function Ngt(e){const t=e.count-e.nulls;if(t===0)return pe.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?pe.Float64:n<128?pe.Int8:n<32768?pe.Int16:pe.Int32:n>=2**32?pe.Float64:n<256?pe.Uint8:n<65536?pe.Uint16:pe.Uint32}else{if(e.nums===t)return pe.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?pe.Int64:Xn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?pe.Uint64:Xn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return pe.Bool;if(e.utcdays===t)return pe.DateDay;if(e.dates===t)return pe.DateMillisecond;if(e.arrays===t){const n=mi.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new tx(e.minlen,n):new ex(n)}else if(e.structs===t){const n=e.struct_prof;return new $a(Object.keys(n).map(r=>mi.new(r,n[r].type(),!0)))}else{if(e.strings>0)return pe.Dictionary;Xn("Type inference failure")}}}}function Pgt(e,t,n,r,i,s=!0){if(i=wK(i),!i){const o=wCe(r,t);s=o.nulls>0,i=o.type()}return _Ce(n,r,t,i,s)}function Dgt(e,t,n,r,i,s=!0){i=wK(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=Ogt(o);if(u&&a&&Ole(u.type,i))return u;const l=o.data;if(VI(l)){const c=Mgt(l);if(a&&c&&Ole(c,i))return kgt(l,c);i=i||c,s=!1}if(!i){const c=wCe(r,o);s=c.nulls>0,i=c.type()}return _Ce(n,r,o,i,s)}function Ogt(e){return e instanceof zr?e:e.vector instanceof zr?e.vector:null}function Mgt(e){const n={Float32Array:$Y,Float64Array:LY,Int8Array:kY,Int16Array:RY,Int32Array:ly,Uint8Array:PY,Uint16Array:DY,Uint32Array:OY,BigInt64Array:NY,BigUint64Array:MY}[e.constructor.name];return n?new n:null}function Ole(e,t){return!e||!t?!0:e.compareTo(t)}function $gt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function Lgt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&T1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const Fgt=()=>Xn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function jgt(){try{return il}catch{Fgt()}}function ECe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=Bgt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Xn("Column length mismatch"),a[l]=c});const u=jgt();return new u(a)}function Bgt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=Vi(n)?n(e):Ur(n)?n:null;if(Ur(e))return{dataFrom:Pgt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:$gt(e,r,i)};if(Ugt(e))return{dataFrom:Dgt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:Lgt(e,r,i)};Xn("Unsupported input data type")}function Ugt(e){return e&&Vi(e.reify)}function zgt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return mgt(ECe(e,r),n)}function Vgt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function Hgt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Km(u))++i,Vgt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function y6(e,t){return Vi(t)?t(e):t||e.columnNames()}function xCe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=Hgt(qgt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function qgt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function EK(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function Wgt(e,t={}){const n=y6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Km(l)?s6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return EK(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function SCe(e,t={}){if(Vi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Km(e))return t.utc?s6(e):Wxe(e);{const r=JSON.stringify(e,(s,o)=>VI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function v6(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function Ggt(e,t={}){const n=y6(e,t.columns),{align:r,format:i}=xCe(e,n,t),s=Ygt(t),o=t.null,a=g=>g==="c"?"center":g==="r"?"right":"left",u=g=>g.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(g,y)=>u(SCe(g,y)),c=o?(g,y)=>g==null?o(g):l(g,y):l;let f=-1,d=-1;const h=(g,y,b)=>{const _=b?a(r[y]):"",E=s[g]&&s[g](y,d,f)||"",C=(_?`text-align: ${_};`+(E?" ":""):"")+E;return`<${g}${C?` style="${C}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(g=>`${h("th",g,1)}${g}</th>`).join("")+"</tr></thead>"+h("tbody");return EK(e,n,t.limit,t.offset,{row(g){f=g,p+=(++d?"</tr>":"")+h("tr")},cell(g,y){p+=h("td",y,1)+c(g,i[y])+"</td>"}}),p+"</tr></tbody></table>"}function Ygt(e){return v6(e.style,t=>Vi(t)?t:()=>t)}function Kgt(e,t=!0,n=!1){return e===void 0||e?t:n}const Xgt=e=>Km(e)?s6(e,!0):e;function Qgt(e,t={}){const n=Kgt(t.schema),r=t.format||{},i=y6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||Xgt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function Jgt(e,t={}){const n=y6(e,t.columns),{align:r,format:i}=xCe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return EK(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(SCe(u,i[l]))+"|"}}),a+`
`}function TCe(e,t){for(const[n,r]of o6(t))e.set(n,r);return e}function Zgt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Jm(e,t,n=new Map){return t=Au(t)?e.columnName(t):t,ya(t)?n.set(t,t):Ur(t)?t.forEach(r=>Jm(e,r,n)):Vi(t)?Jm(e,t(e),n):qa(t)?TCe(n,t):Xn(`Invalid column selection: ${Qh(t)}`),n}function b6(e,t){return e.toObject=t,e}function CCe(e){return Ur(e)?e.map(CCe):e&&e.toObject?e.toObject():e}function ix(){return b6(e=>e.columnNames(),()=>({all:[]}))}function ACe(...e){return e=e.flat(),b6(t=>{const n=Jm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:CCe(e)}))}function e0t(e,t){return b6(n=>{let r=Au(e)?e:n.columnIndex(e),i=Au(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function t0t(e){return ya(e)&&(e=RegExp(Zgt(e))),b6(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function n0t(e){return VI(e.data)?e.data.constructor:Array}class gm extends bdt{static from(t,n){return new gm(Edt(t,n),n)}static new(t,n){if(t instanceof gm)return t;const r={},i=[];for(const[s,o]of o6(t))r[s]=o,i.push(s);return new gm(r,n||i)}constructor(t,n,r,i,s,o){v6(t,wdt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new gm(t||this._data,n||(t?null:this._names),o,i!==void 0?i:Qdt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=xc(r).groupby(r.groups());return t.forEach(s=>{s=gm.new(s),s.numRows()!==n&&Xn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Xn(`Unrecognized column: ${t}`)}object(t=0){return Mle(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Jm(this,t.columns||ix()),o=ySe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),Zdt(this,u,a,n)}return a}*[Symbol.iterator](){const t=Mle(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(n0t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=Jdt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return ECe(this,t)}toArrowBuffer(t){return zgt(this,t)}toCSV(t){return Wgt(this,t)}toHTML(t){return Ggt(this,t)}toJSON(t){return Qgt(this,t)}toMarkdown(t){return Jgt(this,t)}}function Mle(e){let t=e._builder;if(!t){const n=ySe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class r0t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function kr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=i0t[e.type];s&&s(e,t,n)}const FN=(e,t,n)=>{kr(e.argument,t,n,e)},p9=(e,t,n)=>{kr(e.left,t,n,e),kr(e.right,t,n,e)},$le=(e,t,n)=>{kr(e.test,t,n,e),kr(e.consequent,t,n,e),e.alternate&&kr(e.alternate,t,n,e)},m9=(e,t,n)=>{lh(e.params,t,n,e),kr(e.body,t,n,e)},Lle=(e,t,n)=>{kr(e.callee,t,n,e),lh(e.arguments,t,n,e)},lh=(e,t,n,r)=>{e.forEach(i=>kr(i,t,n,r))},i0t={TemplateLiteral:(e,t,n)=>{lh(e.expressions,t,n,e),lh(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{kr(e.object,t,n,e),kr(e.property,t,n,e)},CallExpression:Lle,NewExpression:Lle,ArrayExpression:(e,t,n)=>{lh(e.elements,t,n,e)},AssignmentExpression:p9,AwaitExpression:FN,BinaryExpression:p9,LogicalExpression:p9,UnaryExpression:FN,UpdateExpression:FN,ConditionalExpression:$le,ObjectExpression:(e,t,n)=>{lh(e.properties,t,n,e)},Property:(e,t,n)=>{kr(e.key,t,n,e),kr(e.value,t,n,e)},ArrowFunctionExpression:m9,FunctionExpression:m9,FunctionDeclaration:m9,VariableDeclaration:(e,t,n)=>{lh(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{kr(e.id,t,n,e),kr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{kr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{lh(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{kr(e.expression,t,n,e)},IfStatement:$le,ForStatement:(e,t,n)=>{kr(e.init,t,n,e),kr(e.test,t,n,e),kr(e.update,t,n,e),kr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{kr(e.test,t,n,e),kr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{kr(e.body,t,n,e),kr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{kr(e.discriminant,t,n,e),lh(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&kr(e.test,t,n,e),lh(e.consequent,t,n,e)},ReturnStatement:FN,Program:(e,t,n)=>{kr(e.body[0],t,n,e)}};function ICe(e){delete e.start,delete e.end,delete e.optional}function Fle(e){ICe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function s0t(e){return kr(e,null,{Column:Fle,Constant:Fle,Default:ICe}),e}function fo(e,t){return t&&t.type===e}function o0t(e){return fo(nht,e)||fo(tht,e)}function a0t(e){return Vi(e)?e:()=>e}const u0t="Escaped functions are not valid as rollup or pivot values.";function l0t(e,t,n){e.aggronly&&Xn(u0t);const r="(row,data)=>fn("+gSe(e.table.columnNames())+",$)";return{escape:SY.escape(r,a0t(t.expr),n)}}var c0t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],kCe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],f0t="-----------------------------------------------------------------------------------------------------------------------------------------------------",RCe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",g9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},y9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",d0t={5:y9,"5module":y9+" export import",6:y9+" const class extends export import super"},h0t=/^in(stanceof)?$/,p0t=new RegExp("["+RCe+"]"),m0t=new RegExp("["+RCe+f0t+"]");function gz(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Zm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&p0t.test(String.fromCharCode(e)):t===!1?!1:gz(e,kCe)}function sx(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&m0t.test(String.fromCharCode(e)):t===!1?!1:gz(e,kCe)||gz(e,c0t)}var Pr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Fc(e,t){return new Pr(e,{beforeExpr:!0,binop:t})}var jc={beforeExpr:!0},Yu={startsExpr:!0},xK={};function br(e,t){return t===void 0&&(t={}),t.keyword=e,xK[e]=new Pr(e,t)}var ne={num:new Pr("num",Yu),regexp:new Pr("regexp",Yu),string:new Pr("string",Yu),name:new Pr("name",Yu),privateId:new Pr("privateId",Yu),eof:new Pr("eof"),bracketL:new Pr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Pr("]"),braceL:new Pr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Pr("}"),parenL:new Pr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Pr(")"),comma:new Pr(",",jc),semi:new Pr(";",jc),colon:new Pr(":",jc),dot:new Pr("."),question:new Pr("?",jc),questionDot:new Pr("?."),arrow:new Pr("=>",jc),template:new Pr("template"),invalidTemplate:new Pr("invalidTemplate"),ellipsis:new Pr("...",jc),backQuote:new Pr("`",Yu),dollarBraceL:new Pr("${",{beforeExpr:!0,startsExpr:!0}),eq:new Pr("=",{beforeExpr:!0,isAssign:!0}),assign:new Pr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Pr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Pr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Fc("||",1),logicalAND:Fc("&&",2),bitwiseOR:Fc("|",3),bitwiseXOR:Fc("^",4),bitwiseAND:Fc("&",5),equality:Fc("==/!=/===/!==",6),relational:Fc("</>/<=/>=",7),bitShift:Fc("<</>>/>>>",8),plusMin:new Pr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Fc("%",10),star:Fc("*",10),slash:Fc("/",10),starstar:new Pr("**",{beforeExpr:!0}),coalesce:Fc("??",1),_break:br("break"),_case:br("case",jc),_catch:br("catch"),_continue:br("continue"),_debugger:br("debugger"),_default:br("default",jc),_do:br("do",{isLoop:!0,beforeExpr:!0}),_else:br("else",jc),_finally:br("finally"),_for:br("for",{isLoop:!0}),_function:br("function",Yu),_if:br("if"),_return:br("return",jc),_switch:br("switch"),_throw:br("throw",jc),_try:br("try"),_var:br("var"),_const:br("const"),_while:br("while",{isLoop:!0}),_with:br("with"),_new:br("new",{beforeExpr:!0,startsExpr:!0}),_this:br("this",Yu),_super:br("super",Yu),_class:br("class",Yu),_extends:br("extends",jc),_export:br("export"),_import:br("import",Yu),_null:br("null",Yu),_true:br("true",Yu),_false:br("false",Yu),_in:br("in",{beforeExpr:!0,binop:7}),_instanceof:br("instanceof",{beforeExpr:!0,binop:7}),_typeof:br("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:br("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:br("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Sf=/\r\n?|\n|\u2028|\u2029/,g0t=new RegExp(Sf.source,"g");function vS(e){return e===10||e===13||e===8232||e===8233}function NCe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(vS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var PCe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Kc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,DCe=Object.prototype,y0t=DCe.hasOwnProperty,v0t=DCe.toString,XI=Object.hasOwn||function(e,t){return y0t.call(e,t)},jle=Array.isArray||function(e){return v0t.call(e)==="[object Array]"},Ble=Object.create(null);function A0(e){return Ble[e]||(Ble[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function yy(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var b0t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,SA=function(t,n){this.line=t,this.column=n};SA.prototype.offset=function(t){return new SA(this.line,this.column+t)};var _6=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function OCe(e,t){for(var n=1,r=0;;){var i=NCe(e,r,t);if(i<0)return new SA(n,t-r);++n,r=i}}var yz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},Ule=!1;function _0t(e){var t={};for(var n in yz)t[n]=e&&XI(e,n)?e[n]:yz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!Ule&&typeof console=="object"&&console.warn&&(Ule=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),jle(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return jle(t.onComment)&&(t.onComment=w0t(t,t.onComment)),t}function w0t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new _6(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var TA=1,bS=2,SK=4,MCe=8,$Ce=16,LCe=32,TK=64,FCe=128,QI=256,CK=TA|bS|QI;function AK(e,t){return bS|(e?SK:0)|(t?MCe:0)}var X3=0,IK=1,Tg=2,jCe=3,BCe=4,UCe=5,bo=function(t,n,r){this.options=t=_0t(t),this.sourceFile=t.sourceFile,this.keywords=A0(d0t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=g9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=A0(i);var s=(i?i+" ":"")+g9.strict;this.reservedWordsStrict=A0(s),this.reservedWordsStrictBind=A0(s+" "+g9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Sf).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=ne.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(TA),this.regexpState=null,this.privateNameStack=[]},Ep={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};bo.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Ep.inFunction.get=function(){return(this.currentVarScope().flags&bS)>0};Ep.inGenerator.get=function(){return(this.currentVarScope().flags&MCe)>0&&!this.currentVarScope().inClassFieldInit};Ep.inAsync.get=function(){return(this.currentVarScope().flags&SK)>0&&!this.currentVarScope().inClassFieldInit};Ep.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&QI)return!1;if(t.flags&bS)return(t.flags&SK)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Ep.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&TK)>0||n||this.options.allowSuperOutsideMethod};Ep.allowDirectSuper.get=function(){return(this.currentThisScope().flags&FCe)>0};Ep.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Ep.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(bS|QI))>0||n};Ep.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&QI)>0};bo.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};bo.parse=function(t,n){return new this(n,t).parse()};bo.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};bo.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(bo.prototype,Ep);var Du=bo.prototype,E0t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;Du.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Kc.lastIndex=e,e+=Kc.exec(this.input)[0].length;var t=E0t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Kc.lastIndex=e+t[0].length;var n=Kc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Sf.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Kc.lastIndex=e,e+=Kc.exec(this.input)[0].length,this.input[e]===";"&&e++}};Du.eat=function(e){return this.type===e?(this.next(),!0):!1};Du.isContextual=function(e){return this.type===ne.name&&this.value===e&&!this.containsEsc};Du.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};Du.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};Du.canInsertSemicolon=function(){return this.type===ne.eof||this.type===ne.braceR||Sf.test(this.input.slice(this.lastTokEnd,this.start))};Du.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};Du.semicolon=function(){!this.eat(ne.semi)&&!this.insertSemicolon()&&this.unexpected()};Du.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};Du.expect=function(e){this.eat(e)||this.unexpected()};Du.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var w6=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};Du.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};Du.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};Du.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};Du.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var tn=bo.prototype;tn.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==ne.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var kK={kind:"loop"},x0t={kind:"switch"};tn.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Kc.lastIndex=this.pos;var t=Kc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Zm(r,!0)){for(var i=n+1;sx(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!h0t.test(s))return!0}return!1};tn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Kc.lastIndex=this.pos;var e=Kc.exec(this.input),t=this.pos+e[0].length,n;return!Sf.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(sx(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};tn.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=ne._var,s="let"),r){case ne._break:case ne._continue:return this.parseBreakContinueStatement(i,r.keyword);case ne._debugger:return this.parseDebuggerStatement(i);case ne._do:return this.parseDoStatement(i);case ne._for:return this.parseForStatement(i);case ne._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case ne._class:return e&&this.unexpected(),this.parseClass(i,!0);case ne._if:return this.parseIfStatement(i);case ne._return:return this.parseReturnStatement(i);case ne._switch:return this.parseSwitchStatement(i);case ne._throw:return this.parseThrowStatement(i);case ne._try:return this.parseTryStatement(i);case ne._const:case ne._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case ne._while:return this.parseWhileStatement(i);case ne._with:return this.parseWithStatement(i);case ne.braceL:return this.parseBlock(!0,i);case ne.semi:return this.parseEmptyStatement(i);case ne._export:case ne._import:if(this.options.ecmaVersion>10&&r===ne._import){Kc.lastIndex=this.pos;var o=Kc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===ne._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===ne.name&&c.type==="Identifier"&&this.eat(ne.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};tn.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(ne.semi)||this.insertSemicolon()?e.label=null:this.type!==ne.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};tn.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};tn.parseDoStatement=function(e){return this.next(),this.labels.push(kK),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(ne._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(ne.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};tn.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(kK),this.enterScope(0),this.expect(ne.parenL),this.type===ne.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===ne._var||this.type===ne._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===ne._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new w6,u=this.parseExpression(t>-1?"await":!0,a);return this.type===ne._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===ne._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};tn.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,T2|(n?0:vz),!1,t)};tn.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(ne._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};tn.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(ne.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};tn.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(ne.braceL),this.labels.push(x0t),this.enterScope(0);for(var t,n=!1;this.type!==ne.braceR;)if(this.type===ne._case||this.type===ne._default){var r=this.type===ne._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(ne.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};tn.parseThrowStatement=function(e){return this.next(),Sf.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var S0t=[];tn.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?LCe:0),this.checkLValPattern(e,t?BCe:Tg),this.expect(ne.parenR),e};tn.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===ne._catch){var t=this.startNode();this.next(),this.eat(ne.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(ne._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};tn.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};tn.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(kK),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};tn.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};tn.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};tn.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===ne._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};tn.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};tn.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(ne.braceL),e&&this.enterScope(0);this.type!==ne.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};tn.parseFor=function(e,t){return e.init=t,this.expect(ne.semi),e.test=this.type===ne.semi?null:this.parseExpression(),this.expect(ne.semi),e.update=this.type===ne.parenR?null:this.parseExpression(),this.expect(ne.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};tn.parseForIn=function(e,t){var n=this.type===ne._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(ne.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};tn.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(ne.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===ne._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(ne.comma))break}return e};tn.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?IK:Tg,!1)};var T2=1,vz=2,zCe=4;tn.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===ne.star&&t&vz&&this.unexpected(),e.generator=this.eat(ne.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&T2&&(e.id=t&zCe&&this.type!==ne.name?null:this.parseIdent(),e.id&&!(t&vz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?IK:Tg:jCe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(AK(e.async,e.generator)),t&T2||(e.id=this.type===ne.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&T2?"FunctionDeclaration":"FunctionExpression")};tn.parseFunctionParams=function(e){this.expect(ne.parenL),e.params=this.parseBindingList(ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};tn.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(ne.braceL);this.type!==ne.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&T0t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};tn.parseClassElement=function(e){if(this.eat(ne.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(ne.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===ne.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===ne.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(ne.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===ne.parenL||o!=="method"||i||s){var l=!n.static&&Q3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};tn.isClassElementNameStart=function(){return this.type===ne.name||this.type===ne.privateId||this.type===ne.num||this.type===ne.string||this.type===ne.bracketL||this.type.keyword};tn.parseClassElementName=function(e){this.type===ne.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};tn.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&Q3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};tn.parseClassField=function(e){if(Q3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&Q3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(ne.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};tn.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(QI|TK);this.type!==ne.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};tn.parseClassId=function(e,t){this.type===ne.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Tg,!1)):(t===!0&&this.unexpected(),e.id=null)};tn.parseClassSuper=function(e){e.superClass=this.eat(ne._extends)?this.parseExprSubscripts(null,!1):null};tn.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};tn.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];XI(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function T0t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function Q3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}tn.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==ne.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};tn.parseExport=function(e,t){if(this.next(),this.eat(ne.star))return this.parseExportAllDeclaration(e,t);if(this.eat(ne._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==ne.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};tn.parseExportDeclaration=function(e){return this.parseStatement(null)};tn.parseExportDefaultDeclaration=function(){var e;if(this.type===ne._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,T2|zCe,!1,e)}else if(this.type===ne._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};tn.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),XI(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};tn.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};tn.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};tn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};tn.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};tn.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(ne.braceL);!this.eat(ne.braceR);){if(n)n=!1;else if(this.expect(ne.comma),this.afterTrailingComma(ne.braceR))break;t.push(this.parseExportSpecifier(e))}return t};tn.parseImport=function(e){return this.next(),this.type===ne.string?(e.specifiers=S0t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===ne.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};tn.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Tg),this.finishNode(e,"ImportSpecifier")};tn.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Tg),this.finishNode(e,"ImportDefaultSpecifier")};tn.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Tg),this.finishNode(e,"ImportNamespaceSpecifier")};tn.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===ne.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(ne.comma)))return e;if(this.type===ne.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(ne.braceL);!this.eat(ne.braceR);){if(t)t=!1;else if(this.expect(ne.comma),this.afterTrailingComma(ne.braceR))break;e.push(this.parseImportSpecifier())}return e};tn.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===ne.string){var e=this.parseLiteral(this.value);return b0t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};tn.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};tn.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Tf=bo.prototype;Tf.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Tf.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Tf.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Tf.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==ne.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Tf.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case ne.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(ne.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case ne.braceL:return this.parseObj(!0)}return this.parseIdent()};Tf.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(ne.comma),t&&this.type===ne.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===ne.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Tf.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Tf.parseBindingListItem=function(e){return e};Tf.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(ne.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Tf.checkLValSimple=function(e,t,n){t===void 0&&(t=X3);var r=t!==X3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Tg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(XI(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==UCe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Tf.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=X3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Tf.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=X3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Bf=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},ts={b_stat:new Bf("{",!1),b_expr:new Bf("{",!0),b_tmpl:new Bf("${",!1),p_stat:new Bf("(",!1),p_expr:new Bf("(",!0),q_tmpl:new Bf("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Bf("function",!1),f_expr:new Bf("function",!0),f_expr_gen:new Bf("function",!0,!1,null,!0),f_gen:new Bf("function",!1,!1,null,!0)},_S=bo.prototype;_S.initialContext=function(){return[ts.b_stat]};_S.curContext=function(){return this.context[this.context.length-1]};_S.braceIsBlock=function(e){var t=this.curContext();return t===ts.f_expr||t===ts.f_stat?!0:e===ne.colon&&(t===ts.b_stat||t===ts.b_expr)?!t.isExpr:e===ne._return||e===ne.name&&this.exprAllowed?Sf.test(this.input.slice(this.lastTokEnd,this.start)):e===ne._else||e===ne.semi||e===ne.eof||e===ne.parenR||e===ne.arrow?!0:e===ne.braceL?t===ts.b_stat:e===ne._var||e===ne._const||e===ne.name?!1:!this.exprAllowed};_S.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};_S.updateContext=function(e){var t,n=this.type;n.keyword&&e===ne.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};_S.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};ne.parenR.updateContext=ne.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===ts.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};ne.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ts.b_stat:ts.b_expr),this.exprAllowed=!0};ne.dollarBraceL.updateContext=function(){this.context.push(ts.b_tmpl),this.exprAllowed=!0};ne.parenL.updateContext=function(e){var t=e===ne._if||e===ne._for||e===ne._with||e===ne._while;this.context.push(t?ts.p_stat:ts.p_expr),this.exprAllowed=!0};ne.incDec.updateContext=function(){};ne._function.updateContext=ne._class.updateContext=function(e){e.beforeExpr&&e!==ne._else&&!(e===ne.semi&&this.curContext()!==ts.p_stat)&&!(e===ne._return&&Sf.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===ne.colon||e===ne.braceL)&&this.curContext()===ts.b_stat)?this.context.push(ts.f_expr):this.context.push(ts.f_stat),this.exprAllowed=!1};ne.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};ne.backQuote.updateContext=function(){this.curContext()===ts.q_tmpl?this.context.pop():this.context.push(ts.q_tmpl),this.exprAllowed=!1};ne.star.updateContext=function(e){if(e===ne._function){var t=this.context.length-1;this.context[t]===ts.f_expr?this.context[t]=ts.f_expr_gen:this.context[t]=ts.f_gen}this.exprAllowed=!0};ne.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==ne.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Pn=bo.prototype;Pn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Pn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===ne.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(ne.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Pn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new w6,r=!0);var a=this.start,u=this.startLoc;(this.type===ne.parenL||this.type===ne.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===ne.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===ne.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Pn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(ne.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(ne.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Pn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Pn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==ne._in)&&s>r){var o=this.type===ne.logicalOR||this.type===ne.logicalAND,a=this.type===ne.coalesce;a&&(s=ne.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===ne.coalesce||a&&(this.type===ne.logicalOR||this.type===ne.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Pn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Pn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===ne.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&VCe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===ne.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==ne._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(ne.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function VCe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&VCe(e.expression)}Pn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Pn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Pn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(ne.arrow)};Pn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Pn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(ne.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(ne.bracketL);if(l||u&&this.type!==ne.parenL&&this.type!==ne.backQuote||this.eat(ne.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(ne.bracketR)):this.type===ne.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(ne.parenL)){var f=new w6,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var g=this.parseExprList(ne.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,g,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var y=this.startNodeAt(t,n);y.callee=e,y.arguments=g,a&&(y.optional=u),e=this.finishNode(y,"CallExpression")}else if(this.type===ne.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var b=this.startNodeAt(t,n);b.tag=e,b.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(b,"TaggedTemplateExpression")}return e};Pn.parseExprAtom=function(e,t,n){this.type===ne.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case ne._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===ne.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==ne.dot&&this.type!==ne.bracketL&&this.type!==ne.parenL&&this.unexpected(),this.finishNode(r,"Super");case ne._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case ne.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(ne._function))return this.overrideContext(ts.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(ne.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===ne.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(ne.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case ne.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case ne.num:case ne.string:return this.parseLiteral(this.value);case ne._null:case ne._true:case ne._false:return r=this.startNode(),r.value=this.type===ne._null?null:this.type===ne._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case ne.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case ne.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(ne.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case ne.braceL:return this.overrideContext(ts.b_expr),this.parseObj(!1,e);case ne._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case ne._class:return this.parseClass(this.startNode(),!1);case ne._new:return this.parseNew();case ne.backQuote:return this.parseTemplate();case ne._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Pn.parseExprAtomDefault=function(){this.unexpected()};Pn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===ne.parenL&&!e)return this.parseDynamicImport(t);if(this.type===ne.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Pn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(ne.parenR)){var t=this.start;this.eat(ne.comma)&&this.eat(ne.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Pn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Pn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Pn.parseParenExpression=function(){this.expect(ne.parenL);var e=this.parseExpression();return this.expect(ne.parenR),e};Pn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Pn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new w6,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==ne.parenR;)if(l?l=!1:this.expect(ne.comma),s&&this.afterTrailingComma(ne.parenR,!0)){c=!0;break}else if(this.type===ne.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var g=this.lastTokEnd,y=this.lastTokEndLoc;if(this.expect(ne.parenR),e&&this.shouldParseArrow(u)&&this.eat(ne.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",g,y)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var b=this.startNodeAt(n,r);return b.expression=i,this.finishNode(b,"ParenthesizedExpression")}else return i};Pn.parseParenItem=function(e){return e};Pn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var C0t=[];Pn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===ne.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(ne.parenL)?e.arguments=this.parseExprList(ne.parenR,this.options.ecmaVersion>=8,!1):e.arguments=C0t,this.finishNode(e,"NewExpression")};Pn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===ne.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===ne.backQuote,this.finishNode(n,"TemplateElement")};Pn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===ne.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(ne.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(ne.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Pn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===ne.name||this.type===ne.num||this.type===ne.string||this.type===ne.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===ne.star)&&!Sf.test(this.input.slice(this.lastTokEnd,this.start))};Pn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(ne.braceR);){if(r)r=!1;else if(this.expect(ne.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(ne.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Pn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(ne.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===ne.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(ne.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(ne.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Pn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Pn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===ne.colon&&this.unexpected(),this.eat(ne.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===ne.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==ne.comma&&this.type!==ne.braceR&&this.type!==ne.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===ne.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Pn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(ne.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(ne.bracketR),e.key;e.computed=!1}return e.key=this.type===ne.num||this.type===ne.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Pn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Pn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(AK(t,r.generator)|TK|(n?FCe:0)),this.expect(ne.parenL),r.params=this.parseBindingList(ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Pn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(AK(n,!1)|$Ce),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Pn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==ne.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,UCe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Pn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Pn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,IK,t?null:n)}};Pn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(ne.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===ne.comma?o=null:this.type===ne.ellipsis?(o=this.parseSpread(r),r&&this.type===ne.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Pn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Pn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Pn.parseIdentNode=function(){var e=this.startNode();return this.type===ne.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=ne.name):this.unexpected(),e};Pn.parsePrivateIdent=function(){var e=this.startNode();return this.type===ne.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Pn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===ne.semi||this.canInsertSemicolon()||this.type!==ne.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(ne.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Pn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var J3=bo.prototype;J3.raise=function(e,t){var n=OCe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};J3.raiseRecoverable=J3.raise;J3.curPosition=function(){if(this.options.locations)return new SA(this.curLine,this.pos-this.lineStart)};var rv=bo.prototype,A0t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};rv.enterScope=function(e){this.scopeStack.push(new A0t(e))};rv.exitScope=function(){this.scopeStack.pop()};rv.treatFunctionsAsVarInScope=function(e){return e.flags&bS||!this.inModule&&e.flags&TA};rv.declareName=function(e,t,n){var r=!1;if(t===Tg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&TA&&delete this.undefinedExports[e]}else if(t===BCe){var s=this.currentScope();s.lexical.push(e)}else if(t===jCe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&LCe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&TA&&delete this.undefinedExports[e],u.flags&CK)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};rv.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};rv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};rv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&CK)return t}};rv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&CK&&!(t.flags&$Ce))return t}};var E6=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new _6(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},JI=bo.prototype;JI.startNode=function(){return new E6(this,this.start,this.startLoc)};JI.startNodeAt=function(e,t){return new E6(this,e,t)};function HCe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}JI.finishNode=function(e,t){return HCe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};JI.finishNodeAt=function(e,t,n,r){return HCe.call(this,e,t,n,r)};JI.copyNode=function(e){var t=new E6(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var qCe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",WCe=qCe+" Extended_Pictographic",GCe=WCe,YCe=GCe+" EBase EComp EMod EPres ExtPict",KCe=YCe,I0t=KCe,k0t={9:qCe,10:WCe,11:GCe,12:YCe,13:KCe,14:I0t},R0t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",N0t={9:"",10:"",11:"",12:"",13:"",14:R0t},zle="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",XCe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",QCe=XCe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",JCe=QCe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ZCe=JCe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",e2e=ZCe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",P0t=e2e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",D0t={9:XCe,10:QCe,11:JCe,12:ZCe,13:e2e,14:P0t},t2e={};function O0t(e){var t=t2e[e]={binary:A0(k0t[e]+" "+zle),binaryOfStrings:A0(N0t[e]),nonBinary:{General_Category:A0(zle),Script:A0(D0t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var v9=0,Vle=[9,10,11,12,13,14];v9<Vle.length;v9+=1){var M0t=Vle[v9];O0t(M0t)}var qt=bo.prototype,xp=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=t2e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};xp.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};xp.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};xp.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};xp.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};xp.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};xp.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};xp.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};xp.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};xp.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};qt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};qt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};qt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};qt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};qt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};qt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};qt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};qt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};qt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};qt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};qt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};qt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};qt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};qt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};qt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};qt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};qt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return n2e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function n2e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}qt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!n2e(n);)e.advance();return e.pos!==t};qt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};qt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};qt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};qt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=yy(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=yy(e.lastIntValue);return!0}return!1};qt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),$0t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function $0t(e){return Zm(e,!0)||e===36||e===95}qt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),L0t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function L0t(e){return sx(e,!0)||e===36||e===95||e===8204||e===8205}qt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};qt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};qt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};qt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};qt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};qt.regexp_eatZero=function(e){return e.current()===48&&!x6(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};qt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};qt.regexp_eatControlLetter=function(e){var t=e.current();return r2e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function r2e(e){return e>=65&&e<=90||e>=97&&e<=122}qt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&F0t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function F0t(e){return e>=0&&e<=1114111}qt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};qt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var i2e=0,eg=1,Jc=2;qt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(j0t(t))return e.lastIntValue=-1,e.advance(),eg;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Jc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return i2e};function j0t(e){return e===100||e===68||e===115||e===83||e===119||e===87}qt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),eg}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return i2e};qt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){XI(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};qt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return eg;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Jc;e.raise("Invalid property name")};qt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";s2e(t=e.current());)e.lastStringValue+=yy(t),e.advance();return e.lastStringValue!==""};function s2e(e){return r2e(e)||e===95}qt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";B0t(t=e.current());)e.lastStringValue+=yy(t),e.advance();return e.lastStringValue!==""};function B0t(e){return s2e(e)||x6(e)}qt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};qt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Jc&&e.raise("Negated character class may contain strings"),!0}return!1};qt.regexp_classContents=function(e){return e.current()===93?eg:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),eg)};qt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};qt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||u2e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};qt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};qt.regexp_classSetExpression=function(e){var t=eg,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Jc&&(t=Jc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Jc&&(t=eg);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Jc&&(t=Jc)}};qt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};qt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?eg:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};qt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Jc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};qt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};qt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Jc&&(t=Jc);return t};qt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?eg:Jc};qt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&U0t(n)||z0t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function U0t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function z0t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}qt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return V0t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function V0t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}qt.regexp_eatClassControlLetter=function(e){var t=e.current();return x6(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};qt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};qt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;x6(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function x6(e){return e>=48&&e<=57}qt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;o2e(n=e.current());)e.lastIntValue=16*e.lastIntValue+a2e(n),e.advance();return e.pos!==t};function o2e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function a2e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}qt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};qt.regexp_eatOctalDigit=function(e){var t=e.current();return u2e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function u2e(e){return e>=48&&e<=55}qt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!o2e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+a2e(i),e.advance()}return!0};var RK=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new _6(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},yr=bo.prototype;yr.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new RK(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};yr.getToken=function(){return this.next(),new RK(this)};typeof Symbol<"u"&&(yr[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===ne.eof,value:t}}}});yr.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(ne.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};yr.readToken=function(e){return Zm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};yr.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};yr.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=NCe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};yr.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!vS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};yr.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&PCe.test(String.fromCharCode(e)))++this.pos;else break e}}};yr.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};yr.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(ne.ellipsis)):(++this.pos,this.finishToken(ne.dot))};yr.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(ne.assign,2):this.finishOp(ne.slash,1)};yr.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?ne.star:ne.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=ne.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(ne.assign,n+1):this.finishOp(r,n)};yr.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(ne.assign,3)}return this.finishOp(e===124?ne.logicalOR:ne.logicalAND,2)}return t===61?this.finishOp(ne.assign,2):this.finishOp(e===124?ne.bitwiseOR:ne.bitwiseAND,1)};yr.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(ne.assign,2):this.finishOp(ne.bitwiseXOR,1)};yr.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Sf.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(ne.incDec,2):t===61?this.finishOp(ne.assign,2):this.finishOp(ne.plusMin,1)};yr.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(ne.assign,n+1):this.finishOp(ne.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(ne.relational,n))};yr.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(ne.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(ne.arrow)):this.finishOp(e===61?ne.eq:ne.prefix,1)};yr.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(ne.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(ne.assign,3)}return this.finishOp(ne.coalesce,2)}}return this.finishOp(ne.question,1)};yr.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Zm(t,!0)||t===92))return this.finishToken(ne.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+yy(t)+"'")};yr.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(ne.parenL);case 41:return++this.pos,this.finishToken(ne.parenR);case 59:return++this.pos,this.finishToken(ne.semi);case 44:return++this.pos,this.finishToken(ne.comma);case 91:return++this.pos,this.finishToken(ne.bracketL);case 93:return++this.pos,this.finishToken(ne.bracketR);case 123:return++this.pos,this.finishToken(ne.braceL);case 125:return++this.pos,this.finishToken(ne.braceR);case 58:return++this.pos,this.finishToken(ne.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(ne.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(ne.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+yy(e)+"'")};yr.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};yr.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Sf.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new xp(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(ne.regexp,{pattern:i,flags:o,value:u})};yr.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function H0t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function l2e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}yr.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=l2e(this.input.slice(t,this.pos)),++this.pos):Zm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ne.num,n)};yr.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=l2e(this.input.slice(t,this.pos));return++this.pos,Zm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(ne.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Zm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=H0t(this.input.slice(t,this.pos),n);return this.finishToken(ne.num,s)};yr.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};yr.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(vS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(ne.string,t)};var c2e={};yr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===c2e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};yr.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw c2e;this.raise(e,t)};yr.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===ne.template||this.type===ne.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(ne.dollarBraceL)):(++this.pos,this.finishToken(ne.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(ne.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(vS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};yr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(ne.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};yr.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return yy(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return vS(t)?"":String.fromCharCode(t)}};yr.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};yr.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(sx(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Zm:sx)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=yy(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};yr.readWord=function(){var e=this.readWord1(),t=ne.name;return this.keywords.test(e)&&(t=xK[e]),this.finishToken(t,e)};var q0t="8.11.3";bo.acorn={Parser:bo,version:q0t,defaultOptions:yz,Position:SA,SourceLocation:_6,getLineInfo:OCe,Node:E6,TokenType:Pr,tokTypes:ne,keywordTypes:xK,TokContext:Bf,tokContexts:ts,isIdentifierChar:sx,isIdentifierStart:Zm,Token:RK,isNewLine:vS,lineBreak:Sf,lineBreakG:g0t,nonASCIIwhitespace:PCe};function W0t(e,t){return bo.parse(e,t)}const NK={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},G0t={ecmaVersion:11},Hle="$",Y0t="d",K0t="d1",X0t="d2",ia=e=>(t,n)=>n.error(t,e+" not allowed"),Q0t=ia("Aggregate function"),J0t=ia("Window function"),Z0t="Invalid argument",PK="Invalid column reference",eyt=PK+" (must be input to an aggregate function)",f2e="Invalid function call",tyt="Invalid member expression",nyt="Invalid operator parameter",ryt="Invalid param reference",iyt="Invalid variable reference",syt="Variable not accessible in operator call",oyt="Unsupported variable declaration",ayt="Unsupported destructuring pattern",d2e="Table expressions do not support closures",h2e="Use aq.escape(fn) to use a function as-is (including closures)",uyt="use table.params({ name: value }) to define dynamic parameters",lyt="use aq.addFunction(name, fn) to add new op functions",cyt=`
Note: ${d2e}. ${h2e}, or ${uyt}.`,p2e=`
Note: ${d2e}. ${h2e}, or ${lyt}.`,fyt=`The ${pSe} method is not valid in multi-table expressions.`;function dyt(e,t){const n=hyt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,o0t(r)?(myt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=K0t),e.scope.add(e.tuple2=X0t),e.scope.add(e.$param=Hle)):(e.scope.add(e.tuple=Y0t),e.scope.add(e.$param=Hle)),kr(r,e,DK),e.root}function hyt(e){try{const t=e.field?pyt(e):Ur(e)?Qh(e):e;return W0t(`expr=(${t})`,G0t).body[0].expression.right}catch{Xn(`Expression parse error: ${e+""}`)}}function pyt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const DK={FunctionDeclaration:ia("Function definitions"),ForStatement:ia("For loops"),ForOfStatement:ia("For-of loops"),ForInStatement:ia("For-in loops"),WhileStatement:ia("While loops"),DoWhileStatement:ia("Do-while loops"),AwaitExpression:ia("Await expressions"),ArrowFunctionExpression:ia("Function definitions"),AssignmentExpression:ia("Assignments"),FunctionExpression:ia("Function definitions"),NewExpression:ia('Use of "new"'),UpdateExpression:ia("Update expressions"),VariableDeclarator(e,t){wz(e.id,t)},Identifier(e,t,n){y2e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,iyt,cyt)},CallExpression(e,t){const n=m2e(e.callee),r=fSe(n)||dSe(n);if(r){if((t.join||t.aggregate===!1)&&EY(n)&&Q0t(e,t),(t.join||t.window===!1)&&xY(n)&&J0t(e,t),t.$op=1,t.ast)_z(e,n,t),e.arguments.forEach(i=>kr(i,t,bz));else{const i=t.op(gyt(t,r,n,e.arguments));Object.assign(e,{type:oSe,name:i.id})}return t.$op=0,!1}else cSe(n)?_z(e,n,t):t.error(e,f2e,p2e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!fo(z0,r))return;const{name:s}=r;if(g2e(e)&&fo(z0,i)&&_d(NK,i.name)){_2e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return qle(e,o,t,v2e,n);if(s===t.$param)return qle(e,o,t,vyt);t.paramsRef.has(s)?CA(e,t.paramsRef.get(s)):t.columnRef.has(s)?b2e(r,s,t,e):_d(t.params,s)&&CA(r,s)}};function qle(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(fo(hS,s))a=s.value;else try{kr(s,n,DK,e),a=n.param(s)}catch{n.error(e,tyt)}return r(e,a,t,n,i),!1}const bz={...DK,VariableDeclarator:ia("Variable declaration in operator call"),Identifier(e,t,n){y2e(e,t,n)&&t.error(e,syt)},CallExpression(e,t){const n=m2e(e.callee);cSe(n)?_z(e,n,t):t.error(e,f2e,p2e)}};function myt(e,t){e.generator&&ia("Generator functions")(e,t),e.async&&ia("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(HT(t,n[0],"tuple1",i(1)),r>1&&HT(t,n[1],"tuple2",i(2)),r>2&&HT(t,n[2],"$param",s)):(HT(t,n[0],"tuple",i(0)),r>1&&HT(t,n[1],"$param",s))),t.root=e.body}function HT(e,t,n,r){fo(z0,t)?(e.scope.add(t.name),e[n]=t.name):fo(iSe,t)&&t.properties.forEach(i=>{const s=fo(z0,i.key)?i.key.name:fo(hS,i.key)?i.key.value:e.error(i,Z0t);fo(z0,i.value)||e.error(i.value,ayt),r(i.value.name,s)})}function gyt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(kr(u,e,bz),i.push(e.field(u))):l<a?(kr(u,e,bz),s.push(e.param(u))):e.error(u,nyt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function m2e(e){return fo(z0,e)?e.name:fo(rSe,e)?g2e(e)?yyt(e.property.name):e.property.name:null}function g2e(e){return fo(z0,e.object)&&e.object.name==="Math"}function yyt(e){return e==="max"?"greatest":e==="min"?"least":e}function y2e(e,t,n){const{name:r}=e;if(!(fo(rSe,n)&&n.property===e)){if(!(fo(sSe,n)&&n.key===e))if(t.paramsRef.has(r))CA(e,t.paramsRef.get(r));else if(t.columnRef.has(r))b2e(e,r,t,n);else if(_d(t.params,r))CA(e,r);else if(_d(NK,r))_2e(e,r);else return!0}}function v2e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,PK),r.aggronly&&!r.$op&&r.error(e,eyt),hSe(e,t,n,o,i)}function b2e(e,t,n,r){const[i,s]=n.columnRef.get(t);v2e(e,i,s,n,r)}function vyt(e,t,n,r){r.params&&!_d(r.params,t)&&r.error(e,ryt),CA(e,t)}function CA(e,t){e.type=aht,e.name=t}function _2e(e,t){e.type=iht,e.name=t,e.raw=NK[t]}function _z(e,t,n){if(t===pSe){const r=n.table;r||n.error(e,fyt),mSe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Au(s)?r.columnName(s):s;return r.column(o)||n.error(i,PK),o}):r.columnNames())}else e.callee={type:oht,name:t}}function wz(e,t){fo(z0,e)?t.scope.add(e.name):fo(eht,e)?e.elements.forEach(n=>wz(n,t)):fo(iSe,e)?e.properties.forEach(n=>wz(n.value,t)):t.error(e.id,oyt)}const byt={[HI]:1,[oSe]:1};function Tl(e,t={}){const n=t.generate||R3,r=t.compiler||SY,i=wyt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(g){const y=_yt(g);return o[y]||(g.id=++c,o[y]=g)},field(g){const y=n(g);return s[y]||(s[y]=++l)},param(g){return fo(hS,g)?g.value:r.param(n(g),i)},value(g,y){a.push(g);const b=y.escape||(t.ast?s0t(y):f(n(y),i));u.push(b),byt[y.type]&&b!==y&&qa(b)&&(b.field=y.name)},error(g,y,b=""){const _=g.start-6,E=g.end-6,C=String(d.spec).slice(_,E);Xn(`${y}: "${C}"${b}`)}};Object.assign(d,t,{params:i});for(const[g,y]of o6(e))d.value(g+"",y.escape?l0t(d,y,i):dyt(d,y));if(t.ast)return{names:a,exprs:u};const h=[];for(const g in s)h[s[g]]=r.expr(g,i);const p=Object.values(o);return p.forEach(g=>g.fields=g.fields.map(y=>h[y])),{names:a,exprs:u,ops:p}}function _yt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function wyt(e){return(e.table?b9(e.table):e.join?{...b9(e.join[1]),...b9(e.join[0])}:{})||{}}function b9(e){return e&&Vi(e.params)?e.params():{}}const w2e="Expr",Uf="ExprList",E2e="ExprNumber",LC="ExprObject",Uw="JoinKeys",Z3="JoinValues",qc="Options",OK="OrderKeys",s0="SelectionList",d1="TableRef",zw="TableRefList",Eyt="Descending",xyt="Query",Syt="Selection",Tyt="Verb",Cyt="Window";function S6(e,t){return e&&e.expr?new Wle({...e,...t}):new Wle(t,e)}class Wle{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Vi(this.expr)?{func:!0}:{}}}}function Ayt(e){return S6(e,{desc:!0})}function ob(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return S6(e,t?{expr:t,...r}:r)}function Iyt(e,t,n){return S6(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function kyt(e){const t=n=>n;return t.toString=()=>e,t}function Gle(e,t){return t=t&&Vi(t.query)?t.query():t,t&&Vi(t.evaluate)?t.evaluate(null,e):e(t)}function x2e(e){return qa(e)&&(Ur(e.all)||Ur(e.matches)||Ur(e.not)||Ur(e.range))}function AA(e){return e&&Vi(e.toObject)?e.toObject():Vi(e)?{expr:String(e),func:!0}:Ur(e)?e.map(AA):qa(e)?v6(e,t=>AA(t)):e}function MK(e){return Ur(e)?e.map(MK):qa(e)?Ur(e.verbs)?LK.from(e):Ur(e.all)?ix():Ur(e.range)?e0t(...e.range):Ur(e.match)?t0t(RegExp(...e.match)):Ur(e.not)?ACe(e.not.map(AA)):Ryt(e):e}function Ryt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=ob(n):e.func===!0&&(t=n=kyt(n)),qa(e.window)){const{frame:r,peers:i}=e.window;t=n=Iyt(n,r,i)}e.desc===!0&&(t=Ayt(n))}return e===t?v6(e,r=>MK(r)):t}function Nyt(e){return Ur(e)?e.map(Pyt):e}function Pyt(e){const t=[];return El(e).forEach(n=>{Au(n)?t.push(n):ya(n)?t.push(ob(n,null)):qa(n)&&n.expr||Vi(n)?t.push(n):Xn(`Invalid key value: ${n+""}`)}),t}function Dyt(e){return Ur(e)?e.map(Oyt):e}function Oyt(e,t){return t<2?El(e):e}function Myt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(qa(r)&&!Vi(r))for(const i in r)t.push(r[i]);else n=Au(r)?r:ya(r)?ob(n):Vi(r)?n:Xn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const $yt={[w2e]:A2e,[Uf]:ox,[E2e]:zyt,[LC]:vy,[Uw]:Vyt,[Z3]:Hyt,[OK]:ox,[s0]:Byt};function Lyt(e,t,n){return t===d1?Yle(e):t===zw?e.map(Yle):S2e(AA(e),t,n)}function S2e(e,t,n){return t===qc?e&&Fyt(e,n):$yt[t](e)}function Fyt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?S2e(i,t[r]):i}return n}function jyt(e,t){return Tl({expr:e},{...t,ast:!0}).exprs[0]}function $K(e){return{type:HI,name:e}}function T2e(e){return{type:HI,index:e}}function vy(e,t){if(ya(e))return jyt(e,t);if(e.expr){let n;if(e.field===!0?n=$K(e.expr):e.func===!0&&(n=vy(e.expr,t)),n)return e.desc&&(n={type:Eyt,expr:n}),e.window&&(n={type:Cyt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...vy(e[n],t),as:n}))}function C2e(e){const t=Syt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:ox(e.not)}:e.range?{type:t,operator:"range",arguments:ox(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Xn("Invalid input")}function Byt(e){return El(e).map(Uyt).flat()}function Uyt(e){return x2e(e)?C2e(e):Au(e)?T2e(e):ya(e)?$K(e):qa(e)?Object.keys(e).map(t=>({type:HI,name:t,as:e[t]})):Xn("Invalid input")}function A2e(e){return x2e(e)?C2e(e):Au(e)?T2e(e):ya(e)?$K(e):qa(e)?vy(e):Xn("Invalid input")}function ox(e){return El(e).map(A2e).flat()}function zyt(e){return Au(e)?e:vy(e)}function Vyt(e){return Ur(e)?e.map(ox):vy(e,{join:!0})}function Hyt(e){return Ur(e)?e.map((t,n)=>n<2?ox(t):vy(t,{join:!0})):vy(e,{join:!0})}function Yle(e){return e&&Vi(e.toAST)?e.toAST():e}class I2e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Uw?Nyt(a):o===Z3?Dyt(a):o===OK?Myt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=Ez[t.verb],r=(n.schema||[]).map(({name:i})=>MK(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===d1?Gle(n,o):s===zw?o.map(a=>Gle(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=AA(this[n])}),t}toAST(){const t={type:Tyt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=Lyt(this[n],r,i)}),t}}function pi(e,t){return Object.assign((...n)=>new I2e(e,t,n),{schema:t})}const Ez={count:pi("count",[{name:"options",type:qc}]),derive:pi("derive",[{name:"values",type:LC},{name:"options",type:qc,props:{before:s0,after:s0}}]),filter:pi("filter",[{name:"criteria",type:LC}]),groupby:pi("groupby",[{name:"keys",type:Uf}]),orderby:pi("orderby",[{name:"keys",type:OK}]),relocate:pi("relocate",[{name:"columns",type:s0},{name:"options",type:qc,props:{before:s0,after:s0}}]),rename:pi("rename",[{name:"columns",type:s0}]),rollup:pi("rollup",[{name:"values",type:LC}]),sample:pi("sample",[{name:"size",type:E2e},{name:"options",type:qc,props:{weight:w2e}}]),select:pi("select",[{name:"columns",type:s0}]),ungroup:pi("ungroup"),unorder:pi("unorder"),reify:pi("reify"),dedupe:pi("dedupe",[{name:"keys",type:Uf,default:[]}]),impute:pi("impute",[{name:"values",type:LC},{name:"options",type:qc,props:{expand:Uf}}]),fold:pi("fold",[{name:"values",type:Uf},{name:"options",type:qc}]),pivot:pi("pivot",[{name:"keys",type:Uf},{name:"values",type:Uf},{name:"options",type:qc}]),spread:pi("spread",[{name:"values",type:Uf},{name:"options",type:qc}]),unroll:pi("unroll",[{name:"values",type:Uf},{name:"options",type:qc,props:{drop:Uf}}]),lookup:pi("lookup",[{name:"table",type:d1},{name:"on",type:Uw},{name:"values",type:Uf}]),join:pi("join",[{name:"table",type:d1},{name:"on",type:Uw},{name:"values",type:Z3},{name:"options",type:qc}]),cross:pi("cross",[{name:"table",type:d1},{name:"values",type:Z3},{name:"options",type:qc}]),semijoin:pi("semijoin",[{name:"table",type:d1},{name:"on",type:Uw}]),antijoin:pi("antijoin",[{name:"table",type:d1},{name:"on",type:Uw}]),concat:pi("concat",[{name:"tables",type:zw}]),union:pi("union",[{name:"tables",type:zw}]),intersect:pi("intersect",[{name:"tables",type:zw}]),except:pi("except",[{name:"tables",type:zw}])};let LK=class k2e extends Hxe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new k2e(t.map(I2e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Kle(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Kle(this,"toAST",{type:xyt})}};function Kle(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function qyt(e,t){return new LK(e._verbs.concat(t),e._params,e._table)}for(const e in Ez){const t=Ez[e];LK.prototype["__"+e]=function(n,...r){return qyt(n,t(...r))}}function wS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function Wyt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function FK(e,t){const n=xc();return t.forEach((r,i)=>{const s=ya(r)?r:i;if(s){const o=e.column(i)||Xn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function R2e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Xn("relocate requires a before or after option."),i&&s&&Xn("relocate accepts only one of the before or after options."),t=Jm(e,t);const o=[...Jm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),FK(e,u)}function ZI(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function jK(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Gyt(e,t=0,n=e.length){let r=n?e[t++]:Dr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function Yyt(e,t=0,n=e.length){let r=n?e[t++]:Dr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function jN(e){return yA(e)?e:+e}function Kyt(e,t){const n=e.length;if(!n)return Dr;if((t=+t)<=0||n<2)return jN(e[0]);if(t>=1)return jN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=jN(e[i]);return yA(s)?s:s+(jN(e[i+1])-s)*(r-i)}class Xyt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:Gyt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:Yyt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(jK)),Kyt(this._sorted,t)}}const eM=(e,t,n)=>wS(t,"{"+ZI(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function Qyt(e,t){const{ops:n,output:r}=Jyt(e,t),i=e[0].fields,s=i.length,o=s===0?BK:s===1?Zyt:s===2?evt:Xn("Unsupported field count: "+s);return new o(i,n,r,t)}function Jyt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=fSe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class BK extends r0t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new Xyt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Zyt extends BK{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=eM(n,s,"add"),this._rem=eM(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,ad(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,ad(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class evt extends BK{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=eM(n,s,"add"),this._rem=eM(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,ad(i)&&ad(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,ad(i)&&ad(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Jb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=ES(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function ES(e,t,n){if(!t.length)return n;const r=N2e(t),i=e.groups(),s=i?i.size:1;return n=n||i6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=D2e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=P2e(e,o);o.write(a,n,0)}),n}function N2e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(Qyt(r[i],t));return n}function P2e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function D2e(e,t,n){const{keys:r,size:i}=n,s=i6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function O2e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function M2e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Xle=M2e(jK);function tvt(e,t,n,r,i){let s,o,a,u,l;const c=g=>o[g-1]===o[g],f=r.length,d=i.length,h=r.length?wS(["w","r","k"],"{"+ZI(r,(g,y)=>`r[_${y}.id][k]=_${y}.value(w,_${y}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(g,y,b,_){p.index=p.i0=p.i1=0,p.size=y.length,s=g,o=y,u=b,l=_,a=i?i.map(E=>E.init()):null;for(let E=0;E<f;++E)r[E].init();return p},value(g,y){return y(s[g],e)},step(g){const[y,b]=t,_=p.size,E=p.i0,C=p.i1;p.i0=y!=null?Math.max(0,g-Math.abs(y)):0,p.i1=b!=null?Math.min(_,g+Math.abs(b)+1):_,p.index=g,n&&(p.i0>0&&c(p.i0)&&(p.i0=Xle.left(o,o[p.i0])),p.i1<_&&c(p.i1)&&(p.i1=Xle.right(o,o[p.i1-1])));for(let x=0;x<d;++x){const T=i[x],A=a[x];for(let k=E;k<p.i0;++k)T.rem(A,s[k],e);for(let k=C;k<p.i1;++k)T.add(A,s[k],e);T.write(A,u,l)}return h(p,u,l),u}};return p}const nvt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),rvt=e=>!!e.peers;function ivt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=dSe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function svt(e,t,n,r={},i){const s=e.data(),o=ovt(i,s),a=o.length,u=wS(["r","d","op"],"{"+ZI(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=avt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let g=0;g<a;++g)o[g].step(p);u(l[p],s,h)}})}function ovt(e,t){const n={};return e.forEach(r=>{const i=nvt(r),s=rvt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});EY(r.name)?a.push(r):u.push(ivt(r))}),Object.values(n).map(r=>tvt(t,r.frame,r.peers,r.winOps,N2e(r.aggOps,r.frame[0]!=null?-1:1)))}function avt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function uvt(e){return xY(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function UK(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=xc(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=lvt(r),c=e.isGrouped()?e.groups().size:1,f=ES(e,u,i6(r.length,()=>Array(c)));return l.length?svt(e,a,n,f,l):cvt(e,a,n,f),e.create(o)}function lvt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(uvt(s)?n:t).push(s)}return[t,n]}function cvt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function fvt(e,t,n={}){const r=UK(e,Tl(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:R2e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function dvt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const BN=2147483648,hvt=4294967295;class $2e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&BN>>>t}set(t){this._bits[t>>5]|=BN>>>t}clear(t){this._bits[t>>5]&=~(BN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&hvt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=BN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function pvt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new $2e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function mvt(e,t){const n=Tl({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=UK(e,n,{drop:!0}).column("p");r=s=>i[s]}return pvt(e,r)}function L2e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Jb(e,r,n),l=xc(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(C=>{if(!a.has(C)){const x=l.add(C,[]);c.has(C)||(f.push(e.column(C)),d.push(x))}}),t.forEach(C=>{a.has(C)||(l.has(C)||l.add(C,[]),h.push(l.data[C]))});const p=o?l.add(o,[]):null;let g=0;const y=f.length,b=h.length,_=(C,x)=>{for(let T=0;T<y;++T)d[T].length=g+x,d[T].fill(f[T].get(C),g,g+x)},E=p?(C,x)=>{for(let T=0;T<x;++T)p[C+T]=T}:()=>{};if(b===1){const C=u[0],x=h[0];e.scan((T,A)=>{const k=El(C(T,A)),N=Math.min(k.length,s);_(T,N);for(let P=0;P<N;++P)x[g+P]=k[P];E(g,N),g+=N})}else e.scan((C,x)=>{let T=0;const A=u.map(k=>{const N=El(k(C,x));return T=Math.min(Math.max(T,N.length),s),N});_(C,T);for(let k=0;k<b;++k){const N=h[k],P=A[k];for(let D=0;D<T;++D)N[g+D]=P[D]}E(g,T),g+=T});return e.create(l.new())}function gvt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Jb(e,r,n);return L2e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Ed(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Au(o)?t.columnName(o):o,ya(o)?i.set(o,ob(o)):Vi(o)?Jm(t,o).forEach(s):qa(o)?TCe(i,o):Xn(`Invalid ${e} value: ${o+""}`)};return El(n).forEach(s),r.preparse&&r.preparse(i),Tl(i,{table:t,...r})}function yvt(e,t,n){return gvt(e,Ed("fold",e,t),n)}function Qle(e,t,n,r){const i=n&&n.length;return vvt(i?bvt(e,n,r):e,t,i)}function vvt(e,{names:t,exprs:n,ops:r},i){const s=Jb(e,r,n),o=i?null:xc(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=ad(p)?p:d(h)})}),i?e:e.create(o)}function bvt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=N3(o);e.scan((p,g)=>a.add(u(p,g)));const l=e.columnNames(),c=xc(),f=l.map(p=>c.add(p,[]));l.forEach((p,g)=>{const y=i[p],b=f[g];e.scan(_=>b.push(y.get(_)))});const d=N3(o.map((p,g)=>y=>y[g])),h=wS("v","{"+f.map((p,g)=>`_${g}.push(v[$${g}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const g=n.reduce((b,_)=>b*_.length,r.size),y=new Uint32Array(g+(p-a.size));y.set(r.keys),Jle(r,n,(b,_)=>{a.has(d(b))||(h(b),y[p++]=_[0])}),c.groupby({...r,keys:y})}else Jle(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Jle(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const g=f[p];for(let y=0;y<r;++y)h[y]=c[y](g)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function zK(e,{names:t,exprs:n,ops:r}){const i=xc(),s=e.groups();return s&&O2e(i,s),_vt(t,n,s,ES(e,r),i),e.create(i.new())}function _vt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function wvt(e,t,n={}){if(t=Tl(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Xn(`Invalid impute column ${Qh(r)}`)),n.expand){const r={preparse:Evt,aggronly:!0},i=Ed("impute",e,n.expand,r),s=zK(e.ungroup(),i);return Qle(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Qle(e,t)}function Evt(e){e.forEach((t,n)=>t.field?e.set(n,Zxe(t+"")):0)}function xvt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function F2e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function Svt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function Tvt(e,t){const n=["i","a","j","b"];return wS(n,"{"+ZI(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function Cvt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,g=xc(),y=Array(p),b=Array(p);for(let C=0;C<r.length;++C)y[C]=g.add(r[C],[]),b[C]=i[C];const _=Tvt(y,b);if((Ur(n)?Ivt:Avt)(_,n,o,c,a,f,l,h,u,d),s.left)for(let C=0;C<u;++C)l[C]||_(a[C],o,-1,c);if(s.right)for(let C=0;C<d;++C)h[C]||_(-1,o,f[C],c);return e.create(g.new())}function Avt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function Ivt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,g,y,b,_,E=e;l>=c?(f=r,d=t,h=a,p=s,g=i,y=n,b=u,_=o):(f=i,d=n,h=u,p=o,g=r,y=t,b=a,_=s,E=(T,A,k,N)=>e(k,N,T,A));const C=Svt(_,g,y),x=p.length;for(let T=0;T<x;++T){const A=p[T],k=C.get(d(A,f));if(k){const N=k.length;for(let P=0;P<N;++P){const D=k[P];E(A,f,_[D],g),b[D]=1}h[T]=1}}}function tM(e,t,n){const r=new Map;El(n).forEach((s,o)=>{s=Au(s)?t.columnName(s):s,ya(s)?r.set(o,ob(s)):Vi(s)||qa(s)&&s.expr?r.set(o,s):Xn(`Invalid ${e} key value: ${s+""}`)});const i=Tl(r,{table:t,aggregate:!1,window:!1});return N3(i.exprs,!0)}function kvt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function VK(e,t,n){if(n)ya(n)?n=[n,n]:Ur(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=kvt(e.columnNames(),t.columnNames());r.length||Xn("Natural join requires shared column names."),n=[r,r]}return n}function j2e(e,t,n,r){return n.length!==r.length&&Xn("Mismatched number of join keys"),[tM("join",e,n),tM("join",t,r)]}const Rvt={aggregate:!1,window:!1},Nvt={...Rvt,index:1};function Zle(e,t,n,r,i={}){n=VK(e,t,n);const s={join:[e,t]};let o;if(Ur(n)){const[a,u]=n.map(El);o=j2e(e,t,a,u),r||(r=Pvt(e,a,u,i))}else o=Tl({on:n},s).exprs[0],r||(r=[ix(),ix()]);return Cvt(e,t,o,Dvt(e,t,r,s,i&&i.suffix),i)}function Pvt(e,t,n,r){const i=[];t.forEach((o,a)=>ya(o)&&o===n[a]?i.push(o):0);const s=ACe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Qh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,ix()]:[ix(),s]}function Dvt(e,t,n,r,i=[]){if(Ur(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Ed("join",e,n[0],r)),u--&&(o=Ed("join",t,n[1],Nvt)),u--&&(a=Tl(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&ece(s.names,l,i[0]||"_1"),i[1]!==""&&ece(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Tl(n,r)}function ece(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function Ovt(e,t,n,r={}){const i=new $2e(e.totalRows());return(Ur(n)?Mvt:$vt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function Mvt(e,t,n,[r,i]){const s=F2e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function $vt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function tce(e,t,n,r){n=VK(e,t,n);const i=Ur(n)?j2e(e,t,...n.map(El)):Tl({on:n},{join:[e,t]}).exprs[0];return Ovt(e,t,i,r)}function Lvt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=xc(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(Dr)));const l=F2e(t,r),c=wS(["lr","rr","data"],"{"+ZI(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Jb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function Fvt(e,t,n,r){return n=VK(e,t,n),Lvt(e,t,[tM("lookup",e,n[0]),tM("lookup",t,n[1])],Ed("lookup",t,r))}const xz=(e,t)=>e??t;function jvt(e,t,n,r={}){const{keys:i,keyColumn:s}=Bvt(e,t,r),o=xz(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>ES(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,g)=>l===s[p]?d(p,g):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(Uvt(n,a,e.groups(),u))}function Bvt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=xz(n.sort,!0),s=xz(n.keySeparator,"_"),o=Jb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=ES(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function Uvt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=xc(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&O2e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let g=0;g<s;++g)p[g]=d(g,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function zvt(e,t,n,r){return jvt(e,Ed("fold",e,t),Ed("fold",e,n,{preparse:Vvt,aggronly:!0}),r)}function Vvt(e){e.forEach((t,n)=>t.field?e.set(n,Xxe(t+"")):0)}function Hvt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),FK(e,Jm(e,t,n))}function nce(e,t){return zK(e,Tl(t,{table:e,aggronly:!0,window:!1}))}function qvt(e,t,n,r){return(t?r?Gvt:Wvt:r?Kvt:Yvt)(e.length,e,n,r)}function Wvt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*dS()|0];return t}function Gvt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=M2e(jK).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*dS())];return t}function Yvt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*dS();s<e&&(t[s|0]=n[i])}return t}function Kvt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(dS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function Xvt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=dS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function Qvt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):qvt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&Xvt(u),e.reify(u)}function Jvt(e,t,n={}){return Qvt(e,Zvt(e,t),e1t(e,n.weight),n)}const B2e=e=>t=>e.get(t)||0;function Zvt(e,t){return Au(t)?()=>t:B2e(zK(e,Tl({size:t},{table:e,window:!1})).column("size"))}function e1t(e,t){return t==null?null:(t=Au(t)?e.columnName(t):t,B2e(ya(t)?e.column(t):UK(e,Tl({w:t},{table:e}),{drop:!0}).column("w")))}function t1t(e,t){return FK(e,Jm(e,t))}function n1t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Jb(e,r,n),l=xc(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=r1t(e,u[d],a),g=p.length;for(let y=0;y<g;++y)l.add(s[y]||`${h}_${y+1}`,p[y])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function r1t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=El(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(Dr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function i1t(e,t,n){return n1t(e,Ed("spread",e,t),n)}function s1t(e,t){return e.concat(t).dedupe()}function o1t(e,t,n){return L2e(e,Ed("unroll",e,t),n&&n.drop?{...n,drop:Ed("unroll",e,n.drop).names}:n)}function a1t(e,t){return e.create({groups:u1t(e,t)})}function u1t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Jb(e,r,n);const o=N3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",g=l[p];u[h]=g??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",g=l[p];u[h]=g??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function l1t(e,t){return a1t(e,Ed("groupby",e,t))}function c1t(e,t){return e.create({order:t})}const f1t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function d1t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Tl(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const g=y=>`fn[${i.length}](${y}, data)`;r.push([g("a"),g("b")]),i.push(p.escape)}else r.push([R3(p,{index:"a",op:o}),R3(p,{index:"b",op:a})])},window:!1}),l=ES(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[g,y]=r[h];d+=f1t(g,y,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function h1t(e,t){return c1t(e,p1t(e,t))}function p1t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(qa(o)&&!Vi(o))for(const a in o)i(o[a]);else i(Au(o)?ob(s,e.columnName(o)):ya(o)?ob(s):Vi(o)?s:Xn(`Invalid orderby field: ${s+""}`))}),d1t(e,r)}function m1t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=xc();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>Dr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function g1t(e,t){const n=xc(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?D2e(e,t,r):[P2e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const g=n.data[h]=Array(f),y=i[p];for(let b=0,_=0;b<a;++b)g.fill(y(o[b],d),_,_+=u[b+1])})}return e.create(n.new())}function y1t(e){return e.isGrouped()?e.create({groups:null}):e}function v1t(e){return e.isOrdered()?e.create({order:null}):e}const b1t={__antijoin:(e,t,n)=>tce(e,t,n,{anti:!0}),__count:(e,t={})=>nce(e,{[t.as||"count"]:Qxe()}),__cross:(e,t,n,r)=>Zle(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:m1t,__dedupe:Wyt,__derive:fvt,__except:dvt,__filter:mvt,__fold:yvt,__impute:wvt,__intersect:xvt,__join:Zle,__lookup:Fvt,__pivot:zvt,__relocate:R2e,__rename:Hvt,__rollup:nce,__sample:Jvt,__select:t1t,__semijoin:tce,__spread:i1t,__union:s1t,__unroll:o1t,__groupby:l1t,__orderby:h1t,__ungroup:y1t,__unorder:v1t,__reduce:g1t};Object.assign(gm.prototype,b1t);function U2e(e,t){return gm.from(e,t)}function fE(e){return S6(e,{escape:!0,toString(){Xn("Escaped values can not be serialized.")}})}gm.prototype;function nd(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function by(e){return!!e&&!!e[Qi]}function tg(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===I1t}(e)||Array.isArray(e)||!!e[lce]||!!(!((t=e.constructor)===null||t===void 0)&&t[lce])||HK(e)||qK(e))}function ab(e,t,n){n===void 0&&(n=!1),xS(e)===0?(n?Object.keys:hE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function xS(e){var t=e[Qi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:HK(e)?2:qK(e)?3:0}function dE(e,t){return xS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function _1t(e,t){return xS(e)===2?e.get(t):e[t]}function z2e(e,t,n){var r=xS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function V2e(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function HK(e){return C1t&&e instanceof Map}function qK(e){return A1t&&e instanceof Set}function r1(e){return e.o||e.t}function WK(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=q2e(e);delete t[Qi];for(var n=hE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function GK(e,t){return t===void 0&&(t=!1),YK(e)||by(e)||!tg(e)||(xS(e)>1&&(e.set=e.add=e.clear=e.delete=w1t),Object.freeze(e),t&&ab(e,function(n,r){return GK(r,!0)},!0)),e}function w1t(){nd(2)}function YK(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Mh(e){var t=Az[e];return t||nd(18,e),t}function E1t(e,t){Az[e]||(Az[e]=t)}function Sz(){return IA}function _9(e,t){t&&(Mh("Patches"),e.u=[],e.s=[],e.v=t)}function nM(e){Tz(e),e.p.forEach(x1t),e.p=null}function Tz(e){e===IA&&(IA=e.l)}function rce(e){return IA={p:[],l:IA,h:e,m:!0,_:0}}function x1t(e){var t=e[Qi];t.i===0||t.i===1?t.j():t.g=!0}function w9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Mh("ES5").S(t,e,r),r?(n[Qi].P&&(nM(t),nd(4)),tg(e)&&(e=rM(t,e),t.l||iM(t,e)),t.u&&Mh("Patches").M(n[Qi].t,e,t.u,t.s)):e=rM(t,n,[]),nM(t),t.u&&t.v(t.u,t.s),e!==H2e?e:void 0}function rM(e,t,n){if(YK(t))return t;var r=t[Qi];if(!r)return ab(t,function(a,u){return ice(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return iM(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=WK(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),ab(s,function(a,u){return ice(e,r,i,a,u,n,o)}),iM(e,i,!1),n&&e.u&&Mh("Patches").N(r,n,e.u,e.s)}return r.o}function ice(e,t,n,r,i,s,o){if(by(i)){var a=rM(e,i,s&&t&&t.i!==3&&!dE(t.R,r)?s.concat(r):void 0);if(z2e(n,r,a),!by(a))return;e.m=!1}else o&&n.add(i);if(tg(i)&&!YK(i)){if(!e.h.D&&e._<1)return;rM(e,i),t&&t.A.l||iM(e,i)}}function iM(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&GK(t,n)}function E9(e,t){var n=e[Qi];return(n?r1(n):e)[t]}function sce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function b0(e){e.P||(e.P=!0,e.l&&b0(e.l))}function x9(e){e.o||(e.o=WK(e.t))}function Cz(e,t,n){var r=HK(t)?Mh("MapSet").F(t,n):qK(t)?Mh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Sz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=kA;o&&(u=[a],l=FC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Mh("ES5").J(t,n);return(n?n.A:Sz()).p.push(r),r}function S1t(e){return by(e)||nd(22,e),function t(n){if(!tg(n))return n;var r,i=n[Qi],s=xS(n);if(i){if(!i.P&&(i.i<4||!Mh("ES5").K(i)))return i.t;i.I=!0,r=oce(n,s),i.I=!1}else r=oce(n,s);return ab(r,function(o,a){i&&_1t(i.t,o)===a||z2e(r,o,t(a))}),s===3?new Set(r):r}(e)}function oce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return WK(e)}function T1t(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Qi];return kA.get(u,s)},set:function(u){var l=this[Qi];kA.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Qi];if(!a.P)switch(a.i){case 5:r(a)&&b0(a);break;case 4:n(a)&&b0(a)}}}function n(s){for(var o=s.t,a=s.k,u=hE(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Qi){var f=o[c];if(f===void 0&&!dE(o,c))return!0;var d=a[c],h=d&&d[Qi];if(h?h.t!==f:!V2e(d,f))return!0}}var p=!!o[Qi];return u.length!==hE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};E1t("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=q2e(f);delete p[Qi];for(var g=hE(p),y=0;y<g.length;y++){var b=g[y];p[b]=e(b,c||!!p[b].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:Sz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Qi,{value:l,writable:!0}),u},S:function(s,o,a){a?by(o)&&o[Qi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Qi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)ab(d,function(E){E!==Qi&&(f[E]!==void 0||dE(f,E)?h[E]||u(d[E]):(h[E]=!0,b0(c)))}),ab(f,function(E){d[E]!==void 0||dE(d,E)||(h[E]=!1,b0(c))});else if(p===5){if(r(c)&&(b0(c),h.length=!0),d.length<f.length)for(var g=d.length;g<f.length;g++)h[g]=!1;else for(var y=f.length;y<d.length;y++)h[y]=!0;for(var b=Math.min(d.length,f.length),_=0;_<b;_++)d.hasOwnProperty(_)||(h[_]=!0),h[_]===void 0&&u(d[_])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var ace,IA,KK=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",C1t=typeof Map<"u",A1t=typeof Set<"u",uce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H2e=KK?Symbol.for("immer-nothing"):((ace={})["immer-nothing"]=!0,ace),lce=KK?Symbol.for("immer-draftable"):"__$immer_draftable",Qi=KK?Symbol.for("immer-state"):"__$immer_state",I1t=""+Object.prototype.constructor,hE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,q2e=Object.getOwnPropertyDescriptors||function(e){var t={};return hE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Az={},kA={get:function(e,t){if(t===Qi)return e;var n=r1(e);if(!dE(n,t))return function(i,s,o){var a,u=sce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!tg(r)?r:r===E9(e.t,t)?(x9(e),e.o[t]=Cz(e.A.h,r,e)):r},has:function(e,t){return t in r1(e)},ownKeys:function(e){return Reflect.ownKeys(r1(e))},set:function(e,t,n){var r=sce(r1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=E9(r1(e),t),s=i==null?void 0:i[Qi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(V2e(n,i)&&(n!==void 0||dE(e.t,t)))return!0;x9(e),b0(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return E9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,x9(e),b0(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=r1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){nd(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){nd(12)}},FC={};ab(kA,function(e,t){FC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),FC.deleteProperty=function(e,t){return FC.set.call(this,e,t,void 0)},FC.set=function(e,t,n){return kA.set.call(this,e[0],t,n,e[0])};var k1t=function(){function e(n){var r=this;this.O=uce,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(g){var y=this;g===void 0&&(g=a);for(var b=arguments.length,_=Array(b>1?b-1:0),E=1;E<b;E++)_[E-1]=arguments[E];return u.produce(g,function(C){var x;return(x=s).call.apply(x,[y,C].concat(_))})}}var l;if(typeof s!="function"&&nd(6),o!==void 0&&typeof o!="function"&&nd(7),tg(i)){var c=rce(r),f=Cz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?nM(c):Tz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(g){return _9(c,o),w9(g,c)},function(g){throw nM(c),g}):(_9(c,o),w9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===H2e&&(l=void 0),r.D&&GK(l,!0),o){var h=[],p=[];Mh("Patches").M(i,l,h,p),o(h,p)}return l}nd(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){tg(n)||nd(8),by(n)&&(n=S1t(n));var r=rce(this),i=Cz(this,n,void 0);return i[Qi].C=!0,Tz(r),i},t.finishDraft=function(n,r){var i=n&&n[Qi],s=i.A;return _9(s,r),w9(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!uce&&nd(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Mh("Patches").$;return by(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),pc=new k1t,W2e=pc.produce;pc.produceWithPatches.bind(pc);pc.setAutoFreeze.bind(pc);pc.setUseProxies.bind(pc);pc.applyPatches.bind(pc);pc.createDraft.bind(pc);pc.finishDraft.bind(pc);function RA(e){"@babel/helpers - typeof";return RA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RA(e)}function R1t(e,t){if(RA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(RA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N1t(e){var t=R1t(e,"string");return RA(t)=="symbol"?t:t+""}function P1t(e,t,n){return(t=N1t(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function fce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cce(Object(n),!0).forEach(function(r){P1t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cce(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Na(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var dce=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),S9=function(){return Math.random().toString(36).substring(7).split("").join(".")},sM={INIT:"@@redux/INIT"+S9(),REPLACE:"@@redux/REPLACE"+S9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+S9()}};function D1t(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function G2e(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Na(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Na(1));return n(G2e)(e,t)}if(typeof e!="function")throw new Error(Na(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Na(3));return s}function f(g){if(typeof g!="function")throw new Error(Na(4));if(u)throw new Error(Na(5));var y=!0;return l(),a.push(g),function(){if(y){if(u)throw new Error(Na(6));y=!1,l();var _=a.indexOf(g);a.splice(_,1),o=null}}}function d(g){if(!D1t(g))throw new Error(Na(7));if(typeof g.type>"u")throw new Error(Na(8));if(u)throw new Error(Na(9));try{u=!0,s=i(s,g)}finally{u=!1}for(var y=o=a,b=0;b<y.length;b++){var _=y[b];_()}return g}function h(g){if(typeof g!="function")throw new Error(Na(10));i=g,d({type:sM.REPLACE})}function p(){var g,y=f;return g={subscribe:function(_){if(typeof _!="object"||_===null)throw new Error(Na(11));function E(){_.next&&_.next(c())}E();var C=y(E);return{unsubscribe:C}}},g[dce]=function(){return this},g}return d({type:sM.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[dce]=p,r}function O1t(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:sM.INIT});if(typeof r>"u")throw new Error(Na(12));if(typeof n(void 0,{type:sM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Na(13))})}function M1t(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{O1t(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],g=u[h],y=p(g,l);if(typeof y>"u")throw l&&l.type,new Error(Na(14));f[h]=y,c=c||y!==g}return c=c||s.length!==Object.keys(u).length,c?f:u}}function oM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function $1t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Na(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=oM.apply(void 0,a)(i.dispatch),fce(fce({},i),{},{dispatch:s})}}}function Y2e(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var Iz=Y2e();Iz.withExtraArgument=Y2e;var K2e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ek=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},ub=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},L1t=Object.defineProperty,F1t=Object.defineProperties,j1t=Object.getOwnPropertyDescriptors,hce=Object.getOwnPropertySymbols,B1t=Object.prototype.hasOwnProperty,U1t=Object.prototype.propertyIsEnumerable,pce=function(e,t,n){return t in e?L1t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},V0=function(e,t){for(var n in t||(t={}))B1t.call(t,n)&&pce(e,n,t[n]);if(hce)for(var r=0,i=hce(t);r<i.length;r++){var n=i[r];U1t.call(t,n)&&pce(e,n,t[n])}return e},T9=function(e,t){return F1t(e,j1t(t))},tk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},z1t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?oM:oM.apply(null,arguments)};function X2e(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var V1t=function(e){return e&&typeof e.match=="function"};function $h(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return V0(V0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function H1t(e){return X2e(e)&&"type"in e}var q1t=function(e){K2e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,ub([void 0],n[0].concat(this)))):new(t.bind.apply(t,ub([void 0],n.concat(this))))},t}(Array),W1t=function(e){K2e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,ub([void 0],n[0].concat(this)))):new(t.bind.apply(t,ub([void 0],n.concat(this))))},t}(Array);function kz(e){return tg(e)?W2e(e,function(){}):e}function G1t(e){return typeof e=="boolean"}function Y1t(){return function(t){return K1t(t)}}function K1t(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new q1t;return n&&(G1t(n)?r.push(Iz):r.push(Iz.withExtraArgument(n.extraArgument))),r}var X1t=!0;function Q1t(e){var t=Y1t(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(X2e(i))h=M1t(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var g=$1t.apply(void 0,p),y=oM;u&&(y=z1t(V0({trace:!X1t},typeof u=="object"&&u)));var b=new W1t(g),_=b;Array.isArray(d)?_=ub([g],d):typeof d=="function"&&(_=d(b));var E=y.apply(void 0,_);return G2e(h,c,E)}function Q2e(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function J1t(e){return typeof e=="function"}function Z1t(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?Q2e(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(J1t(e))u=function(){return kz(e())};else{var l=kz(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=ub([s[d.type]],o.filter(function(p){var g=p.matcher;return g(d)}).map(function(p){var g=p.reducer;return g}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,g){if(g)if(by(p)){var y=p,b=g(y,d);return b===void 0?p:b}else{if(tg(p))return W2e(p,function(_){return g(_,d)});var b=g(p,d);if(b===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return p},f)}return c.getInitialState=u,c}function ebt(e,t){return e+"/"+t}function tbt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:kz(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=ebt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?$h(d,p):$h(d)});function u(){var c=typeof e.extraReducers=="function"?Q2e(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,g=c[2],y=g===void 0?void 0:g,b=V0(V0({},d),o);return Z1t(n,function(_){for(var E in b)_.addCase(E,b[E]);for(var C=0,x=p;C<x.length;C++){var T=x[C];_.addMatcher(T.matcher,T.reducer)}y&&_.addDefaultCase(y)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var nbt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",J2e=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=nbt[Math.random()*64|0];return t},rbt=["name","message","stack","code"],C9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),mce=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),ibt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=rbt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=$h(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:T9(V0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=$h(t+"/pending",function(l,c,f){return{payload:void 0,meta:T9(V0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=$h(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||ibt)(l||"Rejected"),meta:T9(V0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):J2e(),p=new a,g;function y(_){g=_,p.abort()}var b=function(){return tk(this,null,function(){var _,E,C,x,T,A,k;return ek(this,function(N){switch(N.label){case 0:return N.trys.push([0,4,,5]),x=(_=r==null?void 0:r.condition)==null?void 0:_.call(r,l,{getState:f,extra:d}),obt(x)?[4,x]:[3,2];case 1:x=N.sent(),N.label=2;case 2:if(x===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(P,D){return p.signal.addEventListener("abort",function(){return D({name:"AbortError",message:g||"Aborted"})})}),c(s(h,l,(E=r==null?void 0:r.getPendingMeta)==null?void 0:E.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:y,rejectWithValue:function(P,D){return new C9(P,D)},fulfillWithValue:function(P,D){return new mce(P,D)}})).then(function(P){if(P instanceof C9)throw P;return P instanceof mce?i(P.payload,h,l,P.meta):i(P,h,l)})])];case 3:return C=N.sent(),[3,5];case 4:return A=N.sent(),C=A instanceof C9?o(null,h,l,A.payload,A.meta):o(A,h,l),[3,5];case 5:return k=r&&!r.dispatchConditionRejection&&o.match(C)&&C.meta.condition,k||c(C),[2,C]}})})}();return Object.assign(b,{abort:y,requestId:h,arg:l,unwrap:function(){return b.then(sbt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function sbt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function obt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var abt=function(e,t){return V1t(e)?e.match(t):e(t)};function gce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return abt(r,n)})}}var XK=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Rz=function(){},Z2e=function(e,t){return t===void 0&&(t=Rz),e.catch(t),e},eAe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},pE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},ubt="task",tAe="listener",nAe="completed",QK="cancelled",lbt="task-"+QK,cbt="task-"+nAe,rAe=tAe+"-"+QK,fbt=tAe+"-"+nAe,T6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=ubt+" "+QK+" (reason: "+t+")"}return e}(),mE=function(e){if(e.aborted)throw new T6(e.reason)};function iAe(e,t){var n=Rz;return new Promise(function(r,i){var s=function(){return i(new T6(e.reason))};if(e.aborted){s();return}n=eAe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Rz})}var dbt=function(e,t){return tk(void 0,null,function(){var n,r;return ek(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof T6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},aM=function(e){return function(t){return Z2e(iAe(e,t).then(function(n){return mE(e),n}))}},sAe=function(e){var t=aM(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},hbt=Object.assign,yce={},nk="listenerMiddleware",pbt=function(e,t){var n=function(r){return eAe(e,function(){return pE(r,e.reason)})};return function(r,i){XK(r,"taskExecutor");var s=new AbortController;n(s);var o=dbt(function(){return tk(void 0,null,function(){var a;return ek(this,function(u){switch(u.label){case 0:return mE(e),mE(s.signal),[4,r({pause:aM(s.signal),delay:sAe(s.signal),signal:s.signal})];case 1:return a=u.sent(),mE(s.signal),[2,a]}})})},function(){return pE(s,cbt)});return i!=null&&i.autoJoin&&t.push(o),{result:aM(e)(o),cancel:function(){pE(s,lbt)}}}},mbt=function(e,t){var n=function(r,i){return tk(void 0,null,function(){var s,o,a,u;return ek(this,function(l){switch(l.label){case 0:mE(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,iAe(t,Promise.race(a))];case 2:return u=l.sent(),mE(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return Z2e(n(r,i))}},oAe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=$h(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return XK(s,"options.listener"),{predicate:i,type:t,effect:s}},gbt=function(e){var t=oAe(e),n=t.type,r=t.predicate,i=t.effect,s=J2e(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},Nz=function(e){e.pending.forEach(function(t){pE(t,rAe)})},ybt=function(e){return function(){e.forEach(Nz),e.clear()}},vce=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},vbt=$h(nk+"/add"),bbt=$h(nk+"/removeAll"),_bt=$h(nk+"/remove"),wbt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,ub([nk+"/error"],e))};function Ebt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?wbt:i;XK(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&Nz(h)}},a=function(h){for(var p=0,g=Array.from(n.values());p<g.length;p++){var y=g[p];if(h(y))return y}},u=function(h){var p=a(function(g){return g.effect===h.effect});return p||(p=gbt(h)),o(p)},l=function(h){var p=oAe(h),g=p.type,y=p.effect,b=p.predicate,_=a(function(E){var C=typeof g=="string"?E.type===g:E.predicate===b;return C&&E.effect===y});return _&&(_.unsubscribe(),h.cancelActive&&Nz(_)),!!_},c=function(h,p,g,y){return tk(t,null,function(){var b,_,E,C;return ek(this,function(x){switch(x.label){case 0:b=new AbortController,_=mbt(u,b.signal),E=[],x.label=1;case 1:return x.trys.push([1,3,4,6]),h.pending.add(b),[4,Promise.resolve(h.effect(p,hbt({},g,{getOriginalState:y,condition:function(T,A){return _(T,A).then(Boolean)},take:_,delay:sAe(b.signal),pause:aM(b.signal),extra:r,signal:b.signal,fork:pbt(b.signal,E),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,A,k){T!==b&&(pE(T,rAe),k.delete(T))})}})))];case 2:return x.sent(),[3,6];case 3:return C=x.sent(),C instanceof T6||vce(s,C,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(E)];case 5:return x.sent(),pE(b,fbt),h.pending.delete(b),[7];case 6:return[2]}})})},f=ybt(n),d=function(h){return function(p){return function(g){if(!H1t(g))return p(g);if(vbt.match(g))return u(g.payload);if(bbt.match(g)){f();return}if(_bt.match(g))return l(g.payload);var y=h.getState(),b=function(){if(y===yce)throw new Error(nk+": getOriginalState can only be called synchronously");return y},_;try{if(_=p(g),n.size>0)for(var E=h.getState(),C=Array.from(n.values()),x=0,T=C;x<T.length;x++){var A=T[x],k=!1;try{k=A.predicate(g,E,y)}catch(N){k=!1,vce(s,N,{raisedBy:"predicate"})}k&&c(A,g,h,b)}}finally{y=yce}return _}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var bce;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);T1t();function xbt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let UN;const Sbt=new Uint8Array(16);function Tbt(){if(!UN&&(UN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!UN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return UN(Sbt)}const ta=[];for(let e=0;e<256;++e)ta.push((e+256).toString(16).slice(1));function Cbt(e,t=0){return(ta[e[t+0]]+ta[e[t+1]]+ta[e[t+2]]+ta[e[t+3]]+"-"+ta[e[t+4]]+ta[e[t+5]]+"-"+ta[e[t+6]]+ta[e[t+7]]+"-"+ta[e[t+8]]+ta[e[t+9]]+"-"+ta[e[t+10]]+ta[e[t+11]]+ta[e[t+12]]+ta[e[t+13]]+ta[e[t+14]]+ta[e[t+15]]).toLowerCase()}const Abt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),_ce={randomUUID:Abt};function wce(e,t,n){if(_ce.randomUUID&&!t&&!e)return _ce.randomUUID();e=e||{};const r=e.random||(e.rng||Tbt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Cbt(r)}class Lh{static get(){let t=wce();for(;this.ids.has(t);)t=wce();return this.ids.set(t,!0),t}}Lh.ids=new Map;function Fh(e){return"parent"in e}function Ibt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Lh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Lh.get(),createdOn:Date.now(),val:r}]:[];return{id:Lh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function kbt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Lh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Lh.get(),createdOn:Date.now(),val:s}]:[];return{id:Lh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function bs(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=Fbt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function lb(e){return!!e&&!!e[mc]}function _y(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===jbt}(e)||Array.isArray(e)||!!e[C2]||!!(!((t=e.constructor)===null||t===void 0)&&t[C2])||C6(e)||A6(e))}function ax(e,t,n){n===void 0&&(n=!1),wy(e)===0?(n?Object.keys:rX)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function wy(e){var t=e[mc];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:C6(e)?2:A6(e)?3:0}function NA(e,t){return wy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function OD(e,t){return wy(e)===2?e.get(t):e[t]}function aAe(e,t,n){var r=wy(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Rbt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function C6(e){return $bt&&e instanceof Map}function A6(e){return Lbt&&e instanceof Set}function i1(e){return e.o||e.t}function JK(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Bbt(e);delete t[mc];for(var n=rX(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function ZK(e,t){return t===void 0&&(t=!1),eX(e)||lb(e)||!_y(e)||(wy(e)>1&&(e.set=e.add=e.clear=e.delete=Nbt),Object.freeze(e),t&&ax(e,function(n,r){return ZK(r,!0)},!0)),e}function Nbt(){bs(2)}function eX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function jh(e){var t=Mz[e];return t||bs(18,e),t}function Pbt(e,t){Mz[e]||(Mz[e]=t)}function Ece(){return{}.NODE_ENV==="production"||ux||bs(0),ux}function A9(e,t){t&&(jh("Patches"),e.u=[],e.s=[],e.v=t)}function uM(e){Pz(e),e.p.forEach(Dbt),e.p=null}function Pz(e){e===ux&&(ux=e.l)}function xce(e){return ux={p:[],l:ux,h:e,m:!0,_:0}}function Dbt(e){var t=e[mc];t.i===0||t.i===1?t.j():t.O=!0}function I9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||jh("ES5").S(t,e,r),r?(n[mc].P&&(uM(t),bs(4)),_y(e)&&(e=lM(t,e),t.l||cM(t,e)),t.u&&jh("Patches").M(n[mc].t,e,t.u,t.s)):e=lM(t,n,[]),uM(t),t.u&&t.v(t.u,t.s),e!==nX?e:void 0}function lM(e,t,n){if(eX(t))return t;var r=t[mc];if(!r)return ax(t,function(s,o){return Sce(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return cM(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=JK(r.k):r.o;ax(r.i===3?new Set(i):i,function(s,o){return Sce(e,r,i,s,o,n)}),cM(e,i,!1),n&&e.u&&jh("Patches").R(r,n,e.u,e.s)}return r.o}function Sce(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&bs(5),lb(i)){var o=lM(e,i,s&&t&&t.i!==3&&!NA(t.D,r)?s.concat(r):void 0);if(aAe(n,r,o),!lb(o))return;e.m=!1}if(_y(i)&&!eX(i)){if(!e.h.F&&e._<1)return;lM(e,i),t&&t.A.l||cM(e,i)}}function cM(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&ZK(t,n)}function k9(e,t){var n=e[mc];return(n?i1(n):e)[t]}function Tce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Dz(e){e.P||(e.P=!0,e.l&&Dz(e.l))}function R9(e){e.o||(e.o=JK(e.t))}function Oz(e,t,n){var r=C6(t)?jh("MapSet").N(t,n):A6(t)?jh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Ece(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=$z;o&&(u=[a],l=jC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):jh("ES5").J(t,n);return(n?n.A:Ece()).p.push(r),r}function Obt(e){return lb(e)||bs(22,e),function t(n){if(!_y(n))return n;var r,i=n[mc],s=wy(n);if(i){if(!i.P&&(i.i<4||!jh("ES5").K(i)))return i.t;i.I=!0,r=Cce(n,s),i.I=!1}else r=Cce(n,s);return ax(r,function(o,a){i&&OD(i.t,o)===a||aAe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Cce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return JK(e)}function Mbt(){function e(r){if(!_y(r))return r;if(Array.isArray(r))return r.map(e);if(C6(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(A6(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return NA(r,C2)&&(i[C2]=r[C2]),i}function t(r){return lb(r)?e(r):r}var n="add";Pbt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=wy(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||bs(24),typeof u=="function"&&f==="prototype"&&bs(24),typeof(u=OD(u,f))!="object"&&bs(15,o.join("/"))}var d=wy(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:bs(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:bs(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;ax(a.D,function(h,p){var g=OD(f,h),y=OD(d,h),b=p?NA(f,h)?"replace":n:"remove";if(g!==y||b!=="replace"){var _=u.concat(h);l.push(b==="remove"?{op:b,path:_}:{op:b,path:_,value:y}),c.push(b===n?{op:"remove",path:_}:b==="remove"?{op:n,path:_,value:t(g)}:{op:"replace",path:_,value:t(g)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var g=[c,l];l=g[0],c=g[1]}for(var y=0;y<f.length;y++)if(d[y]&&h[y]!==f[y]){var b=u.concat([y]);l.push({op:"replace",path:b,value:t(h[y])}),c.push({op:"replace",path:b,value:t(f[y])})}for(var _=f.length;_<h.length;_++){var E=u.concat([_]);l.push({op:n,path:E,value:t(h[_])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var g=u.concat([h]);l.push({op:"remove",path:g,value:p}),c.unshift({op:n,path:g,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var g=u.concat([h]);l.push({op:n,path:g,value:p}),c.unshift({op:"remove",path:g,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===nX?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Ace,ux,tX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",$bt=typeof Map<"u",Lbt=typeof Set<"u",Ice=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",nX=tX?Symbol.for("immer-nothing"):((Ace={})["immer-nothing"]=!0,Ace),C2=tX?Symbol.for("immer-draftable"):"__$immer_draftable",mc=tX?Symbol.for("immer-state"):"__$immer_state",Fbt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},jbt=""+Object.prototype.constructor,rX=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Bbt=Object.getOwnPropertyDescriptors||function(e){var t={};return rX(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Mz={},$z={get:function(e,t){if(t===mc)return e;var n=i1(e);if(!NA(n,t))return function(i,s,o){var a,u=Tce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!_y(r)?r:r===k9(e.t,t)?(R9(e),e.o[t]=Oz(e.A.h,r,e)):r},has:function(e,t){return t in i1(e)},ownKeys:function(e){return Reflect.ownKeys(i1(e))},set:function(e,t,n){var r=Tce(i1(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=k9(i1(e),t),s=i==null?void 0:i[mc];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Rbt(n,i)&&(n!==void 0||NA(e.t,t)))return!0;R9(e),Dz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return k9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,R9(e),Dz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=i1(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){bs(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){bs(12)}},jC={};ax($z,function(e,t){jC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),jC.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&bs(13),jC.set.call(this,e,t,void 0)},jC.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&bs(14),$z.set.call(this,e[0],t,n,e[0])};var Ubt=function(){function e(n){var r=this;this.g=Ice,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(g){var y=this;g===void 0&&(g=a);for(var b=arguments.length,_=Array(b>1?b-1:0),E=1;E<b;E++)_[E-1]=arguments[E];return u.produce(g,function(C){var x;return(x=s).call.apply(x,[y,C].concat(_))})}}var l;if(typeof s!="function"&&bs(6),o!==void 0&&typeof o!="function"&&bs(7),_y(i)){var c=xce(r),f=Oz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?uM(c):Pz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(g){return A9(c,o),I9(g,c)},function(g){throw uM(c),g}):(A9(c,o),I9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===nX&&(l=void 0),r.F&&ZK(l,!0),o){var h=[],p=[];jh("Patches").M(i,l,h,p),o(h,p)}return l}bs(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){_y(n)||bs(8),lb(n)&&(n=Obt(n));var r=xce(this),i=Oz(this,n,void 0);return i[mc].C=!0,Pz(r),i},t.finishDraft=function(n,r){var i=n&&n[mc];({}).NODE_ENV!=="production"&&(i&&i.C||bs(9),i.I&&bs(10));var s=i.A;return A9(s,r),I9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Ice&&bs(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=jh("Patches").$;return lb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),gc=new Ubt,zbt=gc.produce;gc.produceWithPatches.bind(gc);gc.setAutoFreeze.bind(gc);gc.setUseProxies.bind(gc);gc.applyPatches.bind(gc);gc.createDraft.bind(gc);gc.finishDraft.bind(gc);function Vbt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=Ibt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return tbt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Lh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Lh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function Hbt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=Vbt(e),s=Ebt();s.startListening({matcher:gce(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=gce(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=Q1t({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Lh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var qbt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wbt=Object.prototype.hasOwnProperty;function Lz(e,t){return Wbt.call(e,t)}function Fz(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Lz(e,i)&&r.push(i);return r}function fl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function jz(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function s1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function uAe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Bz(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Bz(e[t]))return!0}else if(typeof e=="object"){for(var r=Fz(e),i=r.length,s=0;s<i;s++)if(Bz(e[r[s]]))return!0}}return!1}function kce(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var lAe=function(e){qbt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,kce(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=kce(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),ms=lAe,Gbt=fl,Vw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=fM(n,this.path);r&&(r=fl(r));var i=j1(n,{op:"remove",path:this.from}).removed;return j1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=fM(n,this.from);return j1(n,{op:"add",path:this.path,value:fl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:PA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Ybt={add:function(e,t,n){return jz(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Vw.move,copy:Vw.copy,test:Vw.test,_get:Vw._get};function fM(e,t){if(t=="")return e;var n={op:"_get",path:t};return j1(e,n),n.value}function j1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):dM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=fM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=PA(e,t.value),o.test===!1)throw new ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ms("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=fl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=dM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=uAe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!jz(h))throw new ms("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);jz(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ms("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=Ybt[t.op].call(t,l,h,e);if(o.test===!1)throw new ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Vw[t.op].call(t,l,h,e);if(o.test===!1)throw new ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ms("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function I6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ms("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=fl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=j1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function Kbt(e,t,n){var r=j1(e,t);if(r.test===!1)throw new ms("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function dM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ms("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Vw[e.op]){if(typeof e.path!="string")throw new ms("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ms('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ms("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ms("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Bz(e.value))throw new ms("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ms("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ms("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=cAe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ms("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ms("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function cAe(e,t,n){try{if(!Array.isArray(e))throw new ms("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)I6(fl(t),fl(e),n||!0);else{n=n||dM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ms)return i;throw i}}function PA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!PA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!PA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Xbt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ms,_areEquals:PA,applyOperation:j1,applyPatch:I6,applyReducer:Kbt,deepClone:Gbt,getValueByPointer:fM,validate:cAe,validator:dM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var iX=new WeakMap,Qbt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Jbt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Zbt(e){return iX.get(e)}function e_t(e,t){return e.observers.get(t)}function t_t(e,t){e.observers.delete(t.callback)}function n_t(e,t){t.unobserve()}function r_t(e,t){var n=[],r,i=Zbt(e);if(!i)i=new Qbt(e),iX.set(e,i);else{var s=e_t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=fl(e),t){r.callback=t,r.next=null;var o=function(){Uz(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Uz(r),clearTimeout(r.next),t_t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Jbt(t,r)),r}function Uz(e,t){t===void 0&&(t=!1);var n=iX.get(e.object);sX(n.value,e.object,e.patches,"",t),e.patches.length&&I6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function sX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=Fz(t),o=Fz(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Lz(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?sX(c,f,n,r+"/"+s1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+s1(l),value:fl(c)}),n.push({op:"replace",path:r+"/"+s1(l),value:fl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+s1(l),value:fl(c)}),n.push({op:"remove",path:r+"/"+s1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Lz(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+s1(l),value:fl(t[l])})}}}function fAe(e,t,n){n===void 0&&(n=!1);var r=[];return sX(e,t,r,"",n),r}const i_t=Object.freeze(Object.defineProperty({__proto__:null,compare:fAe,generate:Uz,observe:r_t,unobserve:n_t},Symbol.toStringTag,{value:"Module"}));Object.assign({},Xbt,i_t,{JsonPatchError:lAe,deepClone:fl,escapePathComponent:s1,unescapePathComponent:uAe});var BC=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(BC||{});function MD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=dAe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=MD(i,t);return I6(a,fl(o),!0,!1).newDocument}function s_t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function oX({registry:e,initialState:t}){let n=!1;const r=xbt(),i=Hbt(t);function s(c){return i.backend.nodes[c]}r.listen(BC.TRAVERSAL_START,()=>{n=!0}),r.listen(BC.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const g=f[p].at(-1);return g&&(h[p]=g),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return MD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let g=null,y=null;const b=MD(this.current,this.graph.backend.nodes);if(p)y={type:"checkpoint",val:f};else{const _=fAe(b,f);if(s_t(f,_)==="checkpoint")y={type:"checkpoint",val:f};else{const E=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;y={type:"patch",val:_,checkpointRef:E}}}if(!y)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(g=kbt({label:c,state:y,parent:this.current,sideEffects:d,event:h}),!g)throw new Error("State Node creation failed!");i.update(i.addNode(g))},async apply(c,f){const d=e.get(f.type),h=MD(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:g}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[g]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(BC.TRAVERSAL_START);const f=dAe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),g=s(f[h+1]);a_t(p,g)?Fh(p)&&d.push(...p.sideEffects.undo):Fh(g)&&d.push(...g.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(BC.TRAVERSAL_END)},undo(){const{current:c}=i;return Fh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return hAe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function o_t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Fh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Fh(r)&&(r=n[r.parent]),Fh(i)&&(i=n[i.parent]);return r.id}function dAe(e,t,n){const r=o_t(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Fh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Fh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function a_t(e,t){if(Fh(e)&&e.parent===t.id)return!0;if(Fh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function hAe(e,t){return{...e,children:e.children.map(n=>hAe(t[n],t)),name:`${e.label}`}}Mbt();function u_t(e){return e.length===2?zbt(e):e}class rk{static create(){return new rk}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:u_t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),$h(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var N9,Rce;function l_t(){if(Rce)return N9;Rce=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof Zc=="object"&&Zc&&Zc.Object===Object&&Zc,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),f=Object.prototype,d=f.toString,h=Math.max,p=Math.min,g=function(){return c.Date.now()};function y(x,T,A){var k,N,P,D,j,M,B=0,V=!1,z=!1,G=!0;if(typeof x!="function")throw new TypeError(e);T=C(T)||0,b(A)&&(V=!!A.leading,z="maxWait"in A,P=z?h(C(A.maxWait)||0,T):P,G="trailing"in A?!!A.trailing:G);function Y(he){var ge=k,be=N;return k=N=void 0,B=he,D=x.apply(be,ge),D}function Q(he){return B=he,j=setTimeout(K,T),V?Y(he):D}function L(he){var ge=he-M,be=he-B,Ce=T-ge;return z?p(Ce,P-be):Ce}function U(he){var ge=he-M,be=he-B;return M===void 0||ge>=T||ge<0||z&&be>=P}function K(){var he=g();if(U(he))return q(he);j=setTimeout(K,L(he))}function q(he){return j=void 0,G&&k?Y(he):(k=N=void 0,D)}function X(){j!==void 0&&clearTimeout(j),B=0,k=M=N=j=void 0}function Z(){return j===void 0?D:q(g())}function ae(){var he=g(),ge=U(he);if(k=arguments,N=this,M=he,ge){if(j===void 0)return Q(M);if(z)return j=setTimeout(K,T),Y(M)}return j===void 0&&(j=setTimeout(K,T)),D}return ae.cancel=X,ae.flush=Z,ae}function b(x){var T=typeof x;return!!x&&(T=="object"||T=="function")}function _(x){return!!x&&typeof x=="object"}function E(x){return typeof x=="symbol"||_(x)&&d.call(x)==n}function C(x){if(typeof x=="number")return x;if(E(x))return t;if(b(x)){var T=typeof x.valueOf=="function"?x.valueOf():x;x=b(T)?T+"":T}if(typeof x!="string")return x===0?x:+x;x=x.replace(r,"");var A=s.test(x);return A||o.test(x)?a(x.slice(2),A?2:8):i.test(x)?t:+x}return N9=y,N9}var c_t=l_t();const Hf=Ru(c_t);function pAe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=O.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=O.useMemo(()=>Xy(".2s"),[]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(uc,{children:w.jsx(Pi,{gap:3,children:w.jsx(pt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>w.jsxs("g",{transform:`translate(${n}, ${a})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),w.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const f_t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:pAe},Symbol.toStringTag,{value:"Module"})),P9=15;function mAe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=O.useState([0,0]),[l,c]=O.useState(!1);return O.useEffect(()=>{const f=Br("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const g=i.filter(y=>Math.abs(e(y[r.x])-p[0])<P9&&Math.abs(t(y[r.y])-p[1])<P9);if(h.ctrlKey||h.metaKey||!o){const y=new Set(s.ids);g.forEach(_=>{y.has(_[r.ids])&&y.delete(_[r.ids])});const b=Array.from(y);n([[a[0],a[1]],[a[0],a[1]]],e,t,b.length===0?"clear":"drag",b)}else{const y=Array.from(new Set([...s.ids,...g.map(b=>b[r.ids])]));y.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",y)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),w.jsx("circle",{style:{cursor:l?"pointer":"default"},r:P9,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const d_t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:mAe},Symbol.toStringTag,{value:"Module"})),Wi={top:15,left:100,right:15,bottom:70};function zz({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=dd(),[c]=dd(),[f]=dd(),[d,h]=O.useState(!0),p=O.useMemo(()=>l-Wi.left-Wi.right,[l]),g=O.useMemo(()=>u-Wi.top-Wi.bottom,[u]),y=O.useMemo(()=>{const P=Array.from(new Set(s.map(D=>D[i.category])));return Jy(ZL).domain(P)},[s,i.category]),{xMin:b,yMin:_,xMax:E,yMax:C}=O.useMemo(()=>{const P=s.map(z=>+z[i.x]).filter(z=>z!==null),[D,j]=jO(P),M=s.map(z=>+z[i.y]).filter(z=>z!==null),[B,V]=jO(M);return{xMin:D,xMax:j,yMin:B,yMax:V}},[s,i.x,i.y]),x=O.useMemo(()=>{const P=E-b;return p<=0?null:i.dataType==="date"?cY([Wi.left,p+Wi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):cf([Wi.left,p+Wi.left]).domain([b-P/10,E+P/10]).nice()},[i.dataType,p,E,b]),T=O.useMemo(()=>{const P=C-_;return g<=0?null:cf([g+Wi.top,Wi.top]).domain([_-P/10,C+P/10]).nice()},[g,C,_]),A=O.useMemo(()=>{if(!x||!T)return()=>null;if(r==="Axis Selection"){const P=Xwe().extent([[Wi.left,Wi.top+g-5],[Wi.left+p,Wi.top+g+5]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[j.selection[0],null],[j.selection[1],null]],x,T,j.mode)}),D=Qwe().extent([[Wi.left-5,Wi.top],[Wi.left+5,Wi.top+g]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[null,j.selection[0]],[null,j.selection[1]]],x,T,j.mode)});return c.current&&f.current&&(Br(f.current).call(D),Br(c.current).call(P),t.hasBrush||(Br(f.current).call(D.move,[T(C),T(_)]),Br(c.current).call(P.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),T(C)],[x(new Date("2015-12-31")),T(_)]],x,T,"drag"))),()=>{Br(f.current).call(D.move,[T(C),T(_)]),Br(c.current).call(P.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),T(C)],[x(new Date("2015-12-31")),T(_)]],x,T,"clear")}}if(r==="Rectangular Selection"){const P=Jwe().extent([[Wi.left,Wi.top],[Wi.left+p,Wi.top+g]]).on("brush",D=>{D.sourceEvent!==void 0&&n([[D.selection[0][0],D.selection[0][1]],[D.selection[1][0],D.selection[1][1]]],x,T,D.mode)}).on("end",D=>{D.selection===null&&D.sourceEvent!==void 0&&(Br(a.current).call(P.move,null),e(null))});return Br(a.current).call(P),()=>{Br(a.current).call(P.move,null),n([[null,null],[null,null]],x,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[x(b),T(C)],[x(E),T(_)]],x,T,null),()=>n([[x(b),T(C)],[x(E),T(_)]],x,T,"clear")):r==="Paintbrush Selection"?()=>n([[x(b),T(C)],[x(E),T(_)]],x,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,g,a,n,e,p,E,b,x,C,_,T]),k=O.useMemo(()=>o.length===0?null:new Set(o),[o]),N=O.useMemo(()=>!x||!T?null:s.map((P,D)=>{if(P[i.x]===null||P[i.y]===null)return null;const j=i.dataType==="date"?x(new Date(P[i.x])):x(P[i.x]);return w.jsx("circle",{opacity:k&&!k.has(P[i.ids])?.3:1,r:3,fill:k&&!k.has(P[i.ids])?"lightgray":y(P[i.category]),cx:j,cy:T(P[i.y])},D)}),[k,y,s,i.category,i.dataType,i.ids,i.x,i.y,x,T]);return O.useEffect(()=>{r==="Axis Selection"&&gwe(".handle").style("fill","darkgrey")},[t,r]),w.jsxs(yu,{children:[w.jsxs(Pi,{children:[w.jsx(Sn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),A==null||A()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?w.jsx(dL,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:P=>h(P==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),w.jsxs(Pi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[w.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[x&&T?w.jsxs("g",{children:[w.jsx(pAe,{yScale:T,label:i.y,horizontalPosition:Wi.left,xRange:x.range()}),w.jsx(bY,{xScale:x,yRange:T.range(),isDate:i.dataType==="date",vertPosition:g+Wi.top,label:i.x,ticks:x.ticks(i.brushType==="Axis Selection"?12:5).map(P=>({value:P.toString(),offset:x(P)}))})]}):null,N,w.jsx("g",{id:"brushXRef",ref:c}),w.jsx("g",{id:"brushYRef",ref:f}),x&&T&&r==="Paintbrush Selection"?w.jsx(mAe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:x,yScale:T}):null]}),r==="Slider Selection"&&x&&T?w.jsxs(yu,{style:{flexGrow:1},gap:50,children:[w.jsxs(yu,{gap:0,children:[w.jsx(pt,{children:i.x}),w.jsx(OE,{minRange:1,label:null,min:x.domain()[0],max:x.domain()[1],labelAlwaysOn:!1,onChange:P=>{n([[x(P[0]),t.y1],[x(P[1]),t.y2]],x,T,"drag")},style:{width:"300px"},marks:x.ticks(5).map(P=>({value:P,label:P})),value:[x.invert(t.x1),x.invert(t.x2)]})]}),w.jsxs(yu,{gap:0,children:[w.jsx(pt,{children:i.y}),w.jsx(OE,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:P=>{n([[t.x1,T(P[1])],[t.x2,T(P[0])]],x,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(P=>({value:P,label:P})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const h_t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:zz,default:zz},Symbol.toStringTag,{value:"Module"}));function Nce({parameters:e,setAnswer:t}){const[n,r]=O.useState(null),[i,s]=O.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=O.useState(null);O.useEffect(()=>{nEe(`./data/${e.dataset}.csv`).then(y=>{a(y)})},[e]);const u=O.useMemo(()=>o?U2e(o):null,[o]),{actions:l,trrack:c}=O.useMemo(()=>{const y=rk.create(),b=y.register("brush",(T,A)=>(T.all={brush:A},T)),_=y.register("brushMove",(T,A)=>(T.all={brush:A},T)),E=y.register("brushResize",(T,A)=>(T.all={brush:A},T)),C=y.register("brushClear",(T,A)=>(T.all={brush:A},T)),x=oX({registry:y,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:b,brushMove:_,brushResize:E,clearBrush:C},trrack:x}},[]),f=O.useCallback((y,b)=>{y==="drag"?c.apply("Move Brush",l.brushMove(b)):y==="handle"&&c.apply("Brush",l.brush(b))},[l,c]),d=O.useMemo(()=>Hf(f,100,{maxWait:100}),[f]),h=O.useCallback((y,b,_,E,C)=>{if(!b||!_)return;const x=b.invert(y[0][0]||i.x1),T=b.invert(y[1][0]||i.x2),A=_.invert(y[1][1]||i.y2),k=_.invert(y[0][1]||i.y1);let N=null;if(E==="clear")N=u;else if(C){const D=new Set(C);N=u.filter(fE(j=>D.has(j[e.ids])))}else e.brushType==="Axis Selection"?N=u.filter(fE(D=>new Date(D[e.x])>=new Date(x)&&new Date(D[e.x])<=new Date(T)&&D[e.y]>=A&&D[e.y]<=k)):N=u.filter(fE(D=>D[e.x]>=x&&D[e.x]<=T&&D[e.y]>=A&&D[e.y]<=k));const P={x1:y[0][0]||(i==null?void 0:i.x1)||0,x2:y[1][0]||(i==null?void 0:i.x2)||0,y1:y[0][1]||(i==null?void 0:i.y1)||0,y2:y[1][1]||(i==null?void 0:i.y2)||0,hasBrush:E!=="clear",ids:E!=="clear"?N==null?void 0:N.array("id"):[]};s(P),E==="drag"||E==="handle"?d(E,P):E==="clear"&&c.apply("Clear Brush",l.clearBrush(P)),r(N),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=O.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),g=O.useCallback(y=>{r(y)},[]);return o?w.jsxs(yu,{gap:"xs",children:[w.jsx(zz,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:g}),w.jsx(tz,{data:o,parameters:e,barsTable:p})]}):w.jsx(bf,{})}const p_t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Nce,default:Nce},Symbol.toStringTag,{value:"Module"})),m_t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Pce=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},SS=e=>{const t=O.useRef(null),n=Pce(e),[r,i]=O.useState(0),[s,o]=O.useState(0);O.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Pce({...n,width:n.width||r,height:n.height||s});return[t,a]},g_t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:SS},Symbol.toStringTag,{value:"Module"}));function gAe({data:e,xScale:t,yScale:n,height:r}){return w.jsx("g",{children:e.map((i,s)=>w.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const y_t=Object.freeze(Object.defineProperty({__proto__:null,Bars:gAe},Symbol.toStringTag,{value:"Module"}));function aX({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=O.useMemo(()=>{const o=cf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return w.jsxs("g",{children:[w.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>w.jsxs("g",{transform:`translate(0,${a})`,children:[w.jsx("line",{x2:`${r}`,stroke:"currentColor"}),w.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const v_t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:aX},Symbol.toStringTag,{value:"Module"}));function yAe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=O.useMemo(()=>{const o=lS().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return w.jsxs("g",{children:[w.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>w.jsx("g",{transform:`translate(${a}, 10)`,children:w.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const b_t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:yAe},Symbol.toStringTag,{value:"Module"})),__t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function w_t({parameters:e}){const[n,r]=SS(__t),i=lS().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=cf().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return w.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:w.jsx("svg",{width:r.width,height:r.height,children:w.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[w.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:w.jsx(yAe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),w.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:w.jsx(aX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),w.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:w.jsx(gAe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const E_t=Object.freeze(Object.defineProperty({__proto__:null,default:w_t},Symbol.toStringTag,{value:"Module"}));function vAe({data:e}){return w.jsx("g",{children:e.map(({bubble:t},n)=>w.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const x_t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:vAe},Symbol.toStringTag,{value:"Module"}));function uX({positions:e}){return w.jsx("g",{children:e.map((t,n)=>w.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const S_t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:uX},Symbol.toStringTag,{value:"Module"})),T_t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},C_t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=exe().size([t-10,n-10]).padding(1.5),o=HL(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},A_t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function I_t({parameters:e}){const[t,n]=SS(T_t),r=C_t(e,n.width,n.height),i=A_t(r,e.selectedIndices);return w.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:w.jsx("svg",{width:n.width,height:n.height,children:w.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[w.jsx(vAe,{data:r}),w.jsx(uX,{positions:i})]})})})}const k_t=Object.freeze(Object.defineProperty({__proto__:null,default:I_t},Symbol.toStringTag,{value:"Module"}));function bAe({arcs:e}){return w.jsx("g",{children:e.map((t,n)=>w.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const R_t=Object.freeze(Object.defineProperty({__proto__:null,Slices:bAe},Symbol.toStringTag,{value:"Module"}));function _Ae({positions:e}){return w.jsx("g",{children:e.map((t,n)=>w.jsx("g",{transform:`translate(${t.centroid()})`,children:w.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const N_t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:_Ae},Symbol.toStringTag,{value:"Module"})),P_t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},D_t=Wft().value(e=>e.value),qT=150;function O_t({parameters:e}){const[t,n]=SS(P_t),r=D_t(e.data),i=r.map(o=>ez().innerRadius(0).outerRadius(qT).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>ez().outerRadius(qT+10).innerRadius(qT+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return w.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:w.jsx("svg",{width:n.width,height:n.height,children:w.jsxs("g",{transform:`translate(${[n.marginLeft+qT,n.marginTop+qT].join(",")})`,children:[w.jsx(bAe,{arcs:i}),w.jsx(_Ae,{positions:s})]})})})}const M_t=Object.freeze(Object.defineProperty({__proto__:null,default:O_t},Symbol.toStringTag,{value:"Module"}));function wAe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=O.useMemo(()=>{const o=cf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return w.jsxs("g",{children:[w.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>w.jsxs("g",{transform:`translate(${a}, 0)`,children:[w.jsx("line",{y2:`${r}`,stroke:"currentColor"}),w.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const $_t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:wAe},Symbol.toStringTag,{value:"Module"}));function EAe({data:e,barWidth:t,yScale:n}){return w.jsx("g",{children:e.map((r,i)=>w.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const L_t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:EAe},Symbol.toStringTag,{value:"Module"})),F_t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function j_t({parameters:e}){const[n,r]=SS(F_t),i=lS().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=cf().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,g)=>g===0||g===h.length-1),a=h=>h.filter((p,g)=>e.selectedIndices.includes(g)),u=h=>{const p=h.map(E=>+E.value),y=p.reduce((E,C)=>Number(E)+Number(C))/100,b={};p.forEach((E,C)=>{b[String.fromCharCode(C+65)]=E/y});const _=[b];return pdt().keys(e.data.map(E=>E.name))(_)},l=(h,p,g)=>h.filter((b,_)=>p.includes(_)).map(b=>({x:g,y:s(b[0][1])+.5*(s(b[0][0])-s(b[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return w.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:w.jsx("svg",{width:r.width,height:r.height,children:w.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[w.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:w.jsx(wAe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),w.jsx("g",{transform:"translate(0, 0)",children:w.jsx(aX,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),w.jsxs("g",{transform:"translate(0, 0)",children:[w.jsx(EAe,{data:c,barWidth:f,yScale:s}),w.jsx(uX,{positions:d})]})]})})})}const B_t=Object.freeze(Object.defineProperty({__proto__:null,default:j_t},Symbol.toStringTag,{value:"Module"})),U_t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function z_t({parameters:e,setAnswer:t}){const[n,r]=SS(U_t),[i,s]=O.useState(100),[o,a]=O.useState(100),[u,l]=O.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=O.useMemo(()=>{const p=rk.create(),g=p.register("click",(b,_)=>(b.clickX=_.clickX,b.clickY=_.clickY,b.distance=_.distance,b)),y=oX({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:g},trrack:y}},[]),h=O.useCallback(p=>{const g=Br("#movingCircle"),y=Br("#clickAccuracySvg"),b=VO(p,y.node()),_=[+g.attr("cx"),+g.attr("cy")],E=`${Math.round(Math.sqrt((b[0]-_[0])**2+(b[1]-_[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+E,clickX:b[0],clickY:b[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:E}})},[f,t,c,d]);return O.useEffect(()=>{const p=Math.random()*800,g=Math.random()*600,b=Math.sqrt((p-i)**2+(g-o)**2)/u*1e3;Br(n.current).select("circle").transition().duration(b).ease(pot).attr("cx",p).attr("cy",g).on("end",()=>{s(p),a(g)})},[n,u,i,o]),w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:w.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:w.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[w.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),w.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),w.jsxs(De,{children:["Adjust speed (px/s):",w.jsx(mL,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const V_t=Object.freeze(Object.defineProperty({__proto__:null,default:z_t},Symbol.toStringTag,{value:"Module"}));function Dce({rankings:e}){return w.jsx("div",{style:{fontFamily:"sans-serif"},children:w.jsx("div",{children:e.map((t,n)=>w.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function H_t({parameters:e,setAnswer:t}){const n=Yy(),[r,i]=O.useState(""),{goToNextStep:s,isNextDisabled:o}=U_e(),a=O.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=O.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=O.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=O.useCallback(()=>{o||s()},[o,s]);O.useEffect(()=>{const h=q5e([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),w.jsxs("div",{children:[w.jsxs(gu,{children:[w.jsxs(gu.Col,{span:2,children:[w.jsx(Dce,{rankings:a==="r1"?e.data.r1:e.data.r2}),w.jsx(Sn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?w.jsx(Wse,{}):"Select this ranking"}),l&&r&&w.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),w.jsxs(gu.Col,{span:2,children:[w.jsx(Dce,{rankings:a==="r1"?e.data.r2:e.data.r1}),w.jsx(Sn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?w.jsx(Wse,{}):"Select this ranking"}),l&&r&&w.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&w.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const q_t=Object.freeze(Object.defineProperty({__proto__:null,default:H_t},Symbol.toStringTag,{value:"Module"}));function W_t({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=O.useRef(null),o=O.useCallback(a=>{const u=Br("#Circle"),l=Br("#click_svg"),c=VO(a,l.node()),f=[+u.attr("cx"),+u.attr("cy")],d=`${Math.round(Math.sqrt((c[0]-f[0])**2+(c[1]-f[1])**2))}px`;t({status:!0,answers:{[n]:d}})},[t,n]);return w.jsx("div",{className:"Chart__wrapper",ref:s,onClick:o,style:{height:"650px"},children:w.jsx("svg",{id:"click_svg",width:400,height:400,children:w.jsx("circle",{id:"Circle",cx:r,cy:i,r:"10",stroke:"black",strokeWidth:"2",fill:"white"})})})}const G_t=Object.freeze(Object.defineProperty({__proto__:null,default:W_t},Symbol.toStringTag,{value:"Module"}));function lX({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=O.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=O.useCallback(c=>(s?zI("%B"):Xy(".2s"))(c),[s]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:w.jsx(uc,{children:w.jsx(Pi,{gap:3,children:w.jsx(pt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?w.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>w.jsxs("g",{transform:`translate(${f}, ${n})`,children:[w.jsx("line",{y2:"6",stroke:"currentColor"}),o?w.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,w.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:w.jsx(uc,{children:w.jsx(Li,{withinPortal:!0,label:c,children:w.jsx(pt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const Y_t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:lX},Symbol.toStringTag,{value:"Module"}));function xAe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=O.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(uc,{children:w.jsx(Pi,{gap:3,children:w.jsx(pt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>w.jsxs("g",{transform:`translate(${n}, ${l})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),s?w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,w.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:w.jsx("foreignObject",{width:a,height:20,children:w.jsx(Pi,{style:{width:"100%",height:"100%"},justify:"right",children:w.jsx(pt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const K_t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:xAe},Symbol.toStringTag,{value:"Module"})),Bc={top:15,left:100,right:50,bottom:50};function Vz({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=dd(),o=O.useMemo(()=>s-Bc.left-Bc.right,[s]),a=O.useMemo(()=>i-Bc.top-Bc.bottom,[i]),u=O.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Jy(ZL).domain(d)},[n,t.category]),l=O.useMemo(()=>e?cf([Bc.left,o+Bc.left]).domain([0,Nm(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=O.useMemo(()=>e?lS([Bc.top,a+Bc.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=O.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:w.jsxs("g",{children:[w.jsx("rect",{x:Bc.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Bc.left},h),w.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?w.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[w.jsx(lX,{xScale:l,yRange:c.range(),vertPosition:a+Bc.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?w.jsx(xAe,{yScale:c,horizontalPosition:Bc.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):w.jsx(bf,{})}const X_t=Object.freeze(Object.defineProperty({__proto__:null,Bar:Vz,default:Vz},Symbol.toStringTag,{value:"Module"}));function SAe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=O.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=O.useMemo(()=>Xy(".2s"),[]);return w.jsxs(w.Fragment,{children:[w.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:w.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:w.jsx(uc,{children:w.jsx(Pi,{gap:3,children:w.jsx(pt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),w.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),w.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>w.jsxs("g",{transform:`translate(${n}, ${a})`,children:[w.jsx("line",{x2:"-6",stroke:"currentColor"}),w.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),w.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const Q_t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:SAe},Symbol.toStringTag,{value:"Module"})),D9=15;function TAe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=O.useState([0,0]),[l,c]=O.useState(!1);return O.useEffect(()=>{const f=Br("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const g=i.filter(y=>Math.abs(e(y[r.x])-p[0])<D9&&Math.abs(t(y[r.y])-p[1])<D9);if(h.ctrlKey||h.metaKey||!o){const y=new Set(s.ids);g.forEach(_=>{y.has(_[r.ids])&&y.delete(_[r.ids])});const b=Array.from(y);n([[a[0],a[1]],[a[0],a[1]]],e,t,b.length===0?"clear":"drag",b)}else{const y=Array.from(new Set([...s.ids,...g.map(b=>b[r.ids])]));y.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",y)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),w.jsx("circle",{style:{cursor:l?"pointer":"default"},r:D9,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const J_t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:TAe},Symbol.toStringTag,{value:"Module"})),Gi={top:15,left:100,right:15,bottom:70};function Hz({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=dd(),[c]=dd(),[f]=dd(),[d,h]=O.useState(!0),p=O.useMemo(()=>l-Gi.left-Gi.right,[l]),g=O.useMemo(()=>u-Gi.top-Gi.bottom,[u]),y=O.useMemo(()=>{const P=Array.from(new Set(s.map(D=>D[i.category])));return Jy(ZL).domain(P)},[s,i.category]),{xMin:b,yMin:_,xMax:E,yMax:C}=O.useMemo(()=>{const P=s.map(z=>+z[i.x]).filter(z=>z!==null),[D,j]=jO(P),M=s.map(z=>+z[i.y]).filter(z=>z!==null),[B,V]=jO(M);return{xMin:D,xMax:j,yMin:B,yMax:V}},[s,i.x,i.y]),x=O.useMemo(()=>{const P=E-b;return p<=0?null:i.dataType==="date"?cY([Gi.left,p+Gi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):cf([Gi.left,p+Gi.left]).domain([b-P/10,E+P/10]).nice()},[i.dataType,p,E,b]),T=O.useMemo(()=>{const P=C-_;return g<=0?null:cf([g+Gi.top,Gi.top]).domain([_-P/10,C+P/10]).nice()},[g,C,_]),A=O.useMemo(()=>{if(!x||!T)return()=>null;if(r==="Axis Selection"){const P=Xwe().extent([[Gi.left,Gi.top+g-5],[Gi.left+p,Gi.top+g+5]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[j.selection[0],null],[j.selection[1],null]],x,T,j.mode)}),D=Qwe().extent([[Gi.left-5,Gi.top],[Gi.left+5,Gi.top+g]]).on("brush end",j=>{j.sourceEvent!==void 0&&n([[null,j.selection[0]],[null,j.selection[1]]],x,T,j.mode)});return c.current&&f.current&&(Br(f.current).call(D),Br(c.current).call(P),t.hasBrush||(Br(f.current).call(D.move,[T(C),T(_)]),Br(c.current).call(P.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),T(C)],[x(new Date("2015-12-31")),T(_)]],x,T,"drag"))),()=>{Br(f.current).call(D.move,[T(C),T(_)]),Br(c.current).call(P.move,[x(new Date("2015-01-02")),x(new Date("2015-12-31"))]),n([[x(new Date("2015-01-02")),T(C)],[x(new Date("2015-12-31")),T(_)]],x,T,"clear")}}if(r==="Rectangular Selection"){const P=Jwe().extent([[Gi.left,Gi.top],[Gi.left+p,Gi.top+g]]).on("brush",D=>{D.sourceEvent!==void 0&&n([[D.selection[0][0],D.selection[0][1]],[D.selection[1][0],D.selection[1][1]]],x,T,D.mode)}).on("end",D=>{D.selection===null&&D.sourceEvent!==void 0&&(Br(a.current).call(P.move,null),e(null))});return Br(a.current).call(P),()=>{Br(a.current).call(P.move,null),n([[null,null],[null,null]],x,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[x(b),T(C)],[x(E),T(_)]],x,T,null),()=>n([[x(b),T(C)],[x(E),T(_)]],x,T,"clear")):r==="Paintbrush Selection"?()=>n([[x(b),T(C)],[x(E),T(_)]],x,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,g,a,n,e,p,E,b,x,C,_,T]),k=O.useMemo(()=>o.length===0?null:new Set(o),[o]),N=O.useMemo(()=>!x||!T?null:s.map((P,D)=>{if(P[i.x]===null||P[i.y]===null)return null;const j=i.dataType==="date"?x(new Date(P[i.x])):x(P[i.x]);return w.jsx("circle",{opacity:k&&!k.has(P[i.ids])?.3:1,r:3,fill:k&&!k.has(P[i.ids])?"lightgray":y(P[i.category]),cx:j,cy:T(P[i.y])},D)}),[k,y,s,i.category,i.dataType,i.ids,i.x,i.y,x,T]);return O.useEffect(()=>{r==="Axis Selection"&&gwe(".handle").style("fill","darkgrey")},[t,r]),w.jsxs(yu,{children:[w.jsxs(Pi,{children:[w.jsx(Sn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),A==null||A()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?w.jsx(dL,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:P=>h(P==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),w.jsxs(Pi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[w.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[x&&T?w.jsxs("g",{children:[w.jsx(SAe,{yScale:T,label:i.y,horizontalPosition:Gi.left,xRange:x.range()}),w.jsx(lX,{xScale:x,yRange:T.range(),isDate:i.dataType==="date",vertPosition:g+Gi.top,label:i.x,ticks:x.ticks(i.brushType==="Axis Selection"?12:5).map(P=>({value:P.toString(),offset:x(P)}))})]}):null,N,w.jsx("g",{id:"brushXRef",ref:c}),w.jsx("g",{id:"brushYRef",ref:f}),x&&T&&r==="Paintbrush Selection"?w.jsx(TAe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:x,yScale:T}):null]}),r==="Slider Selection"&&x&&T?w.jsxs(yu,{style:{flexGrow:1},gap:50,children:[w.jsxs(yu,{gap:0,children:[w.jsx(pt,{children:i.x}),w.jsx(OE,{minRange:1,label:null,min:x.domain()[0],max:x.domain()[1],labelAlwaysOn:!1,onChange:P=>{n([[x(P[0]),t.y1],[x(P[1]),t.y2]],x,T,"drag")},style:{width:"300px"},marks:x.ticks(5).map(P=>({value:P,label:P})),value:[x.invert(t.x1),x.invert(t.x2)]})]}),w.jsxs(yu,{gap:0,children:[w.jsx(pt,{children:i.y}),w.jsx(OE,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:P=>{n([[t.x1,T(P[1])],[t.x2,T(P[0])]],x,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(P=>({value:P,label:P})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const Z_t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:Hz,default:Hz},Symbol.toStringTag,{value:"Module"}));function Oce({parameters:e,setAnswer:t}){const[n,r]=O.useState(null),[i,s]=O.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=O.useState(null);O.useEffect(()=>{nEe(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(y=>{a(y)})},[e]);const u=O.useMemo(()=>o?U2e(o):null,[o]),{actions:l,trrack:c}=O.useMemo(()=>{const y=rk.create(),b=y.register("brush",(T,A)=>(T.all={brush:A},T)),_=y.register("brushMove",(T,A)=>(T.all={brush:A},T)),E=y.register("brushResize",(T,A)=>(T.all={brush:A},T)),C=y.register("brushClear",(T,A)=>(T.all={brush:A},T)),x=oX({registry:y,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:b,brushMove:_,brushResize:E,clearBrush:C},trrack:x}},[]),f=O.useCallback((y,b)=>{y==="drag"?c.apply("Move Brush",l.brushMove(b)):y==="handle"&&c.apply("Brush",l.brush(b))},[l,c]),d=O.useMemo(()=>Hf(f,100,{maxWait:100}),[f]),h=O.useCallback((y,b,_,E,C)=>{if(!b||!_)return;const x=b.invert(y[0][0]||i.x1),T=b.invert(y[1][0]||i.x2),A=_.invert(y[1][1]||i.y2),k=_.invert(y[0][1]||i.y1);let N=null;if(E==="clear")N=u;else if(C){const D=new Set(C);N=u.filter(fE(j=>D.has(j[e.ids])))}else e.brushType==="Axis Selection"?N=u.filter(fE(D=>new Date(D[e.x])>=new Date(x)&&new Date(D[e.x])<=new Date(T)&&D[e.y]>=A&&D[e.y]<=k)):N=u.filter(fE(D=>D[e.x]>=x&&D[e.x]<=T&&D[e.y]>=A&&D[e.y]<=k));const P={x1:y[0][0]||(i==null?void 0:i.x1)||0,x2:y[1][0]||(i==null?void 0:i.x2)||0,y1:y[0][1]||(i==null?void 0:i.y1)||0,y2:y[1][1]||(i==null?void 0:i.y2)||0,hasBrush:E!=="clear",ids:E!=="clear"?N==null?void 0:N.array("id"):[]};s(P),E==="drag"||E==="handle"?d(E,P):E==="clear"&&c.apply("Clear Brush",l.clearBrush(P)),r(N),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=O.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),g=O.useCallback(y=>{r(y)},[]);return o?w.jsxs(yu,{gap:"xs",children:[w.jsx(Hz,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:g}),w.jsx(Vz,{data:o,parameters:e,barsTable:p})]}):w.jsx(bf,{})}const ewt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Oce,default:Oce},Symbol.toStringTag,{value:"Module"})),twt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),nwt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Mce=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":ydt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":p_t,"../public/demo-brush-interactions/assets/Paintbrush.tsx":d_t,"../public/demo-brush-interactions/assets/Scatter.tsx":h_t,"../public/demo-brush-interactions/assets/XAxisBar.tsx":mdt,"../public/demo-brush-interactions/assets/YAxis.tsx":f_t,"../public/demo-brush-interactions/assets/YAxisBar.tsx":gdt,"../public/demo-brush-interactions/assets/types.ts":m_t,"../public/demo-cleveland/assets/BarChart.tsx":E_t,"../public/demo-cleveland/assets/BubbleChart.tsx":k_t,"../public/demo-cleveland/assets/PieChart.tsx":M_t,"../public/demo-cleveland/assets/StackedBarChart.tsx":B_t,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":y_t,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":x_t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":S_t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":$_t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":v_t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":b_t,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":R_t,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":N_t,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":L_t,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":g_t,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":V_t,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":q_t,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":G_t,"../public/tutorial/react-and-randomization/assets/Bar.tsx":X_t,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":ewt,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":J_t,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":Z_t,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":Y_t,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":Q_t,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":K_t,"../public/tutorial/react-and-randomization/assets/some.tsx":twt,"../public/tutorial/react-and-randomization/assets/types.ts":nwt});function rwt({currentConfig:e}){const t=vg(),n=Yy(),r=`../public/${e.path}`,i=r in Mce?Mce[r].default:null,s=bp(),{updateResponseBlockValidation:o,setIframeAnswers:a}=vp();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return w.jsx(O.Suspense,{fallback:w.jsx("div",{children:"Loading..."}),children:i?w.jsx(i,{parameters:e.parameters,setAnswer:u}):w.jsx(J1,{path:e.path})})}function iwt({currentConfig:e}){const[t,n]=O.useState(""),[r,i]=O.useState(!0);return O.useEffect(()=>{async function s(){const o=await RG(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?w.jsx(xu,{text:t}):w.jsx(J1,{path:e.path})}const swt={},owt=Object.freeze(Object.defineProperty({__proto__:null,default:swt},Symbol.toStringTag,{value:"Module"})),awt=x4e(owt);var O9,$ce;function k6(){if($ce)return O9;$ce=1;var e=awt;function t(o,a){var u,l="",c=0,f=!0,d=0,h;function p(){return h=o.charAt(d),d++,h}for(p(),h==="-"&&(l="-",p());h>="0"&&h<="9";)f&&(h=="0"?c++:f=!1),l+=h,p();if(f&&c--,h===".")for(l+=".";p()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,p(),(h==="-"||h==="+")&&(l+=h,p());h>="0"&&h<="9";)l+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[d]==="/"||o[d]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),u,l,c,f;for(c=0;c<a.length;c++)for(u=a[c],f=u.length,l=0;l<f;l++){var d=u[l];if(d==="#")break;if(d==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(d>" "){a[c]="# "+u;break}}return a.join(`
`)}return O9={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},O9}var M9,Lce;function uwt(){return Lce||(Lce=1,M9="3.2.1"),M9}var $9,Fce;function cX(){if(Fce)return $9;Fce=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(f){return{}.toString.call(f)==="[object Function]"}return a.forEach(function(f){if(!f.name||!c(f.parse)||!c(f.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return f.parse.apply(null,arguments);if(u=="stringify"){var d=f.stringify.apply(null,arguments);if(d!==void 0&&(typeof d!="string"||d.length===0||d[0]==='"'||[].some.call(d,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+d);return d}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+f.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return o.description="support ISO dates",$9={loadDsf:e,std:{math:i,hex:s,date:o}},$9}var L9,jce;function lwt(){return jce||(jce=1,L9=function(e,t){var n=k6(),r=cX(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(B){return B==="{"||B==="}"||B==="["||B==="]"||B===","||B===":"}function d(B){var V,z=0,G=1;for(V=s-1;V>0&&i[V]!==`
`;V--,z++);for(;V>0;V--)i[V]===`
`&&G++;throw new Error(B+" at line "+G+","+z+" >>>"+i.substr(s-z,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(B){return i.charAt(s+B)}function g(B){for(var V="",z=o;h();){if(o===z)return h(),B&&z==="'"&&o==="'"&&V.length===0?(h(),y()):V;if(o==="\\")if(h(),o==="u"){for(var G=0,Y=0;Y<4;Y++){h();var Q=o.charCodeAt(0),L;o>="0"&&o<="9"?L=Q-48:o>="a"&&o<="f"?L=Q-97+10:o>="A"&&o<="F"?L=Q-65+10:d("Bad \\u char "+o),G=G*16+L}V+=String.fromCharCode(G)}else if(typeof a[o]=="string")V+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):V+=o}d("Bad string")}function y(){for(var B="",V=0,z=0;;){var G=p(-z-5);if(!G||G===`
`)break;z++}function Y(){for(var Q=z;o&&o<=" "&&o!==`
`&&Q-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),Y());;){if(!o)d("Bad multiline string");else if(o==="'"){if(V++,h(),V===3)return B.slice(-1)===`
`&&(B=B.slice(0,-1)),B;continue}else for(;V>0;)B+="'",V--;o===`
`?(B+=`
`,h(),Y()):(o!=="\r"&&(B+=o),h())}}function b(){if(o==='"'||o==="'")return g(!1);for(var B="",V=s,z=-1;;){if(o===":")return B?z>=0&&z!==B.length&&(s=V+z,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),B;o<=" "?o?z<0&&(z=B.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):B+=o,h()}}function _(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function E(){var B=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var V=o==="\r"||o===`
`||o==="";if(V||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var z=B[0];switch(z){case"f":if(B.trim()==="false")return!1;break;case"n":if(B.trim()==="null")return null;break;case"t":if(B.trim()==="true")return!0;break;default:if(z==="-"||z>="0"&&z<="9"){var G=n.tryParseNumber(B);if(G!==void 0)return G}}if(V){B=B.trim();var Y=l(B);return Y!==void 0?Y:B}}B+=o}}function C(B,V){var z;for(B--,z=s-2;z>B&&i[z]<=" "&&i[z]!==`
`;z--);i[z]===`
`&&z--,i[z]==="\r"&&z--;var G=i.substr(B,z-B+1);for(z=0;z<G.length;z++)if(G[z]>" "){var Y=G.indexOf(`
`);if(Y>=0){var Q=[G.substr(0,Y),G.substr(Y+1)];return V&&Q[0].trim().length===0&&Q.shift(),Q}else return[G]}return[]}function x(B){function V(G,Y){var Q,L,U,K;switch(typeof G){case"string":G.indexOf(Y)>=0&&(K=G);break;case"object":if(Object.prototype.toString.apply(G)==="[object Array]")for(Q=0,U=G.length;Q<U;Q++)K=V(G[Q],Y)||K;else for(L in G)Object.prototype.hasOwnProperty.call(G,L)&&(K=V(G[L],Y)||K)}return K}function z(G){var Y=V(B,G);return Y?"found '"+G+`' in a string value, your mistake could be with:
  > `+Y+`
  (unquoted strings contain everything up to the next line!)`:""}return z("}")||z("]")}function T(){var B=[],V,z,G;try{if(u&&(V=n.createComment(B,{a:[]})),h(),z=s,_(),V&&(G=C(z,!0).join(`
`)),o==="]")return h(),V&&(V.e=[G]),B;for(;o;){if(B.push(k()),z=s,_(),o===","&&(h(),z=s,_()),V){var Y=C(z);V.a.push([G||"",Y[0]||""]),G=Y[1]}if(o==="]")return h(),V&&(V.a[V.a.length-1][1]+=G||""),B;_()}d("End of input while parsing an array (missing ']')")}catch(Q){throw Q.hint=Q.hint||x(B),Q}}function A(B){var V="",z={},G,Y,Q;try{if(u&&(G=n.createComment(z,{c:{},o:[]})),B?Y=1:(h(),Y=s),_(),G&&(Q=C(Y,!0).join(`
`)),o==="}"&&!B)return G&&(G.e=[Q]),h(),z;for(;o;){if(V=b(),_(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),z[V]=k(),Y=s,_(),o===","&&(h(),Y=s,_()),G){var L=C(Y);G.c[V]=[Q||"",L[0]||""],Q=L[1],G.o.push(V)}if(o==="}"&&!B)return h(),G&&(G.c[V][1]+=Q||""),z;_()}if(B)return z;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||x(z),U}}function k(){switch(_(),o){case"{":return A();case"[":return T();case"'":case'"':return g(!0);default:return E()}}function N(B,V){var z=s;if(_(),o&&d("Syntax error, found trailing characters"),u){var G=V.join(`
`),Y=C(z).join(`
`);if(Y||G){var Q=n.createComment(B,n.getComment(B));Q.r=[G,Y]}}return B}function P(){_();var B=u?C(1):null;switch(o){case"{":return N(A(),B);case"[":return N(T(),B);default:return N(k(),B)}}function D(){_();var B=u?C(1):null;switch(o){case"{":return N(A(),B);case"[":return N(T(),B)}try{return N(A(!0),B)}catch(V){c();try{return N(k(),B)}catch{throw V}}}if(typeof e!="string")throw new Error("source is not a string");var j=null,M=!0;return t&&typeof t=="object"&&(u=t.keepWsc,j=t.dsf,M=t.legacyRoot!==!1),l=r.loadDsf(j,"parse"),i=e,c(),M?D():P()}),L9}var F9,Bce;function cwt(){return Bce||(Bce=1,F9=function(e,t){var n=k6(),r=cX(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,g=!1,y=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?y.com[0]:"",p=t.dsf,g=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(y={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var b,_=Object.keys(i);for(b=_.length-1;b>=0;b--){var E=_[b];y[E].push(i[E][0].length,i[E][1].length)}}var C,x="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+x+"]","g"),A=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+x+"]","g"),k=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+x+"]","g"),N=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),P={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},D=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,j="",M=0;function B(K,q){return M+=K[0].length+K[1].length-K[2]-K[3],K[0]+q+K[1]}function V(K){return K.replace(T,function(q){var X=P[q];return typeof X=="string"?B(y.esc,X):B(y.uni,("0000"+q.charCodeAt(0).toString(16)).slice(-4))})}function z(K,q,X,Z){return K?(A.lastIndex=0,N.lastIndex=0,c||X||A.test(K)||n.tryParseNumber(K,!0)!==void 0||N.test(K)?(T.lastIndex=0,k.lastIndex=0,T.test(K)?!k.test(K)&&!Z&&d?G(K,q):B(y.qstr,V(K)):B(y.qstr,K)):B(y.str,K)):B(y.qstr,"")}function G(K,q){var X,Z=K.replace(/\r/g,"").split(`
`);if(q+=o,Z.length===1)return B(y.mstr,Z[0]);var ae=s+q+y.mstr[0];for(X=0;X<Z.length;X++)ae+=s,Z[X]&&(ae+=q+Z[X]);return ae+s+q+y.mstr[1]}function Y(K){return K?l||D.test(K)?(T.lastIndex=0,B(y.qkey,T.test(K)?V(K):K)):B(y.key,K):'""'}function Q(K,q,X,Z){function ae(Fn){return Fn&&Fn[Fn[0]==="\r"?1:0]===`
`}function he(Fn){return Fn&&!ae(Fn)}function ge(Fn,Un,ur){if(!Fn)return"";Fn=n.forceComment(Fn);var lr,Us=Fn.length;for(lr=0;lr<Us&&Fn[lr]<=" ";lr++);return ur&&lr>0&&(Fn=Fn.substr(lr)),lr<Us?Un+B(y.rem,Fn):Fn}var be=C(K);if(be!==void 0)return B(y.dsf,be);switch(typeof K){case"string":return z(K,j,q,Z);case"number":return isFinite(K)?B(y.num,String(K)):B(y.lit,"null");case"boolean":return B(y.lit,String(K));case"object":if(!K)return B(y.lit,"null");var Ce;a&&(Ce=n.getComment(K));var oe=Object.prototype.toString.apply(K)==="[object Array]",re=j;j+=o;var xe=s+re,Re=s+j,Ke=X||u?"":xe,Qe=[],ke,Ue=f?[]:null,rt=c,ft=d,Rt=h?"":y.com[0],st=0,Ie,kt,Ot,Ne,ze,ot,St,$t,Vn;if(oe){for(Ie=0,kt=K.length;Ie<kt;Ie++){if(ke=Ie<kt-1,Ce?(ot=Ce.a[Ie]||[],St=he(ot[1]),Qe.push(ge(ot[0],`
`)+Re),Ue&&(ot[0]||ot[1]||St)&&(Ue=null)):Qe.push(Re),M=0,Ne=K[Ie],Qe.push(Q(Ne,Ce?St:!1,!0)+(ke?h:"")),Ue){switch(typeof Ne){case"string":M=0,c=!0,d=0,Ue.push(Q(Ne,!1,!0)+(ke?y.com[0]:"")),c=rt,d=ft;break;case"object":if(Ne){Ue=null;break}default:Ue.push(Qe[Qe.length-1]+(ke?Rt:""));break}ke&&(M+=y.com[0].length-y.com[2]),st+=M}Ce&&ot[1]&&Qe.push(ge(ot[1],St?" ":`
`,St))}kt===0?Ce&&Ce.e&&Qe.push(ge(Ce.e[0],`
`)+xe):Qe.push(xe),Qe.length===0?$t=B(y.arr,""):($t=Ke+B(y.arr,Qe.join("")),Ue&&(Vn=Ue.join(" "),Vn.length-st<=f&&($t=B(y.arr,Vn))))}else{var Yr=Ce?Ce.o.slice():[],tr=[];for(Ot in K)Object.prototype.hasOwnProperty.call(K,Ot)&&Yr.indexOf(Ot)<0&&tr.push(Ot);g&&tr.sort();var vr=Yr.concat(tr);for(Ie=0,kt=vr.length;Ie<kt;Ie++)if(ke=Ie<kt-1,Ot=vr[Ie],Ce?(ot=Ce.c[Ot]||[],St=he(ot[1]),Qe.push(ge(ot[0],`
`)+Re),Ue&&(ot[0]||ot[1]||St)&&(Ue=null)):Qe.push(Re),M=0,Ne=K[Ot],ze=Q(Ne,Ce&&St),Qe.push(Y(Ot)+y.col[0]+(ae(ze)?"":" ")+ze+(ke?h:"")),Ce&&ot[1]&&Qe.push(ge(ot[1],St?" ":`
`,St)),Ue){switch(typeof Ne){case"string":M=0,c=!0,d=0,ze=Q(Ne,!1),c=rt,d=ft,Ue.push(Y(Ot)+y.col[0]+" "+ze+(ke?y.com[0]:""));break;case"object":if(Ne){Ue=null;break}default:Ue.push(Qe[Qe.length-1]+(ke?Rt:""));break}M+=y.col[0].length-y.col[2],ke&&(M+=y.com[0].length-y.com[2]),st+=M}kt===0?Ce&&Ce.e&&Qe.push(ge(Ce.e[0],`
`)+xe):Qe.push(xe),Qe.length===0?$t=B(y.obj,""):($t=Ke+B(y.obj,Qe.join("")),Ue&&(Vn=Ue.join(" "),Vn.length-st<=f&&($t=B(y.obj,Vn))))}return j=re,$t}}C=r.loadDsf(p,"stringify");var L="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&(L=U[0]+`
`),L+=Q(e,null,!0,!0),U&&(L+=U[1]||""),L}),F9}var j9,Uce;function fwt(){if(Uce)return j9;Uce=1;var e=k6();function t(c,f,d){var h;return c&&(h={b:c}),f&&((h=h||{}).a=f),d&&((h=h||{}).x=d),h}function n(c,f){if(!(c===null||typeof c!="object")){var d=e.getComment(c);d&&e.removeComment(c);var h,p,g,y;if(Object.prototype.toString.apply(c)==="[object Array]"){for(y={a:{}},h=0,p=c.length;h<p;h++)s(y.a,h,d.a[h],n(c[h]))&&(g=!0);!g&&d.e&&(y.e=t(d.e[0],d.e[1]),g=!0)}else{y={s:{}};var b,_=Object.keys(c);for(d&&d.o?(b=[],d.o.concat(_).forEach(function(C){Object.prototype.hasOwnProperty.call(c,C)&&b.indexOf(C)<0&&b.push(C)})):b=_,y.o=b,h=0,p=b.length;h<p;h++){var E=b[h];s(y.s,E,d.c[E],n(c[E]))&&(g=!0)}!g&&d.e&&(y.e=t(d.e[0],d.e[1]),g=!0)}return f&&d&&d.r&&(y.r=t(d.r[0],d.r[1])),g?y:void 0}}function r(){var c="";return[].forEach.call(arguments,function(f){f&&f.trim()!==""&&(c&&(c+="; "),c+=f.trim())}),c}function i(c,f){var d=[];if(u(c,f,d,[]),d.length>0){var h=l(f,null,1);h+=`
# Orphaned comments:
`,d.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),l(f,h,1)}}function s(c,f,d,h){var p=t(d?d[0]:void 0,d?d[1]:void 0,h);return p&&(c[f]=p),p}function o(c,f){var d=t(f.b,f.a);return d.path=c,d}function a(c,f,d){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var g=d.slice().concat([h]),y=c.a[h];y&&(f.push(o(g,y)),a(y.x,f,g))}else c.o&&c.o.forEach(function(b){var _=d.slice().concat([b]),E=c.s[b];E&&(f.push(o(_,E)),a(E.x,f,_))});c.e&&f.push(o(d,c.e))}}function u(c,f,d,h){if(c){if(f===null||typeof f!="object"){a(c,d,h);return}var p,g=e.createComment(f);if(h.length===0&&c.r&&(g.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(f)==="[object Array]"){g.a=[];var y=c.a||{};for(var b in y)if(y.hasOwnProperty(b)){p=parseInt(b);var _=c.a[b];if(_){var E=h.slice().concat([p]);p<f.length?(g.a[p]=[_.b,_.a],u(_.x,f[p],d,E)):(d.push(o(E,_)),a(_.x,d,E))}}p===0&&c.e&&(g.e=[c.e.b,c.e.a])}else g.c={},g.o=[],(c.o||[]).forEach(function(C){var x=h.slice().concat([C]),T=c.s[C];Object.prototype.hasOwnProperty.call(f,C)?(g.o.push(C),T&&(g.c[C]=[T.b,T.a],u(T.x,f[C],d,x))):T&&(d.push(o(x,T)),a(T.x,d,x))}),c.e&&(g.e=[c.e.b,c.e.a])}}function l(c,f,d){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(f||f==="")&&(h.r[d]=e.forceComment(f)),h.r[d]||""}return j9={extract:function(c){return n(c,!0)},merge:i,header:function(c,f){return l(c,f,0)},footer:function(c,f){return l(c,f,1)}},j9}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var B9,zce;function dwt(){if(zce)return B9;zce=1;var e=k6(),t=uwt(),n=lwt(),r=cwt(),i=fwt(),s=cX();return B9={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},B9}var fX=dwt(),zN={exports:{}},U9={},Yp={},Mv={},z9={},V9={},H9={},Vce;function hM(){return Vce||(Vce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(_){if(super(),!e.IDENTIFIER.test(_))throw new Error("CodeGen: name must be a valid identifier");this.str=_}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(_){super(),this._items=typeof _=="string"?[_]:_}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const _=this._items[0];return _===""||_==='""'}get str(){var _;return(_=this._str)!==null&&_!==void 0?_:this._str=this._items.reduce((E,C)=>`${E}${C}`,"")}get names(){var _;return(_=this._names)!==null&&_!==void 0?_:this._names=this._items.reduce((E,C)=>(C instanceof n&&(E[C.str]=(E[C.str]||0)+1),E),{})}}e._Code=r,e.nil=new r("");function i(b,..._){const E=[b[0]];let C=0;for(;C<_.length;)a(E,_[C]),E.push(b[++C]);return new r(E)}e._=i;const s=new r("+");function o(b,..._){const E=[h(b[0])];let C=0;for(;C<_.length;)E.push(s),a(E,_[C]),E.push(s,h(b[++C]));return u(E),new r(E)}e.str=o;function a(b,_){_ instanceof r?b.push(..._._items):_ instanceof n?b.push(_):b.push(f(_))}e.addCodeArg=a;function u(b){let _=1;for(;_<b.length-1;){if(b[_]===s){const E=l(b[_-1],b[_+1]);if(E!==void 0){b.splice(_-1,3,E);continue}b[_++]="+"}_++}}function l(b,_){if(_==='""')return b;if(b==='""')return _;if(typeof b=="string")return _ instanceof n||b[b.length-1]!=='"'?void 0:typeof _!="string"?`${b.slice(0,-1)}${_}"`:_[0]==='"'?b.slice(0,-1)+_.slice(1):void 0;if(typeof _=="string"&&_[0]==='"'&&!(b instanceof n))return`"${b}${_.slice(1)}`}function c(b,_){return _.emptyStr()?b:b.emptyStr()?_:o`${b}${_}`}e.strConcat=c;function f(b){return typeof b=="number"||typeof b=="boolean"||b===null?b:h(Array.isArray(b)?b.join(","):b)}function d(b){return new r(h(b))}e.stringify=d;function h(b){return JSON.stringify(b).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(b){return typeof b=="string"&&e.IDENTIFIER.test(b)?new r(`.${b}`):i`[${b}]`}e.getProperty=p;function g(b){if(typeof b=="string"&&e.IDENTIFIER.test(b))return new r(`${b}`);throw new Error(`CodeGen: invalid export name: ${b}, use explicit $id name mapping`)}e.getEsmExportName=g;function y(b){return new r(b.toString())}e.regexpCode=y}(H9)),H9}var q9={},Hce;function qce(){return Hce||(Hce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=hM();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let g=this._values[h];if(g){const _=g.get(p);if(_)return _}else g=this._values[h]=new Map;g.set(p,d);const y=this._scope[h]||(this._scope[h]=[]),b=y.length;return y[b]=c.ref,d.setValue(c,{property:h,itemIndex:b}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const g=l[p];if(!g)continue;const y=f[p]=f[p]||new Map;g.forEach(b=>{if(y.has(b))return;y.set(b,r.Started);let _=c(b);if(_){const E=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${E} ${b} = ${_};${this.opts._n}`}else if(_=d==null?void 0:d(b))h=(0,t._)`${h}${_}${this.opts._n}`;else throw new n(b);y.set(b,r.Completed)})}return h}}e.ValueScope=a}(q9)),q9}var Wce;function cr(){return Wce||(Wce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=hM(),n=qce();var r=hM();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=qce();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(X,Z){return this}}class o extends s{constructor(X,Z,ae){super(),this.varKind=X,this.name=Z,this.rhs=ae}render({es5:X,_n:Z}){const ae=X?n.varKinds.var:this.varKind,he=this.rhs===void 0?"":` = ${this.rhs}`;return`${ae} ${this.name}${he};`+Z}optimizeNames(X,Z){if(X[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,X,Z)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(X,Z,ae){super(),this.lhs=X,this.rhs=Z,this.sideEffects=ae}render({_n:X}){return`${this.lhs} = ${this.rhs};`+X}optimizeNames(X,Z){if(!(this.lhs instanceof t.Name&&!X[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,X,Z),this}get names(){const X=this.lhs instanceof t.Name?{}:{...this.lhs.names};return M(X,this.rhs)}}class u extends a{constructor(X,Z,ae,he){super(X,ae,he),this.op=Z}render({_n:X}){return`${this.lhs} ${this.op}= ${this.rhs};`+X}}class l extends s{constructor(X){super(),this.label=X,this.names={}}render({_n:X}){return`${this.label}:`+X}}class c extends s{constructor(X){super(),this.label=X,this.names={}}render({_n:X}){return`break${this.label?` ${this.label}`:""};`+X}}class f extends s{constructor(X){super(),this.error=X}render({_n:X}){return`throw ${this.error};`+X}get names(){return this.error.names}}class d extends s{constructor(X){super(),this.code=X}render({_n:X}){return`${this.code};`+X}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(X,Z){return this.code=B(this.code,X,Z),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(X=[]){super(),this.nodes=X}render(X){return this.nodes.reduce((Z,ae)=>Z+ae.render(X),"")}optimizeNodes(){const{nodes:X}=this;let Z=X.length;for(;Z--;){const ae=X[Z].optimizeNodes();Array.isArray(ae)?X.splice(Z,1,...ae):ae?X[Z]=ae:X.splice(Z,1)}return X.length>0?this:void 0}optimizeNames(X,Z){const{nodes:ae}=this;let he=ae.length;for(;he--;){const ge=ae[he];ge.optimizeNames(X,Z)||(V(X,ge.names),ae.splice(he,1))}return ae.length>0?this:void 0}get names(){return this.nodes.reduce((X,Z)=>j(X,Z.names),{})}}class p extends h{render(X){return"{"+X._n+super.render(X)+"}"+X._n}}class g extends h{}class y extends p{}y.kind="else";class b extends p{constructor(X,Z){super(Z),this.condition=X}render(X){let Z=`if(${this.condition})`+super.render(X);return this.else&&(Z+="else "+this.else.render(X)),Z}optimizeNodes(){super.optimizeNodes();const X=this.condition;if(X===!0)return this.nodes;let Z=this.else;if(Z){const ae=Z.optimizeNodes();Z=this.else=Array.isArray(ae)?new y(ae):ae}if(Z)return X===!1?Z instanceof b?Z:Z.nodes:this.nodes.length?this:new b(z(X),Z instanceof b?[Z]:Z.nodes);if(!(X===!1||!this.nodes.length))return this}optimizeNames(X,Z){var ae;if(this.else=(ae=this.else)===null||ae===void 0?void 0:ae.optimizeNames(X,Z),!!(super.optimizeNames(X,Z)||this.else))return this.condition=B(this.condition,X,Z),this}get names(){const X=super.names;return M(X,this.condition),this.else&&j(X,this.else.names),X}}b.kind="if";class _ extends p{}_.kind="for";class E extends _{constructor(X){super(),this.iteration=X}render(X){return`for(${this.iteration})`+super.render(X)}optimizeNames(X,Z){if(super.optimizeNames(X,Z))return this.iteration=B(this.iteration,X,Z),this}get names(){return j(super.names,this.iteration.names)}}class C extends _{constructor(X,Z,ae,he){super(),this.varKind=X,this.name=Z,this.from=ae,this.to=he}render(X){const Z=X.es5?n.varKinds.var:this.varKind,{name:ae,from:he,to:ge}=this;return`for(${Z} ${ae}=${he}; ${ae}<${ge}; ${ae}++)`+super.render(X)}get names(){const X=M(super.names,this.from);return M(X,this.to)}}class x extends _{constructor(X,Z,ae,he){super(),this.loop=X,this.varKind=Z,this.name=ae,this.iterable=he}render(X){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(X)}optimizeNames(X,Z){if(super.optimizeNames(X,Z))return this.iterable=B(this.iterable,X,Z),this}get names(){return j(super.names,this.iterable.names)}}class T extends p{constructor(X,Z,ae){super(),this.name=X,this.args=Z,this.async=ae}render(X){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(X)}}T.kind="func";class A extends h{render(X){return"return "+super.render(X)}}A.kind="return";class k extends p{render(X){let Z="try"+super.render(X);return this.catch&&(Z+=this.catch.render(X)),this.finally&&(Z+=this.finally.render(X)),Z}optimizeNodes(){var X,Z;return super.optimizeNodes(),(X=this.catch)===null||X===void 0||X.optimizeNodes(),(Z=this.finally)===null||Z===void 0||Z.optimizeNodes(),this}optimizeNames(X,Z){var ae,he;return super.optimizeNames(X,Z),(ae=this.catch)===null||ae===void 0||ae.optimizeNames(X,Z),(he=this.finally)===null||he===void 0||he.optimizeNames(X,Z),this}get names(){const X=super.names;return this.catch&&j(X,this.catch.names),this.finally&&j(X,this.finally.names),X}}class N extends p{constructor(X){super(),this.error=X}render(X){return`catch(${this.error})`+super.render(X)}}N.kind="catch";class P extends p{render(X){return"finally"+super.render(X)}}P.kind="finally";class D{constructor(X,Z={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Z,_n:Z.lines?`
`:""},this._extScope=X,this._scope=new n.Scope({parent:X}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(X){return this._scope.name(X)}scopeName(X){return this._extScope.name(X)}scopeValue(X,Z){const ae=this._extScope.value(X,Z);return(this._values[ae.prefix]||(this._values[ae.prefix]=new Set)).add(ae),ae}getScopeValue(X,Z){return this._extScope.getValue(X,Z)}scopeRefs(X){return this._extScope.scopeRefs(X,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(X,Z,ae,he){const ge=this._scope.toName(Z);return ae!==void 0&&he&&(this._constants[ge.str]=ae),this._leafNode(new o(X,ge,ae)),ge}const(X,Z,ae){return this._def(n.varKinds.const,X,Z,ae)}let(X,Z,ae){return this._def(n.varKinds.let,X,Z,ae)}var(X,Z,ae){return this._def(n.varKinds.var,X,Z,ae)}assign(X,Z,ae){return this._leafNode(new a(X,Z,ae))}add(X,Z){return this._leafNode(new u(X,e.operators.ADD,Z))}code(X){return typeof X=="function"?X():X!==t.nil&&this._leafNode(new d(X)),this}object(...X){const Z=["{"];for(const[ae,he]of X)Z.length>1&&Z.push(","),Z.push(ae),(ae!==he||this.opts.es5)&&(Z.push(":"),(0,t.addCodeArg)(Z,he));return Z.push("}"),new t._Code(Z)}if(X,Z,ae){if(this._blockNode(new b(X)),Z&&ae)this.code(Z).else().code(ae).endIf();else if(Z)this.code(Z).endIf();else if(ae)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(X){return this._elseNode(new b(X))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(b,y)}_for(X,Z){return this._blockNode(X),Z&&this.code(Z).endFor(),this}for(X,Z){return this._for(new E(X),Z)}forRange(X,Z,ae,he,ge=this.opts.es5?n.varKinds.var:n.varKinds.let){const be=this._scope.toName(X);return this._for(new C(ge,be,Z,ae),()=>he(be))}forOf(X,Z,ae,he=n.varKinds.const){const ge=this._scope.toName(X);if(this.opts.es5){const be=Z instanceof t.Name?Z:this.var("_arr",Z);return this.forRange("_i",0,(0,t._)`${be}.length`,Ce=>{this.var(ge,(0,t._)`${be}[${Ce}]`),ae(ge)})}return this._for(new x("of",he,ge,Z),()=>ae(ge))}forIn(X,Z,ae,he=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(X,(0,t._)`Object.keys(${Z})`,ae);const ge=this._scope.toName(X);return this._for(new x("in",he,ge,Z),()=>ae(ge))}endFor(){return this._endBlockNode(_)}label(X){return this._leafNode(new l(X))}break(X){return this._leafNode(new c(X))}return(X){const Z=new A;if(this._blockNode(Z),this.code(X),Z.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(A)}try(X,Z,ae){if(!Z&&!ae)throw new Error('CodeGen: "try" without "catch" and "finally"');const he=new k;if(this._blockNode(he),this.code(X),Z){const ge=this.name("e");this._currNode=he.catch=new N(ge),Z(ge)}return ae&&(this._currNode=he.finally=new P,this.code(ae)),this._endBlockNode(N,P)}throw(X){return this._leafNode(new f(X))}block(X,Z){return this._blockStarts.push(this._nodes.length),X&&this.code(X).endBlock(Z),this}endBlock(X){const Z=this._blockStarts.pop();if(Z===void 0)throw new Error("CodeGen: not in self-balancing block");const ae=this._nodes.length-Z;if(ae<0||X!==void 0&&ae!==X)throw new Error(`CodeGen: wrong number of nodes: ${ae} vs ${X} expected`);return this._nodes.length=Z,this}func(X,Z=t.nil,ae,he){return this._blockNode(new T(X,Z,ae)),he&&this.code(he).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(X=1){for(;X-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(X){return this._currNode.nodes.push(X),this}_blockNode(X){this._currNode.nodes.push(X),this._nodes.push(X)}_endBlockNode(X,Z){const ae=this._currNode;if(ae instanceof X||Z&&ae instanceof Z)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Z?`${X.kind}/${Z.kind}`:X.kind}"`)}_elseNode(X){const Z=this._currNode;if(!(Z instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=Z.else=X,this}get _root(){return this._nodes[0]}get _currNode(){const X=this._nodes;return X[X.length-1]}set _currNode(X){const Z=this._nodes;Z[Z.length-1]=X}}e.CodeGen=D;function j(q,X){for(const Z in X)q[Z]=(q[Z]||0)+(X[Z]||0);return q}function M(q,X){return X instanceof t._CodeOrName?j(q,X.names):q}function B(q,X,Z){if(q instanceof t.Name)return ae(q);if(!he(q))return q;return new t._Code(q._items.reduce((ge,be)=>(be instanceof t.Name&&(be=ae(be)),be instanceof t._Code?ge.push(...be._items):ge.push(be),ge),[]));function ae(ge){const be=Z[ge.str];return be===void 0||X[ge.str]!==1?ge:(delete X[ge.str],be)}function he(ge){return ge instanceof t._Code&&ge._items.some(be=>be instanceof t.Name&&X[be.str]===1&&Z[be.str]!==void 0)}}function V(q,X){for(const Z in X)q[Z]=(q[Z]||0)-(X[Z]||0)}function z(q){return typeof q=="boolean"||typeof q=="number"||q===null?!q:(0,t._)`!${K(q)}`}e.not=z;const G=U(e.operators.AND);function Y(...q){return q.reduce(G)}e.and=Y;const Q=U(e.operators.OR);function L(...q){return q.reduce(Q)}e.or=L;function U(q){return(X,Z)=>X===t.nil?Z:Z===t.nil?X:(0,t._)`${K(X)} ${q} ${K(Z)}`}function K(q){return q instanceof t.Name?q:(0,t._)`(${q})`}}(V9)),V9}var rr={},Gce;function qr(){if(Gce)return rr;Gce=1,Object.defineProperty(rr,"__esModule",{value:!0}),rr.checkStrictMode=rr.getErrorPath=rr.Type=rr.useFunc=rr.setEvaluated=rr.evaluatedPropsToName=rr.mergeEvaluated=rr.eachItem=rr.unescapeJsonPointer=rr.escapeJsonPointer=rr.escapeFragment=rr.unescapeFragment=rr.schemaRefOrVal=rr.schemaHasRulesButRef=rr.schemaHasRules=rr.checkUnknownRules=rr.alwaysValidSchema=rr.toHash=void 0;const e=cr(),t=hM();function n(x){const T={};for(const A of x)T[A]=!0;return T}rr.toHash=n;function r(x,T){return typeof T=="boolean"?T:Object.keys(T).length===0?!0:(i(x,T),!s(T,x.self.RULES.all))}rr.alwaysValidSchema=r;function i(x,T=x.schema){const{opts:A,self:k}=x;if(!A.strictSchema||typeof T=="boolean")return;const N=k.RULES.keywords;for(const P in T)N[P]||C(x,`unknown keyword: "${P}"`)}rr.checkUnknownRules=i;function s(x,T){if(typeof x=="boolean")return!x;for(const A in x)if(T[A])return!0;return!1}rr.schemaHasRules=s;function o(x,T){if(typeof x=="boolean")return!x;for(const A in x)if(A!=="$ref"&&T.all[A])return!0;return!1}rr.schemaHasRulesButRef=o;function a({topSchemaRef:x,schemaPath:T},A,k,N){if(!N){if(typeof A=="number"||typeof A=="boolean")return A;if(typeof A=="string")return(0,e._)`${A}`}return(0,e._)`${x}${T}${(0,e.getProperty)(k)}`}rr.schemaRefOrVal=a;function u(x){return f(decodeURIComponent(x))}rr.unescapeFragment=u;function l(x){return encodeURIComponent(c(x))}rr.escapeFragment=l;function c(x){return typeof x=="number"?`${x}`:x.replace(/~/g,"~0").replace(/\//g,"~1")}rr.escapeJsonPointer=c;function f(x){return x.replace(/~1/g,"/").replace(/~0/g,"~")}rr.unescapeJsonPointer=f;function d(x,T){if(Array.isArray(x))for(const A of x)T(A);else T(x)}rr.eachItem=d;function h({mergeNames:x,mergeToName:T,mergeValues:A,resultToName:k}){return(N,P,D,j)=>{const M=D===void 0?P:D instanceof e.Name?(P instanceof e.Name?x(N,P,D):T(N,P,D),D):P instanceof e.Name?(T(N,D,P),P):A(P,D);return j===e.Name&&!(M instanceof e.Name)?k(N,M):M}}rr.mergeEvaluated={props:h({mergeNames:(x,T,A)=>x.if((0,e._)`${A} !== true && ${T} !== undefined`,()=>{x.if((0,e._)`${T} === true`,()=>x.assign(A,!0),()=>x.assign(A,(0,e._)`${A} || {}`).code((0,e._)`Object.assign(${A}, ${T})`))}),mergeToName:(x,T,A)=>x.if((0,e._)`${A} !== true`,()=>{T===!0?x.assign(A,!0):(x.assign(A,(0,e._)`${A} || {}`),g(x,A,T))}),mergeValues:(x,T)=>x===!0?!0:{...x,...T},resultToName:p}),items:h({mergeNames:(x,T,A)=>x.if((0,e._)`${A} !== true && ${T} !== undefined`,()=>x.assign(A,(0,e._)`${T} === true ? true : ${A} > ${T} ? ${A} : ${T}`)),mergeToName:(x,T,A)=>x.if((0,e._)`${A} !== true`,()=>x.assign(A,T===!0?!0:(0,e._)`${A} > ${T} ? ${A} : ${T}`)),mergeValues:(x,T)=>x===!0?!0:Math.max(x,T),resultToName:(x,T)=>x.var("items",T)})};function p(x,T){if(T===!0)return x.var("props",!0);const A=x.var("props",(0,e._)`{}`);return T!==void 0&&g(x,A,T),A}rr.evaluatedPropsToName=p;function g(x,T,A){Object.keys(A).forEach(k=>x.assign((0,e._)`${T}${(0,e.getProperty)(k)}`,!0))}rr.setEvaluated=g;const y={};function b(x,T){return x.scopeValue("func",{ref:T,code:y[T.code]||(y[T.code]=new t._Code(T.code))})}rr.useFunc=b;var _;(function(x){x[x.Num=0]="Num",x[x.Str=1]="Str"})(_||(rr.Type=_={}));function E(x,T,A){if(x instanceof e.Name){const k=T===_.Num;return A?k?(0,e._)`"[" + ${x} + "]"`:(0,e._)`"['" + ${x} + "']"`:k?(0,e._)`"/" + ${x}`:(0,e._)`"/" + ${x}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return A?(0,e.getProperty)(x).toString():"/"+c(x)}rr.getErrorPath=E;function C(x,T,A=x.opts.strictSchema){if(A){if(T=`strict mode: ${T}`,A===!0)throw new Error(T);x.self.logger.warn(T)}}return rr.checkStrictMode=C,rr}var VN={},Yce;function iv(){if(Yce)return VN;Yce=1,Object.defineProperty(VN,"__esModule",{value:!0});const e=cr(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return VN.default=t,VN}var Kce;function R6(){return Kce||(Kce=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=cr(),n=qr(),r=iv();e.keywordError={message:({keyword:y})=>(0,t.str)`must pass "${y}" keyword validation`},e.keyword$DataError={message:({keyword:y,schemaType:b})=>b?(0,t.str)`"${y}" keyword must be ${b} ($data)`:(0,t.str)`"${y}" keyword is invalid ($data)`};function i(y,b=e.keywordError,_,E){const{it:C}=y,{gen:x,compositeRule:T,allErrors:A}=C,k=f(y,b,_);E??(T||A)?u(x,k):l(C,(0,t._)`[${k}]`)}e.reportError=i;function s(y,b=e.keywordError,_){const{it:E}=y,{gen:C,compositeRule:x,allErrors:T}=E,A=f(y,b,_);u(C,A),x||T||l(E,r.default.vErrors)}e.reportExtraError=s;function o(y,b){y.assign(r.default.errors,b),y.if((0,t._)`${r.default.vErrors} !== null`,()=>y.if(b,()=>y.assign((0,t._)`${r.default.vErrors}.length`,b),()=>y.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:y,keyword:b,schemaValue:_,data:E,errsCount:C,it:x}){if(C===void 0)throw new Error("ajv implementation error");const T=y.name("err");y.forRange("i",C,r.default.errors,A=>{y.const(T,(0,t._)`${r.default.vErrors}[${A}]`),y.if((0,t._)`${T}.instancePath === undefined`,()=>y.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,x.errorPath))),y.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${x.errSchemaPath}/${b}`),x.opts.verbose&&(y.assign((0,t._)`${T}.schema`,_),y.assign((0,t._)`${T}.data`,E))})}e.extendErrors=a;function u(y,b){const _=y.const("err",b);y.if((0,t._)`${r.default.vErrors} === null`,()=>y.assign(r.default.vErrors,(0,t._)`[${_}]`),(0,t._)`${r.default.vErrors}.push(${_})`),y.code((0,t._)`${r.default.errors}++`)}function l(y,b){const{gen:_,validateName:E,schemaEnv:C}=y;C.$async?_.throw((0,t._)`new ${y.ValidationError}(${b})`):(_.assign((0,t._)`${E}.errors`,b),_.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(y,b,_){const{createErrors:E}=y.it;return E===!1?(0,t._)`{}`:d(y,b,_)}function d(y,b,_={}){const{gen:E,it:C}=y,x=[h(C,_),p(y,_)];return g(y,b,x),E.object(...x)}function h({errorPath:y},{instancePath:b}){const _=b?(0,t.str)`${y}${(0,n.getErrorPath)(b,n.Type.Str)}`:y;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,_)]}function p({keyword:y,it:{errSchemaPath:b}},{schemaPath:_,parentSchema:E}){let C=E?b:(0,t.str)`${b}/${y}`;return _&&(C=(0,t.str)`${C}${(0,n.getErrorPath)(_,n.Type.Str)}`),[c.schemaPath,C]}function g(y,{params:b,message:_},E){const{keyword:C,data:x,schemaValue:T,it:A}=y,{opts:k,propertyName:N,topSchemaRef:P,schemaPath:D}=A;E.push([c.keyword,C],[c.params,typeof b=="function"?b(y):b||(0,t._)`{}`]),k.messages&&E.push([c.message,typeof _=="function"?_(y):_]),k.verbose&&E.push([c.schema,T],[c.parentSchema,(0,t._)`${P}${D}`],[r.default.data,x]),N&&E.push([c.propertyName,N])}}(z9)),z9}var Xce;function hwt(){if(Xce)return Mv;Xce=1,Object.defineProperty(Mv,"__esModule",{value:!0}),Mv.boolOrEmptySchema=Mv.topBoolOrEmptySchema=void 0;const e=R6(),t=cr(),n=iv(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?o(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}Mv.topBoolOrEmptySchema=i;function s(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),o(a)):l.var(u,!0)}Mv.boolOrEmptySchema=s;function o(a,u){const{gen:l,data:c}=a,f={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,r,void 0,u)}return Mv}var ea={},$v={},Qce;function CAe(){if(Qce)return $v;Qce=1,Object.defineProperty($v,"__esModule",{value:!0}),$v.getRules=$v.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}$v.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return $v.getRules=r,$v}var Kp={},Jce;function AAe(){if(Jce)return Kp;Jce=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.shouldUseRule=Kp.shouldUseGroup=Kp.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}Kp.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}Kp.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return Kp.shouldUseRule=n,Kp}var Zce;function pM(){if(Zce)return ea;Zce=1,Object.defineProperty(ea,"__esModule",{value:!0}),ea.reportTypeError=ea.checkDataTypes=ea.checkDataType=ea.coerceAndCheckDataType=ea.getJSONTypes=ea.getSchemaTypes=ea.DataType=void 0;const e=CAe(),t=AAe(),n=R6(),r=cr(),i=qr();var s;(function(_){_[_.Correct=0]="Correct",_[_.Wrong=1]="Wrong"})(s||(ea.DataType=s={}));function o(_){const E=a(_.type);if(E.includes("null")){if(_.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!E.length&&_.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');_.nullable===!0&&E.push("null")}return E}ea.getSchemaTypes=o;function a(_){const E=Array.isArray(_)?_:_?[_]:[];if(E.every(e.isJSONType))return E;throw new Error("type must be JSONType or JSONType[]: "+E.join(","))}ea.getJSONTypes=a;function u(_,E){const{gen:C,data:x,opts:T}=_,A=c(E,T.coerceTypes),k=E.length>0&&!(A.length===0&&E.length===1&&(0,t.schemaHasRulesForType)(_,E[0]));if(k){const N=p(E,x,T.strictNumbers,s.Wrong);C.if(N,()=>{A.length?f(_,E,A):y(_)})}return k}ea.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(_,E){return E?_.filter(C=>l.has(C)||E==="array"&&C==="array"):[]}function f(_,E,C){const{gen:x,data:T,opts:A}=_,k=x.let("dataType",(0,r._)`typeof ${T}`),N=x.let("coerced",(0,r._)`undefined`);A.coerceTypes==="array"&&x.if((0,r._)`${k} == 'object' && Array.isArray(${T}) && ${T}.length == 1`,()=>x.assign(T,(0,r._)`${T}[0]`).assign(k,(0,r._)`typeof ${T}`).if(p(E,T,A.strictNumbers),()=>x.assign(N,T))),x.if((0,r._)`${N} !== undefined`);for(const D of C)(l.has(D)||D==="array"&&A.coerceTypes==="array")&&P(D);x.else(),y(_),x.endIf(),x.if((0,r._)`${N} !== undefined`,()=>{x.assign(T,N),d(_,N)});function P(D){switch(D){case"string":x.elseIf((0,r._)`${k} == "number" || ${k} == "boolean"`).assign(N,(0,r._)`"" + ${T}`).elseIf((0,r._)`${T} === null`).assign(N,(0,r._)`""`);return;case"number":x.elseIf((0,r._)`${k} == "boolean" || ${T} === null
              || (${k} == "string" && ${T} && ${T} == +${T})`).assign(N,(0,r._)`+${T}`);return;case"integer":x.elseIf((0,r._)`${k} === "boolean" || ${T} === null
              || (${k} === "string" && ${T} && ${T} == +${T} && !(${T} % 1))`).assign(N,(0,r._)`+${T}`);return;case"boolean":x.elseIf((0,r._)`${T} === "false" || ${T} === 0 || ${T} === null`).assign(N,!1).elseIf((0,r._)`${T} === "true" || ${T} === 1`).assign(N,!0);return;case"null":x.elseIf((0,r._)`${T} === "" || ${T} === 0 || ${T} === false`),x.assign(N,null);return;case"array":x.elseIf((0,r._)`${k} === "string" || ${k} === "number"
              || ${k} === "boolean" || ${T} === null`).assign(N,(0,r._)`[${T}]`)}}}function d({gen:_,parentData:E,parentDataProperty:C},x){_.if((0,r._)`${E} !== undefined`,()=>_.assign((0,r._)`${E}[${C}]`,x))}function h(_,E,C,x=s.Correct){const T=x===s.Correct?r.operators.EQ:r.operators.NEQ;let A;switch(_){case"null":return(0,r._)`${E} ${T} null`;case"array":A=(0,r._)`Array.isArray(${E})`;break;case"object":A=(0,r._)`${E} && typeof ${E} == "object" && !Array.isArray(${E})`;break;case"integer":A=k((0,r._)`!(${E} % 1) && !isNaN(${E})`);break;case"number":A=k();break;default:return(0,r._)`typeof ${E} ${T} ${_}`}return x===s.Correct?A:(0,r.not)(A);function k(N=r.nil){return(0,r.and)((0,r._)`typeof ${E} == "number"`,N,C?(0,r._)`isFinite(${E})`:r.nil)}}ea.checkDataType=h;function p(_,E,C,x){if(_.length===1)return h(_[0],E,C,x);let T;const A=(0,i.toHash)(_);if(A.array&&A.object){const k=(0,r._)`typeof ${E} != "object"`;T=A.null?k:(0,r._)`!${E} || ${k}`,delete A.null,delete A.array,delete A.object}else T=r.nil;A.number&&delete A.integer;for(const k in A)T=(0,r.and)(T,h(k,E,C,x));return T}ea.checkDataTypes=p;const g={message:({schema:_})=>`must be ${_}`,params:({schema:_,schemaValue:E})=>typeof _=="string"?(0,r._)`{type: ${_}}`:(0,r._)`{type: ${E}}`};function y(_){const E=b(_);(0,n.reportError)(E,g)}ea.reportTypeError=y;function b(_){const{gen:E,data:C,schema:x}=_,T=(0,i.schemaRefOrVal)(_,x,"type");return{gen:E,keyword:"type",data:C,schema:x.type,schemaCode:T,schemaValue:T,parentSchema:x,params:{},it:_}}return ea}var WT={},efe;function pwt(){if(efe)return WT;efe=1,Object.defineProperty(WT,"__esModule",{value:!0}),WT.assignDefaults=void 0;const e=cr(),t=qr();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const u in o)r(i,u,o[u].default);else s==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}WT.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(o===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(s)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,e._)`${f} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${f} === null || ${f} === ""`),a.if(d,(0,e._)`${f} = ${(0,e.stringify)(o)}`)}return WT}var Lf={},ui={},tfe;function Md(){if(tfe)return ui;tfe=1,Object.defineProperty(ui,"__esModule",{value:!0}),ui.validateUnion=ui.validateArray=ui.usePattern=ui.callValidateCode=ui.schemaProperties=ui.allSchemaProperties=ui.noPropertyInData=ui.propertyInData=ui.isOwnProperty=ui.hasPropFunc=ui.reportMissingProp=ui.checkMissingProp=ui.checkReportMissingProp=void 0;const e=cr(),t=qr(),n=iv(),r=qr();function i(_,E){const{gen:C,data:x,it:T}=_;C.if(c(C,x,E,T.opts.ownProperties),()=>{_.setParams({missingProperty:(0,e._)`${E}`},!0),_.error()})}ui.checkReportMissingProp=i;function s({gen:_,data:E,it:{opts:C}},x,T){return(0,e.or)(...x.map(A=>(0,e.and)(c(_,E,A,C.ownProperties),(0,e._)`${T} = ${A}`)))}ui.checkMissingProp=s;function o(_,E){_.setParams({missingProperty:E},!0),_.error()}ui.reportMissingProp=o;function a(_){return _.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}ui.hasPropFunc=a;function u(_,E,C){return(0,e._)`${a(_)}.call(${E}, ${C})`}ui.isOwnProperty=u;function l(_,E,C,x){const T=(0,e._)`${E}${(0,e.getProperty)(C)} !== undefined`;return x?(0,e._)`${T} && ${u(_,E,C)}`:T}ui.propertyInData=l;function c(_,E,C,x){const T=(0,e._)`${E}${(0,e.getProperty)(C)} === undefined`;return x?(0,e.or)(T,(0,e.not)(u(_,E,C))):T}ui.noPropertyInData=c;function f(_){return _?Object.keys(_).filter(E=>E!=="__proto__"):[]}ui.allSchemaProperties=f;function d(_,E){return f(E).filter(C=>!(0,t.alwaysValidSchema)(_,E[C]))}ui.schemaProperties=d;function h({schemaCode:_,data:E,it:{gen:C,topSchemaRef:x,schemaPath:T,errorPath:A},it:k},N,P,D){const j=D?(0,e._)`${_}, ${E}, ${x}${T}`:E,M=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,A)],[n.default.parentData,k.parentData],[n.default.parentDataProperty,k.parentDataProperty],[n.default.rootData,n.default.rootData]];k.opts.dynamicRef&&M.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const B=(0,e._)`${j}, ${C.object(...M)}`;return P!==e.nil?(0,e._)`${N}.call(${P}, ${B})`:(0,e._)`${N}(${B})`}ui.callValidateCode=h;const p=(0,e._)`new RegExp`;function g({gen:_,it:{opts:E}},C){const x=E.unicodeRegExp?"u":"",{regExp:T}=E.code,A=T(C,x);return _.scopeValue("pattern",{key:A.toString(),ref:A,code:(0,e._)`${T.code==="new RegExp"?p:(0,r.useFunc)(_,T)}(${C}, ${x})`})}ui.usePattern=g;function y(_){const{gen:E,data:C,keyword:x,it:T}=_,A=E.name("valid");if(T.allErrors){const N=E.let("valid",!0);return k(()=>E.assign(N,!1)),N}return E.var(A,!0),k(()=>E.break()),A;function k(N){const P=E.const("len",(0,e._)`${C}.length`);E.forRange("i",0,P,D=>{_.subschema({keyword:x,dataProp:D,dataPropType:t.Type.Num},A),E.if((0,e.not)(A),N)})}}ui.validateArray=y;function b(_){const{gen:E,schema:C,keyword:x,it:T}=_;if(!Array.isArray(C))throw new Error("ajv implementation error");if(C.some(P=>(0,t.alwaysValidSchema)(T,P))&&!T.opts.unevaluated)return;const k=E.let("valid",!1),N=E.name("_valid");E.block(()=>C.forEach((P,D)=>{const j=_.subschema({keyword:x,schemaProp:D,compositeRule:!0},N);E.assign(k,(0,e._)`${k} || ${N}`),_.mergeValidEvaluated(j,N)||E.if((0,e.not)(k))})),_.result(k,()=>_.reset(),()=>_.error(!0))}return ui.validateUnion=b,ui}var nfe;function mwt(){if(nfe)return Lf;nfe=1,Object.defineProperty(Lf,"__esModule",{value:!0}),Lf.validateKeywordUsage=Lf.validSchemaType=Lf.funcKeywordCode=Lf.macroKeywordCode=void 0;const e=cr(),t=iv(),n=Md(),r=R6();function i(d,h){const{gen:p,keyword:g,schema:y,parentSchema:b,it:_}=d,E=h.macro.call(_.self,y,b,_),C=l(p,g,E);_.opts.validateSchema!==!1&&_.self.validateSchema(E,!0);const x=p.name("valid");d.subschema({schema:E,schemaPath:e.nil,errSchemaPath:`${_.errSchemaPath}/${g}`,topSchemaRef:C,compositeRule:!0},x),d.pass(x,()=>d.error(!0))}Lf.macroKeywordCode=i;function s(d,h){var p;const{gen:g,keyword:y,schema:b,parentSchema:_,$data:E,it:C}=d;u(C,h);const x=!E&&h.compile?h.compile.call(C.self,b,_,C):h.validate,T=l(g,y,x),A=g.let("valid");d.block$data(A,k),d.ok((p=h.valid)!==null&&p!==void 0?p:A);function k(){if(h.errors===!1)D(),h.modifying&&o(d),j(()=>d.error());else{const M=h.async?N():P();h.modifying&&o(d),j(()=>a(d,M))}}function N(){const M=g.let("ruleErrs",null);return g.try(()=>D((0,e._)`await `),B=>g.assign(A,!1).if((0,e._)`${B} instanceof ${C.ValidationError}`,()=>g.assign(M,(0,e._)`${B}.errors`),()=>g.throw(B))),M}function P(){const M=(0,e._)`${T}.errors`;return g.assign(M,null),D(e.nil),M}function D(M=h.async?(0,e._)`await `:e.nil){const B=C.opts.passContext?t.default.this:t.default.self,V=!("compile"in h&&!E||h.schema===!1);g.assign(A,(0,e._)`${M}${(0,n.callValidateCode)(d,T,B,V)}`,h.modifying)}function j(M){var B;g.if((0,e.not)((B=h.valid)!==null&&B!==void 0?B:A),M)}}Lf.funcKeywordCode=s;function o(d){const{gen:h,data:p,it:g}=d;h.if(g.parentData,()=>h.assign(p,(0,e._)`${g.parentData}[${g.parentDataProperty}]`))}function a(d,h){const{gen:p}=d;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function u({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function l(d,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(d,h,p=!1){return!h.length||h.some(g=>g==="array"?Array.isArray(d):g==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==g||p&&typeof d>"u")}Lf.validSchemaType=c;function f({schema:d,opts:h,self:p,errSchemaPath:g},y,b){if(Array.isArray(y.keyword)?!y.keyword.includes(b):y.keyword!==b)throw new Error("ajv implementation error");const _=y.dependencies;if(_!=null&&_.some(E=>!Object.prototype.hasOwnProperty.call(d,E)))throw new Error(`parent schema must have dependencies of ${b}: ${_.join(",")}`);if(y.validateSchema&&!y.validateSchema(d[b])){const C=`keyword "${b}" value is invalid at path "${g}": `+p.errorsText(y.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(C);else throw new Error(C)}}return Lf.validateKeywordUsage=f,Lf}var Xp={},rfe;function gwt(){if(rfe)return Xp;rfe=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.extendSubschemaMode=Xp.extendSubschemaData=Xp.getSubschema=void 0;const e=cr(),t=qr();function n(s,{keyword:o,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:f}){if(o!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const d=s.schema[o];return a===void 0?{schema:d,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:d[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:f,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}Xp.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=o;if(a!==void 0){const{errorPath:p,dataPathArr:g,opts:y}=o,b=d.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(b),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,u,y.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...g,s.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:d.let("data",l,!0);h(p),f!==void 0&&(s.propertyName=f)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}Xp.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(s.compositeRule=u),l!==void 0&&(s.createErrors=l),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return Xp.extendSubschemaMode=i,Xp}var su={},W9={exports:{}},ife;function ywt(){if(ife)return W9.exports;ife=1;var e=W9.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,u,l,c,f,d){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,u,l,c,f,d);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var g=0;g<p.length;g++)t(r,i,s,p[g],a+"/"+h+"/"+g,u,a,h,o,g)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var y in p)t(r,i,s,p[y],a+"/"+h+"/"+n(y),u,a,h,o,y)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,u,a,h,o)}s(o,a,u,l,c,f,d)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return W9.exports}var sfe;function N6(){if(sfe)return su;sfe=1,Object.defineProperty(su,"__esModule",{value:!0}),su.getSchemaRefs=su.resolveUrl=su.normalizeId=su._getFullPath=su.getFullPath=su.inlineRef=void 0;const e=qr(),t=kG(),n=ywt(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(g,y=!0){return typeof g=="boolean"?!0:y===!0?!o(g):y?a(g)<=y:!1}su.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(g){for(const y in g){if(s.has(y))return!0;const b=g[y];if(Array.isArray(b)&&b.some(o)||typeof b=="object"&&o(b))return!0}return!1}function a(g){let y=0;for(const b in g){if(b==="$ref")return 1/0;if(y++,!r.has(b)&&(typeof g[b]=="object"&&(0,e.eachItem)(g[b],_=>y+=a(_)),y===1/0))return 1/0}return y}function u(g,y="",b){b!==!1&&(y=f(y));const _=g.parse(y);return l(g,_)}su.getFullPath=u;function l(g,y){return g.serialize(y).split("#")[0]+"#"}su._getFullPath=l;const c=/#\/?$/;function f(g){return g?g.replace(c,""):""}su.normalizeId=f;function d(g,y,b){return b=f(b),g.resolve(y,b)}su.resolveUrl=d;const h=/^[a-z_][-a-z0-9._]*$/i;function p(g,y){if(typeof g=="boolean")return{};const{schemaId:b,uriResolver:_}=this.opts,E=f(g[b]||y),C={"":E},x=u(_,E,!1),T={},A=new Set;return n(g,{allKeys:!0},(P,D,j,M)=>{if(M===void 0)return;const B=x+D;let V=C[M];typeof P[b]=="string"&&(V=z.call(this,P[b])),G.call(this,P.$anchor),G.call(this,P.$dynamicAnchor),C[D]=V;function z(Y){const Q=this.opts.uriResolver.resolve;if(Y=f(V?Q(V,Y):Y),A.has(Y))throw N(Y);A.add(Y);let L=this.refs[Y];return typeof L=="string"&&(L=this.refs[L]),typeof L=="object"?k(P,L.schema,Y):Y!==f(B)&&(Y[0]==="#"?(k(P,T[Y],Y),T[Y]=P):this.refs[Y]=B),Y}function G(Y){if(typeof Y=="string"){if(!h.test(Y))throw new Error(`invalid anchor "${Y}"`);z.call(this,`#${Y}`)}}}),T;function k(P,D,j){if(D!==void 0&&!t(P,D))throw N(j)}function N(P){return new Error(`reference "${P}" resolves to more than one schema`)}}return su.getSchemaRefs=p,su}var ofe;function P6(){if(ofe)return Yp;ofe=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.getData=Yp.KeywordCxt=Yp.validateFunctionCode=void 0;const e=hwt(),t=pM(),n=AAe(),r=pM(),i=pwt(),s=mwt(),o=gwt(),a=cr(),u=iv(),l=N6(),c=qr(),f=R6();function d(oe){if(x(oe)&&(A(oe),C(oe))){y(oe);return}h(oe,()=>(0,e.topBoolOrEmptySchema)(oe))}Yp.validateFunctionCode=d;function h({gen:oe,validateName:re,schema:xe,schemaEnv:Re,opts:Ke},Qe){Ke.code.es5?oe.func(re,(0,a._)`${u.default.data}, ${u.default.valCxt}`,Re.$async,()=>{oe.code((0,a._)`"use strict"; ${_(xe,Ke)}`),g(oe,Ke),oe.code(Qe)}):oe.func(re,(0,a._)`${u.default.data}, ${p(Ke)}`,Re.$async,()=>oe.code(_(xe,Ke)).code(Qe))}function p(oe){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${oe.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function g(oe,re){oe.if(u.default.valCxt,()=>{oe.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),oe.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),oe.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),oe.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),re.dynamicRef&&oe.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{oe.var(u.default.instancePath,(0,a._)`""`),oe.var(u.default.parentData,(0,a._)`undefined`),oe.var(u.default.parentDataProperty,(0,a._)`undefined`),oe.var(u.default.rootData,u.default.data),re.dynamicRef&&oe.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function y(oe){const{schema:re,opts:xe,gen:Re}=oe;h(oe,()=>{xe.$comment&&re.$comment&&M(oe),P(oe),Re.let(u.default.vErrors,null),Re.let(u.default.errors,0),xe.unevaluated&&b(oe),k(oe),B(oe)})}function b(oe){const{gen:re,validateName:xe}=oe;oe.evaluated=re.const("evaluated",(0,a._)`${xe}.evaluated`),re.if((0,a._)`${oe.evaluated}.dynamicProps`,()=>re.assign((0,a._)`${oe.evaluated}.props`,(0,a._)`undefined`)),re.if((0,a._)`${oe.evaluated}.dynamicItems`,()=>re.assign((0,a._)`${oe.evaluated}.items`,(0,a._)`undefined`))}function _(oe,re){const xe=typeof oe=="object"&&oe[re.schemaId];return xe&&(re.code.source||re.code.process)?(0,a._)`/*# sourceURL=${xe} */`:a.nil}function E(oe,re){if(x(oe)&&(A(oe),C(oe))){T(oe,re);return}(0,e.boolOrEmptySchema)(oe,re)}function C({schema:oe,self:re}){if(typeof oe=="boolean")return!oe;for(const xe in oe)if(re.RULES.all[xe])return!0;return!1}function x(oe){return typeof oe.schema!="boolean"}function T(oe,re){const{schema:xe,gen:Re,opts:Ke}=oe;Ke.$comment&&xe.$comment&&M(oe),D(oe),j(oe);const Qe=Re.const("_errs",u.default.errors);k(oe,Qe),Re.var(re,(0,a._)`${Qe} === ${u.default.errors}`)}function A(oe){(0,c.checkUnknownRules)(oe),N(oe)}function k(oe,re){if(oe.opts.jtd)return z(oe,[],!1,re);const xe=(0,t.getSchemaTypes)(oe.schema),Re=(0,t.coerceAndCheckDataType)(oe,xe);z(oe,xe,!Re,re)}function N(oe){const{schema:re,errSchemaPath:xe,opts:Re,self:Ke}=oe;re.$ref&&Re.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(re,Ke.RULES)&&Ke.logger.warn(`$ref: keywords ignored in schema at path "${xe}"`)}function P(oe){const{schema:re,opts:xe}=oe;re.default!==void 0&&xe.useDefaults&&xe.strictSchema&&(0,c.checkStrictMode)(oe,"default is ignored in the schema root")}function D(oe){const re=oe.schema[oe.opts.schemaId];re&&(oe.baseId=(0,l.resolveUrl)(oe.opts.uriResolver,oe.baseId,re))}function j(oe){if(oe.schema.$async&&!oe.schemaEnv.$async)throw new Error("async schema in sync schema")}function M({gen:oe,schemaEnv:re,schema:xe,errSchemaPath:Re,opts:Ke}){const Qe=xe.$comment;if(Ke.$comment===!0)oe.code((0,a._)`${u.default.self}.logger.log(${Qe})`);else if(typeof Ke.$comment=="function"){const ke=(0,a.str)`${Re}/$comment`,Ue=oe.scopeValue("root",{ref:re.root});oe.code((0,a._)`${u.default.self}.opts.$comment(${Qe}, ${ke}, ${Ue}.schema)`)}}function B(oe){const{gen:re,schemaEnv:xe,validateName:Re,ValidationError:Ke,opts:Qe}=oe;xe.$async?re.if((0,a._)`${u.default.errors} === 0`,()=>re.return(u.default.data),()=>re.throw((0,a._)`new ${Ke}(${u.default.vErrors})`)):(re.assign((0,a._)`${Re}.errors`,u.default.vErrors),Qe.unevaluated&&V(oe),re.return((0,a._)`${u.default.errors} === 0`))}function V({gen:oe,evaluated:re,props:xe,items:Re}){xe instanceof a.Name&&oe.assign((0,a._)`${re}.props`,xe),Re instanceof a.Name&&oe.assign((0,a._)`${re}.items`,Re)}function z(oe,re,xe,Re){const{gen:Ke,schema:Qe,data:ke,allErrors:Ue,opts:rt,self:ft}=oe,{RULES:Rt}=ft;if(Qe.$ref&&(rt.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(Qe,Rt))){Ke.block(()=>he(oe,"$ref",Rt.all.$ref.definition));return}rt.jtd||Y(oe,re),Ke.block(()=>{for(const Ie of Rt.rules)st(Ie);st(Rt.post)});function st(Ie){(0,n.shouldUseGroup)(Qe,Ie)&&(Ie.type?(Ke.if((0,r.checkDataType)(Ie.type,ke,rt.strictNumbers)),G(oe,Ie),re.length===1&&re[0]===Ie.type&&xe&&(Ke.else(),(0,r.reportTypeError)(oe)),Ke.endIf()):G(oe,Ie),Ue||Ke.if((0,a._)`${u.default.errors} === ${Re||0}`))}}function G(oe,re){const{gen:xe,schema:Re,opts:{useDefaults:Ke}}=oe;Ke&&(0,i.assignDefaults)(oe,re.type),xe.block(()=>{for(const Qe of re.rules)(0,n.shouldUseRule)(Re,Qe)&&he(oe,Qe.keyword,Qe.definition,re.type)})}function Y(oe,re){oe.schemaEnv.meta||!oe.opts.strictTypes||(Q(oe,re),oe.opts.allowUnionTypes||L(oe,re),U(oe,oe.dataTypes))}function Q(oe,re){if(re.length){if(!oe.dataTypes.length){oe.dataTypes=re;return}re.forEach(xe=>{q(oe.dataTypes,xe)||Z(oe,`type "${xe}" not allowed by context "${oe.dataTypes.join(",")}"`)}),X(oe,re)}}function L(oe,re){re.length>1&&!(re.length===2&&re.includes("null"))&&Z(oe,"use allowUnionTypes to allow union type keyword")}function U(oe,re){const xe=oe.self.RULES.all;for(const Re in xe){const Ke=xe[Re];if(typeof Ke=="object"&&(0,n.shouldUseRule)(oe.schema,Ke)){const{type:Qe}=Ke.definition;Qe.length&&!Qe.some(ke=>K(re,ke))&&Z(oe,`missing type "${Qe.join(",")}" for keyword "${Re}"`)}}}function K(oe,re){return oe.includes(re)||re==="number"&&oe.includes("integer")}function q(oe,re){return oe.includes(re)||re==="integer"&&oe.includes("number")}function X(oe,re){const xe=[];for(const Re of oe.dataTypes)q(re,Re)?xe.push(Re):re.includes("integer")&&Re==="number"&&xe.push("integer");oe.dataTypes=xe}function Z(oe,re){const xe=oe.schemaEnv.baseId+oe.errSchemaPath;re+=` at "${xe}" (strictTypes)`,(0,c.checkStrictMode)(oe,re,oe.opts.strictTypes)}class ae{constructor(re,xe,Re){if((0,s.validateKeywordUsage)(re,xe,Re),this.gen=re.gen,this.allErrors=re.allErrors,this.keyword=Re,this.data=re.data,this.schema=re.schema[Re],this.$data=xe.$data&&re.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(re,this.schema,Re,this.$data),this.schemaType=xe.schemaType,this.parentSchema=re.schema,this.params={},this.it=re,this.def=xe,this.$data)this.schemaCode=re.gen.const("vSchema",Ce(this.$data,re));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,xe.schemaType,xe.allowUndefined))throw new Error(`${Re} value must be ${JSON.stringify(xe.schemaType)}`);("code"in xe?xe.trackErrors:xe.errors!==!1)&&(this.errsCount=re.gen.const("_errs",u.default.errors))}result(re,xe,Re){this.failResult((0,a.not)(re),xe,Re)}failResult(re,xe,Re){this.gen.if(re),Re?Re():this.error(),xe?(this.gen.else(),xe(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(re,xe){this.failResult((0,a.not)(re),void 0,xe)}fail(re){if(re===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(re),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(re){if(!this.$data)return this.fail(re);const{schemaCode:xe}=this;this.fail((0,a._)`${xe} !== undefined && (${(0,a.or)(this.invalid$data(),re)})`)}error(re,xe,Re){if(xe){this.setParams(xe),this._error(re,Re),this.setParams({});return}this._error(re,Re)}_error(re,xe){(re?f.reportExtraError:f.reportError)(this,this.def.error,xe)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(re){this.allErrors||this.gen.if(re)}setParams(re,xe){xe?Object.assign(this.params,re):this.params=re}block$data(re,xe,Re=a.nil){this.gen.block(()=>{this.check$data(re,Re),xe()})}check$data(re=a.nil,xe=a.nil){if(!this.$data)return;const{gen:Re,schemaCode:Ke,schemaType:Qe,def:ke}=this;Re.if((0,a.or)((0,a._)`${Ke} === undefined`,xe)),re!==a.nil&&Re.assign(re,!0),(Qe.length||ke.validateSchema)&&(Re.elseIf(this.invalid$data()),this.$dataError(),re!==a.nil&&Re.assign(re,!1)),Re.else()}invalid$data(){const{gen:re,schemaCode:xe,schemaType:Re,def:Ke,it:Qe}=this;return(0,a.or)(ke(),Ue());function ke(){if(Re.length){if(!(xe instanceof a.Name))throw new Error("ajv implementation error");const rt=Array.isArray(Re)?Re:[Re];return(0,a._)`${(0,r.checkDataTypes)(rt,xe,Qe.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function Ue(){if(Ke.validateSchema){const rt=re.scopeValue("validate$data",{ref:Ke.validateSchema});return(0,a._)`!${rt}(${xe})`}return a.nil}}subschema(re,xe){const Re=(0,o.getSubschema)(this.it,re);(0,o.extendSubschemaData)(Re,this.it,re),(0,o.extendSubschemaMode)(Re,re);const Ke={...this.it,...Re,items:void 0,props:void 0};return E(Ke,xe),Ke}mergeEvaluated(re,xe){const{it:Re,gen:Ke}=this;Re.opts.unevaluated&&(Re.props!==!0&&re.props!==void 0&&(Re.props=c.mergeEvaluated.props(Ke,re.props,Re.props,xe)),Re.items!==!0&&re.items!==void 0&&(Re.items=c.mergeEvaluated.items(Ke,re.items,Re.items,xe)))}mergeValidEvaluated(re,xe){const{it:Re,gen:Ke}=this;if(Re.opts.unevaluated&&(Re.props!==!0||Re.items!==!0))return Ke.if(xe,()=>this.mergeEvaluated(re,a.Name)),!0}}Yp.KeywordCxt=ae;function he(oe,re,xe,Re){const Ke=new ae(oe,xe,re);"code"in xe?xe.code(Ke,Re):Ke.$data&&xe.validate?(0,s.funcKeywordCode)(Ke,xe):"macro"in xe?(0,s.macroKeywordCode)(Ke,xe):(xe.compile||xe.validate)&&(0,s.funcKeywordCode)(Ke,xe)}const ge=/^\/(?:[^~]|~0|~1)*$/,be=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Ce(oe,{dataLevel:re,dataNames:xe,dataPathArr:Re}){let Ke,Qe;if(oe==="")return u.default.rootData;if(oe[0]==="/"){if(!ge.test(oe))throw new Error(`Invalid JSON-pointer: ${oe}`);Ke=oe,Qe=u.default.rootData}else{const ft=be.exec(oe);if(!ft)throw new Error(`Invalid JSON-pointer: ${oe}`);const Rt=+ft[1];if(Ke=ft[2],Ke==="#"){if(Rt>=re)throw new Error(rt("property/index",Rt));return Re[re-Rt]}if(Rt>re)throw new Error(rt("data",Rt));if(Qe=xe[re-Rt],!Ke)return Qe}let ke=Qe;const Ue=Ke.split("/");for(const ft of Ue)ft&&(Qe=(0,a._)`${Qe}${(0,a.getProperty)((0,c.unescapeJsonPointer)(ft))}`,ke=(0,a._)`${ke} && ${Qe}`);return ke;function rt(ft,Rt){return`Cannot access ${ft} ${Rt} levels up, current level is ${re}`}}return Yp.getData=Ce,Yp}var HN={},afe;function dX(){if(afe)return HN;afe=1,Object.defineProperty(HN,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return HN.default=e,HN}var qN={},ufe;function D6(){if(ufe)return qN;ufe=1,Object.defineProperty(qN,"__esModule",{value:!0});const e=N6();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return qN.default=t,qN}var Bl={},lfe;function hX(){if(lfe)return Bl;lfe=1,Object.defineProperty(Bl,"__esModule",{value:!0}),Bl.resolveSchema=Bl.getCompilingSchema=Bl.resolveRef=Bl.compileSchema=Bl.SchemaEnv=void 0;const e=cr(),t=dX(),n=iv(),r=N6(),i=qr(),s=P6();class o{constructor(b){var _;this.refs={},this.dynamicAnchors={};let E;typeof b.schema=="object"&&(E=b.schema),this.schema=b.schema,this.schemaId=b.schemaId,this.root=b.root||this,this.baseId=(_=b.baseId)!==null&&_!==void 0?_:(0,r.normalizeId)(E==null?void 0:E[b.schemaId||"$id"]),this.schemaPath=b.schemaPath,this.localRefs=b.localRefs,this.meta=b.meta,this.$async=E==null?void 0:E.$async,this.refs={}}}Bl.SchemaEnv=o;function a(y){const b=c.call(this,y);if(b)return b;const _=(0,r.getFullPath)(this.opts.uriResolver,y.root.baseId),{es5:E,lines:C}=this.opts.code,{ownProperties:x}=this.opts,T=new e.CodeGen(this.scope,{es5:E,lines:C,ownProperties:x});let A;y.$async&&(A=T.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const k=T.scopeName("validate");y.validateName=k;const N={gen:T,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:T.scopeValue("schema",this.opts.code.source===!0?{ref:y.schema,code:(0,e.stringify)(y.schema)}:{ref:y.schema}),validateName:k,ValidationError:A,schema:y.schema,schemaEnv:y,rootId:_,baseId:y.baseId||_,schemaPath:e.nil,errSchemaPath:y.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let P;try{this._compilations.add(y),(0,s.validateFunctionCode)(N),T.optimize(this.opts.code.optimize);const D=T.toString();P=`${T.scopeRefs(n.default.scope)}return ${D}`,this.opts.code.process&&(P=this.opts.code.process(P,y));const M=new Function(`${n.default.self}`,`${n.default.scope}`,P)(this,this.scope.get());if(this.scope.value(k,{ref:M}),M.errors=null,M.schema=y.schema,M.schemaEnv=y,y.$async&&(M.$async=!0),this.opts.code.source===!0&&(M.source={validateName:k,validateCode:D,scopeValues:T._values}),this.opts.unevaluated){const{props:B,items:V}=N;M.evaluated={props:B instanceof e.Name?void 0:B,items:V instanceof e.Name?void 0:V,dynamicProps:B instanceof e.Name,dynamicItems:V instanceof e.Name},M.source&&(M.source.evaluated=(0,e.stringify)(M.evaluated))}return y.validate=M,y}catch(D){throw delete y.validate,delete y.validateName,P&&this.logger.error("Error compiling schema, function code:",P),D}finally{this._compilations.delete(y)}}Bl.compileSchema=a;function u(y,b,_){var E;_=(0,r.resolveUrl)(this.opts.uriResolver,b,_);const C=y.refs[_];if(C)return C;let x=d.call(this,y,_);if(x===void 0){const T=(E=y.localRefs)===null||E===void 0?void 0:E[_],{schemaId:A}=this.opts;T&&(x=new o({schema:T,schemaId:A,root:y,baseId:b}))}if(x!==void 0)return y.refs[_]=l.call(this,x)}Bl.resolveRef=u;function l(y){return(0,r.inlineRef)(y.schema,this.opts.inlineRefs)?y.schema:y.validate?y:a.call(this,y)}function c(y){for(const b of this._compilations)if(f(b,y))return b}Bl.getCompilingSchema=c;function f(y,b){return y.schema===b.schema&&y.root===b.root&&y.baseId===b.baseId}function d(y,b){let _;for(;typeof(_=this.refs[b])=="string";)b=_;return _||this.schemas[b]||h.call(this,y,b)}function h(y,b){const _=this.opts.uriResolver.parse(b),E=(0,r._getFullPath)(this.opts.uriResolver,_);let C=(0,r.getFullPath)(this.opts.uriResolver,y.baseId,void 0);if(Object.keys(y.schema).length>0&&E===C)return g.call(this,_,y);const x=(0,r.normalizeId)(E),T=this.refs[x]||this.schemas[x];if(typeof T=="string"){const A=h.call(this,y,T);return typeof(A==null?void 0:A.schema)!="object"?void 0:g.call(this,_,A)}if(typeof(T==null?void 0:T.schema)=="object"){if(T.validate||a.call(this,T),x===(0,r.normalizeId)(b)){const{schema:A}=T,{schemaId:k}=this.opts,N=A[k];return N&&(C=(0,r.resolveUrl)(this.opts.uriResolver,C,N)),new o({schema:A,schemaId:k,root:y,baseId:C})}return g.call(this,_,T)}}Bl.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function g(y,{baseId:b,schema:_,root:E}){var C;if(((C=y.fragment)===null||C===void 0?void 0:C[0])!=="/")return;for(const A of y.fragment.slice(1).split("/")){if(typeof _=="boolean")return;const k=_[(0,i.unescapeFragment)(A)];if(k===void 0)return;_=k;const N=typeof _=="object"&&_[this.opts.schemaId];!p.has(A)&&N&&(b=(0,r.resolveUrl)(this.opts.uriResolver,b,N))}let x;if(typeof _!="boolean"&&_.$ref&&!(0,i.schemaHasRulesButRef)(_,this.RULES)){const A=(0,r.resolveUrl)(this.opts.uriResolver,b,_.$ref);x=h.call(this,E,A)}const{schemaId:T}=this.opts;if(x=x||new o({schema:_,schemaId:T,root:E,baseId:b}),x.schema!==x.root.schema)return x}return Bl}const vwt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",bwt="Meta-schema for $data reference (JSON AnySchema extension proposal)",_wt="object",wwt=["$data"],Ewt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},xwt=!1,Swt={$id:vwt,description:bwt,type:_wt,required:wwt,properties:Ewt,additionalProperties:xwt};var WN={},UC={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */var Twt=UC.exports,cfe;function Cwt(){return cfe||(cfe=1,function(e,t){(function(n,r){r(t)})(Twt,function(n){function r(){for(var ye=arguments.length,ce=Array(ye),_e=0;_e<ye;_e++)ce[_e]=arguments[_e];if(ce.length>1){ce[0]=ce[0].slice(0,-1);for(var je=ce.length-1,Be=1;Be<je;++Be)ce[Be]=ce[Be].slice(1,-1);return ce[je]=ce[je].slice(1),ce.join("")}else return ce[0]}function i(ye){return"(?:"+ye+")"}function s(ye){return ye===void 0?"undefined":ye===null?"null":Object.prototype.toString.call(ye).split(" ").pop().split("]").shift().toLowerCase()}function o(ye){return ye.toUpperCase()}function a(ye){return ye!=null?ye instanceof Array?ye:typeof ye.length!="number"||ye.split||ye.setInterval||ye.call?[ye]:Array.prototype.slice.call(ye):[]}function u(ye,ce){var _e=ye;if(ce)for(var je in ce)_e[je]=ce[je];return _e}function l(ye){var ce="[A-Za-z]",_e="[0-9]",je=r(_e,"[A-Fa-f]"),Be=i(i("%[EFef]"+je+"%"+je+je+"%"+je+je)+"|"+i("%[89A-Fa-f]"+je+"%"+je+je)+"|"+i("%"+je+je)),wt="[\\:\\/\\?\\#\\[\\]\\@]",Bt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",en=r(wt,Bt),Qn=ye?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",nr=ye?"[\\uE000-\\uF8FF]":"[]",Dn=r(ce,_e,"[\\-\\.\\_\\~]",Qn);i(ce+r(ce,_e,"[\\+\\-\\.]")+"*"),i(i(Be+"|"+r(Dn,Bt,"[\\:]"))+"*");var fr=i(i("25[0-5]")+"|"+i("2[0-4]"+_e)+"|"+i("1"+_e+_e)+"|"+i("0?[1-9]"+_e)+"|0?0?"+_e),Lr=i(fr+"\\."+fr+"\\."+fr+"\\."+fr),an=i(je+"{1,4}"),dr=i(i(an+"\\:"+an)+"|"+Lr),si=i(i(an+"\\:")+"{6}"+dr),hr=i("\\:\\:"+i(an+"\\:")+"{5}"+dr),On=i(i(an)+"?\\:\\:"+i(an+"\\:")+"{4}"+dr),zs=i(i(i(an+"\\:")+"{0,1}"+an)+"?\\:\\:"+i(an+"\\:")+"{3}"+dr),ti=i(i(i(an+"\\:")+"{0,2}"+an)+"?\\:\\:"+i(an+"\\:")+"{2}"+dr),Vs=i(i(i(an+"\\:")+"{0,3}"+an)+"?\\:\\:"+an+"\\:"+dr),wi=i(i(i(an+"\\:")+"{0,4}"+an)+"?\\:\\:"+dr),Hi=i(i(i(an+"\\:")+"{0,5}"+an)+"?\\:\\:"+an),no=i(i(i(an+"\\:")+"{0,6}"+an)+"?\\:\\:"),Hs=i([si,hr,On,zs,ti,Vs,wi,Hi,no].join("|")),oi=i(i(Dn+"|"+Be)+"+");i("[vV]"+je+"+\\."+r(Dn,Bt,"[\\:]")+"+"),i(i(Be+"|"+r(Dn,Bt))+"*");var Mu=i(Be+"|"+r(Dn,Bt,"[\\:\\@]"));return i(i(Be+"|"+r(Dn,Bt,"[\\@]"))+"+"),i(i(Mu+"|"+r("[\\/\\?]",nr))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ce,_e,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Dn,Bt),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Dn,Bt),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Dn,Bt),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Dn,Bt),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Dn,Bt,"[\\:\\@\\/\\?]",nr),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Dn,Bt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Dn,Bt),"g"),UNRESERVED:new RegExp(Dn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Dn,en),"g"),PCT_ENCODED:new RegExp(Be,"g"),IPV4ADDRESS:new RegExp("^("+Lr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Hs+")"+i(i("\\%25|\\%(?!"+je+"{2})")+"("+oi+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function ye(ce,_e){var je=[],Be=!0,wt=!1,Bt=void 0;try{for(var en=ce[Symbol.iterator](),Qn;!(Be=(Qn=en.next()).done)&&(je.push(Qn.value),!(_e&&je.length===_e));Be=!0);}catch(nr){wt=!0,Bt=nr}finally{try{!Be&&en.return&&en.return()}finally{if(wt)throw Bt}}return je}return function(ce,_e){if(Array.isArray(ce))return ce;if(Symbol.iterator in Object(ce))return ye(ce,_e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(ye){if(Array.isArray(ye)){for(var ce=0,_e=Array(ye.length);ce<ye.length;ce++)_e[ce]=ye[ce];return _e}else return Array.from(ye)},p=2147483647,g=36,y=1,b=26,_=38,E=700,C=72,x=128,T="-",A=/^xn--/,k=/[^\0-\x7E]/,N=/[\x2E\u3002\uFF0E\uFF61]/g,P={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=g-y,j=Math.floor,M=String.fromCharCode;function B(ye){throw new RangeError(P[ye])}function V(ye,ce){for(var _e=[],je=ye.length;je--;)_e[je]=ce(ye[je]);return _e}function z(ye,ce){var _e=ye.split("@"),je="";_e.length>1&&(je=_e[0]+"@",ye=_e[1]),ye=ye.replace(N,".");var Be=ye.split("."),wt=V(Be,ce).join(".");return je+wt}function G(ye){for(var ce=[],_e=0,je=ye.length;_e<je;){var Be=ye.charCodeAt(_e++);if(Be>=55296&&Be<=56319&&_e<je){var wt=ye.charCodeAt(_e++);(wt&64512)==56320?ce.push(((Be&1023)<<10)+(wt&1023)+65536):(ce.push(Be),_e--)}else ce.push(Be)}return ce}var Y=function(ce){return String.fromCodePoint.apply(String,h(ce))},Q=function(ce){return ce-48<10?ce-22:ce-65<26?ce-65:ce-97<26?ce-97:g},L=function(ce,_e){return ce+22+75*(ce<26)-((_e!=0)<<5)},U=function(ce,_e,je){var Be=0;for(ce=je?j(ce/E):ce>>1,ce+=j(ce/_e);ce>D*b>>1;Be+=g)ce=j(ce/D);return j(Be+(D+1)*ce/(ce+_))},K=function(ce){var _e=[],je=ce.length,Be=0,wt=x,Bt=C,en=ce.lastIndexOf(T);en<0&&(en=0);for(var Qn=0;Qn<en;++Qn)ce.charCodeAt(Qn)>=128&&B("not-basic"),_e.push(ce.charCodeAt(Qn));for(var nr=en>0?en+1:0;nr<je;){for(var Dn=Be,fr=1,Lr=g;;Lr+=g){nr>=je&&B("invalid-input");var an=Q(ce.charCodeAt(nr++));(an>=g||an>j((p-Be)/fr))&&B("overflow"),Be+=an*fr;var dr=Lr<=Bt?y:Lr>=Bt+b?b:Lr-Bt;if(an<dr)break;var si=g-dr;fr>j(p/si)&&B("overflow"),fr*=si}var hr=_e.length+1;Bt=U(Be-Dn,hr,Dn==0),j(Be/hr)>p-wt&&B("overflow"),wt+=j(Be/hr),Be%=hr,_e.splice(Be++,0,wt)}return String.fromCodePoint.apply(String,_e)},q=function(ce){var _e=[];ce=G(ce);var je=ce.length,Be=x,wt=0,Bt=C,en=!0,Qn=!1,nr=void 0;try{for(var Dn=ce[Symbol.iterator](),fr;!(en=(fr=Dn.next()).done);en=!0){var Lr=fr.value;Lr<128&&_e.push(M(Lr))}}catch(Xe){Qn=!0,nr=Xe}finally{try{!en&&Dn.return&&Dn.return()}finally{if(Qn)throw nr}}var an=_e.length,dr=an;for(an&&_e.push(T);dr<je;){var si=p,hr=!0,On=!1,zs=void 0;try{for(var ti=ce[Symbol.iterator](),Vs;!(hr=(Vs=ti.next()).done);hr=!0){var wi=Vs.value;wi>=Be&&wi<si&&(si=wi)}}catch(Xe){On=!0,zs=Xe}finally{try{!hr&&ti.return&&ti.return()}finally{if(On)throw zs}}var Hi=dr+1;si-Be>j((p-wt)/Hi)&&B("overflow"),wt+=(si-Be)*Hi,Be=si;var no=!0,Hs=!1,oi=void 0;try{for(var Mu=ce[Symbol.iterator](),fs;!(no=(fs=Mu.next()).done);no=!0){var te=fs.value;if(te<Be&&++wt>p&&B("overflow"),te==Be){for(var ve=wt,ue=g;;ue+=g){var Te=ue<=Bt?y:ue>=Bt+b?b:ue-Bt;if(ve<Te)break;var Pe=ve-Te,Se=g-Te;_e.push(M(L(Te+Pe%Se,0))),ve=j(Pe/Se)}_e.push(M(L(ve,0))),Bt=U(wt,Hi,dr==an),wt=0,++dr}}}catch(Xe){Hs=!0,oi=Xe}finally{try{!no&&Mu.return&&Mu.return()}finally{if(Hs)throw oi}}++wt,++Be}return _e.join("")},X=function(ce){return z(ce,function(_e){return A.test(_e)?K(_e.slice(4).toLowerCase()):_e})},Z=function(ce){return z(ce,function(_e){return k.test(_e)?"xn--"+q(_e):_e})},ae={version:"2.1.0",ucs2:{decode:G,encode:Y},decode:K,encode:q,toASCII:Z,toUnicode:X},he={};function ge(ye){var ce=ye.charCodeAt(0),_e=void 0;return ce<16?_e="%0"+ce.toString(16).toUpperCase():ce<128?_e="%"+ce.toString(16).toUpperCase():ce<2048?_e="%"+(ce>>6|192).toString(16).toUpperCase()+"%"+(ce&63|128).toString(16).toUpperCase():_e="%"+(ce>>12|224).toString(16).toUpperCase()+"%"+(ce>>6&63|128).toString(16).toUpperCase()+"%"+(ce&63|128).toString(16).toUpperCase(),_e}function be(ye){for(var ce="",_e=0,je=ye.length;_e<je;){var Be=parseInt(ye.substr(_e+1,2),16);if(Be<128)ce+=String.fromCharCode(Be),_e+=3;else if(Be>=194&&Be<224){if(je-_e>=6){var wt=parseInt(ye.substr(_e+4,2),16);ce+=String.fromCharCode((Be&31)<<6|wt&63)}else ce+=ye.substr(_e,6);_e+=6}else if(Be>=224){if(je-_e>=9){var Bt=parseInt(ye.substr(_e+4,2),16),en=parseInt(ye.substr(_e+7,2),16);ce+=String.fromCharCode((Be&15)<<12|(Bt&63)<<6|en&63)}else ce+=ye.substr(_e,9);_e+=9}else ce+=ye.substr(_e,3),_e+=3}return ce}function Ce(ye,ce){function _e(je){var Be=be(je);return Be.match(ce.UNRESERVED)?Be:je}return ye.scheme&&(ye.scheme=String(ye.scheme).replace(ce.PCT_ENCODED,_e).toLowerCase().replace(ce.NOT_SCHEME,"")),ye.userinfo!==void 0&&(ye.userinfo=String(ye.userinfo).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_USERINFO,ge).replace(ce.PCT_ENCODED,o)),ye.host!==void 0&&(ye.host=String(ye.host).replace(ce.PCT_ENCODED,_e).toLowerCase().replace(ce.NOT_HOST,ge).replace(ce.PCT_ENCODED,o)),ye.path!==void 0&&(ye.path=String(ye.path).replace(ce.PCT_ENCODED,_e).replace(ye.scheme?ce.NOT_PATH:ce.NOT_PATH_NOSCHEME,ge).replace(ce.PCT_ENCODED,o)),ye.query!==void 0&&(ye.query=String(ye.query).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_QUERY,ge).replace(ce.PCT_ENCODED,o)),ye.fragment!==void 0&&(ye.fragment=String(ye.fragment).replace(ce.PCT_ENCODED,_e).replace(ce.NOT_FRAGMENT,ge).replace(ce.PCT_ENCODED,o)),ye}function oe(ye){return ye.replace(/^0*(.*)/,"$1")||"0"}function re(ye,ce){var _e=ye.match(ce.IPV4ADDRESS)||[],je=d(_e,2),Be=je[1];return Be?Be.split(".").map(oe).join("."):ye}function xe(ye,ce){var _e=ye.match(ce.IPV6ADDRESS)||[],je=d(_e,3),Be=je[1],wt=je[2];if(Be){for(var Bt=Be.toLowerCase().split("::").reverse(),en=d(Bt,2),Qn=en[0],nr=en[1],Dn=nr?nr.split(":").map(oe):[],fr=Qn.split(":").map(oe),Lr=ce.IPV4ADDRESS.test(fr[fr.length-1]),an=Lr?7:8,dr=fr.length-an,si=Array(an),hr=0;hr<an;++hr)si[hr]=Dn[hr]||fr[dr+hr]||"";Lr&&(si[an-1]=re(si[an-1],ce));var On=si.reduce(function(Hi,no,Hs){if(!no||no==="0"){var oi=Hi[Hi.length-1];oi&&oi.index+oi.length===Hs?oi.length++:Hi.push({index:Hs,length:1})}return Hi},[]),zs=On.sort(function(Hi,no){return no.length-Hi.length})[0],ti=void 0;if(zs&&zs.length>1){var Vs=si.slice(0,zs.index),wi=si.slice(zs.index+zs.length);ti=Vs.join(":")+"::"+wi.join(":")}else ti=si.join(":");return wt&&(ti+="%"+wt),ti}else return ye}var Re=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ke="".match(/(){0}/)[1]===void 0;function Qe(ye){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e={},je=ce.iri!==!1?f:c;ce.reference==="suffix"&&(ye=(ce.scheme?ce.scheme+":":"")+"//"+ye);var Be=ye.match(Re);if(Be){Ke?(_e.scheme=Be[1],_e.userinfo=Be[3],_e.host=Be[4],_e.port=parseInt(Be[5],10),_e.path=Be[6]||"",_e.query=Be[7],_e.fragment=Be[8],isNaN(_e.port)&&(_e.port=Be[5])):(_e.scheme=Be[1]||void 0,_e.userinfo=ye.indexOf("@")!==-1?Be[3]:void 0,_e.host=ye.indexOf("//")!==-1?Be[4]:void 0,_e.port=parseInt(Be[5],10),_e.path=Be[6]||"",_e.query=ye.indexOf("?")!==-1?Be[7]:void 0,_e.fragment=ye.indexOf("#")!==-1?Be[8]:void 0,isNaN(_e.port)&&(_e.port=ye.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Be[4]:void 0)),_e.host&&(_e.host=xe(re(_e.host,je),je)),_e.scheme===void 0&&_e.userinfo===void 0&&_e.host===void 0&&_e.port===void 0&&!_e.path&&_e.query===void 0?_e.reference="same-document":_e.scheme===void 0?_e.reference="relative":_e.fragment===void 0?_e.reference="absolute":_e.reference="uri",ce.reference&&ce.reference!=="suffix"&&ce.reference!==_e.reference&&(_e.error=_e.error||"URI is not a "+ce.reference+" reference.");var wt=he[(ce.scheme||_e.scheme||"").toLowerCase()];if(!ce.unicodeSupport&&(!wt||!wt.unicodeSupport)){if(_e.host&&(ce.domainHost||wt&&wt.domainHost))try{_e.host=ae.toASCII(_e.host.replace(je.PCT_ENCODED,be).toLowerCase())}catch(Bt){_e.error=_e.error||"Host's domain name can not be converted to ASCII via punycode: "+Bt}Ce(_e,c)}else Ce(_e,je);wt&&wt.parse&&wt.parse(_e,ce)}else _e.error=_e.error||"URI can not be parsed.";return _e}function ke(ye,ce){var _e=ce.iri!==!1?f:c,je=[];return ye.userinfo!==void 0&&(je.push(ye.userinfo),je.push("@")),ye.host!==void 0&&je.push(xe(re(String(ye.host),_e),_e).replace(_e.IPV6ADDRESS,function(Be,wt,Bt){return"["+wt+(Bt?"%25"+Bt:"")+"]"})),(typeof ye.port=="number"||typeof ye.port=="string")&&(je.push(":"),je.push(String(ye.port))),je.length?je.join(""):void 0}var Ue=/^\.\.?\//,rt=/^\/\.(\/|$)/,ft=/^\/\.\.(\/|$)/,Rt=/^\/?(?:.|\n)*?(?=\/|$)/;function st(ye){for(var ce=[];ye.length;)if(ye.match(Ue))ye=ye.replace(Ue,"");else if(ye.match(rt))ye=ye.replace(rt,"/");else if(ye.match(ft))ye=ye.replace(ft,"/"),ce.pop();else if(ye==="."||ye==="..")ye="";else{var _e=ye.match(Rt);if(_e){var je=_e[0];ye=ye.slice(je.length),ce.push(je)}else throw new Error("Unexpected dot segment condition")}return ce.join("")}function Ie(ye){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=ce.iri?f:c,je=[],Be=he[(ce.scheme||ye.scheme||"").toLowerCase()];if(Be&&Be.serialize&&Be.serialize(ye,ce),ye.host&&!_e.IPV6ADDRESS.test(ye.host)){if(ce.domainHost||Be&&Be.domainHost)try{ye.host=ce.iri?ae.toUnicode(ye.host):ae.toASCII(ye.host.replace(_e.PCT_ENCODED,be).toLowerCase())}catch(en){ye.error=ye.error||"Host's domain name can not be converted to "+(ce.iri?"Unicode":"ASCII")+" via punycode: "+en}}Ce(ye,_e),ce.reference!=="suffix"&&ye.scheme&&(je.push(ye.scheme),je.push(":"));var wt=ke(ye,ce);if(wt!==void 0&&(ce.reference!=="suffix"&&je.push("//"),je.push(wt),ye.path&&ye.path.charAt(0)!=="/"&&je.push("/")),ye.path!==void 0){var Bt=ye.path;!ce.absolutePath&&(!Be||!Be.absolutePath)&&(Bt=st(Bt)),wt===void 0&&(Bt=Bt.replace(/^\/\//,"/%2F")),je.push(Bt)}return ye.query!==void 0&&(je.push("?"),je.push(ye.query)),ye.fragment!==void 0&&(je.push("#"),je.push(ye.fragment)),je.join("")}function kt(ye,ce){var _e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},je=arguments[3],Be={};return je||(ye=Qe(Ie(ye,_e),_e),ce=Qe(Ie(ce,_e),_e)),_e=_e||{},!_e.tolerant&&ce.scheme?(Be.scheme=ce.scheme,Be.userinfo=ce.userinfo,Be.host=ce.host,Be.port=ce.port,Be.path=st(ce.path||""),Be.query=ce.query):(ce.userinfo!==void 0||ce.host!==void 0||ce.port!==void 0?(Be.userinfo=ce.userinfo,Be.host=ce.host,Be.port=ce.port,Be.path=st(ce.path||""),Be.query=ce.query):(ce.path?(ce.path.charAt(0)==="/"?Be.path=st(ce.path):((ye.userinfo!==void 0||ye.host!==void 0||ye.port!==void 0)&&!ye.path?Be.path="/"+ce.path:ye.path?Be.path=ye.path.slice(0,ye.path.lastIndexOf("/")+1)+ce.path:Be.path=ce.path,Be.path=st(Be.path)),Be.query=ce.query):(Be.path=ye.path,ce.query!==void 0?Be.query=ce.query:Be.query=ye.query),Be.userinfo=ye.userinfo,Be.host=ye.host,Be.port=ye.port),Be.scheme=ye.scheme),Be.fragment=ce.fragment,Be}function Ot(ye,ce,_e){var je=u({scheme:"null"},_e);return Ie(kt(Qe(ye,je),Qe(ce,je),je,!0),je)}function Ne(ye,ce){return typeof ye=="string"?ye=Ie(Qe(ye,ce),ce):s(ye)==="object"&&(ye=Qe(Ie(ye,ce),ce)),ye}function ze(ye,ce,_e){return typeof ye=="string"?ye=Ie(Qe(ye,_e),_e):s(ye)==="object"&&(ye=Ie(ye,_e)),typeof ce=="string"?ce=Ie(Qe(ce,_e),_e):s(ce)==="object"&&(ce=Ie(ce,_e)),ye===ce}function ot(ye,ce){return ye&&ye.toString().replace(!ce||!ce.iri?c.ESCAPE:f.ESCAPE,ge)}function St(ye,ce){return ye&&ye.toString().replace(!ce||!ce.iri?c.PCT_ENCODED:f.PCT_ENCODED,be)}var $t={scheme:"http",domainHost:!0,parse:function(ce,_e){return ce.host||(ce.error=ce.error||"HTTP URIs must have a host."),ce},serialize:function(ce,_e){var je=String(ce.scheme).toLowerCase()==="https";return(ce.port===(je?443:80)||ce.port==="")&&(ce.port=void 0),ce.path||(ce.path="/"),ce}},Vn={scheme:"https",domainHost:$t.domainHost,parse:$t.parse,serialize:$t.serialize};function Yr(ye){return typeof ye.secure=="boolean"?ye.secure:String(ye.scheme).toLowerCase()==="wss"}var tr={scheme:"ws",domainHost:!0,parse:function(ce,_e){var je=ce;return je.secure=Yr(je),je.resourceName=(je.path||"/")+(je.query?"?"+je.query:""),je.path=void 0,je.query=void 0,je},serialize:function(ce,_e){if((ce.port===(Yr(ce)?443:80)||ce.port==="")&&(ce.port=void 0),typeof ce.secure=="boolean"&&(ce.scheme=ce.secure?"wss":"ws",ce.secure=void 0),ce.resourceName){var je=ce.resourceName.split("?"),Be=d(je,2),wt=Be[0],Bt=Be[1];ce.path=wt&&wt!=="/"?wt:void 0,ce.query=Bt,ce.resourceName=void 0}return ce.fragment=void 0,ce}},vr={scheme:"wss",domainHost:tr.domainHost,parse:tr.parse,serialize:tr.serialize},Fn={},Un="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ur="[0-9A-Fa-f]",lr=i(i("%[EFef]"+ur+"%"+ur+ur+"%"+ur+ur)+"|"+i("%[89A-Fa-f]"+ur+"%"+ur+ur)+"|"+i("%"+ur+ur)),Us="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Si="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",kn=r(Si,'[\\"\\\\]'),ii="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Mr=new RegExp(Un,"g"),is=new RegExp(lr,"g"),Tc=new RegExp(r("[^]",Us,"[\\.]",'[\\"]',kn),"g"),ba=new RegExp(r("[^]",Un,ii),"g"),Ol=ba;function Tr(ye){var ce=be(ye);return ce.match(Mr)?ce:ye}var Ti={scheme:"mailto",parse:function(ce,_e){var je=ce,Be=je.to=je.path?je.path.split(","):[];if(je.path=void 0,je.query){for(var wt=!1,Bt={},en=je.query.split("&"),Qn=0,nr=en.length;Qn<nr;++Qn){var Dn=en[Qn].split("=");switch(Dn[0]){case"to":for(var fr=Dn[1].split(","),Lr=0,an=fr.length;Lr<an;++Lr)Be.push(fr[Lr]);break;case"subject":je.subject=St(Dn[1],_e);break;case"body":je.body=St(Dn[1],_e);break;default:wt=!0,Bt[St(Dn[0],_e)]=St(Dn[1],_e);break}}wt&&(je.headers=Bt)}je.query=void 0;for(var dr=0,si=Be.length;dr<si;++dr){var hr=Be[dr].split("@");if(hr[0]=St(hr[0]),_e.unicodeSupport)hr[1]=St(hr[1],_e).toLowerCase();else try{hr[1]=ae.toASCII(St(hr[1],_e).toLowerCase())}catch(On){je.error=je.error||"Email address's domain name can not be converted to ASCII via punycode: "+On}Be[dr]=hr.join("@")}return je},serialize:function(ce,_e){var je=ce,Be=a(ce.to);if(Be){for(var wt=0,Bt=Be.length;wt<Bt;++wt){var en=String(Be[wt]),Qn=en.lastIndexOf("@"),nr=en.slice(0,Qn).replace(is,Tr).replace(is,o).replace(Tc,ge),Dn=en.slice(Qn+1);try{Dn=_e.iri?ae.toUnicode(Dn):ae.toASCII(St(Dn,_e).toLowerCase())}catch(dr){je.error=je.error||"Email address's domain name can not be converted to "+(_e.iri?"Unicode":"ASCII")+" via punycode: "+dr}Be[wt]=nr+"@"+Dn}je.path=Be.join(",")}var fr=ce.headers=ce.headers||{};ce.subject&&(fr.subject=ce.subject),ce.body&&(fr.body=ce.body);var Lr=[];for(var an in fr)fr[an]!==Fn[an]&&Lr.push(an.replace(is,Tr).replace(is,o).replace(ba,ge)+"="+fr[an].replace(is,Tr).replace(is,o).replace(Ol,ge));return Lr.length&&(je.query=Lr.join("&")),je}},$r=/^([^\:]+)\:(.*)/,xo={scheme:"urn",parse:function(ce,_e){var je=ce.path&&ce.path.match($r),Be=ce;if(je){var wt=_e.scheme||Be.scheme||"urn",Bt=je[1].toLowerCase(),en=je[2],Qn=wt+":"+(_e.nid||Bt),nr=he[Qn];Be.nid=Bt,Be.nss=en,Be.path=void 0,nr&&(Be=nr.parse(Be,_e))}else Be.error=Be.error||"URN can not be parsed.";return Be},serialize:function(ce,_e){var je=_e.scheme||ce.scheme||"urn",Be=ce.nid,wt=je+":"+(_e.nid||Be),Bt=he[wt];Bt&&(ce=Bt.serialize(ce,_e));var en=ce,Qn=ce.nss;return en.path=(Be||_e.nid)+":"+Qn,en}},Cs=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ko={scheme:"urn:uuid",parse:function(ce,_e){var je=ce;return je.uuid=je.nss,je.nss=void 0,!_e.tolerant&&(!je.uuid||!je.uuid.match(Cs))&&(je.error=je.error||"UUID is not valid."),je},serialize:function(ce,_e){var je=ce;return je.nss=(ce.uuid||"").toLowerCase(),je}};he[$t.scheme]=$t,he[Vn.scheme]=Vn,he[tr.scheme]=tr,he[vr.scheme]=vr,he[Ti.scheme]=Ti,he[xo.scheme]=xo,he[Ko.scheme]=Ko,n.SCHEMES=he,n.pctEncChar=ge,n.pctDecChars=be,n.parse=Qe,n.removeDotSegments=st,n.serialize=Ie,n.resolveComponents=kt,n.resolve=Ot,n.normalize=Ne,n.equal=ze,n.escapeComponent=ot,n.unescapeComponent=St,Object.defineProperty(n,"__esModule",{value:!0})})}(UC,UC.exports)),UC.exports}var ffe;function Awt(){if(ffe)return WN;ffe=1,Object.defineProperty(WN,"__esModule",{value:!0});const e=Cwt();return e.code='require("ajv/dist/runtime/uri").default',WN.default=e,WN}var dfe;function Iwt(){return dfe||(dfe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=P6();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=cr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=dX(),i=D6(),s=CAe(),o=hX(),a=cr(),u=N6(),l=pM(),c=qr(),f=Swt,d=Awt(),h=(L,U)=>new RegExp(L,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],g=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),y={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},b={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},_=200;function E(L){var U,K,q,X,Z,ae,he,ge,be,Ce,oe,re,xe,Re,Ke,Qe,ke,Ue,rt,ft,Rt,st,Ie,kt,Ot;const Ne=L.strict,ze=(U=L.code)===null||U===void 0?void 0:U.optimize,ot=ze===!0||ze===void 0?1:ze||0,St=(q=(K=L.code)===null||K===void 0?void 0:K.regExp)!==null&&q!==void 0?q:h,$t=(X=L.uriResolver)!==null&&X!==void 0?X:d.default;return{strictSchema:(ae=(Z=L.strictSchema)!==null&&Z!==void 0?Z:Ne)!==null&&ae!==void 0?ae:!0,strictNumbers:(ge=(he=L.strictNumbers)!==null&&he!==void 0?he:Ne)!==null&&ge!==void 0?ge:!0,strictTypes:(Ce=(be=L.strictTypes)!==null&&be!==void 0?be:Ne)!==null&&Ce!==void 0?Ce:"log",strictTuples:(re=(oe=L.strictTuples)!==null&&oe!==void 0?oe:Ne)!==null&&re!==void 0?re:"log",strictRequired:(Re=(xe=L.strictRequired)!==null&&xe!==void 0?xe:Ne)!==null&&Re!==void 0?Re:!1,code:L.code?{...L.code,optimize:ot,regExp:St}:{optimize:ot,regExp:St},loopRequired:(Ke=L.loopRequired)!==null&&Ke!==void 0?Ke:_,loopEnum:(Qe=L.loopEnum)!==null&&Qe!==void 0?Qe:_,meta:(ke=L.meta)!==null&&ke!==void 0?ke:!0,messages:(Ue=L.messages)!==null&&Ue!==void 0?Ue:!0,inlineRefs:(rt=L.inlineRefs)!==null&&rt!==void 0?rt:!0,schemaId:(ft=L.schemaId)!==null&&ft!==void 0?ft:"$id",addUsedSchema:(Rt=L.addUsedSchema)!==null&&Rt!==void 0?Rt:!0,validateSchema:(st=L.validateSchema)!==null&&st!==void 0?st:!0,validateFormats:(Ie=L.validateFormats)!==null&&Ie!==void 0?Ie:!0,unicodeRegExp:(kt=L.unicodeRegExp)!==null&&kt!==void 0?kt:!0,int32range:(Ot=L.int32range)!==null&&Ot!==void 0?Ot:!0,uriResolver:$t}}class C{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,...E(U)};const{es5:K,lines:q}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:g,es5:K,lines:q}),this.logger=j(U.logger);const X=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),x.call(this,y,U,"NOT SUPPORTED"),x.call(this,b,U,"DEPRECATED","warn"),this._metaOpts=P.call(this),U.formats&&k.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&N.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),A.call(this),U.validateFormats=X}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:K,schemaId:q}=this.opts;let X=f;q==="id"&&(X={...f},X.id=X.$id,delete X.$id),K&&U&&this.addMetaSchema(X,X[q],!1)}defaultMeta(){const{meta:U,schemaId:K}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[K]||U:void 0}validate(U,K){let q;if(typeof U=="string"){if(q=this.getSchema(U),!q)throw new Error(`no schema with key or ref "${U}"`)}else q=this.compile(U);const X=q(K);return"$async"in q||(this.errors=q.errors),X}compile(U,K){const q=this._addSchema(U,K);return q.validate||this._compileSchemaEnv(q)}compileAsync(U,K){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:q}=this.opts;return X.call(this,U,K);async function X(Ce,oe){await Z.call(this,Ce.$schema);const re=this._addSchema(Ce,oe);return re.validate||ae.call(this,re)}async function Z(Ce){Ce&&!this.getSchema(Ce)&&await X.call(this,{$ref:Ce},!0)}async function ae(Ce){try{return this._compileSchemaEnv(Ce)}catch(oe){if(!(oe instanceof i.default))throw oe;return he.call(this,oe),await ge.call(this,oe.missingSchema),ae.call(this,Ce)}}function he({missingSchema:Ce,missingRef:oe}){if(this.refs[Ce])throw new Error(`AnySchema ${Ce} is loaded but ${oe} cannot be resolved`)}async function ge(Ce){const oe=await be.call(this,Ce);this.refs[Ce]||await Z.call(this,oe.$schema),this.refs[Ce]||this.addSchema(oe,Ce,K)}async function be(Ce){const oe=this._loading[Ce];if(oe)return oe;try{return await(this._loading[Ce]=q(Ce))}finally{delete this._loading[Ce]}}}addSchema(U,K,q,X=this.opts.validateSchema){if(Array.isArray(U)){for(const ae of U)this.addSchema(ae,void 0,q,X);return this}let Z;if(typeof U=="object"){const{schemaId:ae}=this.opts;if(Z=U[ae],Z!==void 0&&typeof Z!="string")throw new Error(`schema ${ae} must be string`)}return K=(0,u.normalizeId)(K||Z),this._checkUnique(K),this.schemas[K]=this._addSchema(U,q,K,X,!0),this}addMetaSchema(U,K,q=this.opts.validateSchema){return this.addSchema(U,K,!0,q),this}validateSchema(U,K){if(typeof U=="boolean")return!0;let q;if(q=U.$schema,q!==void 0&&typeof q!="string")throw new Error("$schema must be a string");if(q=q||this.opts.defaultMeta||this.defaultMeta(),!q)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const X=this.validate(q,U);if(!X&&K){const Z="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Z);else throw new Error(Z)}return X}getSchema(U){let K;for(;typeof(K=T.call(this,U))=="string";)U=K;if(K===void 0){const{schemaId:q}=this.opts,X=new o.SchemaEnv({schema:{},schemaId:q});if(K=o.resolveSchema.call(this,X,U),!K)return;this.refs[U]=K}return K.validate||this._compileSchemaEnv(K)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const K=T.call(this,U);return typeof K=="object"&&this._cache.delete(K.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const K=U;this._cache.delete(K);let q=U[this.opts.schemaId];return q&&(q=(0,u.normalizeId)(q),delete this.schemas[q],delete this.refs[q]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const K of U)this.addKeyword(K);return this}addKeyword(U,K){let q;if(typeof U=="string")q=U,typeof K=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),K.keyword=q);else if(typeof U=="object"&&K===void 0){if(K=U,q=K.keyword,Array.isArray(q)&&!q.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,q,K),!K)return(0,c.eachItem)(q,Z=>V.call(this,Z)),this;G.call(this,K);const X={...K,type:(0,l.getJSONTypes)(K.type),schemaType:(0,l.getJSONTypes)(K.schemaType)};return(0,c.eachItem)(q,X.type.length===0?Z=>V.call(this,Z,X):Z=>X.type.forEach(ae=>V.call(this,Z,X,ae))),this}getKeyword(U){const K=this.RULES.all[U];return typeof K=="object"?K.definition:!!K}removeKeyword(U){const{RULES:K}=this;delete K.keywords[U],delete K.all[U];for(const q of K.rules){const X=q.rules.findIndex(Z=>Z.keyword===U);X>=0&&q.rules.splice(X,1)}return this}addFormat(U,K){return typeof K=="string"&&(K=new RegExp(K)),this.formats[U]=K,this}errorsText(U=this.errors,{separator:K=", ",dataVar:q="data"}={}){return!U||U.length===0?"No errors":U.map(X=>`${q}${X.instancePath} ${X.message}`).reduce((X,Z)=>X+K+Z)}$dataMetaSchema(U,K){const q=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const X of K){const Z=X.split("/").slice(1);let ae=U;for(const he of Z)ae=ae[he];for(const he in q){const ge=q[he];if(typeof ge!="object")continue;const{$data:be}=ge.definition,Ce=ae[he];be&&Ce&&(ae[he]=Q(Ce))}}return U}_removeAllSchemas(U,K){for(const q in U){const X=U[q];(!K||K.test(q))&&(typeof X=="string"?delete U[q]:X&&!X.meta&&(this._cache.delete(X.schema),delete U[q]))}}_addSchema(U,K,q,X=this.opts.validateSchema,Z=this.opts.addUsedSchema){let ae;const{schemaId:he}=this.opts;if(typeof U=="object")ae=U[he];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let ge=this._cache.get(U);if(ge!==void 0)return ge;q=(0,u.normalizeId)(ae||q);const be=u.getSchemaRefs.call(this,U,q);return ge=new o.SchemaEnv({schema:U,schemaId:he,meta:K,baseId:q,localRefs:be}),this._cache.set(ge.schema,ge),Z&&!q.startsWith("#")&&(q&&this._checkUnique(q),this.refs[q]=ge),X&&this.validateSchema(U,!0),ge}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const K=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=K}}}C.ValidationError=r.default,C.MissingRefError=i.default,e.default=C;function x(L,U,K,q="error"){for(const X in L){const Z=X;Z in U&&this.logger[q](`${K}: option ${X}. ${L[Z]}`)}}function T(L){return L=(0,u.normalizeId)(L),this.schemas[L]||this.refs[L]}function A(){const L=this.opts.schemas;if(L)if(Array.isArray(L))this.addSchema(L);else for(const U in L)this.addSchema(L[U],U)}function k(){for(const L in this.opts.formats){const U=this.opts.formats[L];U&&this.addFormat(L,U)}}function N(L){if(Array.isArray(L)){this.addVocabulary(L);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in L){const K=L[U];K.keyword||(K.keyword=U),this.addKeyword(K)}}function P(){const L={...this.opts};for(const U of p)delete L[U];return L}const D={log(){},warn(){},error(){}};function j(L){if(L===!1)return D;if(L===void 0)return console;if(L.log&&L.warn&&L.error)return L;throw new Error("logger must implement log, warn and error methods")}const M=/^[a-z_$][a-z0-9_$:-]*$/i;function B(L,U){const{RULES:K}=this;if((0,c.eachItem)(L,q=>{if(K.keywords[q])throw new Error(`Keyword ${q} is already defined`);if(!M.test(q))throw new Error(`Keyword ${q} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function V(L,U,K){var q;const X=U==null?void 0:U.post;if(K&&X)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Z}=this;let ae=X?Z.post:Z.rules.find(({type:ge})=>ge===K);if(ae||(ae={type:K,rules:[]},Z.rules.push(ae)),Z.keywords[L]=!0,!U)return;const he={keyword:L,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?z.call(this,ae,he,U.before):ae.rules.push(he),Z.all[L]=he,(q=U.implements)===null||q===void 0||q.forEach(ge=>this.addKeyword(ge))}function z(L,U,K){const q=L.rules.findIndex(X=>X.keyword===K);q>=0?L.rules.splice(q,0,U):(L.rules.push(U),this.logger.warn(`rule ${K} is not defined`))}function G(L){let{metaSchema:U}=L;U!==void 0&&(L.$data&&this.opts.$data&&(U=Q(U)),L.validateSchema=this.compile(U,!0))}const Y={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Q(L){return{anyOf:[L,Y]}}}(U9)),U9}var GN={},YN={},KN={},hfe;function kwt(){if(hfe)return KN;hfe=1,Object.defineProperty(KN,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return KN.default=e,KN}var e0={},pfe;function Rwt(){if(pfe)return e0;pfe=1,Object.defineProperty(e0,"__esModule",{value:!0}),e0.callRef=e0.getValidate=void 0;const e=D6(),t=Md(),n=cr(),r=iv(),i=hX(),s=qr(),o={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:f,it:d}=l,{baseId:h,schemaEnv:p,validateName:g,opts:y,self:b}=d,{root:_}=p;if((f==="#"||f==="#/")&&h===_.baseId)return C();const E=i.resolveRef.call(b,_,h,f);if(E===void 0)throw new e.default(d.opts.uriResolver,h,f);if(E instanceof i.SchemaEnv)return x(E);return T(E);function C(){if(p===_)return u(l,g,p,p.$async);const A=c.scopeValue("root",{ref:_});return u(l,(0,n._)`${A}.validate`,_,_.$async)}function x(A){const k=a(l,A);u(l,k,A,A.$async)}function T(A){const k=c.scopeValue("schema",y.code.source===!0?{ref:A,code:(0,n.stringify)(A)}:{ref:A}),N=c.name("valid"),P=l.subschema({schema:A,dataTypes:[],schemaPath:n.nil,topSchemaRef:k,errSchemaPath:f},N);l.mergeEvaluated(P),l.ok(N)}}};function a(l,c){const{gen:f}=l;return c.validate?f.scopeValue("validate",{ref:c.validate}):(0,n._)`${f.scopeValue("wrapper",{ref:c})}.validate`}e0.getValidate=a;function u(l,c,f,d){const{gen:h,it:p}=l,{allErrors:g,schemaEnv:y,opts:b}=p,_=b.passContext?r.default.this:n.nil;d?E():C();function E(){if(!y.$async)throw new Error("async schema referenced by sync schema");const A=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,_)}`),T(c),g||h.assign(A,!0)},k=>{h.if((0,n._)`!(${k} instanceof ${p.ValidationError})`,()=>h.throw(k)),x(k),g||h.assign(A,!1)}),l.ok(A)}function C(){l.result((0,t.callValidateCode)(l,c,_),()=>T(c),()=>x(c))}function x(A){const k=(0,n._)`${A}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${k} : ${r.default.vErrors}.concat(${k})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function T(A){var k;if(!p.opts.unevaluated)return;const N=(k=f==null?void 0:f.validate)===null||k===void 0?void 0:k.evaluated;if(p.props!==!0)if(N&&!N.dynamicProps)N.props!==void 0&&(p.props=s.mergeEvaluated.props(h,N.props,p.props));else{const P=h.var("props",(0,n._)`${A}.evaluated.props`);p.props=s.mergeEvaluated.props(h,P,p.props,n.Name)}if(p.items!==!0)if(N&&!N.dynamicItems)N.items!==void 0&&(p.items=s.mergeEvaluated.items(h,N.items,p.items));else{const P=h.var("items",(0,n._)`${A}.evaluated.items`);p.items=s.mergeEvaluated.items(h,P,p.items,n.Name)}}}return e0.callRef=u,e0.default=o,e0}var mfe;function Nwt(){if(mfe)return YN;mfe=1,Object.defineProperty(YN,"__esModule",{value:!0});const e=kwt(),t=Rwt(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return YN.default=n,YN}var XN={},QN={},gfe;function Pwt(){if(gfe)return QN;gfe=1,Object.defineProperty(QN,"__esModule",{value:!0});const e=cr(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:u}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${u} || isNaN(${a})`)}};return QN.default=i,QN}var JN={},yfe;function Dwt(){if(yfe)return JN;yfe=1,Object.defineProperty(JN,"__esModule",{value:!0});const e=cr(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${o} === 0 || (${l} = ${s}/${o}, ${c}))`)}};return JN.default=n,JN}var ZN={},eP={},vfe;function Owt(){if(vfe)return eP;vfe=1,Object.defineProperty(eP,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return eP.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',eP}var bfe;function Mwt(){if(bfe)return ZN;bfe=1,Object.defineProperty(ZN,"__esModule",{value:!0});const e=cr(),t=qr(),n=Owt(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:u,it:l}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,f=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${f} ${c} ${u}`)}};return ZN.default=i,ZN}var tP={},_fe;function $wt(){if(_fe)return tP;_fe=1,Object.defineProperty(tP,"__esModule",{value:!0});const e=Md(),t=cr(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",f=o?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${f}.test(${s})`)}};return tP.default=r,tP}var nP={},wfe;function Lwt(){if(wfe)return nP;wfe=1,Object.defineProperty(nP,"__esModule",{value:!0});const e=cr(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return nP.default=n,nP}var rP={},Efe;function Fwt(){if(Efe)return rP;Efe=1,Object.defineProperty(rP,"__esModule",{value:!0});const e=Md(),t=cr(),n=qr(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:u,data:l,$data:c,it:f}=s,{opts:d}=f;if(!c&&a.length===0)return;const h=a.length>=d.loopRequired;if(f.allErrors?p():g(),d.strictRequired){const _=s.parentSchema.properties,{definedProperties:E}=s.it;for(const C of a)if((_==null?void 0:_[C])===void 0&&!E.has(C)){const x=f.schemaEnv.baseId+f.errSchemaPath,T=`required property "${C}" is not defined at "${x}" (strictRequired)`;(0,n.checkStrictMode)(f,T,f.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,y);else for(const _ of a)(0,e.checkReportMissingProp)(s,_)}function g(){const _=o.let("missing");if(h||c){const E=o.let("valid",!0);s.block$data(E,()=>b(_,E)),s.ok(E)}else o.if((0,e.checkMissingProp)(s,a,_)),(0,e.reportMissingProp)(s,_),o.else()}function y(){o.forOf("prop",u,_=>{s.setParams({missingProperty:_}),o.if((0,e.noPropertyInData)(o,l,_,d.ownProperties),()=>s.error())})}function b(_,E){s.setParams({missingProperty:_}),o.forOf(_,u,()=>{o.assign(E,(0,e.propertyInData)(o,l,_,d.ownProperties)),o.if((0,t.not)(E),()=>{s.error(),o.break()})},t.nil)}}};return rP.default=i,rP}var iP={},xfe;function jwt(){if(xfe)return iP;xfe=1,Object.defineProperty(iP,"__esModule",{value:!0});const e=cr(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return iP.default=n,iP}var sP={},oP={},Sfe;function pX(){if(Sfe)return oP;Sfe=1,Object.defineProperty(oP,"__esModule",{value:!0});const e=kG();return e.code='require("ajv/dist/runtime/equal").default',oP.default=e,oP}var Tfe;function Bwt(){if(Tfe)return sP;Tfe=1,Object.defineProperty(sP,"__esModule",{value:!0});const e=pM(),t=cr(),n=qr(),r=pX(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:u,$data:l,schema:c,parentSchema:f,schemaCode:d,it:h}=o;if(!l&&!c)return;const p=a.let("valid"),g=f.items?(0,e.getSchemaTypes)(f.items):[];o.block$data(p,y,(0,t._)`${d} === false`),o.ok(p);function y(){const C=a.let("i",(0,t._)`${u}.length`),x=a.let("j");o.setParams({i:C,j:x}),a.assign(p,!0),a.if((0,t._)`${C} > 1`,()=>(b()?_:E)(C,x))}function b(){return g.length>0&&!g.some(C=>C==="object"||C==="array")}function _(C,x){const T=a.name("item"),A=(0,e.checkDataTypes)(g,T,h.opts.strictNumbers,e.DataType.Wrong),k=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${C}--;`,()=>{a.let(T,(0,t._)`${u}[${C}]`),a.if(A,(0,t._)`continue`),g.length>1&&a.if((0,t._)`typeof ${T} == "string"`,(0,t._)`${T} += "_"`),a.if((0,t._)`typeof ${k}[${T}] == "number"`,()=>{a.assign(x,(0,t._)`${k}[${T}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${k}[${T}] = ${C}`)})}function E(C,x){const T=(0,n.useFunc)(a,r.default),A=a.name("outer");a.label(A).for((0,t._)`;${C}--;`,()=>a.for((0,t._)`${x} = ${C}; ${x}--;`,()=>a.if((0,t._)`${T}(${u}[${C}], ${u}[${x}])`,()=>{o.error(),a.assign(p,!1).break(A)})))}}};return sP.default=s,sP}var aP={},Cfe;function Uwt(){if(Cfe)return aP;Cfe=1,Object.defineProperty(aP,"__esModule",{value:!0});const e=cr(),t=qr(),n=pX(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:u,schemaCode:l,schema:c}=s;u||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${l})`):s.fail((0,e._)`${c} !== ${a}`)}};return aP.default=i,aP}var uP={},Afe;function zwt(){if(Afe)return uP;Afe=1,Object.defineProperty(uP,"__esModule",{value:!0});const e=cr(),t=qr(),n=pX(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:u,schema:l,schemaCode:c,it:f}=s;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const d=l.length>=f.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let g;if(d||u)g=o.let("valid"),s.block$data(g,y);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const _=o.const("vSchema",c);g=(0,e.or)(...l.map((E,C)=>b(_,C)))}s.pass(g);function y(){o.assign(g,!1),o.forOf("v",c,_=>o.if((0,e._)`${p()}(${a}, ${_})`,()=>o.assign(g,!0).break()))}function b(_,E){const C=l[E];return typeof C=="object"&&C!==null?(0,e._)`${p()}(${a}, ${_}[${E}])`:(0,e._)`${a} === ${C}`}}};return uP.default=i,uP}var Ife;function Vwt(){if(Ife)return XN;Ife=1,Object.defineProperty(XN,"__esModule",{value:!0});const e=Pwt(),t=Dwt(),n=Mwt(),r=$wt(),i=Lwt(),s=Fwt(),o=jwt(),a=Bwt(),u=Uwt(),l=zwt(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return XN.default=c,XN}var lP={},uw={},kfe;function IAe(){if(kfe)return uw;kfe=1,Object.defineProperty(uw,"__esModule",{value:!0}),uw.validateAdditionalItems=void 0;const e=cr(),t=qr(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:u}=o;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,u)}};function i(s,o){const{gen:a,schema:u,data:l,keyword:c,it:f}=s;f.items=!0;const d=a.const("len",(0,e._)`${l}.length`);if(u===!1)s.setParams({len:o.length}),s.pass((0,e._)`${d} <= ${o.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(f,u)){const p=a.var("valid",(0,e._)`${d} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,d,g=>{s.subschema({keyword:c,dataProp:g,dataPropType:t.Type.Num},p),f.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return uw.validateAdditionalItems=i,uw.default=r,uw}var cP={},lw={},Rfe;function kAe(){if(Rfe)return lw;Rfe=1,Object.defineProperty(lw,"__esModule",{value:!0}),lw.validateTuple=void 0;const e=cr(),t=qr(),n=Md(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:u,parentSchema:l,data:c,keyword:f,it:d}=s;g(l),d.opts.unevaluated&&a.length&&d.items!==!0&&(d.items=t.mergeEvaluated.items(u,a.length,d.items));const h=u.name("valid"),p=u.const("len",(0,e._)`${c}.length`);a.forEach((y,b)=>{(0,t.alwaysValidSchema)(d,y)||(u.if((0,e._)`${p} > ${b}`,()=>s.subschema({keyword:f,schemaProp:b,dataProp:b},h)),s.ok(h))});function g(y){const{opts:b,errSchemaPath:_}=d,E=a.length,C=E===y.minItems&&(E===y.maxItems||y[o]===!1);if(b.strictTuples&&!C){const x=`"${f}" is ${E}-tuple, but minItems or maxItems/${o} are not specified or different at path "${_}"`;(0,t.checkStrictMode)(d,x,b.strictTuples)}}}return lw.validateTuple=i,lw.default=r,lw}var Nfe;function Hwt(){if(Nfe)return cP;Nfe=1,Object.defineProperty(cP,"__esModule",{value:!0});const e=kAe(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return cP.default=t,cP}var fP={},Pfe;function qwt(){if(Pfe)return fP;Pfe=1,Object.defineProperty(fP,"__esModule",{value:!0});const e=cr(),t=qr(),n=Md(),r=IAe(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:u,it:l}=o,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return fP.default=s,fP}var dP={},Dfe;function Wwt(){if(Dfe)return dP;Dfe=1,Object.defineProperty(dP,"__esModule",{value:!0});const e=cr(),t=qr(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:u,it:l}=i;let c,f;const{minContains:d,maxContains:h}=a;l.opts.next?(c=d===void 0?1:d,f=h):c=1;const p=s.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:f}),f===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&c>f){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,o)){let E=(0,e._)`${p} >= ${c}`;f!==void 0&&(E=(0,e._)`${E} && ${p} <= ${f}`),i.pass(E);return}l.items=!0;const g=s.name("valid");f===void 0&&c===1?b(g,()=>s.if(g,()=>s.break())):c===0?(s.let(g,!0),f!==void 0&&s.if((0,e._)`${u}.length > 0`,y)):(s.let(g,!1),y()),i.result(g,()=>i.reset());function y(){const E=s.name("_valid"),C=s.let("count",0);b(E,()=>s.if(E,()=>_(C)))}function b(E,C){s.forRange("i",0,p,x=>{i.subschema({keyword:"contains",dataProp:x,dataPropType:t.Type.Num,compositeRule:!0},E),C()})}function _(E){s.code((0,e._)`${E}++`),f===void 0?s.if((0,e._)`${E} >= ${c}`,()=>s.assign(g,!0).break()):(s.if((0,e._)`${E} > ${f}`,()=>s.assign(g,!1).break()),c===1?s.assign(g,!0):s.if((0,e._)`${E} >= ${c}`,()=>s.assign(g,!0)))}}};return dP.default=r,dP}var G9={},Ofe;function Gwt(){return Ofe||(Ofe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=cr(),n=qr(),r=Md();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const g=l[p];if(g.length===0)continue;const y=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:g.length,deps:g.join(", ")}),d.allErrors?c.if(y,()=>{for(const b of g)(0,r.checkReportMissingProp)(u,b)}):(c.if((0,t._)`${y} && (${(0,r.checkMissingProp)(u,g,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const g in l)(0,n.alwaysValidSchema)(h,l[g])||(c.if((0,r.propertyInData)(c,f,g,h.opts.ownProperties),()=>{const y=u.subschema({keyword:d,schemaProp:g},p);u.mergeValidEvaluated(y,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i}(G9)),G9}var hP={},Mfe;function Ywt(){if(Mfe)return hP;Mfe=1,Object.defineProperty(hP,"__esModule",{value:!0});const e=cr(),t=qr(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,o))return;const l=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),s.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||s.break()})}),i.ok(l)}};return hP.default=r,hP}var pP={},$fe;function RAe(){if($fe)return pP;$fe=1,Object.defineProperty(pP,"__esModule",{value:!0});const e=Md(),t=cr(),n=iv(),r=qr(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:f,it:d}=o;if(!f)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=d;if(d.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(d,u))return;const g=(0,e.allSchemaProperties)(l.properties),y=(0,e.allSchemaProperties)(l.patternProperties);b(),o.ok((0,t._)`${f} === ${n.default.errors}`);function b(){a.forIn("key",c,T=>{!g.length&&!y.length?C(T):a.if(_(T),()=>C(T))})}function _(T){let A;if(g.length>8){const k=(0,r.schemaRefOrVal)(d,l.properties,"properties");A=(0,e.isOwnProperty)(a,k,T)}else g.length?A=(0,t.or)(...g.map(k=>(0,t._)`${T} === ${k}`)):A=t.nil;return y.length&&(A=(0,t.or)(A,...y.map(k=>(0,t._)`${(0,e.usePattern)(o,k)}.test(${T})`))),(0,t.not)(A)}function E(T){a.code((0,t._)`delete ${c}[${T}]`)}function C(T){if(p.removeAdditional==="all"||p.removeAdditional&&u===!1){E(T);return}if(u===!1){o.setParams({additionalProperty:T}),o.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(d,u)){const A=a.name("valid");p.removeAdditional==="failing"?(x(T,A,!1),a.if((0,t.not)(A),()=>{o.reset(),E(T)})):(x(T,A),h||a.if((0,t.not)(A),()=>a.break()))}}function x(T,A,k){const N={keyword:"additionalProperties",dataProp:T,dataPropType:r.Type.Str};k===!1&&Object.assign(N,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(N,A)}}};return pP.default=s,pP}var mP={},Lfe;function Kwt(){if(Lfe)return mP;Lfe=1,Object.defineProperty(mP,"__esModule",{value:!0});const e=P6(),t=Md(),n=qr(),r=RAe(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:u,data:l,it:c}=s;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const f=(0,t.allSchemaProperties)(a);for(const y of f)c.definedProperties.add(y);c.opts.unevaluated&&f.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(f),c.props));const d=f.filter(y=>!(0,n.alwaysValidSchema)(c,a[y]));if(d.length===0)return;const h=o.name("valid");for(const y of d)p(y)?g(y):(o.if((0,t.propertyInData)(o,l,y,c.opts.ownProperties)),g(y),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(y),s.ok(h);function p(y){return c.opts.useDefaults&&!c.compositeRule&&a[y].default!==void 0}function g(y){s.subschema({keyword:"properties",schemaProp:y,dataProp:y},h)}}};return mP.default=i,mP}var gP={},Ffe;function Xwt(){if(Ffe)return gP;Ffe=1,Object.defineProperty(gP,"__esModule",{value:!0});const e=Md(),t=cr(),n=qr(),r=qr(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:u,parentSchema:l,it:c}=s,{opts:f}=c,d=(0,e.allSchemaProperties)(a),h=d.filter(C=>(0,n.alwaysValidSchema)(c,a[C]));if(d.length===0||h.length===d.length&&(!c.opts.unevaluated||c.props===!0))return;const p=f.strictSchema&&!f.allowMatchingProperties&&l.properties,g=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:y}=c;b();function b(){for(const C of d)p&&_(C),c.allErrors?E(C):(o.var(g,!0),E(C),o.if(g))}function _(C){for(const x in p)new RegExp(C).test(x)&&(0,n.checkStrictMode)(c,`property ${x} matches pattern ${C} (use allowMatchingProperties)`)}function E(C){o.forIn("key",u,x=>{o.if((0,t._)`${(0,e.usePattern)(s,C)}.test(${x})`,()=>{const T=h.includes(C);T||s.subschema({keyword:"patternProperties",schemaProp:C,dataProp:x,dataPropType:r.Type.Str},g),c.opts.unevaluated&&y!==!0?o.assign((0,t._)`${y}[${x}]`,!0):!T&&!c.allErrors&&o.if((0,t.not)(g),()=>o.break())})})}}};return gP.default=i,gP}var yP={},jfe;function Qwt(){if(jfe)return yP;jfe=1,Object.defineProperty(yP,"__esModule",{value:!0});const e=qr(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return yP.default=t,yP}var vP={},Bfe;function Jwt(){if(Bfe)return vP;Bfe=1,Object.defineProperty(vP,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Md().validateUnion,error:{message:"must match a schema in anyOf"}};return vP.default=t,vP}var bP={},Ufe;function Zwt(){if(Ufe)return bP;Ufe=1,Object.defineProperty(bP,"__esModule",{value:!0});const e=cr(),t=qr(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:u}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=o,c=s.let("valid",!1),f=s.let("passing",null),d=s.name("_valid");i.setParams({passing:f}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((p,g)=>{let y;(0,t.alwaysValidSchema)(u,p)?s.var(d,!0):y=i.subschema({keyword:"oneOf",schemaProp:g,compositeRule:!0},d),g>0&&s.if((0,e._)`${d} && ${c}`).assign(c,!1).assign(f,(0,e._)`[${f}, ${g}]`).else(),s.if(d,()=>{s.assign(c,!0),s.assign(f,g),y&&i.mergeEvaluated(y,e.Name)})})}}};return bP.default=r,bP}var _P={},zfe;function eEt(){if(zfe)return _P;zfe=1,Object.defineProperty(_P,"__esModule",{value:!0});const e=qr(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(s,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},o);n.ok(o),n.mergeEvaluated(l)})}};return _P.default=t,_P}var wP={},Vfe;function tEt(){if(Vfe)return wP;Vfe=1,Object.defineProperty(wP,"__esModule",{value:!0});const e=cr(),t=qr(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:u}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const f=o.let("valid",!0),d=o.name("_valid");if(h(),s.reset(),l&&c){const g=o.let("ifClause");s.setParams({ifClause:g}),o.if(d,p("then",g),p("else",g))}else l?o.if(d,p("then")):o.if((0,e.not)(d),p("else"));s.pass(f,()=>s.error(!0));function h(){const g=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);s.mergeEvaluated(g)}function p(g,y){return()=>{const b=s.subschema({keyword:g},d);o.assign(f,d),s.mergeValidEvaluated(b,f),y?o.assign(y,(0,e._)`${g}`):s.setParams({ifClause:g})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return wP.default=r,wP}var EP={},Hfe;function nEt(){if(Hfe)return EP;Hfe=1,Object.defineProperty(EP,"__esModule",{value:!0});const e=qr(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return EP.default=t,EP}var qfe;function rEt(){if(qfe)return lP;qfe=1,Object.defineProperty(lP,"__esModule",{value:!0});const e=IAe(),t=Hwt(),n=kAe(),r=qwt(),i=Wwt(),s=Gwt(),o=Ywt(),a=RAe(),u=Kwt(),l=Xwt(),c=Qwt(),f=Jwt(),d=Zwt(),h=eEt(),p=tEt(),g=nEt();function y(b=!1){const _=[c.default,f.default,d.default,h.default,p.default,g.default,o.default,a.default,s.default,u.default,l.default];return b?_.push(t.default,r.default):_.push(e.default,n.default),_.push(i.default),_}return lP.default=y,lP}var xP={},SP={},Wfe;function iEt(){if(Wfe)return SP;Wfe=1,Object.defineProperty(SP,"__esModule",{value:!0});const e=cr(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:f,errSchemaPath:d,schemaEnv:h,self:p}=c;if(!f.validateFormats)return;a?g():y();function g(){const b=s.scopeValue("formats",{ref:p.formats,code:f.code.formats}),_=s.const("fDef",(0,e._)`${b}[${l}]`),E=s.let("fType"),C=s.let("format");s.if((0,e._)`typeof ${_} == "object" && !(${_} instanceof RegExp)`,()=>s.assign(E,(0,e._)`${_}.type || "string"`).assign(C,(0,e._)`${_}.validate`),()=>s.assign(E,(0,e._)`"string"`).assign(C,_)),r.fail$data((0,e.or)(x(),T()));function x(){return f.strictSchema===!1?e.nil:(0,e._)`${l} && !${C}`}function T(){const A=h.$async?(0,e._)`(${_}.async ? await ${C}(${o}) : ${C}(${o}))`:(0,e._)`${C}(${o})`,k=(0,e._)`(typeof ${C} == "function" ? ${A} : ${C}.test(${o}))`;return(0,e._)`${C} && ${C} !== true && ${E} === ${i} && !${k}`}}function y(){const b=p.formats[u];if(!b){x();return}if(b===!0)return;const[_,E,C]=T(b);_===i&&r.pass(A());function x(){if(f.strictSchema===!1){p.logger.warn(k());return}throw new Error(k());function k(){return`unknown format "${u}" ignored in schema at path "${d}"`}}function T(k){const N=k instanceof RegExp?(0,e.regexpCode)(k):f.code.formats?(0,e._)`${f.code.formats}${(0,e.getProperty)(u)}`:void 0,P=s.scopeValue("formats",{key:u,ref:k,code:N});return typeof k=="object"&&!(k instanceof RegExp)?[k.type||"string",k.validate,(0,e._)`${P}.validate`]:["string",k,P]}function A(){if(typeof b=="object"&&!(b instanceof RegExp)&&b.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${C}(${o})`}return typeof E=="function"?(0,e._)`${C}(${o})`:(0,e._)`${C}.test(${o})`}}}};return SP.default=n,SP}var Gfe;function sEt(){if(Gfe)return xP;Gfe=1,Object.defineProperty(xP,"__esModule",{value:!0});const t=[iEt().default];return xP.default=t,xP}var Lv={},Yfe;function oEt(){return Yfe||(Yfe=1,Object.defineProperty(Lv,"__esModule",{value:!0}),Lv.contentVocabulary=Lv.metadataVocabulary=void 0,Lv.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],Lv.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),Lv}var Kfe;function aEt(){if(Kfe)return GN;Kfe=1,Object.defineProperty(GN,"__esModule",{value:!0});const e=Nwt(),t=Vwt(),n=rEt(),r=sEt(),i=oEt(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return GN.default=s,GN}var TP={},GT={},Xfe;function uEt(){if(Xfe)return GT;Xfe=1,Object.defineProperty(GT,"__esModule",{value:!0}),GT.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(GT.DiscrError=e={})),GT}var Qfe;function lEt(){if(Qfe)return TP;Qfe=1,Object.defineProperty(TP,"__esModule",{value:!0});const e=cr(),t=uEt(),n=hX(),r=D6(),i=qr(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:f,it:d}=a,{oneOf:h}=f;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const g=u.let("valid",!1),y=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(p)}`);u.if((0,e._)`typeof ${y} == "string"`,()=>b(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:y,tagName:p})),a.ok(g);function b(){const C=E();u.if(!1);for(const x in C)u.elseIf((0,e._)`${y} === ${x}`),u.assign(g,_(C[x]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:y,tagName:p}),u.endIf()}function _(C){const x=u.name("valid"),T=a.subschema({keyword:"oneOf",schemaProp:C},x);return a.mergeEvaluated(T,e.Name),x}function E(){var C;const x={},T=k(f);let A=!0;for(let D=0;D<h.length;D++){let j=h[D];if(j!=null&&j.$ref&&!(0,i.schemaHasRulesButRef)(j,d.self.RULES)){const B=j.$ref;if(j=n.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,B),j instanceof n.SchemaEnv&&(j=j.schema),j===void 0)throw new r.default(d.opts.uriResolver,d.baseId,B)}const M=(C=j==null?void 0:j.properties)===null||C===void 0?void 0:C[p];if(typeof M!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);A=A&&(T||k(j)),N(M,D)}if(!A)throw new Error(`discriminator: "${p}" must be required`);return x;function k({required:D}){return Array.isArray(D)&&D.includes(p)}function N(D,j){if(D.const)P(D.const,j);else if(D.enum)for(const M of D.enum)P(M,j);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function P(D,j){if(typeof D!="string"||D in x)throw new Error(`discriminator: "${p}" values must be unique strings`);x[D]=j}}}};return TP.default=o,TP}const cEt="http://json-schema.org/draft-07/schema#",fEt="http://json-schema.org/draft-07/schema#",dEt="Core schema meta-schema",hEt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},pEt=["object","boolean"],mEt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},gEt={$schema:cEt,$id:fEt,title:dEt,definitions:hEt,type:pEt,properties:mEt,default:!0};var Jfe;function yEt(){return Jfe||(Jfe=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Iwt(),r=aEt(),i=lEt(),s=gEt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=P6();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=cr();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=dX();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=D6();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(zN,zN.exports)),zN.exports}var vEt=yEt();const NAe=Ru(vEt),bEt="#/definitions/StudyConfig",_Et="http://json-schema.org/draft-07/schema#",wEt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"required\\": true,    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"required\\": false, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"}},"required":["id","options","prompt","required","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"}},"required":["id","options","prompt","required","type"],"type":"object"},"IFrameResponse":{"additionalProperties":false,"description":"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"iframe","type":"string"}},"required":["id","prompt","required","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"desc":{"description":"The description of the likert scale.","type":"string"},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"}},"required":["id","numItems","prompt","required","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"}},"required":["id","prompt","required","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"}},"required":["id","prompt","required","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"required\\": true,    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"}},"required":["id","options","prompt","required","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.5/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.5/src/public/demo-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/IFrameResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"required\\": true, \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"}},"required":["id","prompt","required","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"required\\": true, \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"}},"required":["id","options","prompt","required","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v1.0.5/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"sequence":{"$ref":"#/definitions/ComponentBlock","description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"required\\": true,    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"iframe\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),EEt={$ref:bEt,$schema:_Et,definitions:wEt},xEt="#/definitions/GlobalConfig",SEt="http://json-schema.org/draft-07/schema#",TEt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},CEt={$ref:xEt,$schema:SEt,definitions:TEt},PAe=new NAe;PAe.addSchema(CEt);const Zfe=PAe.getSchema("#/definitions/GlobalConfig"),DAe=new NAe;DAe.addSchema(EEt);const Y9=DAe.getSchema("#/definitions/StudyConfig");function AEt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function O6(e){return e.baseComponent!==void 0}function IEt(e){const t=fX.parse(e),n=Zfe(t),r=AEt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Zfe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function OAe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):OAe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function kEt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;O6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=O_e(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return OAe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function REt(e){let t=!1,n;try{n=fX.parse(e),t=Y9(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=kEt(n);r=[...Y9.errors||[],...s],i=o}else r=Y9.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function MAe(){const e=vg(),{setAlertModal:t}=vp(),n=bp();O.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var ede=Object.prototype.hasOwnProperty;function tde(e,t,n){for(n of e.keys())if(A2(n,t))return n}function A2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&A2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=tde(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=tde(t,i),!i)||!A2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(ede.call(e,n)&&++r&&!ede.call(t,n)||!(n in t)||!A2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function NEt(e){var t=O.useRef(e),n=O.useRef(0);return A2(e,t.current)||(t.current=e,n.current+=1),O.useMemo(function(){return t.current},[n.current])}function PEt(e,t){return O.useEffect(e,NEt(t))}const DEt=(e,t=null)=>{const[n,r]=O.useState("idle"),[i,s]=O.useState(null),[o,a]=O.useState(null),u=O.useRef(),l=O.useRef(!1);O.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=O.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return PEt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function $Ae(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const nde=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],LAe=["participantId","trialId","trialOrder","responseId"];function mX(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function OEt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(qm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=O6(u)&&u.baseComponent&&n.baseComponents?AG({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=$Ae(s);return Object.entries(s.answer).map(([h,p])=>{var b,_;const g={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},y=l.response.find(E=>E.id===h);if(t.includes("status")&&(g.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(g.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(g.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(g.configHash=e.participantConfigHash),t.includes("percentComplete")&&(g.percentComplete=r),t.includes("description")&&(g.description=l.description),t.includes("instruction")&&(g.instruction=l.instruction),t.includes("responsePrompt")&&(g.responsePrompt=y==null?void 0:y.prompt),t.includes("answer")&&(g.answer=p),t.includes("correctAnswer")){const E=(_=(b=l.correctAnswer)==null?void 0:b.find(C=>C.id===h))==null?void 0:_.answer;g.correctAnswer=typeof E=="object"?JSON.stringify(E):E}return t.includes("responseMin")&&(g.responseMin=(y==null?void 0:y.type)==="numerical"?y.min:void 0),t.includes("responseMax")&&(g.responseMax=(y==null?void 0:y.type)==="numerical"?y.max:void 0),t.includes("startTime")&&(g.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(g.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(g.duration=c),t.includes("cleanedDuration")&&(g.cleanedDuration=f),t.includes("meta")&&(g.meta=JSON.stringify(l.meta,null,2)),g}).flat()}).flat()}async function MEt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...LAe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await OEt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function $Et({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=O.useState([...nde].filter(h=>h!=="meta")),a=js(),{value:u,status:l,error:c}=DEt(MEt,[s,r,a.storageEngine,i]),f=O.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(g=>`"${`${p[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);mX(h,n)},[n,u]),d=O.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return w.jsxs(ls,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[w.jsx(TW,{searchable:!0,nothingFoundMessage:"Property not found",data:[...nde],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:w.jsx(AWe,{}),variant:"filled"}),w.jsx(rc,{h:"md"}),w.jsxs(De,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?w.jsxs(hn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[w.jsx(hn.Thead,{children:w.jsx(hn.Tr,{children:u.header.map(h=>w.jsx(hn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:w.jsxs(Kt,{direction:"row",justify:"space-between",align:"center",children:[h,!LAe.includes(h)&&w.jsx(Fb,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:w.jsx(ZW,{size:16})})]})},h))})}),w.jsx(hn.Tbody,{children:u.rows.slice(0,5).map((h,p)=>w.jsx(hn.Tr,{children:u.header.map(g=>w.jsx(hn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:h[g]},`${p}-${g}`))},p))})]}):l==="error"&&c?w.jsx(Wx,{variant:"light",children:c.message}):null,w.jsx(lc,{visible:l==="pending"||l==="idle"})]}),w.jsx(rc,{h:"sm"}),w.jsx(Kt,{justify:"center",fz:"sm",c:"dimmed",children:w.jsx(pt,{children:d})}),w.jsx(rc,{h:"md"}),w.jsxs(Pi,{justify:"right",children:[w.jsx(Sn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),w.jsx(Sn,{leftSection:w.jsx(V1e,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function LEt(){const e=iy(),{storageEngine:t}=js(),n=Vo(_=>_.answers),[r,i]=O.useState(!1);O.useEffect(()=>{const _=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(_))},1e3)},[]),MAe();const[s,o]=O.useState(),[a,u]=O.useState(""),l=e.studyMetadata.title.replace(" ","_");O.useEffect(()=>{async function _(){if(t){const E=await t.getCurrentParticipantId(),C=await t.getParticipantData();u(E),o(C)}}_()},[t]);const c=O.useCallback(async()=>{mX(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=O.useState(Math.floor(d/1e3));O.useEffect(()=>{if(r){const _=setInterval(()=>{p(E=>E-1)},1e3);return h<=0?(f&&c(),clearInterval(_),()=>clearInterval(_)):()=>clearInterval(_)}return()=>{}},[f,r,h,c]);const g=Gy(),[y,b]=O.useState(!1);return O.useEffect(()=>{(async()=>{if(t){const E=await t.getModes(g);b(E.dataCollectionEnabled)}})()},[t,g]),w.jsx(uc,{style:{height:"100%"},children:w.jsx(Kt,{direction:"column",children:r||!y?w.jsx(pt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?w.jsx(xu,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):w.jsxs(w.Fragment,{children:[w.jsx(pt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),w.jsx(rc,{h:"lg"}),w.jsx(uc,{children:w.jsx(bf,{color:"blue"})})]})})})}function FEt(){return w.jsx(pt,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function jEt(){var d;const e=iy(),t=vg(),n=Yy()||"Notfound",r=e.components[n],i=IG();MAe();const{storageEngine:s}=js(),o=bp(),{setAlertModal:a}=vp();if(O.useEffect(()=>{(s==null?void 0:s.getEngine())!=="localStorage"&&o(a({show:!0,message:"There was an issue connecting to the localStorage database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return w.jsx(LEt,{});if(n==="__trainingFailed")return w.jsx(FEt,{});if(n==="Notfound")return w.jsx(J1,{email:e.uiConfig.contactEmail});const u=O6(r)&&e.baseComponents?AG({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return w.jsxs(w.Fragment,{children:[c==="aboveStimulus"&&w.jsx(xu,{text:l}),w.jsx(FO,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),w.jsxs(O.Suspense,{fallback:w.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&w.jsx(iwt,{currentConfig:u}),u.type==="website"&&w.jsx(wnt,{currentConfig:u}),u.type==="image"&&w.jsx(xnt,{currentConfig:u}),u.type==="react-component"&&w.jsx(rwt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&w.jsx(xu,{text:l}),w.jsx(FO,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function qz(e){const[t]=XW();return w.jsx(KW,{...e,to:{pathname:e.to,search:t.toString()}})}function FAe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=FAe(o,t,n,r),r.includes(o.orderPath))break}return i}function jAe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=jAe(s,r)}}),n}function BEt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function UEt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Gy(),c=gp(),f=vg(),[d,{close:h,open:p}]=P$(!1),g=e in o.components&&o.components[e],y=a&&a.components.slice(r).includes(e)?FAe(n,e,r,a.orderPath):-1,{trialId:b}=zm(),_=b===e,E=s?f===y:f===`reviewer-${e}`,C=u?_:E,x=O.useCallback(()=>c(b?`./../${e}`:`./${e}`),[c,e,b]),A=u?x:()=>c(s?`/${l}/${y}`:`/${l}/reviewer-${e}`);return w.jsxs(ca,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[w.jsx(ca.Target,{children:w.jsx(De,{onMouseEnter:p,onMouseLeave:h,children:w.jsx(aL,{active:C,style:{lineHeight:"32px",height:"32px"},label:w.jsxs(De,{children:[i&&w.jsx(pWe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),C?w.jsx(pt,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):w.jsx(pt,{size:"sm",display:"inline",children:e})]}),onClick:A,disabled:t})})}),g&&(g.description||g.meta)&&w.jsx(ca.Dropdown,{onMouseLeave:h,children:w.jsx(pt,{size:"sm",children:w.jsxs(De,{children:[g.description&&w.jsxs(De,{children:[w.jsx(pt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),w.jsx(pt,{fw:400,component:"span",children:g.description})]}),g.meta&&w.jsxs(pt,{children:[w.jsx(pt,{fw:"900",component:"span",children:"Task Meta: "}),w.jsx(pt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(g.meta,null,2)}`})]})]})})})]})}function mM({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=B0(e.components);return n&&r&&(o=BEt(B0(e.components),B0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),w.jsx(w.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return w.jsx(UEt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?qm(c).length-jAe(u,c):0,d=qm(u);return w.jsx(aL,{label:w.jsxs(De,{style:{opacity:f>0?1:.5},children:[w.jsx(pt,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?w.jsx(dWe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&w.jsxs(L0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&w.jsx(L0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(g=>g.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:w.jsx(De,{style:{borderLeft:"1px solid #e9ecef"},children:w.jsx(mM,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function BAe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function rde({text:e}){return w.jsx(Li,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:w.jsx(B1e,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function zEt(){const e=Vo(f=>f.sequence),t=Vo(f=>f.metadata),{toggleStudyBrowser:n}=vp(),r=iy(),i=bp(),s=Gy(),o=O1e(`/${s}`),{storageEngine:a}=js(),u=O.useMemo(()=>{let f=B0(r.sequence);return f=TG(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=O.useState("participant");return w.jsxs(Ui.Aside,{p:"0",children:[w.jsx(Ui.Section,{children:w.jsxs(Kt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[w.jsx(pt,{size:"md",fw:700,pt:3,children:"Study Browser"}),w.jsx(Sn,{variant:"light",leftSection:w.jsx(JW,{size:14}),onClick:()=>BAe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),w.jsx(dg,{onClick:()=>i(n()),mt:1})]})}),w.jsx(Ui.Section,{grow:!0,component:jm,p:"xs",pt:0,children:w.jsxs(ks,{value:l,onChange:c,children:[w.jsx(De,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:w.jsxs(ks.List,{grow:!0,children:[w.jsxs(ks.Tab,{value:"participant",children:["Participant View",w.jsx(rde,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),w.jsxs(ks.Tab,{value:"allTrials",children:["All Trials View",w.jsx(rde,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),w.jsx(ks.Panel,{value:"participant",children:w.jsx(mM,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),w.jsx(ks.Panel,{value:"allTrials",children:w.jsx(mM,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function VEt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=Vo(x=>x.config),r=Vo(x=>x.metadata),i=CG(),s=bp(),{toggleShowHelpText:o,toggleStudyBrowser:a}=vp(),{storageEngine:u}=js(),l=vg(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=O.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,g=n==null?void 0:n.uiConfig.withProgressBar,y=Gy(),b=O1e(`/${y}`),_=O.useRef(null),[E,C]=O.useState(!1);return O.useEffect(()=>{const x=_.current;x&&C(x.scrollWidth>x.offsetWidth)},[n]),w.jsx(Ui.Header,{p:"md",children:w.jsxs(gu,{mt:-7,align:"center",children:[w.jsx(gu.Col,{span:4,children:w.jsxs(Kt,{align:"center",children:[w.jsx(Ub,{w:40,src:`${cc}${p}`,alt:"Study Logo"}),w.jsx(rc,{w:"md"}),w.jsx(es,{ref:_,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:E?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),w.jsx(gu.Col,{span:4,children:g&&w.jsx(Qx,{radius:"md",size:"lg",value:f})}),w.jsx(gu.Col,{span:4,children:w.jsxs(Pi,{wrap:"nowrap",justify:"right",children:[!t&&w.jsx(Li,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:w.jsx(L0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&w.jsx(Sn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),w.jsxs(nl,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[w.jsx(nl.Target,{children:w.jsx(Fb,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:w.jsx(EWe,{})})}),w.jsxs(nl.Dropdown,{children:[e&&w.jsx(nl.Item,{leftSection:w.jsx(OWe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),w.jsx(nl.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:w.jsx(IWe,{size:14}),children:"Contact"}),e&&w.jsx(nl.Item,{leftSection:w.jsx(JW,{size:14}),onClick:()=>BAe(u,n,r,b),children:"Next Participant"})]})]})]})})]})})}function UAe(e,t){var n;return O6(e)&&t.baseComponents?AG({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function HEt(){var u;const e=(u=iy())==null?void 0:u.uiConfig.sidebar,t=iy(),n=Yy(),r=t.components[n],i=O.useMemo(()=>r?UAe(r,t):null,[r,t]),s=IG(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?w.jsxs(Ui.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&w.jsx(Ui.Section,{bg:"gray.3",p:"md",children:w.jsxs(pt,{c:"gray.9",children:[w.jsx(pt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),w.jsx(xu,{text:o})]})}),w.jsx(Ui.Section,{p:"md",children:w.jsx(FO,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):w.jsx(Ui.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:w.jsx(FO,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function qEt(){const e=Vo(u=>u.showHelpText),t=Vo(u=>u.config),n=bp(),{toggleShowHelpText:r}=vp(),[i,s]=O.useState(""),[o,a]=O.useState(!0);return O.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await RG(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),w.jsx(ls,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?w.jsx(xu,{text:i}):w.jsx(J1,{path:t.uiConfig.helpTextPath})})}function WEt(){const e=Vo(o=>o.alertModal),{setAlertModal:t}=vp(),n=bp(),[r,i]=O.useState(e.show),s=O.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return O.useEffect(()=>i(e.show),[e.show]),w.jsx(ls,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:w.jsxs(Wx,{color:"red",radius:"xs",title:"Alert",icon:w.jsx(fWe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[w.jsx(pt,{my:"md",children:e.message}),w.jsx(Pi,{w:"100%",justify:"end",children:w.jsx(Sn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function GEt(){const e=O.useRef([]),t=iy(),n=t.uiConfig.windowEventDebounceTime??100,r=Vo(d=>d.showStudyBrowser);O.useEffect(()=>{const d=Hf(x=>{e.current.push([Date.now(),"focus",x.target instanceof HTMLElement?x.target.tagName:""])},n,{maxWait:n}),h=Hf(x=>{e.current.push([Date.now(),"input",x.data??""])},n,{maxWait:n}),p=Hf(x=>{e.current.push([Date.now(),"keypress",x.key])},n,{maxWait:n}),g=Hf(x=>{e.current.push([Date.now(),"mousedown",[x.clientX,x.clientY]])},n,{maxWait:n}),y=Hf(x=>{e.current.push([Date.now(),"mouseup",[x.clientX,x.clientY]])},n,{maxWait:n}),b=Hf(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),_=Hf(x=>{e.current.push([Date.now(),"mousemove",[x.clientX,x.clientY]])},n,{maxWait:n}),E=Hf(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),C=Hf(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",g),window.addEventListener("mouseup",y),window.addEventListener("resize",b),window.addEventListener("mousemove",_),window.addEventListener("scroll",E),document.addEventListener("visibilitychange",C),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",g),window.addEventListener("mouseup",y),window.removeEventListener("resize",b),window.removeEventListener("mousemove",_),window.removeEventListener("scroll",E),document.removeEventListener("visibilitychange",C)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=js(),o=Gy(),[a,u]=O.useState(!1),[l,c]=O.useState(!1);O.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=O.useMemo(()=>a&&r,[a,r]);return w.jsx(B_e.Provider,{value:e,children:w.jsxs(Ui,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[w.jsx(HEt,{}),w.jsx(zEt,{}),w.jsx(VEt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),w.jsx(qEt,{}),w.jsx(WEt,{}),w.jsx(Ui.Main,{children:w.jsx(Xqe,{})})]})})}function YEt(e,t=!1){return typeof e=="number"?ide(e,t):ide(e.length,t).map(r=>r.map(i=>e[i]))}function ide(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function zAe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=zAe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function KEt(e,t){const n=B0(e);return zAe(n,t,"root")}function VAe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&VAe(s,t,i,o)})}function XEt(e){const t=[];return VAe(e,t,"",0),t}function sde(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return YEt(i.sort(()=>.5-Math.random()),!0)}function QEt(e){const n=XEt(e.sequence).map(s=>({[s]:sde(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=KEt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=sde(e,o))})}),i}async function JEt(e){const t=await(await fetch(`${cc}${e}`)).text();return REt(t)}async function M6(e,t){const n=t.configsList.find(r=>q1e(r)===e);if(n){const r=t.configs[n];return await JEt(`${r.path}`)}return null}async function ZEt(e){const t={},n=e.configsList.filter(i=>!e.configs[i].test).map(async i=>M6(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function ext({globalConfig:e}){const t=Gy(),[n,r]=O.useState(null),i=e.configsList.includes(t);O.useEffect(()=>{M6(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=O.useState([]),[a,u]=O.useState(null),{storageEngine:l}=js(),[c]=XW();O.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await QEt(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(c.entries()),b=await fetch("https://api.ipify.org?format=json").catch(T=>""),_=b instanceof Response?await b.json():{ip:""},E={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:_.ip},C=await l.initializeParticipantSession(t,y,n,E,g),x=await Ltt(t,n,C.sequence,E,C.answers);u(x),o([{element:w.jsx(GEt,{}),children:[{path:"/",element:w.jsx(qz,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?w.jsxs(w.Fragment,{children:[w.jsx(es,{order:2,mb:8,children:"Error loading config"}),w.jsx(t7,{issues:n.errors,type:"error"})]}):w.jsx(jEt,{})}]}])}h()},[l,n,t,c]);const f=$1e(s);let d=null;return i?s.length===0?d=w.jsx(lc,{visible:!0}):d=f&&a?w.jsx(j_e.Provider,{value:a,children:w.jsx(Pet,{store:a.store,children:f})}):w.jsx(J1,{}):d=w.jsx(J1,{}),d}var ode={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HAe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},txt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},gX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(HAe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):txt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new nxt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class nxt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rxt=function(e){const t=HAe(e);return gX.encodeByteArray(t,!0)},gM=function(e){return rxt(e).replace(/\./g,"")},qAe=function(e){try{return gX.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WAe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ixt=()=>WAe().__FIREBASE_DEFAULTS__,sxt=()=>{if(typeof process>"u"||typeof ode>"u")return;const e=ode.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},oxt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&qAe(e[1]);return t&&JSON.parse(t)},$6=()=>{try{return ixt()||sxt()||oxt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},GAe=e=>{var t,n;return(n=(t=$6())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},axt=e=>{const t=GAe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},YAe=()=>{var e;return(e=$6())===null||e===void 0?void 0:e.config},KAe=e=>{var t;return(t=$6())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uxt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[gM(JSON.stringify(n)),gM(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lxt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ma())}function cxt(){var e;const t=(e=$6())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fxt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function dxt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hxt(){const e=ma();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function pxt(){return!cxt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yX(){try{return typeof indexedDB=="object"}catch{return!1}}function mxt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gxt="FirebaseError";class Sp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=gxt,Object.setPrototypeOf(this,Sp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,TS.prototype.create)}}class TS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?yxt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Sp(i,a,r)}}function yxt(e,t){return e.replace(vxt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const vxt=/\{\$([^}]+)}/g;function bxt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function OA(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(ade(s)&&ade(o)){if(!OA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ade(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function _xt(e,t){const n=new wxt(e,t);return n.subscribe.bind(n)}class wxt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ext(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=K9),i.error===void 0&&(i.error=K9),i.complete===void 0&&(i.complete=K9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ext(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function K9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xxt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sxt=1e3,Txt=2,Cxt=4*60*60*1e3,Axt=.5;function Ixt(e,t=Sxt,n=Txt){const r=t*Math.pow(n,e),i=Math.round(Axt*r*(Math.random()-.5)*2);return Math.min(Cxt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(e){return e&&e._delegate?e._delegate:e}class rp{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kxt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new DA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Nxt(t))try{this.getOrInitializeService({instanceIdentifier:o1})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=o1){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=o1){return this.instances.has(t)}getOptions(t=o1){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Rxt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=o1){return this.component?this.component.multipleInstances?t:o1:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Rxt(e){return e===o1?void 0:e}function Nxt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pxt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new kxt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _r;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(_r||(_r={}));const Dxt={debug:_r.DEBUG,verbose:_r.VERBOSE,info:_r.INFO,warn:_r.WARN,error:_r.ERROR,silent:_r.SILENT},Oxt=_r.INFO,Mxt={[_r.DEBUG]:"log",[_r.VERBOSE]:"log",[_r.INFO]:"info",[_r.WARN]:"warn",[_r.ERROR]:"error"},$xt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=Mxt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class L6{constructor(t){this.name=t,this._logLevel=Oxt,this._logHandler=$xt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in _r))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Dxt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,_r.DEBUG,...t),this._logHandler(this,_r.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,_r.VERBOSE,...t),this._logHandler(this,_r.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,_r.INFO,...t),this._logHandler(this,_r.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,_r.WARN,...t),this._logHandler(this,_r.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,_r.ERROR,...t),this._logHandler(this,_r.ERROR,...t)}}const Lxt=(e,t)=>t.some(n=>e instanceof n);let ude,lde;function Fxt(){return ude||(ude=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jxt(){return lde||(lde=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XAe=new WeakMap,Wz=new WeakMap,QAe=new WeakMap,X9=new WeakMap,vX=new WeakMap;function Bxt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(H0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&XAe.set(n,e)}).catch(()=>{}),vX.set(t,e),t}function Uxt(e){if(Wz.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Wz.set(e,t)}let Gz={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Wz.get(e);if(t==="objectStoreNames")return e.objectStoreNames||QAe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return H0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function zxt(e){Gz=e(Gz)}function Vxt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Q9(this),t,...n);return QAe.set(r,t.sort?t.sort():[t]),H0(r)}:jxt().includes(e)?function(...t){return e.apply(Q9(this),t),H0(XAe.get(this))}:function(...t){return H0(e.apply(Q9(this),t))}}function Hxt(e){return typeof e=="function"?Vxt(e):(e instanceof IDBTransaction&&Uxt(e),Lxt(e,Fxt())?new Proxy(e,Gz):e)}function H0(e){if(e instanceof IDBRequest)return Bxt(e);if(X9.has(e))return X9.get(e);const t=Hxt(e);return t!==e&&(X9.set(e,t),vX.set(t,e)),t}const Q9=e=>vX.get(e);function qxt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=H0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(H0(o.result),u.oldVersion,u.newVersion,H0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Wxt=["get","getKey","getAll","getAllKeys","count"],Gxt=["put","add","delete","clear"],J9=new Map;function cde(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(J9.get(t))return J9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Gxt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Wxt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return J9.set(t,s),s}zxt(e=>({...e,get:(t,n,r)=>cde(t,n)||e.get(t,n,r),has:(t,n)=>!!cde(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yxt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Kxt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Kxt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Yz="@firebase/app",fde="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=new L6("@firebase/app"),Xxt="@firebase/app-compat",Qxt="@firebase/analytics-compat",Jxt="@firebase/analytics",Zxt="@firebase/app-check-compat",eSt="@firebase/app-check",tSt="@firebase/auth",nSt="@firebase/auth-compat",rSt="@firebase/database",iSt="@firebase/database-compat",sSt="@firebase/functions",oSt="@firebase/functions-compat",aSt="@firebase/installations",uSt="@firebase/installations-compat",lSt="@firebase/messaging",cSt="@firebase/messaging-compat",fSt="@firebase/performance",dSt="@firebase/performance-compat",hSt="@firebase/remote-config",pSt="@firebase/remote-config-compat",mSt="@firebase/storage",gSt="@firebase/storage-compat",ySt="@firebase/firestore",vSt="@firebase/vertexai-preview",bSt="@firebase/firestore-compat",_St="firebase",wSt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kz="[DEFAULT]",ESt={[Yz]:"fire-core",[Xxt]:"fire-core-compat",[Jxt]:"fire-analytics",[Qxt]:"fire-analytics-compat",[eSt]:"fire-app-check",[Zxt]:"fire-app-check-compat",[tSt]:"fire-auth",[nSt]:"fire-auth-compat",[rSt]:"fire-rtdb",[iSt]:"fire-rtdb-compat",[sSt]:"fire-fn",[oSt]:"fire-fn-compat",[aSt]:"fire-iid",[uSt]:"fire-iid-compat",[lSt]:"fire-fcm",[cSt]:"fire-fcm-compat",[fSt]:"fire-perf",[dSt]:"fire-perf-compat",[hSt]:"fire-rc",[pSt]:"fire-rc-compat",[mSt]:"fire-gcs",[gSt]:"fire-gcs-compat",[ySt]:"fire-fst",[bSt]:"fire-fst-compat",[vSt]:"fire-vertex","fire-js":"fire-js",[_St]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yM=new Map,xSt=new Map,Xz=new Map;function dde(e,t){try{e.container.addComponent(t)}catch(n){cb.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ng(e){const t=e.name;if(Xz.has(t))return cb.debug(`There were multiple attempts to register component ${t}.`),!1;Xz.set(t,e);for(const n of yM.values())dde(n,e);for(const n of xSt.values())dde(n,e);return!0}function CS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function kh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SSt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},q0=new TS("app","Firebase",SSt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TSt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw q0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=wSt;function JAe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Kz,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw q0.create("bad-app-name",{appName:String(i)});if(n||(n=YAe()),!n)throw q0.create("no-options");const s=yM.get(i);if(s){if(OA(n,s.options)&&OA(r,s.config))return s;throw q0.create("duplicate-app",{appName:i})}const o=new Pxt(i);for(const u of Xz.values())o.addComponent(u);const a=new TSt(n,r,o);return yM.set(i,a),a}function bX(e=Kz){const t=yM.get(e);if(!t&&e===Kz&&YAe())return JAe();if(!t)throw q0.create("no-app",{appName:e});return t}function md(e,t,n){var r;let i=(r=ESt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),cb.warn(a.join(" "));return}ng(new rp(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CSt="firebase-heartbeat-database",ASt=1,MA="firebase-heartbeat-store";let Z9=null;function ZAe(){return Z9||(Z9=qxt(CSt,ASt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(MA)}catch(n){console.warn(n)}}}}).catch(e=>{throw q0.create("idb-open",{originalErrorMessage:e.message})})),Z9}async function ISt(e){try{const n=(await ZAe()).transaction(MA),r=await n.objectStore(MA).get(eIe(e));return await n.done,r}catch(t){if(t instanceof Sp)cb.warn(t.message);else{const n=q0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});cb.warn(n.message)}}}async function hde(e,t){try{const r=(await ZAe()).transaction(MA,"readwrite");await r.objectStore(MA).put(t,eIe(e)),await r.done}catch(n){if(n instanceof Sp)cb.warn(n.message);else{const r=q0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cb.warn(r.message)}}}function eIe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kSt=1024,RSt=30*24*60*60*1e3;class NSt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new DSt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=pde();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=RSt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pde(),{heartbeatsToSend:r,unsentEntries:i}=PSt(this._heartbeatsCache.heartbeats),s=gM(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function pde(){return new Date().toISOString().substring(0,10)}function PSt(e,t=kSt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),mde(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),mde(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class DSt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yX()?mxt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ISt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return hde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function mde(e){return gM(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OSt(e){ng(new rp("platform-logger",t=>new Yxt(t),"PRIVATE")),ng(new rp("heartbeat",t=>new NSt(t),"PRIVATE")),md(Yz,fde,e),md(Yz,fde,"esm2017"),md("fire-js","")}OSt("");function tIe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MSt=tIe,nIe=new TS("auth","Firebase",tIe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=new L6("@firebase/auth");function $St(e,...t){vM.logLevel<=_r.WARN&&vM.warn(`Auth (${Zb}): ${e}`,...t)}function $D(e,...t){vM.logLevel<=_r.ERROR&&vM.error(`Auth (${Zb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(e,...t){throw wX(e,...t)}function gd(e,...t){return wX(e,...t)}function _X(e,t,n){const r=Object.assign(Object.assign({},MSt()),{[t]:n});return new TS("auth","Firebase",r).create(t,{appName:e.name})}function W0(e){return _X(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LSt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&ip(e,"argument-error"),_X(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function wX(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return nIe.create(e,...t)}function Rn(e,t,...n){if(!e)throw wX(t,...n)}function Sm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw $D(t),new Error(t)}function rg(e,t){e||Sm(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qz(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function FSt(){return gde()==="http:"||gde()==="https:"}function gde(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jSt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FSt()||fxt()||"connection"in navigator)?navigator.onLine:!0}function BSt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(t,n){this.shortDelay=t,this.longDelay=n,rg(n>t,"Short delay should be less than long delay!"),this.isMobile=lxt()||dxt()}get(){return jSt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EX(e,t){rg(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rIe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const USt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zSt=new sk(3e4,6e4);function F6(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function AS(e,t,n,r,i={}){return iIe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=ik(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),rIe.fetch()(oIe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function iIe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},USt),t);try{const i=new VSt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw CP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw CP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw CP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw CP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw _X(e,c,l);ip(e,c)}}catch(i){if(i instanceof Sp)throw i;ip(e,"network-request-failed",{message:String(i)})}}async function sIe(e,t,n,r,i={}){const s=await AS(e,t,n,r,i);return"mfaPendingCredential"in s&&ip(e,"multi-factor-auth-required",{_serverResponse:s}),s}function oIe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?EX(e.config,i):`${e.config.apiScheme}://${i}`}class VSt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gd(this.auth,"network-request-failed")),zSt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function CP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=gd(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HSt(e,t){return AS(e,"POST","/v1/accounts:delete",t)}async function aIe(e,t){return AS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function qSt(e,t=!1){const n=Di(e),r=await n.getIdToken(t),i=xX(r);Rn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:I2(eB(i.auth_time)),issuedAtTime:I2(eB(i.iat)),expirationTime:I2(eB(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function eB(e){return Number(e)*1e3}function xX(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return $D("JWT malformed, contained fewer than 3 sections"),null;try{const i=qAe(n);return i?JSON.parse(i):($D("Failed to decode base64 JWT payload"),null)}catch(i){return $D("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function yde(e){const t=xX(e);return Rn(t,"internal-error"),Rn(typeof t.exp<"u","internal-error"),Rn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Sp&&WSt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function WSt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GSt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jz{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=I2(this.lastLoginAt),this.creationTime=I2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(e){var t;const n=e.auth,r=await e.getIdToken(),i=await $A(e,aIe(n,{idToken:r}));Rn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?uIe(s.providerUserInfo):[],a=KSt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jz(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function YSt(e){const t=Di(e);await bM(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function KSt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function uIe(e){return e.map(t=>{var{providerId:n}=t,r=yI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XSt(e,t){const n=await iIe(e,{},async()=>{const r=ik({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=oIe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",rIe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function QSt(e,t){return AS(e,"POST","/v2/accounts:revokeToken",F6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Rn(t.idToken,"internal-error"),Rn(typeof t.idToken<"u","internal-error"),Rn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):yde(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Rn(t.length!==0,"internal-error");const n=yde(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Rn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await XSt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new gE;return r&&(Rn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Rn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Rn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new gE,this.toJSON())}_performRefresh(){return Sm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(e,t){Rn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Tm{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=yI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GSt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Jz(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await $A(this,this.stsTokenManager.getToken(this.auth,t));return Rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return qSt(this,t)}reload(){return YSt(this)}_assign(t){this!==t&&(Rn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Tm(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await bM(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kh(this.auth.app))return Promise.reject(W0(this.auth));const t=await this.getIdToken();return await $A(this,HSt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,g=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(l=n.createdAt)!==null&&l!==void 0?l:void 0,_=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:E,emailVerified:C,isAnonymous:x,providerData:T,stsTokenManager:A}=n;Rn(E&&A,t,"internal-error");const k=gE.fromJSON(this.name,A);Rn(typeof E=="string",t,"internal-error"),t0(f,t.name),t0(d,t.name),Rn(typeof C=="boolean",t,"internal-error"),Rn(typeof x=="boolean",t,"internal-error"),t0(h,t.name),t0(p,t.name),t0(g,t.name),t0(y,t.name),t0(b,t.name),t0(_,t.name);const N=new Tm({uid:E,auth:t,email:d,emailVerified:C,displayName:f,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:g,stsTokenManager:k,createdAt:b,lastLoginAt:_});return T&&Array.isArray(T)&&(N.providerData=T.map(P=>Object.assign({},P))),y&&(N._redirectEventId=y),N}static async _fromIdTokenResponse(t,n,r=!1){const i=new gE;i.updateFromServerResponse(n);const s=new Tm({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await bM(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Rn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?uIe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new gE;a.updateFromIdToken(r);const u=new Tm({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Jz(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vde=new Map;function Cm(e){rg(e instanceof Function,"Expected a class definition");let t=vde.get(e);return t?(rg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,vde.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lIe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}lIe.type="NONE";const bde=lIe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(e,t,n){return`firebase:${e}:${t}:${n}`}class yE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=LD(this.userKey,i.apiKey,s),this.fullPersistenceKey=LD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Tm._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new yE(Cm(bde),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Cm(bde);const o=LD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Tm._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new yE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new yE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _de(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(dIe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(cIe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pIe(t))return"Blackberry";if(mIe(t))return"Webos";if(SX(t))return"Safari";if((t.includes("chrome/")||fIe(t))&&!t.includes("edge/"))return"Chrome";if(hIe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cIe(e=ma()){return/firefox\//i.test(e)}function SX(e=ma()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function fIe(e=ma()){return/crios\//i.test(e)}function dIe(e=ma()){return/iemobile/i.test(e)}function hIe(e=ma()){return/android/i.test(e)}function pIe(e=ma()){return/blackberry/i.test(e)}function mIe(e=ma()){return/webos/i.test(e)}function j6(e=ma()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function JSt(e=ma()){var t;return j6(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function ZSt(){return hxt()&&document.documentMode===10}function gIe(e=ma()){return j6(e)||hIe(e)||mIe(e)||pIe(e)||/windows phone/i.test(e)||dIe(e)}function eTt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yIe(e,t=[]){let n;switch(e){case"Browser":n=_de(ma());break;case"Worker":n=`${_de(ma())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Zb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tTt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nTt(e,t={}){return AS(e,"GET","/v2/passwordPolicy",F6(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rTt=6;class iTt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:rTt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sTt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wde(this),this.idTokenSubscription=new wde(this),this.beforeStateQueue=new tTt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nIe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Cm(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await yE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await aIe(this,{idToken:t}),r=await Tm._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(kh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await bM(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=BSt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(kh(this.app))return Promise.reject(W0(this));const n=t?Di(t):null;return n&&Rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return kh(this.app)?Promise.reject(W0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return kh(this.app)?Promise.reject(W0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Cm(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await nTt(this),n=new iTt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new TS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await QSt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Cm(t)||this._popupRedirectResolver;Rn(n,this,"argument-error"),this.redirectPersistenceManager=await yE.create(this,[Cm(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=yIe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&$St(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ok(e){return Di(e)}class wde{constructor(t){this.auth=t,this.observer=null,this.addObserver=_xt(n=>this.observer=n)}get next(){return Rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TX={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oTt(e){TX=e}function aTt(e){return TX.loadJS(e)}function uTt(){return TX.gapiScript}function lTt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cTt(e,t){const n=CS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(OA(s,t??{}))return i;ip(i,"already-initialized")}return n.initialize({options:t})}function fTt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cm);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function dTt(e,t,n){const r=ok(e);Rn(r._canInitEmulator,r,"emulator-config-failed"),Rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=vIe(t),{host:o,port:a}=hTt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),pTt()}function vIe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function hTt(e){const t=vIe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Ede(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Ede(o)}}}function Ede(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function pTt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bIe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Sm("not implemented")}_getIdTokenResponse(t){return Sm("not implemented")}_linkToIdToken(t,n){return Sm("not implemented")}_getReauthenticationResolver(t){return Sm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vE(e,t){return sIe(e,"POST","/v1/accounts:signInWithIdp",F6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mTt="http://localhost";class fb extends bIe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new fb(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ip("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=yI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new fb(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return vE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,vE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,vE(t,n)}buildRequest(){const t={requestUri:mTt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=ik(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak extends CX{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends ak{constructor(){super("facebook.com")}static credential(t){return fb._fromParams({providerId:_0.PROVIDER_ID,signInMethod:_0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return _0.credentialFromTaggedObject(t)}static credentialFromError(t){return _0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return _0.credential(t.oauthAccessToken)}catch{return null}}}_0.FACEBOOK_SIGN_IN_METHOD="facebook.com";_0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym extends ak{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return fb._fromParams({providerId:ym.PROVIDER_ID,signInMethod:ym.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return ym.credentialFromTaggedObject(t)}static credentialFromError(t){return ym.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ym.credential(n,r)}catch{return null}}}ym.GOOGLE_SIGN_IN_METHOD="google.com";ym.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0 extends ak{constructor(){super("github.com")}static credential(t){return fb._fromParams({providerId:w0.PROVIDER_ID,signInMethod:w0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return w0.credentialFromTaggedObject(t)}static credentialFromError(t){return w0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return w0.credential(t.oauthAccessToken)}catch{return null}}}w0.GITHUB_SIGN_IN_METHOD="github.com";w0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0 extends ak{constructor(){super("twitter.com")}static credential(t,n){return fb._fromParams({providerId:E0.PROVIDER_ID,signInMethod:E0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return E0.credentialFromTaggedObject(t)}static credentialFromError(t){return E0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return E0.credential(n,r)}catch{return null}}}E0.TWITTER_SIGN_IN_METHOD="twitter.com";E0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gTt(e,t){return sIe(e,"POST","/v1/accounts:signUp",F6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Tm._fromIdTokenResponse(t,r,i),o=xde(r);return new Ey({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=xde(r);return new Ey({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function xde(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yTt(e){var t;if(kh(e.app))return Promise.reject(W0(e));const n=ok(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Ey({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await gTt(n,{returnSecureToken:!0}),i=await Ey._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M extends Sp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,_M.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new _M(t,n,r,i)}}function _Ie(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?_M._fromErrorAndOperation(e,s,t,r):s})}async function vTt(e,t,n=!1){const r=await $A(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ey._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bTt(e,t,n=!1){const{auth:r}=e;if(kh(r.app))return Promise.reject(W0(r));const i="reauthenticate";try{const s=await $A(e,_Ie(r,i,t,e),n);Rn(s.idToken,r,"internal-error");const o=xX(s.idToken);Rn(o,r,"internal-error");const{sub:a}=o;return Rn(e.uid===a,r,"user-mismatch"),Ey._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ip(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Tt(e,t,n=!1){if(kh(e.app))return Promise.reject(W0(e));const r="signIn",i=await _Ie(e,r,t),s=await Ey._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function wTt(e,t,n,r){return Di(e).onIdTokenChanged(t,n,r)}function ETt(e,t,n){return Di(e).beforeAuthStateChanged(t,n)}function xTt(e,t,n,r){return Di(e).onAuthStateChanged(t,n,r)}function STt(e){return Di(e).signOut()}const wM="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wIe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wM,"1"),this.storage.removeItem(wM),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TTt(){const e=ma();return SX(e)||j6(e)}const CTt=1e3,ATt=10;class EIe extends wIe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=TTt()&&eTt(),this.fallbackToPolling=gIe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);ZSt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,ATt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},CTt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}EIe.type="LOCAL";const ITt=EIe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xIe extends wIe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}xIe.type="SESSION";const SIe=xIe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kTt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new B6(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await kTt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}B6.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AX(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RTt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=AX("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(){return window}function NTt(e){Bh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TIe(){return typeof Bh().WorkerGlobalScope<"u"&&typeof Bh().importScripts=="function"}async function PTt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DTt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function OTt(){return TIe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CIe="firebaseLocalStorageDb",MTt=1,EM="firebaseLocalStorage",AIe="fbase_key";class uk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function U6(e,t){return e.transaction([EM],t?"readwrite":"readonly").objectStore(EM)}function $Tt(){const e=indexedDB.deleteDatabase(CIe);return new uk(e).toPromise()}function Zz(){const e=indexedDB.open(CIe,MTt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(EM,{keyPath:AIe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(EM)?t(r):(r.close(),await $Tt(),t(await Zz()))})})}async function Sde(e,t,n){const r=U6(e,!0).put({[AIe]:t,value:n});return new uk(r).toPromise()}async function LTt(e,t){const n=U6(e,!1).get(t),r=await new uk(n).toPromise();return r===void 0?null:r.value}function Tde(e,t){const n=U6(e,!0).delete(t);return new uk(n).toPromise()}const FTt=800,jTt=3;class IIe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Zz(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>jTt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TIe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=B6._getInstance(OTt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await PTt(),!this.activeServiceWorker)return;this.sender=new RTt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||DTt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Zz();return await Sde(t,wM,"1"),await Tde(t,wM),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Sde(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>LTt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Tde(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=U6(i,!1).getAll();return new uk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FTt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IIe.type="LOCAL";const BTt=IIe;new sk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kIe(e,t){return t?Cm(t):(Rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IX extends bIe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return vE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return vE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return vE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function UTt(e){return _Tt(e.auth,new IX(e),e.bypassAuthState)}function zTt(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),bTt(n,new IX(e),e.bypassAuthState)}async function VTt(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),vTt(n,new IX(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RIe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return UTt;case"linkViaPopup":case"linkViaRedirect":return VTt;case"reauthViaPopup":case"reauthViaRedirect":return zTt;default:ip(this.auth,"internal-error")}}resolve(t){rg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){rg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HTt=new sk(2e3,1e4);async function qTt(e,t,n){if(kh(e.app))return Promise.reject(gd(e,"operation-not-supported-in-this-environment"));const r=ok(e);LSt(e,t,CX);const i=kIe(r,n);return new P1(r,"signInViaPopup",t,i).executeNotNull()}class P1 extends RIe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,P1.currentPopupAction&&P1.currentPopupAction.cancel(),P1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Rn(t,this.auth,"internal-error"),t}async onExecution(){rg(this.filter.length===1,"Popup operations only handle one event");const t=AX();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(gd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,P1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gd(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,HTt.get())};t()}}P1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WTt="pendingRedirect",FD=new Map;class GTt extends RIe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=FD.get(this.auth._key());if(!t){try{const r=await YTt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}FD.set(this.auth._key(),t)}return this.bypassAuthState||FD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YTt(e,t){const n=QTt(t),r=XTt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function KTt(e,t){FD.set(e._key(),t)}function XTt(e){return Cm(e._redirectPersistence)}function QTt(e){return LD(WTt,e.config.apiKey,e.name)}async function JTt(e,t,n=!1){if(kh(e.app))return Promise.reject(W0(e));const r=ok(e),i=kIe(r,t),o=await new GTt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZTt=10*60*1e3;class eCt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!tCt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!NIe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gd(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ZTt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cde(t))}saveEventToCache(t){this.cachedEventUids.add(Cde(t)),this.lastProcessedEventTime=Date.now()}}function Cde(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function NIe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function tCt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NIe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nCt(e,t={}){return AS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rCt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iCt=/^https?/;async function sCt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await nCt(e);for(const n of t)try{if(oCt(n))return}catch{}ip(e,"unauthorized-domain")}function oCt(e){const t=Qz(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iCt.test(n))return!1;if(rCt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aCt=new sk(3e4,6e4);function Ade(){const e=Bh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function uCt(e){return new Promise((t,n)=>{var r,i,s;function o(){Ade(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ade(),n(gd(e,"network-request-failed"))},timeout:aCt.get()})}if(!((i=(r=Bh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Bh().gapi)===null||s===void 0)&&s.load)o();else{const a=lTt("iframefcb");return Bh()[a]=()=>{gapi.load?o():n(gd(e,"network-request-failed"))},aTt(`${uTt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw jD=null,t})}let jD=null;function lCt(e){return jD=jD||uCt(e),jD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cCt=new sk(5e3,15e3),fCt="__/auth/iframe",dCt="emulator/auth/iframe",hCt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pCt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mCt(e){const t=e.config;Rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?EX(t,dCt):`https://${e.config.authDomain}/${fCt}`,r={apiKey:t.apiKey,appName:e.name,v:Zb},i=pCt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ik(r).slice(1)}`}async function gCt(e){const t=await lCt(e),n=Bh().gapi;return Rn(n,e,"internal-error"),t.open({where:document.body,url:mCt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hCt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=gd(e,"network-request-failed"),a=Bh().setTimeout(()=>{s(o)},cCt.get());function u(){Bh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yCt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vCt=500,bCt=600,_Ct="_blank",wCt="http://localhost";class Ide{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ECt(e,t,n,r=vCt,i=bCt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},yCt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=ma().toLowerCase();n&&(a=fIe(l)?_Ct:n),cIe(l)&&(t=t||wCt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(JSt(l)&&a!=="_self")return xCt(t||"",a),new Ide(null);const f=window.open(t||"",a,c);Rn(f,e,"popup-blocked");try{f.focus()}catch{}return new Ide(f)}function xCt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SCt="__/auth/handler",TCt="emulator/auth/handler",CCt=encodeURIComponent("fac");async function kde(e,t,n,r,i,s){Rn(e.config.authDomain,e,"auth-domain-config-required"),Rn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Zb,eventId:i};if(t instanceof CX){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",bxt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof ak){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${CCt}=${encodeURIComponent(u)}`:"";return`${ACt(e)}?${ik(a).slice(1)}${l}`}function ACt({config:e}){return e.emulator?EX(e,TCt):`https://${e.authDomain}/${SCt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tB="webStorageSupport";class ICt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SIe,this._completeRedirectFn=JTt,this._overrideRedirectResult=KTt}async _openPopup(t,n,r,i){var s;rg((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await kde(t,n,r,Qz(),i);return ECt(t,o,AX())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await kde(t,n,r,Qz(),i);return NTt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(rg(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await gCt(t),r=new eCt(t);return n.register("authEvent",i=>(Rn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(tB,{type:tB},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[tB];o!==void 0&&n(!!o),ip(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sCt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return gIe()||SX()||j6()}}const PIe=ICt;var Rde="@firebase/auth",Nde="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kCt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RCt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NCt(e){ng(new rp("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Rn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yIe(e)},l=new sTt(r,i,s,u);return fTt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),ng(new rp("auth-internal",t=>{const n=ok(t.getProvider("auth").getImmediate());return(r=>new kCt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),md(Rde,Nde,RCt(e)),md(Rde,Nde,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PCt=5*60,DCt=KAe("authIdTokenMaxAge")||PCt;let Pde=null;const OCt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>DCt)return;const i=n==null?void 0:n.token;Pde!==i&&(Pde=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function xM(e=bX()){const t=CS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=cTt(e,{popupRedirectResolver:PIe,persistence:[BTt,ITt,SIe]}),r=KAe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=OCt(s.toString());ETt(n,o,()=>o(n.currentUser)),wTt(n,a=>o(a))}}const i=GAe("auth");return i&&dTt(n,`http://${i}`),n}function MCt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}oTt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=gd("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",MCt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NCt("Browser");var $Ct="firebase",LCt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */md($Ct,LCt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DIe="firebasestorage.googleapis.com",OIe="storageBucket",FCt=2*60*1e3,jCt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends Sp{constructor(t,n,r=0){super(nB(t),`Firebase Storage: ${n} (${nB(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ts.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return nB(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ss;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ss||(Ss={}));function nB(e){return"storage/"+e}function kX(){const e="An unknown error occurred, please check the error payload for server response.";return new Ts(Ss.UNKNOWN,e)}function BCt(e){return new Ts(Ss.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function UCt(e){return new Ts(Ss.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function zCt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ts(Ss.UNAUTHENTICATED,e)}function VCt(){return new Ts(Ss.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function HCt(e){return new Ts(Ss.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function qCt(){return new Ts(Ss.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function WCt(){return new Ts(Ss.CANCELED,"User canceled the upload/download.")}function GCt(e){return new Ts(Ss.INVALID_URL,"Invalid URL '"+e+"'.")}function YCt(e){return new Ts(Ss.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function KCt(){return new Ts(Ss.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OIe+"' property when initializing the app?")}function XCt(){return new Ts(Ss.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function QCt(){return new Ts(Ss.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function JCt(e){return new Ts(Ss.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function eV(e){return new Ts(Ss.INVALID_ARGUMENT,e)}function MIe(){return new Ts(Ss.APP_DELETED,"The Firebase app was deleted.")}function ZCt(e){return new Ts(Ss.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function k2(e,t){return new Ts(Ss.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function YT(e){throw new Ts(Ss.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=bu.makeFromUrl(t,n)}catch{return new bu(t,"")}if(r.path==="")return r;throw YCt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(C){C.path_=decodeURIComponent(C.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},g=n===DIe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",b=new RegExp(`^https?://${g}/${i}/${y}`,"i"),E=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:b,indices:{bucket:1,path:2},postModify:l}];for(let C=0;C<E.length;C++){const x=E[C],T=x.regex.exec(t);if(T){const A=T[x.indices.bucket];let k=T[x.indices.path];k||(k=""),r=new bu(A,k),x.postModify(r);break}}if(r==null)throw GCt(t);return r}}class e2t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...y){l||(l=!0,t.apply(null,y))}function f(y){i=setTimeout(()=>{i=null,e(h,u())},y)}function d(){s&&clearTimeout(s)}function h(y,...b){if(l){d();return}if(y){d(),c.call(null,y,...b);return}if(u()||o){d(),c.call(null,y,...b);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,f(E)}let p=!1;function g(y){p||(p=!0,d(),!l&&(i!==null?(y||(a=2),clearTimeout(i),f(0)):y||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}function n2t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2t(e){return e!==void 0}function i2t(e){return typeof e=="object"&&!Array.isArray(e)}function RX(e){return typeof e=="string"||e instanceof String}function Dde(e){return NX()&&e instanceof Blob}function NX(){return typeof Blob<"u"}function tV(e,t,n,r){if(r<t)throw eV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw eV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function $Ie(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(B1||(B1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2t{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new AP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===B1.NO_ERROR,u=s.getStatus();if(!a||s2t(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===B1.ABORT;r(!1,new AP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new AP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());r2t(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=kX();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?MIe():WCt();o(u)}else{const u=qCt();o(u)}};this.canceled_?n(!1,new AP(!1,null,!0)):this.backoffId_=t2t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&n2t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class AP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function a2t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function u2t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function l2t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function c2t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function f2t(e,t,n,r,i,s,o=!0){const a=$Ie(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return l2t(l,t),a2t(l,n),u2t(l,s),c2t(l,r),new o2t(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function h2t(...e){const t=d2t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(NX())return new Blob(e);throw new Ts(Ss.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function p2t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2t(e){if(typeof atob>"u")throw JCt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rB{constructor(t,n){this.data=t,this.contentType=n||null}}function g2t(e,t){switch(e){case Rh.RAW:return new rB(LIe(t));case Rh.BASE64:case Rh.BASE64URL:return new rB(FIe(e,t));case Rh.DATA_URL:return new rB(v2t(t),b2t(t))}throw kX()}function LIe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function y2t(e){let t;try{t=decodeURIComponent(e)}catch{throw k2(Rh.DATA_URL,"Malformed data URL.")}return LIe(t)}function FIe(e,t){switch(e){case Rh.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw k2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Rh.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw k2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=m2t(t)}catch(i){throw i.message.includes("polyfill")?i:k2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class jIe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw k2(Rh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=_2t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function v2t(e){const t=new jIe(e);return t.base64?FIe(Rh.BASE64,t.rest):y2t(t.rest)}function b2t(e){return new jIe(e).contentType}function _2t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(t,n){let r=0,i="";Dde(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Dde(this.data_)){const r=this.data_,i=p2t(r,t,n);return i===null?null:new x0(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new x0(r,!0)}}static getBlob(...t){if(NX()){const n=t.map(r=>r instanceof x0?r.data_:r);return new x0(h2t.apply(null,n))}else{const n=t.map(o=>RX(o)?g2t(Rh.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new x0(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PX(e){let t;try{t=JSON.parse(e)}catch{return null}return i2t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function E2t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function BIe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2t(e,t){return t}class ou{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||x2t}}let IP=null;function S2t(e){return!RX(e)||e.length<2?e:BIe(e)}function UIe(){if(IP)return IP;const e=[];e.push(new ou("bucket")),e.push(new ou("generation")),e.push(new ou("metageneration")),e.push(new ou("name","fullPath",!0));function t(s,o){return S2t(o)}const n=new ou("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new ou("size");return i.xform=r,e.push(i),e.push(new ou("timeCreated")),e.push(new ou("updated")),e.push(new ou("md5Hash",null,!0)),e.push(new ou("cacheControl",null,!0)),e.push(new ou("contentDisposition",null,!0)),e.push(new ou("contentEncoding",null,!0)),e.push(new ou("contentLanguage",null,!0)),e.push(new ou("contentType",null,!0)),e.push(new ou("metadata","customMetadata",!0)),IP=e,IP}function T2t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new bu(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function C2t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return T2t(r,e),r}function zIe(e,t,n){const r=PX(t);return r===null?null:C2t(e,r,n)}function A2t(e,t,n,r){const i=PX(t);if(i===null||!RX(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=lk(d,n,r),p=$Ie({alt:"media",token:l});return h+p})[0]}function I2t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ode="prefixes",Mde="items";function k2t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Ode])for(const i of n[Ode]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new bu(t,s));r.prefixes.push(o)}if(n[Mde])for(const i of n[Mde]){const s=e._makeStorageReference(new bu(t,i.name));r.items.push(s)}return r}function R2t(e,t,n){const r=PX(n);return r===null?null:k2t(e,t,r)}class z6{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DX(e){if(!e)throw kX()}function N2t(e,t){function n(r,i){const s=zIe(e,i,t);return DX(s!==null),s}return n}function P2t(e,t){function n(r,i){const s=R2t(e,t,i);return DX(s!==null),s}return n}function D2t(e,t){function n(r,i){const s=zIe(e,i,t);return DX(s!==null),A2t(s,i,e.host,e._protocol)}return n}function OX(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=VCt():i=zCt():n.getStatus()===402?i=UCt(e.bucket):n.getStatus()===403?i=HCt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function VIe(e){const t=OX(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=BCt(e.path)),s.serverResponse=i.serverResponse,s}return n}function O2t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=lk(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new z6(a,u,P2t(e,t.bucket),l);return c.urlParams=s,c.errorHandler=OX(t),c}function M2t(e,t,n){const r=t.fullServerUrl(),i=lk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new z6(i,s,D2t(e,n),o);return a.errorHandler=VIe(t),a}function $2t(e,t){const n=t.fullServerUrl(),r=lk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new z6(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=VIe(t),a}function L2t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function F2t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=L2t(null,t)),r}function j2t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let C=0;C<2;C++)E=E+Math.random().toString().slice(2);return E}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=F2t(t,r,i),c=I2t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=x0.getBlob(f,r,d);if(h===null)throw XCt();const p={name:l.fullPath},g=lk(s,e.host,e._protocol),y="POST",b=e.maxUploadRetryTime,_=new z6(g,y,N2t(e,n),b);return _.urlParams=p,_.headers=o,_.body=h.uploadData(),_.errorHandler=OX(t),_}class B2t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=B1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=B1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=B1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw YT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw YT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw YT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw YT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw YT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class U2t extends B2t{initXhr(){this.xhr_.responseType="text"}}function V6(){return new U2t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(t,n){this._service=t,n instanceof bu?this._location=n:this._location=bu.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new db(t,n)}get root(){const t=new bu(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BIe(this._location.path)}get storage(){return this._service}get parent(){const t=w2t(this._location.path);if(t===null)return null;const n=new bu(this._location.bucket,t);return new db(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw ZCt(t)}}function z2t(e,t,n){e._throwIfRoot("uploadBytes");const r=j2t(e.storage,e._location,UIe(),new x0(t,!0),n);return e.storage.makeRequestWithTokens(r,V6).then(i=>({metadata:i,ref:e}))}function V2t(e){const t={prefixes:[],items:[]};return HIe(e,t).then(()=>t)}async function HIe(e,t,n){const i=await H2t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await HIe(e,t,i.nextPageToken)}function H2t(e,t){t!=null&&typeof t.maxResults=="number"&&tV("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=O2t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,V6)}function q2t(e){e._throwIfRoot("getDownloadURL");const t=M2t(e.storage,e._location,UIe());return e.storage.makeRequestWithTokens(t,V6).then(n=>{if(n===null)throw QCt();return n})}function W2t(e){e._throwIfRoot("deleteObject");const t=$2t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,V6)}function G2t(e,t){const n=E2t(e._location.path,t),r=new bu(e._location.bucket,n);return new db(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2t(e){return/^[A-Za-z]+:\/\//.test(e)}function K2t(e,t){return new db(e,t)}function qIe(e,t){if(e instanceof MX){const n=e;if(n._bucket==null)throw KCt();const r=new db(n,n._bucket);return t!=null?qIe(r,t):r}else return t!==void 0?G2t(e,t):e}function X2t(e,t){if(t&&Y2t(t)){if(e instanceof MX)return K2t(e,t);throw eV("To use ref(service, url), the first argument must be a Storage instance.")}else return qIe(e,t)}function $de(e,t){const n=t==null?void 0:t[OIe];return n==null?null:bu.makeFromBucketSpec(n,e)}function Q2t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:uxt(i,e.app.options.projectId))}class MX{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=DIe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FCt,this._maxUploadRetryTime=jCt,this._requests=new Set,i!=null?this._bucket=bu.makeFromBucketSpec(i,this._host):this._bucket=$de(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=bu.makeFromBucketSpec(this._url,t):this._bucket=$de(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){tV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){tV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new db(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new e2t(MIe());{const o=f2t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Lde="@firebase/storage",Fde="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIe="storage";function iB(e,t,n){return e=Di(e),z2t(e,t,n)}function KT(e){return e=Di(e),V2t(e)}function sB(e){return e=Di(e),q2t(e)}function jde(e){return e=Di(e),W2t(e)}function Uc(e,t){return e=Di(e),X2t(e,t)}function J2t(e=bX(),t){e=Di(e);const r=CS(e,WIe).getImmediate({identifier:t}),i=axt("storage");return i&&Z2t(r,...i),r}function Z2t(e,t,n,r={}){Q2t(e,t,n,r)}function eAt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new MX(n,r,i,t,Zb)}function tAt(){ng(new rp(WIe,eAt,"PUBLIC").setMultipleInstances(!0)),md(Lde,Fde,""),md(Lde,Fde,"esm2017")}tAt();var Bde=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var U1,GIe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(A,k){function N(){}N.prototype=k.prototype,A.D=k.prototype,A.prototype=new N,A.prototype.constructor=A,A.C=function(P,D,j){for(var M=Array(arguments.length-2),B=2;B<arguments.length;B++)M[B-2]=arguments[B];return k.prototype[D].apply(P,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,k,N){N||(N=0);var P=Array(16);if(typeof k=="string")for(var D=0;16>D;++D)P[D]=k.charCodeAt(N++)|k.charCodeAt(N++)<<8|k.charCodeAt(N++)<<16|k.charCodeAt(N++)<<24;else for(D=0;16>D;++D)P[D]=k[N++]|k[N++]<<8|k[N++]<<16|k[N++]<<24;k=A.g[0],N=A.g[1],D=A.g[2];var j=A.g[3],M=k+(j^N&(D^j))+P[0]+3614090360&4294967295;k=N+(M<<7&4294967295|M>>>25),M=j+(D^k&(N^D))+P[1]+3905402710&4294967295,j=k+(M<<12&4294967295|M>>>20),M=D+(N^j&(k^N))+P[2]+606105819&4294967295,D=j+(M<<17&4294967295|M>>>15),M=N+(k^D&(j^k))+P[3]+3250441966&4294967295,N=D+(M<<22&4294967295|M>>>10),M=k+(j^N&(D^j))+P[4]+4118548399&4294967295,k=N+(M<<7&4294967295|M>>>25),M=j+(D^k&(N^D))+P[5]+1200080426&4294967295,j=k+(M<<12&4294967295|M>>>20),M=D+(N^j&(k^N))+P[6]+2821735955&4294967295,D=j+(M<<17&4294967295|M>>>15),M=N+(k^D&(j^k))+P[7]+4249261313&4294967295,N=D+(M<<22&4294967295|M>>>10),M=k+(j^N&(D^j))+P[8]+1770035416&4294967295,k=N+(M<<7&4294967295|M>>>25),M=j+(D^k&(N^D))+P[9]+2336552879&4294967295,j=k+(M<<12&4294967295|M>>>20),M=D+(N^j&(k^N))+P[10]+4294925233&4294967295,D=j+(M<<17&4294967295|M>>>15),M=N+(k^D&(j^k))+P[11]+2304563134&4294967295,N=D+(M<<22&4294967295|M>>>10),M=k+(j^N&(D^j))+P[12]+1804603682&4294967295,k=N+(M<<7&4294967295|M>>>25),M=j+(D^k&(N^D))+P[13]+4254626195&4294967295,j=k+(M<<12&4294967295|M>>>20),M=D+(N^j&(k^N))+P[14]+2792965006&4294967295,D=j+(M<<17&4294967295|M>>>15),M=N+(k^D&(j^k))+P[15]+1236535329&4294967295,N=D+(M<<22&4294967295|M>>>10),M=k+(D^j&(N^D))+P[1]+4129170786&4294967295,k=N+(M<<5&4294967295|M>>>27),M=j+(N^D&(k^N))+P[6]+3225465664&4294967295,j=k+(M<<9&4294967295|M>>>23),M=D+(k^N&(j^k))+P[11]+643717713&4294967295,D=j+(M<<14&4294967295|M>>>18),M=N+(j^k&(D^j))+P[0]+3921069994&4294967295,N=D+(M<<20&4294967295|M>>>12),M=k+(D^j&(N^D))+P[5]+3593408605&4294967295,k=N+(M<<5&4294967295|M>>>27),M=j+(N^D&(k^N))+P[10]+38016083&4294967295,j=k+(M<<9&4294967295|M>>>23),M=D+(k^N&(j^k))+P[15]+3634488961&4294967295,D=j+(M<<14&4294967295|M>>>18),M=N+(j^k&(D^j))+P[4]+3889429448&4294967295,N=D+(M<<20&4294967295|M>>>12),M=k+(D^j&(N^D))+P[9]+568446438&4294967295,k=N+(M<<5&4294967295|M>>>27),M=j+(N^D&(k^N))+P[14]+3275163606&4294967295,j=k+(M<<9&4294967295|M>>>23),M=D+(k^N&(j^k))+P[3]+4107603335&4294967295,D=j+(M<<14&4294967295|M>>>18),M=N+(j^k&(D^j))+P[8]+1163531501&4294967295,N=D+(M<<20&4294967295|M>>>12),M=k+(D^j&(N^D))+P[13]+2850285829&4294967295,k=N+(M<<5&4294967295|M>>>27),M=j+(N^D&(k^N))+P[2]+4243563512&4294967295,j=k+(M<<9&4294967295|M>>>23),M=D+(k^N&(j^k))+P[7]+1735328473&4294967295,D=j+(M<<14&4294967295|M>>>18),M=N+(j^k&(D^j))+P[12]+2368359562&4294967295,N=D+(M<<20&4294967295|M>>>12),M=k+(N^D^j)+P[5]+4294588738&4294967295,k=N+(M<<4&4294967295|M>>>28),M=j+(k^N^D)+P[8]+2272392833&4294967295,j=k+(M<<11&4294967295|M>>>21),M=D+(j^k^N)+P[11]+1839030562&4294967295,D=j+(M<<16&4294967295|M>>>16),M=N+(D^j^k)+P[14]+4259657740&4294967295,N=D+(M<<23&4294967295|M>>>9),M=k+(N^D^j)+P[1]+2763975236&4294967295,k=N+(M<<4&4294967295|M>>>28),M=j+(k^N^D)+P[4]+1272893353&4294967295,j=k+(M<<11&4294967295|M>>>21),M=D+(j^k^N)+P[7]+4139469664&4294967295,D=j+(M<<16&4294967295|M>>>16),M=N+(D^j^k)+P[10]+3200236656&4294967295,N=D+(M<<23&4294967295|M>>>9),M=k+(N^D^j)+P[13]+681279174&4294967295,k=N+(M<<4&4294967295|M>>>28),M=j+(k^N^D)+P[0]+3936430074&4294967295,j=k+(M<<11&4294967295|M>>>21),M=D+(j^k^N)+P[3]+3572445317&4294967295,D=j+(M<<16&4294967295|M>>>16),M=N+(D^j^k)+P[6]+76029189&4294967295,N=D+(M<<23&4294967295|M>>>9),M=k+(N^D^j)+P[9]+3654602809&4294967295,k=N+(M<<4&4294967295|M>>>28),M=j+(k^N^D)+P[12]+3873151461&4294967295,j=k+(M<<11&4294967295|M>>>21),M=D+(j^k^N)+P[15]+530742520&4294967295,D=j+(M<<16&4294967295|M>>>16),M=N+(D^j^k)+P[2]+3299628645&4294967295,N=D+(M<<23&4294967295|M>>>9),M=k+(D^(N|~j))+P[0]+4096336452&4294967295,k=N+(M<<6&4294967295|M>>>26),M=j+(N^(k|~D))+P[7]+1126891415&4294967295,j=k+(M<<10&4294967295|M>>>22),M=D+(k^(j|~N))+P[14]+2878612391&4294967295,D=j+(M<<15&4294967295|M>>>17),M=N+(j^(D|~k))+P[5]+4237533241&4294967295,N=D+(M<<21&4294967295|M>>>11),M=k+(D^(N|~j))+P[12]+1700485571&4294967295,k=N+(M<<6&4294967295|M>>>26),M=j+(N^(k|~D))+P[3]+2399980690&4294967295,j=k+(M<<10&4294967295|M>>>22),M=D+(k^(j|~N))+P[10]+4293915773&4294967295,D=j+(M<<15&4294967295|M>>>17),M=N+(j^(D|~k))+P[1]+2240044497&4294967295,N=D+(M<<21&4294967295|M>>>11),M=k+(D^(N|~j))+P[8]+1873313359&4294967295,k=N+(M<<6&4294967295|M>>>26),M=j+(N^(k|~D))+P[15]+4264355552&4294967295,j=k+(M<<10&4294967295|M>>>22),M=D+(k^(j|~N))+P[6]+2734768916&4294967295,D=j+(M<<15&4294967295|M>>>17),M=N+(j^(D|~k))+P[13]+1309151649&4294967295,N=D+(M<<21&4294967295|M>>>11),M=k+(D^(N|~j))+P[4]+4149444226&4294967295,k=N+(M<<6&4294967295|M>>>26),M=j+(N^(k|~D))+P[11]+3174756917&4294967295,j=k+(M<<10&4294967295|M>>>22),M=D+(k^(j|~N))+P[2]+718787259&4294967295,D=j+(M<<15&4294967295|M>>>17),M=N+(j^(D|~k))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+k&4294967295,A.g[1]=A.g[1]+(D+(M<<21&4294967295|M>>>11))&4294967295,A.g[2]=A.g[2]+D&4294967295,A.g[3]=A.g[3]+j&4294967295}r.prototype.u=function(A,k){k===void 0&&(k=A.length);for(var N=k-this.blockSize,P=this.B,D=this.h,j=0;j<k;){if(D==0)for(;j<=N;)i(this,A,j),j+=this.blockSize;if(typeof A=="string"){for(;j<k;)if(P[D++]=A.charCodeAt(j++),D==this.blockSize){i(this,P),D=0;break}}else for(;j<k;)if(P[D++]=A[j++],D==this.blockSize){i(this,P),D=0;break}}this.h=D,this.o+=k},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var k=1;k<A.length-8;++k)A[k]=0;var N=8*this.o;for(k=A.length-8;k<A.length;++k)A[k]=N&255,N/=256;for(this.u(A),A=Array(16),k=N=0;4>k;++k)for(var P=0;32>P;P+=8)A[N++]=this.g[k]>>>P&255;return A};function s(A,k){var N=a;return Object.prototype.hasOwnProperty.call(N,A)?N[A]:N[A]=k(A)}function o(A,k){this.h=k;for(var N=[],P=!0,D=A.length-1;0<=D;D--){var j=A[D]|0;P&&j==k||(N[D]=j,P=!1)}this.g=N}var a={};function u(A){return-128<=A&&128>A?s(A,function(k){return new o([k|0],0>k?-1:0)}):new o([A|0],0>A?-1:0)}function l(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return y(l(-A));for(var k=[],N=1,P=0;A>=N;P++)k[P]=A/N|0,N*=4294967296;return new o(k,0)}function c(A,k){if(A.length==0)throw Error("number format error: empty string");if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(A.charAt(0)=="-")return y(c(A.substring(1),k));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=l(Math.pow(k,8)),P=f,D=0;D<A.length;D+=8){var j=Math.min(8,A.length-D),M=parseInt(A.substring(D,D+j),k);8>j?(j=l(Math.pow(k,j)),P=P.j(j).add(l(M))):(P=P.j(N),P=P.add(l(M)))}return P}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(g(this))return-y(this).m();for(var A=0,k=1,N=0;N<this.g.length;N++){var P=this.i(N);A+=(0<=P?P:4294967296+P)*k,k*=4294967296}return A},e.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(p(this))return"0";if(g(this))return"-"+y(this).toString(A);for(var k=l(Math.pow(A,6)),N=this,P="";;){var D=C(N,k).g;N=b(N,D.j(k));var j=((0<N.g.length?N.g[0]:N.h)>>>0).toString(A);if(N=D,p(N))return j+P;for(;6>j.length;)j="0"+j;P=j+P}},e.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function p(A){if(A.h!=0)return!1;for(var k=0;k<A.g.length;k++)if(A.g[k]!=0)return!1;return!0}function g(A){return A.h==-1}e.l=function(A){return A=b(this,A),g(A)?-1:p(A)?0:1};function y(A){for(var k=A.g.length,N=[],P=0;P<k;P++)N[P]=~A.g[P];return new o(N,~A.h).add(d)}e.abs=function(){return g(this)?y(this):this},e.add=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],P=0,D=0;D<=k;D++){var j=P+(this.i(D)&65535)+(A.i(D)&65535),M=(j>>>16)+(this.i(D)>>>16)+(A.i(D)>>>16);P=M>>>16,j&=65535,M&=65535,N[D]=M<<16|j}return new o(N,N[N.length-1]&-2147483648?-1:0)};function b(A,k){return A.add(y(k))}e.j=function(A){if(p(this)||p(A))return f;if(g(this))return g(A)?y(this).j(y(A)):y(y(this).j(A));if(g(A))return y(this.j(y(A)));if(0>this.l(h)&&0>A.l(h))return l(this.m()*A.m());for(var k=this.g.length+A.g.length,N=[],P=0;P<2*k;P++)N[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<A.g.length;D++){var j=this.i(P)>>>16,M=this.i(P)&65535,B=A.i(D)>>>16,V=A.i(D)&65535;N[2*P+2*D]+=M*V,_(N,2*P+2*D),N[2*P+2*D+1]+=j*V,_(N,2*P+2*D+1),N[2*P+2*D+1]+=M*B,_(N,2*P+2*D+1),N[2*P+2*D+2]+=j*B,_(N,2*P+2*D+2)}for(P=0;P<k;P++)N[P]=N[2*P+1]<<16|N[2*P];for(P=k;P<2*k;P++)N[P]=0;return new o(N,0)};function _(A,k){for(;(A[k]&65535)!=A[k];)A[k+1]+=A[k]>>>16,A[k]&=65535,k++}function E(A,k){this.g=A,this.h=k}function C(A,k){if(p(k))throw Error("division by zero");if(p(A))return new E(f,f);if(g(A))return k=C(y(A),k),new E(y(k.g),y(k.h));if(g(k))return k=C(A,y(k)),new E(y(k.g),k.h);if(30<A.g.length){if(g(A)||g(k))throw Error("slowDivide_ only works with positive integers.");for(var N=d,P=k;0>=P.l(A);)N=x(N),P=x(P);var D=T(N,1),j=T(P,1);for(P=T(P,2),N=T(N,2);!p(P);){var M=j.add(P);0>=M.l(A)&&(D=D.add(N),j=M),P=T(P,1),N=T(N,1)}return k=b(A,D.j(k)),new E(D,k)}for(D=f;0<=A.l(k);){for(N=Math.max(1,Math.floor(A.m()/k.m())),P=Math.ceil(Math.log(N)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),j=l(N),M=j.j(k);g(M)||0<M.l(A);)N-=P,j=l(N),M=j.j(k);p(j)&&(j=d),D=D.add(j),A=b(A,M)}return new E(D,A)}e.A=function(A){return C(this,A).h},e.and=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],P=0;P<k;P++)N[P]=this.i(P)&A.i(P);return new o(N,this.h&A.h)},e.or=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],P=0;P<k;P++)N[P]=this.i(P)|A.i(P);return new o(N,this.h|A.h)},e.xor=function(A){for(var k=Math.max(this.g.length,A.g.length),N=[],P=0;P<k;P++)N[P]=this.i(P)^A.i(P);return new o(N,this.h^A.h)};function x(A){for(var k=A.g.length+1,N=[],P=0;P<k;P++)N[P]=A.i(P)<<1|A.i(P-1)>>>31;return new o(N,A.h)}function T(A,k){var N=k>>5;k%=32;for(var P=A.g.length-N,D=[],j=0;j<P;j++)D[j]=0<k?A.i(j+N)>>>k|A.i(j+N+1)<<32-k:A.i(j+N);return new o(D,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GIe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,U1=o}).apply(typeof Bde<"u"?Bde:typeof self<"u"?self:typeof window<"u"?window:{});var kP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YIe,KIe,zC,XIe,BD,nV,QIe,JIe,ZIe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(I,H,J){return I==Array.prototype||I==Object.prototype||(I[H]=J.value),I};function n(I){I=[typeof globalThis=="object"&&globalThis,I,typeof window=="object"&&window,typeof self=="object"&&self,typeof kP=="object"&&kP];for(var H=0;H<I.length;++H){var J=I[H];if(J&&J.Math==Math)return J}throw Error("Cannot find global object")}var r=n(this);function i(I,H){if(H)e:{var J=r;I=I.split(".");for(var ie=0;ie<I.length-1;ie++){var Oe=I[ie];if(!(Oe in J))break e;J=J[Oe]}I=I[I.length-1],ie=J[I],H=H(ie),H!=ie&&H!=null&&t(J,I,{configurable:!0,writable:!0,value:H})}}function s(I,H){I instanceof String&&(I+="");var J=0,ie=!1,Oe={next:function(){if(!ie&&J<I.length){var Ge=J++;return{value:H(Ge,I[Ge]),done:!1}}return ie=!0,{done:!0,value:void 0}}};return Oe[Symbol.iterator]=function(){return Oe},Oe}i("Array.prototype.values",function(I){return I||function(){return s(this,function(H,J){return J})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(I){var H=typeof I;return H=H!="object"?H:I?Array.isArray(I)?"array":H:"null",H=="array"||H=="object"&&typeof I.length=="number"}function l(I){var H=typeof I;return H=="object"&&I!=null||H=="function"}function c(I,H,J){return I.call.apply(I.bind,arguments)}function f(I,H,J){if(!I)throw Error();if(2<arguments.length){var ie=Array.prototype.slice.call(arguments,2);return function(){var Oe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Oe,ie),I.apply(H,Oe)}}return function(){return I.apply(H,arguments)}}function d(I,H,J){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(I,H){var J=Array.prototype.slice.call(arguments,1);return function(){var ie=J.slice();return ie.push.apply(ie,arguments),I.apply(this,ie)}}function p(I,H){function J(){}J.prototype=H.prototype,I.aa=H.prototype,I.prototype=new J,I.prototype.constructor=I,I.Qb=function(ie,Oe,Ge){for(var It=Array(arguments.length-2),ai=2;ai<arguments.length;ai++)It[ai-2]=arguments[ai];return H.prototype[Oe].apply(ie,It)}}function g(I){const H=I.length;if(0<H){const J=Array(H);for(let ie=0;ie<H;ie++)J[ie]=I[ie];return J}return[]}function y(I,H){for(let J=1;J<arguments.length;J++){const ie=arguments[J];if(u(ie)){const Oe=I.length||0,Ge=ie.length||0;I.length=Oe+Ge;for(let It=0;It<Ge;It++)I[Oe+It]=ie[It]}else I.push(ie)}}class b{constructor(H,J){this.i=H,this.j=J,this.h=0,this.g=null}get(){let H;return 0<this.h?(this.h--,H=this.g,this.g=H.next,H.next=null):H=this.i(),H}}function _(I){return/^[\s\xa0]*$/.test(I)}function E(){var I=a.navigator;return I&&(I=I.userAgent)?I:""}function C(I){return C[" "](I),I}C[" "]=function(){};var x=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function T(I,H,J){for(const ie in I)H.call(J,I[ie],ie,I)}function A(I,H){for(const J in I)H.call(void 0,I[J],J,I)}function k(I){const H={};for(const J in I)H[J]=I[J];return H}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(I,H){let J,ie;for(let Oe=1;Oe<arguments.length;Oe++){ie=arguments[Oe];for(J in ie)I[J]=ie[J];for(let Ge=0;Ge<N.length;Ge++)J=N[Ge],Object.prototype.hasOwnProperty.call(ie,J)&&(I[J]=ie[J])}}function D(I){var H=1;I=I.split(":");const J=[];for(;0<H&&I.length;)J.push(I.shift()),H--;return I.length&&J.push(I.join(":")),J}function j(I){a.setTimeout(()=>{throw I},0)}function M(){var I=Q;let H=null;return I.g&&(H=I.g,I.g=I.g.next,I.g||(I.h=null),H.next=null),H}class B{constructor(){this.h=this.g=null}add(H,J){const ie=V.get();ie.set(H,J),this.h?this.h.next=ie:this.g=ie,this.h=ie}}var V=new b(()=>new z,I=>I.reset());class z{constructor(){this.next=this.g=this.h=null}set(H,J){this.h=H,this.g=J,this.next=null}reset(){this.next=this.g=this.h=null}}let G,Y=!1,Q=new B,L=()=>{const I=a.Promise.resolve(void 0);G=()=>{I.then(U)}};var U=()=>{for(var I;I=M();){try{I.h.call(I.g)}catch(J){j(J)}var H=V;H.j(I),100>H.h&&(H.h++,I.next=H.g,H.g=I)}Y=!1};function K(){this.s=this.s,this.C=this.C}K.prototype.s=!1,K.prototype.ma=function(){this.s||(this.s=!0,this.N())},K.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(I,H){this.type=I,this.g=this.target=H,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var X=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var I=!1,H=Object.defineProperty({},"passive",{get:function(){I=!0}});try{const J=()=>{};a.addEventListener("test",J,H),a.removeEventListener("test",J,H)}catch{}return I}();function Z(I,H){if(q.call(this,I?I.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,I){var J=this.type=I.type,ie=I.changedTouches&&I.changedTouches.length?I.changedTouches[0]:null;if(this.target=I.target||I.srcElement,this.g=H,H=I.relatedTarget){if(x){e:{try{C(H.nodeName);var Oe=!0;break e}catch{}Oe=!1}Oe||(H=null)}}else J=="mouseover"?H=I.fromElement:J=="mouseout"&&(H=I.toElement);this.relatedTarget=H,ie?(this.clientX=ie.clientX!==void 0?ie.clientX:ie.pageX,this.clientY=ie.clientY!==void 0?ie.clientY:ie.pageY,this.screenX=ie.screenX||0,this.screenY=ie.screenY||0):(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0),this.button=I.button,this.key=I.key||"",this.ctrlKey=I.ctrlKey,this.altKey=I.altKey,this.shiftKey=I.shiftKey,this.metaKey=I.metaKey,this.pointerId=I.pointerId||0,this.pointerType=typeof I.pointerType=="string"?I.pointerType:ae[I.pointerType]||"",this.state=I.state,this.i=I,I.defaultPrevented&&Z.aa.h.call(this)}}p(Z,q);var ae={2:"touch",3:"pen",4:"mouse"};Z.prototype.h=function(){Z.aa.h.call(this);var I=this.i;I.preventDefault?I.preventDefault():I.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),ge=0;function be(I,H,J,ie,Oe){this.listener=I,this.proxy=null,this.src=H,this.type=J,this.capture=!!ie,this.ha=Oe,this.key=++ge,this.da=this.fa=!1}function Ce(I){I.da=!0,I.listener=null,I.proxy=null,I.src=null,I.ha=null}function oe(I){this.src=I,this.g={},this.h=0}oe.prototype.add=function(I,H,J,ie,Oe){var Ge=I.toString();I=this.g[Ge],I||(I=this.g[Ge]=[],this.h++);var It=xe(I,H,ie,Oe);return-1<It?(H=I[It],J||(H.fa=!1)):(H=new be(H,this.src,Ge,!!ie,Oe),H.fa=J,I.push(H)),H};function re(I,H){var J=H.type;if(J in I.g){var ie=I.g[J],Oe=Array.prototype.indexOf.call(ie,H,void 0),Ge;(Ge=0<=Oe)&&Array.prototype.splice.call(ie,Oe,1),Ge&&(Ce(H),I.g[J].length==0&&(delete I.g[J],I.h--))}}function xe(I,H,J,ie){for(var Oe=0;Oe<I.length;++Oe){var Ge=I[Oe];if(!Ge.da&&Ge.listener==H&&Ge.capture==!!J&&Ge.ha==ie)return Oe}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),Ke={};function Qe(I,H,J,ie,Oe){if(Array.isArray(H)){for(var Ge=0;Ge<H.length;Ge++)Qe(I,H[Ge],J,ie,Oe);return null}return J=Ot(J),I&&I[he]?I.K(H,J,l(ie)?!!ie.capture:!!ie,Oe):ke(I,H,J,!1,ie,Oe)}function ke(I,H,J,ie,Oe,Ge){if(!H)throw Error("Invalid event type");var It=l(Oe)?!!Oe.capture:!!Oe,ai=Ie(I);if(ai||(I[Re]=ai=new oe(I)),J=ai.add(H,J,ie,It,Ge),J.proxy)return J;if(ie=Ue(),J.proxy=ie,ie.src=I,ie.listener=J,I.addEventListener)X||(Oe=It),Oe===void 0&&(Oe=!1),I.addEventListener(H.toString(),ie,Oe);else if(I.attachEvent)I.attachEvent(Rt(H.toString()),ie);else if(I.addListener&&I.removeListener)I.addListener(ie);else throw Error("addEventListener and attachEvent are unavailable.");return J}function Ue(){function I(J){return H.call(I.src,I.listener,J)}const H=st;return I}function rt(I,H,J,ie,Oe){if(Array.isArray(H))for(var Ge=0;Ge<H.length;Ge++)rt(I,H[Ge],J,ie,Oe);else ie=l(ie)?!!ie.capture:!!ie,J=Ot(J),I&&I[he]?(I=I.i,H=String(H).toString(),H in I.g&&(Ge=I.g[H],J=xe(Ge,J,ie,Oe),-1<J&&(Ce(Ge[J]),Array.prototype.splice.call(Ge,J,1),Ge.length==0&&(delete I.g[H],I.h--)))):I&&(I=Ie(I))&&(H=I.g[H.toString()],I=-1,H&&(I=xe(H,J,ie,Oe)),(J=-1<I?H[I]:null)&&ft(J))}function ft(I){if(typeof I!="number"&&I&&!I.da){var H=I.src;if(H&&H[he])re(H.i,I);else{var J=I.type,ie=I.proxy;H.removeEventListener?H.removeEventListener(J,ie,I.capture):H.detachEvent?H.detachEvent(Rt(J),ie):H.addListener&&H.removeListener&&H.removeListener(ie),(J=Ie(H))?(re(J,I),J.h==0&&(J.src=null,H[Re]=null)):Ce(I)}}}function Rt(I){return I in Ke?Ke[I]:Ke[I]="on"+I}function st(I,H){if(I.da)I=!0;else{H=new Z(H,this);var J=I.listener,ie=I.ha||I.src;I.fa&&ft(I),I=J.call(ie,H)}return I}function Ie(I){return I=I[Re],I instanceof oe?I:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(I){return typeof I=="function"?I:(I[kt]||(I[kt]=function(H){return I.handleEvent(H)}),I[kt])}function Ne(){K.call(this),this.i=new oe(this),this.M=this,this.F=null}p(Ne,K),Ne.prototype[he]=!0,Ne.prototype.removeEventListener=function(I,H,J,ie){rt(this,I,H,J,ie)};function ze(I,H){var J,ie=I.F;if(ie)for(J=[];ie;ie=ie.F)J.push(ie);if(I=I.M,ie=H.type||H,typeof H=="string")H=new q(H,I);else if(H instanceof q)H.target=H.target||I;else{var Oe=H;H=new q(ie,I),P(H,Oe)}if(Oe=!0,J)for(var Ge=J.length-1;0<=Ge;Ge--){var It=H.g=J[Ge];Oe=ot(It,ie,!0,H)&&Oe}if(It=H.g=I,Oe=ot(It,ie,!0,H)&&Oe,Oe=ot(It,ie,!1,H)&&Oe,J)for(Ge=0;Ge<J.length;Ge++)It=H.g=J[Ge],Oe=ot(It,ie,!1,H)&&Oe}Ne.prototype.N=function(){if(Ne.aa.N.call(this),this.i){var I=this.i,H;for(H in I.g){for(var J=I.g[H],ie=0;ie<J.length;ie++)Ce(J[ie]);delete I.g[H],I.h--}}this.F=null},Ne.prototype.K=function(I,H,J,ie){return this.i.add(String(I),H,!1,J,ie)},Ne.prototype.L=function(I,H,J,ie){return this.i.add(String(I),H,!0,J,ie)};function ot(I,H,J,ie){if(H=I.i.g[String(H)],!H)return!0;H=H.concat();for(var Oe=!0,Ge=0;Ge<H.length;++Ge){var It=H[Ge];if(It&&!It.da&&It.capture==J){var ai=It.listener,so=It.ha||It.src;It.fa&&re(I.i,It),Oe=ai.call(so,ie)!==!1&&Oe}}return Oe&&!ie.defaultPrevented}function St(I,H,J){if(typeof I=="function")J&&(I=d(I,J));else if(I&&typeof I.handleEvent=="function")I=d(I.handleEvent,I);else throw Error("Invalid listener argument");return 2147483647<Number(H)?-1:a.setTimeout(I,H||0)}function $t(I){I.g=St(()=>{I.g=null,I.i&&(I.i=!1,$t(I))},I.l);const H=I.h;I.h=null,I.m.apply(null,H)}class Vn extends K{constructor(H,J){super(),this.m=H,this.l=J,this.h=null,this.i=!1,this.g=null}j(H){this.h=arguments,this.g?this.i=!0:$t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yr(I){K.call(this),this.h=I,this.g={}}p(Yr,K);var tr=[];function vr(I){T(I.g,function(H,J){this.g.hasOwnProperty(J)&&ft(H)},I),I.g={}}Yr.prototype.N=function(){Yr.aa.N.call(this),vr(this)},Yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fn=a.JSON.stringify,Un=a.JSON.parse,ur=class{stringify(I){return a.JSON.stringify(I,void 0)}parse(I){return a.JSON.parse(I,void 0)}};function lr(){}lr.prototype.h=null;function Us(I){return I.h||(I.h=I.i())}function Si(){}var kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ii(){q.call(this,"d")}p(ii,q);function Mr(){q.call(this,"c")}p(Mr,q);var is={},Tc=null;function ba(){return Tc=Tc||new Ne}is.La="serverreachability";function Ol(I){q.call(this,is.La,I)}p(Ol,q);function Tr(I){const H=ba();ze(H,new Ol(H))}is.STAT_EVENT="statevent";function Ti(I,H){q.call(this,is.STAT_EVENT,I),this.stat=H}p(Ti,q);function $r(I){const H=ba();ze(H,new Ti(H,I))}is.Ma="timingevent";function xo(I,H){q.call(this,is.Ma,I),this.size=H}p(xo,q);function Cs(I,H){if(typeof I!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){I()},H)}function Ko(){this.g=!0}Ko.prototype.xa=function(){this.g=!1};function ye(I,H,J,ie,Oe,Ge){I.info(function(){if(I.g)if(Ge)for(var It="",ai=Ge.split("&"),so=0;so<ai.length;so++){var Ar=ai[so].split("=");if(1<Ar.length){var To=Ar[0];Ar=Ar[1];var Gs=To.split("_");It=2<=Gs.length&&Gs[1]=="type"?It+(To+"="+Ar+"&"):It+(To+"=redacted&")}}else It=null;else It=Ge;return"XMLHTTP REQ ("+ie+") [attempt "+Oe+"]: "+H+`
`+J+`
`+It})}function ce(I,H,J,ie,Oe,Ge,It){I.info(function(){return"XMLHTTP RESP ("+ie+") [ attempt "+Oe+"]: "+H+`
`+J+`
`+Ge+" "+It})}function _e(I,H,J,ie){I.info(function(){return"XMLHTTP TEXT ("+H+"): "+Be(I,J)+(ie?" "+ie:"")})}function je(I,H){I.info(function(){return"TIMEOUT: "+H})}Ko.prototype.info=function(){};function Be(I,H){if(!I.g)return H;if(!H)return null;try{var J=JSON.parse(H);if(J){for(I=0;I<J.length;I++)if(Array.isArray(J[I])){var ie=J[I];if(!(2>ie.length)){var Oe=ie[1];if(Array.isArray(Oe)&&!(1>Oe.length)){var Ge=Oe[0];if(Ge!="noop"&&Ge!="stop"&&Ge!="close")for(var It=1;It<Oe.length;It++)Oe[It]=""}}}}return Fn(J)}catch{return H}}var wt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},en;function Qn(){}p(Qn,lr),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},en=new Qn;function nr(I,H,J,ie){this.j=I,this.i=H,this.l=J,this.R=ie||1,this.U=new Yr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dn}function Dn(){this.i=null,this.g="",this.h=!1}var fr={},Lr={};function an(I,H,J){I.L=1,I.v=Jn(ut(H)),I.m=J,I.P=!0,dr(I,null)}function dr(I,H){I.F=Date.now(),On(I),I.A=ut(I.v);var J=I.A,ie=I.R;Array.isArray(ie)||(ie=[String(ie)]),qd(J.i,"t",ie),I.C=0,J=I.j.J,I.h=new Dn,I.g=uR(I.j,J?H:null,!I.m),0<I.O&&(I.M=new Vn(d(I.Y,I,I.g),I.O)),H=I.U,J=I.g,ie=I.ca;var Oe="readystatechange";Array.isArray(Oe)||(Oe&&(tr[0]=Oe.toString()),Oe=tr);for(var Ge=0;Ge<Oe.length;Ge++){var It=Qe(J,Oe[Ge],ie||H.handleEvent,!1,H.h||H);if(!It)break;H.g[It.key]=It}H=I.H?k(I.H):{},I.m?(I.u||(I.u="POST"),H["Content-Type"]="application/x-www-form-urlencoded",I.g.ea(I.A,I.u,I.m,H)):(I.u="GET",I.g.ea(I.A,I.u,null,H)),Tr(),ye(I.i,I.u,I.A,I.l,I.R,I.m)}nr.prototype.ca=function(I){I=I.target;const H=this.M;H&&Ci(I)==3?H.j():this.Y(I)},nr.prototype.Y=function(I){try{if(I==this.g)e:{const Gs=Ci(this.g);var H=this.g.Ba();const Rc=this.g.Z();if(!(3>Gs)&&(Gs!=3||this.g&&(this.h.h||this.g.oa()||io(this.g)))){this.J||Gs!=4||H==7||(H==8||0>=Rc?Tr(3):Tr(2)),ti(this);var J=this.g.Z();this.X=J;t:if(si(this)){var ie=io(this.g);I="";var Oe=ie.length,Ge=Ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){wi(this),Vs(this);var It="";break t}this.h.i=new a.TextDecoder}for(H=0;H<Oe;H++)this.h.h=!0,I+=this.h.i.decode(ie[H],{stream:!(Ge&&H==Oe-1)});ie.length=0,this.h.g+=I,this.C=0,It=this.h.g}else It=this.g.oa();if(this.o=J==200,ce(this.i,this.u,this.A,this.l,this.R,Gs,J),this.o){if(this.T&&!this.K){t:{if(this.g){var ai,so=this.g;if((ai=so.g?so.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ai)){var Ar=ai;break t}}Ar=null}if(J=Ar)_e(this.i,this.l,J,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hi(this,J);else{this.o=!1,this.s=3,$r(12),wi(this),Vs(this);break e}}if(this.P){J=!0;let $l;for(;!this.J&&this.C<It.length;)if($l=hr(this,It),$l==Lr){Gs==4&&(this.s=4,$r(14),J=!1),_e(this.i,this.l,null,"[Incomplete Response]");break}else if($l==fr){this.s=4,$r(15),_e(this.i,this.l,It,"[Invalid Chunk]"),J=!1;break}else _e(this.i,this.l,$l,null),Hi(this,$l);if(si(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gs!=4||It.length!=0||this.h.h||(this.s=1,$r(16),J=!1),this.o=this.o&&J,!J)_e(this.i,this.l,It,"[Invalid Chunked Response]"),wi(this),Vs(this);else if(0<It.length&&!this.W){this.W=!0;var To=this.j;To.g==this&&To.ba&&!To.M&&(To.j.info("Great, no buffering proxy detected. Bytes received: "+It.length),eT(To),To.M=!0,$r(11))}}else _e(this.i,this.l,It,null),Hi(this,It);Gs==4&&wi(this),this.o&&!this.J&&(Gs==4?T_(this.j,this):(this.o=!1,On(this)))}else kc(this.g),J==400&&0<It.indexOf("Unknown SID")?(this.s=3,$r(12)):(this.s=0,$r(13)),wi(this),Vs(this)}}}catch{}finally{}};function si(I){return I.g?I.u=="GET"&&I.L!=2&&I.j.Ca:!1}function hr(I,H){var J=I.C,ie=H.indexOf(`
`,J);return ie==-1?Lr:(J=Number(H.substring(J,ie)),isNaN(J)?fr:(ie+=1,ie+J>H.length?Lr:(H=H.slice(ie,ie+J),I.C=ie+J,H)))}nr.prototype.cancel=function(){this.J=!0,wi(this)};function On(I){I.S=Date.now()+I.I,zs(I,I.I)}function zs(I,H){if(I.B!=null)throw Error("WatchDog timer not null");I.B=Cs(d(I.ba,I),H)}function ti(I){I.B&&(a.clearTimeout(I.B),I.B=null)}nr.prototype.ba=function(){this.B=null;const I=Date.now();0<=I-this.S?(je(this.i,this.A),this.L!=2&&(Tr(),$r(17)),wi(this),this.s=2,Vs(this)):zs(this,this.S-I)};function Vs(I){I.j.G==0||I.J||T_(I.j,I)}function wi(I){ti(I);var H=I.M;H&&typeof H.ma=="function"&&H.ma(),I.M=null,vr(I.U),I.g&&(H=I.g,I.g=null,H.abort(),H.ma())}function Hi(I,H){try{var J=I.j;if(J.G!=0&&(J.g==I||fs(J.h,I))){if(!I.K&&fs(J.h,I)&&J.G==3){try{var ie=J.Da.g.parse(H)}catch{ie=null}if(Array.isArray(ie)&&ie.length==3){var Oe=ie;if(Oe[0]==0){e:if(!J.u){if(J.g)if(J.g.F+3e3<I.F)S_(J),Rf(J);else break e;x_(J),$r(18)}}else J.za=Oe[1],0<J.za-J.T&&37500>Oe[2]&&J.F&&J.v==0&&!J.C&&(J.C=Cs(d(J.Za,J),6e3));if(1>=Mu(J.h)&&J.ca){try{J.ca()}catch{}J.ca=void 0}}else Lp(J,11)}else if((I.K||J.g==I)&&S_(J),!_(H))for(Oe=J.Da.g.parse(H),H=0;H<Oe.length;H++){let Ar=Oe[H];if(J.T=Ar[0],Ar=Ar[1],J.G==2)if(Ar[0]=="c"){J.K=Ar[1],J.ia=Ar[2];const To=Ar[3];To!=null&&(J.la=To,J.j.info("VER="+J.la));const Gs=Ar[4];Gs!=null&&(J.Aa=Gs,J.j.info("SVER="+J.Aa));const Rc=Ar[5];Rc!=null&&typeof Rc=="number"&&0<Rc&&(ie=1.5*Rc,J.L=ie,J.j.info("backChannelRequestTimeoutMs_="+ie)),ie=J;const $l=I.g;if($l){const wv=$l.g?$l.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wv){var Ge=ie.h;Ge.g||wv.indexOf("spdy")==-1&&wv.indexOf("quic")==-1&&wv.indexOf("h2")==-1||(Ge.j=Ge.l,Ge.g=new Set,Ge.h&&(te(Ge,Ge.h),Ge.h=null))}if(ie.D){const A_=$l.g?$l.g.getResponseHeader("X-HTTP-Session-Id"):null;A_&&(ie.ya=A_,Qt(ie.I,ie.D,A_))}}J.G=3,J.l&&J.l.ua(),J.ba&&(J.R=Date.now()-I.F,J.j.info("Handshake RTT: "+J.R+"ms")),ie=J;var It=I;if(ie.qa=aR(ie,ie.J?ie.ia:null,ie.W),It.K){ve(ie.h,It);var ai=It,so=ie.L;so&&(ai.I=so),ai.B&&(ti(ai),On(ai)),ie.g=It}else _v(ie);0<J.i.length&&Gd(J)}else Ar[0]!="stop"&&Ar[0]!="close"||Lp(J,7);else J.G==3&&(Ar[0]=="stop"||Ar[0]=="close"?Ar[0]=="stop"?Lp(J,7):Ws(J):Ar[0]!="noop"&&J.l&&J.l.ta(Ar),J.v=0)}}Tr(4)}catch{}}var no=class{constructor(I,H){this.g=I,this.map=H}};function Hs(I){this.l=I||10,a.PerformanceNavigationTiming?(I=a.performance.getEntriesByType("navigation"),I=0<I.length&&(I[0].nextHopProtocol=="hq"||I[0].nextHopProtocol=="h2")):I=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=I?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function oi(I){return I.h?!0:I.g?I.g.size>=I.j:!1}function Mu(I){return I.h?1:I.g?I.g.size:0}function fs(I,H){return I.h?I.h==H:I.g?I.g.has(H):!1}function te(I,H){I.g?I.g.add(H):I.h=H}function ve(I,H){I.h&&I.h==H?I.h=null:I.g&&I.g.has(H)&&I.g.delete(H)}Hs.prototype.cancel=function(){if(this.i=ue(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const I of this.g.values())I.cancel();this.g.clear()}};function ue(I){if(I.h!=null)return I.i.concat(I.h.D);if(I.g!=null&&I.g.size!==0){let H=I.i;for(const J of I.g.values())H=H.concat(J.D);return H}return g(I.i)}function Te(I){if(I.V&&typeof I.V=="function")return I.V();if(typeof Map<"u"&&I instanceof Map||typeof Set<"u"&&I instanceof Set)return Array.from(I.values());if(typeof I=="string")return I.split("");if(u(I)){for(var H=[],J=I.length,ie=0;ie<J;ie++)H.push(I[ie]);return H}H=[],J=0;for(ie in I)H[J++]=I[ie];return H}function Pe(I){if(I.na&&typeof I.na=="function")return I.na();if(!I.V||typeof I.V!="function"){if(typeof Map<"u"&&I instanceof Map)return Array.from(I.keys());if(!(typeof Set<"u"&&I instanceof Set)){if(u(I)||typeof I=="string"){var H=[];I=I.length;for(var J=0;J<I;J++)H.push(J);return H}H=[],J=0;for(const ie in I)H[J++]=ie;return H}}}function Se(I,H){if(I.forEach&&typeof I.forEach=="function")I.forEach(H,void 0);else if(u(I)||typeof I=="string")Array.prototype.forEach.call(I,H,void 0);else for(var J=Pe(I),ie=Te(I),Oe=ie.length,Ge=0;Ge<Oe;Ge++)H.call(void 0,ie[Ge],J&&J[Ge],I)}var Xe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function at(I,H){if(I){I=I.split("&");for(var J=0;J<I.length;J++){var ie=I[J].indexOf("="),Oe=null;if(0<=ie){var Ge=I[J].substring(0,ie);Oe=I[J].substring(ie+1)}else Ge=I[J];H(Ge,Oe?decodeURIComponent(Oe.replace(/\+/g," ")):"")}}}function lt(I){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,I instanceof lt){this.h=I.h,_t(this,I.j),this.o=I.o,this.g=I.g,Lt(this,I.s),this.l=I.l;var H=I.i,J=new Xo;J.i=H.i,H.g&&(J.g=new Map(H.g),J.h=H.h),pn(this,J),this.m=I.m}else I&&(H=String(I).match(Xe))?(this.h=!1,_t(this,H[1]||"",!0),this.o=Zt(H[2]||""),this.g=Zt(H[3]||"",!0),Lt(this,H[4]),this.l=Zt(H[5]||"",!0),pn(this,H[6]||"",!0),this.m=Zt(H[7]||"")):(this.h=!1,this.i=new Xo(null,this.h))}lt.prototype.toString=function(){var I=[],H=this.j;H&&I.push(Fr(H,$u,!0),":");var J=this.g;return(J||H=="file")&&(I.push("//"),(H=this.o)&&I.push(Fr(H,$u,!0),"@"),I.push(encodeURIComponent(String(J)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),J=this.s,J!=null&&I.push(":",String(J))),(J=this.l)&&(this.g&&J.charAt(0)!="/"&&I.push("/"),I.push(Fr(J,J.charAt(0)=="/"?Mg:Cc,!0))),(J=this.i.toString())&&I.push("?",J),(J=this.m)&&I.push("#",Fr(J,$g)),I.join("")};function ut(I){return new lt(I)}function _t(I,H,J){I.j=J?Zt(H,!0):H,I.j&&(I.j=I.j.replace(/:$/,""))}function Lt(I,H){if(H){if(H=Number(H),isNaN(H)||0>H)throw Error("Bad port number "+H);I.s=H}else I.s=null}function pn(I,H,J){H instanceof Xo?(I.i=H,Lu(I.i,I.h)):(J||(H=Fr(H,Hd)),I.i=new Xo(H,I.h))}function Qt(I,H,J){I.i.set(H,J)}function Jn(I){return Qt(I,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),I}function Zt(I,H){return I?H?decodeURI(I.replace(/%25/g,"%2525")):decodeURIComponent(I):""}function Fr(I,H,J){return typeof I=="string"?(I=encodeURI(I).replace(H,ro),J&&(I=I.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I):null}function ro(I){return I=I.charCodeAt(0),"%"+(I>>4&15).toString(16)+(I&15).toString(16)}var $u=/[#\/\?@]/g,Cc=/[#\?:]/g,Mg=/[#\?]/g,Hd=/[#\?@]/g,$g=/#/g;function Xo(I,H){this.h=this.g=null,this.i=I||null,this.j=!!H}function ss(I){I.g||(I.g=new Map,I.h=0,I.i&&at(I.i,function(H,J){I.add(decodeURIComponent(H.replace(/\+/g," ")),J)}))}e=Xo.prototype,e.add=function(I,H){ss(this),this.i=null,I=Za(this,I);var J=this.g.get(I);return J||this.g.set(I,J=[]),J.push(H),this.h+=1,this};function So(I,H){ss(I),H=Za(I,H),I.g.has(H)&&(I.i=null,I.h-=I.g.get(H).length,I.g.delete(H))}function Ja(I,H){return ss(I),H=Za(I,H),I.g.has(H)}e.forEach=function(I,H){ss(this),this.g.forEach(function(J,ie){J.forEach(function(Oe){I.call(H,Oe,ie,this)},this)},this)},e.na=function(){ss(this);const I=Array.from(this.g.values()),H=Array.from(this.g.keys()),J=[];for(let ie=0;ie<H.length;ie++){const Oe=I[ie];for(let Ge=0;Ge<Oe.length;Ge++)J.push(H[ie])}return J},e.V=function(I){ss(this);let H=[];if(typeof I=="string")Ja(this,I)&&(H=H.concat(this.g.get(Za(this,I))));else{I=Array.from(this.g.values());for(let J=0;J<I.length;J++)H=H.concat(I[J])}return H},e.set=function(I,H){return ss(this),this.i=null,I=Za(this,I),Ja(this,I)&&(this.h-=this.g.get(I).length),this.g.set(I,[H]),this.h+=1,this},e.get=function(I,H){return I?(I=this.V(I),0<I.length?String(I[0]):H):H};function qd(I,H,J){So(I,H),0<J.length&&(I.i=null,I.g.set(Za(I,H),g(J)),I.h+=J.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const I=[],H=Array.from(this.g.keys());for(var J=0;J<H.length;J++){var ie=H[J];const Ge=encodeURIComponent(String(ie)),It=this.V(ie);for(ie=0;ie<It.length;ie++){var Oe=Ge;It[ie]!==""&&(Oe+="="+encodeURIComponent(String(It[ie]))),I.push(Oe)}}return this.i=I.join("&")};function Za(I,H){return H=String(H),I.j&&(H=H.toLowerCase()),H}function Lu(I,H){H&&!I.j&&(ss(I),I.i=null,I.g.forEach(function(J,ie){var Oe=ie.toLowerCase();ie!=Oe&&(So(this,ie),qd(this,Oe,J))},I)),I.j=H}function b_(I,H){const J=new Ko;if(a.Image){const ie=new Image;ie.onload=h(qs,J,"TestLoadImage: loaded",!0,H,ie),ie.onerror=h(qs,J,"TestLoadImage: error",!1,H,ie),ie.onabort=h(qs,J,"TestLoadImage: abort",!1,H,ie),ie.ontimeout=h(qs,J,"TestLoadImage: timeout",!1,H,ie),a.setTimeout(function(){ie.ontimeout&&ie.ontimeout()},1e4),ie.src=I}else H(!1)}function Ac(I,H){const J=new Ko,ie=new AbortController,Oe=setTimeout(()=>{ie.abort(),qs(J,"TestPingServer: timeout",!1,H)},1e4);fetch(I,{signal:ie.signal}).then(Ge=>{clearTimeout(Oe),Ge.ok?qs(J,"TestPingServer: ok",!0,H):qs(J,"TestPingServer: server error",!1,H)}).catch(()=>{clearTimeout(Oe),qs(J,"TestPingServer: error",!1,H)})}function qs(I,H,J,ie,Oe){try{Oe&&(Oe.onload=null,Oe.onerror=null,Oe.onabort=null,Oe.ontimeout=null),ie(J)}catch{}}function ZS(){this.g=new ur}function bv(I,H,J){const ie=J||"";try{Se(I,function(Oe,Ge){let It=Oe;l(Oe)&&(It=Fn(Oe)),H.push(ie+Ge+"="+encodeURIComponent(It))})}catch(Oe){throw H.push(ie+"type="+encodeURIComponent("_badmap")),Oe}}function Ic(I){this.l=I.Ub||null,this.j=I.eb||!1}p(Ic,lr),Ic.prototype.g=function(){return new Wd(this.l,this.j)},Ic.prototype.i=function(I){return function(){return I}}({});function Wd(I,H){Ne.call(this),this.D=I,this.o=H,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Wd,Ne),e=Wd.prototype,e.open=function(I,H){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=I,this.A=H,this.readyState=1,Fu(this)},e.send=function(I){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const H={headers:this.u,method:this.B,credentials:this.m,cache:void 0};I&&(H.body=I),(this.D||a).fetch(new Request(this.A,H)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ml(this)),this.readyState=0},e.Sa=function(I){if(this.g&&(this.l=I,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=I.headers,this.readyState=2,Fu(this)),this.g&&(this.readyState=3,Fu(this),this.g)))if(this.responseType==="arraybuffer")I.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in I){if(this.j=I.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;__(this)}else I.text().then(this.Ra.bind(this),this.ga.bind(this))};function __(I){I.j.read().then(I.Pa.bind(I)).catch(I.ga.bind(I))}e.Pa=function(I){if(this.g){if(this.o&&I.value)this.response.push(I.value);else if(!this.o){var H=I.value?I.value:new Uint8Array(0);(H=this.v.decode(H,{stream:!I.done}))&&(this.response=this.responseText+=H)}I.done?Ml(this):Fu(this),this.readyState==3&&__(this)}},e.Ra=function(I){this.g&&(this.response=this.responseText=I,Ml(this))},e.Qa=function(I){this.g&&(this.response=I,Ml(this))},e.ga=function(){this.g&&Ml(this)};function Ml(I){I.readyState=4,I.l=null,I.j=null,I.v=null,Fu(I)}e.setRequestHeader=function(I,H){this.u.append(I,H)},e.getResponseHeader=function(I){return this.h&&this.h.get(I.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const I=[],H=this.h.entries();for(var J=H.next();!J.done;)J=J.value,I.push(J[0]+": "+J[1]),J=H.next();return I.join(`\r
`)};function Fu(I){I.onreadystatechange&&I.onreadystatechange.call(I)}Object.defineProperty(Wd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(I){this.m=I?"include":"same-origin"}});function kf(I){let H="";return T(I,function(J,ie){H+=ie,H+=":",H+=J,H+=`\r
`}),H}function fe(I,H,J){e:{for(ie in J){var ie=!1;break e}ie=!0}ie||(J=kf(J),typeof I=="string"?J!=null&&encodeURIComponent(String(J)):Qt(I,H,J))}function we(I){Ne.call(this),this.headers=new Map,this.o=I||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(we,Ne);var qe=/^https?$/i,Ut=["POST","PUT"];e=we.prototype,e.Ha=function(I){this.J=I},e.ea=function(I,H,J,ie){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+I);H=H?H.toUpperCase():"GET",this.D=I,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():en.g(),this.v=this.o?Us(this.o):Us(en),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(H,String(I),!0),this.B=!1}catch(Ge){Hn(this,Ge);return}if(I=J||"",J=new Map(this.headers),ie)if(Object.getPrototypeOf(ie)===Object.prototype)for(var Oe in ie)J.set(Oe,ie[Oe]);else if(typeof ie.keys=="function"&&typeof ie.get=="function")for(const Ge of ie.keys())J.set(Ge,ie.get(Ge));else throw Error("Unknown input type for opt_headers: "+String(ie));ie=Array.from(J.keys()).find(Ge=>Ge.toLowerCase()=="content-type"),Oe=a.FormData&&I instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ut,H,void 0))||ie||Oe||J.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ge,It]of J)this.g.setRequestHeader(Ge,It);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kr(this),this.u=!0,this.g.send(I),this.u=!1}catch(Ge){Hn(this,Ge)}};function Hn(I,H){I.h=!1,I.g&&(I.j=!0,I.g.abort(),I.j=!1),I.l=H,I.m=5,Cr(I),Mn(I)}function Cr(I){I.A||(I.A=!0,ze(I,"complete"),ze(I,"error"))}e.abort=function(I){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=I||7,ze(this,"complete"),ze(this,"abort"),Mn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mn(this,!0)),we.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?ni(this):this.bb())},e.bb=function(){ni(this)};function ni(I){if(I.h&&typeof o<"u"&&(!I.v[1]||Ci(I)!=4||I.Z()!=2)){if(I.u&&Ci(I)==4)St(I.Ea,0,I);else if(ze(I,"readystatechange"),Ci(I)==4){I.h=!1;try{const It=I.Z();e:switch(It){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var H=!0;break e;default:H=!1}var J;if(!(J=H)){var ie;if(ie=It===0){var Oe=String(I.D).match(Xe)[1]||null;!Oe&&a.self&&a.self.location&&(Oe=a.self.location.protocol.slice(0,-1)),ie=!qe.test(Oe?Oe.toLowerCase():"")}J=ie}if(J)ze(I,"complete"),ze(I,"success");else{I.m=6;try{var Ge=2<Ci(I)?I.g.statusText:""}catch{Ge=""}I.l=Ge+" ["+I.Z()+"]",Cr(I)}}finally{Mn(I)}}}}function Mn(I,H){if(I.g){Kr(I);const J=I.g,ie=I.v[0]?()=>{}:null;I.g=null,I.v=null,H||ze(I,"ready");try{J.onreadystatechange=ie}catch{}}}function Kr(I){I.I&&(a.clearTimeout(I.I),I.I=null)}e.isActive=function(){return!!this.g};function Ci(I){return I.g?I.g.readyState:0}e.Z=function(){try{return 2<Ci(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(I){if(this.g){var H=this.g.responseText;return I&&H.indexOf(I)==0&&(H=H.substring(I.length)),Un(H)}};function io(I){try{if(!I.g)return null;if("response"in I.g)return I.g.response;switch(I.H){case"":case"text":return I.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in I.g)return I.g.mozResponseArrayBuffer}return null}catch{return null}}function kc(I){const H={};I=(I.g&&2<=Ci(I)&&I.g.getAllResponseHeaders()||"").split(`\r
`);for(let ie=0;ie<I.length;ie++){if(_(I[ie]))continue;var J=D(I[ie]);const Oe=J[0];if(J=J[1],typeof J!="string")continue;J=J.trim();const Ge=H[Oe]||[];H[Oe]=Ge,Ge.push(J)}A(H,function(ie){return ie.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ju(I,H,J){return J&&J.internalChannelParams&&J.internalChannelParams[I]||H}function Mp(I){this.Aa=0,this.i=[],this.j=new Ko,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ju("failFast",!1,I),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ju("baseRetryDelayMs",5e3,I),this.cb=ju("retryDelaySeedMs",1e4,I),this.Wa=ju("forwardChannelMaxRetries",2,I),this.wa=ju("forwardChannelRequestTimeoutMs",2e4,I),this.pa=I&&I.xmlHttpFactory||void 0,this.Xa=I&&I.Tb||void 0,this.Ca=I&&I.useFetchStreams||!1,this.L=void 0,this.J=I&&I.supportsCrossDomainXhr||!1,this.K="",this.h=new Hs(I&&I.concurrentRequestLimit),this.Da=new ZS,this.P=I&&I.fastHandshake||!1,this.O=I&&I.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=I&&I.Rb||!1,I&&I.xa&&this.j.xa(),I&&I.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&I&&I.detectBufferingProxy||!1,this.ja=void 0,I&&I.longPollingTimeout&&0<I.longPollingTimeout&&(this.ja=I.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Mp.prototype,e.la=8,e.G=1,e.connect=function(I,H,J,ie){$r(0),this.W=I,this.H=H||{},J&&ie!==void 0&&(this.H.OSID=J,this.H.OAID=ie),this.F=this.X,this.I=aR(this,null,this.W),Gd(this)};function Ws(I){if(w_(I),I.G==3){var H=I.U++,J=ut(I.I);if(Qt(J,"SID",I.K),Qt(J,"RID",H),Qt(J,"TYPE","terminate"),$p(I,J),H=new nr(I,I.j,H),H.L=2,H.v=Jn(ut(J)),J=!1,a.navigator&&a.navigator.sendBeacon)try{J=a.navigator.sendBeacon(H.v.toString(),"")}catch{}!J&&a.Image&&(new Image().src=H.v,J=!0),J||(H.g=uR(H.j,null),H.g.ea(H.v)),H.F=Date.now(),On(H)}oR(I)}function Rf(I){I.g&&(eT(I),I.g.cancel(),I.g=null)}function w_(I){Rf(I),I.u&&(a.clearTimeout(I.u),I.u=null),S_(I),I.h.cancel(),I.s&&(typeof I.s=="number"&&a.clearTimeout(I.s),I.s=null)}function Gd(I){if(!oi(I.h)&&!I.s){I.s=!0;var H=I.Ga;G||L(),Y||(G(),Y=!0),Q.add(H,I),I.B=0}}function o5(I,H){return Mu(I.h)>=I.h.j-(I.s?1:0)?!1:I.s?(I.i=H.D.concat(I.i),!0):I.G==1||I.G==2||I.B>=(I.Va?0:I.Wa)?!1:(I.s=Cs(d(I.Ga,I,H),sR(I,I.B)),I.B++,!0)}e.Ga=function(I){if(this.s)if(this.s=null,this.G==1){if(!I){this.U=Math.floor(1e5*Math.random()),I=this.U++;const Oe=new nr(this,this.j,I);let Ge=this.o;if(this.S&&(Ge?(Ge=k(Ge),P(Ge,this.S)):Ge=this.S),this.m!==null||this.O||(Oe.H=Ge,Ge=null),this.P)e:{for(var H=0,J=0;J<this.i.length;J++){t:{var ie=this.i[J];if("__data__"in ie.map&&(ie=ie.map.__data__,typeof ie=="string")){ie=ie.length;break t}ie=void 0}if(ie===void 0)break;if(H+=ie,4096<H){H=J;break e}if(H===4096||J===this.i.length-1){H=J+1;break e}}H=1e3}else H=1e3;H=Lg(this,Oe,H),J=ut(this.I),Qt(J,"RID",I),Qt(J,"CVER",22),this.D&&Qt(J,"X-HTTP-Session-Id",this.D),$p(this,J),Ge&&(this.O?H="headers="+encodeURIComponent(String(kf(Ge)))+"&"+H:this.m&&fe(J,this.m,Ge)),te(this.h,Oe),this.Ua&&Qt(J,"TYPE","init"),this.P?(Qt(J,"$req",H),Qt(J,"SID","null"),Oe.T=!0,an(Oe,J,null)):an(Oe,J,H),this.G=2}}else this.G==3&&(I?E_(this,I):this.i.length==0||oi(this.h)||E_(this))};function E_(I,H){var J;H?J=H.l:J=I.U++;const ie=ut(I.I);Qt(ie,"SID",I.K),Qt(ie,"RID",J),Qt(ie,"AID",I.T),$p(I,ie),I.m&&I.o&&fe(ie,I.m,I.o),J=new nr(I,I.j,J,I.B+1),I.m===null&&(J.H=I.o),H&&(I.i=H.D.concat(I.i)),H=Lg(I,J,1e3),J.I=Math.round(.5*I.wa)+Math.round(.5*I.wa*Math.random()),te(I.h,J),an(J,ie,H)}function $p(I,H){I.H&&T(I.H,function(J,ie){Qt(H,ie,J)}),I.l&&Se({},function(J,ie){Qt(H,ie,J)})}function Lg(I,H,J){J=Math.min(I.i.length,J);var ie=I.l?d(I.l.Na,I.l,I):null;e:{var Oe=I.i;let Ge=-1;for(;;){const It=["count="+J];Ge==-1?0<J?(Ge=Oe[0].g,It.push("ofs="+Ge)):Ge=0:It.push("ofs="+Ge);let ai=!0;for(let so=0;so<J;so++){let Ar=Oe[so].g;const To=Oe[so].map;if(Ar-=Ge,0>Ar)Ge=Math.max(0,Oe[so].g-100),ai=!1;else try{bv(To,It,"req"+Ar+"_")}catch{ie&&ie(To)}}if(ai){ie=It.join("&");break e}}}return I=I.i.splice(0,J),H.D=I,ie}function _v(I){if(!I.g&&!I.u){I.Y=1;var H=I.Fa;G||L(),Y||(G(),Y=!0),Q.add(H,I),I.v=0}}function x_(I){return I.g||I.u||3<=I.v?!1:(I.Y++,I.u=Cs(d(I.Fa,I),sR(I,I.v)),I.v++,!0)}e.Fa=function(){if(this.u=null,iR(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var I=2*this.R;this.j.info("BP detection timer enabled: "+I),this.A=Cs(d(this.ab,this),I)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$r(10),Rf(this),iR(this))};function eT(I){I.A!=null&&(a.clearTimeout(I.A),I.A=null)}function iR(I){I.g=new nr(I,I.j,"rpc",I.Y),I.m===null&&(I.g.H=I.o),I.g.O=0;var H=ut(I.qa);Qt(H,"RID","rpc"),Qt(H,"SID",I.K),Qt(H,"AID",I.T),Qt(H,"CI",I.F?"0":"1"),!I.F&&I.ja&&Qt(H,"TO",I.ja),Qt(H,"TYPE","xmlhttp"),$p(I,H),I.m&&I.o&&fe(H,I.m,I.o),I.L&&(I.g.I=I.L);var J=I.g;I=I.ia,J.L=1,J.v=Jn(ut(H)),J.m=null,J.P=!0,dr(J,I)}e.Za=function(){this.C!=null&&(this.C=null,Rf(this),x_(this),$r(19))};function S_(I){I.C!=null&&(a.clearTimeout(I.C),I.C=null)}function T_(I,H){var J=null;if(I.g==H){S_(I),eT(I),I.g=null;var ie=2}else if(fs(I.h,H))J=H.D,ve(I.h,H),ie=1;else return;if(I.G!=0){if(H.o)if(ie==1){J=H.m?H.m.length:0,H=Date.now()-H.F;var Oe=I.B;ie=ba(),ze(ie,new xo(ie,J)),Gd(I)}else _v(I);else if(Oe=H.s,Oe==3||Oe==0&&0<H.X||!(ie==1&&o5(I,H)||ie==2&&x_(I)))switch(J&&0<J.length&&(H=I.h,H.i=H.i.concat(J)),Oe){case 1:Lp(I,5);break;case 4:Lp(I,10);break;case 3:Lp(I,6);break;default:Lp(I,2)}}}function sR(I,H){let J=I.Ta+Math.floor(Math.random()*I.cb);return I.isActive()||(J*=2),J*H}function Lp(I,H){if(I.j.info("Error code "+H),H==2){var J=d(I.fb,I),ie=I.Xa;const Oe=!ie;ie=new lt(ie||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_t(ie,"https"),Jn(ie),Oe?b_(ie.toString(),J):Ac(ie.toString(),J)}else $r(2);I.G=0,I.l&&I.l.sa(H),oR(I),w_(I)}e.fb=function(I){I?(this.j.info("Successfully pinged google.com"),$r(2)):(this.j.info("Failed to ping google.com"),$r(1))};function oR(I){if(I.G=0,I.ka=[],I.l){const H=ue(I.h);(H.length!=0||I.i.length!=0)&&(y(I.ka,H),y(I.ka,I.i),I.h.i.length=0,g(I.i),I.i.length=0),I.l.ra()}}function aR(I,H,J){var ie=J instanceof lt?ut(J):new lt(J);if(ie.g!="")H&&(ie.g=H+"."+ie.g),Lt(ie,ie.s);else{var Oe=a.location;ie=Oe.protocol,H=H?H+"."+Oe.hostname:Oe.hostname,Oe=+Oe.port;var Ge=new lt(null);ie&&_t(Ge,ie),H&&(Ge.g=H),Oe&&Lt(Ge,Oe),J&&(Ge.l=J),ie=Ge}return J=I.D,H=I.ya,J&&H&&Qt(ie,J,H),Qt(ie,"VER",I.la),$p(I,ie),ie}function uR(I,H,J){if(H&&!I.J)throw Error("Can't create secondary domain capable XhrIo object.");return H=I.Ca&&!I.pa?new we(new Ic({eb:J})):new we(I.pa),H.Ha(I.J),H}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function tT(){}e=tT.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function C_(){}C_.prototype.g=function(I,H){return new eu(I,H)};function eu(I,H){Ne.call(this),this.g=new Mp(H),this.l=I,this.h=H&&H.messageUrlParams||null,I=H&&H.messageHeaders||null,H&&H.clientProtocolHeaderRequired&&(I?I["X-Client-Protocol"]="webchannel":I={"X-Client-Protocol":"webchannel"}),this.g.o=I,I=H&&H.initMessageHeaders||null,H&&H.messageContentType&&(I?I["X-WebChannel-Content-Type"]=H.messageContentType:I={"X-WebChannel-Content-Type":H.messageContentType}),H&&H.va&&(I?I["X-WebChannel-Client-Profile"]=H.va:I={"X-WebChannel-Client-Profile":H.va}),this.g.S=I,(I=H&&H.Sb)&&!_(I)&&(this.g.m=I),this.v=H&&H.supportsCrossDomainXhr||!1,this.u=H&&H.sendRawJson||!1,(H=H&&H.httpSessionIdParam)&&!_(H)&&(this.g.D=H,I=this.h,I!==null&&H in I&&(I=this.h,H in I&&delete I[H])),this.j=new Yd(this)}p(eu,Ne),eu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},eu.prototype.close=function(){Ws(this.g)},eu.prototype.o=function(I){var H=this.g;if(typeof I=="string"){var J={};J.__data__=I,I=J}else this.u&&(J={},J.__data__=Fn(I),I=J);H.i.push(new no(H.Ya++,I)),H.G==3&&Gd(H)},eu.prototype.N=function(){this.g.l=null,delete this.j,Ws(this.g),delete this.g,eu.aa.N.call(this)};function lR(I){ii.call(this),I.__headers__&&(this.headers=I.__headers__,this.statusCode=I.__status__,delete I.__headers__,delete I.__status__);var H=I.__sm__;if(H){e:{for(const J in H){I=J;break e}I=void 0}(this.i=I)&&(I=this.i,H=H!==null&&I in H?H[I]:void 0),this.data=H}else this.data=I}p(lR,ii);function cR(){Mr.call(this),this.status=1}p(cR,Mr);function Yd(I){this.g=I}p(Yd,tT),Yd.prototype.ua=function(){ze(this.g,"a")},Yd.prototype.ta=function(I){ze(this.g,new lR(I))},Yd.prototype.sa=function(I){ze(this.g,new cR)},Yd.prototype.ra=function(){ze(this.g,"b")},C_.prototype.createWebChannel=C_.prototype.g,eu.prototype.send=eu.prototype.o,eu.prototype.open=eu.prototype.m,eu.prototype.close=eu.prototype.close,ZIe=function(){return new C_},JIe=function(){return ba()},QIe=is,nV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wt.NO_ERROR=0,wt.TIMEOUT=8,wt.HTTP_ERROR=6,BD=wt,Bt.COMPLETE="complete",XIe=Bt,Si.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",Ne.prototype.listen=Ne.prototype.K,zC=Si,KIe=Ic,we.prototype.listenOnce=we.prototype.L,we.prototype.getLastError=we.prototype.Ka,we.prototype.getLastErrorCode=we.prototype.Ba,we.prototype.getStatus=we.prototype.Z,we.prototype.getResponseJson=we.prototype.Oa,we.prototype.getResponseText=we.prototype.oa,we.prototype.send=we.prototype.ea,we.prototype.setWithCredentials=we.prototype.Ha,YIe=we}).apply(typeof kP<"u"?kP:typeof self<"u"?self:typeof window<"u"?window:{});const Ude="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Qu.UNAUTHENTICATED=new Qu(null),Qu.GOOGLE_CREDENTIALS=new Qu("google-credentials-uid"),Qu.FIRST_PARTY=new Qu("first-party-uid"),Qu.MOCK_USER=new Qu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=new L6("@firebase/firestore");function XT(){return hb.logLevel}function Gt(e,...t){if(hb.logLevel<=_r.DEBUG){const n=t.map($X);hb.debug(`Firestore (${IS}): ${e}`,...n)}}function ig(e,...t){if(hb.logLevel<=_r.ERROR){const n=t.map($X);hb.error(`Firestore (${IS}): ${e}`,...n)}}function LA(e,...t){if(hb.logLevel<=_r.WARN){const n=t.map($X);hb.warn(`Firestore (${IS}): ${e}`,...n)}}function $X(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(e="Unexpected state"){const t=`FIRESTORE (${IS}) INTERNAL ASSERTION FAILED: `+e;throw ig(t),new Error(t)}function Ni(e,t){e||Nn()}function Bn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const it={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ft extends Sp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nAt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class rAt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Qu.UNAUTHENTICATED))}shutdown(){}}class iAt{constructor(t){this.t=t,this.currentUser=Qu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Om;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Om,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Om)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ni(typeof r.accessToken=="string"),new nAt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Ni(t===null||typeof t=="string"),new Qu(t)}}class sAt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Qu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class oAt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new sAt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Qu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class aAt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class uAt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Gt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Ni(typeof n.token=="string"),this.R=n.token,new aAt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lAt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eke{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=lAt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Xr(e,t){return e<t?-1:e>t?1:0}function lx(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Ft(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ft(it.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Ft(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ft(it.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return go.fromMillis(Date.now())}static fromDate(t){return go.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new go(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Xr(this.nanoseconds,t.nanoseconds):Xr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new jn(t)}static min(){return new jn(new go(0,0))}static max(){return new jn(new go(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(t,n,r){n===void 0?n=0:n>t.length&&Nn(),r===void 0?r=t.length-n:r>t.length-n&&Nn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return FA.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof FA?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Fi extends FA{construct(t,n,r){return new Fi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Ft(it.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fi(n)}static emptyPath(){return new Fi([])}}const cAt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class aa extends FA{construct(t,n,r){return new aa(t,n,r)}static isValidIdentifier(t){return cAt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),aa.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new aa(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ft(it.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Ft(it.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ft(it.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Ft(it.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new aa(n)}static emptyPath(){return new aa([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.path=t}static fromPath(t){return new ln(Fi.fromString(t))}static fromName(t){return new ln(Fi.fromString(t).popFirst(5))}static empty(){return new ln(Fi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Fi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Fi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ln(new Fi(t.slice()))}}function fAt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=jn.fromTimestamp(r===1e9?new go(n+1,0):new go(n,r));return new xy(i,ln.empty(),t)}function dAt(e){return new xy(e.readTime,e.key,-1)}class xy{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new xy(jn.min(),ln.empty(),-1)}static max(){return new xy(jn.max(),ln.empty(),-1)}}function hAt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ln.comparator(e.documentKey,t.documentKey),n!==0?n:Xr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pAt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mAt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(e){if(e.code!==it.FAILED_PRECONDITION||e.message!==pAt)throw e;Gt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new mt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof mt?n:mt.resolve(n)}catch(n){return mt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):mt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):mt.reject(n)}static resolve(t){return new mt((n,r)=>{n(t)})}static reject(t){return new mt((n,r)=>{r(t)})}static waitFor(t){return new mt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=mt.resolve(!1);for(const r of t)n=n.next(i=>i?mt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new mt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new mt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function gAt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fk(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LX{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}LX.oe=-1;function H6(e){return e==null}function SM(e){return e===0&&1/e==-1/0}function yAt(e){return typeof e=="number"&&Number.isInteger(e)&&!SM(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zde(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function e_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function tke(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t,n){this.comparator=t,this.root=n||sa.EMPTY}insert(t,n){return new cs(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,sa.BLACK,null,null))}remove(t){return new cs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,sa.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new RP(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new RP(this.root,t,this.comparator,!1)}getReverseIterator(){return new RP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new RP(this.root,t,this.comparator,!0)}}class RP{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class sa{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??sa.RED,this.left=i??sa.EMPTY,this.right=s??sa.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new sa(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return sa.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return sa.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,sa.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,sa.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Nn();const t=this.left.check();if(t!==this.right.check())throw Nn();return t+(this.isRed()?0:1)}}sa.EMPTY=null,sa.RED=!0,sa.BLACK=!1;sa.EMPTY=new class{constructor(){this.size=0}get key(){throw Nn()}get value(){throw Nn()}get color(){throw Nn()}get left(){throw Nn()}get right(){throw Nn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new sa(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t){this.comparator=t,this.data=new cs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vde(this.data.getIterator())}getIteratorFrom(t){return new Vde(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof da)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new da(this.comparator);return n.data=t,n}}class Vde{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec{constructor(t){this.fields=t,t.sort(aa.comparator)}static empty(){return new ec([])}unionWith(t){let n=new da(aa.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new ec(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return lx(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nke extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nke("Invalid base64 string: "+s):s}}(t);return new Wa(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Wa(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Xr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Wa.EMPTY_BYTE_STRING=new Wa("");const vAt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sy(e){if(Ni(!!e),typeof e=="string"){let t=0;const n=vAt.exec(e);if(Ni(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Qs(e.seconds),nanos:Qs(e.nanos)}}function Qs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function pb(e){return typeof e=="string"?Wa.fromBase64String(e):Wa.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FX(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function jX(e){const t=e.mapValue.fields.__previous_value__;return FX(t)?jX(t):t}function jA(e){const t=Sy(e.mapValue.fields.__local_write_time__.timestampValue);return new go(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bAt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class BA{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new BA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof BA&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function mb(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?FX(e)?4:_At(e)?9007199254740991:10:Nn()}function sp(e,t){if(e===t)return!0;const n=mb(e);if(n!==mb(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return jA(e).isEqual(jA(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Sy(i.timestampValue),a=Sy(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return pb(i.bytesValue).isEqual(pb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Qs(i.geoPointValue.latitude)===Qs(s.geoPointValue.latitude)&&Qs(i.geoPointValue.longitude)===Qs(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qs(i.integerValue)===Qs(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Qs(i.doubleValue),a=Qs(s.doubleValue);return o===a?SM(o)===SM(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return lx(e.arrayValue.values||[],t.arrayValue.values||[],sp);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(zde(o)!==zde(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!sp(o[u],a[u])))return!1;return!0}(e,t);default:return Nn()}}function UA(e,t){return(e.values||[]).find(n=>sp(n,t))!==void 0}function cx(e,t){if(e===t)return 0;const n=mb(e),r=mb(t);if(n!==r)return Xr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Qs(s.integerValue||s.doubleValue),u=Qs(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Hde(e.timestampValue,t.timestampValue);case 4:return Hde(jA(e),jA(t));case 5:return Xr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=pb(s),u=pb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Xr(a[l],u[l]);if(c!==0)return c}return Xr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Xr(Qs(s.latitude),Qs(o.latitude));return a!==0?a:Xr(Qs(s.longitude),Qs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=cx(a[l],u[l]);if(c)return c}return Xr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===NP.mapValue&&o===NP.mapValue)return 0;if(s===NP.mapValue)return 1;if(o===NP.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Xr(u[f],c[f]);if(d!==0)return d;const h=cx(a[u[f]],l[c[f]]);if(h!==0)return h}return Xr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Nn()}}function Hde(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Xr(e,t);const n=Sy(e),r=Sy(t),i=Xr(n.seconds,r.seconds);return i!==0?i:Xr(n.nanos,r.nanos)}function fx(e){return rV(e)}function rV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Sy(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return pb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ln.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=rV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${rV(n.fields[o])}`;return i+"}"}(e.mapValue):Nn()}function qde(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function iV(e){return!!e&&"integerValue"in e}function BX(e){return!!e&&"arrayValue"in e}function Wde(e){return!!e&&"nullValue"in e}function Gde(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function UD(e){return!!e&&"mapValue"in e}function R2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return e_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=R2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=R2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function _At(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(t){this.value=t}static empty(){return new ol({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!UD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=R2(n)}setAll(t){let n=aa.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=R2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());UD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return sp(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];UD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){e_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new ol(R2(this.value))}}function rke(e){const t=[];return e_(e.fields,(n,r)=>{const i=new aa([n]);if(UD(r)){const s=rke(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new ec(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ma(t,0,jn.min(),jn.min(),jn.min(),ol.empty(),0)}static newFoundDocument(t,n,r,i){return new Ma(t,1,n,jn.min(),r,i,0)}static newNoDocument(t,n){return new Ma(t,2,n,jn.min(),jn.min(),ol.empty(),0)}static newUnknownDocument(t,n){return new Ma(t,3,n,jn.min(),jn.min(),ol.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(jn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ol.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ol.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=jn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ma&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ma(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TM=class{constructor(t,n){this.position=t,this.inclusive=n}};function Yde(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=ln.comparator(ln.fromName(o.referenceValue),n.key):r=cx(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kde(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!sp(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(t,n="asc"){this.field=t,this.dir=n}}function wAt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ike=class{};class Js extends ike{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new xAt(t,n,r):n==="array-contains"?new CAt(t,r):n==="in"?new AAt(t,r):n==="not-in"?new IAt(t,r):n==="array-contains-any"?new kAt(t,r):new Js(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new SAt(t,r):new TAt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(cx(n,this.value)):n!==null&&mb(this.value)===mb(n)&&this.matchesComparison(cx(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Nn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xd extends ike{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new xd(t,n)}matches(t){return ske(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ske(e){return e.op==="and"}function oke(e){return EAt(e)&&ske(e)}function EAt(e){for(const t of e.filters)if(t instanceof xd)return!1;return!0}function sV(e){if(e instanceof Js)return e.field.canonicalString()+e.op.toString()+fx(e.value);if(oke(e))return e.filters.map(t=>sV(t)).join(",");{const t=e.filters.map(n=>sV(n)).join(",");return`${e.op}(${t})`}}function ake(e,t){return e instanceof Js?function(r,i){return i instanceof Js&&r.op===i.op&&r.field.isEqual(i.field)&&sp(r.value,i.value)}(e,t):e instanceof xd?function(r,i){return i instanceof xd&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ake(o,i.filters[a]),!0):!1}(e,t):void Nn()}function uke(e){return e instanceof Js?function(n){return`${n.field.canonicalString()} ${n.op} ${fx(n.value)}`}(e):e instanceof xd?function(n){return n.op.toString()+" {"+n.getFilters().map(uke).join(" ,")+"}"}(e):"Filter"}class xAt extends Js{constructor(t,n,r){super(t,n,r),this.key=ln.fromName(r.referenceValue)}matches(t){const n=ln.comparator(t.key,this.key);return this.matchesComparison(n)}}class SAt extends Js{constructor(t,n){super(t,"in",n),this.keys=lke("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class TAt extends Js{constructor(t,n){super(t,"not-in",n),this.keys=lke("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function lke(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ln.fromName(r.referenceValue))}class CAt extends Js{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return BX(n)&&UA(n.arrayValue,this.value)}}class AAt extends Js{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&UA(this.value.arrayValue,n)}}class IAt extends Js{constructor(t,n){super(t,"not-in",n)}matches(t){if(UA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!UA(this.value.arrayValue,n)}}class kAt extends Js{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!BX(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>UA(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RAt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Xde(e,t=null,n=[],r=[],i=null,s=null,o=null){return new RAt(e,t,n,r,i,s,o)}function UX(e){const t=Bn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>sV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),H6(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>fx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>fx(r)).join(",")),t.ue=n}return t.ue}function zX(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!wAt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ake(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Kde(e.startAt,t.startAt)&&Kde(e.endAt,t.endAt)}function oV(e){return ln.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function NAt(e,t,n,r,i,s,o,a){return new kS(e,t,n,r,i,s,o,a)}function VX(e){return new kS(e)}function Qde(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function cke(e){return e.collectionGroup!==null}function N2(e){const t=Bn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new da(aa.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new zA(s,r))}),n.has(aa.keyField().canonicalString())||t.ce.push(new zA(aa.keyField(),r))}return t.ce}function Uh(e){const t=Bn(e);return t.le||(t.le=PAt(t,N2(e))),t.le}function PAt(e,t){if(e.limitType==="F")return Xde(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zA(i.field,s)});const n=e.endAt?new TM(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new TM(e.startAt.position,e.startAt.inclusive):null;return Xde(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function aV(e,t){const n=e.filters.concat([t]);return new kS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function uV(e,t,n){return new kS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function q6(e,t){return zX(Uh(e),Uh(t))&&e.limitType===t.limitType}function fke(e){return`${UX(Uh(e))}|lt:${e.limitType}`}function Nw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>uke(i)).join(", ")}]`),H6(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fx(i)).join(",")),`Target(${r})`}(Uh(e))}; limitType=${e.limitType})`}function W6(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ln.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of N2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Yde(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,N2(r),i)||r.endAt&&!function(o,a,u){const l=Yde(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,N2(r),i))}(e,t)}function DAt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function dke(e){return(t,n)=>{let r=!1;for(const i of N2(e)){const s=OAt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function OAt(e,t,n){const r=e.field.isKeyField()?ln.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?cx(u,l):Nn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Nn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){e_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return tke(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAt=new cs(ln.comparator);function sg(){return MAt}const hke=new cs(ln.comparator);function VC(...e){let t=hke;for(const n of e)t=t.insert(n.key,n);return t}function pke(e){let t=hke;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function D1(){return P2()}function mke(){return P2()}function P2(){return new RS(e=>e.toString(),(e,t)=>e.isEqual(t))}const $At=new cs(ln.comparator),LAt=new da(ln.comparator);function pr(...e){let t=LAt;for(const n of e)t=t.add(n);return t}const FAt=new da(Xr);function jAt(){return FAt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gke(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:SM(t)?"-0":t}}function yke(e){return{integerValue:""+e}}function BAt(e,t){return yAt(t)?yke(t):gke(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(){this._=void 0}}function UAt(e,t,n){return e instanceof VA?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&FX(s)&&(s=jX(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof HA?bke(e,t):e instanceof qA?_ke(e,t):function(i,s){const o=vke(i,s),a=Jde(o)+Jde(i.Pe);return iV(o)&&iV(i.Pe)?yke(a):gke(i.serializer,a)}(e,t)}function zAt(e,t,n){return e instanceof HA?bke(e,t):e instanceof qA?_ke(e,t):n}function vke(e,t){return e instanceof CM?function(r){return iV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class VA extends G6{}class HA extends G6{constructor(t){super(),this.elements=t}}function bke(e,t){const n=wke(t);for(const r of e.elements)n.some(i=>sp(i,r))||n.push(r);return{arrayValue:{values:n}}}class qA extends G6{constructor(t){super(),this.elements=t}}function _ke(e,t){let n=wke(t);for(const r of e.elements)n=n.filter(i=>!sp(i,r));return{arrayValue:{values:n}}}class CM extends G6{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Jde(e){return Qs(e.integerValue||e.doubleValue)}function wke(e){return BX(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VAt{constructor(t,n){this.field=t,this.transform=n}}function HAt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof HA&&i instanceof HA||r instanceof qA&&i instanceof qA?lx(r.elements,i.elements,sp):r instanceof CM&&i instanceof CM?sp(r.Pe,i.Pe):r instanceof VA&&i instanceof VA}(e.transform,t.transform)}class qAt{constructor(t,n){this.version=t,this.transformResults=n}}class gl{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new gl}static exists(t){return new gl(void 0,t)}static updateTime(t){return new gl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function zD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Y6{}function Eke(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new K6(e.key,gl.none()):new dk(e.key,e.data,gl.none());{const n=e.data,r=ol.empty();let i=new da(aa.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new sv(e.key,r,new ec(i.toArray()),gl.none())}}function WAt(e,t,n){e instanceof dk?function(i,s,o){const a=i.value.clone(),u=ehe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof sv?function(i,s,o){if(!zD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ehe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(xke(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function D2(e,t,n,r){return e instanceof dk?function(s,o,a,u){if(!zD(s.precondition,o))return a;const l=s.value.clone(),c=the(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof sv?function(s,o,a,u){if(!zD(s.precondition,o))return a;const l=the(s.fieldTransforms,u,o),c=o.data;return c.setAll(xke(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return zD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function GAt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=vke(r.transform,i||null);s!=null&&(n===null&&(n=ol.empty()),n.set(r.field,s))}return n||null}function Zde(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&lx(r,i,(s,o)=>HAt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class dk extends Y6{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sv extends Y6{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xke(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function ehe(e,t,n){const r=new Map;Ni(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,zAt(o,a,n[i]))}return r}function the(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,UAt(s,o,t))}return r}class K6 extends Y6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YAt extends Y6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KAt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&WAt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=D2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=D2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=mke();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=Eke(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(jn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),pr())}isEqual(t){return this.batchId===t.batchId&&lx(this.mutations,t.mutations,(n,r)=>Zde(n,r))&&lx(this.baseMutations,t.baseMutations,(n,r)=>Zde(n,r))}}class HX{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Ni(t.mutations.length===r.length);let i=function(){return $At}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new HX(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XAt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QAt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ks,Ir;function JAt(e){switch(e){default:return Nn();case it.CANCELLED:case it.UNKNOWN:case it.DEADLINE_EXCEEDED:case it.RESOURCE_EXHAUSTED:case it.INTERNAL:case it.UNAVAILABLE:case it.UNAUTHENTICATED:return!1;case it.INVALID_ARGUMENT:case it.NOT_FOUND:case it.ALREADY_EXISTS:case it.PERMISSION_DENIED:case it.FAILED_PRECONDITION:case it.ABORTED:case it.OUT_OF_RANGE:case it.UNIMPLEMENTED:case it.DATA_LOSS:return!0}}function Ske(e){if(e===void 0)return ig("GRPC error has no .code"),it.UNKNOWN;switch(e){case Ks.OK:return it.OK;case Ks.CANCELLED:return it.CANCELLED;case Ks.UNKNOWN:return it.UNKNOWN;case Ks.DEADLINE_EXCEEDED:return it.DEADLINE_EXCEEDED;case Ks.RESOURCE_EXHAUSTED:return it.RESOURCE_EXHAUSTED;case Ks.INTERNAL:return it.INTERNAL;case Ks.UNAVAILABLE:return it.UNAVAILABLE;case Ks.UNAUTHENTICATED:return it.UNAUTHENTICATED;case Ks.INVALID_ARGUMENT:return it.INVALID_ARGUMENT;case Ks.NOT_FOUND:return it.NOT_FOUND;case Ks.ALREADY_EXISTS:return it.ALREADY_EXISTS;case Ks.PERMISSION_DENIED:return it.PERMISSION_DENIED;case Ks.FAILED_PRECONDITION:return it.FAILED_PRECONDITION;case Ks.ABORTED:return it.ABORTED;case Ks.OUT_OF_RANGE:return it.OUT_OF_RANGE;case Ks.UNIMPLEMENTED:return it.UNIMPLEMENTED;case Ks.DATA_LOSS:return it.DATA_LOSS;default:return Nn()}}(Ir=Ks||(Ks={}))[Ir.OK=0]="OK",Ir[Ir.CANCELLED=1]="CANCELLED",Ir[Ir.UNKNOWN=2]="UNKNOWN",Ir[Ir.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ir[Ir.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ir[Ir.NOT_FOUND=5]="NOT_FOUND",Ir[Ir.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ir[Ir.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ir[Ir.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ir[Ir.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ir[Ir.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ir[Ir.ABORTED=10]="ABORTED",Ir[Ir.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ir[Ir.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ir[Ir.INTERNAL=13]="INTERNAL",Ir[Ir.UNAVAILABLE=14]="UNAVAILABLE",Ir[Ir.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZAt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eIt=new U1([4294967295,4294967295],0);function nhe(e){const t=ZAt().encode(e),n=new GIe;return n.update(t),new Uint8Array(n.digest())}function rhe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new U1([n,r],0),new U1([i,s],0)]}class qX{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new HC(`Invalid padding: ${n}`);if(r<0)throw new HC(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new HC(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new HC(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=U1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(U1.fromNumber(r)));return i.compare(eIt)===1&&(i=new U1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=nhe(t),[r,i]=rhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new qX(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=nhe(t),[r,i]=rhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class HC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,hk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new X6(jn.min(),i,new cs(Xr),sg(),pr())}}class hk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new hk(r,n,pr(),pr(),pr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Tke{constructor(t,n){this.targetId=t,this.me=n}}class Cke{constructor(t,n,r=Wa.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class ihe{constructor(){this.fe=0,this.ge=ohe(),this.pe=Wa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=pr(),n=pr(),r=pr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Nn()}}),new hk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=ohe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Ni(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class tIt{constructor(t){this.Le=t,this.Be=new Map,this.ke=sg(),this.qe=she(),this.Qe=new cs(Xr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Nn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(oV(s))if(r===0){const o=new ln(s.path);this.Ue(n,o,Ma.newNoDocument(o,jn.min()))}else Ni(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=pb(r).toUint8Array()}catch(u){if(u instanceof nke)return LA("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new qX(o,i,s)}catch(u){return LA(u instanceof HC?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&oV(a.target)){const u=new ln(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ma.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=pr();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new X6(t,n,this.Qe,this.ke,r);return this.ke=sg(),this.qe=she(),this.Qe=new cs(Xr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new ihe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new da(Xr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Gt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new ihe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function she(){return new cs(ln.comparator)}function ohe(){return new cs(ln.comparator)}const nIt={asc:"ASCENDING",desc:"DESCENDING"},rIt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},iIt={and:"AND",or:"OR"};class sIt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function lV(e,t){return e.useProto3Json||H6(t)?t:{value:t}}function AM(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ake(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function oIt(e,t){return AM(e,t.toTimestamp())}function zh(e){return Ni(!!e),jn.fromTimestamp(function(n){const r=Sy(n);return new go(r.seconds,r.nanos)}(e))}function WX(e,t){return cV(e,t).canonicalString()}function cV(e,t){const n=function(i){return new Fi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Ike(e){const t=Fi.fromString(e);return Ni(Dke(t)),t}function fV(e,t){return WX(e.databaseId,t.path)}function oB(e,t){const n=Ike(t);if(n.get(1)!==e.databaseId.projectId)throw new Ft(it.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ft(it.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ln(Rke(n))}function kke(e,t){return WX(e.databaseId,t)}function aIt(e){const t=Ike(e);return t.length===4?Fi.emptyPath():Rke(t)}function dV(e){return new Fi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Rke(e){return Ni(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function ahe(e,t,n){return{name:fV(e,t),fields:n.value.mapValue.fields}}function uIt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Nn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Ni(c===void 0||typeof c=="string"),Wa.fromBase64String(c||"")):(Ni(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Wa.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?it.UNKNOWN:Ske(l.code);return new Ft(c,l.message||"")}(o);n=new Cke(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=oB(e,r.document.name),s=zh(r.document.updateTime),o=r.document.createTime?zh(r.document.createTime):jn.min(),a=new ol({mapValue:{fields:r.document.fields}}),u=Ma.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new VD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=oB(e,r.document),s=r.readTime?zh(r.readTime):jn.min(),o=Ma.newNoDocument(i,s),a=r.removedTargetIds||[];n=new VD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=oB(e,r.document),s=r.removedTargetIds||[];n=new VD([],s,i,null)}else{if(!("filter"in t))return Nn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new QAt(i,s),a=r.targetId;n=new Tke(a,o)}}return n}function lIt(e,t){let n;if(t instanceof dk)n={update:ahe(e,t.key,t.value)};else if(t instanceof K6)n={delete:fV(e,t.key)};else if(t instanceof sv)n={update:ahe(e,t.key,t.data),updateMask:vIt(t.fieldMask)};else{if(!(t instanceof YAt))return Nn();n={verify:fV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof VA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof HA)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qA)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof CM)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Nn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:oIt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Nn()}(e,t.precondition)),n}function cIt(e,t){return e&&e.length>0?(Ni(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?zh(i.updateTime):zh(s);return o.isEqual(jn.min())&&(o=zh(s)),new qAt(o,i.transformResults||[])}(n,t))):[]}function fIt(e,t){return{documents:[kke(e,t.path)]}}function dIt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kke(e,i);const s=function(l){if(l.length!==0)return Pke(xd.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:Pw(d.field),direction:mIt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=lV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function hIt(e){let t=aIt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ni(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=Nke(f);return d instanceof xd&&oke(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new zA(Dw(p.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,H6(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new TM(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new TM(h,d)}(n.endAt)),NAt(t,i,o,s,a,"F",u,l)}function pIt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Nn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Nke(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Dw(n.unaryFilter.field);return Js.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Dw(n.unaryFilter.field);return Js.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Dw(n.unaryFilter.field);return Js.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Dw(n.unaryFilter.field);return Js.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Nn()}}(e):e.fieldFilter!==void 0?function(n){return Js.create(Dw(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Nn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return xd.create(n.compositeFilter.filters.map(r=>Nke(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Nn()}}(n.compositeFilter.op))}(e):Nn()}function mIt(e){return nIt[e]}function gIt(e){return rIt[e]}function yIt(e){return iIt[e]}function Pw(e){return{fieldPath:e.canonicalString()}}function Dw(e){return aa.fromServerFormat(e.fieldPath)}function Pke(e){return e instanceof Js?function(n){if(n.op==="=="){if(Gde(n.value))return{unaryFilter:{field:Pw(n.field),op:"IS_NAN"}};if(Wde(n.value))return{unaryFilter:{field:Pw(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Gde(n.value))return{unaryFilter:{field:Pw(n.field),op:"IS_NOT_NAN"}};if(Wde(n.value))return{unaryFilter:{field:Pw(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pw(n.field),op:gIt(n.op),value:n.value}}}(e):e instanceof xd?function(n){const r=n.getFilters().map(i=>Pke(i));return r.length===1?r[0]:{compositeFilter:{op:yIt(n.op),filters:r}}}(e):Nn()}function vIt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Dke(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t,n,r,i,s=jn.min(),o=jn.min(),a=Wa.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new I0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new I0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new I0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new I0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bIt{constructor(t){this.ct=t}}function _It(e){const t=hIt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?uV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wIt{constructor(){this._n=new EIt}addToCollectionParentIndex(t,n){return this._n.add(n),mt.resolve()}getCollectionParents(t,n){return mt.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return mt.resolve()}deleteFieldIndex(t,n){return mt.resolve()}deleteAllFieldIndexes(t){return mt.resolve()}createTargetIndexes(t,n){return mt.resolve()}getDocumentsMatchingTarget(t,n){return mt.resolve(null)}getIndexType(t,n){return mt.resolve(0)}getFieldIndexes(t,n){return mt.resolve([])}getNextCollectionGroupToUpdate(t){return mt.resolve(null)}getMinOffset(t,n){return mt.resolve(xy.min())}getMinOffsetFromCollectionGroup(t,n){return mt.resolve(xy.min())}updateCollectionGroup(t,n,r){return mt.resolve()}updateIndexEntries(t,n){return mt.resolve()}}class EIt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new da(Fi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new da(Fi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new dx(0)}static Ln(){return new dx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xIt{constructor(){this.changes=new RS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ma.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?mt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SIt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TIt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&D2(r.mutation,i,ec.empty(),go.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,pr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=pr()){const i=D1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=VC();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=D1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,pr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=sg();const o=P2(),a=function(){return P2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof sv)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),D2(c.mutation,l,c.mutation.getFieldMask(),go.now())):o.set(l.key,ec.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new SIt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=P2();let i=new cs((o,a)=>o-a),s=pr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||ec.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||pr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=mke();c.forEach(d=>{if(!s.has(d)){const h=Eke(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return mt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return ln.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):cke(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):mt.resolve(D1());let a=-1,u=s;return o.next(l=>mt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?mt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,pr())).next(c=>({batchId:a,changes:pke(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ln(n)).next(r=>{let i=VC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=VC();return this.indexManager.getCollectionParents(t,s).next(a=>mt.forEach(a,u=>{const l=function(f,d){return new kS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,Ma.newInvalidDocument(c)))});let a=VC();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&D2(c.mutation,l,ec.empty(),go.now()),W6(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CIt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return mt.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:zh(i.createTime)}}(n)),mt.resolve()}getNamedQuery(t,n){return mt.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:_It(i.bundledQuery),readTime:zh(i.readTime)}}(n)),mt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AIt{constructor(){this.overlays=new cs(ln.comparator),this.hr=new Map}getOverlay(t,n){return mt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=D1();return mt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),mt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),mt.resolve()}getOverlaysForCollection(t,n,r){const i=D1(),s=n.length+1,o=new ln(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return mt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new cs((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=D1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=D1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return mt.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new XAt(n,r));let s=this.hr.get(n);s===void 0&&(s=pr(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GX{constructor(){this.Pr=new da(Po.Ir),this.Tr=new da(Po.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Po(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Po(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new ln(new Fi([])),r=new Po(n,t),i=new Po(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new ln(new Fi([])),r=new Po(n,t),i=new Po(n,t+1);let s=pr();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Po(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Po{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return ln.comparator(t.key,n.key)||Xr(t.pr,n.pr)}static Er(t,n){return Xr(t.pr,n.pr)||ln.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IIt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new da(Po.Ir)}checkEmpty(t){return mt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new KAt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Po(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return mt.resolve(o)}lookupMutationBatch(t,n){return mt.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return mt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return mt.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return mt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Po(n,0),i=new Po(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),mt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new da(Xr);return n.forEach(i=>{const s=new Po(i,0),o=new Po(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),mt.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;ln.isDocumentKey(s)||(s=s.child(""));const o=new Po(new ln(s),0);let a=new da(Xr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),mt.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Ni(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return mt.forEach(n.mutations,i=>{const s=new Po(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Po(n,0),i=this.wr.firstAfterOrEqual(r);return mt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,mt.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kIt{constructor(t){this.vr=t,this.docs=function(){return new cs(ln.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return mt.resolve(r?r.document.mutableCopy():Ma.newInvalidDocument(n))}getEntries(t,n){let r=sg();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ma.newInvalidDocument(i))}),mt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=sg();const o=n.path,a=new ln(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||hAt(dAt(c),r)<=0||(i.has(c.key)||W6(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return mt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Nn()}Fr(t,n){return mt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new RIt(this)}getSize(t){return mt.resolve(this.size)}}class RIt extends xIt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),mt.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NIt{constructor(t){this.persistence=t,this.Mr=new RS(n=>UX(n),zX),this.lastRemoteSnapshotVersion=jn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new GX,this.targetCount=0,this.Lr=dx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),mt.resolve()}getLastRemoteSnapshotVersion(t){return mt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return mt.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),mt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),mt.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new dx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,mt.resolve()}updateTargetData(t,n){return this.qn(n),mt.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,mt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),mt.waitFor(s).next(()=>i)}getTargetCount(t){return mt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return mt.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),mt.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),mt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),mt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return mt.resolve(r)}containsKey(t,n){return mt.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PIt{constructor(t,n){this.Br={},this.overlays={},this.kr=new LX(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new NIt(this),this.indexManager=new wIt,this.remoteDocumentCache=function(i){return new kIt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new bIt(n),this.$r=new CIt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new AIt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new IIt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Gt("MemoryPersistence","Starting transaction:",t);const i=new DIt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return mt.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class DIt extends mAt{constructor(t){super(),this.currentSequenceNumber=t}}class YX{constructor(t){this.persistence=t,this.zr=new GX,this.jr=null}static Hr(t){return new YX(t)}get Jr(){if(this.jr)return this.jr;throw Nn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),mt.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),mt.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),mt.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mt.forEach(this.Jr,r=>{const i=ln.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,jn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return mt.or([()=>mt.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KX{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=pr(),i=pr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new KX(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OIt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MIt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return pxt()?8:gAt(ma())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new OIt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(XT()<=_r.DEBUG&&Gt("QueryEngine","SDK will not create cache indexes for query:",Nw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),mt.resolve()):(XT()<=_r.DEBUG&&Gt("QueryEngine","Query:",Nw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(XT()<=_r.DEBUG&&Gt("QueryEngine","The SDK decides to create cache indexes for query:",Nw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Uh(n))):mt.resolve())}ji(t,n){if(Qde(n))return mt.resolve(null);let r=Uh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=uV(n,null,"F"),r=Uh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=pr(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,uV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Qde(n)||i.isEqual(jn.min())?mt.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?mt.resolve(null):(XT()<=_r.DEBUG&&Gt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Nw(n)),this.es(t,o,n,fAt(i,-1)).next(a=>a))})}Zi(t,n){let r=new da(dke(t));return n.forEach((i,s)=>{W6(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return XT()<=_r.DEBUG&&Gt("QueryEngine","Using full collection scan to execute query:",Nw(n)),this.zi.getDocumentsMatchingQuery(t,n,xy.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $It{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new cs(Xr),this.rs=new RS(s=>UX(s),zX),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new TIt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function LIt(e,t,n,r){return new $It(e,t,n,r)}async function Oke(e,t){const n=Bn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=pr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function FIt(e,t){const n=Bn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=mt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(g=>{const y=l.docVersions.get(p);Ni(y!==null),g.version.compareTo(y)<0&&(f.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),c.addEntry(g)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=pr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function Mke(e){const t=Bn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function jIt(e,t){const n=Bn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Wa.EMPTY_BYTE_STRING,jn.min()).withLastLimboFreeSnapshotVersion(jn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(g,y,b){return g.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=sg(),l=pr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(BIt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(jn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return mt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function BIt(e,t,n){let r=pr(),i=pr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=sg();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(jn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Gt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function UIt(e,t){const n=Bn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function zIt(e,t){const n=Bn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,mt.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new I0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function hV(e,t,n){const r=Bn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!fk(o))throw o;Gt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function uhe(e,t,n){const r=Bn(e);let i=jn.min(),s=pr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=Bn(u),d=f.rs.get(c);return d!==void 0?mt.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,Uh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:jn.min(),n?s:pr())).next(a=>(VIt(r,DAt(t),a),{documents:a,hs:s})))}function VIt(e,t,n){let r=e.ss.get(t)||jn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class lhe{constructor(){this.activeTargetIds=jAt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class HIt{constructor(){this.no=new lhe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new lhe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qIt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class che{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Gt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Gt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PP=null;function aB(){return PP===null?PP=function(){return 268435456+Math.round(2147483648*Math.random())}():PP++,"0x"+PP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GIt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="WebChannelConnection";class YIt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=aB(),u=this.vo(n,r.toUriEncodedString());Gt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(Gt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw LA("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+IS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=WIt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=aB();return new Promise((o,a)=>{const u=new YIe;u.setWithCredentials(!0),u.listenOnce(XIe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case BD.NO_ERROR:const c=u.getResponseJson();Gt(Ia,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case BD.TIMEOUT:Gt(Ia,`RPC '${t}' ${s} timed out`),a(new Ft(it.DEADLINE_EXCEEDED,"Request time out"));break;case BD.HTTP_ERROR:const f=u.getStatus();if(Gt(Ia,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(y){const b=y.toLowerCase().replace(/_/g,"-");return Object.values(it).indexOf(b)>=0?b:it.UNKNOWN}(h.status);a(new Ft(p,h.message))}else a(new Ft(it.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Ft(it.UNAVAILABLE,"Connection failed."));break;default:Nn()}}finally{Gt(Ia,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Gt(Ia,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=aB(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=ZIe(),a=JIe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new KIe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Gt(Ia,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new GIt({lo:y=>{h?Gt(Ia,`Not sending because RPC '${t}' stream ${i} is closed:`,y):(d||(Gt(Ia,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Gt(Ia,`RPC '${t}' stream ${i} sending:`,y),f.send(y))},ho:()=>f.close()}),g=(y,b,_)=>{y.listen(b,E=>{try{_(E)}catch(C){setTimeout(()=>{throw C},0)}})};return g(f,zC.EventType.OPEN,()=>{h||(Gt(Ia,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),g(f,zC.EventType.CLOSE,()=>{h||(h=!0,Gt(Ia,`RPC '${t}' stream ${i} transport closed`),p.po())}),g(f,zC.EventType.ERROR,y=>{h||(h=!0,LA(Ia,`RPC '${t}' stream ${i} transport errored:`,y),p.po(new Ft(it.UNAVAILABLE,"The operation could not be completed")))}),g(f,zC.EventType.MESSAGE,y=>{var b;if(!h){const _=y.data[0];Ni(!!_);const E=_,C=E.error||((b=E[0])===null||b===void 0?void 0:b.error);if(C){Gt(Ia,`RPC '${t}' stream ${i} received error:`,C);const x=C.status;let T=function(N){const P=Ks[N];if(P!==void 0)return Ske(P)}(x),A=C.message;T===void 0&&(T=it.INTERNAL,A="Unknown error status: "+x+" with message "+C.message),h=!0,p.po(new Ft(T,A)),f.close()}else Gt(Ia,`RPC '${t}' stream ${i} received:`,_),p.yo(_)}}),g(a,QIe.STAT_EVENT,y=>{y.stat===nV.PROXY?Gt(Ia,`RPC '${t}' stream ${i} detected buffering proxy`):y.stat===nV.NOPROXY&&Gt(Ia,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function uB(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(e){return new sIt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ke{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Gt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lke{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new $ke(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===it.RESOURCE_EXHAUSTED?(ig(n.toString()),ig("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===it.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Ft(it.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return Gt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(Gt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KIt extends Lke{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=uIt(this.serializer,t),r=function(s){if(!("targetChange"in s))return jn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?jn.min():o.readTime?zh(o.readTime):jn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=dV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=oV(u)?{documents:fIt(s,u)}:{query:dIt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Ake(s,o.resumeToken);const l=lV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(jn.min())>0){a.readTime=AM(s,o.snapshotVersion.toTimestamp());const l=lV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=pIt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=dV(this.serializer),n.removeTarget=t,this.i_(n)}}class XIt extends Lke{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(Ni(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=cIt(t.writeResults,t.commitTime),r=zh(t.commitTime);return this.listener.A_(r,n)}return Ni(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=dV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>lIt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QIt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Ft(it.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,cV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ft(it.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,cV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===it.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ft(it.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class JIt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(ig(n),this.y_=!1):Gt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZIt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{t_(this)&&(Gt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Bn(u);l.M_.add(4),await mk(l),l.N_.set("Unknown"),l.M_.delete(4),await pk(l)}(this))})}),this.N_=new JIt(r,i)}}async function pk(e){if(t_(e))for(const t of e.x_)await t(!0)}async function mk(e){for(const t of e.x_)await t(!1)}function Fke(e,t){const n=Bn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),ZX(n)?JX(n):NS(n).Xo()&&QX(n,t))}function XX(e,t){const n=Bn(e),r=NS(n);n.F_.delete(t),r.Xo()&&jke(n,t),n.F_.size===0&&(r.Xo()?r.n_():t_(n)&&n.N_.set("Unknown"))}function QX(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(jn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}NS(e).P_(t)}function jke(e,t){e.L_.xe(t),NS(e).I_(t)}function JX(e){e.L_=new tIt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),NS(e).start(),e.N_.w_()}function ZX(e){return t_(e)&&!NS(e).Zo()&&e.F_.size>0}function t_(e){return Bn(e).M_.size===0}function Bke(e){e.L_=void 0}async function ekt(e){e.N_.set("Online")}async function tkt(e){e.F_.forEach((t,n)=>{QX(e,t)})}async function nkt(e,t){Bke(e),ZX(e)?(e.N_.D_(t),JX(e)):e.N_.set("Unknown")}async function rkt(e,t,n){if(e.N_.set("Online"),t instanceof Cke&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){Gt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await IM(e,r)}else if(t instanceof VD?e.L_.Ke(t):t instanceof Tke?e.L_.He(t):e.L_.We(t),!n.isEqual(jn.min()))try{const r=await Mke(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Wa.EMPTY_BYTE_STRING,c.snapshotVersion)),jke(s,u);const f=new I0(c.target,u,l,c.sequenceNumber);QX(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Gt("RemoteStore","Failed to raise snapshot:",r),await IM(e,r)}}async function IM(e,t,n){if(!fk(t))throw t;e.M_.add(1),await mk(e),e.N_.set("Offline"),n||(n=()=>Mke(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Gt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await pk(e)})}function Uke(e,t){return t().catch(n=>IM(e,n,t))}async function J6(e){const t=Bn(e),n=Ty(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;ikt(t);)try{const i=await UIt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,skt(t,i)}catch(i){await IM(t,i)}zke(t)&&Vke(t)}function ikt(e){return t_(e)&&e.v_.length<10}function skt(e,t){e.v_.push(t);const n=Ty(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function zke(e){return t_(e)&&!Ty(e).Zo()&&e.v_.length>0}function Vke(e){Ty(e).start()}async function okt(e){Ty(e).V_()}async function akt(e){const t=Ty(e);for(const n of e.v_)t.d_(n.mutations)}async function ukt(e,t,n){const r=e.v_.shift(),i=HX.from(r,t,n);await Uke(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await J6(e)}async function lkt(e,t){t&&Ty(e).E_&&await async function(r,i){if(function(o){return JAt(o)&&o!==it.ABORTED}(i.code)){const s=r.v_.shift();Ty(r).t_(),await Uke(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await J6(r)}}(e,t),zke(e)&&Vke(e)}async function fhe(e,t){const n=Bn(e);n.asyncQueue.verifyOperationInProgress(),Gt("RemoteStore","RemoteStore received new credentials");const r=t_(n);n.M_.add(3),await mk(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await pk(n)}async function ckt(e,t){const n=Bn(e);t?(n.M_.delete(2),await pk(n)):t||(n.M_.add(2),await mk(n),n.N_.set("Unknown"))}function NS(e){return e.B_||(e.B_=function(n,r,i){const s=Bn(n);return s.f_(),new KIt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:ekt.bind(null,e),To:tkt.bind(null,e),Ao:nkt.bind(null,e),h_:rkt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),ZX(e)?JX(e):e.N_.set("Unknown")):(await e.B_.stop(),Bke(e))})),e.B_}function Ty(e){return e.k_||(e.k_=function(n,r,i){const s=Bn(n);return s.f_(),new XIt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:okt.bind(null,e),Ao:lkt.bind(null,e),R_:akt.bind(null,e),A_:ukt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await J6(e)):(await e.k_.stop(),e.v_.length>0&&(Gt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Om,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new eQ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ft(it.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tQ(e,t){if(ig("AsyncQueue",`${t}: ${e}`),fk(e))return new Ft(it.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||ln.comparator(n.key,r.key):(n,r)=>ln.comparator(n.key,r.key),this.keyedMap=VC(),this.sortedSet=new cs(this.comparator)}static emptySet(t){return new bE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof bE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new bE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dhe{constructor(){this.q_=new cs(ln.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Nn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class hx{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new hx(t,n,bE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&q6(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fkt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class dkt{constructor(){this.queries=new RS(t=>fke(t),q6),this.onlineState="Unknown",this.z_=new Set}}async function Hke(e,t){const n=Bn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new fkt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=tQ(o,`Initialization of query '${Nw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&nQ(n)}async function qke(e,t){const n=Bn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hkt(e,t){const n=Bn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&nQ(n)}function pkt(e,t,n){const r=Bn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function nQ(e){e.z_.forEach(t=>{t.next()})}var pV,hhe;(hhe=pV||(pV={})).J_="default",hhe.Cache="cache";class Wke{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new hx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=hx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==pV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gke{constructor(t){this.key=t}}class Yke{constructor(t){this.key=t}}class mkt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=pr(),this.mutatedKeys=pr(),this.Ia=dke(t),this.Ta=new bE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new dhe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=W6(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),g=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let y=!1;d&&h?d.data.isEqual(h.data)?p!==g&&(r.track({type:3,doc:h}),y=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),y=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),y=!0):d&&!h&&(r.track({type:1,doc:d}),y=!0,(u||l)&&(a=!0)),y&&(h?(o=o.add(h),s=g?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nn()}};return g(h)-g(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new hx(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new dhe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=pr(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new Yke(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new Gke(r))}),n}pa(t){this.la=t.hs,this.Pa=pr();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return hx.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class gkt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class ykt{constructor(t){this.key=t,this.wa=!1}}class vkt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new RS(a=>fke(a),q6),this.Da=new Map,this.Ca=new Set,this.va=new cs(ln.comparator),this.Fa=new Map,this.Ma=new GX,this.xa={},this.Oa=new Map,this.Na=dx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function bkt(e,t,n=!0){const r=eRe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await Kke(r,t,n,!0),i}async function _kt(e,t){const n=eRe(e);await Kke(n,t,!0,!1)}async function Kke(e,t,n,r){const i=await zIt(e.localStore,Uh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await wkt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&Fke(e.remoteStore,i),a}async function wkt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(g,y,b,_){let E=y.view.da(b);E.Xi&&(E=await uhe(g.localStore,y.query,!1).then(({documents:A})=>y.view.da(A,E)));const C=_&&_.targetChanges.get(y.targetId),x=_&&_.targetMismatches.get(y.targetId)!=null,T=y.view.applyChanges(E,g.isPrimaryClient,C,x);return mhe(g,y.targetId,T.fa),T.snapshot}(e,f,d,h);const s=await uhe(e.localStore,t,!0),o=new mkt(t,s.hs),a=o.da(s.documents),u=hk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);mhe(e,n,l.fa);const c=new gkt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function Ekt(e,t,n){const r=Bn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!q6(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await hV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&XX(r.remoteStore,i.targetId),mV(r,i.targetId)}).catch(ck)):(mV(r,i.targetId),await hV(r.localStore,i.targetId,!0))}async function xkt(e,t){const n=Bn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),XX(n.remoteStore,r.targetId))}async function Skt(e,t,n){const r=Nkt(e);try{const i=await function(o,a){const u=Bn(o),l=go.now(),c=a.reduce((h,p)=>h.add(p.key),pr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=sg(),g=pr();return u.os.getEntries(h,c).next(y=>{p=y,p.forEach((b,_)=>{_.isValidDocument()||(g=g.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(y=>{f=y;const b=[];for(const _ of a){const E=GAt(_,f.get(_.key).overlayedDocument);E!=null&&b.push(new sv(_.key,E,rke(E.value.mapValue),gl.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,b,a)}).next(y=>{d=y;const b=y.applyToLocalDocumentSet(f,g);return u.documentOverlayCache.saveOverlays(h,y.batchId,b)})}).then(()=>({batchId:d.batchId,changes:pke(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new cs(Xr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await gk(r,i.changes),await J6(r.remoteStore)}catch(i){const s=tQ(i,"Failed to persist write");n.reject(s)}}async function Xke(e,t){const n=Bn(e);try{const r=await jIt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(Ni(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Ni(o.wa):i.removedDocuments.size>0&&(Ni(o.wa),o.wa=!1))}),await gk(n,r,t)}catch(r){await ck(r)}}function phe(e,t,n){const r=Bn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Bn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&nQ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Tkt(e,t,n){const r=Bn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new cs(ln.comparator);o=o.insert(s,Ma.newNoDocument(s,jn.min()));const a=pr().add(s),u=new X6(jn.min(),new Map,new cs(Xr),o,a);await Xke(r,u),r.va=r.va.remove(s),r.Fa.delete(t),rQ(r)}else await hV(r.localStore,t,!1).then(()=>mV(r,t,n)).catch(ck)}async function Ckt(e,t){const n=Bn(e),r=t.batch.batchId;try{const i=await FIt(n.localStore,t);Jke(n,r,null),Qke(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await gk(n,i)}catch(i){await ck(i)}}async function Akt(e,t,n){const r=Bn(e);try{const i=await function(o,a){const u=Bn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Ni(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);Jke(r,t,n),Qke(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await gk(r,i)}catch(i){await ck(i)}}function Qke(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function Jke(e,t,n){const r=Bn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function mV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||Zke(e,r)})}function Zke(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(XX(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),rQ(e))}function mhe(e,t,n){for(const r of n)r instanceof Gke?(e.Ma.addReference(r.key,t),Ikt(e,r)):r instanceof Yke?(Gt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Zke(e,r.key)):Nn()}function Ikt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Gt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),rQ(e))}function rQ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new ln(Fi.fromString(t)),r=e.Na.next();e.Fa.set(r,new ykt(n)),e.va=e.va.insert(n,r),Fke(e.remoteStore,new I0(Uh(VX(n.path)),r,"TargetPurposeLimboResolution",LX.oe))}}async function gk(e,t,n){const r=Bn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=KX.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=Bn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>mt.forEach(l,d=>mt.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>mt.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!fk(f))throw f;Gt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,g=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,g)}}}(r.localStore,s))}async function kkt(e,t){const n=Bn(e);if(!n.currentUser.isEqual(t)){Gt("SyncEngine","User change. New user:",t.toKey());const r=await Oke(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Ft(it.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await gk(n,r.us)}}function Rkt(e,t){const n=Bn(e),r=n.Fa.get(t);if(r&&r.wa)return pr().add(r.key);{let i=pr();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function eRe(e){const t=Bn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Xke.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Rkt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Tkt.bind(null,t),t.Sa.h_=hkt.bind(null,t.eventManager),t.Sa.ka=pkt.bind(null,t.eventManager),t}function Nkt(e){const t=Bn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ckt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Akt.bind(null,t),t}class ghe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Q6(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return LIt(this.persistence,new MIt,t.initialUser,this.serializer)}createPersistence(t){return new PIt(YX.Hr,this.serializer)}createSharedClientState(t){return new HIt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Pkt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>phe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=kkt.bind(null,this.syncEngine),await ckt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new dkt}()}createDatastore(t){const n=Q6(t.databaseInfo.databaseId),r=function(s){return new YIt(s)}(t.databaseInfo);return function(s,o,a,u){return new QIt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new ZIt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>phe(this.syncEngine,n,0),function(){return che.D()?new che:new qIt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new vkt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=Bn(r);Gt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await mk(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tRe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):ig("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dkt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qu.UNAUTHENTICATED,this.clientId=eke.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Gt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Gt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ft(it.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Om;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=tQ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function lB(e,t){e.asyncQueue.verifyOperationInProgress(),Gt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Oke(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function yhe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await nRe(e);Gt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>fhe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>fhe(t.remoteStore,i)),e._onlineComponents=t}function Okt(e){return e.name==="FirebaseError"?e.code===it.FAILED_PRECONDITION||e.code===it.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function nRe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Gt("FirestoreClient","Using user provided OfflineComponentProvider");try{await lB(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Okt(n))throw n;LA("Error using user provided cache. Falling back to memory cache: "+n),await lB(e,new ghe)}}else Gt("FirestoreClient","Using default OfflineComponentProvider"),await lB(e,new ghe);return e._offlineComponents}async function iQ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Gt("FirestoreClient","Using user provided OnlineComponentProvider"),await yhe(e,e._uninitializedComponentsProvider._online)):(Gt("FirestoreClient","Using default OnlineComponentProvider"),await yhe(e,new Pkt))),e._onlineComponents}function Mkt(e){return nRe(e).then(t=>t.persistence)}function $kt(e){return iQ(e).then(t=>t.remoteStore)}function Lkt(e){return iQ(e).then(t=>t.syncEngine)}async function rRe(e){const t=await iQ(e),n=t.eventManager;return n.onListen=bkt.bind(null,t.syncEngine),n.onUnlisten=Ekt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=_kt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=xkt.bind(null,t.syncEngine),n}function Fkt(e){return e.asyncQueue.enqueue(async()=>{const t=await Mkt(e),n=await $kt(e);return t.setNetworkEnabled(!0),function(i){const s=Bn(i);return s.M_.delete(0),pk(s)}(n)})}function jkt(e,t,n={}){const r=new Om;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new tRe({next:d=>{o.enqueueAndForget(()=>qke(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Ft(it.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Ft(it.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Wke(VX(a.path),c,{includeMetadataChanges:!0,ra:!0});return Hke(s,f)}(await rRe(e),e.asyncQueue,t,n,r)),r.promise}function Bkt(e,t,n={}){const r=new Om;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new tRe({next:d=>{o.enqueueAndForget(()=>qke(s,f)),d.fromCache&&u.source==="server"?l.reject(new Ft(it.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Wke(a,c,{includeMetadataChanges:!0,ra:!0});return Hke(s,f)}(await rRe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iRe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vhe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sRe(e,t,n){if(!n)throw new Ft(it.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ukt(e,t,n,r){if(t===!0&&r===!0)throw new Ft(it.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function bhe(e){if(!ln.isDocumentKey(e))throw new Ft(it.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function _he(e){if(ln.isDocumentKey(e))throw new Ft(it.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Z6(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Nn()}function Sd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ft(it.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Z6(e);throw new Ft(it.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class whe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Ft(it.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ft(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ukt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iRe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Ft(it.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Ft(it.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Ft(it.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class sQ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new whe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ft(it.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Ft(it.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new whe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rAt;switch(r.type){case"firstParty":return new oAt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ft(it.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=vhe.get(n);r&&(Gt("ComponentProvider","Removing Datastore"),vhe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new n_(this.firestore,t,this._query)}}class wu{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new G0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new wu(this.firestore,t,this._key)}}class G0 extends n_{constructor(t,n,r){super(t,n,VX(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new wu(this.firestore,null,new ln(t))}withConverter(t){return new G0(this.firestore,t,this._path)}}function Ff(e,t,...n){if(e=Di(e),sRe("collection","path",t),e instanceof sQ){const r=Fi.fromString(t,...n);return _he(r),new G0(e,null,r)}{if(!(e instanceof wu||e instanceof G0))throw new Ft(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Fi.fromString(t,...n));return _he(r),new G0(e.firestore,null,r)}}function hs(e,t,...n){if(e=Di(e),arguments.length===1&&(t=eke.newId()),sRe("doc","path",t),e instanceof sQ){const r=Fi.fromString(t,...n);return bhe(r),new wu(e,null,new ln(r))}{if(!(e instanceof wu||e instanceof G0))throw new Ft(it.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Fi.fromString(t,...n));return bhe(r),new wu(e.firestore,e instanceof G0?e.converter:null,new ln(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zkt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new $ke(this,"async_queue_retry"),this.hu=()=>{const n=uB();n&&Gt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=uB();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=uB();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Om;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!fk(t))throw t;Gt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ig("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=eQ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Nn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class ov extends sQ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new zkt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||oRe(this),this._firestoreClient.terminate()}}function Vkt(e,t,n){n||(n="(default)");const r=CS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(OA(s,t))return i;throw new Ft(it.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Ft(it.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ft(it.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function yk(e){return e._firestoreClient||oRe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function oRe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new bAt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,iRe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Dkt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Hkt(e){return Fkt(yk(e=Sd(e,ov)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(t){this._byteString=t}static fromBase64String(t){try{return new px(Wa.fromBase64String(t))}catch(n){throw new Ft(it.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new px(Wa.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Ft(it.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new aa(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oQ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Ft(it.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Ft(it.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Xr(this._lat,t._lat)||Xr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qkt=/^__.*__$/;class Wkt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new sv(t,this.data,this.fieldMask,n,this.fieldTransforms):new dk(t,this.data,n,this.fieldTransforms)}}class aRe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new sv(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function uRe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nn()}}class aQ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new aQ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return kM(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(uRe(this.fu)&&qkt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class Gkt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Q6(t)}Fu(t,n,r,i=!1){return new aQ({fu:t,methodName:n,vu:r,path:aa.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tF(e){const t=e._freezeSettings(),n=Q6(e._databaseId);return new Gkt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function lRe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);lQ("Data must be an object, but it was:",o,r);const a=dRe(r,o);let u,l;if(s.merge)u=new ec(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=gV(t,f,n);if(!o.contains(d))throw new Ft(it.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);pRe(c,d)||c.push(d)}u=new ec(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new Wkt(new ol(a),u,l)}class nF extends eF{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof nF}}class uQ extends eF{_toFieldTransform(t){return new VAt(t.path,new VA)}isEqual(t){return t instanceof uQ}}function cRe(e,t,n,r){const i=e.Fu(1,t,n);lQ("Data must be an object, but it was:",i,r);const s=[],o=ol.empty();e_(r,(u,l)=>{const c=cQ(t,u,n);l=Di(l);const f=i.Su(c);if(l instanceof nF)s.push(c);else{const d=bk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new ec(s);return new aRe(o,a,i.fieldTransforms)}function fRe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[gV(t,r,n)],u=[i];if(s.length%2!=0)throw new Ft(it.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(gV(t,s[d])),u.push(s[d+1]);const l=[],c=ol.empty();for(let d=a.length-1;d>=0;--d)if(!pRe(l,a[d])){const h=a[d];let p=u[d];p=Di(p);const g=o.Su(h);if(p instanceof nF)l.push(h);else{const y=bk(p,g);y!=null&&(l.push(h),c.set(h,y))}}const f=new ec(l);return new aRe(c,f,o.fieldTransforms)}function Ykt(e,t,n,r=!1){return bk(n,e.Fu(r?4:3,t))}function bk(e,t){if(hRe(e=Di(e)))return lQ("Unsupported field value:",t,e),dRe(e,t);if(e instanceof eF)return function(r,i){if(!uRe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=bk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Di(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return BAt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=go.fromDate(r);return{timestampValue:AM(i.serializer,s)}}if(r instanceof go){const s=new go(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:AM(i.serializer,s)}}if(r instanceof oQ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof px)return{bytesValue:Ake(i.serializer,r._byteString)};if(r instanceof wu){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:WX(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Z6(r)}`)}(e,t)}function dRe(e,t){const n={};return tke(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):e_(e,(r,i)=>{const s=bk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function hRe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof go||e instanceof oQ||e instanceof px||e instanceof wu||e instanceof eF)}function lQ(e,t,n){if(!hRe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Z6(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function gV(e,t,n){if((t=Di(t))instanceof vk)return t._internalPath;if(typeof t=="string")return cQ(e,t);throw kM("Field path arguments must be of type string or ",e,!1,void 0,n)}const Kkt=new RegExp("[~\\*/\\[\\]]");function cQ(e,t,n){if(t.search(Kkt)>=0)throw kM(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new vk(...t.split("."))._internalPath}catch{throw kM(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function kM(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Ft(it.INVALID_ARGUMENT,a+e+u)}function pRe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mRe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wu(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Xkt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(rF("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Xkt extends mRe{data(){return super.data()}}function rF(e,t){return typeof t=="string"?cQ(e,t):t instanceof vk?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qkt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Ft(it.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fQ{}class gRe extends fQ{}function Ehe(e,t,...n){let r=[];t instanceof fQ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof dQ).length,a=s.filter(u=>u instanceof iF).length;if(o>1||o>0&&a>0)throw new Ft(it.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class iF extends gRe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new iF(t,n,r)}_apply(t){const n=this._parse(t);return yRe(t._query,n),new n_(t.firestore,t.converter,aV(t._query,n))}_parse(t){const n=tF(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Ft(it.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){She(f,c);const h=[];for(const p of f)h.push(xhe(u,s,p));d={arrayValue:{values:h}}}else d=xhe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||She(f,c),d=Ykt(a,o,f,c==="in"||c==="not-in");return Js.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Jkt(e,t,n){const r=t,i=rF("where",e);return iF._create(i,r,n)}class dQ extends fQ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new dQ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xd.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)yRe(o,u),o=aV(o,u)}(t._query,n),new n_(t.firestore,t.converter,aV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hQ extends gRe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new hQ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Ft(it.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Ft(it.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zA(s,o)}(t._query,this._field,this._direction);return new n_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new kS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function Zkt(e,t="asc"){const n=t,r=rF("orderBy",e);return hQ._create(r,n)}function xhe(e,t,n){if(typeof(n=Di(n))=="string"){if(n==="")throw new Ft(it.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cke(t)&&n.indexOf("/")!==-1)throw new Ft(it.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Fi.fromString(n));if(!ln.isDocumentKey(r))throw new Ft(it.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return qde(e,new ln(r))}if(n instanceof wu)return qde(e,n._key);throw new Ft(it.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Z6(n)}.`)}function She(e,t){if(!Array.isArray(e)||e.length===0)throw new Ft(it.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yRe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Ft(it.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Ft(it.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class eRt{convertValue(t,n="none"){switch(mb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Qs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(pb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Nn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return e_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new oQ(Qs(t.latitude),Qs(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=jX(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jA(t));default:return null}}convertTimestamp(t){const n=Sy(t);return new go(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Fi.fromString(t);Ni(Dke(r));const i=new BA(r.get(1),r.get(3)),s=new ln(r.popFirst(5));return i.isEqual(n)||ig(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vRe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class bRe extends mRe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new HD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(rF("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class HD extends bRe{data(t={}){return super.data(t)}}class tRt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new qC(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new HD(this._firestore,this._userDataWriter,r.key,r,new qC(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ft(it.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new HD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new HD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:nRt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function nRt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(e){e=Sd(e,wu);const t=Sd(e.firestore,ov);return jkt(yk(t),e._key).then(n=>sRt(t,e,n))}class _Re extends eRt{constructor(t){super(),this.firestore=t}convertBytes(t){return new px(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new wu(this.firestore,null,n)}}function QT(e){e=Sd(e,n_);const t=Sd(e.firestore,ov),n=yk(t),r=new _Re(t);return Qkt(e._query),Bkt(n,e._query).then(i=>new tRt(t,r,e,i))}function au(e,t,n){e=Sd(e,wu);const r=Sd(e.firestore,ov),i=vRe(e.converter,t,n);return sF(r,[lRe(tF(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,gl.none())])}function rRt(e,t,n,...r){e=Sd(e,wu);const i=Sd(e.firestore,ov),s=tF(i);let o;return o=typeof(t=Di(t))=="string"||t instanceof vk?fRe(s,"updateDoc",e._key,t,n,r):cRe(s,"updateDoc",e._key,t),sF(i,[o.toMutation(e._key,gl.exists(!0))])}function iRt(e){return sF(Sd(e.firestore,ov),[new K6(e._key,gl.none())])}function sF(e,t){return function(r,i){const s=new Om;return r.asyncQueue.enqueueAndForget(async()=>Skt(await Lkt(r),i,s)),s.promise}(yk(e),t)}function sRt(e,t,n){const r=n.docs.get(t._key),i=new _Re(e);return new bRe(e,i,t._key,r,new qC(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oRt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=tF(t)}set(t,n,r){this._verifyNotCommitted();const i=cB(t,this._firestore),s=vRe(i.converter,n,r),o=lRe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,gl.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=cB(t,this._firestore);let o;return o=typeof(n=Di(n))=="string"||n instanceof vk?fRe(this._dataReader,"WriteBatch.update",s._key,n,r,i):cRe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,gl.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=cB(t,this._firestore);return this._mutations=this._mutations.concat(new K6(n._key,gl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ft(it.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cB(e,t){if((e=Di(e)).firestore!==t)throw new Ft(it.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function aRt(){return new uQ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function The(e){return yk(e=Sd(e,ov)),new oRt(e,t=>sF(e,t))}(function(t,n=!0){(function(i){IS=i})(Zb),ng(new rp("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new ov(new iAt(r.getProvider("auth-internal")),new uAt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Ft(it.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new BA(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),md(Ude,"4.6.3",t),md(Ude,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV=new Map,wRe={activated:!1,tokenObservers:[]},uRt={initialized:!1,enabled:!1};function yo(e){return yV.get(e)||Object.assign({},wRe)}function lRt(e,t){return yV.set(e,t),yV.get(e)}function oF(){return uRt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERe="https://content-firebaseappcheck.googleapis.com/v1",cRt="exchangeRecaptchaV3Token",fRt="exchangeDebugToken",Che={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},dRt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hRt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new DA,this.pending.promise.catch(n=>{}),await pRt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new DA,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function pRt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mRt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},dl=new TS("appCheck","AppCheck",mRt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ahe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function pQ(e){if(!yo(e).activated)throw dl.create("use-before-activation",{appName:e.name})}function xRe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=OP(n)+"d:"),r&&(o+=OP(r)+"h:"),o+=OP(i)+"m:"+OP(s)+"s",o}function OP(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mQ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw dl.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw dl.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw dl.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw dl.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function gRt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${ERe}/projects/${n}/apps/${r}:${cRt}?key=${i}`,body:{recaptcha_v3_token:t}}}function SRe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${ERe}/projects/${n}/apps/${r}:${fRt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yRt="firebase-app-check-database",vRt=1,WA="firebase-app-check-store",TRe="debug-token";let MP=null;function CRe(){return MP||(MP=new Promise((e,t)=>{try{const n=indexedDB.open(yRt,vRt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(dl.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(WA,{keyPath:"compositeKey"})}}}catch(n){t(dl.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),MP)}function bRt(e){return IRe(kRe(e))}function _Rt(e,t){return ARe(kRe(e),t)}function wRt(e){return ARe(TRe,e)}function ERt(){return IRe(TRe)}async function ARe(e,t){const r=(await CRe()).transaction(WA,"readwrite"),s=r.objectStore(WA).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(dl.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function IRe(e){const n=(await CRe()).transaction(WA,"readonly"),i=n.objectStore(WA).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(dl.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function kRe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=new L6("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xRt(e){if(yX()){let t;try{t=await bRt(e)}catch(n){GA.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function fB(e,t){return yX()?_Rt(e,t).catch(n=>{GA.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function SRt(){let e;try{e=await ERt()}catch{}if(e)return e;{const t=xxt();return wRt(t).catch(n=>GA.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gQ(){return oF().enabled}async function yQ(){const e=oF();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function TRt(){const e=WAe(),t=oF();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new DA;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(SRt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CRt={error:"UNKNOWN_ERROR"};function ARt(e){return gX.encodeString(JSON.stringify(e),!1)}async function vV(e,t=!1){const n=e.app;pQ(n);const r=yo(n);let i=r.token,s;if(i&&!Hw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Hw(u)?i=u:await fB(n,void 0))}if(!t&&i&&Hw(i))return{token:i.token};let o=!1;if(gQ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=mQ(SRe(n,await yQ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await fB(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await yo(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?GA.warn(u.message):GA.error(u),s=u}let a;return i?s?Hw(i)?a={token:i.token,internalError:s}:a=khe(s):(a={token:i.token},r.token=i,await fB(n,i)):a=khe(s),o&&PRe(n,a),a}async function IRt(e){const t=e.app;pQ(t);const{provider:n}=yo(t);if(gQ()){const r=await yQ(),{token:i}=await mQ(SRe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function RRe(e,t,n,r){const{app:i}=e,s=yo(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Hw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Ihe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Ihe(e))}function NRe(e,t){const n=yo(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Ihe(e){const{app:t}=e,n=yo(t);let r=n.tokenRefresher;r||(r=kRt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function kRt(e){const{app:t}=e;return new hRt(async()=>{const n=yo(t);let r;if(n.token?r=await vV(e,!0):r=await vV(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=yo(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Che.RETRIAL_MIN_WAIT,Che.RETRIAL_MAX_WAIT)}function PRe(e,t){const n=yo(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Hw(e){return e.expireTimeMillis-Date.now()>0}function khe(e){return{token:ARt(CRt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RRt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=yo(this.app);for(const n of t)NRe(this.app,n.next);return Promise.resolve()}}function NRt(e,t){return new RRt(e,t)}function PRt(e){return{getToken:t=>vV(e,t),getLimitedUseToken:()=>IRt(e),addTokenListener:t=>RRe(e,"INTERNAL",t),removeTokenListener:t=>NRe(e.app,t)}}const DRt="@firebase/app-check",ORt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MRt="https://www.google.com/recaptcha/api.js";function $Rt(e,t){const n=new DA,r=yo(e);r.reCAPTCHAState={initialized:n};const i=LRt(e),s=Ahe(!1);return s?Rhe(e,t,s,i,n):BRt(()=>{const o=Ahe(!1);if(!o)throw new Error("no recaptcha");Rhe(e,t,o,i,n)}),n.promise}function Rhe(e,t,n,r,i){n.ready(()=>{jRt(e,t,n,r),i.resolve(n)})}function LRt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function FRt(e){pQ(e);const n=await yo(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=yo(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function jRt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{yo(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{yo(e).reCAPTCHAState.succeeded=!1}}),s=yo(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function BRt(e){const t=document.createElement("script");t.src=MRt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vQ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;zRt(this._throttleData);const i=await FRt(this._app).catch(o=>{throw dl.create("recaptcha-error")});if(!(!((t=yo(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw dl.create("recaptcha-error");let s;try{s=await mQ(gRt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=URt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),dl.create("throttled",{time:xRe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=CS(t,"heartbeat"),$Rt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof vQ?this._siteKey===t._siteKey:!1}}function URt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+dRt,httpStatus:e};{const n=t?t.backoffCount:0,r=Ixt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function zRt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw dl.create("throttled",{time:xRe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VRt(e=bX(),t){e=Di(e);const n=CS(e,"app-check");if(oF().initialized||TRt(),gQ()&&yQ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw dl.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return HRt(e,t.provider,t.isTokenAutoRefreshEnabled),yo(e).isTokenAutoRefreshEnabled&&RRe(r,"INTERNAL",()=>{}),r}function HRt(e,t,n){const r=lRt(e,Object.assign({},wRe));r.activated=!0,r.provider=t,r.cachedTokenPromise=xRt(e).then(i=>(i&&Hw(i)&&(r.token=i,PRe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const qRt="app-check",Nhe="app-check-internal";function WRt(){ng(new rp(qRt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return NRt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Nhe).initialize()})),ng(new rp(Nhe,e=>{const t=e.getProvider("app-check").getImmediate();return PRt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),md(DRt,ORt)}WRt();function $P(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dB={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Phe;function GRt(){return Phe||(Phe=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof $P=="function"&&$P;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var g=r[l][1][p];return o(g||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof $P=="function"&&$P,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var y=s.document.createElement("script");y.onreadystatechange=function(){p(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},s.document.documentElement.appendChild(y)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var y,b,_=h.length;_;){for(b=h,h=[],y=-1;++y<_;)b[y]();_=h.length}d=!1}r.exports=g;function g(y){h.push(y)===1&&!d&&a()}}).call(this,typeof Zc<"u"?Zc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,x!==o&&g(this,x)}f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,T){if(typeof x!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var A=new this.constructor(o);if(this.state!==c){var k=this.state===l?x:T;h(A,k,this.outcome)}else this.queue.push(new d(A,x,T));return A};function d(x,T,A){this.promise=x,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(x){a.resolve(this.promise,x)},d.prototype.otherCallFulfilled=function(x){h(this.promise,this.onFulfilled,x)},d.prototype.callRejected=function(x){a.reject(this.promise,x)},d.prototype.otherCallRejected=function(x){h(this.promise,this.onRejected,x)};function h(x,T,A){s(function(){var k;try{k=T(A)}catch(N){return a.reject(x,N)}k===x?a.reject(x,new TypeError("Cannot resolve promise with itself")):a.resolve(x,k)})}a.resolve=function(x,T){var A=y(p,T);if(A.status==="error")return a.reject(x,A.value);var k=A.value;if(k)g(x,k);else{x.state=l,x.outcome=T;for(var N=-1,P=x.queue.length;++N<P;)x.queue[N].callFulfilled(T)}return x},a.reject=function(x,T){x.state=u,x.outcome=T;for(var A=-1,k=x.queue.length;++A<k;)x.queue[A].callRejected(T);return x};function p(x){var T=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof T=="function")return function(){T.apply(x,arguments)}}function g(x,T){var A=!1;function k(j){A||(A=!0,a.reject(x,j))}function N(j){A||(A=!0,a.resolve(x,j))}function P(){T(N,k)}var D=y(P);D.status==="error"&&k(D.value)}function y(x,T){var A={};try{A.value=x(T),A.status="success"}catch(k){A.status="error",A.value=k}return A}f.resolve=b;function b(x){return x instanceof this?x:a.resolve(new this(o),x)}f.reject=_;function _(x){var T=new this(o);return a.reject(T,x)}f.all=E;function E(x){var T=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=x.length,k=!1;if(!A)return this.resolve([]);for(var N=new Array(A),P=0,D=-1,j=new this(o);++D<A;)M(x[D],D);return j;function M(B,V){T.resolve(B).then(z,function(G){k||(k=!0,a.reject(j,G))});function z(G){N[V]=G,++P===A&&!k&&(k=!0,a.resolve(j,N))}}}f.race=C;function C(x){var T=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=x.length,k=!1;if(!A)return this.resolve([]);for(var N=-1,P=new this(o);++N<A;)D(x[N]);return P;function D(j){T.resolve(j).then(function(M){k||(k=!0,a.resolve(P,M))},function(M){k||(k=!0,a.reject(P,M))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Zc<"u"?Zc:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(te){return typeof te}:function(te){return te&&typeof Symbol=="function"&&te.constructor===Symbol&&te!==Symbol.prototype?"symbol":typeof te};function o(te,ve){if(!(te instanceof ve))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var te=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ve=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!te||ve)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(te,ve){te=te||[],ve=ve||{};try{return new Blob(te,ve)}catch(Se){if(Se.name!=="TypeError")throw Se;for(var ue=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Te=new ue,Pe=0;Pe<te.length;Pe+=1)Te.append(te[Pe]);return Te.getBlob(ve.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(te,ve){ve&&te.then(function(ue){ve(null,ue)},function(ue){ve(ue)})}function h(te,ve,ue){typeof ve=="function"&&te.then(ve),typeof ue=="function"&&te.catch(ue)}function p(te){return typeof te!="string"&&(console.warn(te+" used as a key, but it is not a string."),te=String(te)),te}function g(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var y="local-forage-detect-blob-support",b=void 0,_={},E=Object.prototype.toString,C="readonly",x="readwrite";function T(te){for(var ve=te.length,ue=new ArrayBuffer(ve),Te=new Uint8Array(ue),Pe=0;Pe<ve;Pe++)Te[Pe]=te.charCodeAt(Pe);return ue}function A(te){return new f(function(ve){var ue=te.transaction(y,x),Te=c([""]);ue.objectStore(y).put(Te,"key"),ue.onabort=function(Pe){Pe.preventDefault(),Pe.stopPropagation(),ve(!1)},ue.oncomplete=function(){var Pe=navigator.userAgent.match(/Chrome\/(\d+)/),Se=navigator.userAgent.match(/Edge\//);ve(Se||!Pe||parseInt(Pe[1],10)>=43)}}).catch(function(){return!1})}function k(te){return typeof b=="boolean"?f.resolve(b):A(te).then(function(ve){return b=ve,b})}function N(te){var ve=_[te.name],ue={};ue.promise=new f(function(Te,Pe){ue.resolve=Te,ue.reject=Pe}),ve.deferredOperations.push(ue),ve.dbReady?ve.dbReady=ve.dbReady.then(function(){return ue.promise}):ve.dbReady=ue.promise}function P(te){var ve=_[te.name],ue=ve.deferredOperations.pop();if(ue)return ue.resolve(),ue.promise}function D(te,ve){var ue=_[te.name],Te=ue.deferredOperations.pop();if(Te)return Te.reject(ve),Te.promise}function j(te,ve){return new f(function(ue,Te){if(_[te.name]=_[te.name]||K(),te.db)if(ve)N(te),te.db.close();else return ue(te.db);var Pe=[te.name];ve&&Pe.push(te.version);var Se=u.open.apply(u,Pe);ve&&(Se.onupgradeneeded=function(Xe){var at=Se.result;try{at.createObjectStore(te.storeName),Xe.oldVersion<=1&&at.createObjectStore(y)}catch(lt){if(lt.name==="ConstraintError")console.warn('The database "'+te.name+'" has been upgraded from version '+Xe.oldVersion+" to version "+Xe.newVersion+', but the storage "'+te.storeName+'" already exists.');else throw lt}}),Se.onerror=function(Xe){Xe.preventDefault(),Te(Se.error)},Se.onsuccess=function(){var Xe=Se.result;Xe.onversionchange=function(at){at.target.close()},ue(Xe),P(te)}})}function M(te){return j(te,!1)}function B(te){return j(te,!0)}function V(te,ve){if(!te.db)return!0;var ue=!te.db.objectStoreNames.contains(te.storeName),Te=te.version<te.db.version,Pe=te.version>te.db.version;if(Te&&(te.version!==ve&&console.warn('The database "'+te.name+`" can't be downgraded from version `+te.db.version+" to version "+te.version+"."),te.version=te.db.version),Pe||ue){if(ue){var Se=te.db.version+1;Se>te.version&&(te.version=Se)}return!0}return!1}function z(te){return new f(function(ve,ue){var Te=new FileReader;Te.onerror=ue,Te.onloadend=function(Pe){var Se=btoa(Pe.target.result||"");ve({__local_forage_encoded_blob:!0,data:Se,type:te.type})},Te.readAsBinaryString(te)})}function G(te){var ve=T(atob(te.data));return c([ve],{type:te.type})}function Y(te){return te&&te.__local_forage_encoded_blob}function Q(te){var ve=this,ue=ve._initReady().then(function(){var Te=_[ve._dbInfo.name];if(Te&&Te.dbReady)return Te.dbReady});return h(ue,te,te),ue}function L(te){N(te);for(var ve=_[te.name],ue=ve.forages,Te=0;Te<ue.length;Te++){var Pe=ue[Te];Pe._dbInfo.db&&(Pe._dbInfo.db.close(),Pe._dbInfo.db=null)}return te.db=null,M(te).then(function(Se){return te.db=Se,V(te)?B(te):Se}).then(function(Se){te.db=ve.db=Se;for(var Xe=0;Xe<ue.length;Xe++)ue[Xe]._dbInfo.db=Se}).catch(function(Se){throw D(te,Se),Se})}function U(te,ve,ue,Te){Te===void 0&&(Te=1);try{var Pe=te.db.transaction(te.storeName,ve);ue(null,Pe)}catch(Se){if(Te>0&&(!te.db||Se.name==="InvalidStateError"||Se.name==="NotFoundError"))return f.resolve().then(function(){if(!te.db||Se.name==="NotFoundError"&&!te.db.objectStoreNames.contains(te.storeName)&&te.version<=te.db.version)return te.db&&(te.version=te.db.version+1),B(te)}).then(function(){return L(te).then(function(){U(te,ve,ue,Te-1)})}).catch(ue);ue(Se)}}function K(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function q(te){var ve=this,ue={db:null};if(te)for(var Te in te)ue[Te]=te[Te];var Pe=_[ue.name];Pe||(Pe=K(),_[ue.name]=Pe),Pe.forages.push(ve),ve._initReady||(ve._initReady=ve.ready,ve.ready=Q);var Se=[];function Xe(){return f.resolve()}for(var at=0;at<Pe.forages.length;at++){var lt=Pe.forages[at];lt!==ve&&Se.push(lt._initReady().catch(Xe))}var ut=Pe.forages.slice(0);return f.all(Se).then(function(){return ue.db=Pe.db,M(ue)}).then(function(_t){return ue.db=_t,V(ue,ve._defaultConfig.version)?B(ue):_t}).then(function(_t){ue.db=Pe.db=_t,ve._dbInfo=ue;for(var Lt=0;Lt<ut.length;Lt++){var pn=ut[Lt];pn!==ve&&(pn._dbInfo.db=ue.db,pn._dbInfo.version=ue.version)}})}function X(te,ve){var ue=this;te=p(te);var Te=new f(function(Pe,Se){ue.ready().then(function(){U(ue._dbInfo,C,function(Xe,at){if(Xe)return Se(Xe);try{var lt=at.objectStore(ue._dbInfo.storeName),ut=lt.get(te);ut.onsuccess=function(){var _t=ut.result;_t===void 0&&(_t=null),Y(_t)&&(_t=G(_t)),Pe(_t)},ut.onerror=function(){Se(ut.error)}}catch(_t){Se(_t)}})}).catch(Se)});return d(Te,ve),Te}function Z(te,ve){var ue=this,Te=new f(function(Pe,Se){ue.ready().then(function(){U(ue._dbInfo,C,function(Xe,at){if(Xe)return Se(Xe);try{var lt=at.objectStore(ue._dbInfo.storeName),ut=lt.openCursor(),_t=1;ut.onsuccess=function(){var Lt=ut.result;if(Lt){var pn=Lt.value;Y(pn)&&(pn=G(pn));var Qt=te(pn,Lt.key,_t++);Qt!==void 0?Pe(Qt):Lt.continue()}else Pe()},ut.onerror=function(){Se(ut.error)}}catch(Lt){Se(Lt)}})}).catch(Se)});return d(Te,ve),Te}function ae(te,ve,ue){var Te=this;te=p(te);var Pe=new f(function(Se,Xe){var at;Te.ready().then(function(){return at=Te._dbInfo,E.call(ve)==="[object Blob]"?k(at.db).then(function(lt){return lt?ve:z(ve)}):ve}).then(function(lt){U(Te._dbInfo,x,function(ut,_t){if(ut)return Xe(ut);try{var Lt=_t.objectStore(Te._dbInfo.storeName);lt===null&&(lt=void 0);var pn=Lt.put(lt,te);_t.oncomplete=function(){lt===void 0&&(lt=null),Se(lt)},_t.onabort=_t.onerror=function(){var Qt=pn.error?pn.error:pn.transaction.error;Xe(Qt)}}catch(Qt){Xe(Qt)}})}).catch(Xe)});return d(Pe,ue),Pe}function he(te,ve){var ue=this;te=p(te);var Te=new f(function(Pe,Se){ue.ready().then(function(){U(ue._dbInfo,x,function(Xe,at){if(Xe)return Se(Xe);try{var lt=at.objectStore(ue._dbInfo.storeName),ut=lt.delete(te);at.oncomplete=function(){Pe()},at.onerror=function(){Se(ut.error)},at.onabort=function(){var _t=ut.error?ut.error:ut.transaction.error;Se(_t)}}catch(_t){Se(_t)}})}).catch(Se)});return d(Te,ve),Te}function ge(te){var ve=this,ue=new f(function(Te,Pe){ve.ready().then(function(){U(ve._dbInfo,x,function(Se,Xe){if(Se)return Pe(Se);try{var at=Xe.objectStore(ve._dbInfo.storeName),lt=at.clear();Xe.oncomplete=function(){Te()},Xe.onabort=Xe.onerror=function(){var ut=lt.error?lt.error:lt.transaction.error;Pe(ut)}}catch(ut){Pe(ut)}})}).catch(Pe)});return d(ue,te),ue}function be(te){var ve=this,ue=new f(function(Te,Pe){ve.ready().then(function(){U(ve._dbInfo,C,function(Se,Xe){if(Se)return Pe(Se);try{var at=Xe.objectStore(ve._dbInfo.storeName),lt=at.count();lt.onsuccess=function(){Te(lt.result)},lt.onerror=function(){Pe(lt.error)}}catch(ut){Pe(ut)}})}).catch(Pe)});return d(ue,te),ue}function Ce(te,ve){var ue=this,Te=new f(function(Pe,Se){if(te<0){Pe(null);return}ue.ready().then(function(){U(ue._dbInfo,C,function(Xe,at){if(Xe)return Se(Xe);try{var lt=at.objectStore(ue._dbInfo.storeName),ut=!1,_t=lt.openKeyCursor();_t.onsuccess=function(){var Lt=_t.result;if(!Lt){Pe(null);return}te===0||ut?Pe(Lt.key):(ut=!0,Lt.advance(te))},_t.onerror=function(){Se(_t.error)}}catch(Lt){Se(Lt)}})}).catch(Se)});return d(Te,ve),Te}function oe(te){var ve=this,ue=new f(function(Te,Pe){ve.ready().then(function(){U(ve._dbInfo,C,function(Se,Xe){if(Se)return Pe(Se);try{var at=Xe.objectStore(ve._dbInfo.storeName),lt=at.openKeyCursor(),ut=[];lt.onsuccess=function(){var _t=lt.result;if(!_t){Te(ut);return}ut.push(_t.key),_t.continue()},lt.onerror=function(){Pe(lt.error)}}catch(_t){Pe(_t)}})}).catch(Pe)});return d(ue,te),ue}function re(te,ve){ve=g.apply(this,arguments);var ue=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName);var Te=this,Pe;if(!te.name)Pe=f.reject("Invalid arguments");else{var Se=te.name===ue.name&&Te._dbInfo.db,Xe=Se?f.resolve(Te._dbInfo.db):M(te).then(function(at){var lt=_[te.name],ut=lt.forages;lt.db=at;for(var _t=0;_t<ut.length;_t++)ut[_t]._dbInfo.db=at;return at});te.storeName?Pe=Xe.then(function(at){if(at.objectStoreNames.contains(te.storeName)){var lt=at.version+1;N(te);var ut=_[te.name],_t=ut.forages;at.close();for(var Lt=0;Lt<_t.length;Lt++){var pn=_t[Lt];pn._dbInfo.db=null,pn._dbInfo.version=lt}var Qt=new f(function(Jn,Zt){var Fr=u.open(te.name,lt);Fr.onerror=function(ro){var $u=Fr.result;$u.close(),Zt(ro)},Fr.onupgradeneeded=function(){var ro=Fr.result;ro.deleteObjectStore(te.storeName)},Fr.onsuccess=function(){var ro=Fr.result;ro.close(),Jn(ro)}});return Qt.then(function(Jn){ut.db=Jn;for(var Zt=0;Zt<_t.length;Zt++){var Fr=_t[Zt];Fr._dbInfo.db=Jn,P(Fr._dbInfo)}}).catch(function(Jn){throw(D(te,Jn)||f.resolve()).catch(function(){}),Jn})}}):Pe=Xe.then(function(at){N(te);var lt=_[te.name],ut=lt.forages;at.close();for(var _t=0;_t<ut.length;_t++){var Lt=ut[_t];Lt._dbInfo.db=null}var pn=new f(function(Qt,Jn){var Zt=u.deleteDatabase(te.name);Zt.onerror=function(){var Fr=Zt.result;Fr&&Fr.close(),Jn(Zt.error)},Zt.onblocked=function(){console.warn('dropInstance blocked for database "'+te.name+'" until all open connections are closed')},Zt.onsuccess=function(){var Fr=Zt.result;Fr&&Fr.close(),Qt(Fr)}});return pn.then(function(Qt){lt.db=Qt;for(var Jn=0;Jn<ut.length;Jn++){var Zt=ut[Jn];P(Zt._dbInfo)}}).catch(function(Qt){throw(D(te,Qt)||f.resolve()).catch(function(){}),Qt})})}return d(Pe,ve),Pe}var xe={_driver:"asyncStorage",_initStorage:q,_support:l(),iterate:Z,getItem:X,setItem:ae,removeItem:he,clear:ge,length:be,key:Ce,keys:oe,dropInstance:re};function Re(){return typeof openDatabase=="function"}var Ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qe="~~local_forage_type~",ke=/^~~local_forage_type~([^~]+)~/,Ue="__lfsc__:",rt=Ue.length,ft="arbf",Rt="blob",st="si08",Ie="ui08",kt="uic8",Ot="si16",Ne="si32",ze="ur16",ot="ui32",St="fl32",$t="fl64",Vn=rt+ft.length,Yr=Object.prototype.toString;function tr(te){var ve=te.length*.75,ue=te.length,Te,Pe=0,Se,Xe,at,lt;te[te.length-1]==="="&&(ve--,te[te.length-2]==="="&&ve--);var ut=new ArrayBuffer(ve),_t=new Uint8Array(ut);for(Te=0;Te<ue;Te+=4)Se=Ke.indexOf(te[Te]),Xe=Ke.indexOf(te[Te+1]),at=Ke.indexOf(te[Te+2]),lt=Ke.indexOf(te[Te+3]),_t[Pe++]=Se<<2|Xe>>4,_t[Pe++]=(Xe&15)<<4|at>>2,_t[Pe++]=(at&3)<<6|lt&63;return ut}function vr(te){var ve=new Uint8Array(te),ue="",Te;for(Te=0;Te<ve.length;Te+=3)ue+=Ke[ve[Te]>>2],ue+=Ke[(ve[Te]&3)<<4|ve[Te+1]>>4],ue+=Ke[(ve[Te+1]&15)<<2|ve[Te+2]>>6],ue+=Ke[ve[Te+2]&63];return ve.length%3===2?ue=ue.substring(0,ue.length-1)+"=":ve.length%3===1&&(ue=ue.substring(0,ue.length-2)+"=="),ue}function Fn(te,ve){var ue="";if(te&&(ue=Yr.call(te)),te&&(ue==="[object ArrayBuffer]"||te.buffer&&Yr.call(te.buffer)==="[object ArrayBuffer]")){var Te,Pe=Ue;te instanceof ArrayBuffer?(Te=te,Pe+=ft):(Te=te.buffer,ue==="[object Int8Array]"?Pe+=st:ue==="[object Uint8Array]"?Pe+=Ie:ue==="[object Uint8ClampedArray]"?Pe+=kt:ue==="[object Int16Array]"?Pe+=Ot:ue==="[object Uint16Array]"?Pe+=ze:ue==="[object Int32Array]"?Pe+=Ne:ue==="[object Uint32Array]"?Pe+=ot:ue==="[object Float32Array]"?Pe+=St:ue==="[object Float64Array]"?Pe+=$t:ve(new Error("Failed to get type for BinaryArray"))),ve(Pe+vr(Te))}else if(ue==="[object Blob]"){var Se=new FileReader;Se.onload=function(){var Xe=Qe+te.type+"~"+vr(this.result);ve(Ue+Rt+Xe)},Se.readAsArrayBuffer(te)}else try{ve(JSON.stringify(te))}catch(Xe){console.error("Couldn't convert value into a JSON string: ",te),ve(null,Xe)}}function Un(te){if(te.substring(0,rt)!==Ue)return JSON.parse(te);var ve=te.substring(Vn),ue=te.substring(rt,Vn),Te;if(ue===Rt&&ke.test(ve)){var Pe=ve.match(ke);Te=Pe[1],ve=ve.substring(Pe[0].length)}var Se=tr(ve);switch(ue){case ft:return Se;case Rt:return c([Se],{type:Te});case st:return new Int8Array(Se);case Ie:return new Uint8Array(Se);case kt:return new Uint8ClampedArray(Se);case Ot:return new Int16Array(Se);case ze:return new Uint16Array(Se);case Ne:return new Int32Array(Se);case ot:return new Uint32Array(Se);case St:return new Float32Array(Se);case $t:return new Float64Array(Se);default:throw new Error("Unkown type: "+ue)}}var ur={serialize:Fn,deserialize:Un,stringToBuffer:tr,bufferToString:vr};function lr(te,ve,ue,Te){te.executeSql("CREATE TABLE IF NOT EXISTS "+ve.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ue,Te)}function Us(te){var ve=this,ue={db:null};if(te)for(var Te in te)ue[Te]=typeof te[Te]!="string"?te[Te].toString():te[Te];var Pe=new f(function(Se,Xe){try{ue.db=openDatabase(ue.name,String(ue.version),ue.description,ue.size)}catch(at){return Xe(at)}ue.db.transaction(function(at){lr(at,ue,function(){ve._dbInfo=ue,Se()},function(lt,ut){Xe(ut)})},Xe)});return ue.serializer=ur,Pe}function Si(te,ve,ue,Te,Pe,Se){te.executeSql(ue,Te,Pe,function(Xe,at){at.code===at.SYNTAX_ERR?Xe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ve.storeName],function(lt,ut){ut.rows.length?Se(lt,at):lr(lt,ve,function(){lt.executeSql(ue,Te,Pe,Se)},Se)},Se):Se(Xe,at)},Se)}function kn(te,ve){var ue=this;te=p(te);var Te=new f(function(Pe,Se){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(at){Si(at,Xe,"SELECT * FROM "+Xe.storeName+" WHERE key = ? LIMIT 1",[te],function(lt,ut){var _t=ut.rows.length?ut.rows.item(0).value:null;_t&&(_t=Xe.serializer.deserialize(_t)),Pe(_t)},function(lt,ut){Se(ut)})})}).catch(Se)});return d(Te,ve),Te}function ii(te,ve){var ue=this,Te=new f(function(Pe,Se){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(at){Si(at,Xe,"SELECT * FROM "+Xe.storeName,[],function(lt,ut){for(var _t=ut.rows,Lt=_t.length,pn=0;pn<Lt;pn++){var Qt=_t.item(pn),Jn=Qt.value;if(Jn&&(Jn=Xe.serializer.deserialize(Jn)),Jn=te(Jn,Qt.key,pn+1),Jn!==void 0){Pe(Jn);return}}Pe()},function(lt,ut){Se(ut)})})}).catch(Se)});return d(Te,ve),Te}function Mr(te,ve,ue,Te){var Pe=this;te=p(te);var Se=new f(function(Xe,at){Pe.ready().then(function(){ve===void 0&&(ve=null);var lt=ve,ut=Pe._dbInfo;ut.serializer.serialize(ve,function(_t,Lt){Lt?at(Lt):ut.db.transaction(function(pn){Si(pn,ut,"INSERT OR REPLACE INTO "+ut.storeName+" (key, value) VALUES (?, ?)",[te,_t],function(){Xe(lt)},function(Qt,Jn){at(Jn)})},function(pn){if(pn.code===pn.QUOTA_ERR){if(Te>0){Xe(Mr.apply(Pe,[te,lt,ue,Te-1]));return}at(pn)}})})}).catch(at)});return d(Se,ue),Se}function is(te,ve,ue){return Mr.apply(this,[te,ve,ue,1])}function Tc(te,ve){var ue=this;te=p(te);var Te=new f(function(Pe,Se){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(at){Si(at,Xe,"DELETE FROM "+Xe.storeName+" WHERE key = ?",[te],function(){Pe()},function(lt,ut){Se(ut)})})}).catch(Se)});return d(Te,ve),Te}function ba(te){var ve=this,ue=new f(function(Te,Pe){ve.ready().then(function(){var Se=ve._dbInfo;Se.db.transaction(function(Xe){Si(Xe,Se,"DELETE FROM "+Se.storeName,[],function(){Te()},function(at,lt){Pe(lt)})})}).catch(Pe)});return d(ue,te),ue}function Ol(te){var ve=this,ue=new f(function(Te,Pe){ve.ready().then(function(){var Se=ve._dbInfo;Se.db.transaction(function(Xe){Si(Xe,Se,"SELECT COUNT(key) as c FROM "+Se.storeName,[],function(at,lt){var ut=lt.rows.item(0).c;Te(ut)},function(at,lt){Pe(lt)})})}).catch(Pe)});return d(ue,te),ue}function Tr(te,ve){var ue=this,Te=new f(function(Pe,Se){ue.ready().then(function(){var Xe=ue._dbInfo;Xe.db.transaction(function(at){Si(at,Xe,"SELECT key FROM "+Xe.storeName+" WHERE id = ? LIMIT 1",[te+1],function(lt,ut){var _t=ut.rows.length?ut.rows.item(0).key:null;Pe(_t)},function(lt,ut){Se(ut)})})}).catch(Se)});return d(Te,ve),Te}function Ti(te){var ve=this,ue=new f(function(Te,Pe){ve.ready().then(function(){var Se=ve._dbInfo;Se.db.transaction(function(Xe){Si(Xe,Se,"SELECT key FROM "+Se.storeName,[],function(at,lt){for(var ut=[],_t=0;_t<lt.rows.length;_t++)ut.push(lt.rows.item(_t).key);Te(ut)},function(at,lt){Pe(lt)})})}).catch(Pe)});return d(ue,te),ue}function $r(te){return new f(function(ve,ue){te.transaction(function(Te){Te.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Pe,Se){for(var Xe=[],at=0;at<Se.rows.length;at++)Xe.push(Se.rows.item(at).name);ve({db:te,storeNames:Xe})},function(Pe,Se){ue(Se)})},function(Te){ue(Te)})})}function xo(te,ve){ve=g.apply(this,arguments);var ue=this.config();te=typeof te!="function"&&te||{},te.name||(te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName);var Te=this,Pe;return te.name?Pe=new f(function(Se){var Xe;te.name===ue.name?Xe=Te._dbInfo.db:Xe=openDatabase(te.name,"","",0),te.storeName?Se({db:Xe,storeNames:[te.storeName]}):Se($r(Xe))}).then(function(Se){return new f(function(Xe,at){Se.db.transaction(function(lt){function ut(Qt){return new f(function(Jn,Zt){lt.executeSql("DROP TABLE IF EXISTS "+Qt,[],function(){Jn()},function(Fr,ro){Zt(ro)})})}for(var _t=[],Lt=0,pn=Se.storeNames.length;Lt<pn;Lt++)_t.push(ut(Se.storeNames[Lt]));f.all(_t).then(function(){Xe()}).catch(function(Qt){at(Qt)})},function(lt){at(lt)})})}):Pe=f.reject("Invalid arguments"),d(Pe,ve),Pe}var Cs={_driver:"webSQLStorage",_initStorage:Us,_support:Re(),iterate:ii,getItem:kn,setItem:is,removeItem:Tc,clear:ba,length:Ol,key:Tr,keys:Ti,dropInstance:xo};function Ko(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ye(te,ve){var ue=te.name+"/";return te.storeName!==ve.storeName&&(ue+=te.storeName+"/"),ue}function ce(){var te="_localforage_support_test";try{return localStorage.setItem(te,!0),localStorage.removeItem(te),!1}catch{return!0}}function _e(){return!ce()||localStorage.length>0}function je(te){var ve=this,ue={};if(te)for(var Te in te)ue[Te]=te[Te];return ue.keyPrefix=ye(te,ve._defaultConfig),_e()?(ve._dbInfo=ue,ue.serializer=ur,f.resolve()):f.reject()}function Be(te){var ve=this,ue=ve.ready().then(function(){for(var Te=ve._dbInfo.keyPrefix,Pe=localStorage.length-1;Pe>=0;Pe--){var Se=localStorage.key(Pe);Se.indexOf(Te)===0&&localStorage.removeItem(Se)}});return d(ue,te),ue}function wt(te,ve){var ue=this;te=p(te);var Te=ue.ready().then(function(){var Pe=ue._dbInfo,Se=localStorage.getItem(Pe.keyPrefix+te);return Se&&(Se=Pe.serializer.deserialize(Se)),Se});return d(Te,ve),Te}function Bt(te,ve){var ue=this,Te=ue.ready().then(function(){for(var Pe=ue._dbInfo,Se=Pe.keyPrefix,Xe=Se.length,at=localStorage.length,lt=1,ut=0;ut<at;ut++){var _t=localStorage.key(ut);if(_t.indexOf(Se)===0){var Lt=localStorage.getItem(_t);if(Lt&&(Lt=Pe.serializer.deserialize(Lt)),Lt=te(Lt,_t.substring(Xe),lt++),Lt!==void 0)return Lt}}});return d(Te,ve),Te}function en(te,ve){var ue=this,Te=ue.ready().then(function(){var Pe=ue._dbInfo,Se;try{Se=localStorage.key(te)}catch{Se=null}return Se&&(Se=Se.substring(Pe.keyPrefix.length)),Se});return d(Te,ve),Te}function Qn(te){var ve=this,ue=ve.ready().then(function(){for(var Te=ve._dbInfo,Pe=localStorage.length,Se=[],Xe=0;Xe<Pe;Xe++){var at=localStorage.key(Xe);at.indexOf(Te.keyPrefix)===0&&Se.push(at.substring(Te.keyPrefix.length))}return Se});return d(ue,te),ue}function nr(te){var ve=this,ue=ve.keys().then(function(Te){return Te.length});return d(ue,te),ue}function Dn(te,ve){var ue=this;te=p(te);var Te=ue.ready().then(function(){var Pe=ue._dbInfo;localStorage.removeItem(Pe.keyPrefix+te)});return d(Te,ve),Te}function fr(te,ve,ue){var Te=this;te=p(te);var Pe=Te.ready().then(function(){ve===void 0&&(ve=null);var Se=ve;return new f(function(Xe,at){var lt=Te._dbInfo;lt.serializer.serialize(ve,function(ut,_t){if(_t)at(_t);else try{localStorage.setItem(lt.keyPrefix+te,ut),Xe(Se)}catch(Lt){(Lt.name==="QuotaExceededError"||Lt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&at(Lt),at(Lt)}})})});return d(Pe,ue),Pe}function Lr(te,ve){if(ve=g.apply(this,arguments),te=typeof te!="function"&&te||{},!te.name){var ue=this.config();te.name=te.name||ue.name,te.storeName=te.storeName||ue.storeName}var Te=this,Pe;return te.name?Pe=new f(function(Se){te.storeName?Se(ye(te,Te._defaultConfig)):Se(te.name+"/")}).then(function(Se){for(var Xe=localStorage.length-1;Xe>=0;Xe--){var at=localStorage.key(Xe);at.indexOf(Se)===0&&localStorage.removeItem(at)}}):Pe=f.reject("Invalid arguments"),d(Pe,ve),Pe}var an={_driver:"localStorageWrapper",_initStorage:je,_support:Ko(),iterate:Bt,getItem:wt,setItem:fr,removeItem:Dn,clear:Be,length:nr,key:en,keys:Qn,dropInstance:Lr},dr=function(ve,ue){return ve===ue||typeof ve=="number"&&typeof ue=="number"&&isNaN(ve)&&isNaN(ue)},si=function(ve,ue){for(var Te=ve.length,Pe=0;Pe<Te;){if(dr(ve[Pe],ue))return!0;Pe++}return!1},hr=Array.isArray||function(te){return Object.prototype.toString.call(te)==="[object Array]"},On={},zs={},ti={INDEXEDDB:xe,WEBSQL:Cs,LOCALSTORAGE:an},Vs=[ti.INDEXEDDB._driver,ti.WEBSQL._driver,ti.LOCALSTORAGE._driver],wi=["dropInstance"],Hi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(wi),no={description:"",driver:Vs.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Hs(te,ve){te[ve]=function(){var ue=arguments;return te.ready().then(function(){return te[ve].apply(te,ue)})}}function oi(){for(var te=1;te<arguments.length;te++){var ve=arguments[te];if(ve)for(var ue in ve)ve.hasOwnProperty(ue)&&(hr(ve[ue])?arguments[0][ue]=ve[ue].slice():arguments[0][ue]=ve[ue])}return arguments[0]}var Mu=function(){function te(ve){o(this,te);for(var ue in ti)if(ti.hasOwnProperty(ue)){var Te=ti[ue],Pe=Te._driver;this[ue]=Pe,On[Pe]||this.defineDriver(Te)}this._defaultConfig=oi({},no),this._config=oi({},this._defaultConfig,ve),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return te.prototype.config=function(ue){if((typeof ue>"u"?"undefined":s(ue))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Te in ue){if(Te==="storeName"&&(ue[Te]=ue[Te].replace(/\W/g,"_")),Te==="version"&&typeof ue[Te]!="number")return new Error("Database version must be a number.");this._config[Te]=ue[Te]}return"driver"in ue&&ue.driver?this.setDriver(this._config.driver):!0}else return typeof ue=="string"?this._config[ue]:this._config},te.prototype.defineDriver=function(ue,Te,Pe){var Se=new f(function(Xe,at){try{var lt=ue._driver,ut=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ue._driver){at(ut);return}for(var _t=Hi.concat("_initStorage"),Lt=0,pn=_t.length;Lt<pn;Lt++){var Qt=_t[Lt],Jn=!si(wi,Qt);if((Jn||ue[Qt])&&typeof ue[Qt]!="function"){at(ut);return}}var Zt=function(){for(var $u=function(Xo){return function(){var ss=new Error("Method "+Xo+" is not implemented by the current driver"),So=f.reject(ss);return d(So,arguments[arguments.length-1]),So}},Cc=0,Mg=wi.length;Cc<Mg;Cc++){var Hd=wi[Cc];ue[Hd]||(ue[Hd]=$u(Hd))}};Zt();var Fr=function($u){On[lt]&&console.info("Redefining LocalForage driver: "+lt),On[lt]=ue,zs[lt]=$u,Xe()};"_support"in ue?ue._support&&typeof ue._support=="function"?ue._support().then(Fr,at):Fr(!!ue._support):Fr(!0)}catch(ro){at(ro)}});return h(Se,Te,Pe),Se},te.prototype.driver=function(){return this._driver||null},te.prototype.getDriver=function(ue,Te,Pe){var Se=On[ue]?f.resolve(On[ue]):f.reject(new Error("Driver not found."));return h(Se,Te,Pe),Se},te.prototype.getSerializer=function(ue){var Te=f.resolve(ur);return h(Te,ue),Te},te.prototype.ready=function(ue){var Te=this,Pe=Te._driverSet.then(function(){return Te._ready===null&&(Te._ready=Te._initDriver()),Te._ready});return h(Pe,ue,ue),Pe},te.prototype.setDriver=function(ue,Te,Pe){var Se=this;hr(ue)||(ue=[ue]);var Xe=this._getSupportedDrivers(ue);function at(){Se._config.driver=Se.driver()}function lt(Lt){return Se._extend(Lt),at(),Se._ready=Se._initStorage(Se._config),Se._ready}function ut(Lt){return function(){var pn=0;function Qt(){for(;pn<Lt.length;){var Jn=Lt[pn];return pn++,Se._dbInfo=null,Se._ready=null,Se.getDriver(Jn).then(lt).catch(Qt)}at();var Zt=new Error("No available storage method found.");return Se._driverSet=f.reject(Zt),Se._driverSet}return Qt()}}var _t=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=_t.then(function(){var Lt=Xe[0];return Se._dbInfo=null,Se._ready=null,Se.getDriver(Lt).then(function(pn){Se._driver=pn._driver,at(),Se._wrapLibraryMethodsWithReady(),Se._initDriver=ut(Xe)})}).catch(function(){at();var Lt=new Error("No available storage method found.");return Se._driverSet=f.reject(Lt),Se._driverSet}),h(this._driverSet,Te,Pe),this._driverSet},te.prototype.supports=function(ue){return!!zs[ue]},te.prototype._extend=function(ue){oi(this,ue)},te.prototype._getSupportedDrivers=function(ue){for(var Te=[],Pe=0,Se=ue.length;Pe<Se;Pe++){var Xe=ue[Pe];this.supports(Xe)&&Te.push(Xe)}return Te},te.prototype._wrapLibraryMethodsWithReady=function(){for(var ue=0,Te=Hi.length;ue<Te;ue++)Hs(this,Hi[ue])},te.prototype.createInstance=function(ue){return new te(ue)},te}(),fs=new Mu;r.exports=fs},{3:3}]},{},[4])(4)})}(dB)),dB.exports}var YRt=GRt();const Ow=Ru(YRt);var na=[];for(var hB=0;hB<256;++hB)na.push((hB+256).toString(16).slice(1));function KRt(e,t=0){return(na[e[t+0]]+na[e[t+1]]+na[e[t+2]]+na[e[t+3]]+"-"+na[e[t+4]]+na[e[t+5]]+"-"+na[e[t+6]]+na[e[t+7]]+"-"+na[e[t+8]]+na[e[t+9]]+"-"+na[e[t+10]]+na[e[t+11]]+na[e[t+12]]+na[e[t+13]]+na[e[t+14]]+na[e[t+15]]).toLowerCase()}var LP,XRt=new Uint8Array(16);function QRt(){if(!LP&&(LP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!LP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return LP(XRt)}var JRt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Dhe={randomUUID:JRt};function RM(e,t,n){if(Dhe.randomUUID&&!t&&!e)return Dhe.randomUUID();e=e||{};var r=e.random||(e.rng||QRt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,KRt(r)}class DRe{constructor(t){qu(this,"engine");qu(this,"connected",!1);qu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function NM(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function JT(e){return e.participantId!==void 0}class Qf extends DRe{constructor(){super("firebase");qu(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");qu(this,"firestore");qu(this,"collectionPrefix","prod-");qu(this,"studyCollection");qu(this,"storage");qu(this,"studyId","");qu(this,"localForage",Ow.createInstance({name:"currentParticipantId"}));qu(this,"participantData",null);const n=fX.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=JAe(n);this.firestore=Vkt(r,{}),this.storage=J2t();try{VRt(r,{provider:new vQ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await Hkt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=xM();if(!i.currentUser&&(await yTt(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=Ff(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await NM(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.setcurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(JT(a))return this.participantData=a,a;const l=await NM(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=hs(this.studyCollection,"configHash"),r=await DP(n);return r.exists()?r.data().configHash:null}async setcurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=hs(this.studyCollection,"configHash");await au(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Uc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=RM(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=hs(this.studyCollection,"sequenceAssignment");await au(i,{});const s=Ff(i,"sequenceAssignment"),o=hs(s,this.currentParticipantId),a=Ehe(s,Jkt("participantId","==","")),u=await QT(a);if(u.docs.length>0){const g=u.docs[0],y=g.data().timestamp;r.dataCollectionEnabled&&(await iRt(g.ref),await au(o,{participantId:this.currentParticipantId,timestamp:y}))}else r.dataCollectionEnabled&&await au(o,{participantId:this.currentParticipantId,timestamp:aRt()});const l=Ehe(s,Zkt("timestamp","asc")),d=(await QT(l)).docs.map(g=>g.data()).findIndex(g=>g.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Uc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await KT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");JT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return JT(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=RM();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Ff(this.firestore,"user-management"),i=await QT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await au(hs(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await au(hs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await au(hs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await au(hs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await au(hs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Uc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await KT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");JT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=Ff(this.firestore,`${this.collectionPrefix}${n}`),o=Uc(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!JT(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=hs(s,"sequenceAssignment"),l=Ff(u,"sequenceAssignment"),c=hs(l,r);await rRt(c,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=hs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await au(s,{[r]:i},{merge:!0})}async getModes(n){const r=hs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await DP(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await au(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const g=await this.removeSnapshotOrLive(i,!1);g.status==="FAILED"?p.push({title:g.error.title,message:g.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=hs(this.firestore,"metadata","collections"),i=await DP(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=hs(this.firestore,"metadata","collections");await au(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=hs(this.firestore,"metadata","collections");return await au(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=hs(this.firestore,"metadata","collections"),i=await DP(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await au(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Uc(this.storage,n),s=(await KT(r)).items.map(o=>jde(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Uc(this.storage,n),o=(await KT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Uc(this.storage,n),s=Uc(this.storage,r),o=await sB(i),u=await(await fetch(o)).blob();await iB(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Ff(this.firestore,n),s=hs(i,"sequenceAssignment"),o=Ff(s,"sequenceAssignment"),a=Ff(this.firestore,r),u=hs(a,"sequenceAssignment");await au(u,{});const l=Ff(u,"sequenceAssignment"),c=await QT(o),f=The(this.firestore);c.docs.forEach(d=>{const h=hs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Ff(this.firestore,n),i=hs(r,"sequenceAssignment"),s=Ff(i,"sequenceAssignment"),o=await QT(s),a=The(this.firestore);o.forEach(u=>{const l=hs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Uc(this.storage,n);return(await KT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Uc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await sB(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await sB(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=Uc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await iB(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await iB(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Uc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await jde(i)}}const ORe=O.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),r_=()=>O.useContext(ORe);function ZRt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=O.useState(t),[o,a]=O.useState(!1),{storageEngine:u}=js(),l=async()=>{const h=xM();try{await STt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;O.useEffect(()=>{s(t);let h;if(u instanceof Qf)try{h=xM()}catch{console.warn("No firebase store.")}const p=async b=>{if(s(_=>({user:_.user,isAdmin:_.isAdmin,determiningStatus:!0,adminVerification:!1})),b){const _={user:b,determiningStatus:!1,isAdmin:!1,adminVerification:!0},E=await f(_);_.isAdmin=!!E,s(_)}else l()},y=(async()=>{if(u instanceof Qf){const b=await(u==null?void 0:u.getUserManagementData("authentication"));if(b!=null&&b.isEnabled){const _=xTt(h,async E=>await p(E));return()=>_()}s(r)}else u&&s(r);return()=>{}})();return()=>{y.then(b=>b())}},[u,o]);const d=O.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return w.jsx(ORe.Provider,{value:d,children:i.determiningStatus?w.jsx(lc,{visible:!0}):e})}function O2({studyIds:e}){const t=gp(),{studyId:n}=zm(),r=Hy(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=js(),{user:o,logout:a}=r_(),[u,l]=O.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:w.jsx(TWe,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:w.jsx(gWe,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:w.jsx(z1e,{}),href:"settings",needAdmin:!0}];return w.jsx(Ui.Header,{p:"md",children:w.jsxs(gu,{mt:-7,align:"center",children:[w.jsx(gu.Col,{span:6,children:w.jsxs(Kt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[w.jsx(rc,{w:"md"}),w.jsx(es,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})]})}),w.jsx(gu.Col,{span:6,children:w.jsxs(Kt,{justify:"flex-end",direction:"row",children:[c&&w.jsx(CI,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),w.jsx(cW,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),w.jsx(pp,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:w.jsxs(Kt,{direction:"column",mt:20,children:[w.jsx(pt,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?w.jsx(Sn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${cc}${d.href}`,children:d.name},`menu-item-${d.name}`):null:w.jsx(Sn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${cc}${d.href}`,children:d.name},`menu-item-${d.name}`)),w.jsxs(De,{ml:10,children:[w.jsx(DE,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?w.jsx(pt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):w.jsx(pt,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function bQ({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=P$(!1),[a,u]=O.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;mX(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return w.jsxs(w.Fragment,{children:[w.jsxs(Pi,{style:{gap:n},children:[w.jsx(Li,{label:"Download all participants data as JSON",children:w.jsx(Sn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:w.jsx(wWe,{})})}),w.jsx(Li,{label:"Download all participants data as a tidy CSV",children:w.jsx(Sn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:w.jsx(V1e,{})})})]}),i&&a.length>0&&w.jsx($Et,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function eNt({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?w.jsx(hn.Td,{children:w.jsx(yu,{miw:100,children:Object.entries(e.answer).map(([t,n])=>w.jsxs(De,{children:[w.jsxs(pt,{fw:700,span:!0,children:[" ",`${t}: `]}),w.jsx(pt,{span:!0,children:`${n}`})]},`cell-${t}`))})}):w.jsx(hn.Td,{children:"N/A"})}function Ohe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=$Ae(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?w.jsxs(hn.Td,{children:[t.toFixed(1)," ","s",n&&w.jsxs(w.Fragment,{children:[w.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):w.jsx(hn.Td,{children:"N/A"})}function tNt(e){const{metaData:t}=e;return w.jsx(hn.Td,{children:w.jsx(LW,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:w.jsxs(yu,{gap:"xs",children:[w.jsxs(De,{children:["IP:"," ",t.ip]}),w.jsxs(De,{children:["Language:"," ",t.language]}),w.jsxs(De,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),w.jsxs(De,{children:["User Agent:"," ",t.userAgent]})]})})})}function nNt({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=js(),{studyId:o}=zm(),{user:a}=r_(),u=async(A,k)=>{if(s&&o)if(a.isAdmin){const N=k===""?"Rejected by admin":k;await s.rejectParticipant(o,A,N),await i()}else console.warn("You are not authorized to perform this action.")},[l,c]=O.useState([]),[f,d]=O.useState(!1),[h,p]=O.useState(!1),[g,y]=O.useState(""),b=async()=>{d(!0),p(!1);const A=l.map(async k=>await u(k,g));await Promise.all(A),c([]),await i(),d(!1)},_=O.useMemo(()=>[...e,...t,...n],[e,t,n]);function E(A){A==="all"?l.length===_.length?c([]):c(_.map(k=>k.participantId)):l.includes(A)?c(l.filter(k=>k!==A)):c([...l,A])}const C=F_e(r.sequence),x=[w.jsx(hn.Th,{children:w.jsx(Kt,{justify:"center",children:w.jsx(Ql,{mb:-4,checked:l.length===_.length,onChange:()=>E("all")})})},"action"),w.jsx(hn.Th,{children:"ID"},"ID"),w.jsx(hn.Th,{children:"Status"},"status"),w.jsx(hn.Th,{children:"Meta"},"meta"),...C.flatMap(A=>[w.jsx(hn.Th,{children:A.componentName},`header-${A.componentName}-${A.timesSeenInBlock}`),w.jsxs(hn.Th,{children:[w.jsx("span",{style:{whiteSpace:"nowrap"},children:A.componentName})," ","Duration (clean)"]},`header-${A.componentName}-${A.timesSeenInBlock}-duration`)]),w.jsx(hn.Th,{children:"Total Duration (clean)"},"total-duration")],T=_.map(A=>w.jsxs(hn.Tr,{children:[w.jsx(hn.Td,{children:w.jsx(Kt,{justify:"center",children:w.jsx(Ql,{mb:-4,checked:l.includes(A.participantId),onChange:()=>E(A.participantId)})})}),w.jsx(hn.Td,{style:{whiteSpace:"nowrap"},children:A.participantId}),w.jsx(hn.Td,{children:w.jsxs(Kt,{direction:"column",miw:100,children:[w.jsxs(Kt,{direction:"row",align:"center",children:[A.rejected?w.jsx(Li,{label:"Rejected",children:w.jsx(ZW,{size:16,color:"red",style:{marginBottom:-3}})}):A.completed?w.jsx(Li,{label:"Completed",children:w.jsx(j1e,{size:16,color:"teal",style:{marginBottom:-3}})}):w.jsx(Li,{label:"In Progress",children:w.jsx(U1e,{size:16,color:"orange",style:{marginBottom:-3}})}),!A.completed&&w.jsxs(pt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(A.answers).filter(([k,N])=>N.endTime!==-1&&N.endTime!==void 0).length/(qm(A.sequence).length-1)*100).toFixed(2),"%"]})]}),A.rejected&&w.jsx(pt,{mt:5,fz:10,children:A.rejected.reason})]})}),A.metadata?w.jsx(tNt,{metaData:A.metadata}):w.jsx(hn.Td,{children:"N/A"}),C.map(k=>{const N=$_e(A.sequence,k.orderPath),P=N&&Object.entries(A.answers).sort((D,j)=>{const M=parseInt(D[0].slice(D[0].lastIndexOf("_")+1),10),B=parseInt(j[0].slice(j[0].lastIndexOf("_")+1),10);return M-B}).filter(([D])=>{const j=D.slice(0,D.lastIndexOf("_")),M=parseInt(D.slice(D.lastIndexOf("_")+1),10);return j===k.componentName&&M<=N[0].lastIndex&&M>=N[0].firstIndex});return P!==null&&P.length>=k.timesSeenInBlock+1&&P[k.timesSeenInBlock][1].endTime!==-1?w.jsxs(Jr.Fragment,{children:[w.jsx(eNt,{cellData:P[k.timesSeenInBlock][1]}),w.jsx(Ohe,{cellData:P[k.timesSeenInBlock][1]})]},`cellgroup-${A.participantId}-${k.componentName}-${k.timesSeenInBlock}`):w.jsxs(Jr.Fragment,{children:[w.jsx(hn.Td,{children:"N/A"}),w.jsx(hn.Td,{children:"N/A"})]},`cellgroup-${A.participantId}-${k.componentName}-${k.timesSeenInBlock}`)}),w.jsx(Ohe,{cellData:{startTime:Math.min(...Object.values(A.answers).filter(k=>k.endTime!==-1&&k.endTime!==void 0).map(k=>k.startTime)),endTime:Math.max(...Object.values(A.answers).filter(k=>k.endTime!==-1&&k.endTime!==void 0).map(k=>k.endTime)),answer:{},windowEvents:Object.values(A.answers).flatMap(k=>k.windowEvents)}},`cell-${A.participantId}-total-duration`)]},A.participantId));return _.length>0?w.jsxs(w.Fragment,{children:[w.jsx(lc,{visible:f,overlayProps:{blur:2}}),w.jsxs(Kt,{justify:"space-between",mb:8,p:8,children:[w.jsx(Pi,{children:w.jsx(CI,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:_.map(A=>({value:A.participantId,label:A.participantId})),searchable:!0,value:null,leftSection:w.jsx(MWe,{size:14}),onChange:A=>A&&E(A)})}),w.jsxs(Pi,{children:[w.jsx(bQ,{allParticipants:_,studyId:o||""}),w.jsxs(Sn,{disabled:l.length===0||!a.isAdmin,onClick:()=>p(!0),color:"red",children:["Reject Participants (",l.length,")"]})]})]}),w.jsx(Kt,{direction:"column",style:{width:"100%",overflow:"auto"},children:w.jsxs(hn,{striped:!0,withTableBorder:!0,children:[w.jsx(hn.Thead,{children:w.jsx(hn.Tr,{children:x})}),w.jsx(hn.Tbody,{children:T})]})}),w.jsxs(ls,{opened:h,onClose:()=>p(!1),title:w.jsxs(pt,{children:["Reject Participants (",l.length,")"]}),children:[w.jsx(bm,{label:"Please enter the reason for rejection.",onChange:A=>y(A.target.value)}),w.jsxs(Kt,{mt:"sm",justify:"right",children:[w.jsx(Sn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{p(!1),y("")},children:"Cancel"}),w.jsx(Sn,{color:"red",onClick:()=>b(),children:"Reject Participants"})]})]})]}):w.jsxs(w.Fragment,{children:[w.jsx(rc,{h:"xl"}),w.jsx(Kt,{justify:"center",align:"center",children:w.jsx(pt,{children:"No data available"})})]})}const rNt="_root_1spq0_1",iNt="_description_1spq0_9",sNt="_title_1spq0_10",oNt="_closeButton_1spq0_14",aNt={root:rNt,description:iNt,title:sNt,closeButton:oNt},PM=e=>{const{title:t,message:n,color:r}=e;Hb.show({title:t,message:n,position:"top-center",classNames:aNt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function uNt({studyId:e,refresh:t}){const[n,r]=O.useState(!1),[i,s]=O.useState(!1),[o,a]=O.useState(!1),[u,l]=O.useState(!1),[c,f]=O.useState(""),[d,h]=O.useState([]),[p,g]=O.useState(""),[y,b]=O.useState(""),[_,E]=O.useState(!1),[C,x]=O.useState(!1),{storageEngine:T}=js(),A=T,k=O.useCallback(async()=>{x(!0);const L=await A.getSnapshots(e);h(L),x(!1)},[A,e]);O.useEffect(()=>{k()},[k]);const N=async(L,...U)=>{E(!0);const K=await L(...U);K.status==="SUCCESS"?(k(),E(!1),await t(),K.notifications&&K.notifications.forEach(q=>{PM(q)})):(E(!1),PM({title:K.error.title,message:K.error.message,color:"red"}))},P=async()=>{await N(A.createSnapshot.bind(A),e,!1)},D=async()=>{g(""),r(!1),await N(A.createSnapshot.bind(A),e,!0)},j=async()=>{a(!1),await N(A.renameSnapshot.bind(A),c,y)},M=async L=>{await N(A.restoreSnapshot.bind(A),e,L)},B=async()=>{g(""),s(!1),await N(A.removeSnapshotOrLive.bind(A),c,!0)},V=async()=>{g(""),l(!1),await N(A.removeSnapshotOrLive.bind(A),e,!0)},z=()=>Vse({title:"Create a Snapshot",children:w.jsx(pt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>P()}),G=L=>Vse({title:"Restore Snapshot",children:w.jsx(pt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>M(L)}),Y=L=>{const U=/-snapshot-(.+)$/,K=L.match(U);return K&&K[1]?K[1].replace("T"," "):null},Q=async L=>{const U=L.slice(L.indexOf("-")+1);return await A.getAllParticipantsDataByStudy(U)};return w.jsxs(w.Fragment,{children:[w.jsx(lc,{visible:_}),w.jsxs(Kt,{justify:"space-between",align:"center",children:[w.jsxs(De,{style:{width:"70%"},children:[w.jsx(es,{order:5,children:"Create a Snapshot"}),w.jsxs(pt,{children:["This will create a snapshot of the live"," ",w.jsx(pt,{span:!0,fw:700,children:e})," ","database. It will"," ",w.jsx(pt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),w.jsx(Li,{label:"Create a snapshot",children:w.jsx(Sn,{onClick:z,children:"Snapshot"})})]}),w.jsx(rc,{h:"lg"}),w.jsxs(Kt,{justify:"space-between",align:"center",children:[w.jsxs(De,{style:{width:"70%"},children:[w.jsx(es,{order:5,children:"Archive Data"}),w.jsxs(pt,{children:["This will create a snapshot of the live"," ",w.jsx(pt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),w.jsx(Li,{label:"Snapshot and Delete Data",children:w.jsx(Sn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),w.jsx(rc,{h:"lg"}),w.jsxs(Kt,{justify:"space-between",align:"center",children:[w.jsxs(De,{style:{width:"70%"},children:[w.jsx(es,{order:5,children:"Delete Data"}),w.jsxs(pt,{children:["This will delete the live"," ",w.jsx(pt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),w.jsx(Li,{label:"Delete Data",children:w.jsx(Sn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),w.jsx(rc,{h:"xl"}),w.jsxs(Kt,{direction:"column",children:[w.jsx(Kt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:w.jsx(es,{order:5,children:"Snapshots"})}),w.jsxs(De,{style:{position:"relative"},children:[w.jsx(lc,{visible:C}),d.length>0?w.jsxs(hn,{children:[w.jsx(hn.Thead,{children:w.jsxs(hn.Tr,{children:[w.jsx(hn.Th,{children:"Snapshot Name"}),w.jsx(hn.Th,{children:"Date Created"}),w.jsx(hn.Th,{children:"Actions"})]})}),w.jsx(hn.Tbody,{children:d.map(L=>w.jsxs(hn.Tr,{children:[w.jsx(hn.Td,{children:L.alternateName}),w.jsx(hn.Td,{children:Y(L.originalName)}),w.jsx(hn.Td,{children:w.jsxs(Kt,{children:[w.jsx(Li,{label:"Rename",children:w.jsx(Sn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(L.originalName)},children:w.jsx(RWe,{})})}),w.jsx(Li,{label:"Restore Snapshot",children:w.jsx(Sn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{G(L.originalName)},children:w.jsx(DWe,{})})}),w.jsx(Li,{label:"Delete Snapshot",children:w.jsx(Sn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(L.originalName)},children:w.jsx(H1e,{})})}),w.jsx(bQ,{allParticipants:()=>Q(L.originalName),studyId:e,gap:"10px",fileName:L.alternateName})]})})]},L.originalName))})]}):w.jsx(pt,{children:"No snapshots."})]})]}),w.jsxs(ls,{opened:n,onClose:()=>{r(!1),g("")},title:w.jsx(pt,{children:"Archive Data"}),children:[w.jsx(pt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),w.jsx(bm,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:L=>g(L.target.value)}),w.jsxs(Kt,{mt:"sm",justify:"right",children:[w.jsx(Sn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),g("")},children:"Cancel"}),w.jsx(Sn,{color:"red",onClick:D,disabled:p!==e,children:"Archive"})]})]}),w.jsxs(ls,{opened:i,onClose:()=>{s(!1),g("")},title:w.jsx(pt,{children:"Delete Snapshot"}),children:[w.jsxs(pt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",w.jsx(pt,{span:!0,fw:700,children:"irreversible"}),"."]}),w.jsx(bm,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:L=>g(L.target.value)}),w.jsxs(Kt,{mt:"sm",justify:"right",children:[w.jsx(Sn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),g("")},children:"Cancel"}),w.jsx(Sn,{color:"red",onClick:B,disabled:p!==e,children:"Delete"})]})]}),w.jsxs(ls,{opened:o,onClose:()=>{a(!1),b("")},title:w.jsx(pt,{children:"Rename Snapshot"}),children:[w.jsx(bm,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:L=>b(L.target.value)}),w.jsxs(Kt,{mt:"sm",justify:"right",children:[w.jsx(Sn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),b("")},children:"Cancel"}),w.jsx(Sn,{color:"green",onClick:j,disabled:!y||y.length===0,children:"Rename"})]})]}),w.jsxs(ls,{opened:u,onClose:()=>{l(!1),g("")},title:w.jsx(pt,{children:"Delete Live Data"}),children:[w.jsxs(pt,{mb:"sm",children:["This will permanently delete the live"," ",w.jsx(pt,{span:!0,fw:700,children:e})," ","data. This action is"," ",w.jsx(pt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),w.jsx(bm,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:L=>g(L.target.value)}),w.jsxs(Kt,{mt:"sm",justify:"right",children:[w.jsx(Sn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),g("")},children:"Cancel"}),w.jsx(Sn,{color:"red",onClick:V,disabled:p!==e,children:"Delete"})]})]})]})}function lNt({studyId:e}){const{storageEngine:t}=js(),[n,r]=O.useState(!1),[i,s]=O.useState(!1),[o,a]=O.useState(!1),[u,l]=O.useState(!1);O.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&w.jsxs(yu,{children:[w.jsx(eE,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),w.jsx(eE,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),w.jsx(eE,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function cNt({studyId:e,refresh:t}){const{storageEngine:n}=js();return w.jsx(uf,{children:w.jsxs(Ju,{multiple:!0,variant:"contained",children:[w.jsxs(Ju.Item,{value:"ReVISit Modes",children:[w.jsx(Ju.Control,{children:w.jsx(es,{order:5,children:"ReVISit Modes"})}),w.jsx(Ju.Panel,{children:w.jsx(lNt,{studyId:e})})]},"modes"),w.jsxs(Ju.Item,{value:"Data Management",children:[w.jsx(Ju.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:w.jsx(es,{order:5,children:"Data Management"})}),w.jsx(Ju.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&w.jsx(uNt,{studyId:e,refresh:t})})]},"dataManagement")]})})}const cw=14;function MRe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return w.jsxs(Kt,{ml:4,gap:4,children:[w.jsx(Li,{label:"Completed",children:w.jsx(L0,{variant:"light",color:"green",leftSection:w.jsx(j1e,{width:cw,height:cw,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),w.jsx(Li,{label:"In Progress",children:w.jsx(L0,{variant:"light",color:"orange",leftSection:w.jsx(U1e,{width:cw,height:cw,style:{paddingTop:1}}),pb:1,children:t})}),w.jsx(Li,{label:"Rejected",children:w.jsx(L0,{variant:"light",color:"red",leftSection:w.jsx(ZW,{width:cw,height:cw,style:{paddingTop:1}}),pb:1,children:n})})]})}const Mhe={};function bV(e,t){e===void 0&&(e=Mhe),t===void 0&&(t=Mhe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var fNt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dNt=Object.prototype.hasOwnProperty;function _V(e,t){return dNt.call(e,t)}function wV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)_V(e,i)&&r.push(i);return r}function tc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function EV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function a1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function $Re(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function xV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(xV(e[t]))return!0}else if(typeof e=="object"){for(var r=wV(e),i=r.length,s=0;s<i;s++)if(xV(e[r[s]]))return!0}}return!1}function $he(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var LRe=function(e){fNt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,$he(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=$he(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),gs=LRe,hNt=tc,qw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=DM(n,this.path);r&&(r=tc(r));var i=z1(n,{op:"remove",path:this.from}).removed;return z1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=DM(n,this.from);return z1(n,{op:"add",path:this.path,value:tc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:YA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},pNt={add:function(e,t,n){return EV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:qw.move,copy:qw.copy,test:qw.test,_get:qw._get};function DM(e,t){if(t=="")return e;var n={op:"_get",path:t};return z1(e,n),n.value}function z1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):OM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=DM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=YA(e,t.value),o.test===!1)throw new gs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new gs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=tc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=OM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=$Re(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!EV(h))throw new gs("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);EV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new gs("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=pNt[t.op].call(t,l,h,e);if(o.test===!1)throw new gs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=qw[t.op].call(t,l,h,e);if(o.test===!1)throw new gs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new gs("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function aF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new gs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=tc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=z1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function mNt(e,t,n){var r=z1(e,t);if(r.test===!1)throw new gs("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function OM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new gs("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(qw[e.op]){if(typeof e.path!="string")throw new gs("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new gs('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new gs("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new gs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&xV(e.value))throw new gs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new gs("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new gs("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=FRe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new gs("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new gs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function FRe(e,t,n){try{if(!Array.isArray(e))throw new gs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)aF(tc(t),tc(e),n||!0);else{n=n||OM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof gs)return i;throw i}}function YA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!YA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!YA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const gNt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:gs,_areEquals:YA,applyOperation:z1,applyPatch:aF,applyReducer:mNt,deepClone:hNt,getValueByPointer:DM,validate:FRe,validator:OM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var _Q=new WeakMap,yNt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),vNt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function bNt(e){return _Q.get(e)}function _Nt(e,t){return e.observers.get(t)}function wNt(e,t){e.observers.delete(t.callback)}function ENt(e,t){t.unobserve()}function xNt(e,t){var n=[],r,i=bNt(e);if(!i)i=new yNt(e),_Q.set(e,i);else{var s=_Nt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=tc(e),t){r.callback=t,r.next=null;var o=function(){SV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){SV(r),clearTimeout(r.next),wNt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new vNt(t,r)),r}function SV(e,t){t===void 0&&(t=!1);var n=_Q.get(e.object);wQ(n.value,e.object,e.patches,"",t),e.patches.length&&aF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function wQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=wV(t),o=wV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(_V(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?wQ(c,f,n,r+"/"+a1(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+a1(l),value:tc(c)}),n.push({op:"replace",path:r+"/"+a1(l),value:tc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+a1(l),value:tc(c)}),n.push({op:"remove",path:r+"/"+a1(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!_V(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+a1(l),value:tc(t[l])})}}}function SNt(e,t,n){n===void 0&&(n=!1);var r=[];return wQ(e,t,r,"",n),r}const TNt=Object.freeze(Object.defineProperty({__proto__:null,compare:SNt,generate:SV,observe:xNt,unobserve:ENt},Symbol.toStringTag,{value:"Module"}));Object.assign({},gNt,TNt,{JsonPatchError:LRe,deepClone:tc,escapePathComponent:a1,unescapePathComponent:$Re});var pB,Lhe;function CNt(){if(Lhe)return pB;Lhe=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return pB=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,function a(u,l,c){var f,d,h,p,g,y,b,_,E,C,x,T;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),x=JSON.stringify(u,o),x===void 0)return x;if(b=s-l.length-c,x.length<=b&&(E=x.replace(e,function(A,k){return k||A+" "}),E.length<=b))return E;if(o!=null&&(u=JSON.parse(x),o=void 0),typeof u=="object"&&u!==null){if(_=l+i,h=[],d=0,Array.isArray(u))for(C="[",f="]",b=u.length;d<b;d++)h.push(a(u[d],_,d===b-1?0:1)||"null");else for(C="{",f="}",y=Object.keys(u),b=y.length;d<b;d++)p=y[d],g=JSON.stringify(p)+": ",T=a(u[p],_,g.length+(d===b-1?0:1)),T!==void 0&&h.push(g+T);if(h.length>0)return[C,i+h.join(`,
`+_),f].join(`
`+l)}return x}(n,"",0)},pB}var ANt=CNt();const mB=Ru(ANt);function Pl(e,t,n){return e.fields=t||[],e.fname=n,e}function Es(e){return e==null?null:e.fname}function Ua(e){return e==null?null:e.fields}function jRe(e){return e.length===1?INt(e[0]):kNt(e)}const INt=e=>function(t){return t[e]},kNt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function et(e){throw Error(e)}function Tp(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||et("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&et("Access path missing closing bracket: "+e),r&&et("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function df(e,t,n){const r=Tp(e);return e=r.length===1?r[0]:e,Pl((n&&n.get||jRe)(r),[e],t||e)}const _k=df("id"),Ga=Pl(e=>e,[],"identity"),S0=Pl(()=>0,[],"zero"),PS=Pl(()=>1,[],"one"),hf=Pl(()=>!0,[],"true"),o0=Pl(()=>!1,[],"false");function RNt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const BRe=0,EQ=1,xQ=2,URe=3,zRe=4;function SQ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:RNt,r=e||BRe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=EQ&&n(t||"error","ERROR",arguments),this},warn(){return r>=xQ&&n(t||"warn","WARN",arguments),this},info(){return r>=URe&&n(t||"log","INFO",arguments),this},debug(){return r>=zRe&&n(t||"log","DEBUG",arguments),this}}}var nt=Array.isArray;function Mt(e){return e===Object(e)}const Fhe=e=>e!=="__proto__";function DS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=NNt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;OS(r,s,i[s],o)}return r},{})}function OS(e,t,n,r){if(!Fhe(t))return;let i,s;if(Mt(n)&&!nt(n)){s=Mt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?OS(s,i,n[i]):Fhe(i)&&(s[i]=n[i])}else e[t]=n}function NNt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Sr(e){return e[e.length-1]}function Fa(e){return e==null||e===""?null:+e}const VRe=e=>t=>e*Math.exp(t),HRe=e=>t=>Math.log(e*t),qRe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),WRe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,MM=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function uF(e,t,n,r){const i=n(e[0]),s=n(Sr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function GRe(e,t){return uF(e,t,Fa,Ga)}function YRe(e,t){var n=Math.sign(e[0]);return uF(e,t,HRe(n),VRe(n))}function KRe(e,t,n){return uF(e,t,MM(n),MM(1/n))}function XRe(e,t,n){return uF(e,t,qRe(n),WRe(n))}function lF(e,t,n,r,i){const s=r(e[0]),o=r(Sr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function TQ(e,t,n){return lF(e,t,n,Fa,Ga)}function CQ(e,t,n){const r=Math.sign(e[0]);return lF(e,t,n,HRe(r),VRe(r))}function $M(e,t,n,r){return lF(e,t,n,MM(r),MM(1/r))}function AQ(e,t,n,r){return lF(e,t,n,qRe(r),WRe(r))}function QRe(e){return 1+~~(new Date(e).getMonth()/3)}function JRe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Pt(e){return e!=null?nt(e)?e:[e]:[]}function ZRe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Yn(e){return typeof e=="function"}const PNt="descending";function IQ(e,t,n){n=n||{},t=Pt(t)||[];const r=[],i=[],s={},o=n.comparator||DNt;return Pt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===PNt?-1:1),i.push(a=Yn(a)?a:df(a,null,n)),(Ua(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Pl(o(i,r),Object.keys(s))}const cF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),DNt=(e,t)=>e.length===1?ONt(e[0],t[0]):MNt(e,t,e.length),ONt=(e,t)=>function(n,r){return cF(e(n),e(r))*t},MNt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=cF(s(r),s(i));return o*t[a]});function Ya(e){return Yn(e)?e:()=>e}function kQ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Gn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function op(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function eNe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const $Nt=Object.prototype.hasOwnProperty;function on(e,t){return $Nt.call(e,t)}const FP={};function MS(e){let t={},n;function r(s){return on(t,s)&&t[s]!==FP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===FP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=FP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==FP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function tNe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Sr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function At(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Gn(r,n)}function Ww(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function av(e){return typeof e=="boolean"}function Y0(e){return Object.prototype.toString.call(e)==="[object Date]"}function nNe(e){return e&&Yn(e[Symbol.iterator])}function Or(e){return typeof e=="number"}function rNe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Dt(e){return typeof e=="string"}function RQ(e,t,n){e&&(e=t?Pt(e).map(a=>a.replace(/\\(.)/g,"$1")):Pt(e));const r=e&&e.length,i=n&&n.get||jRe,s=a=>i(t?[a]:Tp(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Pl(o,e,"key")}function iNe(e,t){const n=e[0],r=Sr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const LNt=1e4;function sNe(e){e=+e||LNt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>on(t,o)||on(n,o),get:o=>on(t,o)?t[o]:on(n,o)?s(o,n[o]):void 0,set:(o,a)=>on(t,o)?t[o]=a:s(o,a)}}function oNe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function WC(e,t){let n="";for(;--t>=0;)n+=e;return n}function aNe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?WC(i,o)+s:r==="center"?WC(i,~~(o/2))+s+WC(i,Math.ceil(o/2)):s+WC(i,o)}function wk(e){return e&&Sr(e)-e[0]||0}function xt(e){return nt(e)?"["+e.map(xt)+"]":Mt(e)||Dt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function NQ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const FNt=e=>Or(e)||Y0(e)?e:Date.parse(e);function PQ(e,t){return t=t||FNt,e==null||e===""?null:t(e)}function DQ(e){return e==null||e===""?null:e+""}function Td(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function uNe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function h0(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function jNt(e){return e}function BNt(e){if(e==null)return jNt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function UNt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function zNt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return jhe(e,n)})}:jhe(e,t)}function jhe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=lNe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function lNe(e,t){var n=BNt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&UNt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function VNt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var g=p===h?h:h.concat(p);r[g.start=h.start]=i[g.end=p.end]=g}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var y=p===h?h:p.concat(h);r[y.start=p.start]=i[y.end=h.end]=y}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function HNt(e){return lNe(e,qNt.apply(this,arguments))}function qNt(e,t,n){var r,i,s;if(arguments.length>1)r=WNt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:VNt(e,r)}}function WNt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const ha="year",Cl="quarter",za="month",po="week",Al="date",La="day",ap="dayofyear",yc="hours",vc="minutes",pf="seconds",Cd="milliseconds",OQ=[ha,Cl,za,po,Al,La,ap,yc,vc,pf,Cd],gB=OQ.reduce((e,t,n)=>(e[t]=1+n,e),{});function MQ(e){const t=Pt(e).slice(),n={};return t.length||et("Missing time unit."),t.forEach(i=>{on(gB,i)?n[i]=1:et(`Invalid time unit: ${i}.`)}),(n[po]||n[La]?1:0)+(n[Cl]||n[za]||n[Al]?1:0)+(n[ap]?1:0)>1&&et(`Incompatible time units: ${e}`),t.sort((i,s)=>gB[i]-gB[s]),t}const GNt={[ha]:"%Y ",[Cl]:"Q%q ",[za]:"%b ",[Al]:"%d ",[po]:"W%U ",[La]:"%a ",[ap]:"%j ",[yc]:"%H:00",[vc]:"00:%M",[pf]:":%S",[Cd]:".%L",[`${ha}-${za}`]:"%Y-%m ",[`${ha}-${za}-${Al}`]:"%Y-%m-%d ",[`${yc}-${vc}`]:"%H:%M"};function cNe(e,t){const n=Gn({},GNt,t),r=MQ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const h1=new Date;function $Q(e){return h1.setFullYear(e),h1.setMonth(0),h1.setDate(1),h1.setHours(0,0,0,0),h1}function fNe(e){return hNe(new Date(e))}function dNe(e){return TV(new Date(e))}function hNe(e){return Dm.count($Q(e.getFullYear())-1,e)}function TV(e){return cS.count($Q(e.getFullYear())-1,e)}function CV(e){return $Q(e).getDay()}function YNt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function pNe(e){return gNe(new Date(e))}function mNe(e){return AV(new Date(e))}function gNe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return U0.count(t-1,e)}function AV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return fS.count(t-1,e)}function IV(e){return h1.setTime(Date.UTC(e,0,1)),h1.getUTCDay()}function KNt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function yNe(e,t,n,r,i){const s=t||1,o=Sr(e),a=(b,_,E)=>(E=E||b,XNt(n[E],r[E],b===o&&s,_)),u=new Date,l=Td(e),c=l[ha]?a(ha):Ya(2012),f=l[za]?a(za):l[Cl]?a(Cl):S0,d=l[po]&&l[La]?a(La,1,po+La):l[po]?a(po,1):l[La]?a(La,1):l[Al]?a(Al,1):l[ap]?a(ap,1):PS,h=l[yc]?a(yc):S0,p=l[vc]?a(vc):S0,g=l[pf]?a(pf):S0,y=l[Cd]?a(Cd):S0;return function(b){u.setTime(+b);const _=c(u);return i(_,f(u),d(u,_),h(u),p(u),g(u),y(u))}}function XNt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function mx(e,t,n){return t+e*7-(n+6)%7}const QNt={[ha]:e=>e.getFullYear(),[Cl]:e=>Math.floor(e.getMonth()/3),[za]:e=>e.getMonth(),[Al]:e=>e.getDate(),[yc]:e=>e.getHours(),[vc]:e=>e.getMinutes(),[pf]:e=>e.getSeconds(),[Cd]:e=>e.getMilliseconds(),[ap]:e=>hNe(e),[po]:e=>TV(e),[po+La]:(e,t)=>mx(TV(e),e.getDay(),CV(t)),[La]:(e,t)=>mx(1,e.getDay(),CV(t))},JNt={[Cl]:e=>3*e,[po]:(e,t)=>mx(e,0,CV(t))};function vNe(e,t){return yNe(e,t||1,QNt,JNt,YNt)}const ZNt={[ha]:e=>e.getUTCFullYear(),[Cl]:e=>Math.floor(e.getUTCMonth()/3),[za]:e=>e.getUTCMonth(),[Al]:e=>e.getUTCDate(),[yc]:e=>e.getUTCHours(),[vc]:e=>e.getUTCMinutes(),[pf]:e=>e.getUTCSeconds(),[Cd]:e=>e.getUTCMilliseconds(),[ap]:e=>gNe(e),[po]:e=>AV(e),[La]:(e,t)=>mx(1,e.getUTCDay(),IV(t)),[po+La]:(e,t)=>mx(AV(e),e.getUTCDay(),IV(t))},ePt={[Cl]:e=>3*e,[po]:(e,t)=>mx(e,0,IV(t))};function bNe(e,t){return yNe(e,t||1,ZNt,ePt,KNt)}const tPt={[ha]:Kh,[Cl]:mA.every(3),[za]:mA,[po]:cS,[Al]:Dm,[La]:Dm,[ap]:Dm,[yc]:KL,[vc]:GL,[pf]:xm,[Cd]:WE},nPt={[ha]:Xh,[Cl]:gA.every(3),[za]:gA,[po]:fS,[Al]:U0,[La]:U0,[ap]:U0,[yc]:XL,[vc]:YL,[pf]:xm,[Cd]:WE};function $S(e){return tPt[e]}function LS(e){return nPt[e]}function _Ne(e,t,n){return e?e.offset(t,n):void 0}function wNe(e,t,n){return _Ne($S(e),t,n)}function ENe(e,t,n){return _Ne(LS(e),t,n)}function xNe(e,t,n,r){return e?e.range(t,n,r):void 0}function SNe(e,t,n,r){return xNe($S(e),t,n,r)}function TNe(e,t,n,r){return xNe(LS(e),t,n,r)}const GC=1e3,YC=GC*60,KC=YC*60,fF=KC*24,rPt=fF*7,Bhe=fF*30,kV=fF*365,CNe=[ha,za,Al,yc,vc,pf,Cd],XC=CNe.slice(0,-1),QC=XC.slice(0,-1),JC=QC.slice(0,-1),iPt=JC.slice(0,-1),sPt=[ha,po],Uhe=[ha,za],ANe=[ha],ZT=[[XC,1,GC],[XC,5,5*GC],[XC,15,15*GC],[XC,30,30*GC],[QC,1,YC],[QC,5,5*YC],[QC,15,15*YC],[QC,30,30*YC],[JC,1,KC],[JC,3,3*KC],[JC,6,6*KC],[JC,12,12*KC],[iPt,1,fF],[sPt,1,rPt],[Uhe,1,Bhe],[Uhe,3,3*Bhe],[ANe,1,kV]];function INe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(wk(t))/n;let i=oS(a=>a[2]).right(ZT,r),s,o;return i===ZT.length?(s=ANe,o=oy(t[0]/kV,t[1]/kV,n)):i?(i=ZT[r/ZT[i-1][2]<ZT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=CNe,o=Math.max(oy(t[0],t[1],n),1)),{units:s,step:o}}function ZC(e){const t={};return n=>t[n]||(t[n]=e(n))}function oPt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=aPt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function aPt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function kNe(e){const t=ZC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=nb(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return oPt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=nb(o??",f");const a=oy(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=aEe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=uEe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=oEe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let RV;RNe();function RNe(){return RV=kNe({format:Xy,formatPrefix:KG})}function NNe(e){return kNe(sEe(e))}function LM(e){return arguments.length?RV=NNe(e):RV}function zhe(e,t,n){n=n||{},Mt(n)||et(`Invalid time multi-format specifier: ${n}`);const r=t(pf),i=t(vc),s=t(yc),o=t(Al),a=t(po),u=t(za),l=t(Cl),c=t(ha),f=e(n[Cd]||".%L"),d=e(n[pf]||":%S"),h=e(n[vc]||"%I:%M"),p=e(n[yc]||"%I %p"),g=e(n[Al]||n[La]||"%a %d"),y=e(n[po]||"%b %d"),b=e(n[za]||"%B"),_=e(n[Cl]||"%B"),E=e(n[ha]||"%Y");return C=>(r(C)<C?f:i(C)<C?d:s(C)<C?h:o(C)<C?p:u(C)<C?a(C)<C?g:y:c(C)<C?l(C)<C?b:_:E)(C)}function PNe(e){const t=ZC(e.format),n=ZC(e.utcFormat);return{timeFormat:r=>Dt(r)?t(r):zhe(t,$S,r),utcFormat:r=>Dt(r)?n(r):zhe(n,LS,r),timeParse:ZC(e.parse),utcParse:ZC(e.utcParse)}}let NV;DNe();function DNe(){return NV=PNe({format:uY,parse:wxe,utcFormat:zI,utcParse:Exe})}function ONe(e){return PNe(gxe(e))}function KA(e){return arguments.length?NV=ONe(e):NV}const PV=(e,t)=>Gn({},e,t);function MNe(e,t){const n=e?NNe(e):LM(),r=t?ONe(t):KA();return PV(n,r)}function LQ(e,t){const n=arguments.length;return n&&n!==2&&et("defaultLocale expects either zero or two arguments."),n?PV(LM(e),KA(t)):PV(LM(),KA())}function uPt(){return RNe(),DNe(),LQ()}const lPt=/^(data:|([A-Za-z]+:)?\/\/)/,cPt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,fPt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Vhe="file://";function dPt(e,t){return n=>({options:n||{},sanitize:pPt,load:hPt,fileAccess:!!t,file:mPt(t),http:yPt(e)})}async function hPt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function pPt(e,t){t=Gn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=cPt.test(e.replace(fPt,""));(e==null||typeof e!="string"||!a)&&et("Sanitize failure, invalid URI: "+xt(e));const u=lPt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Vhe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Vhe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function mPt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):gPt}async function gPt(){et("No file system access.")}function yPt(e){return e?async function(t,n){const r=Gn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Yn(s[i])?s[i]():s.text():et(s.status+""+s.statusText)}:vPt}async function vPt(){et("No HTTP fetch method available.")}const bPt=e=>e!=null&&e===e,_Pt=e=>e==="true"||e==="false"||e===!0||e===!1,wPt=e=>!Number.isNaN(Date.parse(e)),$Ne=e=>!Number.isNaN(+e)&&!(e instanceof Date),EPt=e=>$Ne(e)&&Number.isInteger(+e),DV={boolean:NQ,integer:Fa,number:Fa,date:PQ,string:DQ,unknown:Ga},jP=[_Pt,EPt,$Ne,wPt],xPt=["boolean","integer","number","date"];function LNe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=jP.length,i=jP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&bPt(u)&&!jP[a](u)&&(i[a]=0,++o,o===jP.length))return"string";return xPt[i.reduce((s,o)=>s===0?o:s,0)-1]}function FNe(e,t){return t.reduce((n,r)=>(n[r]=LNe(e,r),n),{})}function Hhe(e){const t=function(n,r){const i={delimiter:e};return FQ(n,r?Gn(r,i):i)};return t.responseType="text",t}function FQ(e,t){return t.header&&(e=t.header.map(xt).join(t.delimiter)+`
`+e),tEe(t.delimiter).parse(e+"")}FQ.responseType="text";function SPt(e){return typeof Buffer=="function"&&Yn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function jQ(e,t){const n=t&&t.property?df(t.property):Ga;return Mt(e)&&!SPt(e)?TPt(n(e),t):n(JSON.parse(e))}jQ.responseType="json";function TPt(e,t){return!nt(e)&&nNe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const CPt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function jNe(e,t){let n,r,i,s;return e=jQ(e,t),t&&t.feature?(n=zNt,i=t.feature):t&&t.mesh?(n=HNt,i=t.mesh,s=CPt[t.filter]):et("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):et("Invalid TopoJSON object: "+i),r&&r.features||[r]}jNe.responseType="json";const qD={dsv:FQ,csv:Hhe(","),tsv:Hhe("	"),json:jQ,topojson:jNe};function BQ(e,t){return arguments.length>1?(qD[e]=t,this):on(qD,e)?qD[e]:null}function BNe(e){const t=BQ(e);return t&&t.responseType||"text"}function UNe(e,t,n,r){t=t||{};const i=BQ(t.type||"json");return i||et("Unknown data format type: "+t.type),e=i(e,t),t.parse&&APt(e,t.parse,n,r),on(e,"columns")&&delete e.columns,e}function APt(e,t,n,r){if(!e.length)return;const i=KA();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=FNe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let g,y;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return g=p.split(/:(.+)?/,2),y=g[1],(y[0]==="'"&&y[y.length-1]==="'"||y[0]==='"'&&y[y.length-1]==='"')&&(y=y.slice(1,-1)),(g[0]==="utc"?r:n)(y);if(!DV[p])throw Error("Illegal format pattern: "+h+":"+p);return DV[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const dF=dPt(typeof fetch<"u"&&fetch,null);function hF(e){const t=e||Ga,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function WD(e,t){try{await t(e)}catch(n){e.error(n)}}const zNe=Symbol("vega_id");let IPt=1;function pF(e){return!!(e&&rn(e))}function rn(e){return e[zNe]}function VNe(e,t){return e[zNe]=t,e}function ei(e){const t=e===Object(e)?e:{data:e};return rn(t)?t:VNe(t,IPt++)}function UQ(e){return mF(e,ei({}))}function mF(e,t){for(const n in e)t[n]=e[n];return t}function HNe(e,t){return VNe(t,rn(e))}function i_(e,t){return e?t?(n,r)=>e(n,r)||rn(t(n))-rn(t(r)):(n,r)=>e(n,r)||rn(n)-rn(r):null}function qNe(e){return e&&e.constructor===s_}function s_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:s_,insert(a){const u=Pt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Yn(a)?r:t,l=Pt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Ya(l)};return Yn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Yn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,g,y;for(f=0,d=u.length;f<d;++f)l[rn(u[f])]=1;for(f=0,d=t.length;f<d;++f)g=t[f],l[rn(g)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(_=>{p(_)&&(l[rn(_)]=-1)});for(f=0,d=e.length;f<d;++f)g=e[f],y=rn(g),l[y]?l[y]=1:a.add.push(ei(e[f]));for(f=0,d=u.length;f<d;++f)g=u[f],l[rn(g)]<0&&a.rem.push(g);function b(_,E,C){C?_[E]=C(_):a.encode=E,o||(c[rn(_)]=_)}for(f=0,d=n.length;f<d;++f)h=n[f],g=h.tuple,p=h.field,y=l[rn(g)],y>0&&(b(g,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(_=>{p(_)&&l[rn(_)]>0&&b(_,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(_=>l[rn(_)]>0):u.slice();else for(y in c)a.mod.push(c[y]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const GD="_:mod:_";function gF(){Object.defineProperty(this,GD,{writable:!0,value:{}})}gF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[GD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=nt(n)?1+n.length:-1),i},modified(e,t){const n=this[GD];if(arguments.length){if(nt(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[GD]={},this}};let kPt=0;const RPt="pulse",NPt=new gF,PPt=1,DPt=2;function Ei(e,t,n,r){this.id=++kPt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function qhe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Ei.prototype={targets(){return this._targets||(this._targets=hF(_k))},set(e){return this.value!==e?(this.value=e,1):0},skip:qhe(PPt),modified:qhe(DPt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new gF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Ei?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===RPt)Pt(a).forEach(f=>{f instanceof Ei?f!==this&&(f.targets().add(this),s.push(f)):et("Pulse parameters must be operator instances.")}),this.source=a;else if(nt(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||NPt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function OPt(e,t,n,r){let i=1,s;return e instanceof Ei?s=e:e&&e.prototype instanceof Ei?s=new e:Yn(e)?s=new Ei(null,e):(i=0,s=new Ei(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function MPt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let $Pt=0;function yF(e,t,n){this.id=++$Pt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function a0(e,t,n){return new yF(e,t,n)}yF.prototype={_filter:hf,_apply:Ga,targets(){return this._targets||(this._targets=hF(_k))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=a0(e);return this.targets().add(t),t},apply(e){const t=a0(null,e);return this.targets().add(t),t},merge(){const e=a0();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=a0();return this.targets().add(a0(null,null,kQ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(a0(null,null,()=>n=!0)),t.targets().add(a0(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=hf,this._targets=null}};function LPt(e,t,n,r){const i=this,s=a0(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Pt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function FPt(e,t){const n=this.locale();return UNe(e,t,n.timeParse,n.utcParse)}function jPt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function BPt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:BNe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function UPt(e,t,n){const r=this,i=r._pending||zPt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(hf).insert(s.data||[])),i.done(),s}function zPt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const VPt={skip:!0};function HPt(e,t,n,r,i){return(e instanceof Ei?WPt:qPt)(this,e,t,n,r,i),this}function qPt(e,t,n,r,i,s){const o=Gn({},s,VPt);let a,u;Yn(n)||(n=Ya(n)),r===void 0?a=l=>e.touch(n(l)):Yn(r)?(u=new Ei(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;qNe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function WPt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Ei(null,GPt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function GPt(e,t){return t=Yn(t)?t:Ya(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function YPt(e){e.rank=++this._rank}function KPt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&et("Cycle detected in dataflow graph.")}const FM={},fh=1,p0=2,sm=4,XPt=fh|p0,Whe=fh|sm,fw=fh|p0|sm,Ghe=8,eC=16,Yhe=32,Khe=64;function K0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function yB(e,t){const n=[];return h0(e,t,r=>n.push(r)),n}function Xhe(e,t){const n={};return e.visit(t,r=>{n[rn(r)]=1}),r=>n[rn(r)]?null:r}function BP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}K0.prototype={StopPropagation:FM,ADD:fh,REM:p0,MOD:sm,ADD_REM:XPt,ADD_MOD:Whe,ALL:fw,REFLOW:Ghe,SOURCE:eC,NO_SOURCE:Yhe,NO_FIELDS:Khe,fork(e){return new K0(this.dataflow).init(this,e)},clone(){const e=this.fork(fw);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(fw|eC)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new K0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Khe)&&(n.fields=e.fields),t&fh?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&p0?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&sm?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Yhe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||fw;return t&fh&&this.add.length||t&p0&&this.rem.length||t&sm&&this.mod.length},reflow(e){if(e)return this.fork(fw).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(sm,Xhe(this,fh))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return nt(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?nt(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&fh&&(n.addF=BP(n.addF,t)),e&p0&&(n.remF=BP(n.remF,t)),e&sm&&(n.modF=BP(n.modF,t)),e&eC&&(n.srcF=BP(n.srcF,t)),n},materialize(e){e=e||fw;const t=this;return e&fh&&t.addF&&(t.add=yB(t.add,t.addF),t.addF=null),e&p0&&t.remF&&(t.rem=yB(t.rem,t.remF),t.remF=null),e&sm&&t.modF&&(t.mod=yB(t.mod,t.modF),t.modF=null),e&eC&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&eC)return h0(n.source,n.srcF,r),n;e&fh&&h0(n.add,n.addF,r),e&p0&&h0(n.rem,n.remF,r),e&sm&&h0(n.mod,n.modF,r);const i=n.source;if(e&Ghe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?h0(i,Xhe(n,Whe),r):h0(i,n.srcF,r))}return n}};function zQ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}At(zQ,K0,{fork(e){const t=new K0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?nt(e)?e.some(r=>n[r]):n[e]:0},filter(){et("MultiPulse does not support filtering.")},materialize(){et("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function QPt(e,t,n){const r=this,i=[];if(r._pulse)return WNe(r);if(r._pending&&await r._pending,t&&await WD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new K0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=hF(_k);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=FM),u!==FM&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await WD(r,c[f].callback)}return n&&await WD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function JPt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function ZPt(e,t,n){return this._pulse?WNe(this):(this.evaluate(e,t,n),this)}function eDt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function WNe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function tDt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function nDt(e,t){const n=e.source,r=this._clock;return n&&nt(n)?new zQ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||rDt(this._pulse,n&&n.pulse)}function rDt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==FM&&(e.source=t.source),e)}const VQ={skip:!1,force:!1};function iDt(e,t){const n=t||VQ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function sDt(e,t,n){const r=n||VQ;return(e.set(t)||r.force)&&this.touch(e,r),this}function oDt(e,t,n){this.touch(e,n||VQ);const r=new K0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function aDt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),GNe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,uDt(t,0,e)):r=n,r}}}function GNe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function uDt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,GNe(e,r,t,n)}function _E(){this.logger(SQ()),this.logLevel(EQ),this._clock=0,this._rank=0,this._locale=LQ();try{this._loader=dF()}catch{}this._touched=hF(_k),this._input={},this._pulse=null,this._heap=aDt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function tC(e){return function(){return this._log[e].apply(this,arguments)}}_E.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:tC("error"),warn:tC("warn"),info:tC("info"),debug:tC("debug"),logLevel:tC("level"),cleanThreshold:1e4,add:OPt,connect:MPt,rank:YPt,rerank:KPt,pulse:oDt,touch:iDt,update:sDt,changeset:s_,ingest:jPt,parse:FPt,preload:UPt,request:BPt,events:LPt,on:HPt,evaluate:QPt,run:ZPt,runAsync:JPt,runAfter:eDt,_enqueue:tDt,_getPulse:nDt};function Ye(e,t){Ei.call(this,e,null,t)}At(Ye,Ei,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const gx={};function YNe(e){const t=KNe(e);return t&&t.Definition||null}function KNe(e){return e=e&&e.toLowerCase(),on(gx,e)?gx[e]:null}function*XNe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function HQ(e,t,n){const r=Float64Array.from(XNe(e,n));return r.sort(Rm),t.map(i=>ewe(r,i))}function qQ(e,t){return HQ(e,[.25,.5,.75],t)}function WQ(e,t){const n=e.length,r=knt(e,t),i=qQ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function QNe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,g=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+g)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var mf=Math.random;function lDt(e){mf=e}function JNe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(XNe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(mf()*s)];c[l]=a/s}return c.sort(Rm),[m7(c,n/2),m7(c,1-n/2)]}function ZNe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?cDt(s,t+t/4):s}function cDt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function fDt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function dDt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*mf())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const ePe=Math.sqrt(2*Math.PI),hDt=Math.SQRT2;let nC=NaN;function vF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(nC===nC)n=nC,nC=NaN;else{do n=mf()*2-1,r=mf()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,nC=r*s}return e+n*t}function GQ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*ePe)}function bF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function _F(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*hDt*pDt(2*e-1)}function pDt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function YQ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>vF(n,r),pdf:s=>GQ(s,n,r),cdf:s=>bF(s,n,r),icdf:s=>_F(s,n,r)};return i.mean(e).stdev(t)}function KQ(e,t){const n=YQ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=WQ(e)),i):t},sample(){return e[~~(mf()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function XQ(e,t){return e=e||0,t=t??1,Math.exp(e+vF()*t)}function QQ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*ePe*e)}function JQ(e,t,n){return bF(Math.log(e),t,n)}function ZQ(e,t,n){return Math.exp(_F(e,t,n))}function tPe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>XQ(n,r),pdf:s=>QQ(s,n,r),cdf:s=>JQ(s,n,r),icdf:s=>ZQ(s,n,r)};return i.mean(e).stdev(t)}function nPe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=mf();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function eJ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*mf()}function tJ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function nJ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function rJ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function rPe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>eJ(n,r),pdf:s=>tJ(s,n,r),cdf:s=>nJ(s,n,r),icdf:s=>rJ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function iJ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Ek(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function wF(e,t,n,r){e=e.filter(h=>{let p=t(h),g=n(h);return p!=null&&(p=+p)>=p&&g!=null&&(g=+g)>=g}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function xk(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function FS(e,t,n,r,i){let s=0,o=0;return xk(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function sJ(e,t,n){let r=0,i=0,s=0,o=0,a=0;xk(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Ek(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:FS(e,t,n,i,l)}}function iPe(e,t,n){let r=0,i=0,s=0,o=0,a=0;xk(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Ek(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:FS(e,t,n,i,l)}}function sPe(e,t,n){const[r,i,s,o]=wF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;xk(e,t,n,(_,E)=>{d=r[f++],h=Math.log(E),p=d*E,a+=(E*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[g,y]=Ek(u/o,a/o,l/o,c/o),b=_=>Math.exp(g+y*(_-s));return{coef:[Math.exp(g-y*s),y],predict:b,rSquared:FS(e,t,n,o,b)}}function oPe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;xk(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=Ek(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:FS(e,t,n,a,c)}}function oJ(e,t,n){const[r,i,s,o]=wF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,g,y;for(h=0;h<a;)p=r[h],g=i[h++],y=p*p,u+=(y-u)/h,l+=(y*p-l)/h,c+=(y*y-c)/h,f+=(p*g-f)/h,d+=(y*g-d)/h;const b=c-u*u,_=u*b-l*l,E=(d*u-f*l)/_,C=(f*b-d*l)/_,x=-E*u,T=A=>(A=A-s,E*A*A+C*A+x+o);return{coef:[x-C*s+E*s*s+o,C-2*E*s,E],predict:T,rSquared:FS(e,t,n,o,T)}}function aPe(e,t,n,r){if(r===0)return iJ(e,t,n);if(r===1)return sJ(e,t,n);if(r===2)return oJ(e,t,n);const[i,s,o,a]=wF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,g,y;for(d=0;d<f;++d){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d)*s[p];for(l.push(g),y=new Float64Array(f),h=0;h<f;++h){for(p=0,g=0;p<u;++p)g+=Math.pow(i[p],d+h);y[h]=g}c.push(y)}c.push(l);const b=gDt(c),_=E=>{E-=o;let C=a+b[0]+b[1]*E+b[2]*E*E;for(d=3;d<f;++d)C+=b[d]*Math.pow(E,d);return C};return{coef:mDt(f,b,-o,a),predict:_,rSquared:FS(e,t,n,a,_)}}function mDt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function gDt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Qhe=2,Jhe=1e-12;function uPe(e,t,n,r){const[i,s,o,a]=wF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Qhe;){const p=[0,l-1];for(let y=0;y<u;++y){const b=i[y],_=p[0],E=p[1],C=b-i[_]>i[E]-b?_:E;let x=0,T=0,A=0,k=0,N=0;const P=1/Math.abs(i[C]-b||1);for(let M=_;M<=E;++M){const B=i[M],V=s[M],z=yDt(Math.abs(b-B)*P)*d[M],G=B*z;x+=z,T+=G,A+=V*z,k+=V*G,N+=B*G}const[D,j]=Ek(T/x,A/x,k/x,N/x);c[y]=D+j*b,f[y]=Math.abs(s[y]-c[y]),vDt(i,y+1,p)}if(h===Qhe)break;const g=twe(f);if(Math.abs(g)<Jhe)break;for(let y=0,b,_;y<u;++y)b=f[y]/(6*g),d[y]=b>=1?Jhe:(_=1-b*b)*_}return bDt(i,c,o,a)}function yDt(e){return(e=1-e*e*e)*e*e}function vDt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function bDt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const _Dt=.5*Math.PI/180;function EF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=g=>[g,e(g)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let g=1;g<r;++g)l.push(i(s+g/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let g=n;--g>0;)c.push(i(s+g/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=wDt(f[1],c);for(;d;){const g=i((f[0]+d[0])/2);g[0]-f[0]>=u&&EDt(f,g,d,h,p)>_Dt?c.push(g):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function wDt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function EDt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function xDt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function OV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:xDt(e)}function lPe(e,t,n){return n||e+(t?"_"+t:"")}const vB=()=>{},SDt={init:vB,add:vB,rem:vB,idx:0},XA={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Sk=Object.keys(XA).filter(e=>e!=="__count__");function TDt(e,t){return(n,r)=>Gn({name:e,aggregate_param:r,out:n||e},SDt,t)}[...Sk,"__count__"].forEach(e=>{XA[e]=TDt(e,XA[e])});function cPe(e,t,n){return XA[e](n,t)}function fPe(e,t){return e.idx-t.idx}function CDt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=XA[i]())})};return e.forEach(n),Object.values(t).sort(fPe)}function ADt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function IDt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function kDt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function RDt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function dPe(e,t){const n=t||Ga,r=CDt(e),i=e.slice().sort(fPe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=ADt,s.prototype.add=IDt,s.prototype.rem=kDt,s.prototype.set=RDt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function aJ(e){this._key=e?df(e):rn,this.reset()}const va=aJ.prototype;va.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};va.add=function(e){this._add.push(e)};va.rem=function(e){this._rem.push(e)};va.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};va.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",on(n,s)||(n[s]=1,++i);return i};va.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=eNe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};va.argmin=function(e){return this.extent(e)[0]||{}};va.argmax=function(e){return this.extent(e)[1]||{}};va.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};va.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};va.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=qQ(this.values(),e),this._get=e),this._q};va.q1=function(e){return this.quartile(e)[0]};va.q2=function(e){return this.quartile(e)[1]};va.q3=function(e){return this.quartile(e)[2]};va.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=JNe(this.values(),1e3,.05,e),this._get=e),this._ci};va.ci0=function(e){return this.ci(e)[0]};va.ci1=function(e){return this.ci(e)[1]};function Cy(e){Ye.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Cy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Sk},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};At(Cy,Ye,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(_){const E=Pt(Ua(_)),C=E.length;let x=0,T;for(;x<C;++x)r[T=E[x]]||(r[T]=1,t.push(T))}this._dims=Pt(e.groupby),this._dnames=this._dims.map(_=>{const E=Es(_);return i(_),n.push(E),E}),this.cellkey=e.key?e.key:OV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,g,y,b;for(l!==o.length&&et("Unmatched number of fields and aggregate ops."),b=0;b<l;++b){if(f=s[b],d=o[b],h=a[b]||null,f==null&&d!=="count"&&et("Null aggregate field specified."),g=Es(f),y=lPe(d,g,u[b]),n.push(y),d==="count"){this._counts.push(y);continue}p=c[g],p||(i(f),p=c[g]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(cPe(d,h,y))}return this._measures=this._measures.map(_=>dPe(_,_.field)),Object.create(null)},cellkey:OV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new aJ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?HNe(t.tuple,s):ei(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const NDt=1e-14;function uJ(e){Ye.call(this,null,e)}uJ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};At(uJ,Ye,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(Ua(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=QNe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=Fa(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(NDt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Pl(u,Ua(t),e.name||"bin_"+Es(t))}});function hPe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?oNe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function lJ(e){Ye.call(this,[],e)}lJ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};At(lJ,Ye,{transform(e,t){const n=t.fork(t.ALL),r=hPe(rn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(i_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function pPe(e){Ei.call(this,null,PDt,e)}At(pPe,Ei);function PDt(e){return this.value&&!e.modified()?this.value:IQ(e.fields,e.orders)}function cJ(e){Ye.call(this,null,e)}cJ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function DDt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}At(cJ,Ye,{transform(e,t){const n=f=>d=>{for(var h=DDt(a(d),e.case,s)||[],p,g=0,y=h.length;g<y;++g)o.test(p=h[g])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=ei({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function fJ(e){Ye.call(this,null,e)}fJ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};At(fJ,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=ODt(a,i,s,e.filter||hf)):n.mod=a,n.source=this.value,n.modifies(r)}});function ODt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(ei(s)),s={},s[t]=l);return i}const Zhe={kde:KQ,mixture:nPe,normal:YQ,lognormal:tPe,uniform:rPe},MDt="distributions",epe="function",$Dt="field";function mPe(e,t){const n=e[epe];on(Zhe,n)||et("Unknown distribution function: "+n);const r=Zhe[n]();for(const i in e)i===$Dt?r.data((e.from||t()).map(e[i])):i===MDt?r[i](e[i].map(s=>mPe(s,t))):typeof r[i]===epe&&r[i](e[i]);return r}function dJ(e){Ye.call(this,null,e)}const gPe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],LDt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:gPe},{name:"weights",type:"number",array:!0}]};dJ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:gPe.concat(LDt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};At(dJ,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=mPe(e.distribution,FDt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&et("Invalid density method: "+o),!e.extent&&!r.data&&et("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||op(r.data()),l=EF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],ei(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function FDt(e){return()=>e.materialize(e.SOURCE).source}function yPe(e,t){return e?e.map((n,r)=>t[r]||Es(n)):null}function hJ(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const vPe="bin";function pJ(e){Ye.call(this,null,e)}pJ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:vPe}]};const jDt=(e,t)=>wk(op(e,t))/30;At(pJ,Ye,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=hJ(t.source,e.groupby,Ga),i=e.smooth||!1,s=e.field,o=e.step||jDt(n,s),a=i_((p,g)=>s(p)-s(g)),u=e.as||vPe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const g of ZNe(p,o,i,s))g<c&&(c=g),g>f&&(f=g),p[++h][u]=g}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function bPe(e){Ei.call(this,null,BDt,e),this.modified(!0)}At(bPe,Ei);function BDt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Pl(n=>t(n,e),Ua(t),Es(t))}function mJ(e){Ye.call(this,[void 0,void 0],e)}mJ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};At(mJ,Ye,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=Fa(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Es(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function gJ(e,t){Ei.call(this,e),this.parent=t,this.count=0}At(gJ,Ei,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function xF(e){Ye.call(this,{},e),this._keys=MS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}At(xF,Ye,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=on(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new gJ(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=rn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(rn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=rn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(rn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=rn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function _Pe(e){Ei.call(this,null,UDt,e)}At(_Pe,Ei);function UDt(e){return this.value&&!e.modified()?this.value:nt(e.name)?Pt(e.name).map(t=>df(t)):df(e.name,e.as)}function yJ(e){Ye.call(this,MS(),e)}yJ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};At(yJ,Ye,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=rn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(rn(f),1)});function c(f){const d=rn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function vJ(e){Ye.call(this,[],e)}vJ.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};At(vJ,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=yPe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,g)=>Math.max(p,g.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=UQ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function bJ(e){Ye.call(this,[],e)}bJ.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};At(bJ,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Es),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=UQ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function _J(e){Ye.call(this,null,e)}_J.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};At(_J,Ye,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function wPe(e){Ye.call(this,[],e)}At(wPe,Ye,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=ei(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const UP={value:"value",median:twe,mean:Mnt,min:p7,max:Nm},zDt=[];function wJ(e){Ye.call(this,[],e)}wJ.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function VDt(e){var t=e.method||UP.value,n;if(UP[t]==null)et("Unrecognized imputation method: "+t);else return t===UP.value?(n=e.value!==void 0?e.value:0,()=>n):UP[t]}function HDt(e){const t=e.field;return n=>n?t(n):NaN}At(wJ,Ye,{transform(e,t){var n=t.fork(t.ALL),r=VDt(e),i=HDt(e),s=Es(e.field),o=Es(e.key),a=(e.groupby||[]).map(Es),u=qDt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,g,y,b,_,E,C,x;for(y=0,E=u.length;y<E;++y)for(d=u[y],p=d.values,h=NaN,_=0;_<f;++_)if(d[_]==null){for(g=u.domain[_],x={_impute:!0},b=0,C=p.length;b<C;++b)x[a[b]]=p[b];x[o]=g,x[s]=Number.isNaN(h)?h=r(d,i):h,l.push(ei(x))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function qDt(e,t,n,r){var i=b=>b(y),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,g,y;for(o.forEach((b,_)=>a[b]=_+1),d=0,g=e.length;d<g;++d)y=e[d],p=n(y),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):zDt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=y;return s.domain=o,s}function EJ(e){Cy.call(this,e)}EJ.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Sk},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};At(EJ,Cy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Gn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function xJ(e){Ye.call(this,null,e)}xJ.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};At(xJ,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=hJ(r,e.groupby,e.field),s=(e.groupby||[]).map(Es),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&et("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=op(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=KQ(h,o)[a],g=e.counts?h.length:1,y=c||op(h);EF(p,y,f,d).forEach(b=>{const _={};for(let E=0;E<s.length;++E)_[s[E]]=h.dims[E];_[u[0]]=b[0],_[u[1]]=b[1]*g,l.push(ei(_))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function EPe(e){Ei.call(this,null,WDt,e)}At(EPe,Ei);function WDt(e){return this.value&&!e.modified()?this.value:RQ(e.fields,e.flat)}function xPe(e){Ye.call(this,[],e),this._pending=null}At(xPe,Ye,{transform(e,t){const n=t.dataflow;return this._pending?bB(this,t,this._pending):GDt(e)?t.StopPropagation:e.values?bB(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Pt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>bB(this,t,Pt(r.data)))}});function GDt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function bB(e,t,n){n.forEach(ei);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function SJ(e){Ye.call(this,{},e)}SJ.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};At(SJ,Ye,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&et('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&et('The "as" parameter has too few output field names.'),c=c||i.map(Es),f=function(p){for(var g=0,y=0,b,_;g<a;++g)if(_=r.get(n[g](p)),_==null)for(b=0;b<d;++b,++y)p[c[y]]=s;else for(b=0;b<d;++b,++y)p[c[y]]=i[b](_)}):(c||et("Missing output field names."),f=function(p){for(var g=0,y;g<a;++g)y=r.get(n[g](p)),p[c[g]]=y??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function SPe(e){Ei.call(this,null,YDt,e)}At(SPe,Ei);function YDt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function TPe(e){Ei.call(this,null,KDt,e)}At(TPe,Ei);function KDt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function CPe(e){Ye.call(this,null,e)}At(CPe,Ye,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function TJ(e){Cy.call(this,e)}TJ.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Sk,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};At(TJ,Cy,{_transform:Cy.prototype.transform,transform(e,t){return this._transform(XDt(e,t),t)}});function XDt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Ua(n).concat(Ua(r)),o=JDt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>QDt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function QDt(e,t,n,r){return Pl(i=>t(i)===e?n(i):NaN,r,e+"")}function JDt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(cF),t?i.slice(0,t):i}function APe(e){xF.call(this,e)}At(APe,xF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(rn(s),n,t,s);return(e.modified("field")||r&&t.modified(Ua(r)))&&et("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(ei(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function CJ(e){Ye.call(this,null,e)}CJ.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};At(CJ,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=yPe(e.fields,e.as||[]),s=r?(a,u)=>ZDt(a,u,r,i):mF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=rn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,ei({}));o[rn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[rn(a)]))}),n}});function ZDt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function IPe(e){Ye.call(this,null,e)}At(IPe,Ye,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function AJ(e){Ye.call(this,null,e)}AJ.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const eOt=1e-14;At(AJ,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=hJ(i,e.groupby,e.field),o=(e.groupby||[]).map(Es),a=[],u=e.step||.01,l=e.probs||ll(u/2,1-eOt,u),c=l.length;return s.forEach(f=>{const d=HQ(f,l);for(let h=0;h<c;++h){const p={};for(let g=0;g<o.length;++g)p[o[g]]=f.dims[g];p[r[0]]=l[h],p[r[1]]=d[h],a.push(ei(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function kPe(e){Ye.call(this,null,e)}At(kPe,Ye,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=rn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=UQ(i);r[rn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[rn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function IJ(e){Ye.call(this,[],e),this.count=0}IJ.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};At(IJ,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[rn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*mf()),d<o.length&&d>=u&&(f=o[d],s[rn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=rn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[rn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[rn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[rn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[rn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[rn(c)])),this.count=a,this.value=n.source=o,n}});function kJ(e){Ye.call(this,null,e)}kJ.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};At(kJ,Ye,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=ll(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,ei(s)}),n.add=t.add.concat(this.value),n}});function RPe(e){Ye.call(this,null,e),this.modified(!0)}At(RPe,Ye,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function RJ(e){Ye.call(this,null,e)}const NPe=["unit0","unit1"];RJ.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:OQ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:NPe}]};At(RJ,Ye,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?LS:$S)(s.unit).offset,a=e.as||NPe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Ua(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const g=n(p);let y,b;g==null?(p[u]=null,r&&(p[l]=null)):(p[u]=y=b=s(g),r&&(p[l]=b=o(y,c)),y<f&&(f=y),b>d&&(d=b))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:INe({extent:e.extent||op(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=MQ(r),o=this.value||{},a=(n?bNe:vNe)(s,i);return a.unit=Sr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function PPe(e){Ye.call(this,MS(),e)}At(PPe,Ye,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function DPe(e){Ye.call(this,null,e)}At(DPe,Ye,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(i_(e.sort)):t.source).map(e.field))}});function tOt(e,t,n,r){const i=QA[e](t,n);return{init:i.init||S0,update:function(s,o){o[r]=i.next(s)}}}const QA={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=QA.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||et("ntile num must be greater than zero.");const n=QA.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||et("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=nOt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function nOt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const rOt=Object.keys(QA);function OPe(e){const t=Pt(e.ops),n=Pt(e.fields),r=Pt(e.params),i=Pt(e.aggregate_params),s=Pt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Pt(Ua(p)).forEach(g=>u[g]=1)}h(e.sort),t.forEach((p,g)=>{const y=n[g],b=r[g],_=i[g]||null,E=Es(y),C=lPe(p,E,s[g]);if(h(y),o.push(C),on(QA,p))a.push(tOt(p,y,b,C));else{if(y==null&&p!=="count"&&et("Null aggregate field specified."),p==="count"){c.push(C);return}d=!1;let x=l[E];x||(x=l[E]=[],x.field=y,f.push(x)),x.push(cPe(p,_,C))}}),(c.length||f.length)&&(this.cell=iOt(f,c,d)),this.inputs=Object.keys(u)}const MPe=OPe.prototype;MPe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};MPe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function iOt(e,t,n){e=e.map(u=>dPe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new aJ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function NJ(e){Ye.call(this,{},e),this._mlen=0,this._mods=[]}NJ.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:rOt.concat(Sk)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};At(NJ,Ye,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=i_(e.sort),i=OV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new OPe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)sOt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=hPe(rn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function sOt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?oS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Ya(-1)};t.init();for(let f=0;f<u;++f)oOt(c,o,f,u),s&&aOt(c,l),t.update(c,a[f])}function oOt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function aOt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const uOt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Cy,bin:uJ,collect:lJ,compare:pPe,countpattern:cJ,cross:fJ,density:dJ,dotbin:pJ,expression:bPe,extent:mJ,facet:xF,field:_Pe,filter:yJ,flatten:vJ,fold:bJ,formula:_J,generate:wPe,impute:wJ,joinaggregate:EJ,kde:xJ,key:EPe,load:xPe,lookup:SJ,multiextent:SPe,multivalues:TPe,params:CPe,pivot:TJ,prefacet:APe,project:CJ,proxy:IPe,quantile:AJ,relay:kPe,sample:IJ,sequence:kJ,sieve:RPe,subflow:gJ,timeunit:RJ,tupleindex:PPe,values:DPe,window:NJ},Symbol.toStringTag,{value:"Module"}));function X0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const lOt=()=>typeof Image<"u"?Image:null;function PJ(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const cOt="identity",yx="linear",og="log",Tk="pow",Ck="sqrt",SF="symlog",gb="time",yb="utc",Vh="sequential",jS="diverging",vx="quantile",TF="quantize",CF="threshold",DJ="ordinal",MV="point",$Pe="band",OJ="bin-ordinal",Eo="continuous",Ak="discrete",Ik="discretizing",Cf="interpolating",MJ="temporal";function fOt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function dOt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function $J(){const e=Jy().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=PJ(f,a,u);let g=r[d-0];i=(h-g)/(p||1),o&&(i=Math.floor(i)),g+=(h-g-i*(f-a))*l,s=i*(1-a),o&&(g=Math.round(g),s=Math.round(s));const y=ll(f).map(b=>g+i*b);return n(d?y.reverse():y)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let g=+f[0],y=+f[1],b,_,E;if(!(g!==g||y!==y)&&(y<g&&(E=g,g=y,y=E),!(y<h[0]||g>r[1-d])))return b=Math.max(0,sy(h,g)-1),_=g===y?b:sy(h,y)-1,g-h[b]>s+1e-10&&++b,d&&(E=b,b=p-_,_=p-E),b>_?void 0:t().slice(b,_+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return $J().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function LPe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return LPe(t())},e}function hOt(){return LPe($J().paddingInner(1))}var pOt=Array.prototype.map;function mOt(e){return pOt.call(e,Fa)}const gOt=Array.prototype.slice;function FPe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(sy(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=mOt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=gOt.call(r),n):t.slice()},n.tickFormat=function(r,i){return oxe(e[0],Sr(e),r??10,i)},n.copy=function(){return FPe().domain(n.domain()).range(n.range())},n}const jM=new Map,jPe=Symbol("vega_scale");function BPe(e){return e[jPe]=!0,e}function yOt(e){return e&&e[jPe]===!0}function vOt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?fOt(s):s.invertExtent?dOt(s):void 0),s.type=e,BPe(s)};return r.metadata=Td(Pt(n)),r}function Wr(e,t,n){return arguments.length>1?(jM.set(e,vOt(e,t,n)),this):UPe(e)?jM.get(e):void 0}Wr(cOt,axe);Wr(yx,cf,Eo);Wr(og,lxe,[Eo,og]);Wr(Tk,oY,Eo);Wr(Ck,uct,Eo);Wr(SF,cxe,Eo);Wr(gb,cY,[Eo,MJ]);Wr(yb,xft,[Eo,MJ]);Wr(Vh,fY,[Eo,Cf]);Wr(`${Vh}-${yx}`,fY,[Eo,Cf]);Wr(`${Vh}-${og}`,xxe,[Eo,Cf,og]);Wr(`${Vh}-${Tk}`,dY,[Eo,Cf]);Wr(`${Vh}-${Ck}`,Sft,[Eo,Cf]);Wr(`${Vh}-${SF}`,Sxe,[Eo,Cf]);Wr(`${jS}-${yx}`,Txe,[Eo,Cf]);Wr(`${jS}-${og}`,Cxe,[Eo,Cf,og]);Wr(`${jS}-${Tk}`,hY,[Eo,Cf]);Wr(`${jS}-${Ck}`,Tft,[Eo,Cf]);Wr(`${jS}-${SF}`,Axe,[Eo,Cf]);Wr(vx,fxe,[Ik,vx]);Wr(TF,dxe,Ik);Wr(CF,hxe,Ik);Wr(OJ,FPe,[Ak,Ik]);Wr(DJ,Jy,Ak);Wr($Pe,$J,Ak);Wr(MV,hOt,Ak);function UPe(e){return jM.has(e)}function o_(e,t){const n=jM.get(e);return n&&n.metadata[t]}function LJ(e){return o_(e,Eo)}function bx(e){return o_(e,Ak)}function $V(e){return o_(e,Ik)}function zPe(e){return o_(e,og)}function bOt(e){return o_(e,MJ)}function VPe(e){return o_(e,Cf)}function HPe(e){return o_(e,vx)}const _Ot=["clamp","base","constant","exponent"];function qPe(e,t){const n=t[0],r=Sr(t)-n;return function(i){return e(n+i*r)}}function AF(e,t,n){return jG(FJ(t||"rgb",n),e)}function WPe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function GPe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Ya(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Wr(s)().domain([t,n]).range([0,1]),_Ot.forEach(a=>e[a]?o[a](e[a]()):0),o)}function FJ(e,t){const n=sst[wOt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function wOt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const EOt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},xOt={accent:Aft,category10:Cft,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Ift,observable10:kft,paired:Rft,pastel1:Nft,pastel2:Pft,set1:Dft,set2:Oft,set3:Mft,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function YPe(e){if(nt(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function KPe(e,t){for(const n in e)jJ(n,t(e[n]))}const tpe={};KPe(xOt,YPe);KPe(EOt,e=>AF(YPe(e)));function jJ(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(tpe[e]=t,this):tpe[e]}const YD="symbol",SOt="discrete",TOt="gradient",COt=e=>nt(e)?e.map(t=>String(t)):String(e),AOt=(e,t)=>e[1]-t[1],IOt=(e,t)=>t[1]-e[1];function BJ(e,t,n){let r;return Or(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(wk(e.domain())/n||1)+1))),Mt(t)&&(r=t.step,t=t.interval),Dt(t)&&(t=e.type===gb?$S(t):e.type==yb?LS(t):et("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function XPe(e,t,n){let r=e.range(),i=r[0],s=Sr(r),o=AOt;if(i>s&&(r=s,s=i,i=r,o=IOt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Sr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function UJ(e,t){return e.bins?XPe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function QPe(e,t,n,r,i,s){const o=t.type;let a=COt;if(o===gb||i===gb)a=e.timeFormat(r);else if(o===yb||i===yb)a=e.utcFormat(r);else if(zPe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=JPe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function JPe(e,t,n){const r=UJ(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const LV={[vx]:"quantiles",[TF]:"thresholds",[CF]:"domain"},ZPe={[vx]:"quantiles",[TF]:"domain"};function eDe(e,t){return e.bins?NOt(e.bins):e.type===og?JPe(e,t,!0):LV[e.type]?ROt(e[LV[e.type]]()):UJ(e,t)}function kOt(e,t,n){const r=t[ZPe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function ROt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function NOt(e){const t=e.slice(0,-1);return t.max=Sr(e),t}const POt=e=>LV[e.type]||e.bins;function tDe(e,t,n,r,i,s,o){const a=ZPe[t.type]&&s!==gb&&s!==yb?kOt(e,t,i):QPe(e,t,n,i,s,o);return r===YD&&POt(t)?DOt(a):r===SOt?OOt(a):MOt(a)}const DOt=e=>(t,n,r)=>{const i=npe(r[n+1],npe(r.max,1/0)),s=rpe(t,e),o=rpe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},npe=(e,t)=>e??t,OOt=e=>(t,n)=>n?e(t):null,MOt=e=>t=>e(t),rpe=(e,t)=>Number.isFinite(e)?t(e):null;function $Ot(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Sr(t),s=i-r;if(e.type===CF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function LOt(e,t,n,r){const i=r||t.type;return Dt(n)&&bOt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===gb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===yb?e.utcFormat("%A, %d %B %Y, %X UTC"):tDe(e,t,5,null,n,r,!0)}function nDe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=LOt(e,t,n.format,n.formatType);if($V(t.type)){const s=eDe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(bx(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Sr(s))}`}}let rDe=0;function FOt(){rDe=0}const BM="p_";function zJ(e){return e&&e.gradient}function iDe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?BM:"";return i||(i=e.id="gradient_"+rDe++,r==="radial"?(e.x1=th(e.x1,.5),e.y1=th(e.y1,.5),e.r1=th(e.r1,0),e.x2=th(e.x2,.5),e.y2=th(e.y2,.5),e.r2=th(e.r2,.5),s=BM):(e.x1=th(e.x1,0),e.y1=th(e.y1,0),e.x2=th(e.x2,1),e.y2=th(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function th(e,t){return e??t}function sDe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const ipe={basis:{curve:Kft},"basis-closed":{curve:Xft},"basis-open":{curve:Qft},bundle:{curve:Jft,tension:"beta",value:.85},cardinal:{curve:Zft,tension:"tension",value:0},"cardinal-open":{curve:tdt,tension:"tension",value:0},"cardinal-closed":{curve:edt,tension:"tension",value:0},"catmull-rom":{curve:ndt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:rdt,tension:"alpha",value:.5},"catmull-rom-open":{curve:idt,tension:"alpha",value:.5},linear:{curve:pY},"linear-closed":{curve:sdt},monotone:{horizontal:adt,vertical:odt},natural:{curve:udt},step:{curve:ldt},"step-after":{curve:fdt},"step-before":{curve:cdt}};function VJ(e,t,n){var r=on(ipe,e)&&ipe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const jOt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},BOt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,UOt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,zOt=/^((\s+,?\s*)|(,\s*))/,VOt=/^[01]/;function _x(e){const t=[];return(e.match(BOt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=jOt[s],a=HOt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function HOt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?VOt:UOt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(zOt);u!==null&&(i+=u[0].length)}return r}const Ay=Math.PI/180,qOt=1e-14,p1=Math.PI/2,Th=Math.PI*2,dw=Math.sqrt(3)/2;var _B={},wB={},oDe=[].join;function WOt(e,t,n,r,i,s,o,a,u){const l=oDe.call(arguments);if(_B[l])return _B[l];const c=o*Ay,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let g=h*h/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);const y=d/n,b=f/n,_=-f/r,E=d/r,C=y*a+b*u,x=_*a+E*u,T=y*e+b*t,A=_*e+E*t;let N=1/((T-C)*(T-C)+(A-x)*(A-x))-.25;N<0&&(N=0);let P=Math.sqrt(N);s==i&&(P=-P);const D=.5*(C+T)-P*(A-x),j=.5*(x+A)+P*(T-C),M=Math.atan2(x-j,C-D);let V=Math.atan2(A-j,T-D)-M;V<0&&s===1?V+=Th:V>0&&s===0&&(V-=Th);const z=Math.ceil(Math.abs(V/(p1+.001))),G=[];for(let Y=0;Y<z;++Y){const Q=M+Y*V/z,L=M+(Y+1)*V/z;G[Y]=[D,j,Q,L,n,r,f,d]}return _B[l]=G}function GOt(e){const t=oDe.call(e);if(wB[t])return wB[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),g=Math.sin(i),y=Math.cos(s),b=Math.sin(s),_=.5*(s-i),E=Math.sin(_*.5),C=8/3*E*E/Math.sin(_),x=n+p-C*g,T=r+g+C*p,A=n+y,k=r+b,N=A+C*b,P=k-C*y;return wB[t]=[c*x+f*T,d*x+h*T,c*N+f*P,d*N+h*P,c*A+f*k,d*A+h*k]}const zc=["l",0,0,0,0,0,0,0];function YOt(e,t,n){const r=zc[0]=e[0];if(r==="a"||r==="A")zc[1]=t*e[1],zc[2]=n*e[2],zc[3]=e[3],zc[4]=e[4],zc[5]=e[5],zc[6]=t*e[6],zc[7]=n*e[7];else if(r==="h"||r==="H")zc[1]=t*e[1];else if(r==="v"||r==="V")zc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)zc[i]=(i%2==1?t:n)*e[i];return zc}function JA(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,g,y=0,b=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var _=0,E=t.length;_<E;++_){switch(o=t[_],(i!==1||s!==1)&&(o=YOt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],y=u,b=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],y=u,b=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-g):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,g=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":spe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":spe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=y,l=b,e.closePath();break}a=o}}function spe(e,t,n,r){const i=WOt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=GOt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const ope=.5773502691896257,ape={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Th)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=dw*n,i=r-n*ope,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=dw*n,i=r-n*ope;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=dw*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=dw*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=dw*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=dw*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function aDe(e){return on(ape,e)?ape[e]:KOt(e)}var EB={};function KOt(e){if(!on(EB,e)){const t=_x(e);EB[e]={draw:function(n,r){JA(n,t,0,0,Math.sqrt(r)/2)}}}return EB[e]}const n0=.448084975506;function XOt(e){return e.x}function QOt(e){return e.y}function JOt(e){return e.width}function ZOt(e){return e.height}function Qp(e){return typeof e=="function"?e:()=>+e}function zP(e,t,n){return Math.max(t,Math.min(e,n))}function uDe(){var e=XOt,t=QOt,n=JOt,r=ZOt,i=Qp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),g=d??+t.call(this,c),y=+n.call(this,c),b=+r.call(this,c),_=Math.min(y,b)/2,E=zP(+i.call(this,c),0,_),C=zP(+s.call(this,c),0,_),x=zP(+o.call(this,c),0,_),T=zP(+a.call(this,c),0,_);if(u||(u=h=BL()),E<=0&&C<=0&&x<=0&&T<=0)u.rect(p,g,y,b);else{var A=p+y,k=g+b;u.moveTo(p+E,g),u.lineTo(A-C,g),u.bezierCurveTo(A-n0*C,g,A,g+n0*C,A,g+C),u.lineTo(A,k-T),u.bezierCurveTo(A,k-n0*T,A-n0*T,k,A-T,k),u.lineTo(p+x,k),u.bezierCurveTo(p+n0*x,k,p,k-n0*x,p,k-x),u.lineTo(p,g+E),u.bezierCurveTo(p,g+n0*E,p+n0*E,g,p+E,g),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Qp(c),l):e},l.y=function(c){return arguments.length?(t=Qp(c),l):t},l.width=function(c){return arguments.length?(n=Qp(c),l):n},l.height=function(c){return arguments.length?(r=Qp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Qp(c),s=f!=null?Qp(f):i,a=d!=null?Qp(d):i,o=h!=null?Qp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function lDe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var g=a-d,y=f-o;if(g||y){var b=Math.hypot(g,y),_=(g/=b)*u,E=(y/=b)*u,C=Math.atan2(y,g);i.moveTo(o-_,a-E),i.lineTo(f-g*p,d-y*p),i.arc(f,d,p,C-Math.PI,C),i.lineTo(o+_,a+E),i.arc(o,a,u,C,C+Math.PI)}else i.arc(f,d,p,0,Th);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,g=!1,y;for(i==null&&(i=y=BL()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===g&&(g=!g)&&(s=0),g&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(y)return i=null,y+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function kk(e,t){return e??t}const Rk=e=>e.x||0,Nk=e=>e.y||0,e3t=e=>e.width||0,t3t=e=>e.height||0,n3t=e=>(e.x||0)+(e.width||0),r3t=e=>(e.y||0)+(e.height||0),i3t=e=>e.startAngle||0,s3t=e=>e.endAngle||0,o3t=e=>e.padAngle||0,a3t=e=>e.innerRadius||0,u3t=e=>e.outerRadius||0,l3t=e=>e.cornerRadius||0,c3t=e=>kk(e.cornerRadiusTopLeft,e.cornerRadius)||0,f3t=e=>kk(e.cornerRadiusTopRight,e.cornerRadius)||0,d3t=e=>kk(e.cornerRadiusBottomRight,e.cornerRadius)||0,h3t=e=>kk(e.cornerRadiusBottomLeft,e.cornerRadius)||0,p3t=e=>kk(e.size,64),m3t=e=>e.size||1,IF=e=>e.defined!==!1,g3t=e=>aDe(e.shape||"circle"),y3t=ez().startAngle(i3t).endAngle(s3t).padAngle(o3t).innerRadius(a3t).outerRadius(u3t).cornerRadius(l3t),v3t=Pxe().x(Rk).y1(Nk).y0(r3t).defined(IF),b3t=Pxe().y(Nk).x1(Rk).x0(n3t).defined(IF),_3t=Nxe().x(Rk).y(Nk).defined(IF),w3t=uDe().x(Rk).y(Nk).width(e3t).height(t3t).cornerRadius(c3t,f3t,d3t,h3t),E3t=Yft().type(g3t).size(p3t),x3t=lDe().x(Rk).y(Nk).defined(IF).size(m3t);function HJ(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function S3t(e,t){return y3t.context(e)(t)}function T3t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?b3t:v3t).curve(VJ(r,n.orient,n.tension)).context(e)(t)}function C3t(e,t){const n=t[0],r=n.interpolate||"linear";return _3t.curve(VJ(r,n.orient,n.tension)).context(e)(t)}function BS(e,t,n,r){return w3t.context(e)(t,n,r)}function A3t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function I3t(e,t){return E3t.context(e)(t)}function k3t(e,t){return x3t.context(e)(t)}var cDe=1;function fDe(){cDe=1}function qJ(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+cDe++),o=i.clipping[s]||(i.clipping[s]={id:s});return Yn(r)?o.path=r(null):HJ(n)?o.path=BS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function to(e){this.clear(),e&&this.union(e)}to.prototype={clone(){return new to(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function kF(e){this.mark=e,this.bounds=this.bounds||new to}function RF(e){kF.call(this,e),this.items=this.items||[]}At(RF,kF);class dDe{constructor(t){this._pending=0,this._loader=t||dF()}pending(){return this._pending}sanitizeURL(t){const n=this;return upe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(rC(n),r)).catch(()=>(rC(n),null))}loadImage(t){const n=this,r=lOt();return upe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=on(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>rC(n),o.onerror=()=>rC(n),o.src=s,o}).catch(i=>(rC(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function upe(e){e._pending+=1}function rC(e){e._pending-=1}function Cg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?R3t(t,r):0))}return e}function R3t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const N3t=Th-1e-8;let NF,KD,XD,O1,FV,QD,jV,BV;const k0=(e,t)=>NF.add(e,t),JD=(e,t)=>k0(KD=e,XD=t),lpe=e=>k0(e,NF.y1),cpe=e=>k0(NF.x1,e),m1=(e,t)=>FV*e+jV*t,g1=(e,t)=>QD*e+BV*t,xB=(e,t)=>k0(m1(e,t),g1(e,t)),SB=(e,t)=>JD(m1(e,t),g1(e,t));function Pk(e,t){return NF=e,t?(O1=t*Ay,FV=BV=Math.cos(O1),QD=Math.sin(O1),jV=-QD):(FV=BV=1,O1=QD=jV=0),P3t}const P3t={beginPath(){},closePath(){},moveTo:SB,lineTo:SB,rect(e,t,n,r){O1?(xB(e+n,t),xB(e+n,t+r),xB(e,t+r),SB(e,t)):(k0(e+n,t+r),JD(e,t))},quadraticCurveTo(e,t,n,r){const i=m1(e,t),s=g1(e,t),o=m1(n,r),a=g1(n,r);fpe(KD,i,o,lpe),fpe(XD,s,a,cpe),JD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=m1(e,t),a=g1(e,t),u=m1(n,r),l=g1(n,r),c=m1(i,s),f=g1(i,s);dpe(KD,o,u,c,lpe),dpe(XD,a,l,f,cpe),JD(c,f)},arc(e,t,n,r,i,s){if(r+=O1,i+=O1,KD=n*Math.cos(i)+e,XD=n*Math.sin(i)+t,Math.abs(i-r)>N3t)k0(e-n,t-n),k0(e+n,t+n);else{const o=l=>k0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Th,r<0&&(r+=Th),i=i%Th,i<0&&(i+=Th),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Th,a=r-r%p1,u=0;u<4&&a>i;++u,a-=p1)o(a);else for(a=r-r%p1+p1,u=0;u<4&&a<i;++u,a=a+p1)o(a)}}};function fpe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function dpe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>qOt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(hpe(u,e,t,n,r)),0<l&&l<1&&i(hpe(l,e,t,n,r))}function hpe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var Q0=(Q0=X0(1,1))?Q0.getContext("2d"):null;const UV=new to;function WJ(e){return function(t,n){if(!Q0)return!0;e(Q0,t),UV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=UV;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(Q0.isPointInPath(u,a))return!0;return!1}}function GJ(e,t){return t.contains(e.x||0,e.y||0)}function hDe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(UV.set(n,r,n+i,r+s))}function pDe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Gw(t,n,r,i,s)}function Gw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,g,y;for(y=0;y<4;++y){if(y===0&&(h=-l,p=-(s-t)),y===1&&(h=l,p=a-t),y===2&&(h=-c,p=-(o-n)),y===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(g=p/h,h<0){if(g>d)return!1;g>f&&(f=g)}else if(h>0){if(g<f)return!1;g<d&&(d=g)}}return!0}function wx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function zf(e,t){return e??t}function ppe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function D3t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+zf(t.x1,.5)*r,n.y1+zf(t.y1,.5)*i,Math.max(r,i)*zf(t.r1,0),n.x1+zf(t.x2,.5)*r,n.y1+zf(t.y2,.5)*i,Math.max(r,i)*zf(t.r2,.5));else{const o=zf(t.x1,0),a=zf(t.y1,0),u=zf(t.x2,1),l=zf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=X0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=ppe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return ppe(s,t.stops)}function mDe(e,t,n){return zJ(n)?D3t(e,n,t.bounds):n}function UM(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=mDe(e,t,t.fill),!0):!1}var O3t=[];function Ex(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=mDe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||O3t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function M3t(e,t){return e.zindex-t.zindex||e.index-t.index}function YJ(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(M3t)}function Ad(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=YJ(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function zM(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=YJ(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function KJ(e){return function(t,n,r){Ad(n,i=>{(!r||r.intersects(i.bounds))&&gDe(e,t,i,i)})}}function $3t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&gDe(e,t,n.items[0],n.items)}}function gDe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(wx(t,n),n.fill&&UM(t,n,i)&&t.fill(),n.stroke&&Ex(t,n,i)&&t.stroke()))}function PF(e){return e=e||hf,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,zM(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function Dk(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function XJ(e){return PF(Dk(e))}function V1(e,t){return"translate("+e+","+t+")"}function QJ(e){return"rotate("+e+")"}function L3t(e,t){return"scale("+e+","+t+")"}function yDe(e){return V1(e.x||0,e.y||0)}function F3t(e){return V1(e.x||0,e.y||0)+(e.angle?" "+QJ(e.angle):"")}function j3t(e){return V1(e.x||0,e.y||0)+(e.angle?" "+QJ(e.angle):"")+(e.scaleX||e.scaleY?" "+L3t(e.scaleX||1,e.scaleY||1):"")}function JJ(e,t,n){function r(o,a){o("transform",F3t(a)),o("d",t(null,a))}function i(o,a){return t(Pk(o,a.angle),a),Cg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Ay),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:KJ(s),pick:XJ(s),isect:n||WJ(s)}}var B3t=JJ("arc",S3t);function U3t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function z3t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function V3t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function ZJ(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(Pk(u),c),Cg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=Dk(s);function a(u,l,c,f,d,h){var p=l.items,g=l.bounds;return!p||!p.length||g&&!g.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:$3t(s),pick:a,isect:GJ,tip:n}}var H3t=ZJ("area",T3t,U3t);function q3t(e,t){var n=t.clip;e.save(),Yn(n)?(e.beginPath(),n(e),e.clip()):vDe(e,t.group)}function vDe(e,t){e.beginPath(),HJ(t)?BS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function bDe(e){const t=zf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function W3t(e,t){e("transform",yDe(t))}function _De(e,t){const n=bDe(t);e("d",BS(null,t,n,n))}function G3t(e,t){e("class","background"),e("aria-hidden",!0),_De(e,t)}function Y3t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?_De(e,t):e("d","")}function K3t(e,t,n){const r=t.clip?qJ(n,t,t):null;e("clip-path",r)}function X3t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Cg(e,t),e.translate(t.x||0,t.y||0)}function ZA(e,t,n,r){const i=bDe(t);e.beginPath(),BS(e,t,(n||0)+i,(r||0)+i)}const Q3t=Dk(ZA),J3t=Dk(ZA,!1),Z3t=Dk(ZA,!0);function eMt(e,t,n,r){Ad(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(ZA(e,i,s,o),wx(e,i),i.fill&&UM(e,i,u)&&e.fill(),i.stroke&&!a&&Ex(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&vDe(e,i),n&&n.translate(-s,-o),Ad(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(ZA(e,i,s,o),wx(e,i),Ex(e,i,u)&&e.stroke())})}function tMt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return zM(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),g=u.clip;if(g&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,g&&HJ(u)&&!Z3t(e,u,o,a))return e.restore(),null;const y=u.strokeForeground,b=t.interactive!==!1;return b&&y&&u.stroke&&J3t(e,u,o,a)?(e.restore(),u):(l=zM(u,_=>nMt(_,c,f)?this.pick(_,n,r,c,f):null),!l&&b&&(u.fill||!y&&u.stroke)&&Q3t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function nMt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var rMt={type:"group",tag:"g",nested:!1,attr:W3t,bound:X3t,draw:eMt,pick:tMt,isect:hDe,content:K3t,background:G3t,foreground:Y3t},eI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function eZ(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function tZ(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function nZ(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function DF(e,t){return e==="center"?t/2:e==="right"?t:0}function OF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function iMt(e,t,n){const r=eZ(t,n),i=tZ(t,r),s=nZ(t,r),o=(t.x||0)-DF(t.align,i),a=(t.y||0)-OF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,eI["xmlns:xlink"],"xlink:href"),e("transform",V1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function sMt(e,t){const n=t.image,r=tZ(t,n),i=nZ(t,n),s=(t.x||0)-DF(t.align,r),o=(t.y||0)-OF(t.baseline,i);return e.set(s,o,s+r,o+i)}function oMt(e,t,n){Ad(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=eZ(r,this);let s=tZ(r,i),o=nZ(r,i);if(s===0||o===0)return;let a=(r.x||0)-DF(r.align,s),u=(r.y||0)-OF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(wx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var aMt={type:"image",tag:"image",nested:!1,attr:iMt,bound:sMt,draw:oMt,pick:PF(),isect:hf,get:eZ,xOffset:DF,yOffset:OF},uMt=ZJ("line",C3t,z3t);function lMt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",j3t(t)),e("d",t.path)}function ZD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Ay,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=_x(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),JA(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):JA(e,u,r,i,s,o)}function cMt(e,t){return ZD(Pk(e,t.angle),t)?e.set(0,0,0,0):Cg(e,t,!0)}var fMt={type:"path",tag:"path",nested:!1,attr:lMt,bound:cMt,draw:KJ(ZD),pick:XJ(ZD),isect:WJ(ZD)};function dMt(e,t){e("d",BS(null,t))}function hMt(e,t){var n,r;return Cg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function mpe(e,t){e.beginPath(),BS(e,t)}var pMt={type:"rect",tag:"path",nested:!1,attr:dMt,bound:hMt,draw:KJ(mpe),pick:XJ(mpe),isect:hDe};function mMt(e,t){e("transform",yDe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function gMt(e,t){var n,r;return Cg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function wDe(e,t,n){var r,i,s,o;return t.stroke&&Ex(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function yMt(e,t,n){Ad(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&wDe(e,r,i)&&(wx(e,r),e.stroke())}})}function vMt(e,t,n,r){return e.isPointInStroke?wDe(e,t,1)&&e.isPointInStroke(n,r):!1}var bMt={type:"rule",tag:"line",nested:!1,attr:mMt,bound:gMt,draw:yMt,pick:PF(vMt),isect:pDe},_Mt=JJ("shape",A3t),wMt=JJ("symbol",I3t,GJ);const gpe=sNe();var ic={height:Cp,measureWidth:rZ,estimateWidth:VM,width:VM,canvas:EDe};EDe(!0);function EDe(e){ic.width=e&&Q0?rZ:VM}function VM(e,t){return xDe(ky(e,t),Cp(e))}function xDe(e,t){return~~(.8*e.length*t)}function rZ(e,t){return Cp(e)<=0||!(t=ky(e,t))?0:SDe(t,MF(e))}function SDe(e,t){const n=`(${t}) ${e}`;let r=gpe.get(n);return r===void 0&&(Q0.font=t,r=Q0.measureText(e).width,gpe.set(n,r)),r}function Cp(e){return e.fontSize!=null?+e.fontSize||0:11}function Iy(e){return e.lineHeight!=null?e.lineHeight:Cp(e)+2}function EMt(e){return nt(e)?e.length>1?e:e[0]:e}function Ok(e){return EMt(e.lineBreak&&e.text&&!nt(e.text)?e.text.split(e.lineBreak):e.text)}function iZ(e){const t=Ok(e);return(nt(t)?t.length-1:0)*Iy(e)}function ky(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?SMt(e,n):n}function xMt(e){if(ic.width===rZ){const t=MF(e);return n=>SDe(n,t)}else if(ic.width===VM){const t=Cp(e);return n=>xDe(n,t)}else return t=>ic.width(e,t)}function SMt(e,t){var n=+e.limit,r=xMt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function Mk(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function MF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Cp(e)+"px "+Mk(e,t)}function sZ(e){var t=e.baseline,n=Cp(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Iy(e):t==="line-bottom"?.29*n-.5*Iy(e):0)}const TMt={left:"start",center:"middle",right:"end"},M2=new to;function $F(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-p1,t+=r*Math.cos(i),n+=r*Math.sin(i)),M2.x1=t,M2.y1=n,M2}function CMt(e,t){var n=t.dx||0,r=(t.dy||0)+sZ(t),i=$F(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",TMt[t.align]||"start"),a?(u=V1(s,o)+" "+QJ(a),(n||r)&&(u+=" "+V1(n,r))):u=V1(s+n,o+r),e("transform",u)}function oZ(e,t,n){var r=ic.height(t),i=t.align,s=$F(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+sZ(t)-Math.round(.8*r),c=Ok(t),f;if(nt(c)?(r+=Iy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,ic.width(t,h)),0)):f=ic.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Ay,o,a);else if(n===2)return e.rotatedPoints(t.angle*Ay,o,a);return e}function AMt(e,t,n){Ad(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=MF(r),e.textAlign=r.align||"left",s=$F(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Ay),o=a=0),o+=r.dx||0,a+=(r.dy||0)+sZ(r),c=Ok(r),wx(e,r),nt(c))for(l=Iy(r),u=0;u<c.length;++u)f=ky(r,c[u]),r.fill&&UM(e,r,i)&&e.fillText(f,o,a),r.stroke&&Ex(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=ky(r,c),r.fill&&UM(e,r,i)&&e.fillText(f,o,a),r.stroke&&Ex(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function IMt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=$F(t),a=o.x1,u=o.y1,l=oZ(M2,t,1),c=-t.angle*Ay,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function kMt(e,t){const n=oZ(M2,e,2);return Gw(t,n[0],n[1],n[2],n[3])||Gw(t,n[0],n[1],n[4],n[5])||Gw(t,n[4],n[5],n[6],n[7])||Gw(t,n[2],n[3],n[6],n[7])}var RMt={type:"text",tag:"text",nested:!1,attr:CMt,bound:oZ,draw:AMt,pick:PF(IMt),isect:kMt},NMt=ZJ("trail",k3t,V3t),bc={arc:B3t,area:H3t,group:rMt,image:aMt,line:uMt,path:fMt,rect:pMt,rule:bMt,shape:_Mt,symbol:wMt,text:RMt,trail:NMt};function zV(e,t,n){var r=bc[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new to),e,n)}var ype={mark:null};function TDe(e,t,n){var r=bc[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(ype.mark=e,l=ype),c=zV(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new to,o)for(a=0,u=s.length;a<u;++a)t.union(zV(s[a],i,n));return e.bounds=t}const PMt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function CDe(e,t){return JSON.stringify(e,PMt,t)}function ADe(e){const t=typeof e=="string"?JSON.parse(e):e;return IDe(t)}function IDe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&IDe(n[i]);return t&&TDe(e),e}class kDe{constructor(t){arguments.length?this.root=ADe(t):(this.root=vpe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new RF(this.root)])}toJSON(t){return CDe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=vpe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function vpe(e,t){const n={bounds:new to,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function R0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function aZ(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ho(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=R0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Xc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function RDe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function LF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function DMt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=bc[i.marktype]).tip){for(o=LF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let uZ=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||dF(),this._tooltip=n||OMt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=R0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=DMt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function OMt(e,t,n,r){e.element().setAttribute("title",r||"")}class $k{constructor(t){this._el=null,this._bgcolor=null,this._loader=new dDe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const MMt="keydown",$Mt="keypress",LMt="keyup",NDe="dragenter",eO="dragleave",PDe="dragover",VV="pointerdown",FMt="pointerup",HM="pointermove",tO="pointerout",DDe="pointerover",HV="mousedown",jMt="mouseup",ODe="mousemove",qM="mouseout",MDe="mouseover",WM="click",BMt="dblclick",UMt="wheel",$De="mousewheel",GM="touchstart",YM="touchmove",KM="touchend",zMt=[MMt,$Mt,LMt,NDe,eO,PDe,VV,FMt,HM,tO,DDe,HV,jMt,ODe,qM,MDe,WM,BMt,UMt,$De,GM,YM,KM],qV=HM,$2=qM,WV=WM;class Lk extends uZ{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=zMt,this.pointermove=_pe([HM,ODe],[DDe,MDe],[tO,qM]),this.dragover=_pe([PDe],[NDe],[eO]),this.pointerout=wpe([tO,qM]),this.dragleave=wpe([eO])}initialize(t,n,r){return this._canvas=t&&aZ(t,"canvas"),[WM,HV,VV,HM,tO,eO].forEach(i=>bpe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire($De,t)}pointerdown(t){this._down=this._active,this.fire(VV,t)}mousedown(t){this._down=this._active,this.fire(HV,t)}click(t){this._down===this._active&&(this.fire(WM,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(GM,t,!0)}touchmove(t){this.fire(YM,t,!0)}touchend(t){this.fire(KM,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===WV&&i&&i.href?this.handleHref(n,i,i.href):(t===qV||t===$2)&&this.handleTooltip(n,i,t!==$2),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(bpe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=LF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return bc[t.marktype].pick.call(this,o,t,n,r,i,s)}}const VMt=e=>e===GM||e===YM||e===KM?[GM,YM,KM]:[e];function bpe(e,t){VMt(t).forEach(n=>HMt(e,n))}function HMt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function e2(e,t,n){t.forEach(r=>e.fire(r,n))}function _pe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?e2(this,e,r):((!i||!i.exit)&&e2(this,n,r),this._active=s,e2(this,t,r),e2(this,e,r))}}function wpe(e){return function(t){e2(this,e,t),this._active=null}}function qMt(){return typeof window<"u"&&window.devicePixelRatio||1}function WMt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?qMt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class XM extends $k{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new to,this._tempb=new to}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:X0(1,1,this._options.type),t&&this._canvas&&(Xc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)WMt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||et("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=GMt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):YMt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=bc[n.marktype];n.clip&&q3t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const GMt=(e,t,n)=>new to().set(0,0,t,n).translate(-e[0],-e[1]);function YMt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class LDe extends uZ{constructor(t,n){super(t,n);const r=this;r._hrefHandler=TB(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=TB(r,(i,s)=>{r.handleTooltip(i,s,i.type!==$2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(WV,this._hrefHandler),i.removeEventListener(qV,this._tooltipHandler),i.removeEventListener($2,this._tooltipHandler)),this._svg=i=t&&aZ(t,"svg"),i&&(i.addEventListener(WV,this._hrefHandler),i.addEventListener(qV,this._tooltipHandler),i.addEventListener($2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:TB(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const TB=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},FDe="aria-hidden",lZ="aria-label",cZ="role",fZ="aria-roledescription",jDe="graphics-object",dZ="graphics-symbol",BDe=(e,t,n)=>({[cZ]:e,[fZ]:t,[lZ]:n||void 0}),KMt=Td(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Epe={axis:{desc:"axis",caption:JMt},legend:{desc:"legend",caption:ZMt},"title-text":{desc:"title",caption:e=>`Title text '${Spe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Spe(e)}'`}},xpe={ariaRole:cZ,ariaRoleDescription:fZ,description:lZ};function UDe(e,t){const n=t.aria===!1;if(e(FDe,n||void 0),n||t.description==null)for(const r in xpe)e(xpe[r],void 0);else{const r=t.mark.marktype;e(lZ,t.description),e(cZ,t.ariaRole||(r==="group"?jDe:dZ)),e(fZ,t.ariaRoleDescription||`${r} mark`)}}function zDe(e){return e.aria===!1?{[FDe]:!0}:KMt[e.role]?null:Epe[e.role]?QMt(e,Epe[e.role]):XMt(e)}function XMt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return BDe(n?jDe:dZ,`${t} mark container`,e.description)}function QMt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return BDe(t.role||dZ,t.desc,n.description||r(n))}catch{return null}}function Spe(e){return Pt(e.text).join(" ")}function JMt(e){const t=e.datum,n=e.orient,r=t.title?VDe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${bx(a)?"discrete":a} scale with ${nDe(o,s,e)}`}function ZMt(e){const t=e.datum,n=t.title?VDe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return t$t(r)+(n?` titled '${n}'`:"")+` for ${e$t(s)} with ${nDe(u,a,e)}`}function VDe(e){try{return Pt(Sr(e.items).items[0].text).join(" ")}catch{return null}}function e$t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Sr(e)}function t$t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const HDe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),n$t=e=>HDe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function hZ(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${n$t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=HDe(u),a),toString:()=>e};return a}const qDe=e=>WDe(hZ(),e)+"";function WDe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):WDe(e,r)}return e.close()}const QM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},JM={blend:"mix-blend-mode"},GDe={fill:"none","stroke-miterlimit":10},iC=0,Tpe="http://www.w3.org/2000/xmlns/",co=eI.xmlns;class pZ extends $k{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=ho(t,0,"svg",co),this._svg.setAttributeNS(Tpe,"xmlns",co),this._svg.setAttributeNS(Tpe,"xmlns:xlink",eI["xmlns:xlink"]),this._svg.setAttribute("version",eI.version),this._svg.setAttribute("class","marks"),Xc(t,1),this._root=ho(this._svg,iC,"g",co),N0(this._root,GDe),Xc(this._svg,iC+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(N0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=ho(t,iC,"rect",co),N0(r,{width:this._width,height:this._height,fill:n}));const i=qDe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Xc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=bc[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Cpe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Cpe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=bc[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Ape(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Xc(c,0),n._svg;c.setAttribute("class",RDe(n));const f=zDe(n);for(const g in f)lu(c,g,f[g]);l||lu(c,"pointer-events",u),lu(c,"clip-path",n.clip?qJ(this,n,n.group):null);let d=null,h=0;const p=g=>{const y=this.isDirty(g),b=Ape(g,c,d,a.tag,s);y&&(this._update(a,b,g),l&&s$t(this,b,g,i)),d=b,++h};return a.nested?n.items.length&&p(n.items[0]):Ad(n,p),Xc(c,h),c}_update(t,n,r){Am=n,Pa=n.__values__,UDe(L2,r),t.attr(L2,r,this);const i=a$t[t.type];i&&i.call(this,t,n,r),Am&&this.style(Am,r)}style(t,n){if(n!=null){for(const r in QM){let i=r==="font"?Mk(n):n[r];if(i===Pa[r])continue;const s=QM[r];i==null?t.removeAttribute(s):(zJ(i)&&(i=iDe(i,this._defs.gradient,YDe())),t.setAttribute(s,i+"")),Pa[r]=i}for(const r in JM)nO(t,JM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=ho(t,iC+1,"defs",co)),i=r$t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=ho(t,iC+1,"defs",co)),i=i$t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Xc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Cpe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function r$t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ho(e,n++,"pattern",co);N0(o,{id:BM+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ho(o,0,"rect",co),N0(o,{width:1,height:1,fill:`url(${YDe()}#${t.id})`}),e=ho(e,n++,"radialGradient",co),N0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ho(e,n++,"linearGradient",co),N0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ho(e,r,"stop",co),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Xc(e,r),n}function i$t(e,t,n){let r;return e=ho(e,n,"clipPath",co),e.setAttribute("id",t.id),t.path?(r=ho(e,0,"path",co),r.setAttribute("d",t.path)):(r=ho(e,0,"rect",co),N0(r,{x:0,y:0,width:t.width,height:t.height})),Xc(e,1),n+1}function s$t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Ad(n,o=>{i=e.mark(t,o,i,r),++s}),Xc(t,1+s)}function Ape(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=R0(o,r,co),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=R0(o,"path",co);s.appendChild(a),a.__data__=e;const u=R0(o,"g",co);s.appendChild(u),u.__data__=e;const l=R0(o,"path",co);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||o$t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function o$t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Am=null,Pa=null;const a$t={group(e,t,n){const r=Am=t.childNodes[2];Pa=r.__values__,e.foreground(L2,n,this),Pa=t.__values__,Am=t.childNodes[1],e.content(L2,n,this);const i=Am=t.childNodes[0];e.background(L2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Pa.events&&(lu(r,"pointer-events",s),lu(i,"pointer-events",s),Pa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;lu(r,"display",null),this.style(i,n),lu(i,"stroke",null),o&&(n.fill=null),Pa=r.__values__,this.style(r,n),o&&(n.fill=o),Am=null}else lu(r,"display","none")},image(e,t,n){n.smooth===!1?(nO(t,"image-rendering","optimizeSpeed"),nO(t,"image-rendering","pixelated")):nO(t,"image-rendering",null)},text(e,t,n){const r=Ok(n);let i,s,o,a;nt(r)?(s=r.map(u=>ky(n,u)),i=s.join(`
`),i!==Pa.text&&(Xc(t,0),o=t.ownerDocument,a=Iy(n),s.forEach((u,l)=>{const c=R0(o,"tspan",co);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Pa.text=i)):(s=ky(n,r),s!==Pa.text&&(t.textContent=s,Pa.text=s)),lu(t,"font-family",Mk(n)),lu(t,"font-size",Cp(n)+"px"),lu(t,"font-style",n.fontStyle),lu(t,"font-variant",n.fontVariant),lu(t,"font-weight",n.fontWeight)}};function L2(e,t,n){t!==Pa[e]&&(n?u$t(Am,e,t,n):lu(Am,e,t),Pa[e]=t)}function nO(e,t,n){n!==Pa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Pa[t]=n)}function N0(e,t){for(const n in t)lu(e,n,t[n])}function lu(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function u$t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function YDe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class KDe extends $k{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=hZ();n.open("svg",Gn({},eI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",GDe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=bc[n.marktype],i=r.tag,s=[UDe,r.attr];t.open("g",{class:RDe(n),"clip-path":n.clip?qJ(this,n,n.group):null},zDe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=Ok(a);if(nt(l)){const c={x:0,dy:Iy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(ky(a,l[f])).close()}else t.text(ky(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Ad(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Ad(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&l$t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:BM+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function l$t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Mk(t),e["font-size"]=Cp(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in QM){let a=t[o];const u=QM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(zJ(a)&&(a=iDe(a,i.gradient,"")),e[u]=a)}for(const o in JM){const a=t[o];a!=null&&(s=s||[],s.push(`${JM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Yf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function c$t(e){Yf.svgMarkTypes=e.svgMarkTypes??["text"],Yf.svgOnTop=e.svgOnTop??!0,Yf.debug=e.debug??!1}class GV extends $k{constructor(t){super(t),this._svgRenderer=new pZ(t),this._canvasRenderer=new XM(t)}initialize(t,n,r,i,s){this._root_el=ho(t,0,"div");const o=ho(this._root_el,0,"div"),a=ho(this._root_el,1,"div");return this._root_el.style.position="relative",Yf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Yf.svgOnTop?a:o,this._canvasEl=Yf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Yf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Yf.svgMarkTypes.includes(s));this._svgRenderer.render(t,Yf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Yf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class XDe extends Lk{constructor(t,n){super(t,n)}initialize(t,n,r){const i=ho(ho(t,0,"div"),Yf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const QDe="canvas",JDe="hybrid",ZDe="png",eOe="svg",tOe="none",P0={Canvas:QDe,PNG:ZDe,SVG:eOe,Hybrid:JDe,None:tOe},vb={};vb[QDe]=vb[ZDe]={renderer:XM,headless:XM,handler:Lk};vb[eOe]={renderer:pZ,headless:KDe,handler:LDe};vb[JDe]={renderer:GV,headless:GV,handler:XDe};vb[tOe]={};function FF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(vb[e]=t,this):vb[e]}function nOe(e,t,n){const r=[],i=new to().union(t),s=e.marktype;return s?rOe(e,i,n,r):s==="group"?iOe(e,i,n,r):et("Intersect scene must be mark node or group item.")}function rOe(e,t,n,r){if(f$t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)iOe(i[a],t,n,r);else for(const u=bc[s].isect;a<o;++a){const l=i[a];sOe(l,t,u)&&r.push(l)}}return r}function f$t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function iOe(e,t,n,r){n&&n(e.mark)&&sOe(e,t,bc.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)rOe(i[u],t,n,r);t.translate(o,a)}return r}function sOe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const CB=new to;function oOe(e){const t=e.clip;if(Yn(t))t(Pk(CB.clear()));else if(t)CB.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(CB)}const d$t=1e-9;function mZ(e,t,n){return e===t?!0:n==="path"?aOe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Or(e)&&Or(t)?Math.abs(e-t)<=d$t:!e||!t||!Mt(e)&&!Mt(t)?e==t:h$t(e,t)}function aOe(e,t){return mZ(_x(e),_x(t))}function h$t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!mZ(e[i],t[i],i))return!1;return typeof e==typeof t}function p$t(){fDe(),FOt()}const xx="top",rd="left",ud="right",Ry="bottom",m$t="top-left",g$t="top-right",y$t="bottom-left",v$t="bottom-right",gZ="start",YV="middle",cu="end",b$t="x",_$t="y",jF="group",yZ="axis",vZ="title",w$t="frame",E$t="scope",bZ="legend",uOe="row-header",lOe="row-footer",cOe="row-title",fOe="column-header",dOe="column-footer",hOe="column-title",x$t="padding",S$t="symbol",pOe="fit",mOe="fit-x",gOe="fit-y",T$t="pad",_Z="none",VP="all",KV="each",wZ="flush",D0="column",O0="row";function yOe(e){Ye.call(this,null,e)}At(yOe,Ye,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=bc[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=HP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===jF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(HP(l,o))),r.role){case yZ:case bZ:case vZ:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(HP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(HP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return oOe(r),t.modifies("bounds")}});function HP(e,t,n){return t(e.bounds.clear(),e,n)}const Ipe=":vega_identifier:";function EZ(e){Ye.call(this,0,e)}EZ.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};At(EZ,Ye,{transform(e,t){const n=C$t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function C$t(e){return e._signals[Ipe]||(e._signals[Ipe]=e.add(0))}function vOe(e){Ye.call(this,null,e)}At(vOe,Ye,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,A$t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===jF?RF:kF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function A$t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function bOe(e){Ye.call(this,null,e)}const kpe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!_Oe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},_Oe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Rpe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(_Oe(i,s=e[n].bounds,t))return!0},I$t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},k$t=(e,t,n)=>{var r=e.range(),i=new to;return t===xx||t===Ry?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Npe=e=>(e.forEach(t=>t.opacity=1),e),Ppe=(e,t)=>e.reflow(t.modified()).modifies("opacity");At(bOe,Ye,{transform(e,t){const n=kpe[e.method]||kpe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Npe(i),t=Ppe(t,e)),t;if(i=i.filter(I$t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Npe(i),t=Ppe(t,e),s.length>=3&&Rpe(s,r)){do s=n(s,r);while(s.length>=3&&Rpe(s,r));s.length<3&&!Sr(i).opacity&&(s.length>1&&(Sr(s).opacity=0),Sr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=k$t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function wOe(e){Ye.call(this,null,e)}At(wOe,Ye,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Ra=new to;function Yw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function R$t(e){var t=e.items[0].orient;return t===rd||t===ud}function N$t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function P$t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=N$t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],g=i.titlePadding,y=i.bounds,b=p&&iZ(p),_=0,E=0,C,x;switch(Ra.clear().union(y),y.clear(),(C=u[0])>-1&&y.union(i.items[C].bounds),(C=u[1])>-1&&y.union(i.items[C].bounds),a){case xx:_=f||0,E=-c,x=Math.max(d,Math.min(h,-y.y1)),y.add(0,-x).add(l,0),p&&qP(e,p,x,g,b,0,-1,y);break;case rd:_=-c,E=f||0,x=Math.max(d,Math.min(h,-y.x1)),y.add(-x,0).add(0,l),p&&qP(e,p,x,g,b,1,-1,y);break;case ud:_=n+c,E=f||0,x=Math.max(d,Math.min(h,y.x2)),y.add(0,0).add(x,l),p&&qP(e,p,x,g,b,1,1,y);break;case Ry:_=f||0,E=r+c,x=Math.max(d,Math.min(h,y.y2)),y.add(0,0).add(l,x),p&&qP(e,p,x,g,0,0,1,y);break;default:_=i.x,E=i.y}return Cg(y.translate(_,E),i),Yw(i,"x",_+o)|Yw(i,"y",E+o)&&(i.bounds=Ra,e.dirty(i),i.bounds=y,e.dirty(i)),i.mark.bounds.clear().union(y)}function qP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Dpe=(e,t)=>Math.floor(Math.min(e,t)),Ope=(e,t)=>Math.ceil(Math.max(e,t));function D$t(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===jF)switch(i.role){case yZ:case bZ:case vZ:break;case uOe:o.rowheaders.push(...s);break;case lOe:o.rowfooters.push(...s);break;case fOe:o.colheaders.push(...s);break;case dOe:o.colfooters.push(...s);break;case cOe:o.rowtitle=s[0];break;case hOe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function O$t(e){return new to().set(0,0,e.width||0,e.height||0)}function M$t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Xi(e,t,n){const r=Mt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Mpe(e){return e<0?Math.ceil(-e):0}function EOe(e,t,n){var r=!n.nodirty,i=n.bounds===wZ?O$t:M$t,s=Ra.set(0,0,0,0),o=Xi(n.align,D0),a=Xi(n.align,O0),u=Xi(n.padding,D0),l=Xi(n.padding,O0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),g=0,y=Array(d),b=Array(f),_=0,E=Array(d),C=Array(d),x=Array(d),T,A,k,N,P,D,j,M,B,V,z;for(A=0;A<c;++A)p[A]=0;for(A=0;A<f;++A)b[A]=0;for(A=0;A<d;++A)D=t[A],P=x[A]=i(D),D.x=D.x||0,E[A]=0,D.y=D.y||0,C[A]=0,k=A%c,N=~~(A/c),g=Math.max(g,j=Math.ceil(P.x2)),_=Math.max(_,M=Math.ceil(P.y2)),p[k]=Math.max(p[k],j),b[N]=Math.max(b[N],M),h[A]=u+Mpe(P.x1),y[A]=l+Mpe(P.y1),r&&e.dirty(t[A]);for(A=0;A<d;++A)A%c===0&&(h[A]=0),A<c&&(y[A]=0);if(o===KV)for(k=1;k<c;++k){for(z=0,A=k;A<d;A+=c)z<h[A]&&(z=h[A]);for(A=k;A<d;A+=c)h[A]=z+p[k-1]}else if(o===VP){for(z=0,A=0;A<d;++A)A%c&&z<h[A]&&(z=h[A]);for(A=0;A<d;++A)A%c&&(h[A]=z+g)}else for(o=!1,k=1;k<c;++k)for(A=k;A<d;A+=c)h[A]+=p[k-1];if(a===KV)for(N=1;N<f;++N){for(z=0,A=N*c,T=A+c;A<T;++A)z<y[A]&&(z=y[A]);for(A=N*c;A<T;++A)y[A]=z+b[N-1]}else if(a===VP){for(z=0,A=c;A<d;++A)z<y[A]&&(z=y[A]);for(A=c;A<d;++A)y[A]=z+_}else for(a=!1,N=1;N<f;++N)for(A=N*c,T=A+c;A<T;++A)y[A]+=b[N-1];for(B=0,A=0;A<d;++A)B=h[A]+(A%c?B:0),E[A]+=B-t[A].x;for(k=0;k<c;++k)for(V=0,A=k;A<d;A+=c)V+=y[A],C[A]+=V-t[A].y;if(o&&Xi(n.center,D0)&&f>1)for(A=0;A<d;++A)P=o===VP?g:p[A%c],B=P-x[A].x2-t[A].x-E[A],B>0&&(E[A]+=B/2);if(a&&Xi(n.center,O0)&&c!==1)for(A=0;A<d;++A)P=a===VP?_:b[~~(A/c)],V=P-x[A].y2-t[A].y-C[A],V>0&&(C[A]+=V/2);for(A=0;A<d;++A)s.union(x[A].translate(E[A],C[A]));switch(B=Xi(n.anchor,b$t),V=Xi(n.anchor,_$t),Xi(n.anchor,D0)){case cu:B-=s.width();break;case YV:B-=s.width()/2}switch(Xi(n.anchor,O0)){case cu:V-=s.height();break;case YV:V-=s.height()/2}for(B=Math.round(B),V=Math.round(V),s.clear(),A=0;A<d;++A)t[A].mark.bounds.clear();for(A=0;A<d;++A)D=t[A],D.x+=E[A]+=B,D.y+=C[A]+=V,s.union(D.mark.bounds.union(D.bounds.translate(E[A],C[A]))),r&&e.dirty(D);return s}function $$t(e,t,n){var r=D$t(t),i=r.marks,s=n.bounds===wZ?L$t:F$t,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,g,y;const b=EOe(e,i,n);b.empty()&&b.set(0,0,0,0),r.rowheaders&&(g=Xi(n.headerBand,O0,null),c=WP(e,r.rowheaders,i,a,u,-Xi(o,"rowHeader"),Dpe,0,s,"x1",0,a,1,g)),r.colheaders&&(g=Xi(n.headerBand,D0,null),f=WP(e,r.colheaders,i,a,a,-Xi(o,"columnHeader"),Dpe,1,s,"y1",0,1,a,g)),r.rowfooters&&(g=Xi(n.footerBand,O0,null),d=WP(e,r.rowfooters,i,a,u,Xi(o,"rowFooter"),Ope,0,s,"x2",a-1,a,1,g)),r.colfooters&&(g=Xi(n.footerBand,D0,null),h=WP(e,r.colfooters,i,a,a,Xi(o,"columnFooter"),Ope,1,s,"y2",l-a,1,a,g)),r.rowtitle&&(p=Xi(n.titleAnchor,O0),y=Xi(o,"rowTitle"),y=p===cu?d+y:c-y,g=Xi(n.titleBand,O0,.5),$pe(e,r.rowtitle,y,0,b,g)),r.coltitle&&(p=Xi(n.titleAnchor,D0),y=Xi(o,"columnTitle"),y=p===cu?h+y:f-y,g=Xi(n.titleBand,D0,.5),$pe(e,r.coltitle,y,1,b,g))}function L$t(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function F$t(e,t){return e.bounds[t]}function WP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,g=0,y=0,b,_,E,C,x,T,A,k,N;if(!p)return g;for(b=c;b<p;b+=f)n[b]&&(g=o(g,u(n[b],l)));if(!t.length)return g;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),g+=s,_=0,C=t.length;_<C;++_)e.dirty(t[_]),t[_].mark.bounds.clear();for(b=c,_=0,C=t.length;_<C;++_,b+=f){for(T=t[_],x=T.mark.bounds,E=b;E>=0&&(A=n[E])==null;E-=d);a?(k=h==null?A.x:Math.round(A.bounds.x1+h*A.bounds.width()),N=g):(k=g,N=h==null?A.y:Math.round(A.bounds.y1+h*A.bounds.height())),x.union(T.bounds.translate(k-(T.x||0),N-(T.y||0))),T.x=k,T.y=N,e.dirty(T),y=o(y,x[l])}return y}function $pe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function j$t(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function B$t(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function U$t(e,t,n,r,i,s,o){const a=j$t(n,t),u=B$t(e,a("offset",0)),l=a("anchor",gZ),c=l===cu?1:l===YV?.5:0,f={align:KV,bounds:a("bounds",wZ),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case rd:f.anchor={x:Math.floor(r.x1)-u,column:cu,y:c*(o||r.height()+2*r.y1),row:l};break;case ud:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case xx:f.anchor={y:Math.floor(i.y1)-u,row:cu,x:c*(s||i.width()+2*i.x1),column:l};break;case Ry:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case m$t:f.anchor={x:u,y:u};break;case g$t:f.anchor={x:s-u,y:u,column:cu};break;case y$t:f.anchor={x:u,y:o-u,row:cu};break;case v$t:f.anchor={x:s-u,y:o-u,column:cu,row:cu};break}return f}function z$t(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),H$t(e,n,n.items[0].items[0]),s=V$t(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===S$t&&q$t(n.items[0].items[0].items[0].items),i!==_Z&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Cg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function V$t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function H$t(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&sC(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case rd:i+=Math.ceil(o.bounds.width())+u;break;case ud:case Ry:break;default:s+=o.bounds.height()+u}switch((i||s)&&sC(e,n,i,s),o.orient){case rd:c+=hw(t,n,o,a,1,1);break;case ud:l+=hw(t,n,o,cu,0,0)+u,c+=hw(t,n,o,a,1,1);break;case Ry:l+=hw(t,n,o,a,0,0),c+=hw(t,n,o,cu,-1,0,1)+u;break;default:l+=hw(t,n,o,a,0,0)}(l||c)&&sC(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(sC(e,n,-l,0),sC(e,o,-l,0))}}function hw(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:iZ(n);return Math.round(r===gZ?f:r===cu?d-h:.5*(c-h))}function sC(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function q$t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function W$t(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===rd||a===ud?r:n,p=0,g=0,y=0,b=0,_=0,E;if(o!==jF?a===rd?(p=i.y2,h=i.y1):a===ud?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===rd&&(p=r,h=0),E=u===gZ?p:u===cu?h:(p+h)/2,d&&d.text){switch(a){case xx:case Ry:_=f.bounds.height()+c;break;case rd:b=f.bounds.width()+c;break;case ud:b=-f.bounds.width()-c;break}Ra.clear().union(d.bounds),Ra.translate(b-(d.x||0),_-(d.y||0)),Yw(d,"x",b)|Yw(d,"y",_)&&(e.dirty(d),d.bounds.clear().union(Ra),d.mark.bounds.clear().union(Ra),e.dirty(d)),Ra.clear().union(d.bounds)}else Ra.clear();switch(Ra.union(f.bounds),a){case xx:g=E,y=i.y1-Ra.height()-l;break;case rd:g=i.x1-Ra.width()-l,y=E;break;case ud:g=i.x2+Ra.width()+l,y=E;break;case Ry:g=E,y=i.y2+l;break;default:g=s.x,y=s.y}return Yw(s,"x",g)|Yw(s,"y",y)&&(Ra.translate(g,y),e.dirty(s),s.bounds.clear().union(Ra),t.bounds.clear().union(Ra),e.dirty(s)),s.bounds}function xOe(e){Ye.call(this,null,e)}At(xOe,Ye,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&$$t(n,r,e.layout),Y$t(n,r,e)}),G$t(e.mark.group)?t.reflow():t}});function G$t(e){return e&&e.mark.role!=="legend-entry"}function Y$t(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new to().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,g;for(p=0,g=r.length;p<g;++p)switch(f=r[p],f.role){case yZ:h=R$t(f)?a:u,h.union(P$t(e,f,i,s));break;case vZ:c=f;break;case bZ:l.push(z$t(e,f));break;case w$t:case E$t:case uOe:case lOe:case cOe:case fOe:case dOe:case hOe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const y={};l.forEach(b=>{d=b.orient||ud,d!==_Z&&(y[d]||(y[d]=[])).push(b)});for(const b in y){const _=y[b];EOe(e,_,U$t(_,b,n.legends,a,u,i,s))}l.forEach(b=>{const _=b.bounds;if(_.equals(b._bounds)||(b.bounds=b._bounds,e.dirty(b),b.bounds=_,e.dirty(b)),n.autosize&&(n.autosize.type===pOe||n.autosize.type===mOe||n.autosize.type===gOe))switch(b.orient){case rd:case ud:o.add(_.x1,0).add(_.x2,0);break;case xx:case Ry:o.add(0,_.y1).add(0,_.y2)}else o.union(_)})}o.union(a).union(u),c&&o.union(W$t(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),K$t(e,t,o,n)}function K$t(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===x$t){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===_Z?(l=0,f=0,u=o,c=a):s===pOe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===mOe?(u=Math.max(0,o-l-d),a=c+f+h):s===gOe?(o=u+l+d,c=Math.max(0,a-f-h)):s===T$t&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const X$t=Object.freeze(Object.defineProperty({__proto__:null,bound:yOe,identifier:EZ,mark:vOe,overlap:bOe,render:wOe,viewlayout:xOe},Symbol.toStringTag,{value:"Module"}));function SOe(e){Ye.call(this,null,e)}At(SOe,Ye,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=BJ(s,o,e.minstep),u=e.format||QPe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?XPe(s,e.values,a):UJ(s,a);return i&&(r.rem=i),i=l.map((c,f)=>ei({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(ei({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function TOe(e){Ye.call(this,null,e)}function Q$t(){return ei({})}function J$t(e){const t=MS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}At(TOe,Ye,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Q$t,s=e.key||rn,o=this.value;return nt(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&et("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=J$t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function COe(e){Ye.call(this,null,e)}At(COe,Ye,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(nt(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||o0,u=i.enter||o0,l=i.exit||o0,c=(s&&!o?i[s]:a)||o0;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==o0&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==o0&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==o0){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function AOe(e){Ye.call(this,[],e)}At(AOe,Ye,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||YD,o=e.scale,a=+e.limit,u=BJ(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===YD,c=e.format||tDe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||eDe(o,u),d,h,p,g,y;return i&&(r.rem=i),s===YD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),y=!0):i=f,Yn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),g=i.reduce((b,_)=>Math.max(b,p(_,e)),0)):p=Ya(g=p||8),i=i.map((b,_)=>ei({index:_,label:c(b,_,i),value:b,offset:g,size:p(b,e)})),y&&(y=f[i.length],i.push(ei({index:i.length,label:`${f.length-i.length} entries`,value:y,offset:g,size:p(y,e)})))):s===TOt?(d=o.domain(),h=GPe(o,d[0],Sr(d)),f.length<3&&!e.values&&d[0]!==Sr(d)&&(f=[d[0],Sr(d)]),i=f.map((b,_)=>ei({index:_,label:c(b,_,f),value:b,perc:h(b)}))):(p=f.length-1,h=$Ot(o),i=f.map((b,_)=>ei({index:_,label:c(b,_,f),value:b,perc:_?h(b):0,perc2:_===p?1:h(f[_+1])}))),r.source=i,r.add=i,this.value=i,r}});const Z$t=e=>e.source.x,eLt=e=>e.source.y,tLt=e=>e.target.x,nLt=e=>e.target.y;function xZ(e){Ye.call(this,{},e)}xZ.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};At(xZ,Ye,{transform(e,t){var n=e.sourceX||Z$t,r=e.sourceY||eLt,i=e.targetX||tLt,s=e.targetY||nLt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Lpe.get(u+"-"+a)||Lpe.get(u);return l||et("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const IOe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,rLt=(e,t,n,r)=>IOe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),kOe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},iLt=(e,t,n,r)=>kOe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ROe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},sLt=(e,t,n,r)=>ROe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),oLt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,aLt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,uLt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},lLt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},cLt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},fLt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Lpe=MS({line:IOe,"line-radial":rLt,arc:kOe,"arc-radial":iLt,curve:ROe,"curve-radial":sLt,"orthogonal-horizontal":oLt,"orthogonal-vertical":aLt,"orthogonal-radial":uLt,"diagonal-horizontal":lLt,"diagonal-vertical":cLt,"diagonal-radial":fLt});function SZ(e){Ye.call(this,null,e)}SZ.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};At(SZ,Ye,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||PS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/rwe(l),h=ll(c),p,g,y;for(e.sort&&h.sort((b,_)=>l[b]-l[_]),p=0;p<c;++p)y=l[h[p]],g=u[h[p]],g[r]=f,g[i]=f+=y*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const dLt=5;function hLt(e){const t=e.type;return!e.bins&&(t===yx||t===Tk||t===Ck)}function NOe(e){return LJ(e)&&e!==Vh}const pLt=Td(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function POe(e){Ye.call(this,null,e),this.modified(!0)}At(POe,Ye,{transform(e,t){var n=t.dataflow,r=this.value,i=mLt(e);(!r||i!==r.type)&&(this.value=r=Wr(i)());for(i in e)if(!pLt[i]){if(i==="padding"&&NOe(r.type))continue;Yn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return wLt(r,e,_Lt(r,e,yLt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function mLt(e){var t=e.type,n="",r;return t===Vh?Vh+"-"+yx:(gLt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Vh+"-":r===3?jS+"-":""),(n+t||yx).toLowerCase())}function gLt(e){const t=e.type;return LJ(t)&&t!==gb&&t!==yb&&(e.scheme||e.range&&e.range.length&&e.range.every(Dt))}function yLt(e,t,n){const r=vLt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&hLt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return NOe(s)&&t.padding&&i[0]!==Sr(i)&&(i=bLt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(DOe(s,i,n)),s===DJ&&e.unknown(t.domainImplicit?Q7:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&BJ(e,t.nice)||null),i.length}function vLt(e,t,n){return t?(e.domain(DOe(e.type,t,n)),t.length):-1}function bLt(e,t,n,r,i,s){var o=Math.abs(Sr(n)-n[0]),a=o/(o-2*r),u=e===og?CQ(t,null,a):e===Ck?$M(t,null,a,.5):e===Tk?$M(t,null,a,i||1):e===SF?AQ(t,null,a,s||1):TQ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function DOe(e,t,n){if(zPe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+xt(t))}return t}function _Lt(e,t,n){let r=t.bins;if(r&&!nt(r)){const i=e.domain(),s=i[0],o=Sr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||et("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=ll(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===OJ&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function wLt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=ELt(r,t,n);else if(t.scheme&&(s=xLt(r,t,n),Yn(s))){if(e.interpolator)return e.interpolator(s);et(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&VPe(r))return e.interpolator(AF(XV(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(FJ(t.interpolate,t.interpolateGamma)):Yn(e.round)?e.round(i):Yn(e.rangeRound)&&e.interpolate(i?$I:bg),s&&e.range(XV(s,t.reverse))}function ELt(e,t,n){e!==$Pe&&e!==MV&&et("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===MV?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*PJ(n,i,r)]}function xLt(e,t,n){var r=t.schemeExtent,i,s;return nt(t.scheme)?s=AF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=jJ(i),s||et(`Unrecognized scheme name: ${t.scheme}`)),n=e===CF?n+1:e===OJ?n-1:e===vx||e===TF?+t.schemeCount||dLt:n,VPe(e)?Fpe(s,r,t.reverse):Yn(s)?WPe(Fpe(s,r),n):e===DJ?s:s.slice(0,n)}function Fpe(e,t,n){return Yn(e)&&(t||n)?qPe(e,XV(t||[0,1],n)):e}function XV(e,t){return t?e.slice().reverse():e}function OOe(e){Ye.call(this,null,e)}At(OOe,Ye,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(i_(e.sort)),this.modified(n),t}});const jpe="zero",MOe="center",$Oe="normalize",LOe=["y0","y1"];function TZ(e){Ye.call(this,null,e)}TZ.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:jpe,values:[jpe,MOe,$Oe]},{name:"as",type:"string",array:!0,length:2,default:LOe}]};At(TZ,Ye,{transform(e,t){var n=e.as||LOe,r=n[0],i=n[1],s=i_(e.sort),o=e.field||PS,a=e.offset===MOe?SLt:e.offset===$Oe?TLt:CLt,u,l,c,f;for(u=ALt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function SLt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function TLt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function CLt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function ALt(e,t,n,r){var i=[],s=g=>g(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const ILt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:SOe,datajoin:TOe,encode:COe,legendentries:AOe,linkpath:xZ,pie:SZ,scale:POe,sortitems:OOe,stack:TZ},Symbol.toStringTag,{value:"Module"}));var kLt=Math.abs,QV=Math.cos,ZM=Math.sin,RLt=1e-6,FOe=Math.PI,JV=FOe/2,Bpe=NLt(2);function Upe(e){return e>1?JV:e<-1?-JV:Math.asin(e)}function NLt(e){return e>0?Math.sqrt(e):0}function PLt(e,t){var n=e*ZM(t),r=30,i;do t-=i=(t+ZM(t)-n)/(1+QV(t));while(kLt(i)>RLt&&--r>0);return t/2}function DLt(e,t,n){function r(i,s){return[e*i*QV(s=PLt(n,s)),t*ZM(s)]}return r.invert=function(i,s){return s=Upe(s/t),[i/(e*QV(s)),Upe((2*s+ZM(2*s))/n)]},r}var OLt=DLt(Bpe/JV,Bpe,FOe);function MLt(){return wp(OLt).scale(169.529)}const $Lt=LEe(),ZV=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function LLt(e,t){return function n(){const r=t();return r.type=e,r.path=LEe().projection(r),r.copy=r.copy||function(){const i=n();return ZV.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},BPe(r)}}function CZ(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(e$[e]=LLt(e,t),this):e$[e]||null}function jOe(e){return e&&e.path||$Lt}const e$={albers:jEe,albersusa:Mut,azimuthalequalarea:$ut,azimuthalequidistant:Lut,conicconformal:But,conicequalarea:_3,conicequidistant:Vut,equalEarth:qut,equirectangular:Uut,gnomonic:Wut,identity:Gut,mercator:Fut,mollweide:MLt,naturalEarth1:Yut,orthographic:Kut,stereographic:Xut,transversemercator:Qut};for(const e in e$)CZ(e,e$[e]);function FLt(){}const Jp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function BOe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),jLt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,g;h<p;++h)if(BLt((g=c[h])[0],d)!==-1){g.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,g,y,b,_;for(h=p=-1,y=u[0]>=l,Jp[y<<1].forEach(E);++h<e-1;)g=y,y=u[h+1]>=l,Jp[g|y<<1].forEach(E);for(Jp[y<<0].forEach(E);++p<t-1;){for(h=-1,y=u[p*e+e]>=l,b=u[p*e]>=l,Jp[y<<1|b<<2].forEach(E);++h<e-1;)g=y,y=u[p*e+e+h+1]>=l,_=b,b=u[p*e+h+1]>=l,Jp[g|y<<1|b<<2|_<<3].forEach(E);Jp[y|b<<3].forEach(E)}for(h=-1,b=u[p*e]>=l,Jp[b<<2].forEach(E);++h<e-1;)_=b,b=u[p*e+h+1]>=l,Jp[b<<2|_<<3].forEach(E);Jp[b<<3].forEach(E);function E(C){var x=[C[0][0]+h,C[0][1]+p],T=[C[1][0]+h,C[1][1]+p],A=o(x),k=o(T),N,P;(N=d[A])?(P=f[k])?(delete d[N.end],delete f[P.start],N===P?(N.ring.push(T),c(N.ring)):f[N.start]=d[P.end]={start:N.start,end:P.end,ring:N.ring.concat(P.ring)}):(delete d[N.end],N.ring.push(T),d[N.end=k]=N):(N=f[k])?(P=d[A])?(delete f[N.start],delete d[P.end],N===P?(N.ring.push(T),c(N.ring)):f[P.start]=d[N.end]={start:P.start,end:N.end,ring:P.ring.concat(N.ring)}):(delete f[N.start],N.ring.unshift(x),f[N.start=A]=N):f[A]=d[k]={start:A,end:k,ring:[x,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,g=h|0,y,b=l[g*e+p];d>0&&d<e&&p===d&&(y=l[g*e+p-1],f[0]=d+(c-y)/(b-y)-.5),h>0&&h<t&&g===h&&(y=l[(g-1)*e+p],f[1]=h+(c-y)/(b-y)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||et("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:FLt,r):n===a},r}function jLt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function BLt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=ULt(e,t[n]))return i;return 0}function ULt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(zLt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function zLt(e,t,n){var r;return VLt(e,t,n)&&HLt(e[r=+(e[0]===t[0])],n[r],t[r])}function VLt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function HLt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function UOe(e,t,n){return function(r){var i=op(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?oy(s,o,e):a/(e+1);return ll(s+u,o,u)}}function AZ(e){Ye.call(this,null,e)}AZ.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};At(AZ,Ye,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Ga,s=BOe().smooth(e.smooth!==!1),o=e.thresholds||qLt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,nt(o)?o:o(c.values));WLt(f,c,l,e),f.forEach(d=>{u.push(mF(l,ei(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function qLt(e,t,n){const r=UOe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Nm(t(i).values)))}function WLt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Yn(i)&&(i=i(n,r)),Yn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Or(i)?i:i[0])||1,a=(Or(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(zOe(t,o,a,u,l))}function zOe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function zpe(e,t,n){const r=e>=0?e:WQ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function AB(e){return Yn(e)?e:Ya(+e)}function VOe(){var e=u=>u[0],t=u=>u[1],n=PS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=zpe(r[0],u,e)>>o,f=zpe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),g=2*h+(s>>o),y=new Float32Array(p*g),b=new Float32Array(p*g);let _=y;u.forEach(C=>{const x=d+(+e(C)>>o),T=h+(+t(C)>>o);x>=0&&x<p&&T>=0&&T<g&&(y[x+T*p]+=+n(C))}),c>0&&f>0?(pw(p,g,y,b,c),mw(p,g,b,y,f),pw(p,g,y,b,c),mw(p,g,b,y,f),pw(p,g,y,b,c),mw(p,g,b,y,f)):c>0?(pw(p,g,y,b,c),pw(p,g,b,y,c),pw(p,g,y,b,c),_=b):f>0&&(mw(p,g,y,b,f),mw(p,g,b,y,f),mw(p,g,y,b,f),_=b);const E=l?Math.pow(2,-2*o):1/rwe(_);for(let C=0,x=p*g;C<x;++C)_[C]*=E;return{values:_,scale:1<<o,width:p,height:g,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=AB(u),a):e},a.y=function(u){return arguments.length?(t=AB(u),a):t},a.weight=function(u){return arguments.length?(n=AB(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||et("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||et("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Pt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&et("invalid bandwidth"),r=u,a):r},a}function pw(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function mw(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function IZ(e){Ye.call(this,null,e)}IZ.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const GLt=["x","y","weight","size","cellSize","bandwidth"];function HOe(e,t){return GLt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}At(IZ,Ye,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=YLt(r,e.groupby),s=(e.groupby||[]).map(Es),o=HOe(VOe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>ei(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function YLt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function kZ(e){Ye.call(this,null,e)}kZ.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};At(kZ,Ye,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=BOe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||UOe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=HOe(VOe(),e)(i,!0),u=zOe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=nt(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(ei),n}});const eH="Feature",RZ="FeatureCollection",KLt="MultiPoint";function NZ(e){Ye.call(this,null,e)}NZ.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};At(NZ,Ye,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Ga,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(Ua(a))||s&&t.modified(Ua(s))||o&&t.modified(Ua(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:eH,geometry:{type:KLt,coordinates:r}})),this.value={type:RZ,features:n}}});function PZ(e){Ye.call(this,null,e)}PZ.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};At(PZ,Ye,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Ga,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=jOe(e.projection),n.materialize().reflow()):o=i===Ga||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=XLt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function XLt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function DZ(e){Ye.call(this,null,e)}DZ.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};At(DZ,Ye,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function OZ(e){Ye.call(this,null,e)}OZ.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};At(OZ,Ye,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=QLt(jOe(e.projection),e.field||df("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function QLt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function MZ(e){Ye.call(this,[],e),this.generator=put()}MZ.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};At(MZ,Ye,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Yn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(HNe(n[0],i)):t.add.push(ei(i)),n[0]=i,t}});function $Z(e){Ye.call(this,null,e)}$Z.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};At($Z,Ye,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Ga,s=ZLt(e.opacity,e),o=JLt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Nm(n.map(l=>Nm(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Gn({},l,u);r||(f.$max=Nm(c.values||[])),l[a]=e6t(c,f,o.dep?o:Ya(o(f)),s.dep?s:Ya(s(f)))}),t.reflow(!0).modifies(a)}});function JLt(e,t){let n;return Yn(e)?(n=r=>ay(e(r,t)),n.dep=qOe(e)):n=Ya(ay(e||"#888")),n}function ZLt(e,t){let n;return Yn(e)?(n=r=>e(r,t),n.dep=qOe(e)):e?n=Ya(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function qOe(e){if(!Yn(e))return!1;const t=Td(Ua(e));return t.$x||t.$y||t.$value||t.$max}function e6t(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?y=>c[y]:S0,d=X0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),g=p.data;for(let y=a,b=0;y<l;++y){t.$y=y-a;for(let _=o,E=y*i;_<u;++_,b+=4){t.$x=_-o,t.$value=f(_+E);const C=n(t);g[b+0]=C.r,g[b+1]=C.g,g[b+2]=C.b,g[b+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function WOe(e){Ye.call(this,null,e),this.modified(!0)}At(WOe,Ye,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=n6t(e.type),ZV.forEach(r=>{e[r]!=null&&Vpe(n,r,e[r])})):ZV.forEach(r=>{e.modified(r)&&Vpe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&t6t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function t6t(e,t){const n=r6t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function n6t(e){const t=CZ((e||"mercator").toLowerCase());return t||et("Unrecognized projection type: "+e),t()}function Vpe(e,t,n){Yn(e[t])&&e[t](n)}function r6t(e){return e=Pt(e),e.length===1?e[0]:{type:RZ,features:e.reduce((t,n)=>t.concat(i6t(n)),[])}}function i6t(e){return e.type===RZ?e.features:Pt(e).filter(t=>t!=null).map(t=>t.type===eH?t:{type:eH,geometry:t})}const s6t=Object.freeze(Object.defineProperty({__proto__:null,contour:kZ,geojson:NZ,geopath:PZ,geopoint:DZ,geoshape:OZ,graticule:MZ,heatmap:$Z,isocontour:AZ,kde2d:IZ,projection:WOe},Symbol.toStringTag,{value:"Module"})),Hpe={center:iat,collide:xat,nbody:Oat,link:Tat,x:Mat,y:$at},t2="forces",tH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],o6t=["static","iterations"],GOe=["x","y","vx","vy"];function LZ(e){Ye.call(this,null,e)}LZ.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:GOe}]};At(LZ,Ye,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(tH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&YOe(n,e,0,t)):(this.value=n=u6t(t.source,e),n.on("tick",a6t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(o6t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==t2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(GOe)}});function a6t(e,t){return()=>e.touch(t).run()}function u6t(e,t){const n=Dat(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),YOe(n,t,!0).on("end",()=>s=!0)}function YOe(e,t,n,r){var i=Pt(t.forces),s,o,a,u;for(s=0,o=tH.length;s<o;++s)a=tH[s],a!==t2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=t2+s,a=n||t.modified(t2,s)?c6t(i[s]):r&&l6t(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(t2+s,null);return e.numForces=i.length,e}function l6t(e,t){var n,r;for(n in e)if(Yn(r=e[n])&&t.modified(Ua(r)))return 1;return 0}function c6t(e){var t,n;on(Hpe,e.force)||et("Unrecognized force: "+e.force),t=Hpe[e.force]();for(n in e)Yn(t[n])&&f6t(t[n],e[n],e);return t}function f6t(e,t,n){e(Yn(t)?r=>t(r,n):t)}const d6t=Object.freeze(Object.defineProperty({__proto__:null,force:LZ},Symbol.toStringTag,{value:"Module"}));function nH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function FZ(e){Ye.call(this,null,e)}FZ.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const h6t=e=>e.values;At(FZ,Ye,{transform(e,t){t.source||et("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&pF(o.data)&&i.rem.push(o.data)}),this.value=s=HL({values:Pt(e.keys).reduce((o,a)=>(o.key(a),o),p6t()).entries(i.source)},h6t),n&&s.each(o=>{o.children&&(o=ei(o.data),i.add.push(o),i.source.push(o))}),nH(s,rn,rn)),i.source.root=s,i}});function p6t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Ag(e){Ye.call(this,null,e)}const m6t=(e,t)=>e.parent===t.parent?1:2;At(Ag,Ye,{transform(e,t){(!t.source||!t.source.root)&&et(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(i_(e.sort,o=>o.data)),g6t(n,this.params,e),n.separation&&n.separation(e.separation!==!1?m6t:PS);try{this.value=n(i)}catch(o){et(o)}return i.each(o=>y6t(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function g6t(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function y6t(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const rH=["x","y","r","depth","children"];function jZ(e){Ag.call(this,e)}jZ.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:rH.length,default:rH}]};At(jZ,Ag,{layout:exe,params:["radius","size","padding"],fields:rH});const iH=["x0","y0","x1","y1","depth","children"];function BZ(e){Ag.call(this,e)}BZ.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:iH.length,default:iH}]};At(BZ,Ag,{layout:$lt,params:["size","round","padding"],fields:iH});function UZ(e){Ye.call(this,null,e)}UZ.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};At(UZ,Ye,{transform(e,t){t.source||et("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?nH(Mue().id(e.key).parentId(e.parentKey)(i.source),e.key,hf):nH(Mue()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const qpe={tidy:Wlt,cluster:slt},sH=["x","y","depth","children"];function zZ(e){Ag.call(this,e)}zZ.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:sH.length,default:sH}]};At(zZ,Ag,{layout(e){const t=e||"tidy";if(on(qpe,t))return qpe[t]();et("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:sH});function VZ(e){Ye.call(this,[],e)}VZ.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};At(VZ,Ye,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||et("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[rn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[rn(a)]&&s[rn(u)]&&i.add.push(ei({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[rn(o)]=1),n.forEach(o=>{(s[rn(o.source)]||s[rn(o.target)])&&i.mod.push(o)})),i}});const Wpe={binary:Ylt,dice:BI,slice:qL,slicedice:Klt,squarify:ixe,resquarify:Xlt},oH=["x0","y0","x1","y1","depth","children"];function HZ(e){Ag.call(this,e)}HZ.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:oH.length,default:oH}]};At(HZ,Ag,{layout(){const e=Glt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{on(Wpe,t)?e.tile(Wpe[t]):et("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:oH});const v6t=Object.freeze(Object.defineProperty({__proto__:null,nest:FZ,pack:jZ,partition:BZ,stratify:UZ,tree:zZ,treelinks:VZ,treemap:HZ},Symbol.toStringTag,{value:"Module"})),IB=4278190080;function b6t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function _6t(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=X0(s,o).getContext("2d"),l=X0(s,o).getContext("2d"),c=a&&X0(s,o).getContext("2d");n.forEach(k=>rO(u,k,!1)),rO(l,t,!1),a&&rO(c,t,!0);const f=kB(u,s,o),d=kB(l,s,o),h=a&&kB(c,s,o),p=e.bitmap(),g=a&&e.bitmap();let y,b,_,E,C,x,T,A;for(b=0;b<o;++b)for(y=0;y<s;++y)C=b*s+y,x=f[C]&IB,A=d[C]&IB,T=a&&h[C]&IB,(x||T||A)&&(_=e(y),E=e(b),!i&&(x||A)&&p.set(_,E),a&&(x||T)&&g.set(_,E));return[p,g]}function kB(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function rO(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>rO(e,s.items,n))}):bc[r].draw(e,{items:n?t.map(w6t):t})}function w6t(e){const t=mF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Zp=5,uu=31,tI=32,m0=new Uint32Array(tI+1),Jf=new Uint32Array(tI+1);Jf[0]=0;m0[0]=~Jf[0];for(let e=1;e<=tI;++e)Jf[e]=Jf[e-1]<<1|1,m0[e]=~Jf[e];function E6t(e,t){const n=new Uint32Array(~~((e*t+tI)/tI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Zp]&1<<(a&uu)},set:(s,o)=>{const a=o*e+s;r(a>>>Zp,1<<(a&uu))},clear:(s,o)=>{const a=o*e+s;i(a>>>Zp,~(1<<(a&uu)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Zp,h=f>>>Zp,d===h){if(n[d]&m0[c&uu]&Jf[(f&uu)+1])return!0}else{if(n[d]&m0[c&uu]||n[h]&Jf[(f&uu)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Zp,d=c>>>Zp,f===d)r(f,m0[l&uu]&Jf[(c&uu)+1]);else for(r(f,m0[l&uu]),r(d,Jf[(c&uu)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Zp,d=c>>>Zp,f===d)i(f,Jf[l&uu]|m0[(c&uu)+1]);else for(i(f,Jf[l&uu]),i(d,m0[(c&uu)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function x6t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>E6t(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function S6t(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=ic.width(o.datum,o.datum.text);let f=0,d,h,p,g,y,b,_;for(let E=0;E<u;++E)d=a[E].x,p=a[E].y,h=a[E].x2===void 0?d:a[E].x2,g=a[E].y2===void 0?p:a[E].y2,y=(d+h)/2,b=(p+g)/2,_=Math.abs(h-d+g-p),_>=f&&(f=_,o.x=y,o.y=b);return y=c/2,b=l/2,d=o.x-y,h=o.x+y,p=o.y-b,g=o.y+b,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&g<=s?o.baseline="top":0<=p&&s<g&&(o.baseline="bottom"),!0}}function t$(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function M0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function T6t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),g=e.invert(c);let y=f,b=s,_;if(!t$(p,g,d,h,i,s)&&!M0(e,p,g,h,d,y,o,a)&&!M0(e,p,g,h,d,h,o,null)){for(;b-y>=1;)_=(y+b)/2,M0(e,p,g,h,d,_,o,a)?b=_:y=_;if(y>f)return[p,g,y,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ic.width(l.datum,l.datum.text);let p=n?d:0,g=!1,y=!1,b=0,_,E,C,x,T,A,k,N,P,D,j,M,B,V,z,G,Y;for(let Q=0;Q<f;++Q){for(_=c[Q].x,C=c[Q].y,E=c[Q].x2===void 0?_:c[Q].x2,x=c[Q].y2===void 0?C:c[Q].y2,_>E&&(Y=_,_=E,E=Y),C>x&&(Y=C,C=x,x=Y),P=e(_),j=e(E),D=~~((P+j)/2),M=e(C),V=e(x),B=~~((M+V)/2),k=D;k>=P;--k)for(N=B;N>=M;--N)G=u(k,N,p,h,d),G&&([l.x,l.y,p,g]=G);for(k=D;k<=j;++k)for(N=B;N<=V;++N)G=u(k,N,p,h,d),G&&([l.x,l.y,p,g]=G);!g&&!n&&(z=Math.abs(E-_+x-C),T=(_+E)/2,A=(C+x)/2,z>=b&&!t$(T,A,h,d,i,s)&&!M0(e,T,A,d,h,d,o,null)&&(b=z,l.x=T,l.y=A,y=!0))}return g||y?(T=h/2,A=d/2,o.setRange(e(l.x-T),e(l.y-A),e(l.x+T),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const C6t=[-1,-1,1,1],A6t=[-1,1,-1,1];function I6t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ic.width(l.datum,l.datum.text),p=[];let g=n?d:0,y=!1,b=!1,_=0,E,C,x,T,A,k,N,P,D,j,M,B;for(let V=0;V<f;++V){for(E=c[V].x,x=c[V].y,C=c[V].x2===void 0?E:c[V].x2,T=c[V].y2===void 0?x:c[V].y2,p.push([e((E+C)/2),e((x+T)/2)]);p.length;)if([N,P]=p.pop(),!(o.get(N,P)||a.get(N,P)||u.get(N,P))){u.set(N,P);for(let z=0;z<4;++z)A=N+C6t[z],k=P+A6t[z],u.outOfBounds(A,k,A,k)||p.push([A,k]);if(A=e.invert(N),k=e.invert(P),D=g,j=s,!t$(A,k,h,d,i,s)&&!M0(e,A,k,d,h,D,o,a)&&!M0(e,A,k,d,h,d,o,null)){for(;j-D>=1;)M=(D+j)/2,M0(e,A,k,d,h,M,o,a)?j=M:D=M;D>g&&(l.x=A,l.y=k,g=D,y=!0)}}!y&&!n&&(B=Math.abs(C-E+T-x),A=(E+C)/2,k=(x+T)/2,B>=_&&!t$(A,k,h,d,i,s)&&!M0(e,A,k,d,h,d,o,null)&&(_=B,l.x=A,l.y=k,b=!0))}return y||b?(A=h/2,k=d/2,o.setRange(e(l.x-A),e(l.y-k),e(l.x+A),e(l.y+k)),l.align="center",l.baseline="middle",!0):!1}}const k6t=["right","center","left"],R6t=["bottom","middle","top"];function N6t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,g,y,b,_,E,C,x,T,A,k,N,P,D;for(let j=0;j<u;++j){if(h=(n[j]&3)-1,p=(n[j]>>>2&3)-1,g=h===0&&p===0||r[j]<0,y=h&&p?Math.SQRT1_2:1,b=r[j]<0?-1:1,_=c[1+h]+r[j]*h*y,A=c[4+p]+b*f*p/2+r[j]*p*y,C=A-f/2,x=A+f/2,k=e(_),P=e(C),D=e(x),!d)if(Gpe(k,k,P,D,o,a,_,_,C,x,c,g))d=ic.width(l.datum,l.datum.text);else continue;if(T=_+b*d*h/2,_=T-d/2,E=T+d/2,k=e(_),N=e(E),Gpe(k,N,P,D,o,a,_,E,C,x,c,g))return l.x=h?h*b<0?E:_:T,l.y=p?p*b<0?x:C:A,l.align=k6t[h*b+1],l.baseline=R6t[p*b+1],o.setRange(k,P,N,D),!0}return!1}}function Gpe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const RB=0,NB=4,PB=8,DB=0,OB=1,MB=2,P6t={"top-left":RB+DB,top:RB+OB,"top-right":RB+MB,left:NB+DB,middle:NB+OB,right:NB+MB,"bottom-left":PB+DB,bottom:PB+OB,"bottom-right":PB+MB},D6t={naive:S6t,"reduced-search":T6t,floodfill:I6t};function O6t(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=M6t(r,f),h=$6t(i,f),p=L6t(e[0].datum),g=p==="group"&&e[0].datum.items[u].marktype,y=g==="area",b=F6t(p,g,a,u),_=l===null||l===1/0,E=y&&c==="naive";let C=-1,x=-1;const T=e.map(P=>{const D=_?ic.width(P,P.text):void 0;return C=Math.max(C,D),x=Math.max(x,P.fontSize),{datum:P,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:b(P),textWidth:D}});l=l===null||l===1/0?Math.max(C,x)+Math.max(...r):l;const A=x6t(t[0],t[1],l);let k;if(!E){n&&T.sort((j,M)=>n(j.datum,M.datum));let P=!1;for(let j=0;j<h.length&&!P;++j)P=h[j]===5||d[j]<0;const D=(p&&o||y)&&e.map(j=>j.datum);k=s.length||D?_6t(A,D||[],s,P,y):b6t(A,o&&T)}const N=y?D6t[c](A,k,o,u):N6t(A,k,h,d);return T.forEach(P=>P.opacity=+N(P)),T}function M6t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function $6t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=P6t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function L6t(e){return e&&e.mark&&e.mark.marktype}function F6t(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const aH=["x","y","opacity","align","baseline"],KOe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function qZ(e){Ye.call(this,null,e)}qZ.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:KOe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:aH.length,default:aH}]};At(qZ,Ye,{transform(e,t){function n(s){const o=e[s];return Yn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&et("Size parameter should be specified as a [width, height] array.");const i=e.as||aH;return O6t(t.materialize(t.SOURCE).source||[],e.size,e.sort,Pt(e.offset==null?1:e.offset),Pt(e.anchor||KOe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const j6t=Object.freeze(Object.defineProperty({__proto__:null,label:qZ},Symbol.toStringTag,{value:"Module"}));function XOe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function WZ(e){Ye.call(this,null,e)}WZ.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};At(WZ,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=XOe(r,e.groupby),s=(e.groupby||[]).map(Es),o=s.length,a=e.as||[Es(e.x),Es(e.y)],u=[];i.forEach(l=>{uPe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(ei(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const uH={constant:iJ,linear:sJ,log:iPe,exp:sPe,pow:oPe,quad:oJ,poly:aPe},B6t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function GZ(e){Ye.call(this,null,e)}GZ.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(uH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};At(GZ,Ye,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=XOe(r,e.groupby),s=(e.groupby||[]).map(Es),o=e.method||"linear",a=e.order==null?3:e.order,u=B6t(o,a),l=e.as||[Es(e.x),Es(e.y)],c=uH[o],f=[];let d=e.extent;on(uH,o)||et("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const g=c(h,e.x,e.y,a);if(e.params){f.push(ei({keys:h.dims,coef:g.coef,rSquared:g.rSquared}));return}const y=d||op(h,e.x),b=_=>{const E={};for(let C=0;C<s.length;++C)E[s[C]]=h.dims[C];E[l[0]]=_[0],E[l[1]]=_[1],f.push(ei(E))};o==="linear"||o==="constant"?y.forEach(_=>b([_,g.predict(_)])):EF(g.predict,y,25,200).forEach(b)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const U6t=Object.freeze(Object.defineProperty({__proto__:null,loess:WZ,regression:GZ},Symbol.toStringTag,{value:"Module"}));function YZ(e){Ye.call(this,null,e)}YZ.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const z6t=[-1e5,-1e5,1e5,1e5];At(YZ,Ye,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:z6t;const s=this.value=qG.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!H6t(u)?V6t(u):null}return t.reflow(e.modified()).modifies(n)}});function V6t(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function H6t(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const q6t=Object.freeze(Object.defineProperty({__proto__:null,voronoi:YZ},Symbol.toStringTag,{value:"Module"}));var $B=Math.PI/180,n2=64,iO=2048;function W6t(){var e=[256,256],t,n,r,i,s,o,a,u=QOe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(X0()),g=J6t((e[0]>>5)*e[1]),y=null,b=l.length,_=-1,E=[],C=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,A)=>A.size-T.size);++_<b;){var x=C[_];x.x=e[0]*(c()+.5)>>1,x.y=e[1]*(c()+.5)>>1,G6t(p,x,C,_),x.hasText&&h(g,x,y)&&(E.push(x),y?K6t(y,x):y=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=e[0]>>1,x.y-=e[1]>>1)}return E};function d(p){p.width=p.height=1;var g=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(n2<<5)/g,p.height=iO/g;var y=p.getContext("2d");return y.fillStyle=y.strokeStyle="red",y.textAlign="center",{context:y,ratio:g}}function h(p,g,y){for(var b=g.x,_=g.y,E=Math.sqrt(e[0]*e[0]+e[1]*e[1]),C=u(e),x=c()<.5?1:-1,T=-x,A,k,N;(A=C(T+=x))&&(k=~~A[0],N=~~A[1],!(Math.min(Math.abs(k),Math.abs(N))>=E));)if(g.x=b+k,g.y=_+N,!(g.x+g.x0<0||g.y+g.y0<0||g.x+g.x1>e[0]||g.y+g.y1>e[1])&&(!y||!Y6t(g,p,e[0]))&&(!y||X6t(g,y))){for(var P=g.sprite,D=g.width>>5,j=e[0]>>5,M=g.x-(D<<4),B=M&127,V=32-B,z=g.y1-g.y0,G=(g.y+g.y0)*j+(M>>5),Y,Q=0;Q<z;Q++){Y=0;for(var L=0;L<=D;L++)p[G+L]|=Y<<V|(L<D?(Y=P[Q*D+L])>>>B:0);G+=j}return g.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Fv(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Fv(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Fv(p),f):s},f.rotate=function(p){return arguments.length?(o=Fv(p),f):o},f.text=function(p){return arguments.length?(t=Fv(p),f):t},f.spiral=function(p){return arguments.length?(u=Z6t[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Fv(p),f):r},f.padding=function(p){return arguments.length?(a=Fv(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function G6t(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(n2<<5)/s,iO/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var g=Math.sin(t.rotate*$B),y=Math.cos(t.rotate*$B),b=c*y,_=c*g,E=d*y,C=d*g;c=Math.max(Math.abs(b+C),Math.abs(b-C))+31>>5<<5,d=~~Math.max(Math.abs(_+E),Math.abs(_-E))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=n2<<5&&(o=0,a+=u,u=0),a+d>=iO)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*$B),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var x=i.getImageData(0,0,(n2<<5)/s,iO/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var A=0,k=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var N=f*p+(h>>5),P=x[(a+p)*(n2<<5)+(o+h)<<2]?1<<31-h%32:0;T[N]|=P,A|=P}A?k=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+k,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function Y6t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function K6t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function X6t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function QOe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Q6t(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function J6t(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Fv(e){return typeof e=="function"?e:function(){return e}}var Z6t={archimedean:QOe,rectangular:Q6t};const JOe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],eFt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function KZ(e){Ye.call(this,W6t(),e)}KZ.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:JOe}]};At(KZ,Ye,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&et("Wordcloud size dimensions must be non-zero.");function n(p){const g=e[p];return Yn(g)&&t.modified(g.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||eFt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||JOe;let a=e.fontSize||14,u;if(Yn(a)?u=e.fontSizeRange:a=Ya(a),u){const p=a,g=Wr("sqrt")().domain(op(i,p)).range(u);a=y=>g(p(y))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(mf).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,g,y;p<h;++p)g=l[p],y=g.datum,y[o[0]]=g.x+f,y[o[1]]=g.y+d,y[o[2]]=g.font,y[o[3]]=g.size,y[o[4]]=g.style,y[o[5]]=g.weight,y[o[6]]=g.rotate;return t.reflow(r).modifies(o)}});const tFt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:KZ},Symbol.toStringTag,{value:"Module"})),nFt=e=>new Uint8Array(e),rFt=e=>new Uint16Array(e),F2=e=>new Uint32Array(e);function iFt(){let e=8,t=[],n=F2(0),r=GP(0,e),i=GP(0,e);return{data:()=>t,seen:()=>n=sFt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=GP(s,e,r),i=GP(s,e))}}}function sFt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function GP(e,t,n){const r=(t<257?nFt:t<65537?rFt:F2)(e);return n&&r.set(n),r}function Ype(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Kpe(){let e=F2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=F2(f);let h=Array(f),p,g,y;for(y=0;y<f;++y)h[y]=a(u[y]),d[y]=y;if(h=oFt(h,d),c)p=t,g=e,t=Array(c+f),e=F2(c+f),aFt(l,p,g,c,h,d,f,t,e);else{if(l>0)for(y=0;y<f;++y)d[y]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Ant(u,a[0],0,l),sy(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function oFt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Rnt(e,t)}function aFt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function XZ(e){Ye.call(this,iFt(),e),this._indices=null,this._dims=null}XZ.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};At(XZ,Ye,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Kpe()),s.push(Ype(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let g,y,b,_,E,C,x,T,A;if(l.set(u),t.rem.length&&(E=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(C={},_=t.mod,x=0,T=_.length;x<T;++x)C[_[x]._index]=1;for(x=0;x<h;++x)A=r[x],(!o[x]||e.modified("fields",x)||t.modified(A.fields))&&(b=A.fname,(g=p[b])||(s[b]=y=Kpe(),p[b]=g=y.insert(A,t.source,0)),o[x]=Ype(y,x,i[x]).onAdd(g,u));for(x=0,T=a.data().length;x<T;++x)E[x]||(l[x]!==u[x]?f.push(x):C[x]&&u[x]!==c&&d.push(x));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,g;i.resize(c,f),i.add(r);const y=i.curr(),b=i.prev(),_=i.all();for(h=0;h<f;++h)p=a[h].fname,g=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(g,y);for(;d<c;++d)b[d]=_,y[d]!==_&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],g=e.one;let y,b,_;if(f<h)for(y=f,b=Math.min(h,d);y<b;++y)_=u[y],s[_]!==n&&(a[_]=o[_],s[_]=n,r.push(_)),o[_]^=g;else if(f>h)for(y=h,b=Math.min(f,p);y<b;++y)_=u[y],s[_]!==n&&(a[_]=o[_],s[_]=n,r.push(_)),o[_]^=g;if(d>p)for(y=Math.max(f,p),b=d;y<b;++y)_=u[y],s[_]!==n&&(a[_]=o[_],s[_]=n,r.push(_)),o[_]^=g;else if(d<p)for(y=Math.max(h,d),b=p;y<b;++y)_=u[y],s[_]!==n&&(a[_]=o[_],s[_]=n,r.push(_)),o[_]^=g;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,g,y;if(l<f)for(p=l,g=Math.min(f,c);p<g;++p)y=o[p],s[y]^=h,n.push(y);else if(l>f)for(p=f,g=Math.min(l,d);p<g;++p)y=o[p],s[y]^=h,r.push(y);if(c>d)for(p=Math.max(l,d),g=c;p<g;++p)y=o[p],s[y]^=h,n.push(y);else if(c<d)for(p=Math.max(f,c),g=d;p<g;++p)y=o[p],s[y]^=h,r.push(y);e.range=t.slice()}});function QZ(e){Ye.call(this,null,e)}QZ.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};At(QZ,Ye,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const uFt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:XZ,resolvefilter:QZ},Symbol.toStringTag,{value:"Module"})),lFt="RawCode",bb="Literal",cFt="Property",fFt="Identifier",dFt="ArrayExpression",hFt="BinaryExpression",ZOe="CallExpression",pFt="ConditionalExpression",mFt="LogicalExpression",gFt="MemberExpression",yFt="ObjectExpression",vFt="UnaryExpression";function $d(e){this.type=e}$d.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=bFt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function bFt(e){switch(e.type){case dFt:return e.elements;case hFt:case mFt:return[e.left,e.right];case ZOe:return[e.callee].concat(e.arguments);case pFt:return[e.test,e.consequent,e.alternate];case gFt:return[e.object,e.property];case yFt:return e.properties;case cFt:return[e.key,e.value];case vFt:return[e.argument];case fFt:case bb:case lFt:default:return[]}}var Ap,Yt,Je,Va,fi,BF=1,Fk=2,_b=3,uv=4,UF=5,a_=6,tl=7,jk=8,_Ft=9;Ap={};Ap[BF]="Boolean";Ap[Fk]="<end>";Ap[_b]="Identifier";Ap[uv]="Keyword";Ap[UF]="Null";Ap[a_]="Numeric";Ap[tl]="Punctuator";Ap[jk]="String";Ap[_Ft]="RegularExpression";var wFt="ArrayExpression",EFt="BinaryExpression",xFt="CallExpression",SFt="ConditionalExpression",e3e="Identifier",TFt="Literal",CFt="LogicalExpression",AFt="MemberExpression",IFt="ObjectExpression",kFt="Property",RFt="UnaryExpression",jo="Unexpected token %0",NFt="Unexpected number",PFt="Unexpected string",DFt="Unexpected identifier",OFt="Unexpected reserved word",MFt="Unexpected end of input",lH="Invalid regular expression",LB="Invalid regular expression: missing /",t3e="Octal literals are not allowed in strict mode.",$Ft="Duplicate data property in object literal not allowed in strict mode",la="ILLEGAL",nI="Disabled.",LFt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),FFt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function zF(e,t){if(!e)throw new Error("ASSERT: "+t)}function lm(e){return e>=48&&e<=57}function JZ(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function j2(e){return"01234567".indexOf(e)>=0}function jFt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function rI(e){return e===10||e===13||e===8232||e===8233}function Bk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&LFt.test(String.fromCharCode(e))}function n$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&FFt.test(String.fromCharCode(e))}const BFt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function n3e(){for(;Je<Va;){const e=Yt.charCodeAt(Je);if(jFt(e)||rI(e))++Je;else break}}function cH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Je<Va&&JZ(Yt[Je])?(r=Yt[Je++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Vr({},jo,la);return String.fromCharCode(i)}function UFt(){var e,t,n,r;for(e=Yt[Je],t=0,e==="}"&&Vr({},jo,la);Je<Va&&(e=Yt[Je++],!!JZ(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Vr({},jo,la),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function r3e(){var e,t;for(e=Yt.charCodeAt(Je++),t=String.fromCharCode(e),e===92&&(Yt.charCodeAt(Je)!==117&&Vr({},jo,la),++Je,e=cH("u"),(!e||e==="\\"||!Bk(e.charCodeAt(0)))&&Vr({},jo,la),t=e);Je<Va&&(e=Yt.charCodeAt(Je),!!n$(e));)++Je,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Yt.charCodeAt(Je)!==117&&Vr({},jo,la),++Je,e=cH("u"),(!e||e==="\\"||!n$(e.charCodeAt(0)))&&Vr({},jo,la),t+=e);return t}function zFt(){var e,t;for(e=Je++;Je<Va;){if(t=Yt.charCodeAt(Je),t===92)return Je=e,r3e();if(n$(t))++Je;else break}return Yt.slice(e,Je)}function VFt(){var e,t,n;return e=Je,t=Yt.charCodeAt(Je)===92?r3e():zFt(),t.length===1?n=_b:BFt.hasOwnProperty(t)?n=uv:t==="null"?n=UF:t==="true"||t==="false"?n=BF:n=_b,{type:n,value:t,start:e,end:Je}}function FB(){var e=Je,t=Yt.charCodeAt(Je),n,r=Yt[Je],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Je,{type:tl,value:String.fromCharCode(t),start:e,end:Je};default:if(n=Yt.charCodeAt(Je+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Je+=2,{type:tl,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Je};case 33:case 61:return Je+=2,Yt.charCodeAt(Je)===61&&++Je,{type:tl,value:Yt.slice(e,Je),start:e,end:Je}}}if(o=Yt.substr(Je,4),o===">>>=")return Je+=4,{type:tl,value:o,start:e,end:Je};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Je+=3,{type:tl,value:s,start:e,end:Je};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Je+=2,{type:tl,value:i,start:e,end:Je};if(i==="//"&&Vr({},jo,la),"<>=!+-*%&|^/".indexOf(r)>=0)return++Je,{type:tl,value:r,start:e,end:Je};Vr({},jo,la)}function HFt(e){let t="";for(;Je<Va&&JZ(Yt[Je]);)t+=Yt[Je++];return t.length===0&&Vr({},jo,la),Bk(Yt.charCodeAt(Je))&&Vr({},jo,la),{type:a_,value:parseInt("0x"+t,16),start:e,end:Je}}function qFt(e){let t="0"+Yt[Je++];for(;Je<Va&&j2(Yt[Je]);)t+=Yt[Je++];return(Bk(Yt.charCodeAt(Je))||lm(Yt.charCodeAt(Je)))&&Vr({},jo,la),{type:a_,value:parseInt(t,8),octal:!0,start:e,end:Je}}function Xpe(){var e,t,n;if(n=Yt[Je],zF(lm(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Je,e="",n!=="."){if(e=Yt[Je++],n=Yt[Je],e==="0"){if(n==="x"||n==="X")return++Je,HFt(t);if(j2(n))return qFt(t);n&&lm(n.charCodeAt(0))&&Vr({},jo,la)}for(;lm(Yt.charCodeAt(Je));)e+=Yt[Je++];n=Yt[Je]}if(n==="."){for(e+=Yt[Je++];lm(Yt.charCodeAt(Je));)e+=Yt[Je++];n=Yt[Je]}if(n==="e"||n==="E")if(e+=Yt[Je++],n=Yt[Je],(n==="+"||n==="-")&&(e+=Yt[Je++]),lm(Yt.charCodeAt(Je)))for(;lm(Yt.charCodeAt(Je));)e+=Yt[Je++];else Vr({},jo,la);return Bk(Yt.charCodeAt(Je))&&Vr({},jo,la),{type:a_,value:parseFloat(e),start:t,end:Je}}function WFt(){var e="",t,n,r,i,s=!1;for(t=Yt[Je],zF(t==="'"||t==='"',"String literal must starts with a quote"),n=Je,++Je;Je<Va;)if(r=Yt[Je++],r===t){t="";break}else if(r==="\\")if(r=Yt[Je++],!r||!rI(r.charCodeAt(0)))switch(r){case"u":case"x":Yt[Je]==="{"?(++Je,e+=UFt()):e+=cH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:j2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Je<Va&&j2(Yt[Je])&&(s=!0,i=i*8+"01234567".indexOf(Yt[Je++]),"0123".indexOf(r)>=0&&Je<Va&&j2(Yt[Je])&&(i=i*8+"01234567".indexOf(Yt[Je++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Yt[Je]===`
`&&++Je;else{if(rI(r.charCodeAt(0)))break;e+=r}return t!==""&&Vr({},jo,la),{type:jk,value:e,octal:s,start:n,end:Je}}function GFt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Vr({},lH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Vr({},lH)}try{return new RegExp(e,t)}catch{return null}}function YFt(){var e,t,n,r,i;for(e=Yt[Je],zF(e==="/","Regular expression literal must start with a slash"),t=Yt[Je++],n=!1,r=!1;Je<Va;)if(e=Yt[Je++],t+=e,e==="\\")e=Yt[Je++],rI(e.charCodeAt(0))&&Vr({},LB),t+=e;else if(rI(e.charCodeAt(0)))Vr({},LB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Vr({},LB),i=t.substr(1,t.length-2),{value:i,literal:t}}function KFt(){var e,t,n;for(t="",n="";Je<Va&&(e=Yt[Je],!!n$(e.charCodeAt(0)));)++Je,e==="\\"&&Je<Va?Vr({},jo,la):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Vr({},lH,n),{value:n,literal:t}}function XFt(){var e,t,n,r;return fi=null,n3e(),e=Je,t=YFt(),n=KFt(),r=GFt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Je}}function QFt(e){return e.type===_b||e.type===uv||e.type===BF||e.type===UF}function i3e(){if(n3e(),Je>=Va)return{type:Fk,start:Je,end:Je};const e=Yt.charCodeAt(Je);return Bk(e)?VFt():e===40||e===41||e===59?FB():e===39||e===34?WFt():e===46?lm(Yt.charCodeAt(Je+1))?Xpe():FB():lm(e)?Xpe():FB()}function al(){const e=fi;return Je=e.end,fi=i3e(),Je=e.end,e}function s3e(){const e=Je;fi=i3e(),Je=e}function JFt(e){const t=new $d(wFt);return t.elements=e,t}function Qpe(e,t,n){const r=new $d(e==="||"||e==="&&"?CFt:EFt);return r.operator=e,r.left=t,r.right=n,r}function ZFt(e,t){const n=new $d(xFt);return n.callee=e,n.arguments=t,n}function e4t(e,t,n){const r=new $d(SFt);return r.test=e,r.consequent=t,r.alternate=n,r}function ZZ(e){const t=new $d(e3e);return t.name=e,t}function r2(e){const t=new $d(TFt);return t.value=e.value,t.raw=Yt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Jpe(e,t,n){const r=new $d(AFt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function t4t(e){const t=new $d(IFt);return t.properties=e,t}function Zpe(e,t,n){const r=new $d(kFt);return r.key=t,r.value=n,r.kind=e,r}function n4t(e,t){const n=new $d(RFt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Vr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(zF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Je,n.description=i,n}function VF(e){e.type===Fk&&Vr(e,MFt),e.type===a_&&Vr(e,NFt),e.type===jk&&Vr(e,PFt),e.type===_b&&Vr(e,DFt),e.type===uv&&Vr(e,OFt),Vr(e,jo,e.value)}function Ha(e){const t=al();(t.type!==tl||t.value!==e)&&VF(t)}function ji(e){return fi.type===tl&&fi.value===e}function jB(e){return fi.type===uv&&fi.value===e}function r4t(){const e=[];for(Je=fi.start,Ha("[");!ji("]");)ji(",")?(al(),e.push(null)):(e.push(wb()),ji("]")||Ha(","));return al(),JFt(e)}function eme(){Je=fi.start;const e=al();return e.type===jk||e.type===a_?(e.octal&&Vr(e,t3e),r2(e)):ZZ(e.value)}function i4t(){var e,t,n,r;if(Je=fi.start,e=fi,e.type===_b)return n=eme(),Ha(":"),r=wb(),Zpe("init",n,r);if(e.type===Fk||e.type===tl)VF(e);else return t=eme(),Ha(":"),r=wb(),Zpe("init",t,r)}function s4t(){var e=[],t,n,r,i={},s=String;for(Je=fi.start,Ha("{");!ji("}");)t=i4t(),t.key.type===e3e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Vr({},$Ft):i[r]=!0,e.push(t),ji("}")||Ha(",");return Ha("}"),t4t(e)}function o4t(){Ha("(");const e=eee();return Ha(")"),e}const a4t={if:1};function u4t(){var e,t,n;if(ji("("))return o4t();if(ji("["))return r4t();if(ji("{"))return s4t();if(e=fi.type,Je=fi.start,e===_b||a4t[fi.value])n=ZZ(al().value);else if(e===jk||e===a_)fi.octal&&Vr(fi,t3e),n=r2(al());else{if(e===uv)throw new Error(nI);e===BF?(t=al(),t.value=t.value==="true",n=r2(t)):e===UF?(t=al(),t.value=null,n=r2(t)):ji("/")||ji("/=")?(n=r2(XFt()),s3e()):VF(al())}return n}function l4t(){const e=[];if(Ha("("),!ji(")"))for(;Je<Va&&(e.push(wb()),!ji(")"));)Ha(",");return Ha(")"),e}function c4t(){Je=fi.start;const e=al();return QFt(e)||VF(e),ZZ(e.value)}function f4t(){return Ha("."),c4t()}function d4t(){Ha("[");const e=eee();return Ha("]"),e}function h4t(){var e,t,n;for(e=u4t();;)if(ji("."))n=f4t(),e=Jpe(".",e,n);else if(ji("("))t=l4t(),e=ZFt(e,t);else if(ji("["))n=d4t(),e=Jpe("[",e,n);else break;return e}function tme(){const e=h4t();if(fi.type===tl&&(ji("++")||ji("--")))throw new Error(nI);return e}function sO(){var e,t;if(fi.type!==tl&&fi.type!==uv)t=tme();else{if(ji("++")||ji("--"))throw new Error(nI);if(ji("+")||ji("-")||ji("~")||ji("!"))e=al(),t=sO(),t=n4t(e.value,t);else{if(jB("delete")||jB("void")||jB("typeof"))throw new Error(nI);t=tme()}}return t}function nme(e){let t=0;if(e.type!==tl&&e.type!==uv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function p4t(){var e,t,n,r,i,s,o,a,u,l;if(e=fi,u=sO(),r=fi,i=nme(r),i===0)return u;for(r.prec=i,al(),t=[e,fi],o=sO(),s=[u,r,o];(i=nme(fi))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Qpe(a,u,o),s.push(n);r=al(),r.prec=i,s.push(r),t.push(fi),n=sO(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Qpe(s[l-1].value,s[l-2],n),l-=2;return n}function wb(){var e,t,n;return e=p4t(),ji("?")&&(al(),t=wb(),Ha(":"),n=wb(),e=e4t(e,t,n)),e}function eee(){const e=wb();if(ji(","))throw new Error(nI);return e}function tee(e){Yt=e,Je=0,Va=Yt.length,fi=null,s3e();const t=eee();if(fi.type!==Fk)throw new Error("Unexpect token after expression.");return t}var o3e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function a3e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&et("Missing arguments to clamp function."),o.length>3&&et("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&et("Missing arguments to if function."),o.length>3&&et("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function m4t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function u3e(e){e=e||{};const t=e.allowed?Td(e.allowed):{},n=e.forbidden?Td(e.forbidden):{},r=e.constants||o3e,i=(e.functions||a3e)(f),s=e.globalvar,o=e.fieldvar,a=Yn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Dt(p))return p;const g=d[p.type];return g==null&&et("Unsupported type: "+p.type),g(p)}const d={Literal:p=>p.raw,Identifier:p=>{const g=p.name;return c>0?g:on(n,g)?et("Illegal identifier: "+g):on(r,g)?r[g]:on(t,g)?g:(u[g]=1,a(g))},MemberExpression:p=>{const g=!p.computed,y=f(p.object);g&&(c+=1);const b=f(p.property);return y===o&&(l[m4t(b)]=1),g&&(c-=1),y+(g?"."+b:"["+b+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&et("Illegal callee type: "+p.callee.type);const g=p.callee.name,y=p.arguments,b=on(i,g)&&i[g];return b||et("Unrecognized function: "+g),Yn(b)?b(y):b+"("+y.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const g=f(p.key);return c-=1,g+":"+f(p.value)}};function h(p){const g={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},g}return h.functions=i,h.constants=r,h}const rme=Symbol("vega_selection_getter");function l3e(e){return(!e.getter||!e.getter[rme])&&(e.getter=df(e.field),e.getter[rme]=!0),e.getter}const nee="intersect",ime="union",g4t="vlMulti",y4t="vlPoint",sme="or",v4t="and",hh="_vgsid_",iI=df(hh),b4t="E",_4t="R",w4t="R-E",E4t="R-LE",x4t="R-RE",r$="index:unit";function ome(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=l3e(a)(e),Y0(o)&&(o=Fa(o)),Y0(r[s])&&(r[s]=Fa(r[s])),nt(r[s])&&Y0(r[s][0])&&(r[s]=r[s].map(Fa)),a.type===b4t){if(nt(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===_4t){if(!Ww(o,r[s]))return!1}else if(a.type===x4t){if(!Ww(o,r[s],!0,!1))return!1}else if(a.type===w4t){if(!Ww(o,r[s],!1,!1))return!1}else if(a.type===E4t&&!Ww(o,r[s],!1,!0))return!1;return!0}function S4t(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[r$]&&r[r$].value:void 0,o=n===nee,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=ome(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=ome(t,l),o^h)return h;return a&&o}const c3e=oS(iI),T4t=c3e.left,C4t=c3e.right;function A4t(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[r$]&&r[r$].value:void 0,o=n===nee,a=iI(t),u=T4t(i,a);if(u===i.length||iI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(C4t(i,a)-u<s.size)return!1}return!0}function I4t(e,t){return e.map(n=>Gn(t.fields?{values:t.fields.map(r=>l3e(r)(n.datum))}:{[hh]:iI(n.datum)},t))}function k4t(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,g,y,b,_,E=s.length,C=0,x,T;C<E;++C)if(l=s[C],d=l.unit,c=l.fields,f=l.values,c&&f){for(x=0,T=c.length;x<T;++x)h=c[x],g=o[h.field]||(o[h.field]={}),y=g[d]||(g[d]=[]),u[h.field]=b=h.type.charAt(0),_=BB[`${b}_union`],g[d]=_(y,Pt(f[x]));n&&(y=a[d]||(a[d]=[]),y.push(Pt(f).reduce((A,k,N)=>(A[c[N].field]=k,A),{})))}else h=hh,p=iI(l),g=o[h]||(o[h]={}),y=g[d]||(g[d]=[]),y.push(p),n&&(y=a[d]||(a[d]=[]),y.push({[hh]:p}));if(t=t||ime,o[hh]?o[hh]=BB[`${hh}_${t}`](...Object.values(o[hh])):Object.keys(o).forEach(A=>{o[A]=Object.keys(o[A]).map(k=>o[A][k]).reduce((k,N)=>k===void 0?N:BB[`${u[A]}_${t}`](k,N))}),s=Object.keys(a),n&&s.length){const A=r?y4t:g4t;o[A]=t===ime?{[sme]:s.reduce((k,N)=>(k.push(...a[N]),k),[])}:{[v4t]:s.map(k=>({[sme]:a[k]}))}}return o}var BB={[`${hh}_union`]:jnt,[`${hh}_intersect`]:Lnt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Fa(t[0]),r=Fa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Fa(t[0]),r=Fa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const R4t=":",N4t="@";function ree(e,t,n,r){t[0].type!==bb&&et("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Sr(t).value,o="unit",a=N4t+o,u=R4t+i;s===nee&&!on(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),on(r,u)||(r[u]=n.getData(i).tuplesRef())}function f3e(e){const t=this.context.data[e];return t?t.values.value:[]}function P4t(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function D4t(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(hf).insert(t)),1}function O4t(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const Uk=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},M4t=Uk("format"),d3e=Uk("timeFormat"),$4t=Uk("utcFormat"),L4t=Uk("timeParse"),F4t=Uk("utcParse"),YP=new Date(2e3,0,1);function HF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(YP.setYear(2e3),YP.setMonth(e),YP.setDate(t),d3e.call(this,YP,n))}function j4t(e){return HF.call(this,e,1,"%B")}function B4t(e){return HF.call(this,e,1,"%b")}function U4t(e){return HF.call(this,0,2+e,"%A")}function z4t(e){return HF.call(this,0,2+e,"%a")}const V4t=":",H4t="@",fH="%",h3e="$";function iee(e,t,n,r){t[0].type!==bb&&et("First argument to data functions must be a string literal.");const i=t[0].value,s=V4t+i;if(!on(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function q4t(e,t,n,r){t[0].type!==bb&&et("First argument to indata must be a string literal."),t[1].type!==bb&&et("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=H4t+s;on(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Eu(e,t,n,r){if(t[0].type===bb)ame(n,r,t[0].value);else for(e in n.scales)ame(n,r,e)}function ame(e,t,n){const r=fH+n;if(!on(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Ip(e,t){if(Yn(e))return e;if(Dt(e)){const n=t.scales[e];return n&&yOt(n.value)?n.value:void 0}}function W4t(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Eu,n._range=Eu,n._scale=Eu;const r=i=>"_["+(i.type===bb?xt(fH+i.value):xt(fH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function see(e,t){return function(n,r,i){if(n){const s=Ip(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const G4t=see("area",Gat),Y4t=see("bounds",Qat),K4t=see("centroid",rut);function X4t(e,t){const n=Ip(e,(t||this).context);return n&&n.scale()}function Q4t(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function oee(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function J4t(){return oee(this.context.dataflow,"warn",arguments)}function Z4t(){return oee(this.context.dataflow,"info",arguments)}function e5t(){return oee(this.context.dataflow,"debug",arguments)}function UB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function dH(e){const t=ay(e),n=UB(t.r),r=UB(t.g),i=UB(t.b);return .2126*n+.7152*r+.0722*i}function t5t(e,t){const n=dH(e),r=dH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function n5t(){const e=[].slice.call(arguments);return e.unshift({}),Gn(...e)}function p3e(e,t){return e===t||e!==e&&t!==t?!0:nt(e)?nt(t)&&e.length===t.length?r5t(e,t):!1:Mt(e)&&Mt(t)?m3e(e,t):!1}function r5t(e,t){for(let n=0,r=e.length;n<r;++n)if(!p3e(e[n],t[n]))return!1;return!0}function m3e(e,t){for(const n in e)if(!p3e(e[n],t[n]))return!1;return!0}function ume(e){return t=>m3e(e,t)}function i5t(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?hf:nt(n)||pF(n)?n:ume(n),c.remove(f)),t&&c.insert(t),r&&(f=ume(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function s5t(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function o5t(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const lme={};function a5t(e,t){const n=lme[t]||(lme[t]=df(t));return nt(e)?e.map(n):n(e)}function aee(e){return nt(e)||ArrayBuffer.isView(e)?e:null}function uee(e){return aee(e)||(Dt(e)?e:null)}function u5t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return aee(e).join(...n)}function l5t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return uee(e).indexOf(...n)}function c5t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return uee(e).lastIndexOf(...n)}function f5t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return uee(e).slice(...n)}function d5t(e,t,n){return Yn(n)&&et("Function argument passed to replace."),String(e).replace(t,n)}function h5t(e){return aee(e).slice().reverse()}function p5t(e,t,n){return PJ(e||0,t||0,n||0)}function m5t(e,t){const n=Ip(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function g5t(e,t){const n=Ip(e,(t||this).context);return n?n.copy():void 0}function y5t(e,t){const n=Ip(e,(t||this).context);return n?n.domain():[]}function v5t(e,t,n){const r=Ip(e,(n||this).context);return r?nt(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function b5t(e,t){const n=Ip(e,(t||this).context);return n&&n.range?n.range():[]}function _5t(e,t,n){const r=Ip(e,(n||this).context);return r?r(t):void 0}function w5t(e,t,n,r,i){e=Ip(e,(i||this).context);const s=sDe(t,n);let o=e.domain(),a=o[0],u=Sr(o),l=Ga;return u-a?l=GPe(e,a,u):e=(e.interpolator?Wr("sequential")().interpolator(e.interpolator()):Wr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Sr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function E5t(e,t,n){const r=Ip(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function x5t(e){let t=null;return function(n){return n?JA(n,t=t||_x(e)):e}}const g3e=e=>e.data;function y3e(e,t){const n=f3e.call(t,e);return n.root&&n.root.lookup||{}}function S5t(e,t,n){const r=y3e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(g3e):void 0}function T5t(e,t){const n=y3e(e,this)[t];return n?n.ancestors().map(g3e):void 0}const v3e=()=>typeof window<"u"&&window||null;function C5t(){const e=v3e();return e?e.screen:{}}function A5t(){const e=v3e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function I5t(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function b3e(e,t,n){if(!e)return[];const[r,i]=e,s=new to().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return nOe(o,s,k5t(t))}function k5t(e){let t=null;if(e){const n=Pt(e.marktype),r=Pt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function R5t(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function N5t(e){return Pt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function P5t(e,t,n){const{x:r,y:i,mark:s}=n,o=new to().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),b3e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>D5t(u.x,u.y,t))}function D5t(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const sI={random(){return mf()},cumulativeNormal:bF,cumulativeLogNormal:JQ,cumulativeUniform:nJ,densityNormal:GQ,densityLogNormal:QQ,densityUniform:tJ,quantileNormal:_F,quantileLogNormal:ZQ,quantileUniform:rJ,sampleNormal:vF,sampleLogNormal:XQ,sampleUniform:eJ,isArray:nt,isBoolean:av,isDate:Y0,isDefined(e){return e!==void 0},isNumber:Or,isObject:Mt,isRegExp:rNe,isString:Dt,isTuple:pF,isValid(e){return e!=null&&e===e},toBoolean:NQ,toDate(e){return PQ(e)},toNumber:Fa,toString:DQ,indexof:l5t,join:u5t,lastindexof:c5t,replace:d5t,reverse:h5t,slice:f5t,flush:tNe,lerp:iNe,merge:n5t,pad:aNe,peek:Sr,pluck:a5t,span:wk,inrange:Ww,truncate:uNe,rgb:ay,lab:GO,hcl:YO,hsl:qO,luminance:dH,contrast:t5t,sequence:ll,format:M4t,utcFormat:$4t,utcParse:F4t,utcOffset:ENe,utcSequence:TNe,timeFormat:d3e,timeParse:L4t,timeOffset:wNe,timeSequence:SNe,timeUnitSpecifier:cNe,monthFormat:j4t,monthAbbrevFormat:B4t,dayFormat:U4t,dayAbbrevFormat:z4t,quarter:QRe,utcquarter:JRe,week:dNe,utcweek:mNe,dayofyear:fNe,utcdayofyear:pNe,warn:J4t,info:Z4t,debug:e5t,extent(e){return op(e)},inScope:Q4t,intersect:b3e,clampRange:ZRe,pinchDistance:s5t,pinchAngle:o5t,screen:C5t,containerSize:I5t,windowSize:A5t,bandspace:p5t,setdata:D4t,pathShape:x5t,panLinear:GRe,panLog:YRe,panPow:KRe,panSymlog:XRe,zoomLinear:TQ,zoomLog:CQ,zoomPow:$M,zoomSymlog:AQ,encode:O4t,modify:i5t,lassoAppend:R5t,lassoPath:N5t,intersectLasso:P5t},O5t=["view","item","group","xy","x","y"],M5t="event.vega.",_3e="this.",lee={},w3e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${xt(h3e+e)}]`,functions:$5t,constants:o3e,visitors:lee},hH=u3e(w3e);function $5t(e){const t=a3e(e);O5t.forEach(n=>t[n]=M5t+n);for(const n in sI)t[n]=_3e+n;return Gn(t,W4t(e,sI,lee)),t}function Bs(e,t,n){return arguments.length===1?sI[e]:(sI[e]=t,n&&(lee[e]=n),hH&&(hH.functions[e]=_3e+e),this)}Bs("bandwidth",m5t,Eu);Bs("copy",g5t,Eu);Bs("domain",y5t,Eu);Bs("range",b5t,Eu);Bs("invert",v5t,Eu);Bs("scale",_5t,Eu);Bs("gradient",w5t,Eu);Bs("geoArea",G4t,Eu);Bs("geoBounds",Y4t,Eu);Bs("geoCentroid",K4t,Eu);Bs("geoShape",E5t,Eu);Bs("geoScale",X4t,Eu);Bs("indata",P4t,q4t);Bs("data",f3e,iee);Bs("treePath",S5t,iee);Bs("treeAncestors",T5t,iee);Bs("vlSelectionTest",S4t,ree);Bs("vlSelectionIdTest",A4t,ree);Bs("vlSelectionResolve",k4t,ree);Bs("vlSelectionTuples",I4t);function up(e,t){const n={};let r;try{e=Dt(e)?e:xt(e)+"",r=tee(e)}catch{et("Expression parse error: "+e)}r.visit(s=>{if(s.type!==ZOe)return;const o=s.callee.name,a=w3e.visitors[o];a&&a(o,s.arguments,t,n)});const i=hH(r);return i.globals.forEach(s=>{const o=h3e+s;!on(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Gn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function L5t(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const F5t=Td(["rule"]),cme=Td(["group","image","rect"]);function j5t(e,t){let n="";return F5t[t]||(e.x2&&(e.x?(cme[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(cme[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function cee(e){return(e+"").toLowerCase()}function B5t(e){return cee(e)==="operator"}function U5t(e){return cee(e)==="collect"}function oC(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function z5t(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var V5t={operator:(e,t)=>oC(e,["_"],t.code),parameter:(e,t)=>oC(e,["datum","_"],t.code),event:(e,t)=>oC(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return oC(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+xt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=j5t(r,n),i+="return m;",oC(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(xt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),z5t(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function H5t(e){const t=this;B5t(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function q5t(e){const t=this;if(e.params){const n=t.get(e.id);n||et("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function W5t(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=nt(i)?i.map(s=>fme(s,n,t)):fme(i,n,t)}return t}function fme(e,t,n){if(!e||!Mt(e))return e;for(let r=0,i=dme.length,s;r<i;++r)if(s=dme[r],on(e,s.key))return s.parse(e,t,n);return e}var dme=[{key:"$ref",parse:G5t},{key:"$key",parse:K5t},{key:"$expr",parse:Y5t},{key:"$field",parse:X5t},{key:"$encode",parse:J5t},{key:"$compare",parse:Q5t},{key:"$context",parse:Z5t},{key:"$subflow",parse:ejt},{key:"$tupleid",parse:tjt}];function G5t(e,t){return t.get(e.$ref)||et("Operator not defined: "+e.$ref)}function Y5t(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Pl(t.parameterExpression(e.$expr),e.$fields))}function K5t(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=RQ(e.$key,e.$flat,t.expr.codegen))}function X5t(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=df(e.$field,e.$name,t.expr.codegen))}function Q5t(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Pt(e.$compare).map(i=>i&&i.$tupleid?rn:i);return t.fn[n]||(t.fn[n]=IQ(r,e.$order,t.expr.codegen))}function J5t(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Pl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function Z5t(e,t){return t}function ejt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function tjt(){return rn}function njt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&et("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function rjt(e){var t=this,n=Mt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||et("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const ijt={skip:!0};function sjt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function ojt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],ijt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(hf).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function E3e(e,t,n,r){return new x3e(e,t,n,r)}function x3e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||V5t,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function hme(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}x3e.prototype=hme.prototype={fork(){const e=new hme(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),U5t(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[cee(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:L5t,parseOperator:H5t,parseOperatorParameters:q5t,parseParameters:W5t,parseStream:njt,parseUpdate:rjt,getState:sjt,setState:ojt};function ajt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),S3e(t,e.description()))}function S3e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function ujt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const zB="default";function ljt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:zB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Dt(i)?i:i.user:zB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Dt(r)||(i=r.item,r=r.user),pH(e,r&&r!==zB?r:i||r),i},{cursor:t})}function pH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function i$(e,t){var n=e._runtime.data;return on(n,t)||et("Unrecognized data set: "+t),n[t]}function cjt(e,t){return arguments.length<2?i$(this,e).values.value:qF.call(this,e,s_().remove(hf).insert(t))}function qF(e,t){qNe(t)||et("Second argument to changes must be a changeset.");const n=i$(this,e);return n.modified=!0,this.pulse(n.input,t)}function fjt(e,t){return qF.call(this,e,s_().insert(t))}function djt(e,t){return qF.call(this,e,s_().remove(t))}function T3e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function C3e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function WF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function hjt(e){var t=WF(e),n=T3e(e),r=C3e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function pjt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=WF(e),o=t.changedTouches?t.changedTouches[0]:t,s=LF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=mjt(e,n,s),t}function mjt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Dt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Ya(e),item:Ya(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const pme="view",gjt="timer",yjt="window",vjt={trap:!1};function bjt(e){const t=Gn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{nt(r[s])&&(r[s]=Td(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function A3e(e,t,n,r){e._eventListeners.push({type:n,sources:Pt(t),handler:r})}function _jt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function KP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Mt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function wjt(e,t,n){var r=this,i=new yF(n),s=function(l,c){r.runAsync(null,()=>{e===pme&&_jt(r,t)&&l.preventDefault(),i.receive(pjt(r,l,c))})},o;if(e===gjt)KP(r,"timer",t)&&r.timer(s,t);else if(e===pme)KP(r,"view",t)&&r.addEventListener(t,s,vjt);else if(e===yjt?KP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&KP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);A3e(r,o,t,s)}return i}function mme(e){return e.item}function gme(e){return e.item.mark.source}function yme(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Ejt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",mme),gme,yme(e)),this.on(this.events("view","pointerout",mme),gme,yme(t)),this}function xjt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function sc(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Sjt="vega-bind",Tjt="vega-bind-name",Cjt="vega-bind-radio";function Ajt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=kQ(r.debounce,i.update))),(r.input==null&&r.element?Ijt:Rjt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function Ijt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),A3e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(kjt(i))}}function kjt(e){return typeof Event<"u"?new Event(e):{type:e}}function Rjt(e,t,n,r){const i=r.signal(n.signal),s=sc("div",{class:Sjt}),o=n.input==="radio"?s:s.appendChild(sc("label"));o.appendChild(sc("span",{class:Tjt},n.name||n.signal)),t.appendChild(s);let a=Njt;switch(n.input){case"checkbox":a=Pjt;break;case"select":a=Djt;break;case"radio":a=Ojt;break;case"range":a=Mjt;break}a(e,o,n,i)}function Njt(e,t,n,r){const i=sc("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Pjt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=sc("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function Djt(e,t,n,r){const i=sc("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};s$(o,r)&&(u.selected=!0),i.appendChild(sc("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(s$(n.options[a],o)){i.selectedIndex=a;return}}}function Ojt(e,t,n,r){const i=sc("span",{class:Cjt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};s$(o,r)&&(u.checked=!0);const l=sc("input",u);l.addEventListener("change",()=>e.update(o));const c=sc("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)s$(a[l].value,o)&&(a[l].checked=!0)}}function Mjt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||oy(s,i,100),a=sc("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=sc("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function s$(e,t){return e===t||e+""==t+""}function I3e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,T3e(e),C3e(e),WF(e),i,s).background(e.background())}function fee(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function $jt(e,t,n,r){const i=new r(e.loader(),fee(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,WF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Ljt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=FF(r);e=n._el=e?VB(n,e,!0):null,ajt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||Lk,a=e?s.renderer:s.headless;return n._renderer=a?I3e(n,n._renderer,e,a):null,n._handler=$jt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=VB(n,t,!0):e.appendChild(sc("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=VB(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Ajt(n,u.element||t,u)})),n}function VB(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const aC=e=>+e||0,Fjt=e=>({top:e,bottom:e,left:e,right:e});function vme(e){return Mt(e)?{top:aC(e.top),bottom:aC(e.bottom),left:aC(e.left),right:aC(e.right)}:Fjt(aC(e))}async function dee(e,t,n,r){const i=FF(t),s=i&&i.headless;return s||et("Unrecognized renderer type: "+t),await e.runAsync(),I3e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function jjt(e,t){e!==P0.Canvas&&e!==P0.SVG&&e!==P0.PNG&&et("Unrecognized image type: "+e);const n=await dee(this,e,t);return e===P0.SVG?Bjt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Bjt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Ujt(e,t){return(await dee(this,P0.Canvas,e,t)).canvas()}async function zjt(e){return(await dee(this,P0.SVG,e)).svg()}function Vjt(e,t,n){return E3e(e,gx,sI,n).parse(t)}function Hjt(e){var t=this._runtime.scales;return on(t,e)||et("Unrecognized scale or projection: "+e),t[e].value}var k3e="width",R3e="height",hee="padding",bme={skip:!0};function N3e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===hee?r.left+r.right:0)}function P3e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===hee?r.top+r.bottom:0)}function qjt(e){var t=e._signals,n=t[k3e],r=t[R3e],i=t[hee];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=N3e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=P3e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Wjt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(k3e,n,bme),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(R3e,r,bme),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Gjt(e){return this._runtime.getState(e||{data:Yjt,signals:Kjt,recurse:!0})}function Yjt(e,t){return t.modified&&nt(t.input.value)&&!e.startsWith("_:vega:_")}function Kjt(e,t){return!(e==="parent"||t instanceof gx.proxy)}function Xjt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Qjt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(cst(n,t))}function Jjt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Zjt(r))}function Zjt(e){return e==null?"":nt(e)?D3e(e):Mt(e)&&!Y0(e)?e8t(e):e+""}function e8t(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(nt(n)?D3e(n):O3e(n))}).join(`
`)}function D3e(e){return"["+e.map(O3e).join(", ")+"]"}function O3e(e){return nt(e)?"[]":Mt(e)&&!Y0(e)?"{}":e}function t8t(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function M3e(e,t){const n=this;if(t=t||{},_E.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Gn({},e.locale,t.locale);n.locale(MNe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||P0.Canvas,n._scenegraph=new kDe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Jjt,n._redraw=!0,n._handler=new Lk().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=bjt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Vjt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Gn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=N3e(n,n._width),n._viewHeight=P3e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,qjt(n),ujt(n),ljt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function XP(e,t){return on(e._signals,t)?e._signals[t]:et("Unrecognized signal name: "+xt(t))}function $3e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function _me(e,t,n,r){let i=$3e(n,r);return i||(i=fee(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function wme(e,t,n){const r=$3e(t,n);return r&&t._targets.remove(r),e}At(M3e,_E,{async evaluate(e,t,n){if(await _E.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,hjt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&WD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&S3e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=XP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",vme(e)):vme(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(FF(e)||et("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(_E.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(XP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Wjt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=fee(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return _me(this,e,XP(this,e),t)},removeSignalListener(e,t){return wme(this,XP(this,e),t)},addDataListener(e,t){return _me(this,e,i$(this,e).values,t)},removeDataListener(e,t){return wme(this,i$(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=pH(this,null);this._globalCursor=!!e,t&&pH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Qjt,events:wjt,finalize:xjt,hover:Ejt,data:cjt,change:qF,insert:fjt,remove:djt,scale:Hjt,initialize:Ljt,toImageURL:jjt,toCanvas:Ujt,toSVG:zjt,getState:Gjt,setState:Xjt,_watchPixelRatio:t8t});const n8t="view",o$="[",a$="]",L3e="{",F3e="}",r8t=":",j3e=",",i8t="@",s8t=">",o8t=/[[\]{}]/,a8t={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let B3e,U3e;function lv(e,t,n){return B3e=t||n8t,U3e=n||a8t,z3e(e.trim()).map(mH)}function u8t(e){return U3e[e]}function B2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function z3e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=B2(e,i,j3e,o$+L3e,a$+F3e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function mH(e){return e[0]==="["?l8t(e):c8t(e)}function l8t(e){const t=e.length;let n=1,r;if(n=B2(e,n,a$,o$,a$),n===t)throw"Empty between selector: "+e;if(r=z3e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==s8t)throw"Expected '>' after between selector: "+e;r=r.map(mH);const i=mH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function c8t(e){const t={source:B3e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===F3e){if(a=e.lastIndexOf(L3e),a>=0){try{r=f8t(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===i8t&&(i=++a),u=B2(e,a,r8t),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=B2(e,a,o$),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=B2(e,a,a$),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==o$)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||o8t.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):u8t(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function f8t(e){const t=e.split(j3e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function d8t(e){return Mt(e)?e:{type:e||"pad"}}const uC=e=>+e||0,h8t=e=>({top:e,bottom:e,left:e,right:e});function p8t(e){return Mt(e)?e.signal?e:{top:uC(e.top),bottom:uC(e.bottom),left:uC(e.left),right:uC(e.right)}:h8t(uC(e))}const Bo=e=>Mt(e)&&!nt(e)?Gn({},e):{value:e};function Eme(e,t,n,r){return n!=null?(Mt(n)&&!nt(n)||nt(n)&&n.length&&Mt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ga(e,t,n){for(const r in t)Eme(e,r,t[r]);for(const r in n)Eme(e,r,n[r],"update")}function US(e,t,n){for(const r in t)n&&on(n,r)||(e[r]=Gn(e[r]||{},t[r]));return e}function Mw(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const pee="mark",mee="frame",gee="scope",m8t="axis",g8t="axis-domain",y8t="axis-grid",v8t="axis-label",b8t="axis-tick",_8t="axis-title",w8t="legend",E8t="legend-band",x8t="legend-entry",S8t="legend-gradient",V3e="legend-label",T8t="legend-symbol",C8t="legend-title",A8t="title",I8t="title-text",k8t="title-subtitle";function R8t(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!Mw(u,e)&&HB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===mee?i.group:n===pee?Gn({},i.mark,i[t]):null;for(u in c)l=Mw(u,e)||(u==="fill"||u==="stroke")&&(Mw("fill",e)||Mw("stroke",e)),l||HB(s,u,c[u]);Pt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Mw(h,e)||HB(s,h,d[h])}),e=Gn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Gn(o,e.enter),a&&(e.update=Gn(a,e.update)),e}function HB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const H3e=e=>Dt(e)?xt(e):e.signal?`(${e.signal})`:q3e(e);function GF(e){if(e.gradient!=null)return P8t(e);let t=e.signal?`(${e.signal})`:e.color?N8t(e.color):e.field!=null?q3e(e.field):e.value!==void 0?xt(e.value):void 0;return e.scale!=null&&(t=D8t(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${oO(e.exponent)})`),e.mult!=null&&(t+=`*${oO(e.mult)}`),e.offset!=null&&(t+=`+${oO(e.offset)}`),e.round&&(t=`round(${t})`),t}const QP=(e,t,n,r)=>`(${e}(${[t,n,r].map(GF).join(",")})+'')`;function N8t(e){return e.c?QP("hcl",e.h,e.c,e.l):e.h||e.s?QP("hsl",e.h,e.s,e.l):e.l||e.a?QP("lab",e.l,e.a,e.b):e.r||e.g||e.b?QP("rgb",e.r,e.g,e.b):null}function P8t(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:xt(n));for(;t.length&&Sr(t)==null;)t.pop();return t.unshift(H3e(e.gradient)),`gradient(${t.join(",")})`}function oO(e){return Mt(e)?"("+GF(e)+")":e}function q3e(e){return W3e(Mt(e)?e:{datum:e})}function W3e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):et("Invalid field reference: "+xt(e));return e.signal||(r=Dt(r)?Tp(r).map(xt).join("]["):W3e(r)),t+"["+r+"]"}function D8t(e,t){const n=H3e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+oO(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function O8t(e){let t="";return e.forEach(n=>{const r=GF(n);t+=n.test?`(${n.test})?${r}:`:r}),Sr(t)===":"&&(t+="null"),t}function G3e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=R8t(e,t,n,r,i.config);for(const a in e)o[a]=M8t(e[a],t,s,i);return s}function M8t(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=L8t($8t(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function $8t(e){return nt(e)?O8t(e):GF(e)}function L8t(e,t,n,r){const i=up(e,t);return i.$fields.forEach(s=>r[s]=1),Gn(n,i.$params),i.$expr}const F8t="outer",j8t=["value","update","init","react","bind"];function xme(e,t){et(e+' for "outer" push: '+xt(t))}function Y3e(e,t){const n=e.name;if(e.push===F8t)t.signals[n]||xme("No prior signal definition",n),j8t.forEach(r=>{e[r]!==void 0&&xme("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function gH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function YF(e,t,n,r){return new gH(e,t,n,r)}function u$(e,t){return YF("operator",e,t)}function nn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function oI(e,t){return t?{$field:e,$name:t}:{$field:e}}const yH=oI("key");function Sme(e,t){return{$compare:e,$order:t}}function B8t(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const U8t="ascending",z8t="descending";function V8t(e){return Mt(e)?(e.order===z8t?"-":"+")+KF(e.op,e.field):""}function KF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const yee="scope",vH="view";function vo(e){return e&&e.signal}function H8t(e){return e&&e.expr}function aO(e){if(vo(e))return!0;if(Mt(e)){for(const t in e)if(aO(e[t]))return!0}return!1}function Kf(e,t){return e??t}function H1(e){return e&&e.signal||e}const Tme="timer";function aI(e,t){return(e.merge?W8t:e.stream?G8t:e.type?Y8t:et("Invalid stream specification: "+xt(e)))(e,t)}function q8t(e){return e===yee?vH:e||vH}function W8t(e,t){const n=e.merge.map(i=>aI(i,t)),r=vee({merge:n},e,t);return t.addStream(r).id}function G8t(e,t){const n=aI(e.stream,t),r=vee({stream:n},e,t);return t.addStream(r).id}function Y8t(e,t){let n;e.type===Tme?(n=t.event(Tme,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(q8t(e.source),e.type);const r=vee({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function vee(e,t,n){let r=t.between;return r&&(r.length!==2&&et('Stream "between" parameter must have 2 entries: '+xt(t)),e.between=[aI(r[0],n),aI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(K8t(t.marktype,t.markname,t.markrole)),t.source===yee&&r.push("inScope(event.item)"),r.length&&(e.filter=up("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function K8t(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const X8t={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Q8t(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||et("Signal update missing events specification."),Dt(s)&&(s=lv(s,t.isSubscope()?yee:vH)),s=Pt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Z8t(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&et("Signal encode and update are mutually exclusive."),o="encode(item(),"+xt(r)+")"),i.update=Dt(o)?up(o,t):o.expr!=null?up(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:X8t,$params:{$value:t.signalRef(o.signal)}}:et("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(Gn(J8t(u,t),i)))}function J8t(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):aI(e,t)}}function Z8t(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function e9t(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?et("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=up(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Q8t(i,t,n.id))}const _i=e=>(t,n,r)=>YF(e,n,t||void 0,r),K3e=_i("aggregate"),t9t=_i("axisticks"),X3e=_i("bound"),Ld=_i("collect"),Cme=_i("compare"),n9t=_i("datajoin"),Q3e=_i("encode"),r9t=_i("expression"),i9t=_i("facet"),s9t=_i("field"),o9t=_i("key"),a9t=_i("legendentries"),u9t=_i("load"),l9t=_i("mark"),c9t=_i("multiextent"),f9t=_i("multivalues"),d9t=_i("overlap"),h9t=_i("params"),J3e=_i("prefacet"),p9t=_i("projection"),m9t=_i("proxy"),g9t=_i("relay"),Z3e=_i("render"),y9t=_i("scale"),u_=_i("sieve"),v9t=_i("sortitems"),eMe=_i("viewlayout"),b9t=_i("values");let _9t=0;const tMe={min:"min",max:"max",count:"sum"};function w9t(e,t){const n=e.type||"linear";UPe(n)||et("Unrecognized scale type: "+xt(n)),t.addScale(e.name,{type:n,domain:void 0})}function E9t(e,t){const n=t.getScale(e.name).params;let r;n.domain=nMe(e.domain,e,t),e.range!=null&&(n.range=iMe(e,t,n)),e.interpolate!=null&&P9t(e.interpolate,n),e.nice!=null&&(n.nice=N9t(e.nice,t)),e.bins!=null&&(n.bins=R9t(e.bins,t));for(r in e)on(n,r)||r==="name"||(n[r]=nf(e[r],t))}function nf(e,t){return Mt(e)?e.signal?t.signalRef(e.signal):et("Unsupported object: "+xt(e)):e}function uO(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>nf(n,t))}function XF(e){et("Can not find data set: "+xt(e))}function nMe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&et("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(nt(e)?x9t:e.fields?T9t:S9t)(e,t,n)}function x9t(e,t,n){return e.map(r=>nf(r,n))}function S9t(e,t,n){const r=n.getData(e.data);return r||XF(e.data),bx(t.type)?r.valuesRef(n,e.field,rMe(e.sort,!1)):HPe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function T9t(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Dt(o)?{data:r,field:o}:nt(o)||o.signal?C9t(o,n):o,s.push(o),s),[]);return(bx(t.type)?A9t:HPe(t.type)?I9t:k9t)(e,n,i)}function C9t(e,t){const n="_:vega:_"+_9t++,r=Ld({});if(nt(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+xt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,u_({})]),{data:n,field:"data"}}function A9t(e,t,n){const r=rMe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||XF(l.data),c.countsRef(t,l.field,r)}),a={groupby:yH,pulse:o};r&&(i=r.op||"count",s=r.field?KF(i,r.field):"count",a.ops=[tMe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(K3e(a));const u=t.add(Ld({pulse:nn(i)}));return s=t.add(b9t({field:yH,sort:t.sortRef(r),pulse:nn(u)})),nn(s)}function rMe(e,t){return e&&(!e.field&&!e.op?Mt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?et("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!tMe[e.op]&&et("Multiple domain scales can not be sorted using "+e.op)),e}function I9t(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||XF(i.data),s.domainRef(t,i.field)});return nn(t.add(f9t({values:r})))}function k9t(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||XF(i.data),s.extentRef(t,i.field)});return nn(t.add(c9t({extents:r})))}function R9t(e,t){return e.signal||nt(e)?uO(e,t):t.objectProperty(e)}function N9t(e,t){return e.signal?t.signalRef(e.signal):Mt(e)?{interval:nf(e.interval),step:nf(e.step)}:nf(e)}function P9t(e,t){t.interpolate=nf(e.type||e),e.gamma!=null&&(t.interpolateGamma=nf(e.gamma))}function iMe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Dt(i)){if(r&&on(r,i))return e=Gn({},e,{range:r[i]}),iMe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=bx(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:et("Unrecognized scale range value: "+xt(i))}else if(i.scheme){n.scheme=nt(i.scheme)?uO(i.scheme,t):nf(i.scheme,t),i.extent&&(n.schemeExtent=uO(i.extent,t)),i.count&&(n.schemeCount=nf(i.count,t));return}else if(i.step){n.rangeStep=nf(i.step,t);return}else{if(bx(e.type)&&!nt(i))return nMe(i,e,t);nt(i)||et("Unsupported range type: "+xt(i))}return i.map(s=>(nt(s)?uO:nf)(s,t))}function D9t(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=bH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=bH(n[i],i,t));t.addProjection(e.name,r)}function bH(e,t,n){return nt(e)?e.map(r=>bH(r,t,n)):Mt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:et("Unsupported parameter object: "+xt(e)):e}const Fd="top",zS="left",VS="right",Ny="bottom",sMe="center",O9t="vertical",M9t="start",$9t="middle",L9t="end",_H="index",bee="label",F9t="offset",Sx="perc",j9t="perc2",sf="value",zk="guide-label",_ee="guide-title",B9t="group-title",U9t="group-subtitle",Ame="symbol",lO="gradient",wH="discrete",EH="size",z9t="shape",V9t="fill",H9t="stroke",q9t="strokeWidth",W9t="strokeDash",G9t="opacity",wee=[EH,z9t,V9t,H9t,q9t,W9t,G9t],Vk={name:1,style:1,interactive:1},Rr={value:0},of={value:1},QF="group",oMe="rect",Eee="rule",Y9t="symbol",l_="text";function uI(e){return e.type=QF,e.interactive=e.interactive||!1,e}function Dl(e,t){const n=(r,i)=>Kf(e[r],Kf(t[r],i));return n.isVertical=r=>O9t===Kf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Kf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Kf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Kf(e.columns,Kf(t.columns,+n.isVertical(!0))),n}function aMe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function K9t(e,t,n){const r=t.config.style[n];return r&&r[e]}function JF(e,t,n){return`item.anchor === '${M9t}' ? ${e} : item.anchor === '${L9t}' ? ${t} : ${n}`}const xee=JF(xt(zS),xt(VS),xt(sMe));function X9t(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Mt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function uMe(e,t){return t?e?Mt(e)?Object.assign({},e,{offset:uMe(e.offset,t)}):{value:e,offset:t}:t:e}function _c(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=US(e.encode,t,Vk)):e.interactive=!1,e}function Q9t(e,t,n,r){const i=Dl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Rr,x:Rr,y:Rr,width:Bo(f),height:Bo(d)},update:Gn({},u,{opacity:of,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Rr}};return ga(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),_c({type:oMe,role:S8t,encode:h},r)}function J9t(e,t,n,r,i){const s=Dl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Rr,fill:{scale:t,field:sf}};p[l]={signal:h+"datum."+Sx,mult:u},p[c]=Rr,p[f]={signal:h+"datum."+j9t,mult:u},p[d]=Bo(a);const g={enter:p,update:Gn({},p,{opacity:of}),exit:{opacity:Rr}};return ga(g,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),_c({type:oMe,role:E8t,key:sf,from:i,encode:g},r)}const Z9t=`datum.${Sx}<=0?"${zS}":datum.${Sx}>=1?"${VS}":"${sMe}"`,eBt=`datum.${Sx}<=0?"${Ny}":datum.${Sx}>=1?"${Fd}":"${$9t}"`;function Ime(e,t,n,r){const i=Dl(e,t),s=i.isVertical(),o=Bo(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Rr},update:c={opacity:of,text:{field:bee}},exit:{opacity:Rr}};return ga(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Kf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:eBt},f="y",d="x",h="1-"):(l.align=c.align={signal:Z9t},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+Sx,mult:a},l[d]=c[d]=o,o.offset=Kf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+_H}:void 0,_c({type:l_,role:V3e,style:zk,key:sf,from:r,encode:p,overlap:u},n)}function tBt(e,t,n,r,i){const s=Dl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${F9t} : datum.${EH}`,h=l?Bo(l):{field:EH},p=`datum.${_H}`,g=`max(1, ${i})`;let y,b,_,E,C;h.mult=.5,y={enter:b={opacity:Rr,x:{signal:d,mult:.5,offset:c},y:h},update:_={opacity:of,x:b.x,y:b.y},exit:{opacity:Rr}};let x=null,T=null;e.fill||(x=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),ga(y,{fill:s("symbolFillColor",x),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),wee.forEach(P=>{e[P]&&(_[P]=b[P]={scale:e[P],field:sf})});const A=_c({type:Y9t,role:T8t,key:sf,from:f,clip:l?!0:void 0,encode:y},n.symbols),k=Bo(c);k.offset=s("labelOffset"),y={enter:b={opacity:Rr,x:{signal:d,offset:k},y:h},update:_={opacity:of,text:{field:bee},x:b.x,y:b.y},exit:{opacity:Rr}},ga(y,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const N=_c({type:l_,role:V3e,style:zk,key:sf,from:f,encode:y},n.labels);return y={enter:{noBound:{value:!l},width:Rr,height:l?Bo(l):Rr,opacity:Rr},exit:{opacity:Rr},update:_={opacity:of,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(E=`ceil(item.mark.items.length / ${g})`,_.row.signal=`${p}%${E}`,_.column.signal=`floor(${p} / ${E})`,C={field:["row",p]}):(_.row.signal=`floor(${p} / ${g})`,_.column.signal=`${p} % ${g}`,C={field:p}),_.column.signal=`(${i})?${_.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:_H}},uI({role:gee,from:r,encode:US(y,o,Vk),marks:[A,N],name:u,interactive:a,sort:C})}function nBt(e,t){const n=Dl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const See='item.orient === "left"',Tee='item.orient === "right"',ZF=`(${See} || ${Tee})`,rBt=`datum.vgrad && ${ZF}`,iBt=JF('"top"','"bottom"','"middle"'),sBt=JF('"right"','"left"','"center"'),oBt=`datum.vgrad && ${Tee} ? (${sBt}) : (${ZF} && !(datum.vgrad && ${See})) ? "left" : ${xee}`,aBt=`item._anchor || (${ZF} ? "middle" : "start")`,uBt=`${rBt} ? (${See} ? -90 : 90) : 0`,lBt=`${ZF} ? (datum.vgrad ? (${Tee} ? "bottom" : "top") : ${iBt}) : "top"`;function cBt(e,t,n,r){const i=Dl(e,t),s={enter:{opacity:Rr},update:{opacity:of,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Rr}};return ga(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:aBt},angle:{signal:uBt},align:{signal:oBt},baseline:{signal:lBt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),_c({type:l_,role:C8t,style:_ee,from:r,encode:s},n)}function fBt(e,t){let n;return Mt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+kme(e.path)+")":e.sphere&&(n="geoShape("+kme(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function kme(e){return Mt(e)&&e.signal?e.signal:xt(e)}function lMe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===QF?gee:t||pee}function dBt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||lMe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function hBt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Cee(e,t){const n=YNe(e.type);n||et("Unrecognized transform type: "+xt(e.type));const r=YF(n.type.toLowerCase(),null,cMe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function cMe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=pBt(o,t,n)}return r}function pBt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return mBt(e,t,n);if(i===void 0){e.required&&et("Missing required "+xt(t.type)+" parameter: "+xt(e.name));return}else{if(r==="param")return gBt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!vo(i)?i.map(s=>Rme(e,s,n)):Rme(e,i,n)}function Rme(e,t,n){const r=e.type;if(vo(t))return Pme(r)?et("Expression references can not be signals."):qB(r)?n.fieldRef(t):Dme(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||qB(r);return i&&yBt(t)?n.exprRef(t.expr,t.as):i&&vBt(t)?oI(t.field,t.as):Pme(r)?up(t,n):bBt(r)?nn(n.getData(t).values):qB(r)?oI(t):Dme(r)?n.compareRef(t):t}}function mBt(e,t,n){return Dt(t.from)||et('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function gBt(e,t,n){const r=t[e.name];return e.array?(nt(r)||et("Expected an array of sub-parameters. Instead: "+xt(r)),r.map(i=>Nme(e,i,n))):Nme(e,r,n)}function Nme(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||et("Unsupported parameter: "+xt(t));const s=Gn(cMe(i,t,n),i.key);return nn(n.add(h9t(s)))}const yBt=e=>e&&e.expr,vBt=e=>e&&e.field,bBt=e=>e==="data",Pme=e=>e==="expr",qB=e=>e==="field",Dme=e=>e==="compare";function _Bt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||et("Only group marks can be faceted."),r.field!=null?o=a=cO(r,n):(e.data?a=nn(n.getData(e.data).aggregate):(s=Cee(Gn({type:"aggregate",groupby:Pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=cO(r,n),o=a=nn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=nn(n.add(Ld(null,[{}]))),o||(o=cO(e,n)),{key:i,pulse:o,parent:a}}function cO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:nn(t.getData(e.data).output)}function Eb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Eb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=nn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new Eb(e,s,i,r,o)};function fMe(e){return Dt(e)?e:null}function Ome(e,t,n){const r=KF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function lC(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=V8t(s);let l=fMe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:yH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:nn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(YF(r,void 0,d)),o&&(t.index[i]=f),c=nn(f),l!=null&&(a[l]=c)}return c}Eb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=fMe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Ome(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:nn(r.output)},n&&n.field&&Ome(e,u,n),a=e.add(K3e(u)),o=e.add(Ld({pulse:nn(a)})),o={agg:a,ref:nn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return nn(this.values)},extentRef(e,t){return lC(e,this,"extent","extent",t,!1)},domainRef(e,t){return lC(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return lC(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return lC(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return lC(e,this,"indata","tupleindex",t,!0,!0)}};function wBt(e,t,n){const r=e.from.facet,i=r.name,s=cO(r,t);let o;r.name||et("Facet must have a name: "+xt(r)),r.data||et("Facet must reference a data set: "+xt(r)),r.field?o=t.add(J3e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(i9t({key:t.keyRef(r.groupby),group:nn(t.proxy(n.parent)),pulse:s})):et("Facet must specify groupby or field: "+xt(r));const a=t.fork(),u=a.add(Ld()),l=a.add(u_({pulse:nn(u)}));a.addData(i,new Eb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function EBt(e,t,n){const r=t.add(J3e({pulse:n.pulse})),i=t.fork();i.add(u_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function dMe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(u$()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=up(l,t);u.update=c.$expr,u.params=c.$params}function e4(e,t){const n=lMe(e),r=e.type===QF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===gee||n===mee,a,u,l,c,f,d,h;const p=n===pee||o||i,g=_Bt(e.from,r,t);u=t.add(n9t({key:g.key||(e.key?oI(e.key):void 0),pulse:g.pulse,clean:!r}));const y=nn(u);u=l=t.add(Ld({pulse:y})),u=t.add(l9t({markdef:dBt(e),interactive:hBt(e.interactive,t),clip:fBt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:nn(u)}));const b=nn(u);u=c=t.add(Q3e(G3e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:b}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const A=Cee(T,t),k=A.metadata;(k.generates||k.changes)&&et("Mark transforms should not generate new data."),k.nomod||(c.params.mod=!0),A.params.pulse=nn(u),t.add(u=A)}),e.sort&&(u=t.add(v9t({sort:t.compareRef(e.sort),pulse:nn(u)})));const _=nn(u);(i||o)&&(o=t.add(eMe({layout:t.objectProperty(e.layout),legends:t.legends,mark:b,pulse:_})),d=nn(o));const E=t.add(X3e({mark:b,pulse:d||_}));h=nn(E),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(_,d||h,y),i?wBt(e,t,g):p?EBt(e,t,g):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(E))),s&&(h=xBt(s,h,t));const C=t.add(Z3e({pulse:h})),x=t.add(u_({pulse:nn(C)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new Eb(t,l,C,x)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&et("Marks only support modify triggers."),dMe(T,t,f)}))}function xBt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:vo(s)?n.signalRef(s.signal):s,method:vo(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=vo(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return nn(n.add(d9t(o)))}function SBt(e,t){const n=t.config.legend,r=e.encode||{},i=Dl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;wee.forEach(E=>e[E]?(l[E]=e[E],c=c||e[E]):0),c||et("Missing valid scale for legend.");const p=TBt(e,t.scaleType(c)),g={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},y=nn(t.add(Ld(null,[g]))),b={enter:{x:{value:0},y:{value:0}}},_=nn(t.add(a9t(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===lO?(h=[Q9t(e,c,n,r.gradient),Ime(e,n,r.labels,_)],d.count=d.count||t.signalRef(`max(2,2*floor((${H1(i.gradientLength())})/100))`)):p===wH?h=[J9t(e,c,n,r.gradient,_),Ime(e,n,r.labels,_)]:(f=nBt(e,n),h=[tBt(e,n,r,_,H1(f.columns))],d.size=IBt(e,t,h[0].marks)),h=[uI({role:x8t,from:y,encode:b,marks:h,layout:f,interactive:a})],g.title&&h.push(cBt(e,n,r.title,y)),e4(uI({role:w8t,from:y,encode:US(ABt(i,e,n),s,Vk),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function TBt(e,t){let n=e.type||Ame;return!e.type&&CBt(e)===1&&(e.fill||e.stroke)&&(n=LJ(t)?lO:$V(t)?wH:Ame),n!==lO?n:$V(t)?wH:lO}function CBt(e){return wee.reduce((t,n)=>t+(e[n]?1:0),0)}function ABt(e,t,n){const r={enter:{},update:{}};return ga(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function IBt(e,t,n){const r=H1(Mme("size",e,n)),i=H1(Mme("strokeWidth",e,n)),s=H1(kBt(n[1].encode,t,zk));return up(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Mme(e,t,n){return t[e]?`scale("${t[e]}",datum)`:aMe(e,n[0].encode)}function kBt(e,t,n){return aMe("fontSize",e)||K9t("fontSize",t,n)}const RBt=`item.orient==="${zS}"?-90:item.orient==="${VS}"?90:0`;function NBt(e,t){e=Dt(e)?{text:e}:e;const n=Dl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=nn(t.add(Ld(null,[l])));return u.push(OBt(e,n,PBt(e),c)),e.subtitle&&u.push(MBt(e,n,r.subtitle,c)),e4(uI({role:A8t,from:c,encode:DBt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function PBt(e){const t=e.encode;return t&&t.title||Gn({name:e.name,interactive:e.interactive,style:e.style},t)}function DBt(e,t){const n={enter:{},update:{}};return ga(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:xee},angle:{signal:RBt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),US(n,t,Vk)}function OBt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ga(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),_c({type:l_,role:I8t,style:B9t,from:r,encode:o},n)}function MBt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ga(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),_c({type:l_,role:k8t,style:U9t,from:r,encode:o},n)}function $Bt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Cee(r,t))}),e.on&&e.on.forEach(r=>{dMe(r,t,e.name)}),t.addDataPipeline(e.name,LBt(e,t,n))}function LBt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?vo(e.values)||aO(e.format)?(r.push($me(t,e)),r.push(i=jv())):r.push(i=jv({$ingest:e.values,$format:e.format})):e.url?aO(e.url)||aO(e.format)?(r.push($me(t,e)),r.push(i=jv())):r.push(i=jv({$request:e.url,$format:e.format})):e.source&&(i=a=Pt(e.source).map(d=>nn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=jv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=g9t({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,jv())),i||r.push(jv()),r.push(u_({})),r}function jv(e){const t=Ld({},e);return t.metadata={source:!0},t}function $me(e,t){return u9t({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const hMe=e=>e===Ny||e===Fd,t4=(e,t,n)=>vo(e)?UBt(e.signal,t,n):e===zS||e===Fd?t:n,Uo=(e,t,n)=>vo(e)?jBt(e.signal,t,n):hMe(e)?t:n,yd=(e,t,n)=>vo(e)?BBt(e.signal,t,n):hMe(e)?n:t,pMe=(e,t,n)=>vo(e)?zBt(e.signal,t,n):e===Fd?{value:t}:{value:n},FBt=(e,t,n)=>vo(e)?VBt(e.signal,t,n):e===VS?{value:t}:{value:n},jBt=(e,t,n)=>mMe(`${e} === '${Fd}' || ${e} === '${Ny}'`,t,n),BBt=(e,t,n)=>mMe(`${e} !== '${Fd}' && ${e} !== '${Ny}'`,t,n),UBt=(e,t,n)=>Aee(`${e} === '${zS}' || ${e} === '${Fd}'`,t,n),zBt=(e,t,n)=>Aee(`${e} === '${Fd}'`,t,n),VBt=(e,t,n)=>Aee(`${e} === '${VS}'`,t,n),mMe=(e,t,n)=>(t=t!=null?Bo(t):t,n=n!=null?Bo(n):n,Lme(t)&&Lme(n)?(t=t?t.signal||xt(t.value):null,n=n?n.signal||xt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Gn({test:e},t)].concat(n||[])),Lme=e=>e==null||Object.keys(e).length===1,Aee=(e,t,n)=>({signal:`${e} ? (${Kw(t)}) : (${Kw(n)})`}),HBt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${zS}' ? (${Kw(r)}) : `:"")+(n!=null?`${e} === '${Ny}' ? (${Kw(n)}) : `:"")+(i!=null?`${e} === '${VS}' ? (${Kw(i)}) : `:"")+(t!=null?`${e} === '${Fd}' ? (${Kw(t)}) : `:"")+"(null)"}),Kw=e=>vo(e)?e.signal:e==null?null:xt(e),qBt=(e,t)=>t===0?0:vo(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},wE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function gw(e,t,n,r){let i;if(t&&on(t,e))return t[e];if(on(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[_ee][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[zk][i]}return null}function Fme(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function WBt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(vo(o)){const f=Fme([n.axisX,n.axisY]),d=Fme([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=Uo(o,gw(l,n.axisX,i,r),gw(l,n.axisY,i,r));u={};for(l of d)u[l]=HBt(o.signal,gw(l,n.axisTop,i,r),gw(l,n.axisBottom,i,r),gw(l,n.axisLeft,i,r),gw(l,n.axisRight,i,r))}else a=o===Fd||o===Ny?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Gn({},i,a,u,s):i}function GBt(e,t,n,r){const i=Dl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Rr},update:a={opacity:of},exit:{opacity:Rr}};ga(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=jme(e,0),c=jme(e,1);return o.x=a.x=Uo(s,l,Rr),o.x2=a.x2=Uo(s,c),o.y=a.y=yd(s,l,Rr),o.y2=a.y2=yd(s,c),_c({type:Eee,role:g8t,from:r,encode:u},n)}function jme(e,t){return{scale:e.scale,range:t}}function YBt(e,t,n,r,i){const s=Dl(e,t),o=e.orient,a=e.gridScale,u=t4(o,1,-1),l=KBt(e.offset,u);let c,f,d;const h={enter:c={opacity:Rr},update:d={opacity:of},exit:f={opacity:Rr}};ga(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:sf,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},g=Uo(o,{signal:"height"},{signal:"width"}),y=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},b=a?{scale:a,range:1,mult:u,offset:l}:Gn(g,{mult:u,offset:l});return c.x=d.x=Uo(o,p,y),c.y=d.y=yd(o,p,y),c.x2=d.x2=yd(o,b),c.y2=d.y2=Uo(o,b),f.x=Uo(o,p),f.y=yd(o,p),_c({type:Eee,role:y8t,key:sf,from:r,encode:h},n)}function KBt(e,t){if(t!==1)if(!Mt(e))e=vo(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Gn({},e);for(;n.mult!=null;)if(Mt(n.mult))n=n.mult=Gn({},n.mult);else return n.mult=vo(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function XBt(e,t,n,r,i,s){const o=Dl(e,t),a=e.orient,u=t4(a,-1,1);let l,c,f;const d={enter:l={opacity:Rr},update:f={opacity:of},exit:c={opacity:Rr}};ga(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Bo(i);h.mult=u;const p={scale:e.scale,field:sf,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=Uo(a,Rr,p),f.y2=l.y2=Uo(a,h),c.x=Uo(a,p),f.x=l.x=yd(a,Rr,p),f.x2=l.x2=yd(a,h),c.y=yd(a,p),_c({type:Eee,role:b8t,key:sf,from:r,encode:d},n)}function WB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function QBt(e,t,n,r,i,s){const o=Dl(e,t),a=e.orient,u=e.scale,l=t4(a,-1,1),c=H1(o("labelFlush")),f=H1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,g;const y=Bo(i);y.mult=l,y.offset=Bo(o("labelPadding")||0),y.offset.mult=l;const b={scale:u,field:sf,band:.5,offset:uMe(s.offset,o("labelOffset"))},_=Uo(a,p?WB(u,c,'"left"','"right"','"center"'):{value:"center"},FBt(a,"left","right")),E=Uo(a,pMe(a,"bottom","top"),p?WB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),C=WB(u,c,`-(${f})`,f,0);p=p&&f;const x={opacity:Rr,x:Uo(a,b,y),y:yd(a,b,y)},T={enter:x,update:g={opacity:of,text:{field:bee},x:x.x,y:x.y,align:_,baseline:E},exit:{opacity:Rr,x:x.x,y:x.y}};ga(T,{dx:!d&&p?Uo(a,C):null,dy:!h&&p?yd(a,C):null}),ga(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const A=o("labelBound");let k=o("labelOverlap");return k=k||A?{separation:o("labelSeparation"),method:k,order:"datum.index",bound:A?{scale:u,orient:a,tolerance:A}:null}:void 0,g.align!==_&&(g.align=wE(g.align,_)),g.baseline!==E&&(g.baseline=wE(g.baseline,E)),_c({type:l_,role:v8t,style:zk,key:sf,from:r,encode:T,overlap:k},n)}function JBt(e,t,n,r){const i=Dl(e,t),s=e.orient,o=t4(s,-1,1);let a,u;const l={enter:a={opacity:Rr,anchor:Bo(i("titleAnchor",null)),align:{signal:xee}},update:u=Gn({},a,{opacity:of,text:Bo(e.title)}),exit:{opacity:Rr}},c={signal:`lerp(range("${e.scale}"), ${JF(0,1,.5)})`};return u.x=Uo(s,c),u.y=yd(s,c),a.angle=Uo(s,Rr,qBt(o,90)),a.baseline=Uo(s,pMe(s,Ny,Fd),{value:Ny}),u.angle=a.angle,u.baseline=a.baseline,ga(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),ZBt(i,s,l,n),l.update.align=wE(l.update.align,a.align),l.update.angle=wE(l.update.angle,a.angle),l.update.baseline=wE(l.update.baseline,a.baseline),_c({type:l_,role:_8t,style:_ee,from:r,encode:l},n)}function ZBt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=wE(Bo(a),n.update[u]),!1):!Mw(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Bo(o):Uo(t,Bo(o),Bo(s))}function eUt(e,t){const n=WBt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Dl(e,n),l=X9t(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=nn(t.add(Ld({},[c]))),d=nn(t.add(t9t({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(YBt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(XBt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(QBt(e,n,r.labels,d,p,l))),c.domain&&h.push(GBt(e,n,r.domain,f)),c.title&&h.push(JBt(e,n,r.title,f)),e4(uI({role:m8t,from:f,encode:US(tUt(u,e),i,Vk),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function tUt(e,t){const n={enter:{},update:{}};return ga(n,{orient:e("orient"),offset:e("offset")||0,position:Kf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function gMe(e,t,n){const r=Pt(e.signals),i=Pt(e.scales);return n||r.forEach(s=>Y3e(s,t)),Pt(e.projections).forEach(s=>D9t(s,t)),i.forEach(s=>w9t(s,t)),Pt(e.data).forEach(s=>$Bt(s,t)),i.forEach(s=>E9t(s,t)),(n||r).forEach(s=>e9t(s,t)),Pt(e.axes).forEach(s=>eUt(s,t)),Pt(e.marks).forEach(s=>e4(s,t)),Pt(e.legends).forEach(s=>SBt(s,t)),e.title&&NBt(e.title,t),t.parseLambdas(),t}const nUt=e=>US({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function rUt(e,t){const n=t.config,r=nn(t.root=t.add(u$())),i=iUt(e,n);i.forEach(l=>Y3e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Ld()),o=t.add(Q3e(G3e(nUt(e.encode),QF,mee,e.style,t,{pulse:nn(s)}))),a=t.add(eMe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:nn(o)}));t.operators.pop(),t.pushState(nn(o),nn(a),null),gMe(e,t,i),t.operators.push(a);let u=t.add(X3e({mark:r,pulse:nn(a)}));return u=t.add(Z3e({pulse:nn(u)})),u=t.add(u_({pulse:nn(u)})),t.addData("root",new Eb(t,s,s,u)),t}function cC(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function iUt(e,t){const n=o=>Kf(e[o],t[o]),r=[cC("background",n("background")),cC("autosize",d8t(n("autosize"))),cC("padding",p8t(n("padding"))),cC("width",n("width")||0),cC("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Pt(e.signals).forEach(o=>{on(i,o.name)?o=Gn(i[o.name],o):r.push(o),s[o.name]=o}),Pt(t.signals).forEach(o=>{!on(s,o.name)&&!on(i,o.name)&&r.push(o)}),r}function yMe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Bme(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}yMe.prototype=Bme.prototype={parse(e){return gMe(e,this)},fork(){return new Bme(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof gH?nn(e):e;return this.add(m9t({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(nn(this.add(u_({pulse:e})))),this._parent.push(t),this._lookup.push(n?nn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Sr(this._parent)},encode(){return Sr(this._encode)},lookup(){return Sr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Dt(e))return oI(e,t);e.signal||et("Unsupported field reference: "+xt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=nn(this.add(s9t(i)))}return r},compareRef(e){let t=!1;const n=s=>vo(s)?(t=!0,this.signalRef(s.signal)):H8t(s)?(t=!0,this.exprRef(s.expr)):s,r=Pt(e.field).map(n),i=Pt(e.order).map(n);return t?nn(this.add(Cme({fields:r,orders:i}))):Sme(r,i)},keyRef(e,t){let n=!1;const r=s=>vo(s)?(n=!0,nn(i[s.signal])):s,i=this.signals;return e=Pt(e).map(r),n?nn(this.add(o9t({fields:e,flat:t}))):B8t(e,t)},sortRef(e){if(!e)return e;const t=KF(e.op,e.field),n=e.order||U8t;return n.signal?nn(this.add(Cme({fields:t,orders:this.signalRef(n.signal)}))):Sme(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return on(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&et("Duplicate signal name: "+xt(e));const n=t instanceof gH?t:this.add(u$(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||et("Unrecognized signal name: "+xt(e)),this.signals[e]},signalRef(e){return this.signals[e]?nn(this.signals[e]):(on(this.lambdas,e)||(this.lambdas[e]=this.add(u$(null))),nn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=up(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Mt(e)?e:this.signalRef(e.signal||Iee(e))},exprRef(e,t){const n={expr:up(e,this)};return t&&(n.expr.$name=t),nn(this.add(r9t(n)))},addBinding(e,t){this.bindings||et("Nested signals do not support binding: "+xt(e)),this.bindings.push(Gn({signal:e},t))},addScaleProj(e,t){on(this.scales,e)&&et("Duplicate scale or projection name: "+xt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,y9t(t))},addProjection(e,t){this.addScaleProj(e,p9t(t))},getScale(e){return this.scales[e]||et("Unrecognized scale name: "+xt(e)),this.scales[e]},scaleRef(e){return nn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return on(this.data,e)&&et("Duplicate data set name: "+xt(e)),this.data[e]=t},getData(e){return this.data[e]||et("Undefined data set name: "+xt(e)),this.data[e]},addDataPipeline(e,t){return on(this.data,e)&&et("Duplicate data set name: "+xt(e)),this.addData(e,Eb.fromEntries(this,t))}};function Iee(e){return(nt(e)?sUt:oUt)(e)}function sUt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Mt(i)?i.signal||Iee(i):xt(i))}return n+"]"}function oUt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+xt(r)+":"+(Mt(i)?i.signal||Iee(i):xt(i));return t+"}"}function aUt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function uUt(e,t,n){return Mt(e)||et("Input Vega specification must be an object."),t=DS(aUt(),t,e.config),rUt(e,new yMe(t,n)).toRuntime()}var lUt="5.29.0";Gn(gx,uOt,X$t,ILt,s6t,d6t,j6t,v6t,U6t,q6t,tFt,uFt);const cUt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:to,CanvasHandler:Lk,CanvasRenderer:XM,DATE:Al,DAY:La,DAYOFYEAR:ap,Dataflow:_E,Debug:zRe,Error:EQ,EventStream:yF,Gradient:sDe,GroupItem:RF,HOURS:yc,Handler:uZ,HybridHandler:XDe,HybridRenderer:GV,Info:URe,Item:kF,MILLISECONDS:Cd,MINUTES:vc,MONTH:za,Marks:bc,MultiPulse:zQ,None:BRe,Operator:Ei,Parameters:gF,Pulse:K0,QUARTER:Cl,RenderType:P0,Renderer:$k,ResourceLoader:dDe,SECONDS:pf,SVGHandler:LDe,SVGRenderer:pZ,SVGStringRenderer:KDe,Scenegraph:kDe,TIME_UNITS:OQ,Transform:Ye,View:M3e,WEEK:po,Warn:xQ,YEAR:ha,accessor:Pl,accessorFields:Ua,accessorName:Es,array:Pt,ascending:cF,bandwidthNRD:WQ,bin:QNe,bootstrapCI:JNe,boundClip:oOe,boundContext:Pk,boundItem:zV,boundMark:TDe,boundStroke:Cg,changeset:s_,clampRange:ZRe,codegenExpression:u3e,compare:IQ,constant:Ya,cumulativeLogNormal:JQ,cumulativeNormal:bF,cumulativeUniform:nJ,dayofyear:fNe,debounce:kQ,defaultLocale:LQ,definition:YNe,densityLogNormal:QQ,densityNormal:GQ,densityUniform:tJ,domChild:ho,domClear:Xc,domCreate:R0,domFind:aZ,dotbin:ZNe,error:et,expressionFunction:Bs,extend:Gn,extent:op,extentIndex:eNe,falsy:o0,fastmap:MS,field:df,flush:tNe,font:MF,fontFamily:Mk,fontSize:Cp,format:qD,formatLocale:LM,formats:BQ,hasOwnProperty:on,id:_k,identity:Ga,inferType:LNe,inferTypes:FNe,ingest:ei,inherits:At,inrange:Ww,interpolate:FJ,interpolateColors:AF,interpolateRange:qPe,intersect:nOe,intersectBoxLine:Gw,intersectPath:WJ,intersectPoint:GJ,intersectRule:pDe,isArray:nt,isBoolean:av,isDate:Y0,isFunction:Yn,isIterable:nNe,isNumber:Or,isObject:Mt,isRegExp:rNe,isString:Dt,isTuple:pF,key:RQ,lerp:iNe,lineHeight:Iy,loader:dF,locale:MNe,logger:SQ,lruCache:sNe,markup:hZ,merge:oNe,mergeConfig:DS,multiLineOffset:iZ,one:PS,pad:aNe,panLinear:GRe,panLog:YRe,panPow:KRe,panSymlog:XRe,parse:uUt,parseExpression:tee,parseSelector:lv,path:BL,pathCurves:VJ,pathEqual:aOe,pathParse:_x,pathRectangle:uDe,pathRender:JA,pathSymbols:aDe,pathTrail:lDe,peek:Sr,point:LF,projection:CZ,quantileLogNormal:ZQ,quantileNormal:_F,quantileUniform:rJ,quantiles:HQ,quantizeInterpolator:WPe,quarter:QRe,quartiles:qQ,get random(){return mf},randomInteger:dDt,randomKDE:KQ,randomLCG:fDt,randomLogNormal:tPe,randomMixture:nPe,randomNormal:YQ,randomUniform:rPe,read:UNe,regressionConstant:iJ,regressionExp:sPe,regressionLinear:sJ,regressionLoess:uPe,regressionLog:iPe,regressionPoly:aPe,regressionPow:oPe,regressionQuad:oJ,renderModule:FF,repeat:WC,resetDefaultLocale:uPt,resetSVGClipId:fDe,resetSVGDefIds:p$t,responseType:BNe,runtimeContext:E3e,sampleCurve:EF,sampleLogNormal:XQ,sampleNormal:vF,sampleUniform:eJ,scale:Wr,sceneEqual:mZ,sceneFromJSON:ADe,scenePickVisit:zM,sceneToJSON:CDe,sceneVisit:Ad,sceneZOrder:YJ,scheme:jJ,serializeXML:qDe,setHybridRendererOptions:c$t,setRandom:lDt,span:wk,splitAccessPath:Tp,stringValue:xt,textMetrics:ic,timeBin:INe,timeFloor:vNe,timeFormatLocale:KA,timeInterval:$S,timeOffset:wNe,timeSequence:SNe,timeUnitSpecifier:cNe,timeUnits:MQ,toBoolean:NQ,toDate:PQ,toNumber:Fa,toSet:Td,toString:DQ,transform:KNe,transforms:gx,truncate:uNe,truthy:hf,tupleid:rn,typeParsers:DV,utcFloor:bNe,utcInterval:LS,utcOffset:ENe,utcSequence:TNe,utcdayofyear:pNe,utcquarter:JRe,utcweek:mNe,version:lUt,visitArray:h0,week:dNe,writeConfig:OS,zero:S0,zoomLinear:TQ,zoomLog:CQ,zoomPow:$M,zoomSymlog:AQ},Symbol.toStringTag,{value:"Module"}));function fUt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var dUt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},hUt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},pUt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const mUt=Array.prototype.slice,Bv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,mUt.call(t,1))},gUt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var yUt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:gUt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Bv("join",arguments)},indexof:function(){return Bv("indexOf",arguments)},lastindexof:function(){return Bv("lastIndexOf",arguments)},slice:function(){return Bv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Bv("substring",arguments,String)},split:function(){return Bv("split",arguments,String)},replace:function(){return Bv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const vUt=["view","item","group","xy","x","y"],xH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&xH.add(setImmediate);const bUt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:dUt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),xH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||yUt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>hUt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>pUt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,xH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function fC(e,t,n,r,i,s){const o=a=>bUt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,vUt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var _Ut={operator(e,t){const n=t.ast,r=e.functions;return i=>fC(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>fC(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>fC(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return fC(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=fC(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&fUt(o,r,s),l}}};const wUt="vega-lite",EUt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',xUt="5.18.1",SUt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],TUt="https://vega.github.io/vega-lite/",CUt="Vega-Lite is a concise high-level language for interactive visualization.",AUt=["vega","chart","visualization"],IUt="build/vega-lite.js",kUt="build/vega-lite.min.js",RUt="build/vega-lite.min.js",NUt="build/src/index",PUt="build/src/index.d.ts",DUt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},OUt=["bin","build","src","vega-lite*","tsconfig.json"],MUt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},$Ut={type:"git",url:"https://github.com/vega/vega-lite.git"},LUt="BSD-3-Clause",FUt={url:"https://github.com/vega/vega-lite/issues"},jUt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},BUt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},UUt={vega:"^5.24.0"},zUt={node:">=18"},VUt="yarn@1.22.19",HUt={name:wUt,author:EUt,version:xUt,collaborators:SUt,homepage:TUt,description:CUt,keywords:AUt,main:IUt,unpkg:kUt,jsdelivr:RUt,module:NUt,types:PUt,bin:DUt,files:OUt,scripts:MUt,repository:$Ut,license:LUt,bugs:FUt,devDependencies:jUt,dependencies:BUt,peerDependencies:UUt,engines:zUt,packageManager:VUt};function kee(e){return!!e.or}function Ree(e){return!!e.and}function Nee(e){return!!e.not}function fO(e,t){if(Nee(e))fO(e.not,t);else if(Ree(e))for(const n of e.and)fO(n,t);else if(kee(e))for(const n of e.or)fO(n,t);else t(e)}function EE(e,t){return Nee(e)?{not:EE(e.not,t)}:Ree(e)?{and:e.and.map(n=>EE(n,t))}:kee(e)?{or:e.or.map(n=>EE(n,t))}:t(e)}const An=structuredClone;function vMe(e){throw new Error(e)}function Tx(e,t){const n={};for(const r of t)on(e,r)&&(n[r]=e[r]);return n}function yl(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>yi(e)).join(",")})`};function mr(e){if(Or(e))return e;const t=Dt(e)?e:yi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function SH(e){return e===!1||e===null}function gr(e,t){return e.includes(t)}function xb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Pee(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function bMe(e,...t){for(const n of t)qUt(e,n??{});return e}function qUt(e,t){for(const n of ht(t))OS(e,n,t[n],!0)}function Nh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function WUt(e,t){const n=ht(e),r=ht(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function _Me(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Dee(e,t){for(const n of e)if(t.has(n))return!0;return!1}function TH(e){const t=new Set;for(const n of e){const i=Tp(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Oee(e,t){return e===void 0||t===void 0?!0:Dee(TH(e),TH(t))}function gi(e){return ht(e).length===0}const ht=Object.keys,pa=Object.values,Py=Object.entries;function lI(e){return e===!0||e===!1}function ns(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function U2(e,t){return Nee(e)?`!(${U2(e.not,t)})`:Ree(e)?`(${e.and.map(n=>U2(n,t)).join(") && (")})`:kee(e)?`(${e.or.map(n=>U2(n,t)).join(") || (")})`:t(e)}function l$(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&l$(e[n],t)&&delete e[n],gi(e)}function Hk(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Mee(e,t="datum"){const n=Tp(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(xt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function wMe(e,t="datum"){return`${t}[${xt(Tp(e).join("."))}]`}function GUt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function gf(e){return`${Tp(e).map(GUt).join("\\.")}`}function Sb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function HS(e){return`${Tp(e).join(".")}`}function Cx(e){return e?Tp(e).length:0}function Ms(...e){for(const t of e)if(t!==void 0)return t}let EMe=42;function xMe(e){const t=++EMe;return e?String(e)+t:t}function YUt(){EMe=42}function SMe(e){return TMe(e)?e:`__${e}`}function TMe(e){return e.startsWith("__")}function cI(e){if(e!==void 0)return(e%360+360)%360}function n4(e){return Or(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Ume=Object.getPrototypeOf(structuredClone({}));function nc(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!nc(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!nc(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Ume.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Ume.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!nc(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function yi(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const Mm="row",$m="column",r4="facet",rs="x",Yo="y",jd="x2",kp="y2",cv="xOffset",qS="yOffset",Bd="radius",Ig="radius2",Af="theta",kg="theta2",Ud="latitude",zd="longitude",Vd="latitude2",yf="longitude2",Il="color",Rp="fill",Np="stroke",kl="shape",Rg="size",c_="angle",Ng="opacity",fv="fillOpacity",dv="strokeOpacity",hv="strokeWidth",pv="strokeDash",qk="text",Ax="order",Wk="detail",i4="key",Tb="tooltip",s4="href",o4="url",a4="description",KUt={x:1,y:1,x2:1,y2:1},CMe={theta:1,theta2:1,radius:1,radius2:1};function AMe(e){return e in CMe}const $ee={longitude:1,longitude2:1,latitude:1,latitude2:1};function IMe(e){switch(e){case Ud:return"y";case Vd:return"y2";case zd:return"x";case yf:return"x2"}}function kMe(e){return e in $ee}const XUt=ht($ee),Lee={...KUt,...CMe,...$ee,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function xE(e){return e===Il||e===Rp||e===Np}const RMe={row:1,column:1,facet:1},rf=ht(RMe),Fee={...Lee,...RMe},QUt=ht(Fee),{order:OZt,detail:MZt,tooltip:$Zt,...JUt}=Fee,{row:LZt,column:FZt,facet:jZt,...ZUt}=JUt;function e7t(e){return!!ZUt[e]}function NMe(e){return!!Fee[e]}const t7t=[jd,kp,Vd,yf,kg,Ig];function PMe(e){return f_(e)!==e}function f_(e){switch(e){case jd:return rs;case kp:return Yo;case Vd:return Ud;case yf:return zd;case kg:return Af;case Ig:return Bd}return e}function Dy(e){if(AMe(e))switch(e){case Af:return"startAngle";case kg:return"endAngle";case Bd:return"outerRadius";case Ig:return"innerRadius"}return e}function Pp(e){switch(e){case rs:return jd;case Yo:return kp;case Ud:return Vd;case zd:return yf;case Af:return kg;case Bd:return Ig}}function Rl(e){switch(e){case rs:case jd:return"width";case Yo:case kp:return"height"}}function DMe(e){switch(e){case rs:return"xOffset";case Yo:return"yOffset";case jd:return"x2Offset";case kp:return"y2Offset";case Af:return"thetaOffset";case Bd:return"radiusOffset";case kg:return"theta2Offset";case Ig:return"radius2Offset"}}function jee(e){switch(e){case rs:return"xOffset";case Yo:return"yOffset"}}function n7t(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const r7t=ht(Lee),{x:BZt,y:UZt,x2:zZt,y2:VZt,xOffset:HZt,yOffset:qZt,latitude:WZt,longitude:GZt,latitude2:YZt,longitude2:KZt,theta:XZt,theta2:QZt,radius:JZt,radius2:ZZt,...Bee}=Lee,i7t=ht(Bee),Uee={x:1,y:1},Dp=ht(Uee);function $s(e){return e in Uee}const zee={theta:1,radius:1},s7t=ht(zee);function u4(e){return e==="width"?rs:Yo}const OMe={xOffset:1,yOffset:1};function Gk(e){return e in OMe}const{text:een,tooltip:ten,href:nen,url:ren,description:ien,detail:sen,key:oen,order:aen,...MMe}=Bee,o7t=ht(MMe);function a7t(e){return!!Bee[e]}function u7t(e){switch(e){case Il:case Rp:case Np:case Rg:case kl:case Ng:case hv:case pv:return!0;case fv:case dv:case c_:return!1}}const $Me={...Uee,...zee,...OMe,...MMe},l4=ht($Me);function Pg(e){return!!$Me[e]}function l7t(e,t){return f7t(e)[t]}const LMe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:uen,...c7t}=LMe;function f7t(e){switch(e){case Il:case Rp:case Np:case a4:case Wk:case i4:case Tb:case s4:case Ax:case Ng:case fv:case dv:case hv:case r4:case Mm:case $m:return LMe;case rs:case Yo:case cv:case qS:case Ud:case zd:return c7t;case jd:case kp:case Vd:case yf:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Rg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case pv:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case kl:return{point:"always",geoshape:"always"};case qk:return{text:"always"};case c_:return{point:"always",square:"always",text:"always"};case o4:return{image:"always"};case Af:return{text:"always",arc:"always"};case Bd:return{text:"always",arc:"always"};case kg:case Ig:return{arc:"always"}}}function GB(e){switch(e){case rs:case Yo:case Af:case Bd:case cv:case qS:case Rg:case c_:case hv:case Ng:case fv:case dv:case jd:case kp:case kg:case Ig:return;case r4:case Mm:case $m:case kl:case pv:case qk:case Tb:case s4:case o4:case a4:return"discrete";case Il:case Rp:case Np:return"flexible";case Ud:case zd:case Vd:case yf:case Wk:case i4:case Ax:return}}const d7t={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},h7t={count:1,min:1,max:1};function ag(e){return!!e&&!!e.argmin}function mv(e){return!!e&&!!e.argmax}function Vee(e){return Dt(e)&&!!d7t[e]}const p7t=new Set(["count","valid","missing","distinct"]);function FMe(e){return Dt(e)&&p7t.has(e)}function m7t(e){return Dt(e)&&gr(["min","max"],e)}const g7t=new Set(["count","sum","distinct","valid","missing"]),y7t=new Set(["mean","average","median","q1","q3","min","max"]);function jMe(e){return av(e)&&(e=w4(e,void 0)),"bin"+ht(e).map(t=>c4(e[t])?ns(`_${t}_${Py(e[t])}`):ns(`_${t}_${e[t]}`)).join("")}function Oi(e){return e===!0||d_(e)&&!e.binned}function oa(e){return e==="binned"||d_(e)&&e.binned===!0}function d_(e){return Mt(e)}function c4(e){return e==null?void 0:e.param}function zme(e){switch(e){case Mm:case $m:case Rg:case Il:case Rp:case Np:case hv:case Ng:case fv:case dv:case kl:return 6;case pv:return 4;default:return 10}}function Yk(e){return!!(e!=null&&e.expr)}function sl(e){const t=ht(e||{}),n={};for(const r of t)n[r]=Kl(e[r]);return n}function BMe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...g}=e,y={...g,...a?{fill:a}:{}},b={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},_={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},E=Tx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:y,subtitleMarkConfig:E,nonMarkTitleProperties:b,subtitle:_}}function g0(e){return Dt(e)||nt(e)&&Dt(e[0])}function Xt(e){return!!(e!=null&&e.signal)}function gv(e){return!!e.step}function v7t(e){return nt(e)?!1:"fields"in e&&!("data"in e)}function b7t(e){return nt(e)?!1:"fields"in e&&"data"in e}function Im(e){return nt(e)?!1:"field"in e&&"data"in e}const _7t={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},w7t=ht(_7t),E7t={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},CH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function UMe(e){const t=nt(e.condition)?e.condition.map(Vme):Vme(e.condition);return{...Kl(e),condition:t}}function Kl(e){if(Yk(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Vme(e){if(Yk(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Bi(e){if(Yk(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Xt(e)?e:e!==void 0?{value:e}:void 0}function x7t(e){return Xt(e)?e.signal:xt(e)}function Hme(e){return Xt(e)?e.signal:xt(e.value)}function ld(e){return Xt(e)?e.signal:e==null?null:xt(e)}function S7t(e,t,n){for(const r of n){const i=ug(r,t.markDef,t.config);i!==void 0&&(e[r]=Bi(i))}return e}function zMe(e){return[].concat(e.type,e.style??[])}function Zr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:ug(e,t,n,r)}function ug(e,t,n,{vgChannel:r}={}){return Ms(r?c$(e,t,n.style):void 0,c$(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function c$(e,t,n){return VMe(e,zMe(t),n)}function VMe(e,t,n){t=Pt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function HMe(e,t){return Pt(e).reduce((n,r)=>(n.field.push(Ct(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function qMe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(nc(i,r))return;n.push(r)}),n}function WMe(e,t){return nc(e,t)||!t?e:e?[...Pt(e),...Pt(t)].join(", "):t}function GMe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((g0(n)||Xt(n))&&(g0(r)||Xt(r)))return{explicit:e.explicit,value:WMe(n,r)};if(g0(n)||Xt(n))return{explicit:e.explicit,value:n};if(g0(r)||Xt(r))return{explicit:e.explicit,value:r};if(!g0(n)&&!Xt(n)&&!g0(r)&&!Xt(r))return{explicit:e.explicit,value:qMe(n,r)};throw new Error("It should never reach here")}function Hee(e){return`Invalid specification ${yi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const T7t='Autosize "fit" only works for single views and layered views.';function qme(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Wme(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Gme(e){return e?`Dropping "fit-${e}" because spec has discrete ${Rl(e)}.`:'Dropping "fit" because spec has discrete size.'}function qee(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Yme(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function C7t(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function A7t(e){return`The "nearest" transform is not supported for ${e} marks.`}function YMe(e){return`Selection not supported for ${e} yet.`}function I7t(e){return`Cannot find a selection named "${e}".`}const k7t="Scale bindings are currently only supported for scales with unbinned, continuous domains.",R7t="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",N7t="Legend bindings are only supported for selections over an individual field or encoding channel.";function P7t(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function D7t(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const O7t="The same selection must be used to override scale domains in a layered view.",M7t='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function $7t(e){return`Unknown repeated value "${e}".`}function Kme(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const L7t="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function F7t(e){return`Unrecognized parse "${e}".`}function Xme(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const j7t="Attempt to add the same child twice.";function B7t(e){return`Ignoring an invalid transform: ${yi(e)}.`}const U7t='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Qme(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function z7t(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${yi(t)} is overridden by a child projection ${yi(n)}.`}const V7t="Arc marks uses theta channel rather than angle, replacing angle with theta.";function H7t(e){return`${e}Offset dropped because ${e} is continuous`}function q7t(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${yi(n)}}.`}function KMe(e){return`Invalid field type "${e}".`}function W7t(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function G7t(e){return`Invalid aggregation operator "${e}".`}function XMe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Y7t(e){return`Position range does not support relative band size for ${e}.`}function AH(e,t){return`Dropping ${yi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const K7t="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function f4(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function X7t(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Q7t(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function J7t(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Z7t(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function YB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function ezt(e){return`The ${e} for range marks cannot be an expression`}function tzt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function nzt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function rzt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function izt(e){return`Cannot use the relative band size with ${e} scale.`}function szt(e){return`Using unaggregated domain with raw field has no effect (${yi(e)}).`}function ozt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function azt(e){return`Unaggregated domain is currently unsupported for log scale (${yi(e)}).`}function uzt(e){return`Cannot apply size to non-oriented mark "${e}".`}function lzt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function czt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function QMe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function JMe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function fzt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${yi(n)} and ${yi(r)}). Using ${yi(n)}.`}function dzt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${yi(n)} and ${yi(r)}). Using the union of the two domains.`}function hzt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function pzt(e){return`Dropping sort property ${yi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Jme="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",mzt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",gzt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",yzt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function vzt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function bzt(e){return`Stack is applied to a non-linear scale (${e}).`}function _zt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function f$(e,t){return`Invalid ${e}: ${yi(t)}.`}function wzt(e){return`Dropping day from datetime ${yi(e)} as day cannot be combined with other units.`}function Ezt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function xzt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Szt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Zme(e){return`1D error band does not support ${e}.`}function ZMe(e){return`Channel ${e} is required for "binned" bin.`}function Tzt(e){return`Channel ${e} should not be used with "binned" bin.`}function Czt(e){return`Domain for ${e} is required for threshold scale.`}const e$e=SQ(xQ);let Ix=e$e;function Azt(e){return Ix=e,Ix}function Izt(){return Ix=e$e,Ix}function vt(...e){Ix.warn(...e)}function kzt(...e){Ix.debug(...e)}function h_(e){if(e&&Mt(e)){for(const t of Gee)if(t in e)return!0}return!1}const t$e=["january","february","march","april","may","june","july","august","september","october","november","december"],Rzt=t$e.map(e=>e.substr(0,3)),n$e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Nzt=n$e.map(e=>e.substr(0,3));function Pzt(e){if(n4(e)&&(e=+e),Or(e))return e>4&&vt(f$("quarter",e)),e-1;throw new Error(f$("quarter",e))}function Dzt(e){if(n4(e)&&(e=+e),Or(e))return e-1;{const t=e.toLowerCase(),n=t$e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Rzt.indexOf(r);if(i!==-1)return i;throw new Error(f$("month",e))}}function Ozt(e){if(n4(e)&&(e=+e),Or(e))return e%7;{const t=e.toLowerCase(),n=n$e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Nzt.indexOf(r);if(i!==-1)return i;throw new Error(f$("day",e))}}function Wee(e,t){const n=[];if(t&&e.day!==void 0&&ht(e).length>1&&(vt(wzt(e)),e=An(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Dzt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Pzt(e.quarter):e.quarter;n.push(Or(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?Ozt(e.day):e.day;n.push(Or(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Cb(e){const n=Wee(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Mzt(e){const n=Wee(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function $zt(e){const t=Wee(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const r$e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Gee=ht(r$e);function Lzt(e){return!!r$e[e]}function p_(e){return Mt(e)?e.binned:i$e(e)}function i$e(e){return e&&e.startsWith("binned")}function Yee(e){return e.startsWith("utc")}function Fzt(e){return e.substring(3)}const jzt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function d4(e){return Gee.filter(t=>o$e(e,t))}function s$e(e){const t=d4(e);return t[t.length-1]}function o$e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Bzt(e,t,{end:n}={end:!1}){const r=Mee(t),i=Yee(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Gee)o$e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),Mzt(a)}function a$e(e){if(!e)return;const t=d4(e);return`timeUnitSpecifier(${yi(t)}, ${yi(jzt)})`}function Uzt(e,t,n){if(!e)return;const r=a$e(e);return`${n||Yee(e)?"utc":"time"}Format(${t}, ${r})`}function Ho(e){if(!e)return;let t;return Dt(e)?i$e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Mt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Yee(t.unit)&&(t.utc=!0,t.unit=Fzt(t.unit)),t}function zzt(e){const{utc:t,...n}=Ho(e);return n.unit?(t?"utc":"")+ht(n).map(r=>ns(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+ht(n).map(r=>ns(`_${r}_${n[r]}`)).join("")}function u$e(e,t=n=>n){const n=Ho(e),r=s$e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=l$e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(Cb(a))} - ${t(Cb(i))}`}}const Vzt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Hzt(e){return!!Vzt[e]}function l$e(e,t=1){if(Hzt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function qzt(e){return e==null?void 0:e.param}function Kee(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Xee(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Qee(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Jee(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Zee(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function ete(e){if(e!=null&&e.field){if(nt(e.range)&&e.range.length===2)return!0;if(Xt(e.range))return!0}return!1}function tte(e){return!!(e!=null&&e.field)&&(nt(e.oneOf)||nt(e.in))}function Wzt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function c$e(e){return tte(e)||Kee(e)||ete(e)||Xee(e)||Jee(e)||Qee(e)||Zee(e)}function rh(e,t){return E4(e,{timeUnit:t,wrapTime:!0})}function Gzt(e,t){return e.map(n=>rh(n,t))}function f$e(e,t=!0){const{field:n}=e,r=Ho(e.timeUnit),{unit:i,binned:s}=r||{},o=Ct(e,{expr:"datum"}),a=i?`time(${s?o:Bzt(i,n)})`:o;if(Kee(e))return`${a}===${rh(e.equal,i)}`;if(Xee(e)){const u=e.lt;return`${a}<${rh(u,i)}`}else if(Jee(e)){const u=e.gt;return`${a}>${rh(u,i)}`}else if(Qee(e)){const u=e.lte;return`${a}<=${rh(u,i)}`}else if(Zee(e)){const u=e.gte;return`${a}>=${rh(u,i)}`}else{if(tte(e))return`indexof([${Gzt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(Wzt(e))return nte(a,e.valid);if(ete(e)){const{range:u}=e,l=Xt(u)?{signal:`${u.signal}[0]`}:u[0],c=Xt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+rh(l,i)+", "+rh(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${rh(l,i)}`),c!==null&&f.push(`${a} <= ${rh(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${yi(e)}`)}function nte(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Yzt(e){return c$e(e)&&e.timeUnit?{...e,timeUnit:Ho(e.timeUnit)}:e}const Kk={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Kzt(e){return e==="quantitative"||e==="temporal"}function d$e(e){return e==="ordinal"||e==="nominal"}const Ab=Kk.quantitative,rte=Kk.ordinal,kx=Kk.temporal,ite=Kk.nominal,WS=Kk.geojson;function Xzt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Ab:return"quantitative";case"t":case kx:return"temporal";case"o":case rte:return"ordinal";case"n":case ite:return"nominal";case WS:return"geojson"}}const vl={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},IH={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Qzt(e,t){const n=IH[e],r=IH[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Jzt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function ege(e){return Jzt[e]}const h$e=new Set(["linear","log","pow","sqrt","symlog"]),p$e=new Set([...h$e,"time","utc"]);function m$e(e){return h$e.has(e)}const g$e=new Set(["quantile","quantize","threshold"]),Zzt=new Set([...p$e,...g$e,"sequential","identity"]),eVt=new Set(["ordinal","bin-ordinal","point","band"]);function qo(e){return eVt.has(e)}function wc(e){return Zzt.has(e)}function cd(e){return p$e.has(e)}function Rx(e){return g$e.has(e)}const tVt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function nVt(e){return!Dt(e)&&!!e.name}function y$e(e){return e==null?void 0:e.param}function rVt(e){return e==null?void 0:e.unionWith}function iVt(e){return Mt(e)&&"field"in e}const sVt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:len,domain:cen,range:fen,rangeMax:den,rangeMin:hen,scheme:pen,...oVt}=sVt,aVt=ht(oVt);function kH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return cd(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return cd(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return cd(e);case"nice":return cd(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return wc(e)&&!gr(["log","time","utc","threshold","quantile"],e)}}function v$e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return xE(e)?void 0:rzt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function uVt(e,t){return gr([rte,ite],t)?e===void 0||qo(e):t===kx?gr([vl.TIME,vl.UTC,void 0],e):t===Ab?m$e(e)||Rx(e)||e===void 0:!0}function lVt(e,t,n=!1){if(!Pg(e))return!1;switch(e){case rs:case Yo:case cv:case qS:case Af:case Bd:return cd(t)||t==="band"?!0:t==="point"?!n:!1;case Rg:case hv:case Ng:case fv:case dv:case c_:return cd(t)||Rx(t)||gr(["band","point","ordinal"],t);case Il:case Rp:case Np:return t!=="band";case pv:case kl:return t==="ordinal"||Rx(t)}}function ste(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=ate(e);return bt(n)&&!FMe(n.aggregate)&&i&&cd(i.get("type"))?cVt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function cVt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Zr("invalid",n,i)===null?[fVt(e,t),r]:r}function fVt(e,t){const n=ote(e,!0),i=f_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function ote(e,t=!0){return nte(Dt(e)?e:Ct(e,{expr:"datum"}),!t)}function dVt(e){const{datum:t}=e;return h_(t)?Cb(t):`${yi(t)}`}function q1(e,t,n,r){const i={};if(t&&(i.scale=t),Op(e)){const{datum:s}=e;h_(s)?i.signal=Cb(s):Xt(s)?i.signal=s.signal:Yk(s)?i.signal=s.expr:i.value=s}else i.field=Ct(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function d$({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Xt(o)&&0<o&&o<1?"datum":void 0,u=Ct(t,{expr:a,suffix:i}),l=n!==void 0?Ct(n,{expr:a}):Ct(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Xt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function hVt({scaleName:e,fieldDef:t}){const n=Ct(t,{expr:"datum"}),r=Ct(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function ate({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if($n(t)){const f=o==null?void 0:o.get("type");if(ku(t)){c??(c=Oy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Oi(d)||c&&h&&p===kx)return a!=null&&a.impute?q1(t,s,{binSuffix:"mid"},{offset:u}):c&&!qo(f)?d$({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):q1(t,s,Zk(t,e)?{binSuffix:"range"}:{},{offset:u});if(oa(d)){if(bt(n))return d$({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});vt(ZMe(e===rs?jd:kp))}}return q1(t,s,qo(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Id(t)){const f=t.value,d=u?{offset:u}:{};return{...z2(e,f),...d}}}return Yn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function z2(e,t){return gr(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:gr(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Bi(t)}function Ib(e){return e&&e!=="number"&&e!=="time"}function b$e(e,t,n){return`${e}(${t}${n?`, ${yi(n)}`:""})`}const pVt="  ";function ute({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(Ib(n))return fd({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=_$e(e,r,i),a=Nx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return fd({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return fd({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&bt(e)&&e.timeUnit===void 0)return fd({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Dx(e)){const c=gVt({field:o,timeUnit:bt(e)?(u=Ho(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:g_(e)&&((l=e.scale)==null?void 0:l.type)===vl.UTC});return c?{signal:c}:void 0}if(t=RH({type:a,specifiedFormat:t,config:s,normalizeStack:i}),bt(e)&&Oi(e.bin)){const c=Ct(e,{expr:r,binSuffix:"end"});return{signal:Xk(o,c,t,n,s)}}else return t||Nx(e)==="quantitative"?{signal:`${x$e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function _$e(e,t,n){return bt(e)?n?`${Ct(e,{expr:t,suffix:"end"})}-${Ct(e,{expr:t,suffix:"start"})}`:Ct(e,{expr:t}):dVt(e)}function fd({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=_$e(e,r,i)),o!=="datum.value"&&bt(e)&&Oi(e.bin)){const a=Ct(e,{expr:r,binSuffix:"end"});return{signal:Xk(o,a,t,n,s)}}return{signal:b$e(n,o,t)}}function w$e(e,t,n,r,i,s){var o;if(!(Dt(r)&&Ib(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Nx(e)==="quantitative"&&(i.normalizedNumberFormatType&&Px(e)&&e.stack==="normalize"||i.numberFormatType))){if(Px(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return RH({type:"quantitative",config:i,normalizeStack:!0});if(Dx(e)){const a=bt(e)?(o=Ho(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:mVt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return RH({type:t,specifiedFormat:n,config:i})}}function E$e(e,t,n){var r;if(e&&(Xt(e)||e==="number"||e==="time"))return e;if(Dx(t)&&n!=="time"&&n!=="utc")return bt(t)&&((r=Ho(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function RH({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Dt(t))return t;if(e===Ab)return r?n.normalizedNumberFormat:n.numberFormat}function mVt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:a$e(t)}:r?void 0:n.timeFormat)}function x$e(e,t){return`format(${e}, "${t||""}")`}function tge(e,t,n,r){return Ib(n)?b$e(n,e,t):x$e(e,(Dt(t)?t:void 0)??r.numberFormat)}function Xk(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return Xk(e,t,i.numberFormat,i.numberFormatType,i);const s=tge(e,n,r,i),o=tge(t,n,r,i);return`${nte(e,!1)} ? "null" : ${s} + "${pVt}" + ${o}`}function gVt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Dt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):Uzt(t,e,s)}const Ou={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},S$e=Ou.arc,h4=Ou.area,p4=Ou.bar,yVt=Ou.image,m4=Ou.line,g4=Ou.point,vVt=Ou.rect,h$=Ou.rule,T$e=Ou.text,lte=Ou.tick,bVt=Ou.trail,cte=Ou.circle,fte=Ou.square,C$e=Ou.geoshape;function m_(e){return["line","area","trail"].includes(e)}function fI(e){return["rect","bar","image","arc"].includes(e)}const _Vt=new Set(ht(Ou));function lp(e){return e.type}const wVt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],EVt=["fill","fillOpacity"],xVt=[...wVt,...EVt],SVt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},nge=ht(SVt),TVt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},CVt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},AVt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},A$e=ht(AVt);function kb(e){return e&&e.band!=null}const IVt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},I$e=5,kVt={binSpacing:1,continuousBandSize:I$e,minBandSize:.25,timeUnitBandPosition:.5},RVt={binSpacing:0,continuousBandSize:I$e,minBandSize:.25,timeUnitBandPosition:.5},NVt={thickness:1};function PVt(e){return lp(e)?e.type:e}const y4="min",DVt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function rge(e){return e in DVt}function k$e(e){return!!(e!=null&&e.encoding)}function Hh(e){return e&&(e.op==="count"||!!e.field)}function R$e(e){return e&&nt(e)}function Qk(e){return"row"in e||"column"in e}function dte(e){return!!e&&"header"in e}function v4(e){return"facet"in e}function OVt(e){return e.param}function MVt(e){return e&&!Dt(e)&&"repeat"in e}function ige(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function hte(e){return"sort"in e}function Oy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if($n(e)&&e.bandPosition!==void 0)return e.bandPosition;if(bt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return ug("timeUnitBandPosition",n,r);if(Oi(s))return .5}}function N$e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Rl(e),u=Zr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(bt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:ug("timeUnitBandSize",r,i)};if(Oi(h)&&!qo(s))return{band:1}}if(fI(r.type))return s?qo(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function P$e(e,t,n,r){return Oi(e.bin)||e.timeUnit&&ku(e)&&e.type==="temporal"?Oy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function D$e(e){return e&&!!e.sort&&!e.field}function b4(e){return e&&"condition"in e}function _4(e){const t=e==null?void 0:e.condition;return!!t&&!nt(t)&&bt(t)}function Jk(e){const t=e==null?void 0:e.condition;return!!t&&!nt(t)&&$n(t)}function $Vt(e){const t=e==null?void 0:e.condition;return!!t&&(nt(t)||Id(t))}function bt(e){return e&&(!!e.field||e.aggregate==="count")}function Nx(e){return e==null?void 0:e.type}function Op(e){return e&&"datum"in e}function $0(e){return ku(e)&&!m$(e)||p$(e)}function sge(e){return ku(e)&&e.type==="quantitative"&&!e.bin||p$(e)}function p$(e){return Op(e)&&Or(e.datum)}function $n(e){return bt(e)||Op(e)}function ku(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Id(e){return e&&"value"in e&&"value"in e}function g_(e){return e&&("scale"in e||"sort"in e)}function Px(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function O$e(e){return e&&"legend"in e}function M$e(e){return e&&("format"in e||"formatType"in e)}function LVt(e){return yl(e,["legend","axis","header","scale"])}function FVt(e){return"op"in e}function Ct(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(BVt(e))n=SMe("count");else{let o;if(!t.nofn)if(FVt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Oi(a)?(o=jMe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?mv(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):ag(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!p_(l)&&(o=zzt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?HS(n):t.expr?wMe(n,t.expr)+s:gf(n)+s}function m$(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return bt(e)&&!!e.bin;case"temporal":return!1}throw new Error(KMe(e.type))}function jVt(e){var t;return g_(e)&&Rx((t=e.scale)==null?void 0:t.type)}function BVt(e){return e.aggregate==="count"}function UVt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Oi(r))return`${n} (binned)`;if(i&&!p_(i)){const a=(o=Ho(i))==null?void 0:o.unit;if(a)return`${n} (${d4(a).join("-")})`}else if(s)return mv(s)?`${n} for max ${s.argmax}`:ag(s)?`${n} for min ${s.argmin}`:`${Hk(s)} of ${n}`;return n}function zVt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(mv(t))return`${i} for argmax(${t.argmax})`;if(ag(t))return`${i} for argmin(${t.argmin})`;const s=r&&!p_(r)?Ho(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Oi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const $$e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return zVt(e);default:return UVt(e,t)}};let L$e=$$e;function F$e(e){L$e=e}function VVt(){F$e($$e)}function SE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=pte(e))==null?void 0:a.title;if(!bt(e))return i??e.title;const s=e,o=r?mte(s,t):void 0;return n?Ms(i,s.title,o):i??s.title??o}function pte(e){if(Px(e)&&e.axis)return e.axis;if(O$e(e)&&e.legend)return e.legend;if(dte(e)&&e.header)return e.header}function mte(e,t){return L$e(e,t)}function g$(e){if(M$e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=pte(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function HVt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(hte(e)&&nt(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!mv(n)&&!ag(n))return"quantitative";if(g_(e)&&((s=e.scale)!=null&&s.type))switch(IH[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function cp(e){if(bt(e))return e;if(_4(e))return e.condition}function mo(e){if($n(e))return e;if(Jk(e))return e.condition}function j$e(e,t,n,r={}){if(Dt(e)||Or(e)||av(e)){const i=Dt(e)?"string":Or(e)?"number":"boolean";return vt(q7t(t,i,e)),{value:e}}return $n(e)?y$(e,t,n,r):Jk(e)?{...e,condition:y$(e.condition,t,n,r)}:e}function y$(e,t,n,r){if(M$e(e)){const{format:i,formatType:s,...o}=e;if(Ib(s)&&!n.customFormatTypes)return vt(Qme(t)),y$(o,t,n,r)}else{const i=Px(e)?"axis":O$e(e)?"legend":dte(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Ib(o)&&!n.customFormatTypes)return vt(Qme(t)),y$({...e,[i]:a},t,n,r)}}return bt(e)?gte(e,t,r):qVt(e)}function qVt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Or(n)?"quantitative":Dt(n)?"nominal":h_(n)?"temporal":void 0,{...e,type:t}}function gte(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Vee(r)&&!mv(r)&&!ag(r)&&(vt(G7t(r)),delete a.aggregate),i&&(a.timeUnit=Ho(i)),o&&(a.field=`${o}`),Oi(s)&&(a.bin=w4(s,t)),oa(s)&&!$s(t)&&vt(Tzt(t)),ku(a)){const{type:u}=a,l=Xzt(u);u!==l&&(a.type=l),u!=="quantitative"&&FMe(r)&&(vt(W7t(u,r)),a.type="quantitative")}else if(!PMe(t)){const u=HVt(a,t);a.type=u}if(ku(a)){const{compatible:u,warning:l}=WVt(a,t)||{};u===!1&&vt(l)}if(hte(a)&&Dt(a.sort)){const{sort:u}=a;if(rge(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&rge(l))return{...a,sort:{encoding:l,order:"descending"}}}if(dte(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function w4(e,t){return av(e)?{maxbins:zme(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:zme(t)}:e}const yw={compatible:!0};function WVt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Mm:case $m:case r4:return m$(e)?yw:{compatible:!1,warning:Q7t(t)};case rs:case Yo:case cv:case qS:case Il:case Rp:case Np:case qk:case Wk:case i4:case Tb:case s4:case o4:case c_:case Af:case Bd:case a4:return yw;case zd:case yf:case Ud:case Vd:return n!==Ab?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:yw;case Ng:case fv:case dv:case hv:case Rg:case kg:case Ig:case jd:case kp:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:yw;case kl:case pv:return!m$(e)&&!jVt(e)?{compatible:!1,warning:J7t(t)}:yw;case Ax:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:yw}}function Dx(e){const{formatType:t}=g$(e);return t==="time"||!t&&GVt(e)}function GVt(e){return e&&(e.type==="temporal"||bt(e)&&!!e.timeUnit)}function E4(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Ho(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return Yk(e)?a=e.expr:Xt(e)?a=e.signal:h_(e)?(o=!0,a=Cb(e)):(Dt(e)||Or(e))&&o&&(a=`datetime(${yi(e)})`,Lzt(s)&&(Or(e)&&e<1e4||Dt(e)&&isNaN(Date.parse(e)))&&(a=Cb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:yi(e)}function B$e(e,t){const{type:n}=e;return t.map(r=>{const i=bt(e)&&!p_(e.timeUnit)?e.timeUnit:void 0,s=E4(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function Zk(e,t){return Oi(e.bin)?Pg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const oge={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function eR(e){return e==null?void 0:e.condition}const U$e=["domain","grid","labels","ticks","title"],YVt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},z$e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},KVt={...z$e,style:1,labelExpr:1,encoding:1};function age(e){return!!KVt[e]}const XVt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},V$e=ht(XVt);function Dg(e){return"mark"in e}class x4{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Dg(t)?PVt(t.mark)===this.name:!1}}function W1(e,t){const n=e&&e[t];return n?nt(n)?xb(n,r=>!!r.field):bt(n)||_4(n):!1}function H$e(e,t){const n=e&&e[t];return n?nt(n)?xb(n,r=>!!r.field):bt(n)||Op(n)||Jk(n):!1}function q$e(e,t){if($s(t)){const n=e[t];if((bt(n)||Op(n))&&(d$e(n.type)||bt(n)&&n.timeUnit)){const r=jee(t);return H$e(e,r)}}return!1}function yte(e){return xb(QUt,t=>{if(W1(e,t)){const n=e[t];if(nt(n))return xb(n,r=>!!r.aggregate);{const r=cp(n);return r&&!!r.aggregate}}return!1})}function W$e(e,t){const n=[],r=[],i=[],s=[],o={};return vte(e,(a,u)=>{if(bt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=pte(a),g=p==null?void 0:p.title;let y=Ct(a,{forAs:!0});const b={...g?[]:{title:SE(a,t,{allowDisabling:!0})},...h,field:y};if(c){let _;if(mv(c)?(_="argmax",y=Ct({op:"argmax",field:c.argmax},{forAs:!0}),b.field=`${y}.${l}`):ag(c)?(_="argmin",y=Ct({op:"argmin",field:c.argmin},{forAs:!0}),b.field=`${y}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(_=c),_){const E={op:_,as:y};l&&(E.field=l),s.push(E)}}else if(n.push(y),ku(a)&&Oi(f)){if(r.push({bin:f,field:l,as:y}),n.push(Ct(a,{binSuffix:"end"})),Zk(a,u)&&n.push(Ct(a,{binSuffix:"range"})),$s(u)){const _={field:`${y}_end`};o[`${u}2`]=_}b.bin="binned",PMe(u)||(b.type=Ab)}else if(d&&!p_(d)){i.push({timeUnit:d,field:l,as:y});const _=ku(a)&&a.type!==kx&&"time";_&&(u===qk||u===Tb?b.formatType=_:a7t(u)?b.legend={formatType:_,...b.legend}:$s(u)&&(b.axis={formatType:_,...b.axis}))}o[u]=b}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function QVt(e,t,n){const r=l7t(t,n);if(r){if(r==="binned"){const i=e[t===jd?rs:Yo];return!!(bt(i)&&bt(e[t])&&oa(i.bin))}}else return!1;return!0}function JVt(e,t,n,r){const i={};for(const s of ht(e))NMe(s)||vt(X7t(s));for(let s of r7t){if(!e[s])continue;const o=e[s];if(Gk(s)){const a=n7t(s),u=i[a];if(bt(u)&&Kzt(u.type)&&bt(o)&&!u.timeUnit){vt(H7t(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(vt(V7t),s=Af),!QVt(e,s,t)){vt(f4(s,t));continue}if(s===Rg&&t==="line"){const a=cp(e[s]);if(a!=null&&a.aggregate){vt(K7t);continue}}if(s===Il&&(n?"fill"in e:"stroke"in e)){vt(XMe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===Wk||s===Ax&&!nt(o)&&!Id(o)||s===Tb&&nt(o)){if(o){if(s===Ax){const a=e[s];if(D$e(a)){i[s]=a;continue}}i[s]=Pt(o).reduce((a,u)=>(bt(u)?a.push(gte(u,s)):vt(AH(u,s)),a),[])}}else{if(s===Tb&&o===null)i[s]=null;else if(!bt(o)&&!Op(o)&&!Id(o)&&!b4(o)&&!Xt(o)){vt(AH(o,s));continue}i[s]=j$e(o,s,r)}}return i}function S4(e,t){const n={};for(const r of ht(e)){const i=j$e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function ZVt(e){const t=[];for(const n of ht(e))if(W1(e,n)){const r=e[n],i=Pt(r);for(const s of i)bt(s)?t.push(s):_4(s)&&t.push(s.condition)}return t}function vte(e,t,n){if(e)for(const r of ht(e)){const i=e[r];if(nt(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function eHt(e,t,n,r){return e?ht(e).reduce((i,s)=>{const o=e[s];return nt(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function G$e(e,t){return ht(t).reduce((n,r)=>{switch(r){case rs:case Yo:case s4:case a4:case o4:case jd:case kp:case cv:case qS:case Af:case kg:case Bd:case Ig:case Ud:case zd:case Vd:case yf:case qk:case kl:case c_:case Tb:return n;case Ax:if(e==="line"||e==="trail")return n;case Wk:case i4:{const i=t[r];if(nt(i)||bt(i))for(const s of Pt(i))s.aggregate||n.push(Ct(s,{}));return n}case Rg:if(e==="trail")return n;case Il:case Rp:case Np:case Ng:case fv:case dv:case pv:case hv:{const i=cp(t[r]);return i&&!i.aggregate&&n.push(Ct(i,{})),n}}},[])}function tHt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(nt(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return nt(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function NH(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${bte(t)}`:"";return{field:o+t.field,type:t.type,title:Xt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=ZVt(n).map(LVt);return{tooltip:[...i,...Nh(s,mr)]}}function bte(e){const{title:t,field:n}=e;return Ms(t,n)}function _te(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=bte(n);return Y$e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Dt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function Y$e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...lp(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...av(e[t])?{}:e[t]}}]:[]}function K$e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:JP(s,n),continuousAxisChannelDef2:JP(o,n),continuousAxisChannelDefError:JP(a,n),continuousAxisChannelDefError2:JP(u,n),continuousAxis:i}}function JP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&vt(Szt(n,t)),r}else return e}function X$e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(lp(n)&&n.orient)return n.orient;if($0(i)){if($0(s)){const o=bt(i)&&i.aggregate,a=bt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Dx(s)&&!Dx(i)?"horizontal":"vertical"}return"horizontal"}else{if($0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const v$="boxplot",nHt=["box","median","outliers","rule","ticks"],rHt=new x4(v$,J$e);function Q$e(e){return Or(e)?"tukey":e}function J$e(e,{config:t}){e={...e,encoding:S4(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=lp(n)?n:{type:n};i&&vt(YMe("boxplot"));const u=a.extent??t.boxplot.extent,l=Zr("size",a,t),c=a.invalid,f=Q$e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:g,continuousAxis:y,groupby:b,aggregate:_,encodingWithoutContinuousAxis:E,ticksOrient:C,boxOrient:x,customTooltipWithoutAggregatedField:T}=iHt(e,u,t),A=HS(g.field),{color:k,size:N,...P}=E,D=Ue=>_te(a,y,g,Ue,t.boxplot),j=D(P),M=D(E),B=(Mt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",V=D({...P,...N?{size:N}:{},color:{condition:{test:`datum['lower_box_${g.field}'] >= datum['upper_box_${g.field}']`,...k||{value:B}}}}),z=NH([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],g,E),G={type:"tick",color:"black",opacity:1,orient:C,invalid:c,aria:!1},Y=f==="min-max"?z:NH([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],g,E),Q=[...j({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Y}),...j({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Y}),...j({partName:"ticks",mark:G,positionPrefix:"lower_whisker",extraEncoding:Y}),...j({partName:"ticks",mark:G,positionPrefix:"upper_whisker",extraEncoding:Y})],L=[...f!=="tukey"?Q:[],...M({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:z}),...V({partName:"median",mark:{type:"tick",invalid:c,...Mt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:C,aria:!1},positionPrefix:"mid_box",extraEncoding:z})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:L};const U=`datum["lower_box_${g.field}"]`,K=`datum["upper_box_${g.field}"]`,q=`(${K} - ${U})`,X=`${U} - ${u} * ${q}`,Z=`${K} + ${u} * ${q}`,ae=`datum["${g.field}"]`,he={joinaggregate:Z$e(g.field),groupby:b},ge={transform:[{filter:`(${X} <= ${ae}) && (${ae} <= ${Z})`},{aggregate:[{op:"min",field:g.field,as:`lower_whisker_${A}`},{op:"max",field:g.field,as:`upper_whisker_${A}`},{op:"min",field:`lower_box_${g.field}`,as:`lower_box_${A}`},{op:"max",field:`upper_box_${g.field}`,as:`upper_box_${A}`},..._],groupby:b}],layer:Q},{tooltip:be,...Ce}=P,{scale:oe,axis:re}=g,xe=bte(g),Re=yl(re,["title"]),Ke=Y$e(a,"outliers",t.boxplot,{transform:[{filter:`(${ae} < ${X}) || (${ae} > ${Z})`}],mark:"point",encoding:{[y]:{field:g.field,type:g.type,...xe!==void 0?{title:xe}:{},...oe!==void 0?{scale:oe}:{},...gi(Re)?{}:{axis:Re}},...Ce,...k?{color:k}:{},...T?{tooltip:T}:{}}})[0];let Qe;const ke=[...d,...h,he];return Ke?Qe={transform:ke,layer:[Ke,ge]}:(Qe=ge,Qe.transform.unshift(...ke)),{...o,layer:[Qe,{transform:p,layer:L}]}}function Z$e(e){const t=HS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function iHt(e,t,n){const r=X$e(e,v$),{continuousAxisChannelDef:i,continuousAxis:s}=K$e(e,r,v$),o=i.field,a=HS(o),u=Q$e(t),l=[...Z$e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=tHt(d),{bins:g,timeUnits:y,aggregate:b,groupby:_,encoding:E}=W$e(p,n),C=r==="vertical"?"horizontal":"vertical",x=r,T=[...g,...y,{aggregate:[...b,...l],groupby:_},...c];return{bins:g,timeUnits:y,transform:T,groupby:_,aggregate:b,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:E,ticksOrient:C,boxOrient:x,customTooltipWithoutAggregatedField:h}}const wte="errorbar",sHt=["ticks","rule"],oHt=new x4(wte,eLe);function eLe(e,{config:t}){e={...e,encoding:S4(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=tLe(e,wte,t);delete s.size;const c=_te(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function aHt(e,t){const{encoding:n}=e;if(uHt(n))return{orient:X$e(e,t),inputType:"raw"};const r=lHt(n),i=cHt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if($n(a)&&$n(u))throw new Error(`${t} cannot have both x2 and y2`);if($n(a)){if($0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if($n(u)){if($0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if($n(u)&&!$n(a))throw new Error(`${t} cannot have xError2 without xError`);if($n(c)&&!$n(l))throw new Error(`${t} cannot have yError2 without yError`);if($n(a)&&$n(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if($n(a)){if($0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if($n(l)){if($0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function uHt(e){return($n(e.x)||$n(e.y))&&!$n(e.x2)&&!$n(e.y2)&&!$n(e.xError)&&!$n(e.xError2)&&!$n(e.yError)&&!$n(e.yError2)}function lHt(e){return $n(e.x2)||$n(e.y2)}function cHt(e){return $n(e.xError)||$n(e.xError2)||$n(e.yError)||$n(e.yError2)}function tLe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=lp(r)?r:{type:r};s&&vt(YMe(t));const{orient:l,inputType:c}=aHt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:g}=K$e(e,l,t),{errorBarSpecificAggregate:y,postAggregateCalculates:b,tooltipSummary:_,tooltipTitleWithFieldName:E}=fHt(u,f,d,h,p,c,t,n),{[g]:C,[g==="x"?"x2":"y2"]:x,[g==="x"?"xError":"yError"]:T,[g==="x"?"xError2":"yError2"]:A,...k}=i,{bins:N,timeUnits:P,aggregate:D,groupby:j,encoding:M}=W$e(k,n),B=[...D,...y],V=c!=="raw"?[]:j,z=NH(_,f,M,E);return{transform:[...a.transform??[],...N,...P,...B.length===0?[]:[{aggregate:B,groupby:V}],...b],groupby:V,continuousAxisChannelDef:f,continuousAxis:g,encodingWithoutContinuousAxis:M,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:z}}function fHt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&vt(xzt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Hk(h)},{fieldPrefix:"upper_",titlePrefix:uge(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:uge(h,p,"-")}],d=!0;else{let g,y,b;p==="ci"?(g="mean",y="ci0",b="ci1"):(g="median",y="q1",b="q3"),u=[{op:y,field:c,as:`lower_${c}`},{op:b,field:c,as:`upper_${c}`},{op:g,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:SE({field:c,aggregate:b,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:SE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:SE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&vt(Ezt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Sb(Sb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function uge(e,t,n){return`${Hk(e)} ${n} ${t}`}const Ete="errorband",dHt=["band","borders"],hHt=new x4(Ete,nLe);function nLe(e,{config:t}){e={...e,encoding:S4(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=tLe(e,Ete,t),l=o,c=_te(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?vt(Zme("interpolate")):l.tension&&vt(Zme("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const rLe={};function xte(e,t,n){const r=new x4(e,t);rLe[e]={normalizer:r,parts:n}}function pHt(){return ht(rLe)}xte(v$,J$e,nHt);xte(wte,eLe,sHt);xte(Ete,nLe,dHt);const mHt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],iLe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},sLe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},gHt=ht(iLe),yHt=ht(sLe),vHt={header:1,headerRow:1,headerColumn:1,headerFacet:1},oLe=ht(vHt),aLe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],bHt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},_Ht={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},kd="_vgsid_",wHt={point:{on:"click",fields:[kd],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Ste(e){return e==="legend"||!!(e!=null&&e.legend)}function KB(e){return Ste(e)&&Mt(e)}function Tte(e){return!!(e!=null&&e.select)}function uLe(e){const t=[];for(const n of e||[]){if(Tte(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function EHt(e){return T4(e)||Ate(e)||Cte(e)}function Cte(e){return"concat"in e}function T4(e){return"vconcat"in e}function Ate(e){return"hconcat"in e}function lLe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function fp(e){return Mt(e)&&e.step!==void 0}function lge(e){return e.view||e.width||e.height}const cge=20,xHt={align:1,bounds:1,center:1,columns:1,spacing:1},SHt=ht(xHt);function THt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(v4(e)&&!Qk(e.facet)||Cte(e))&&(i.columns=o),T4(e)&&(i.columns=1);for(const a of SHt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Or(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function PH(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function b$(e,t){const n=_$(e,t);return fp(n)?n.step:cLe}function _$(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Ms(n,{step:e.step})}const cLe=20,CHt={continuousWidth:200,continuousHeight:200,step:cLe},AHt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:CHt,mark:CVt,arc:{},area:{},bar:kVt,circle:{},geoshape:{},image:{},line:{},point:{},rect:RVt,rule:{color:"black"},square:{},text:{color:"black"},tick:NVt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:tVt,projection:{},legend:bHt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:wHt,style:{},title:{},facet:{spacing:cge},concat:{spacing:cge},normalizedNumberFormat:".0%"},em=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],fge={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},dge={blue:em[0],orange:em[1],red:em[2],teal:em[3],green:em[4],yellow:em[5],purple:em[6],pink:em[7],brown:em[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function IHt(e={}){return{signals:[{name:"color",value:Mt(e)?{...dge,...e}:dge}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function kHt(e){return{signals:[{name:"fontSize",value:Mt(e)?{...fge,...e}:fge}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function RHt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function fLe(e){const t=ht(e||{}),n={};for(const r of t){const i=e[r];n[r]=eR(i)?UMe(i):Kl(i)}return n}function NHt(e){const t=ht(e),n={};for(const r of t)n[r]=fLe(e[r]);return n}const PHt=[...A$e,...V$e,...oLe,"background","padding","legend","lineBreak","scale","style","title","view"];function dLe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=DS({},An(AHt),n?RHt(n):{},t?IHt(t):{},r?kHt(r):{},s||{});i&&OS(o,"selection",i,!0);const a=yl(o,PHt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Kl(o[u]));for(const u of A$e)o[u]&&(a[u]=sl(o[u]));for(const u of V$e)o[u]&&(a[u]=fLe(o[u]));for(const u of oLe)o[u]&&(a[u]=sl(o[u]));return o.legend&&(a.legend=sl(o.legend)),o.scale&&(a.scale=sl(o.scale)),o.style&&(a.style=NHt(o.style)),o.title&&(a.title=sl(o.title)),o.view&&(a.view=sl(o.view)),a}const DHt=new Set(["view",..._Vt]),OHt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],MHt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...TVt};function $Ht(e){e=An(e);for(const t of OHt)delete e[t];if(e.axis)for(const t in e.axis)eR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of mHt)delete e.legend[t];if(e.mark){for(const t of nge)delete e.mark[t];e.mark.tooltip&&Mt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(uLe(e.params)),delete e.params);for(const t of DHt){for(const r of nge)delete e[t][r];const n=MHt[t];if(n)for(const r of n)delete e[t][r];FHt(e,t)}for(const t of pHt())delete e[t];LHt(e);for(const t in e)Mt(e[t])&&gi(e[t])&&delete e[t];return gi(e)?void 0:e}function LHt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=BMe(e.title);gi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),gi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),gi(r)?delete e.title:e.title=r}function FHt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};gi(s)||(e.style[n??t]=s),delete e[t]}function C4(e){return"layer"in e}function jHt(e){return"repeat"in e}function BHt(e){return!nt(e.repeat)&&e.repeat.layer}class Ite{map(t,n){return v4(t)?this.mapFacet(t,n):jHt(t)?this.mapRepeat(t,n):Ate(t)?this.mapHConcat(t,n):T4(t)?this.mapVConcat(t,n):Cte(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(C4(t))return this.mapLayer(t,n);if(Dg(t))return this.mapUnit(t,n);throw new Error(Hee(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const UHt={zero:1,center:1,normalize:1};function zHt(e){return e in UHt}const VHt=new Set([S$e,p4,h4,h$,g4,cte,fte,m4,T$e,lte]),HHt=new Set([p4,h4,S$e]);function vw(e){return bt(e)&&Nx(e)==="quantitative"&&!e.bin}function hge(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(bt(o)&&bt(a))if(vw(o)&&vw(a)){if(o.stack)return t;if(a.stack)return i;const u=bt(o)&&!!o.aggregate,l=bt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(vw(o))return t;if(vw(a))return i}else{if(vw(o))return s&&n==="vertical"?void 0:t;if(vw(a))return s&&n==="horizontal"?void 0:i}}function qHt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function hLe(e,t){var g,y;const n=lp(e)?e:{type:e},r=n.type;if(!VHt.has(r))return null;const i=hge(t,"x",n)||hge(t,"theta",n);if(!i)return null;const s=t[i],o=bt(s)?Ct(s,{}):void 0,a=qHt(i),u=[],l=new Set;if(t[a]){const b=t[a],_=bt(b)?Ct(b,{}):void 0;_&&_!==o&&(u.push(a),l.add(_))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=bt(f)?Ct(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=i7t.reduce((b,_)=>{if(_!=="tooltip"&&W1(t,_)){const E=t[_];for(const C of Pt(E)){const x=cp(C);if(x.aggregate)continue;const T=Ct(x,{});(!T||!l.has(T))&&b.push({channel:_,fieldDef:x})}}return b},[]);let p;return s.stack!==void 0?av(s.stack)?p=s.stack?"zero":null:p=s.stack:HHt.has(r)&&(p="zero"),!p||!zHt(p)||yte(t)&&h.length===0?null:((g=s==null?void 0:s.scale)!=null&&g.type&&((y=s==null?void 0:s.scale)==null?void 0:y.type)!==vl.LINEAR&&s!=null&&s.stack&&vt(bzt(s.scale.type)),$n(t[Pp(i)])?(s.stack!==void 0&&vt(vzt(i)),null):(bt(s)&&s.aggregate&&!g7t.has(s.aggregate)&&vt(_zt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:m_(r),stackBy:h,offset:p}))}function pLe(e,t,n){const r=sl(e),i=Zr("orient",r,n);if(r.orient=KHt(r.type,t,i),i!==void 0&&i!==r.orient&&vt(nzt(r.orient,i)),r.type==="bar"&&r.orient){const u=Zr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:IVt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Zr("opacity",r,n),o=Zr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=GHt(r.type,t)),Zr("cursor",r,n)===void 0&&(r.cursor=WHt(r,t,n)),r}function WHt(e,t,n){return t.href||e.href||Zr("href",e,n)?"pointer":e.cursor}function GHt(e,t){if(gr([g4,lte,cte,fte],e)&&!yte(t))return .7}function YHt(e,t,{graticule:n}){if(n)return!1;const r=ug("filled",e,t),i=e.type;return Ms(r,i!==g4&&i!==m4&&i!==h$)}function KHt(e,t,n){switch(e){case g4:case cte:case fte:case T$e:case vVt:case yVt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case p4:if(bt(r)&&(oa(r.bin)||bt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(bt(i)&&(oa(i.bin)||bt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(bt(r)&&r.type===Ab&&!Oi(r.bin)||p$(r))&&bt(i)&&oa(i.bin)?"horizontal":"vertical";if(!o)return(bt(i)&&i.type===Ab&&!Oi(i.bin)||p$(i))&&bt(r)&&oa(r.bin)?"vertical":"horizontal"}case h$:if(s&&!(bt(r)&&oa(r.bin))&&o&&!(bt(i)&&oa(i.bin)))return;case h4:if(o)return bt(i)&&oa(i.bin)?"horizontal":"vertical";if(s)return bt(r)&&oa(r.bin)?"vertical":"horizontal";if(e===h$){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case m4:case lte:{const a=sge(r),u=sge(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ku(r)&&r.type===kx,c=ku(i)&&i.type===kx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function XHt(e){const{point:t,line:n,...r}=e;return ht(r).length>1?r:r.type}function QHt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:yl(e[t],["point","line"])});return e}function XB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Mt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Mt(t.point)?t.point:{}:void 0}function pge(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class JHt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Dg(t)){const{mark:r,encoding:i}=t,s=lp(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!XB(s,n[s.type],i);case"area":return!!XB(s,n[s.type],i)||!!pge(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=S4(l,i),d=lp(a)?a:{type:a},h=XB(d,i[d.type],f),p=d.type==="area"&&pge(d,i[d.type]),g=[{name:u,...s?{params:s}:{},mark:XHt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:yl(f,["shape"])}],y=hLe(pLe(d,f,i),f);let b=f;if(y){const{fieldChannel:_,offset:E}=y;b={...f,[_]:{...f[_],...E?{stack:E}:{}}}}return b=yl(b,["y2","x2"]),p&&g.push({...o?{projection:o}:{},mark:{type:"line",...Tx(d,["clip","interpolate","tension","tooltip"]),...p},encoding:b}),h&&g.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Tx(d,["clip","tooltip"]),...h},encoding:b}),r({...c,layer:g},{...n,config:QHt(i)})}}function ZHt(e,t){return t?Qk(e)?gLe(e,t):mLe(e,t):e}function QB(e,t){return t?gLe(e,t):e}function DH(e,t,n){const r=t[e];if(MVt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};vt($7t(r.repeat));return}return t}function mLe(e,t){if(e=DH("field",e,t),e!==void 0){if(e===null)return null;if(hte(e)&&Hh(e.sort)){const n=DH("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function mge(e,t){if(bt(e))return mLe(e,t);{const n=DH("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function gge(e,t){if($n(e)){const n=mge(e,t);if(n)return n;if(b4(e))return{condition:e.condition}}else{if(Jk(e)){const n=mge(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function gLe(e,t){const n={};for(const r in e)if(on(e,r)){const i=e[r];if(nt(i))n[r]=i.map(s=>gge(s,t)).filter(s=>s);else{const s=gge(i,t);s!==void 0&&(n[r]=s)}}return n}class eqt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Dg(t)){const{encoding:n,mark:r}=t;if(r==="line"||lp(r)&&r.type==="line")for(const i of t7t){const s=f_(i),o=n[s];if(n[i]&&(bt(o)&&!oa(o.bin)||Op(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return vt(tzt(!!i.x2,!!i.y2)),r({...t,mark:Mt(s)?{...s,type:"rule"}:"rule"},n)}}class tqt extends Ite{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[rHt,oHt,hHt,new JHt,new eqt]}map(t,n){if(Dg(t)){const r=W1(t.encoding,Mm),i=W1(t.encoding,$m),s=W1(t.encoding,r4);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=QB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return BHt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${ns(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!nt(r)&&t.columns&&(t=yl(t,["columns"]),vt(Kme("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!nt(r)&&r.row||[u?u.row:null],f=!nt(r)&&r.column||[u?u.column:null],d=nt(r)&&r||[u?u.repeat:null];for(const p of d)for(const g of c)for(const y of f){const b={repeat:p,row:g,column:y,layer:u.layer},_=(i.name?`${i.name}_`:"")+l+"child__"+(nt(r)?`${ns(p)}`:(r.row?`row_${ns(g)}`:"")+(r.column?`column_${ns(y)}`:"")),E=this.map(i,{...n,repeater:b,repeaterPrefix:_});E.name=_,a.push(yl(E,["data"]))}const h=nt(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return Qk(r)&&t.columns&&(t=yl(t,["columns"]),vt(Kme("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=vge({parentProjection:o,projection:i}),l=yge({parentEncoding:s,encoding:QB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:g,layout:y}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),b=QB(o,n.repeater);return this.mapFacet({...p,...y,facet:g,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:b,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&vt(Z7t([...r?[Mm]:[],...i?[$m]:[]]));const o={},a={};for(const u of[Mm,$m]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const g of["align","center","spacing"])l[g]!==void 0&&(a[g]??(a[g]={}),a[g][u]=l[g])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:ZHt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:yge({parentEncoding:n,encoding:s,layer:!0}),parentProjection:vge({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function yge({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ht(e),...ht(t)]);for(const s of i){const o=t[s],a=e[s];if($n(o)){const u={...a,...o};r[s]=u}else Jk(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Id(a)||Xt(a)||$n(a)||nt(a))&&(r[s]=a)}}else r=t;return!r||gi(r)?void 0:r}function vge(e){const{parentProjection:t,projection:n}=e;return t&&n&&vt(z7t({parentProjection:t,projection:n})),n??t}function kte(e){return"filter"in e}function nqt(e){return(e==null?void 0:e.stop)!==void 0}function yLe(e){return"lookup"in e}function rqt(e){return"data"in e}function iqt(e){return"param"in e}function sqt(e){return"pivot"in e}function oqt(e){return"density"in e}function aqt(e){return"quantile"in e}function uqt(e){return"regression"in e}function lqt(e){return"loess"in e}function cqt(e){return"sample"in e}function fqt(e){return"window"in e}function dqt(e){return"joinaggregate"in e}function hqt(e){return"flatten"in e}function pqt(e){return"calculate"in e}function vLe(e){return"bin"in e}function mqt(e){return"impute"in e}function gqt(e){return"timeUnit"in e}function yqt(e){return"aggregate"in e}function vqt(e){return"stack"in e}function bqt(e){return"fold"in e}function _qt(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function wqt(e){return e.map(t=>kte(t)?{filter:EE(t.filter,Yzt)}:t)}class Eqt extends Ite{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=bge(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=bge(t,n),t.encoding){const r={};for(const[i,s]of Py(t.encoding))r[i]=bLe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Py(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of pa(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function bge(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(kte(s))return{filter:OH(s,t)};if(vLe(s)&&d_(s.bin))return{...s,bin:_Le(s.bin)};if(yLe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function bLe(e,t){var r,i;const n=An(e);if(bt(n)&&d_(n.bin)&&(n.bin=_Le(n.bin)),g_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(b4(n))if(nt(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:OH(s,t)}});else{const{selection:s,param:o,test:a,...u}=bLe(n.condition,t);n.condition=o?n.condition:{...u,test:OH(n.condition,t)}}return n}function _Le(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function OH(e,t){const n=r=>EE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):EE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class MH extends Ite{map(t,n){const r=n.selections??[];if(t.params&&!Dg(t)){const i=[];for(const s of t.params)Tte(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Dt(a)&&(a===t.name||i.includes(a))||nt(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=MH.prototype[e];MH.prototype[e]=function(n,r){return t.call(this,n,xqt(n,r))}}function xqt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function wLe(e,t){t===void 0&&(t=dLe(e.config));const n=Aqt(e,t),{width:r,height:i}=e,s=Iqt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Sqt=new tqt,Tqt=new Eqt,Cqt=new MH;function Aqt(e,t={}){const n={config:t};return Cqt.map(Sqt.map(Tqt.map(e,n),n),n)}function _ge(e){return Dt(e)?{type:e}:e??{}}function Iqt(e,t,n){let{width:r,height:i}=t;const s=Dg(e)||C4(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(vt(qme("width")),r=void 0),i=="container"&&(vt(qme("height")),i=void 0));const a={type:"pad",...o,...n?_ge(n.autosize):{},..._ge(e.autosize)};if(a.type==="fit"&&!s&&(vt(T7t),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&vt(Wme("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&vt(Wme("height")),!nc(a,{type:"pad"}))return a}function kqt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Rqt(e){return e?`fit-${u4(e)}`:"fit"}const Nqt=["background","padding"];function wge(e,t){const n={};for(const r of Nqt)e&&e[r]!==void 0&&(n[r]=Kl(e[r]));return t&&(n.params=e.params),n}class Og{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Og(An(this.explicit),An(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Ms(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ht(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function dh(e){return{explicit:!0,value:e}}function zl(e){return{explicit:!1,value:e}}function ELe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:A4(t,n,r,i)}}function A4(e,t,n,r){return e.explicit&&t.explicit&&vt(fzt(n,r,e.value,t.value)),e}function My(e,t,n,r,i=A4){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:nc(e.value,t.value)?e:i(e,t,n,r)}class Pqt extends Og{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Ox(e){return"url"in e}function dI(e){return"values"in e}function xLe(e){return"name"in e&&!Ox(e)&&!dI(e)&&!J0(e)}function J0(e){return e&&(SLe(e)||TLe(e)||Rte(e))}function SLe(e){return"sequence"in e}function TLe(e){return"sphere"in e}function Rte(e){return"graticule"in e}var Ji;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Ji||(Ji={}));function CLe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=gf(i.field),i}function Rb(e,t=!0,n=Ga){if(nt(e)){const r=e.map(i=>Rb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(h_(e))return n(t?Cb(e):$zt(e));return t?n(yi(e)):e}function Dqt(e,t){for(const n of pa(e.component.selection??{})){const r=n.name;let i=`${r}${Ly}, ${n.resolve==="global"?"true":`{unit: ${G1(e)}}`}`;for(const s of N4)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+fWt,on:[{events:{signal:n.name+Ly},update:`modify(${xt(n.name+Nb)}, ${i})`}]})}return Nte(t)}function Oqt(e,t){if(e.component.selection&&ht(e.component.selection).length){const n=xt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:lv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Nte(t)}function Mqt(e,t){let n=!1;for(const r of pa(e.component.selection??{})){const i=r.name,s=xt(i+Nb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${HLe}(${s}, ${xt(a)}${u}`})}n=!0;for(const a of N4)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Nte(t)}function $qt(e,t){const n=[...t],r=G1(e,{escape:!1});for(const i of pa(e.component.selection??{})){const s={name:i.name+Nb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:kd}}]),i.init){const a=i.project.items.map(CLe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[kd]:Rb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Rb(u,!1)}))}n.filter(a=>a.name===i.name+Nb).length||n.push(s)}return n}function ALe(e,t){for(const n of pa(e.component.selection??{}))for(const r of N4)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Lqt(e,t){for(const n of e.children)_s(n)&&(t=ALe(n,t));return t}function Fqt(e,t,n,r){const i=KLe(e,t.param,t);return{signal:wc(n.get("type"))&&nt(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Nte(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class hi{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){vt(j7t);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class bl extends hi{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${xMe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function JB(e){return e.as!==void 0}function Ege(e){return`${e}_end`}class qh extends hi{clone(){return new qh(null,An(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(p_(u)){if(_s(n)){const{mark:c,markDef:f,config:d}=n,h=Oy({fieldDef:s,markDef:f,config:d});(fI(c)||h)&&(l={timeUnit:Ho(u),field:a})}}else l={as:Ct(s,{forAs:!0}),field:a,timeUnit:u};if(_s(n)){const{mark:c,markDef:f,config:d}=n,h=Oy({fieldDef:s,markDef:f,config:d});fI(c)&&$s(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[mr(l)]=l)}return i},{});return gi(r)?null:new qh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Ho(r),o={...i,timeUnit:s};return new qh(t,{[mr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Py(this.timeUnits)){const s=JB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(pa(this.timeUnits).map(t=>JB(t)?t.as:Ege(t.field)))}dependentFields(){return new Set(pa(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${mr(this.timeUnits)}`}assemble(){const t=[];for(const n of pa(this.timeUnits)){const{rectBandPosition:r}=n,i=Ho(n.timeUnit);if(JB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:gf(s),type:"timeunit",...a?{units:d4(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...xge(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=ILe({timeUnit:i,field:o}),u=Ege(o);t.push({type:"formula",expr:a,as:u}),t.push(...xge([o,u],r,i))}}return t}}const I4="offsetted_rect_start",k4="offsetted_rect_end";function ILe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=s$e(r),{part:o,step:a}=l$e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function xge([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Sge([ILe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${I4}`},{type:"formula",expr:Sge([i,s],n+.5),as:`${e}_${k4}`}]}return[]}function Sge([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const tR="_tuple_fields";class jqt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Bqt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new jqt),s={},o={},a=new Set,u=(p,g)=>{const y=g==="visual"?p.channel:p.field;let b=ns(`${r}_${y}`);for(let _=1;a.has(b);_++)b=ns(`${r}_${y}_${_}`);return a.add(b),{[g]:b}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Pt(n.value):null;let{fields:d,encodings:h}=Mt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(Mt(p))for(const g of ht(p))e7t(g)?(h||(h=[])).push(g):l==="interval"?(vt(M7t),h=c.encodings):(d??(d=[])).push(g)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const g=e.fieldDef(p);if(g){let y=g.field;if(g.aggregate){vt(C7t(p,g.aggregate));continue}else if(!y){vt(Yme(p));continue}if(g.timeUnit&&!p_(g.timeUnit)){y=e.vgField(p);const b={timeUnit:g.timeUnit,as:y,field:g.field};o[mr(b)]=b}if(!s[y]){const b=l==="interval"&&Pg(p)&&wc(e.getScaleComponent(p).get("type"))?"R":g.bin?"R-RE":"E",_={field:y,channel:p,type:b,index:i.items.length};_.signals={...u(_,"data"),...u(_,"visual")},i.items.push(s[y]=_),i.hasField[y]=s[y],i.hasSelectionId=i.hasSelectionId||y===kd,kMe(p)?(_.geoChannel=p,_.channel=IMe(p),i.hasChannel[_.channel]=s[y]):i.hasChannel[p]=s[y]}}else vt(Yme(p))}for(const p of d??[]){if(i.hasField[p])continue;const g={type:"E",field:p,index:i.items.length};g.signals={...u(g,"data")},i.items.push(g),i.hasField[p]=g,i.hasSelectionId=i.hasSelectionId||p===kd}f&&(t.init=f.map(p=>i.items.map(g=>Mt(p)?p[g.geoChannel||g.channel]!==void 0?p[g.geoChannel||g.channel]:p[g.field]:p))),gi(o)||(i.timeUnit=new qh(null,o))},signals:(e,t,n)=>{const r=t.name+tR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(CLe)})}},Lm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Pg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&vt(R7t),!s||!wc(o)){vt(k7t);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Tge(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(HLe)>=0)i.update=`{${r.map(o=>`${xt(gf(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${xt(gf(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Tge(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function $H(e,t){return`domain(${xt(e.scaleName(t))})`}function Tge(e){return e.parent&&QS(e.parent)&&!e.parent.parent}const TE="_brush",kLe="_scale_trigger",dC="geo_interval_init_tick",RLe="_init",Uqt="_center",zqt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Mt(n.select)?n.select:{}};i.fields=[kd],i.encodings||(i.encodings=n.value?ht(n.value):[zd,Ud]),n.select={type:"interval",...i}}if(t.translate&&!Lm.defined(t)){const i=`!event.item || event.item.mark.name !== ${xt(t.name+TE)}`;for(const s of t.events){if(!s.between){vt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Pt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+Ly,s=pa(t.project.hasChannel).filter(a=>a.channel===rs||a.channel===Yo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Vqt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=xt(e.projectionName()),u=e.projectionName()+Uqt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,g=x=>e.getSizeSignalRef(x).signal,y=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":g("width")}, ${d?d+"[1]":g("height")}]]`;o&&(n.unshift({name:r+RLe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${g("width")}/2, ${g("height")}/2])`})));const b=`intersect(${y}, {markname: ${xt(e.getName("marks"))}}, unit.mark)`,_=`{unit: ${G1(e)}}`,E=`vlSelectionTuples(${b}, ${_})`,C=s.map(x=>x.signals.visual);return n.concat({name:i,on:[{events:[...C.length?[{signal:C.join(" || ")}]:[],...o?[{signal:dC}]:[]],update:E}]})}else{if(!Lm.defined(t)){const l=r+kLe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,g=xt(e.scaleName(d)),y=e.getScaleComponent(d).get("type"),b=wc(y)?"+":"";return`(!isArray(${h}) || (${b}invert(${g}, ${p})[0] === ${b}${h}[0] && ${b}invert(${g}, ${p})[1] === ${b}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${G1(e)}, fields: ${r+tR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Rb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(_s(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===dC).length||n.unshift({name:dC,value:null,on:[{events:"timer{1}",update:`${dC} === null ? {} : ${dC}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${xt(t.name+Nb)})`;if(Lm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const y of ht(l))l[y]=[{test:`${u}.length && ${u}[0].unit === ${G1(e)}`,...l[y]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=ht(h).reduce((y,b)=>(y[b]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(_=>_).join(" && "),value:h[b]},{value:null}],y),{}),g=d??(t.translate?"move":null);return[{name:`${r+TE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+TE,type:"rect",clip:!0,encode:{enter:{...g?{cursor:{value:g}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Vqt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=xt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===rs?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Lm.defined(t),p=e.getScaleComponent(s),g=p?p.get("type"):void 0,y=r?{init:Rb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+kLe},update:wc(g)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...y,on:f},{name:d,...r?{init:Rb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===rs?0:1,h=t.name+RLe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Hqt={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+tR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=pa(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+TE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${G1(e)}, `;if(t.project.hasSelectionId)l+=`${kd}: ${o}[${xt(kd)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${xt(e.vgField(d.channel,{}))}], ${o}[${xt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${xt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+Ly,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function GS(e,t,n,r){const i=b4(t)&&t.condition,s=r(t);if(i){const a=Pt(i).map(u=>{const l=r(u);if(OVt(u)){const{param:c,empty:f}=u;return{test:YLe(e,{param:c,empty:f}),...l}}else return{test:x$(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Pte(e,t="text"){const n=e.encoding[t];return GS(e,n,t,r=>R4(r,e.config))}function R4(e,t,n="datum"){if(e){if(Id(e))return Bi(e.value);if($n(e)){const{format:r,formatType:i}=g$(e);return ute({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function NLe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(nt(o))return{tooltip:Cge({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return GS(e,o,"tooltip",u=>{const l=R4(u,i,a);if(l)return l;if(u===null)return;let c=Zr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Dt(c))return{value:c};if(Mt(c))return Xt(c)?c:c.content==="encoding"?Cge(n,s,i,t):{signal:a}})}}function PLe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=f_(f),h=ku(c)?c:{...c,type:e[d].type},p=h.title||mte(h,i),g=Pt(p).join(", ").replaceAll(/"/g,'\\"');let y;if($s(f)){const b=f==="x"?"x2":"y2",_=cp(e[b]);if(oa(h.bin)&&_){const E=Ct(h,{expr:o}),C=Ct(_,{expr:o}),{format:x,formatType:T}=g$(h);y=Xk(E,C,x,T,i),s[b]=!0}}if(($s(f)||f===Af||f===Bd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:b,formatType:_}=g$(h);y=ute({fieldOrDatumDef:h,format:b,formatType:_,expr:o,config:i,normalizeStack:!0}).signal}y??(y=R4(h,i,o).signal),a.push({channel:f,key:g,value:y})}vte(e,(c,f)=>{bt(c)?u(c,f):_4(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Cge(e,t,n,{reactiveGeom:r}={}){const i=PLe(e,t,n,{reactiveGeom:r}),s=Py(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function qqt(e){const{markDef:t,config:n}=e,r=Zr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Wqt(e),...Gqt(e)}}function Wqt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Zr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in E7t?{}:{ariaRoleDescription:{value:t}}}function Gqt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return GS(e,s,"description",u=>R4(u,e.config));const o=Zr("description",n,r);if(o!=null)return{description:Bi(o)};if(r.aria===!1)return{};const a=PLe(t,i,r);if(!gi(a))return{description:{signal:Py(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function $o(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Zr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=Bi(u)));const l=i[e];return GS(t,l,o??e,c=>ate({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function DLe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Zr("filled",n,i),a=gr(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Zr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Zr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:Bi(u)}:{},...l?{stroke:Bi(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&vt(XMe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...$o("color",e,{vgChannel:c,defaultValue:o?u:l}),...$o("fill",e,{defaultValue:r.fill?u:void 0}),...$o("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Yqt(e){const{encoding:t,mark:n}=e,r=t.order;return!m_(n)&&Id(r)?GS(e,r,"zindex",i=>Bi(i.value)):{}}function Mx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:ate({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Bi(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ja(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Pp(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Mx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Dte({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),g=!u&&$s(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Kqt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return g?{[r||e]:g}:void 0}function Kqt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if($n(n)&&i&&t===i.fieldChannel){if(bt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return d$({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return q1(n,r,{suffix:"end"},{offset:s})}return ste(e)}function Dte({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=f_(n),u=Dy(n),l=Zr(n,s,o,{vgChannel:u});if(l!==void 0)return z2(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!gr([vl.LOG,vl.TIME,vl.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Rl(n)],mult:.5}}}}const Xqt={left:"x",center:"xc",right:"x2"},Qqt={top:"y",middle:"yc",bottom:"y2"};function OLe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Dy(e);const i=e==="x"?"align":"baseline",s=Zr(i,t,n);let o;return Xt(s)?(vt(ezt(i)),o=void 0):o=s,e==="x"?Xqt[o||(r==="top"?"left":"center")]:Qqt[o||r]}function w$(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?MLe(e,t,{defaultPos:n,defaultPos2:r}):ja(e,t,{defaultPos:n})}function MLe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Pp(e),a=Rl(e),u=Jqt(t,r,o),l=u[a]?OLe(e,i,s):Dy(e);return{...ja(e,t,{defaultPos:n,vgChannel:l}),...u}}function Jqt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=f_(n),l=Rl(n),c=Dy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Mx({channel:n,markDef:s,encoding:r,model:e}):Mx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const y=Rl(n),b=e.markDef[y];return b!=null?{[y]:{value:b}}:{[c]:{field:e.getName(n)}}}const g=Zqt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return g!==void 0?{[c]:g}:ZP(n,s)||ZP(n,{[n]:c$(n,s,a.style),[l]:c$(l,s,a.style)})||ZP(n,a[i])||ZP(n,a.mark)||{[c]:Dte({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Zqt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return $n(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?q1(t,s,{suffix:"start"},{offset:u}):ste({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function ZP(e,t){const n=Rl(e),r=Dy(e);if(t[r]!==void 0)return{[r]:z2(e,t[r])};if(t[e]!==void 0)return{[r]:z2(e,t[e])};if(t[n]){const i=t[n];if(kb(i))vt(Y7t(n));else return{[n]:z2(e,i)}}}function $y(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Pp(t),a=Rl(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Zr("size",i,n,{vgChannel:a}),p=DMe(t),g=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return bt(u)&&(Oi(u.bin)||oa(u.bin)||u.timeUnit&&!l)&&!(h&&!kb(h))&&!r[p]&&!qo(f)?nWt({fieldDef:u,fieldDef2:l,channel:t,model:e}):($n(u)&&qo(f)||g)&&!l?tWt(u,t,e):MLe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function eWt(e,t,n,r,i,s,o){if(kb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=ug("minBandSize",{type:o},r);return{signal:c?`max(${ld(c)}, ${l})`:l}}else i.band!==1&&(vt(izt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Xt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(gv(u)&&Or(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=Ms(u,o==="bar"?l:c);if(Xt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Or(f))return{signal:`${1-f} * ${e}`}}return{value:b$(r.view,e)-2}}function tWt(e,t,n){var N,P;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Rl(t),f=Pp(t),d=DMe(t),h=n.scaleName(d),p=n.getScaleComponent(jee(t)),g=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let y;(i.size||r.size)&&(g?y=$o("size",n,{vgChannel:c,defaultRef:Bi(r.size)}):vt(uzt(r.type)));const b=!!y,_=N$e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(N=l||p)==null?void 0:N.get("type"),useVlSizeChannel:g});y=y||{[c]:eWt(c,h||u,p||l,s,_,!!e,r.type)};const E=((P=l||p)==null?void 0:P.get("type"))==="band"&&kb(_)&&!b?"top":"middle",C=OLe(t,r,s,E),x=C==="xc"||C==="yc",{offset:T,offsetType:A}=Mx({channel:t,markDef:r,encoding:i,model:n,bandPosition:x?.5:0}),k=ste({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:Dte({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:x?A==="encoding"?0:.5:Xt(_)?{signal:`(1-${_})/2`}:kb(_)?(1-_.band)/2:0});if(c)return{[C]:k,...y};{const D=Dy(f),j=y[c],M=T?{...j,offset:T}:j;return{[C]:k,[D]:nt(k)?[k[0],{...k[1],offset:M}]:{...k,offset:M}}}}function Age(e,t,n,r,i,s,o){if(AMe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Xt(n)||Xt(i)||Xt(r)||s){const l=ld(n),c=ld(i),f=ld(r),d=ld(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,g=f?`${f} + `:"",y=l?`(${l} ? -1 : 1) * `:"",b=c?`(${c} + ${p})`:p;return{signal:g+y+b}}else return i=i||0,r+(n?-i-u:+i+u)}function nWt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var P;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=N$e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(P=r.component.axes[n])==null?void 0:P[0],h=(d==null?void 0:d.get("translate"))??.5,p=$s(n)?Zr("binSpacing",s,i)??0:0,g=Pp(n),y=Dy(n),b=Dy(g),_=ug("minBandSize",s,i),{offset:E}=Mx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:C}=Mx({channel:g,markDef:s,encoding:o,model:r,bandPosition:0}),x=hVt({fieldDef:e,scaleName:u}),T=Age(n,p,c,h,E,_,x),A=Age(g,p,c,h,C??E,_,x),k=Xt(f)?{signal:`(1-${f.signal})/2`}:kb(f)?(1-f.band)/2:.5,N=Oy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Oi(e.bin)||e.timeUnit){const D=e.timeUnit&&N!==.5;return{[b]:Ige({fieldDef:e,scaleName:u,bandPosition:k,offset:A,useRectOffsetField:D}),[y]:Ige({fieldDef:e,scaleName:u,bandPosition:Xt(k)?{signal:`1-${k.signal}`}:1-k,offset:T,useRectOffsetField:D})}}else if(oa(e.bin)){const D=q1(e,u,{},{offset:A});if(bt(t))return{[b]:D,[y]:q1(t,u,{},{offset:T})};if(d_(e.bin)&&e.bin.step)return{[b]:D,[y]:{signal:`scale("${u}", ${Ct(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}vt(ZMe(g))}function Ige({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return d$({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:I4,endSuffix:k4}:{}})}const rWt=new Set(["aria","width","height"]);function If(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?DLe(e):{};return{...iWt(e.markDef,t),...kge(e,"fill",n),...kge(e,"stroke",r),...$o("opacity",e),...$o("fillOpacity",e),...$o("strokeOpacity",e),...$o("strokeWidth",e),...$o("strokeDash",e),...Yqt(e),...NLe(e),...Pte(e,"href"),...qqt(e)}}function kge(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Zr("invalid",s,r)==="hide"&&n&&!m_(i)){const a=sWt(e,{invalid:!0,channels:l4});if(a)return{[t]:[{test:a,value:null},...Pt(n)]}}return n?{[t]:n}:{}}function iWt(e,t){return w7t.reduce((n,r)=>(!rWt.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Bi(e[r])),n),{})}function sWt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&wc(u)&&(s[l]=!0)}return s},{}),i=ht(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>ote(o,t)).join(` ${s} `)}}function Ote(e){const{config:t,markDef:n}=e;if(Zr("invalid",n,t)){const i=oWt(e,{channels:Dp});if(i)return{defined:{signal:i}}}return{}}function oWt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&wc(l)&&(s[c]=!0)}return s},{}),i=ht(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>ote(o,t)).join(` ${s} `)}}function Rge(e,t){if(t!==void 0)return{[e]:Bi(t)}}const ZB="voronoi",$Le={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(ZB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(m_(s))return vt(A7t(s)),n;const o={name:e.getName(ZB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...NLe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(ZB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},LLe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Ste(e.bind),parse:(e,t,n)=>qLe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=$Le.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=ns(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Rb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${xt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+Ly)[0],o=r+tR,a=i.items.map(l=>ns(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},E$="_toggle",FLe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+E$,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Ly,r=t.name+E$;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${G1(e)}}, `)+`${r} ? ${n} : null`}},aWt={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Dt(t.clear)?lv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(LLe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===ns(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+Ly);r(i,"null"),FLe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+E$),r(i,"false"))}return n}},jLe={defined:e=>{const t=e.resolve==="global"&&e.bind&&Ste(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==kd;return t&&!n&&vt(N7t),t&&n},parse:(e,t,n)=>{const r=An(n);if(r.select=Dt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},qLe(t,r),Mt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=KB(t.bind)?t.bind.legend:"click",s=Dt(i)?lv(i,"view"):Pt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=KB(t.bind)&&t.bind.legend,s=o=>a=>{const u=An(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${ns(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+Ly),o=r+tR,a=i.items.filter(d=>d.hasLegend).map(d=>ns(`${r}_${ns(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+E$),f=KB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function uWt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of pa(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&jLe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const BLe="_translate_anchor",ULe="_translate_delta",lWt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Lm.defined(t),s=r+BLe,{x:o,y:a}=t.project.hasChannel;let u=lv(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+TE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?$H(e,rs):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?$H(e,Yo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+ULe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Nge(e,t,o,"width",n),a!==void 0&&Nge(e,t,a,"height",n),n}};function Nge(e,t,n,r,i){const s=t.name,o=s+BLe,a=s+ULe,u=n.channel,l=Lm.defined(t),c=i.filter(x=>x.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),g=l?u===rs?p?"":"-":p?"-":"":"",y=`${o}.extent_${u}`,b=`${g}${a}.${u} / ${l?`${f}`:`span(${y})`}`,_=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",E=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",C=`${_}(${y}, ${b}${E})`;c.on.push({events:{signal:a},update:l?C:`clampRange(${C}, 0, ${f})`})}const zLe="_zoom_anchor",VLe="_zoom_delta",cWt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Lm.defined(t),s=r+VLe,{x:o,y:a}=t.project.hasChannel,u=xt(e.scaleName(rs)),l=xt(e.scaleName(Yo));let c=lv(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+TE,f))),n.push({name:r+zLe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Pge(e,t,o,"width",n),a!==void 0&&Pge(e,t,a,"height",n),n}};function Pge(e,t,n,r,i){const s=t.name,o=n.channel,a=Lm.defined(t),u=i.filter(_=>_.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?$H(e,o):u.name,h=s+VLe,p=`${s}${zLe}.${o}`,g=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",y=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",b=`${g}(${d}, ${p}, ${h}${y})`;u.on.push({events:{signal:h},update:a?b:`clampRange(${b}, 0, ${l})`})}const Nb="_store",Ly="_tuple",fWt="_modify",HLe="vlSelectionResolve",N4=[Hqt,zqt,Bqt,FLe,LLe,Lm,jLe,aWt,lWt,cWt,$Le];function dWt(e){let t=e.parent;for(;t&&!oc(t);)t=t.parent;return t}function G1(e,{escape:t}={escape:!0}){let n=t?xt(e.name):e.name;const r=dWt(e);if(r){const{facet:i}=r;for(const s of rf)i[s]&&(n+=` + '__facet_${s}_' + (facet[${xt(r.vgField(s))}])`)}return n}function Mte(e){return pa(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function qLe(e,t){(Dt(t.select)||!t.select.on)&&delete e.events,(Dt(t.select)||!t.select.clear)&&delete e.clear,(Dt(t.select)||!t.select.toggle)&&delete e.toggle}function LH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...LH(e.object)),t.push(...LH(e.property))),t)}function WLe(e){return e.object.type==="MemberExpression"?WLe(e.object):e.object.name==="datum"}function GLe(e){const t=tee(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&WLe(r)&&n.add(LH(r).slice(1).join("."))}),n}class YS extends hi{clone(){return new YS(null,this.model,An(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=x$(this.model,this.filter,this),this._dependentFields=GLe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function hWt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=ns(i.name),o=i.select,a=Dt(o)?o:o.type,u=Mt(o)?An(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=An(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:Dt(u.on)?lv(u.on,"scope"):Pt(An(u.on))},f=An(i);for(const d of N4)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function YLe(e,t,n,r="datum"){const i=Dt(t)?t:t.param,s=ns(i),o=xt(s+Nb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${xt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function KLe(e,t,n){const r=ns(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&vt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${xt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,vt((a.length?"Multiple ":"No ")+`matching ${xt(i)} encoding found for selection ${xt(n.param)}. Using "field": ${xt(s)}.`)):s=a[0].field}return`${o.name}[${xt(gf(s))}]`}function pWt(e,t){for(const[n,r]of Py(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new bl(new YS(t,e,{param:n}),i,Ji.Lookup,e.component.data.outputNodeRefCounts)}}function x$(e,t,n){return U2(t,r=>Dt(r)?r:qzt(r)?YLe(e,r,n):f$e(r))}function mWt(e,t){if(e)return nt(e)&&!g0(e)?e.map(n=>mte(n,t)).join(", "):e}function eU(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function i2(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=YVt[h],g=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(eR(g)){const{condition:y,...b}=g,_=Pt(y),E=oge[h];if(E){const{vgProp:C,part:x}=E,T=[..._.map(A=>{const{test:k,...N}=A;return{test:x$(null,k),...N}}),b];eU(c,x,C,T),delete c[h]}else if(E===null){const C={signal:_.map(x=>{const{test:T,...A}=x;return`${x$(null,T)} ? ${Hme(A)} : `}).join("")+Hme(b)};c[h]=C}}else if(Xt(g)){const y=oge[h];if(y){const{vgProp:b,part:_}=y;eU(c,_,b,g),delete c[h]}}gr(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},gi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ms(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Xt(c.encode.labels.update.text)&&(p=Sb(a,"datum.label",c.encode.labels.update.text.signal)),eU(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of U$e)e.hasAxisPart(p)||delete c.encode[p];gi(c.encode)&&delete c.encode}const h=mWt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Ms(l,0)}}}}function XLe(e){const{axes:t}=e.component,n=[];for(const r of Dp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function gWt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>i2(i,"grid",t)),...r.map(i=>i2(i,"grid",t)),...n.map(i=>i2(i,"main",t)),...r.map(i=>i2(i,"main",t))].filter(i=>i)}function Dge(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...ht(o),...ht(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${ld(o[c])} : ${ld(a[c])}`};return l}return t[i]})])}function yWt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:m$e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Xt(n)?"axisOrient":`axis${Hk(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Dge(a,r,e,n),vgAxisConfig:Dge(u,r,e,n),axisConfigStyle:vWt([...u,...a],r)}}function vWt(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Pt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function FH(e,t,n,r={}){var s;const i=VMe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Oge={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??bWt(n,e),gridScale:({model:e,channel:t})=>_Wt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||JLe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||QLe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??EWt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??xWt(t.type,n,bt(t)&&!!t.timeUnit,bt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??TWt({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:CWt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=ZLe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return qMe(i?[ige(i)]:[],bt(o)?[ige(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>AWt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??IWt(n,t)};function bWt(e,t){return!qo(e)&&bt(t)&&!Oi(t==null?void 0:t.bin)&&!oa(t==null?void 0:t.bin)}function _Wt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function wWt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Xt(s)?s:cI(s);{const{configValue:o}=FH("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?cI(o):n===rs&&gr([ite,rte],e.type)&&!(bt(e)&&e.timeUnit)?270:void 0}}function jH(e){return`(((${e.signal} % 360) + 360) % 360)`}function QLe(e,t,n,r){if(e!==void 0)if(n==="x"){if(Xt(e)){const i=jH(e),s=Xt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Xt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Xt(e)){const i=jH(e),s=Xt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Xt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function JLe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Xt(e)){const o=jH(e),a=Xt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Xt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function EWt(e,t){if(t==="x"&&gr(["quantitative","temporal"],e))return!0}function xWt(e,t,n,r){if(n&&!Mt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function SWt(e){return e==="x"?"bottom":"left"}function TWt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!qo(t)&&t!=="log"){if(bt(e)){if(Oi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&gr(["month","hours","day","quarter"],(i=Ho(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function CWt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(bt(t)){const{timeUnit:n}=t;if(n){const r=u$e(n);if(r)return{signal:r}}}}function ZLe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return WMe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function AWt(e,t){const n=e.values;if(nt(n))return B$e(t,n);if(Xt(n))return n}function IWt(e,t){return e==="rect"&&m$(t)?1:0}class $x extends hi{clone(){return new $x(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=GLe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(g_(r)&&R$e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${f$e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new $x(t,{calculate:u,as:Lx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${mr(this.transform)}`}}function Lx(e,t,n){return Ct(e,{prefix:t,suffix:"sort_index",...n})}function P4(e,t){return gr(["top","bottom"],t)?"column":gr(["left","right"],t)||e==="row"?"row":"column"}function Fx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ms((t||{})[e],i[e],n.header[e])}function D4(e,t,n,r){const i={};for(const s of e){const o=Fx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const $te=["row","column"],Lte=["header","footer"];function kWt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=D4(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=P4(t,a),l=cI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...t6e(l,u),...e6e(u,l,s),...n6e(r,i,t,gHt,iLe)}}}function e6e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=JLe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function t6e(e,t){const n=QLe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function RWt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Lte)if(n[i])for(const s of n[i]){const o=PWt(e,t,i,n,s);o!=null&&r.push(o)}return r}function NWt(e,t){const{sort:n}=e;return Hh(n)?{field:Ct(n,{expr:"datum"}),order:n.order??"ascending"}:nt(n)?{field:Lx(e,t,{expr:"datum"}),order:"ascending"}:{field:Ct(e,{expr:"datum"}),order:n??"ascending"}}function BH(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=D4(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=ute({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=P4(t,a);return{text:{signal:u?Sb(Sb(u,"datum.label",l),"datum.value",Ct(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...t6e(s,c),...e6e(c,s,o),...n6e(n,e,t,yHt,sLe)}}function PWt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=D4(["labelOrient"],o.header,a,t);(t==="row"&&!gr(["top","bottom"],f)||t==="column"&&!gr(["left","right"],f))&&(s=BH(o,t,a))}const u=oc(e)&&!Qk(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:NWt(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const DWt={column:{start:0,end:1},row:{start:1,end:0}};function OWt(e,t){return DWt[t][e]}function MWt(e,t){const n={};for(const r of rf){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=D4(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=P4(r,o),u=OWt(s,a);u!==void 0&&(n[a]=u)}}return gi(n)?void 0:n}function n6e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Fx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Fte(e){return[...eD(e,"width"),...eD(e,"height"),...eD(e,"childWidth"),...eD(e,"childHeight")]}function eD(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(qo(o)&&gv(a)){const u=e.scaleName(n);return oc(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Mge(u,a)]:[Mge(u,a),{name:i,update:r6e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=PH(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Mge(e,t){const n=`${e}_step`;return Xt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function r6e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Ms(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${ld(o)}, ${ld(s)}) * ${e}_step`}function i6e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function s6e(e,t){return ht(e).reduce((n,r)=>{const i=e[r];return{...n,...GS(t,i,r,s=>Bi(s.value))}},{})}function o6e(e,t){if(oc(t))return e==="theta"?"independent":"shared";if(QS(t))return"shared";if(qte(t))return $s(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function jte(e,t){const n=e.scale[t],r=$s(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&vt(hzt(t)),"independent"):e[r][t]||"shared"}const $Wt={..._Ht,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},a6e=ht($Wt);class LWt extends Og{}const $ge={symbols:FWt,gradient:jWt,labels:BWt,entries:UWt};function FWt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...S7t({},n,xVt),...DLe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,g=d===void 0?u6e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Il)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=Bi(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=Bi(g??1));else if(nt(f.fill)){const y=UH(a.fill??a.color)??o.fill??(c&&o.color);y&&(f.fill=Bi(y))}}if(f.stroke){if(r==="stroke"||!c&&r===Il)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(nt(f.stroke)){const y=Ms(UH(a.stroke||a.color),o.stroke,c?o.color:void 0);y&&(f.stroke={value:y})}}if(r!==Ng){const y=bt(t)&&c6e(n,i,t);y?f.opacity=[{test:y,...Bi(g??1)},Bi(u.legend.unselectedOpacity)]:g&&(f.opacity=Bi(g))}return f={...f,...e},gi(f)?void 0:f}function jWt(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?u6e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=Bi(l)),a={...a,...e},gi(a)?void 0:a}function BWt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=bt(t)?c6e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;Ib(c)?f=fd({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=fd({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&bt(t)&&t.timeUnit===void 0&&(f=fd({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return gi(d)?void 0:d}function UWt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function u6e(e){return l6e(e,(t,n)=>Math.max(t,n.value))}function UH(e){return l6e(e,(t,n)=>Ms(t,n.value))}function l6e(e,t){if($Vt(e))return Pt(e.condition).reduce(t,e.value);if(Id(e))return e.value}function c6e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=xt(n.field);return r.map(s=>`(!length(data(${xt(ns(s)+Nb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Lge={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return w$e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return E$e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??YWt(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??KWt(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??VWt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>SE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(xE(n)&&cd(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>zWt(t,e)};function zWt(e,t){const n=e.values;if(nt(n))return B$e(t,n);if(Xt(n))return n}function VWt(e,t,n,r){if(t!=="shape"){const i=UH(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function HWt(e){const{legend:t}=e;return Ms(t.type,qWt(e))}function qWt({channel:e,timeUnit:t,scaleType:n}){if(xE(e)){if(gr(["quarter","month","day"],t))return"symbol";if(cd(n))return"gradient"}return"symbol"}function WWt({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??GWt(n,t)}function GWt(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function YWt({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(cd(i))return n==="horizontal"?r==="top"||r==="bottom"?Fge(t,"width",o,s):o:Fge(t,"height",u,a)}function Fge(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function KWt(e){if(gr(["quantile","threshold","log","symlog"],e))return"greedy"}function f6e(e){const t=_s(e)?XWt(e):eGt(e);return e.component.legends=t,t}function XWt(e){const{encoding:t}=e,n={};for(const r of[Il,...aLe]){const i=mo(t[r]);!i||!e.getScaleComponent(r)||r===kl&&bt(i)&&i.type===WS||(n[r]=ZWt(e,r))}return n}function QWt(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function JWt(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function ZWt(e,t){var C;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new LWt({},QWt(e,t));uWt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=mo(i[t]),f=bt(c)?(C=Ho(c.timeUnit))==null?void 0:C.unit:void 0,d=n.orient||s.legend.orient||"right",h=HWt({legend:n,channel:t,timeUnit:f,scaleType:l}),p=WWt({legend:n,legendType:h,orient:d,legendConfig:o}),g={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const x of a6e){if(h==="gradient"&&x.startsWith("symbol")||h==="symbol"&&x.startsWith("gradient"))continue;const T=x in Lge?Lge[x](g):n[x];if(T!==void 0){const A=JWt(T,x,n,e.fieldDef(t));(A||s.legend[x]===void 0)&&a.set(x,T,A)}}const y=(n==null?void 0:n.encoding)??{},b=a.get("selections"),_={},E={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const x of["labels","legend","title","symbols","gradient","entries"]){const T=s6e(y[x]??{},e),A=x in $ge?$ge[x](T,E):T;A!==void 0&&!gi(A)&&(_[x]={...b!=null&&b.length&&bt(c)?{name:`${ns(c.field)}_legend_${x}`}:{},...b!=null&&b.length?{interactive:!!b}:{},update:A})}return gi(_)||a.set("encode",_,!!(n!=null&&n.encoding)),a}function eGt(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){f6e(r);for(const i of ht(r.component.legends))n.legend[i]=jte(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=d6e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ht(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function d6e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of a6e){const c=My(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return tGt(f,d);case"title":return GMe(f,d);case"type":return i=!0,zl("symbol")}return A4(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&l$(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&l$(e.explicit,["encode","gradient"])),e}function tGt(e,t){return t.value==="circle"?t:e}function nGt(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function h6e(e){const t=e.component.legends,n={};for(const i of ht(t)){const s=e.getScaleComponent(i),o=yi(s.get("domains"));if(n[o])for(const a of n[o])d6e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return pa(n).flat().map(i=>rGt(i,e.config)).filter(i=>i!==void 0)}function rGt(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of aLe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Xt(s.encode.labels.update.text)&&(l=Sb(r,"datum.label",s.encode.labels.update.text.signal)),nGt(s,"labels","text",{signal:l})}return s}}function iGt(e){return QS(e)||qte(e)?sGt(e):p6e(e)}function sGt(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),p6e(e))}function p6e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Xt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return gr(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const oGt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class m6e extends Og{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function g6e(e){e.component.projection=_s(e)?aGt(e):cGt(e)}function aGt(e){if(e.hasProjection){const t=sl(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?uGt(e):void 0,s=new m6e(e.projectionName(!0),{...sl(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function uGt(e){const t=[],{encoding:n}=e;for(const r of[[zd,Ud],[yf,Vd]])(mo(n[r[0]])||mo(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(kl)&&e.typedFieldDef(kl).type===WS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ji.Main)),t}function lGt(e,t){const n=Pee(oGt,i=>!!(!on(e.explicit,i)&&!on(t.explicit,i)||on(e.explicit,i)&&on(t.explicit,i)&&nc(e.get(i),t.get(i))));if(nc(e.size,t.size)){if(n)return e;if(nc(e.explicit,{}))return t;if(nc(t.explicit,{}))return e}return null}function cGt(e){if(e.children.length===0)return;let t;for(const r of e.children)g6e(r);const n=Pee(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=lGt(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new m6e(r,t.specifiedProjection,t.size,An(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function fGt(e,t,n,r){if(Zk(t,n)){const i=_s(e)?e.axis(n)??e.legend(n)??{}:{},s=Ct(t,{expr:"datum"}),o=Ct(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Ct(t,{binSuffix:"range",forAs:!0}),formula:Xk(s,o,i.format,i.formatType,r)}}return{}}function y6e(e,t){return`${jMe(e)}_${t}`}function dGt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Bte(e,t,n){const r=w4(n,void 0)??{},i=y6e(r,t);return e.getName(`${i}_bins`)}function hGt(e){return"as"in e}function jge(e,t,n){let r,i;hGt(e)?r=Dt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Ct(e,{forAs:!0}),Ct(e,{binSuffix:"end",forAs:!0})];const s={...w4(t,void 0)},o=y6e(s,e.field),{signal:a,extentSignal:u}=dGt(n,o);if(c4(s.extent)){const c=s.extent;i=KLe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Wh extends hi{clone(){return new Wh(null,An(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ku(s)&&Oi(s.bin)){const{key:a,binComponent:u}=jge(s,s.bin,n);i[a]={...u,...i[a],...fGt(n,s,o,n.config)}}return i},{});return gi(r)?null:new Wh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=jge(n,n.bin,r);return new Wh(t,{[i]:s})}merge(t,n){for(const r of ht(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Nh([...this.bins[r].as,...t.bins[r].as],mr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(pa(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(pa(this.bins).map(t=>t.field))}hash(){return`Bin ${mr(this.bins)}`}assemble(){return pa(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:gf(t.field),as:r,signal:t.signal,...c4(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:gf(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Ct({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function pGt(e,t,n,r){var s;const i=_s(r)?r.encoding[Pp(t)]:void 0;if(ku(n)&&_s(r)&&P$e(n,i,r.markDef,r.config)){e.add(Ct(n,{})),e.add(Ct(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Oy({fieldDef:n,markDef:a,config:u});fI(o)&&l!==.5&&$s(t)&&(e.add(Ct(n,{suffix:I4})),e.add(Ct(n,{suffix:k4}))),n.bin&&Zk(n,t)&&e.add(Ct(n,{binSuffix:"range"}))}else if(kMe(t)){const o=IMe(t);e.add(r.getName(o))}else e.add(Ct(n));return g_(n)&&iVt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function mGt(e,t){for(const n of ht(t)){const r=t[n];for(const i of ht(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class vd extends hi{clone(){return new vd(null,new Set(this.dimensions),An(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Ct(o,{forAs:!0})]);else{if(ag(u)||mv(u)){const c=ag(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Ct({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Ct(o,{forAs:!0})]);Pg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Ct({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Ct({field:l,aggregate:"max"},{forAs:!0})]))}else pGt(s,a,o,n)}),s.size+ht(i).length===0)?null:new vd(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Ct(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Ct(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+ht(i).length===0?null:new vd(t,r,i)}merge(t){return _Me(this.dimensions,t.dimensions)?(mGt(this.measures,t.measures),!0):(kzt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ht(this.measures)])}producedFields(){const t=new Set;for(const n of ht(this.measures))for(const r of ht(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${mr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of ht(this.measures))for(const o of ht(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:gf(s));return{type:"aggregate",groupby:[...this.dimensions].map(gf),ops:t,fields:n,as:r}}}class KS extends hi{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of rf){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Ct(o),...Oi(a)?[Ct(o,{binSuffix:"end"})]:[]],...Hh(u)?{sortField:u}:nt(u)?{sortIndexField:Lx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of rf)this[n]&&(t+=` ${n.charAt(0)}:${mr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of rf)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of rf)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Dp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(qo(i)&&gv(s)){const o=O4(this.childModel,n),a=Hte(o);a?t[n]=a:vt(qee(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=y4,field:f}=u;s.push(f),o.push(c),a.push(Ct(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of $te){for(const c of Lte){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[$m,Mm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Bge(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function gGt(e,t){const n=Mee(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Bge(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Bge(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return vt(F7t(t)),null}function yGt(e){const t={};return fO(e.filter,n=>{if(c$e(n)){let r=null;Kee(n)?r=Kl(n.equal):Qee(n)?r=Kl(n.lte):Xee(n)?r=Kl(n.lt):Jee(n)?r=Kl(n.gt):Zee(n)?r=Kl(n.gte):ete(n)?r=n.range[0]:tte(n)&&(r=(n.oneOf??n.in)[0]),r&&(h_(r)?t[n.field]="date":Or(r)?t[n.field]="number":Dt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function vGt(e){const t={};function n(r){Dx(r)?t[r.field]="date":r.type==="quantitative"&&m7t(r.aggregate)?t[r.field]="number":Cx(r.field)>1?r.field in t||(t[r.field]="flatten"):g_(r)&&Hh(r.sort)&&Cx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((_s(e)||oc(e))&&e.forEachFieldDef((r,i)=>{if(ku(r))n(r);else{const s=f_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),_s(e)){const{mark:r,markDef:i,encoding:s}=e;if(m_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];bt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function bGt(e){const t={};if(_s(e)&&e.component.selection)for(const n of ht(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Cx(i.field)>1&&(t[i.field]="flatten")}return t}class Ba extends hi{clone(){return new Ba(null,An(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${mr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!J0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of ht(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:vt(Xme(a,r[a],u.value)))}for(const a of ht(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:vt(Xme(a,n[a],u)))}const s=new Og(n,r);i.copyAll(s);const o={};for(const a of ht(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return ht(o).length===0||i.parseNothing?null:new Ba(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ht(this._parse)){const r=this._parse[n];Cx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(ht(this._parse))}dependentFields(){return new Set(ht(this._parse))}assembleTransforms(t=!1){return ht(this._parse).filter(n=>t?Cx(n)>1:!0).map(n=>{const r=gGt(n,this._parse[n]);return r?{type:"formula",expr:r,as:HS(n)}:null}).filter(n=>n!==null)}}class Fy extends hi{clone(){return new Fy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([kd])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:kd}}}class nR extends hi{clone(){return new nR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${mr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class rR extends hi{clone(){return new rR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${mr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Pb extends hi{constructor(t){super(null),t??(t={name:"source"});let n;if(J0(t)||(n=t.format?{...yl(t.format,["parse"])}:{}),dI(t))this._data={values:t.values};else if(Ox(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];gr(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else TLe(t)?this._data={values:[{type:"Sphere"}]}:(xLe(t)||J0(t))&&(this._data={});this._generator=J0(t),t.name&&(this._name=t.name),n&&!gi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Uge=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},_Gt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},s2;function Ute(e){return e instanceof Pb||e instanceof nR||e instanceof rR}class zte{constructor(){s2.set(this,void 0),Uge(this,s2,!1,"f")}setModified(){Uge(this,s2,!0,"f")}get modifiedFlag(){return _Gt(this,s2,"f")}}s2=new WeakMap;class y_ extends zte{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Vte extends zte{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class wGt extends Vte{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ht(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class EGt extends Vte{constructor(t){super(),this.requiresSelectionId=t&&Mte(t)}run(t){t instanceof Fy&&(this.requiresSelectionId&&(Ute(t.parent)||t.parent instanceof vd||t.parent instanceof Ba)||(this.setModified(),t.remove()))}}class xGt extends zte{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof qh&&(r=t.producedFields(),Dee(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class SGt extends Vte{constructor(){super()}run(t){t instanceof bl&&!t.isRequired()&&(this.setModified(),t.remove())}}class TGt extends y_{run(t){if(!Ute(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Ba)if(t instanceof Ba)this.setModified(),t.merge(n);else{if(Oee(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class CGt extends y_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Ba);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of ht(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!gi(i)){this.setModified();const o=new Ba(t,i);for(const a of n){if(a instanceof Ba)for(const u of ht(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof Ba&&ht(a.parse).length===0&&a.remove()}}}}}class AGt extends y_{run(t){t instanceof bl||t.numChildren()>0||t instanceof KS||t instanceof Pb||(this.setModified(),t.remove())}}class IGt extends y_{run(t){const n=t.children.filter(i=>i instanceof qh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class kGt extends y_{run(t){const n=t.children.filter(i=>i instanceof vd),r={};for(const i of n){const s=mr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of ht(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class RGt extends y_{constructor(t){super(),this.model=t}run(t){const n=!(Ute(t)||t instanceof YS||t instanceof Ba||t instanceof Fy),r=[],i=[];for(const s of t.children)s instanceof Wh&&(n&&!Oee(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Wh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class NGt extends y_{run(t){const n=[...t.children];if(!xb(n,o=>o instanceof bl)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof bl){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof bl)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class v_ extends hi{clone(){return new v_(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Nh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Ct(t)}hash(){return`JoinAggregateTransform ${mr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function PGt(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Ct(r);return i&&t.push(i),t},[])}function DGt(e){return nt(e)&&e.every(t=>Dt(t))&&e.length>1}class Fm extends hi{clone(){return new Fm(null,An(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Ms(f.order,"ascending"));const l={field:a,order:u};let c;return DGt(s)?c=s:Dt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Fm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return cp(p)}).filter(h=>!!h),c=PGt(n),f=n.encoding.order;let d;if(nt(f)||bt(f))d=HMe(f);else{const h=D$e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,g)=>(p.field.includes(g)||(p.field.push(g),p.order.push(h)),p),{field:[],order:[]})}return new Fm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${mr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Ct(i,{binSuffix:"mid"})]:[Ct(i,{}),Ct(i,{binSuffix:"end"})]:[Ct(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Ct(c,{expr:"datum"}),p=Ct(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Ct(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Ct(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class XS extends hi{clone(){return new XS(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Nh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Ct(t)}hash(){return`WindowTransform ${mr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Vee(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function OGt(e){function t(n){if(!(n instanceof KS)){const r=n.clone();if(r instanceof bl){const i=VH+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof vd||r instanceof Fm||r instanceof XS||r instanceof v_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function zH(e){if(e instanceof KS)if(e.numChildren()===1&&!(e.children[0]instanceof bl)){const t=e.children[0];(t instanceof vd||t instanceof Fm||t instanceof XS||t instanceof v_)&&t.addDimensions(e.fields),t.swapWithParent(),zH(e)}else{const t=e.model.component.data.main;v6e(t);const n=OGt(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(zH)}function v6e(e){if(e instanceof bl&&e.type===Ji.Main&&e.numChildren()===1){const t=e.children[0];t instanceof KS||(t.swapWithParent(),v6e(e))}}const VH="scale_",tD=5;function HH(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!HH(t.children))return!1}return!0}function jf(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function zge(e,t,n){let r=e.sources,i=!1;return i=jf(new SGt,r)||i,i=jf(new EGt(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=jf(new AGt,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=jf(new TGt,r)||i,i=jf(new RGt(t),r)||i,i=jf(new xGt,r)||i,i=jf(new CGt,r)||i,i=jf(new kGt,r)||i,i=jf(new IGt,r)||i,i=jf(new wGt,r)||i,i=jf(new NGt,r)||i),e.sources=r,i}function MGt(e,t){HH(e.sources);let n=0,r=0;for(let i=0;i<tD&&zge(e,t,!0);i++)n++;e.sources.map(zH);for(let i=0;i<tD&&zge(e,t,!1);i++)r++;HH(e.sources),Math.max(n,r)===tD&&vt(`Maximum optimization runs(${tD}) reached.`)}class Oo{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Oo(()=>t(n))}}function b6e(e){_s(e)?$Gt(e):LGt(e)}function $Gt(e){const t=e.component.scales;for(const n of ht(t)){const r=jGt(e,n);if(t[n].setWithExplicit("domains",r),UGt(e,n),e.component.data.isFaceted){let s=e;for(;!oc(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Im(a)&&(a.data=VH+a.data.replace(VH,""))}}}function LGt(e){for(const n of e.children)b6e(n);const t=e.component.scales;for(const n of ht(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=My(r,o.getWithExplicit("domains"),"domains","scale",qH);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&vt(O7t),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function FGt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Vge(t,n);if(!i){vt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Vge(t,n);if(i)return"unaggregated"}return e}function jGt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=FGt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&mo(r.x2)?mo(r.x)?My(u0(n,i,e,"x"),u0(n,i,e,"x2"),"domain","scale",qH):u0(n,i,e,"x2"):t==="y"&&mo(r.y2)?mo(r.y)?My(u0(n,i,e,"y"),u0(n,i,e,"y2"),"domain","scale",qH):u0(n,i,e,"y2"):u0(n,i,e,t)}function BGt(e,t,n){return e.map(r=>({signal:`{data: ${E4(r,{timeUnit:n,type:t})}}`}))}function tU(e,t,n){var i;const r=(i=Ho(n))==null?void 0:i.unit;return t==="temporal"||r?BGt(e,t,r):[e]}function u0(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=mo(i[r]),{type:c}=l,f=l.timeUnit;if(rVt(t)){const p=u0(e,void 0,n,r),g=tU(t.unionWith,c,f);return dh([...g,...p.value])}else{if(Xt(t))return dh([t]);if(t&&t!=="unaggregated"&&!y$e(t))return dh(tU(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return zl([[0,1]]);const p=n.requestDataName(Ji.Main);return zl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=Pg(r)&&bt(l)?zGt(n,r,e):void 0;if(Op(l)){const p=tU([l.datum],c,f);return zl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Ji.Main),{field:g}=l;return zl([{data:p,field:Ct({field:g,aggregate:"min"})},{data:p,field:Ct({field:g,aggregate:"max"})}])}else if(Oi(h.bin)){if(qo(e))return zl(e==="bin-ordinal"?[]:[{data:lI(d)?n.requestDataName(Ji.Main):n.requestDataName(Ji.Raw),field:n.vgField(r,Zk(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!Mt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Oi(p)){const g=Bte(n,h.field,p);return zl([new Oo(()=>{const y=n.getSignalName(g);return`[${y}.start, ${y}.stop]`})])}else return zl([{data:n.requestDataName(Ji.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&gr(["time","utc"],e)){const p=i[Pp(r)];if(P$e(h,p,s,a)){const g=n.requestDataName(Ji.Main),y=Oy({fieldDef:h,fieldDef2:p,markDef:s,config:a}),b=fI(o)&&y!==.5&&$s(r);return zl([{data:g,field:n.vgField(r,b?{suffix:I4}:{})},{data:g,field:n.vgField(r,{suffix:b?k4:"end"})}])}}return zl(d?[{data:lI(d)?n.requestDataName(Ji.Main):n.requestDataName(Ji.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Ji.Main),field:n.vgField(r)}])}function nU(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":y4),...r?{field:gf(r)}:{},...i?{order:i}:{}}}function UGt(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=y$e(r)&&r,o=d_(i)&&c4(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function zGt(e,t,n){if(!qo(n))return;const r=e.fieldDef(t),i=r.sort;if(R$e(i))return{op:"min",field:Lx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Hh(i)){const a=s&&!o.has(i.field);return nU(i,a)}else if(k$e(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(ag(c)||mv(c))return nU({field:Ct(l),order:u},d);if(Vee(c)||!c)return nU({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(gr(["ascending",void 0],i))return!0}}function Vge(e,t){const{aggregate:n,type:r}=e;return n?Dt(n)&&!y7t.has(n)?{valid:!1,reason:ozt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:azt(e)}:{valid:!0}:{valid:!1,reason:szt(e)}}function qH(e,t,n,r){return e.explicit&&t.explicit&&vt(dzt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function VGt(e){const t=Nh(e.map(o=>{if(Im(o)){const{sort:a,...u}=o;return u}return o}),mr),n=Nh(e.map(o=>{if(Im(o)){const a=o.sort;return a!==void 0&&!lI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),mr);if(t.length===0)return;if(t.length===1){const o=e[0];if(Im(o)&&n.length>0){let a=n[0];if(n.length>1){vt(Jme);const u=n.filter(l=>Mt(l)&&"op"in l&&l.op!=="min");n.every(l=>Mt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(Mt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Nh(n.map(o=>lI(o)||!("op"in o)||Dt(o.op)&&o.op in h7t?o:(vt(pzt(o)),!0)),mr);let i;r.length===1?i=r[0]:r.length>1&&(vt(Jme),i=!0);const s=Nh(e.map(o=>Im(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Hte(e){if(Im(e)&&Dt(e.field))return e.field;if(v7t(e)){let t;for(const n of e.fields)if(Im(n)&&Dt(n.field)){if(!t)t=n.field;else if(t!==n.field)return vt(mzt),t}return vt(gzt),t}else if(b7t(e)){vt(yzt);const t=e.fields[0];return Dt(t)?t:void 0}}function O4(e,t){const r=e.component.scales[t].get("domains").map(i=>(Im(i)&&(i.data=e.lookupDataSource(i.data)),i));return VGt(r)}function _6e(e){return QS(e)||qte(e)?e.children.reduce((t,n)=>t.concat(_6e(n)),Hge(e)):Hge(e)}function Hge(e){return ht(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=HGt(i.range,s,n,e),h=O4(e,n),p=a?Fqt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function HGt(e,t,n,r){if($s(n)){if(gv(e))return{step:{signal:`${t}_step`}}}else if(Mt(e)&&Im(e))return{...e,data:r.lookupDataSource(e.data)};return e}class w6e extends Og{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:xb(this.get("domains"),t=>nt(t)&&t.length===2&&Or(t[0])&&t[0]<=0&&Or(t[1])&&t[1]>=0)}}const qGt=["range","scheme"];function WGt(e){const t=e.component.scales;for(const n of l4){const r=t[n];if(!r)continue;const i=GGt(n,e);r.setWithExplicit("range",i)}}function qge(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Rl(t),o=e.getName(s);if(Mt(r)&&r.binned&&r.step!==void 0)return new Oo(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Oi(r)){const a=Bte(e,i,r);return new Oo(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function GGt(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of qGt)if(n[f]!==void 0){const d=kH(s,f),h=v$e(e,f);if(!d)vt(QMe(s,f,e));else if(h)vt(h);else switch(f){case"range":{const p=n.range;if(nt(p)){if($s(e))return dh(p.map(g=>{if(g==="width"||g==="height"){const y=t.getName(g),b=t.getSignalName.bind(t);return Oo.fromName(b,y)}return g}))}else if(Mt(p))return dh({data:t.requestDataName(Ji.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return dh(p)}case"scheme":return dh(YGt(n[f]))}}const o=e===rs||e==="xOffset"?"width":"height",a=r[o];if(fp(a)){if($s(e))if(qo(s)){const f=x6e(a,t,e);if(f)return dh({step:f})}else vt(JMe(o));else if(Gk(e)){const f=e===cv?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=S6e(a,s);if(p)return dh(p)}}}const{rangeMin:u,rangeMax:l}=n,c=KGt(e,t);return(u!==void 0||l!==void 0)&&kH(s,"rangeMin")&&nt(c)&&c.length===2?dh([u??c[0],l??c[1]]):zl(c)}function YGt(e){return nVt(e)?{scheme:e.name,...yl(e,["name"])}:{scheme:e}}function E6e(e,t,n,{center:r}={}){const i=Rl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Yo&&wc(n)?r?[Oo.fromName(a=>`${o(a)}/2`,s),Oo.fromName(a=>`-${o(a)}/2`,s)]:[Oo.fromName(o,s),0]:r?[Oo.fromName(a=>`-${o(a)}/2`,s),Oo.fromName(a=>`${o(a)}/2`,s)]:[0,Oo.fromName(o,s)]}function KGt(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=mo(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case rs:case Yo:{if(gr(["point","band"],u)){const f=T6e(e,n,r.view);if(fp(f))return{step:x6e(f,t,e)}}return E6e(e,t,u)}case cv:case qS:return XGt(e,t,u);case Rg:{const f=t.component.scales[e].get("zero"),d=C6e(i,f,r),h=ZGt(i,n,t,r);return Rx(u)?JGt(d,h,QGt(u,r,l,e)):[d,h]}case Af:return[0,Math.PI*2];case c_:return[0,360];case Bd:return[0,new Oo(()=>{const f=t.getSignalName(oc(t.parent)?"child_width":"width"),d=t.getSignalName(oc(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case hv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case pv:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case kl:return"symbol";case Il:case Rp:case Np:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Ng:case fv:case dv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function x6e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=jee(n),o=r[s];if(lLe({step:e,offsetIsDiscrete:$n(o)&&d$e(o.type)})==="offset"&&H$e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${x7t(f)})`}}else return e.step}function S6e(e,t){if(lLe({step:e,offsetIsDiscrete:qo(t)})==="offset")return{step:e.step}}function XGt(e,t,n){const r=e===cv?"x":"y",i=t.getScaleComponent(r);if(!i)return E6e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=T6e(r,t.size,t.config.view);if(fp(l)){const c=S6e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(bt(l)&&l.timeUnit){const c=u$e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Oy({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Xt(f)?`${f.signal}/2`+h:`${f/2+d}`,g=Xt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${g} * (${c})`}]}return[0,{signal:c}]}return vMe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function T6e(e,t,n){const r=e===rs?"width":"height",i=t[r];return i||_$(n,r)}function QGt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&nt(n)?n.length+1:(vt(Czt(r)),3)}}function JGt(e,t,n){const r=()=>{const i=ld(t),s=ld(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Xt(t)?new Oo(r):{signal:r()}}function C6e(e,t,n){if(t)return Xt(t)?{signal:`${t.signal} ? 0 : ${C6e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(f4("size",e))}const Wge=.95;function ZGt(e,t,n,r){const i={x:qge(n,"x"),y:qge(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Gge(t,i,r.view);return Or(s)?s-1:new Oo(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Gge(t,i,r.view);return Or(s)?Math.pow(Wge*s,2):new Oo(()=>`pow(${Wge} * ${s.signal}, 2)`)}}throw new Error(f4("size",e))}function Gge(e,t,n){const r=fp(e.width)?e.width.step:b$(n,"width"),i=fp(e.height)?e.height.step:b$(n,"height");return t.x||t.y?new Oo(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function A6e(e,t){_s(e)?eYt(e,t):k6e(e,t)}function eYt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of ht(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=mo(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),g=c.get("paddingInner"),y=kH(h,t),b=v$e(a,t);if(d!==void 0&&(y?b&&vt(b):vt(QMe(h,t,a))),y&&b===void 0)if(d!==void 0){const _=f.timeUnit,E=f.type;switch(t){case"domainMax":case"domainMin":h_(u[t])||E==="temporal"||_?l.set(t,{signal:E4(u[t],{type:E,timeUnit:_})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const _=t in Yge?Yge[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:g,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:q$e(i,a),hasSecondaryRangeChannel:!!i[Pp(a)]}):r.scale[t];_!==void 0&&l.set(t,_,!1)}}}const Yge={bins:({model:e,fieldOrDatumDef:t})=>bt(t)?tYt(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>nYt(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>rYt(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>iYt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>sYt(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>oYt(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=bt(e)?e.sort:void 0;return aYt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>uYt(e,t,n,r,i,s.scale,o)};function I6e(e){_s(e)?WGt(e):k6e(e,"range")}function k6e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?I6e(r):A6e(r,t);for(const r of ht(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=My(i,a,t,"scale",ELe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function tYt(e,t){const n=t.bin;if(Oi(n)){const r=Bte(e,t.field,n);return new Oo(()=>e.getSignalName(r))}else if(oa(n)&&d_(n)&&n.step!==void 0)return{step:n.step}}function nYt(e,t){if(gr([Il,Rp,Np],e)&&t!=="nominal")return"hcl"}function rYt(e,t,n,r,i,s){var o;if(!((o=cp(s))!=null&&o.bin||nt(n)||i!=null||r!=null||gr([vl.TIME,vl.UTC],e)))return $s(t)?!0:void 0}function iYt(e,t,n,r,i,s){if($s(e)){if(cd(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(bt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===vl.POINT)return n.pointPadding}}function sYt(e,t,n,r,i,s=!1){if(e===void 0){if($s(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:Ms(o,n==="bar"?a:u)}else if(Gk(t)&&r===vl.BAND)return i.offsetBandPaddingInner}}function oYt(e,t,n,r,i,s=!1){if(e===void 0){if($s(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===vl.BAND)return Ms(o,Xt(r)?{signal:`${r.signal}/2`}:r/2)}else if(Gk(t)){if(n===vl.POINT)return .5;if(n===vl.BAND)return i.offsetBandPaddingOuter}}}function aYt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return wc(e)&&t==="descending"?Xt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(wc(e)&&t==="descending")return!0}function uYt(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&wc(i)){if(nt(n)){const u=n[0],l=n[n.length-1];if(Or(u)&&u<=0&&Or(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Rx(i))return!0;if(!(bt(t)&&t.bin)&&gr([...Dp,...s7t],e)){const{orient:u,type:l}=r;return gr(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:gr(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function lYt(e,t,n,r,i=!1){const s=cYt(t,n,r,i),{type:o}=e;return Pg(t)?o!==void 0?lVt(t,o)?bt(n)&&!uVt(o,n.type)?(vt(czt(o,s)),s):o:(vt(lzt(t,o,s)),s):s:null}function cYt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(xE(e)||GB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&vt(YB(e,"ordinal")),"ordinal";if($s(e)||Gk(e)){if(gr(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in zee)return"band";const s=n[Rl(e)];return kb(s)||Px(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return xE(e)?"time":GB(e)==="discrete"?(vt(YB(e,"temporal")),"ordinal"):bt(t)&&t.timeUnit&&Ho(t.timeUnit).utc?"utc":"time";case"quantitative":return xE(e)?bt(t)&&Oi(t.bin)?"bin-ordinal":"linear":GB(e)==="discrete"?(vt(YB(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(KMe(t.type))}function fYt(e,{ignoreRange:t}={}){R6e(e),b6e(e);for(const n of aVt)A6e(e,n);t||I6e(e)}function R6e(e){_s(e)?e.component.scales=dYt(e):e.component.scales=pYt(e)}function dYt(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of l4){const o=mo(t[s]);if(o&&n===C$e&&s===kl&&o.type===WS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=q$e(t,s),l=lYt(a,s,o,r,u);i[s]=new w6e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const hYt=ELe((e,t)=>ege(e)-ege(t));function pYt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){R6e(s);for(const o of ht(s.component.scales))if((t=i.scale)[o]??(t[o]=o6e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?Qzt(a.value,u.value)?r[o]=My(a,u,"type","scale",hYt):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of ht(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new w6e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class rU{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function _s(e){return(e==null?void 0:e.type)==="unit"}function oc(e){return(e==null?void 0:e.type)==="facet"}function qte(e){return(e==null?void 0:e.type)==="concat"}function QS(e){return(e==null?void 0:e.type)==="layer"}class Wte{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=sl(a),this.name=t.name??i,this.title=g0(t.title)?{text:t.title}:t.title?sl(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new rU,this.projectionNameMap=r?r.projectionNameMap:new rU,this.signalNameMap=r?r.signalNameMap:new rU,this.data=t.data,this.description=t.description,this.transforms=wqt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:THt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:v4(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Og,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?An(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){fYt(this)}parseProjection(){g6e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){f6e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of ht(r)){const o=r[s];o!==void 0&&(i[s]=Bi(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Bi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:gi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=MWt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of rf)t[r].title&&n.push(kWt(this,r));for(const r of $te)n=n.concat(RWt(this,r));return n}assembleAxes(){return gWt(this.component.axes,this.config)}assembleLegends(){return h6e(this)}assembleProjections(){return iGt(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...BMe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return gr(["unit","layer"],this.type)?gr(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),gi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||oc(this.parent)?_6e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return ns((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ji[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(oc(this.parent)){const n=i6e(t),r=u4(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(qo(s)&&gv(o)){const a=i.get("name"),u=O4(this,r),l=Hte(u);if(l){const c=Ct({aggregate:"distinct",field:l},{expr:"datum"});return{signal:r6e(a,i,c)}}else return vt(qee(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(NMe(t)&&Pg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(I7t(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class N6e extends Wte{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Ct(r,n)}reduceFieldDef(t,n){return eHt(this.getMapping(),(r,i,s)=>{const o=cp(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){vte(this.getMapping(),(r,i)=>{const s=cp(r);s&&t(s,i)},n)}}class M4 extends hi{clone(){return new M4(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${mr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class $4 extends hi{clone(){return new $4(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${mr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class hI extends hi{clone(){return new hI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Zr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Pg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");wc(d)&&l.aggregate!=="count"&&!m_(i)&&(u[l.field]=l)}return u},{});return ht(a).length?new hI(t,a):null}dependentFields(){return new Set(ht(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${mr(this.filter)}`}assemble(){const t=ht(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Ct(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class L4 extends hi{clone(){return new L4(this.parent,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${mr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class F4 extends hi{clone(){return new F4(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${mr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class CE extends hi{clone(){return new CE(null,An(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[zd,Ud],[yf,Vd]]){const s=i.map(o=>{const a=mo(n.encoding[o]);return bt(a)?a.field:Op(a)?{expr:`${a.datum}`}:Id(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new CE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(kl)){const i=n.typedFieldDef(kl);i.type===WS&&(t=new CE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Dt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${mr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class pI extends hi{clone(){return new pI(null,this.projection,An(this.fields),An(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[zd,Ud],[yf,Vd]]){const i=r.map(o=>{const a=mo(n.encoding[o]);return bt(a)?a.field:Op(a)?{expr:`${a.datum}`}:Id(a)?{expr:`${a.value}`}:void 0}),s=r[0]===yf?"2":"";(i[0]||i[1])&&(t=new pI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Dt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${mr(this.fields)} ${mr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Y1 extends hi{clone(){return new Y1(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Y1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(bt(i)&&bt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=G$e(n.mark,r);return new Y1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${mr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:nqt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class j4 extends hi{clone(){return new j4(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${mr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class mI extends hi{clone(){return new mI(null,An(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(rqt(o)){let u=O6e(o.data,s);u||(u=new Pb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new bl(u,l,Ji.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(iqt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(ns(u),u)}catch{throw new Error(P7t(u))}if(a=l.materialized,!a)throw new Error(D7t(u))}return new mI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${mr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Pt(this.transform.as)}:{}};else{let n=this.transform.as;Dt(n)||(vt(U7t),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class B4 extends hi{clone(){return new B4(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${mr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class U4 extends hi{clone(){return new U4(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${mr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class z4 extends hi{clone(){return new z4(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Nh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${mr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class V4 extends hi{clone(){return new V4(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${mr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function P6e(e){let t=0;function n(r,i){if(r instanceof Pb&&!r.isGenerator&&!Ox(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Ba&&(r.parent instanceof Pb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof KS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof nR||r instanceof rR||r instanceof hI||r instanceof YS||r instanceof $x||r instanceof pI||r instanceof vd||r instanceof mI||r instanceof XS||r instanceof v_||r instanceof F4||r instanceof L4||r instanceof M4||r instanceof j4||r instanceof B4||r instanceof U4||r instanceof Fy||r instanceof V4||r instanceof z4||r instanceof $4)&&i.transform.push(r.assemble()),(r instanceof Wh||r instanceof qh||r instanceof Y1||r instanceof Fm||r instanceof CE)&&i.transform.push(...r.assemble()),r instanceof bl&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof bl?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof bl&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function mYt(e){const t=[],n=P6e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function gYt(e,t){const n=[],r=P6e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function yYt(e){return e==="top"||e==="left"||Xt(e)?"header":"footer"}function vYt(e){for(const t of rf)bYt(e,t);Kge(e,"x"),Kge(e,"y")}function bYt(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=Fx("title",null,r,t);let l=SE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=nt(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Fx("labelOrient",a.header,r,t),f=a.header!==null?Ms((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=gr(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[D6e(e,t,f)]}}}function D6e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Kge(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=jte(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=yYt(a.get("orient"));o[u]??(o[u]=[D6e(e,s,!1)]);const l=i2(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function _Yt(e){Gte(e),S$(e,"width"),S$(e,"height")}function wYt(e){Gte(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";S$(e,t),S$(e,n)}function Gte(e){for(const t of e.children)t.parseLayoutSize()}function S$(e,t){const n=i6e(t),r=u4(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??o6e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=My(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function EYt(e){const{size:t,component:n}=e;for(const r of Dp){const i=Rl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,fp(s)?"step":s,!0)}else{const s=xYt(e,i);n.layoutSize.set(i,s,!1)}}}function xYt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(qo(s)){const a=_$(r.view,t);return gv(o)||fp(a)?"step":a}else return PH(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return PH(r.view,t);{const s=_$(r.view,t);return fp(s)?s.step:s}}}function WH(e,t,n){return Ct(t,{suffix:`by_${Ct(e)}`,...n})}class V2 extends N6e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Jte(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Qk(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ht(t),r={};for(const i of n){if(![Mm,$m].includes(i)){vt(f4(i,"facet"));break}const s=t[i];if(s.field===void 0){vt(AH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=gte(t,n);return r.header?r.header=sl(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=H4(this),this.child.parseData()}parseLayoutSize(){Gte(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),vYt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of rf)for(const r of Lte){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Fx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=P4(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof V2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof V2?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ct(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof V2){if(this.child.channelHasField("column")){const i=Ct(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Dp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(qo(o)&&gv(a)){const u=O4(this.child,i),l=Hte(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):vt(qee(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of rf){const f=this.facet[c];if(f){u.push(Ct(f));const{bin:d,sort:h}=f;if(Oi(d)&&u.push(Ct(f,{binSuffix:"end"})),Hh(h)){const{field:p,op:g=y4}=h,y=WH(f,h);r&&i?(s.push(y),o.push("max"),a.push(y)):(s.push(p),o.push(g),a.push(y))}else if(nt(h)){const p=Lx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Hh(r.sort)?[WH(r,r.sort,{expr:"datum"})]:nt(r.sort)?[Lx(r,t,{expr:"datum"})]:[Ct(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Hh(i)?i.order:!nt(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return BH(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of $te)if(t[s]){const o=Fx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return BH(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=mYt(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:rf.map(u=>this.facetSortFields(u)).flat(),order:rf.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Oqt(this,[]))}]}getMapping(){return this.facet}}function SYt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Hh(s.sort)){const{field:o,op:a=y4}=s.sort;e=i=new v_(e,{joinaggregate:[{op:a,field:o,as:WH(s,s.sort,{forAs:!0})}],groupby:[Ct(s)]})}return i}return null}function O6e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(dI(e)&&dI(a)){if(nc(e.values,a.values))return o}else if(Ox(e)&&Ox(a)){if(e.url===a.url)return o}else if(xLe(e)&&e.name===o.dataName)return o}}return null}function TYt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new Pb({values:[]});return t.push(r),r}const n=O6e(e.data,t);if(n)return J0(e.data)||(n.data.format=bMe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new Pb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function CYt(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(pqt(i))o=e=new $x(e,i),s="derived";else if(kte(i)){const a=yGt(i);o=e=Ba.makeWithAncestors(e,{},a,n)??e,e=new YS(e,t,i.filter)}else if(vLe(i))o=e=Wh.makeFromTransform(e,i,t),s="number";else if(gqt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Ba(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=qh.makeFromTransform(e,i);else if(yqt(i))o=e=vd.makeFromTransform(e,i),s="number",Mte(t)&&(e=new Fy(e));else if(yLe(i))o=e=mI.make(e,t,i,r++),s="derived";else if(fqt(i))o=e=new XS(e,i),s="number";else if(dqt(i))o=e=new v_(e,i),s="number";else if(vqt(i))o=e=Fm.makeFromTransform(e,i),s="derived";else if(bqt(i))o=e=new F4(e,i),s="derived";else if(_qt(i))o=e=new $4(e,i),s="derived";else if(hqt(i))o=e=new L4(e,i),s="derived";else if(sqt(i))o=e=new z4(e,i),s="derived";else if(cqt(i))e=new V4(e,i);else if(mqt(i))o=e=Y1.makeFromTransform(e,i),s="derived";else if(oqt(i))o=e=new M4(e,i),s="derived";else if(aqt(i))o=e=new B4(e,i),s="derived";else if(uqt(i))o=e=new U4(e,i),s="derived";else if(lqt(i))o=e=new j4(e,i),s="derived";else{vt(B7t(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function H4(e){var h;let t=TYt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(J0(i)||Ox(i)||dI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Pqt;J0(i)?(SLe(i)?t=new rR(t,i.sequence):Rte(i)&&(t=new nR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=Ba.makeExplicit(t,e,o)??t,t=new Fy(t);const a=e.parent&&QS(e.parent);(_s(e)||oc(e))&&a&&(t=Wh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=CYt(t,e,o));const u=bGt(e),l=vGt(e);t=Ba.makeWithAncestors(t,{},{...u,...l},o)??t,_s(e)&&(t=CE.parseAll(t,e),t=pI.parseAll(t,e)),(_s(e)||oc(e))&&(a||(t=Wh.makeFromEncoding(t,e)??t),t=qh.makeFromEncoding(t,e)??t,t=$x.parseAllForSortIndex(t,e));const c=t=Xge(Ji.Raw,e,t);if(_s(e)){const p=vd.makeFromEncoding(t,e);p&&(t=p,Mte(e)&&(t=new Fy(t))),t=Y1.makeFromEncoding(t,e)??t,t=Fm.makeFromEncoding(t,e)??t}_s(e)&&(t=hI.make(t,e)??t);const f=t=Xge(Ji.Main,e,t);_s(e)&&pWt(e,f);let d=null;if(oc(e)){const p=e.getName("facet");t=SYt(t,e.facet)??t,d=new KS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function Xge(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new bl(n,s,e,i);return r[s]=o,o}class AYt extends Wte{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&vt(L7t),this.children=this.getChildren(t).map((l,c)=>Jte(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=H4(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ht(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return T4(t)?t.vconcat:Ate(t)?t.hconcat:t.concat}parseLayoutSize(){wYt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Fte(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function IYt(e){return e===!1||e===null}const kYt={disable:1,gridScale:1,scale:1,...z$e,labelExpr:1,encode:1},M6e=ht(kYt);class Yte extends Og{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Yte(An(this.explicit),An(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!IYt(this.get(t))}hasOrientSignalRef(){return Xt(this.explicit.orient)}}function RYt(e,t,n){const{encoding:r,config:i}=e,s=mo(r[t])??mo(r[Pp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(Ib(u))return{text:fd({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(Nx(s)==="quantitative"){if(Px(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:fd({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:fd({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Nx(s)==="temporal"&&i.timeFormatType&&bt(s)&&!s.timeUnit)return{text:fd({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function NYt(e){return Dp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[FYt(n,e)]),t),{})}const PYt={bottom:"top",top:"bottom",left:"right",right:"left"};function DYt(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of ht(i.component.axes))n.axis[s]=jte(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=OYt(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Dp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Xt(a)){if(r[a]>0&&!u){const l=PYt[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function OYt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=MYt(i,s)}}}else return t.map(n=>n.clone());return e}function MYt(e,t){for(const n of M6e){const r=My(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return GMe(i,s);case"gridScale":return{explicit:i.explicit,value:Ms(i.value,s.value)}}return A4(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function $Yt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Xt(n.labelAngle)?n.labelAngle:cI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===ZLe(r,i))return!0}return e===n[t]}const LYt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function FYt(e,t){var b,_;let n=t.axis(e);const r=new Yte,i=mo(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((b=o[e==="x"?"axisX":"axisY"])==null?void 0:b.orient)||((_=o.axis)==null?void 0:_.orient)||SWt(e),u=t.getScaleComponent(e).get("type"),l=yWt(e,u,a,t.config),c=n!==void 0?!n:FH("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=wWt(i,n,e,o.style,l),d=E$e(n.formatType,i,u),h=w$e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const E of M6e){const C=E in Oge?Oge[E](p):age(E)?n[E]:void 0,x=C!==void 0,T=$Yt(C,E,n,t,e);if(x&&T)r.set(E,C,T);else{const{configValue:A=void 0,configFrom:k=void 0}=age(E)&&E!=="values"?FH(E,o.style,n.style,l):{},N=A!==void 0;x&&!N?r.set(E,C,T):(k!=="vgAxisConfig"||LYt.has(E)&&N||eR(A)||Xt(A))&&r.set(E,A,!1)}}const g=n.encoding??{},y=U$e.reduce((E,C)=>{if(!r.hasAxisPart(C))return E;const x=s6e(g[C]??{},t),T=C==="labels"?RYt(t,e,x):x;return T!==void 0&&!gi(T)&&(E[C]={update:T}),E},{});return gi(y)||r.set("encode",y,!!n.encoding||n.labelAngle!==void 0),r}function jYt({encoding:e,size:t}){for(const n of Dp){const r=Rl(n);fp(t[r])&&$0(e[n])&&(delete t[r],vt(JMe(r)))}return t}const BYt={vgMark:"arc",encodeEntry:e=>({...If(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ja("x",e,{defaultPos:"mid"}),...ja("y",e,{defaultPos:"mid"}),...$y(e,"radius"),...$y(e,"theta")})},UYt={vgMark:"area",encodeEntry:e=>({...If(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...w$("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...w$("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Ote(e)})},zYt={vgMark:"rect",encodeEntry:e=>({...If(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...$y(e,"x"),...$y(e,"y")})},VYt={vgMark:"shape",encodeEntry:e=>({...If(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&bt(n)&&n.type===WS?{field:Ct(n,{expr:"datum"})}:{}}]}},HYt={vgMark:"image",encodeEntry:e=>({...If(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...$y(e,"x"),...$y(e,"y"),...Pte(e,"url")})},qYt={vgMark:"line",encodeEntry:e=>({...If(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ja("x",e,{defaultPos:"mid"}),...ja("y",e,{defaultPos:"mid"}),...$o("size",e,{vgChannel:"strokeWidth"}),...Ote(e)})},WYt={vgMark:"trail",encodeEntry:e=>({...If(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ja("x",e,{defaultPos:"mid"}),...ja("y",e,{defaultPos:"mid"}),...$o("size",e),...Ote(e)})};function Kte(e,t){const{config:n}=e;return{...If(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ja("x",e,{defaultPos:"mid"}),...ja("y",e,{defaultPos:"mid"}),...$o("size",e),...$o("angle",e),...GYt(e,n,t)}}function GYt(e,t,n){return n?{shape:{value:n}}:$o("shape",e)}const YYt={vgMark:"symbol",encodeEntry:e=>Kte(e)},KYt={vgMark:"symbol",encodeEntry:e=>Kte(e,"circle")},XYt={vgMark:"symbol",encodeEntry:e=>Kte(e,"square")},QYt={vgMark:"rect",encodeEntry:e=>({...If(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...$y(e,"x"),...$y(e,"y")})},JYt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...If(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...w$("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...w$("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...$o("size",e,{vgChannel:"strokeWidth"})}}},ZYt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...If(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ja("x",e,{defaultPos:"mid"}),...ja("y",e,{defaultPos:"mid"}),...Pte(e),...$o("size",e,{vgChannel:"fontSize"}),...$o("angle",e),...Rge("align",eKt(e.markDef,n,t)),...Rge("baseline",tKt(e.markDef,n,t)),...ja("radius",e,{defaultPos:null}),...ja("theta",e,{defaultPos:null})}}};function eKt(e,t,n){if(Zr("align",e,n)===void 0)return"center"}function tKt(e,t,n){if(Zr("baseline",e,n)===void 0)return"middle"}const nKt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...If(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ja("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ja("y",e,{defaultPos:"mid",vgChannel:"yc"}),...$o("size",e,{defaultValue:rKt(e),vgChannel:i}),[s]:Bi(Zr("thickness",n,t))}}};function rKt(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Zr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&gv(a)&&Or(a.step)?a.step*3/4:b$(t.view,i)*3/4}}const nD={arc:BYt,area:UYt,bar:zYt,circle:KYt,geoshape:VYt,image:HYt,line:qYt,point:YYt,rect:QYt,rule:JYt,square:XYt,text:ZYt,tick:nKt,trail:WYt};function iKt(e){if(gr([m4,h4,bVt],e.mark)){const t=G$e(e.mark,e.encoding);if(t.length>0)return sKt(e,t)}else if(e.mark===p4){const t=CH.some(n=>Zr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return oKt(e)}return Xte(e)}const Qge="faceted_path_";function sKt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Qge+e.requestDataName(Ji.Main),data:e.requestDataName(Ji.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Xte(e,{fromPrefix:Qge})}]}const Jge="stack_group_";function oKt(e){var l;const[t]=Xte(e,{fromPrefix:Jge}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Tx(t.encode.update,["y","yc","y2","height",...CH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...yl(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Tx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...yl(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of CH){const f=ug(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=Bi(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Ct(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Ct(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=ug(f,e.markDef,e.config);return d!==void 0?{...c,[f]:Bi(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ji.Main),name:Jge+e.requestDataName(Ji.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function aKt(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!nt(o)&&Id(o)&&SH(o.value)||!o&&SH(Zr("order",i,s)))){if((nt(o)||bt(o))&&!n)return HMe(o,{expr:"datum"});if(m_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(bt(l)){const c=l.sort;if(nt(c))return{field:Ct(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Hh(c))return{field:Ct({aggregate:yte(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(k$e(c)){const f=e.fieldDef(c.encoding);return{field:Ct(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Ct(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Xte(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Ms(r.clip,uKt(e),lKt(e)),a=zMe(r),u=i.key,l=aKt(e),c=cKt(e),f=Zr("aria",r,s),d=nD[n].postEncodingTransform?nD[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:nD[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ji.Main)},encode:{update:nD[n].encodeEntry(e)},...d?{transform:d}:{}}]}function uKt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function lKt(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function cKt(e){if(!e.component.selection)return null;const t=ht(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ht(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class $6e extends N6e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,lge(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=lp(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=YHt(o,s,{graticule:t.data&&Rte(t.data)}));const u=this.encoding=JVt(t.encoding||{},a,o.filled,s);this.markDef=pLe(o,u,s),this.size=jYt({encoding:u,size:lge(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=hLe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Tte(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===C$e,r=t&&XUt.some(i=>$n(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return l4.reduce((r,i)=>{const s=mo(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=sl(t);return nt(n)&&(i.domain=n.map(Kl)),nt(r)&&(i.range=r.map(Kl)),i}initAxes(t){return Dp.reduce((n,r)=>{const i=t[r];if($n(i)||r===rs&&$n(t.x2)||r===Yo&&$n(t.y2)){const s=$n(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=ht(t),r={};for(const i of n){const s=t[i];r[i]=eR(s)?UMe(s):Kl(s)}return r}initLegends(t){return o7t.reduce((n,r)=>{const i=mo(t[r]);if(i&&u7t(r)){const s=i.legend;n[r]=s&&sl(s)}return n},{})}parseData(){this.component.data=H4(this)}parseLayoutSize(){EYt(this)}parseSelections(){this.component.selection=hWt(this,this.selection)}parseMarkGroup(){this.component.mark=iKt(this)}parseAxesAndHeaders(){this.component.axes=NYt(this)}assembleSelectionTopLevelSignals(t){return Mqt(this,t)}assembleSignals(){return[...XLe(this),...Dqt(this,[])]}assembleSelectionData(t){return $qt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Fte(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!QS(this.parent))&&(t=ALe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return W1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return cp(n)}typedFieldDef(t){const n=this.fieldDef(t);return ku(n)?n:null}}class Qte extends Wte{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(C4(a))return new Qte(a,this,this.getName(`layer_${u}`),o,s);if(Dg(a))return new $6e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Hee(a))})}parseData(){this.component.data=H4(this);for(const t of this.children)t.parseData()}parseLayoutSize(){_Yt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ht(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){DYt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),XLe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Fte(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Lqt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),h6e(this))}}function Jte(e,t,n,r,i){if(v4(e))return new V2(e,t,n,i);if(C4(e))return new Qte(e,t,n,r,i);if(Dg(e))return new $6e(e,t,n,r,i);if(EHt(e))return new AYt(e,t,n,i);throw new Error(Hee(e))}function fKt(e,t={}){t.logger&&Azt(t.logger),t.fieldTitle&&F$e(t.fieldTitle);try{const n=dLe(DS(t.config,e.config)),r=wLe(e,n),i=Jte(r,null,"",void 0,n);return i.parse(),MGt(i.component.data,i),{spec:hKt(i,dKt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Izt(),t.fieldTitle&&VVt()}}function dKt(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Dt(t)&&(t={type:t}),i&&s&&kqt(t.type)){if(i==="step"&&s==="step")vt(Gme()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";vt(Gme(u4(o)));const a=o==="width"?"height":"width";t.type=Rqt(a)}}return{...ht(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...wge(n,!1),...wge(e,!0)}}function hKt(e,t,n={},r){const i=e.config?$Ht(e.config):void 0,s=[].concat(e.assembleSelectionData([]),gYt(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...uLe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const pKt=HUt.version,mKt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Cx,accessPathWithDatum:Mee,compile:fKt,contains:gr,deepEqual:nc,deleteNestedProperty:l$,duplicate:An,entries:Py,every:Pee,fieldIntersection:Oee,flatAccessWithDatum:wMe,getFirstDefined:Ms,hasIntersection:Dee,hash:mr,internalField:SMe,isBoolean:lI,isEmpty:gi,isEqual:WUt,isInternalField:TMe,isNullOrFalse:SH,isNumeric:n4,keys:ht,logicalExpr:U2,mergeDeep:bMe,never:vMe,normalize:wLe,normalizeAngle:cI,omit:yl,pick:Tx,prefixGenerator:TH,removePathFromField:HS,replaceAll:Sb,replacePathInField:gf,resetIdCounter:YUt,setEqual:_Me,some:xb,stringify:yi,titleCase:Hk,unique:Nh,uniqueId:xMe,vals:pa,varName:ns,version:pKt},Symbol.toStringTag,{value:"Module"}));function L6e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var gKt="vega-themes",yKt="2.15.0",vKt="Themes for stylized Vega and Vega-Lite visualizations.",bKt=["vega","vega-lite","themes","style"],_Kt="BSD-3-Clause",wKt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},EKt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],xKt="build/vega-themes.js",Zte="build/vega-themes.module.js",SKt="build/vega-themes.min.js",TKt="build/vega-themes.min.js",CKt="build/vega-themes.module.d.ts",AKt={type:"git",url:"https://github.com/vega/vega-themes.git"},IKt=["src","build"],kKt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},RKt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},NKt={vega:"*","vega-lite":"*"},PKt={},DKt={name:gKt,version:yKt,description:vKt,keywords:bKt,license:_Kt,author:wKt,contributors:EKt,main:xKt,module:Zte,unpkg:SKt,jsdelivr:TKt,types:CKt,repository:AKt,files:IKt,scripts:kKt,devDependencies:RKt,peerDependencies:NKt,dependencies:PKt};const bw="#fff",Zge="#888",OKt={background:"#333",view:{stroke:Zge},title:{color:bw,subtitleColor:bw},style:{"guide-label":{fill:bw},"guide-title":{fill:bw}},axis:{domainColor:bw,gridColor:Zge,tickColor:bw}},Uv="#4572a7",MKt={background:"#fff",arc:{fill:Uv},area:{fill:Uv},line:{stroke:Uv,strokeWidth:2},path:{stroke:Uv},rect:{fill:Uv},shape:{stroke:Uv},symbol:{fill:Uv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},zv="#30a2da",iU="#cbcbcb",$Kt="#999",LKt="#333",e0e="#f0f0f0",t0e="#333",FKt={arc:{fill:zv},area:{fill:zv},axis:{domainColor:iU,grid:!0,gridColor:iU,gridWidth:1,labelColor:$Kt,labelFontSize:10,titleColor:LKt,tickColor:iU,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:e0e,group:{fill:e0e},legend:{labelColor:t0e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:t0e,titleFontSize:14,titlePadding:10},line:{stroke:zv,strokeWidth:2},path:{stroke:zv,strokeWidth:.5},rect:{fill:zv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:zv},bar:{binSpacing:2,fill:zv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Vv="#000",jKt={group:{fill:"#e5e5e5"},arc:{fill:Vv},area:{fill:Vv},line:{stroke:Vv},path:{stroke:Vv},rect:{fill:Vv},shape:{stroke:Vv},symbol:{fill:Vv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},BKt=22,UKt="normal",n0e="Benton Gothic, sans-serif",r0e=11.5,zKt="normal",Hv="#82c6df",sU="Benton Gothic Bold, sans-serif",i0e="normal",s0e=13,hC={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},VKt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:sU,fontSize:BKt,fontWeight:UKt},arc:{fill:Hv},area:{fill:Hv},line:{stroke:Hv,strokeWidth:2},path:{stroke:Hv},rect:{fill:Hv},shape:{stroke:Hv},symbol:{fill:Hv,size:30},axis:{labelFont:n0e,labelFontSize:r0e,labelFontWeight:zKt,titleFont:sU,titleFontSize:s0e,titleFontWeight:i0e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:n0e,labelFontSize:r0e,symbolType:"square",titleFont:sU,titleFontSize:s0e,titleFontWeight:i0e},range:{category:hC["category-6"],diverging:hC["fireandice-6"],heatmap:hC["fire-7"],ordinal:hC["fire-7"],ramp:hC["fire-7"]}},qv="#ab5787",rD="#979797",HKt={background:"#f9f9f9",arc:{fill:qv},area:{fill:qv},line:{stroke:qv},path:{stroke:qv},rect:{fill:qv},shape:{stroke:qv},symbol:{fill:qv,size:30},axis:{domainColor:rD,domainWidth:.5,gridWidth:.2,labelColor:rD,tickColor:rD,tickWidth:.2,titleColor:rD},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Wv="#3e5c69",qKt={background:"#fff",arc:{fill:Wv},area:{fill:Wv},line:{stroke:Wv},path:{stroke:Wv},rect:{fill:Wv},shape:{stroke:Wv},symbol:{fill:Wv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Vc="#1696d2",o0e="#000000",WKt="#FFFFFF",iD="Lato",oU="Lato",GKt="Lato",YKt="#DEDDDD",KKt=18,pC={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},XKt={background:WKt,title:{anchor:"start",fontSize:KKt,font:iD},axisX:{domain:!0,domainColor:o0e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:oU,labelAngle:0,tickColor:o0e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:iD},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:YKt,gridWidth:1,labelFontSize:12,labelFont:oU,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:iD,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:oU,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:iD,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:pC["six-groups-cat-1"],diverging:pC["diverging-colors"],heatmap:pC["diverging-colors"],ordinal:pC["six-groups-seq"],ramp:pC["shades-blue"]},area:{fill:Vc},rect:{fill:Vc},line:{color:Vc,stroke:Vc,strokeWidth:5},trail:{color:Vc,stroke:Vc,strokeWidth:0,size:1},path:{stroke:Vc,strokeWidth:.5},point:{filled:!0},text:{font:GKt,color:Vc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Vc,stroke:null}},arc:{fill:Vc},shape:{stroke:Vc},symbol:{fill:Vc,size:30}},Gv="#3366CC",a0e="#ccc",sD="Arial, sans-serif",QKt={arc:{fill:Gv},area:{fill:Gv},path:{stroke:Gv},rect:{fill:Gv},shape:{stroke:Gv},symbol:{stroke:Gv},circle:{fill:Gv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:sD,fontSize:12},"guide-title":{font:sD,fontSize:12},"group-title":{font:sD,fontSize:12}},title:{font:sD,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:a0e,tickColor:a0e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ene=e=>e*(1/3+1),u0e=ene(9),l0e=ene(10),c0e=ene(12),mC="Segoe UI",f0e="wf_standard-font, helvetica, arial, sans-serif",d0e="#252423",gC="#605E5C",h0e="transparent",JKt="#C8C6C4",Vf="#118DFF",ZKt="#12239E",eXt="#E66C37",tXt="#6B007B",nXt="#E044A7",rXt="#744EC2",iXt="#D9B300",sXt="#D64550",F6e=Vf,j6e="#DEEFFF",p0e=[j6e,F6e],oXt=[j6e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",F6e],aXt={view:{stroke:h0e},background:h0e,font:mC,header:{titleFont:f0e,titleFontSize:c0e,titleColor:d0e,labelFont:mC,labelFontSize:l0e,labelColor:gC},axis:{ticks:!1,grid:!1,domain:!1,labelColor:gC,labelFontSize:u0e,titleFont:f0e,titleColor:d0e,titleFontSize:c0e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:JKt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Vf},line:{stroke:Vf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:mC,fontSize:u0e,fill:gC},arc:{fill:Vf},area:{fill:Vf,line:!0,opacity:.6},path:{stroke:Vf},rect:{fill:Vf},point:{fill:Vf,filled:!0,size:75},shape:{stroke:Vf},symbol:{fill:Vf,strokeWidth:1.5,size:50},legend:{titleFont:mC,titleFontWeight:"bold",titleColor:gC,labelFont:mC,labelFontSize:l0e,labelColor:gC,symbolType:"circle",symbolSize:75},range:{category:[Vf,ZKt,eXt,tXt,nXt,rXt,iXt,sXt],diverging:p0e,heatmap:p0e,ordinal:oXt}},aU='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',uXt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',uU=400,oD={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},lXt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],cXt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function q4({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=oD.gridBg[e],i=oD.textPrimary[e],s=oD.textSecondary[e],o=n==="dark"?lXt:cXt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:aU,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:uXt,labelFontWeight:uU,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:oD.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:aU,fill:s,fontWeight:uU},"guide-title":{font:aU,fill:s,fontWeight:uU}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const fXt=q4({theme:"white",background:"#ffffff"}),dXt=q4({theme:"g10",background:"#f4f4f4"}),hXt=q4({theme:"g90",background:"#262626"}),pXt=q4({theme:"g100",background:"#161616"}),mXt=DKt.version,gXt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:dXt,carbong100:pXt,carbong90:hXt,carbonwhite:fXt,dark:OKt,excel:MKt,fivethirtyeight:FKt,ggplot2:jKt,googlecharts:QKt,latimes:VKt,powerbi:aXt,quartz:HKt,urbaninstitute:XKt,version:mXt,vox:qKt},Symbol.toStringTag,{value:"Module"}));function yXt(e,t,n,r){if(nt(e))return`[${e.map(i=>t(Dt(i)?i:m0e(i,n))).join(", ")}]`;if(Mt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(Mt(c)&&(c=m0e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function vXt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function m0e(e,t){return JSON.stringify(e,vXt(t))}var bXt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const B6e="vg-tooltip-element",_Xt={offsetX:10,offsetY:10,id:B6e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:wXt,maxDepth:2,formatTooltip:yXt,baseURL:""};function wXt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function EXt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return bXt.toString().replace(B6e,e)}function xXt(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class SXt{constructor(t){this.options={..._Xt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=EXt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=xXt(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var lU={};function TXt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var cU,g0e;function CXt(){return g0e||(g0e=1,cU=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),cU}var AXt=Gr;Gr.Node=Db;Gr.create=Gr;function Gr(e){var t=this;if(t instanceof Gr||(t=new Gr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}Gr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};Gr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};Gr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};Gr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)kXt(this,arguments[e]);return this.length};Gr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)RXt(this,arguments[e]);return this.length};Gr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};Gr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};Gr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};Gr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};Gr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};Gr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};Gr.prototype.map=function(e,t){t=t||this;for(var n=new Gr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};Gr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new Gr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};Gr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};Gr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};Gr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};Gr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};Gr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Gr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};Gr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new Gr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};Gr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=IXt(this,i,n[r]);return s};Gr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function IXt(e,t,n){var r=t===e.head?new Db(n,null,t,e):new Db(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function kXt(e,t){e.tail=new Db(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function RXt(e,t){e.head=new Db(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Db(e,t,n,r){if(!(this instanceof Db))return new Db(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{CXt()(Gr)}catch{}const NXt=AXt,y1=Symbol("max"),cm=Symbol("length"),_w=Symbol("lengthCalculator"),H2=Symbol("allowStale"),M1=Symbol("maxAge"),om=Symbol("dispose"),y0e=Symbol("noDisposeOnSet"),Ro=Symbol("lruList"),qf=Symbol("cache"),U6e=Symbol("updateAgeOnGet"),fU=()=>1;class PXt{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[y1]=t.max||1/0;const n=t.length||fU;if(this[_w]=typeof n!="function"?fU:n,this[H2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[M1]=t.maxAge||0,this[om]=t.dispose,this[y0e]=t.noDisposeOnSet||!1,this[U6e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[y1]=t||1/0,yC(this)}get max(){return this[y1]}set allowStale(t){this[H2]=!!t}get allowStale(){return this[H2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[M1]=t,yC(this)}get maxAge(){return this[M1]}set lengthCalculator(t){typeof t!="function"&&(t=fU),t!==this[_w]&&(this[_w]=t,this[cm]=0,this[Ro].forEach(n=>{n.length=this[_w](n.value,n.key),this[cm]+=n.length})),yC(this)}get lengthCalculator(){return this[_w]}get length(){return this[cm]}get itemCount(){return this[Ro].length}rforEach(t,n){n=n||this;for(let r=this[Ro].tail;r!==null;){const i=r.prev;v0e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Ro].head;r!==null;){const i=r.next;v0e(this,t,r,n),r=i}}keys(){return this[Ro].toArray().map(t=>t.key)}values(){return this[Ro].toArray().map(t=>t.value)}reset(){this[om]&&this[Ro]&&this[Ro].length&&this[Ro].forEach(t=>this[om](t.key,t.value)),this[qf]=new Map,this[Ro]=new NXt,this[cm]=0}dump(){return this[Ro].map(t=>T$(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Ro]}set(t,n,r){if(r=r||this[M1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[_w](n,t);if(this[qf].has(t)){if(s>this[y1])return AE(this,this[qf].get(t)),!1;const u=this[qf].get(t).value;return this[om]&&(this[y0e]||this[om](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[cm]+=s-u.length,u.length=s,this.get(t),yC(this),!0}const o=new DXt(t,n,s,i,r);return o.length>this[y1]?(this[om]&&this[om](t,n),!1):(this[cm]+=o.length,this[Ro].unshift(o),this[qf].set(t,this[Ro].head),yC(this),!0)}has(t){if(!this[qf].has(t))return!1;const n=this[qf].get(t).value;return!T$(this,n)}get(t){return dU(this,t,!0)}peek(t){return dU(this,t,!1)}pop(){const t=this[Ro].tail;return t?(AE(this,t),t.value):null}del(t){AE(this,this[qf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[qf].forEach((t,n)=>dU(this,n,!1))}}const dU=(e,t,n)=>{const r=e[qf].get(t);if(r){const i=r.value;if(T$(e,i)){if(AE(e,r),!e[H2])return}else n&&(e[U6e]&&(r.value.now=Date.now()),e[Ro].unshiftNode(r));return i.value}},T$=(e,t)=>{if(!t||!t.maxAge&&!e[M1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[M1]&&n>e[M1]},yC=e=>{if(e[cm]>e[y1])for(let t=e[Ro].tail;e[cm]>e[y1]&&t!==null;){const n=t.prev;AE(e,t),t=n}},AE=(e,t)=>{if(t){const n=t.value;e[om]&&e[om](n.key,n.value),e[cm]-=n.length,e[qf].delete(n.key),e[Ro].removeNode(t)}};class DXt{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const v0e=(e,t,n,r)=>{let i=n.value;T$(e,i)&&(AE(e,n),e[H2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var OXt=PXt;const MXt=Object.freeze({loose:!0}),$Xt=Object.freeze({}),LXt=e=>e?typeof e!="object"?MXt:e:$Xt;var tne=LXt,GH={exports:{}};const FXt="2.0.0",z6e=256,jXt=Number.MAX_SAFE_INTEGER||9007199254740991,BXt=16,UXt=z6e-6,zXt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var nne={MAX_LENGTH:z6e,MAX_SAFE_COMPONENT_LENGTH:BXt,MAX_SAFE_BUILD_LENGTH:UXt,MAX_SAFE_INTEGER:jXt,RELEASE_TYPES:zXt,SEMVER_SPEC_VERSION:FXt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const VXt=typeof process=="object"&&lU&&lU.NODE_DEBUG&&/\bsemver\b/i.test(lU.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var W4=VXt;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=nne,s=W4;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=g=>{for(const[y,b]of d)g=g.split(`${y}*`).join(`${y}{0,${b}}`).split(`${y}+`).join(`${y}{1,${b}}`);return g},p=(g,y,b)=>{const _=h(y),E=c++;s(g,E,y),l[g]=E,u[E]=y,o[E]=new RegExp(y,b?"g":void 0),a[E]=new RegExp(_,b?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(GH,GH.exports);var rne=GH.exports;const b0e=/^[0-9]+$/,V6e=(e,t)=>{const n=b0e.test(e),r=b0e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},HXt=(e,t)=>V6e(t,e);var qXt={compareIdentifiers:V6e,rcompareIdentifiers:HXt};const aD=W4,{MAX_LENGTH:_0e,MAX_SAFE_INTEGER:uD}=nne,{safeRe:w0e,t:E0e}=rne,WXt=tne,{compareIdentifiers:ww}=qXt;let GXt=class ih{constructor(t,n){if(n=WXt(n),t instanceof ih){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>_0e)throw new TypeError(`version is longer than ${_0e} characters`);aD("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?w0e[E0e.LOOSE]:w0e[E0e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>uD||this.major<0)throw new TypeError("Invalid major version");if(this.minor>uD||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>uD||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<uD)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(aD("SemVer.compare",this.version,this.options,t),!(t instanceof ih)){if(typeof t=="string"&&t===this.version)return 0;t=new ih(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ih||(t=new ih(t,this.options)),ww(this.major,t.major)||ww(this.minor,t.minor)||ww(this.patch,t.patch)}comparePre(t){if(t instanceof ih||(t=new ih(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(aD("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ww(r,i)}while(++n)}compareBuild(t){t instanceof ih||(t=new ih(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(aD("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ww(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),ww(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var ine=GXt;const x0e=ine,YXt=(e,t,n)=>new x0e(e,n).compare(new x0e(t,n));var JS=YXt;const KXt=JS,XXt=(e,t,n)=>KXt(e,t,n)===0;var QXt=XXt;const JXt=JS,ZXt=(e,t,n)=>JXt(e,t,n)!==0;var eQt=ZXt;const tQt=JS,nQt=(e,t,n)=>tQt(e,t,n)>0;var rQt=nQt;const iQt=JS,sQt=(e,t,n)=>iQt(e,t,n)>=0;var oQt=sQt;const aQt=JS,uQt=(e,t,n)=>aQt(e,t,n)<0;var lQt=uQt;const cQt=JS,fQt=(e,t,n)=>cQt(e,t,n)<=0;var dQt=fQt;const hQt=QXt,pQt=eQt,mQt=rQt,gQt=oQt,yQt=lQt,vQt=dQt,bQt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return hQt(e,n,r);case"!=":return pQt(e,n,r);case">":return mQt(e,n,r);case">=":return gQt(e,n,r);case"<":return yQt(e,n,r);case"<=":return vQt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var _Qt=bQt,hU,S0e;function wQt(){if(S0e)return hU;S0e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}hU=t;const n=tne,{safeRe:r,t:i}=rne,s=_Qt,o=W4,a=ine,u=H6e();return hU}var pU,T0e;function H6e(){if(T0e)return pU;T0e=1;class e{constructor(B,V){if(V=r(V),B instanceof e)return B.loose===!!V.loose&&B.includePrerelease===!!V.includePrerelease?B:new e(B.raw,V);if(B instanceof i)return this.raw=B.value,this.set=[[B]],this.format(),this;if(this.options=V,this.loose=!!V.loose,this.includePrerelease=!!V.includePrerelease,this.raw=B.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(z=>this.parseRange(z.trim())).filter(z=>z.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const z=this.set[0];if(this.set=this.set.filter(G=>!p(G[0])),this.set.length===0)this.set=[z];else if(this.set.length>1){for(const G of this.set)if(G.length===1&&g(G[0])){this.set=[G];break}}}this.format()}format(){return this.range=this.set.map(B=>B.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(B){const z=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+B,G=n.get(z);if(G)return G;const Y=this.options.loose,Q=Y?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];B=B.replace(Q,D(this.options.includePrerelease)),s("hyphen replace",B),B=B.replace(a[u.COMPARATORTRIM],l),s("comparator trim",B),B=B.replace(a[u.TILDETRIM],c),s("tilde trim",B),B=B.replace(a[u.CARETTRIM],f),s("caret trim",B);let L=B.split(" ").map(X=>b(X,this.options)).join(" ").split(/\s+/).map(X=>P(X,this.options));Y&&(L=L.filter(X=>(s("loose invalid filter",X,this.options),!!X.match(a[u.COMPARATORLOOSE])))),s("range list",L);const U=new Map,K=L.map(X=>new i(X,this.options));for(const X of K){if(p(X))return[X];U.set(X.value,X)}U.size>1&&U.has("")&&U.delete("");const q=[...U.values()];return n.set(z,q),q}intersects(B,V){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(z=>y(z,V)&&B.set.some(G=>y(G,V)&&z.every(Y=>G.every(Q=>Y.intersects(Q,V)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let V=0;V<this.set.length;V++)if(j(this.set[V],B,this.options))return!0;return!1}}pU=e;const t=OXt,n=new t({max:1e3}),r=tne,i=wQt(),s=W4,o=ine,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=rne,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=nne,p=M=>M.value==="<0.0.0-0",g=M=>M.value==="",y=(M,B)=>{let V=!0;const z=M.slice();let G=z.pop();for(;V&&z.length;)V=z.every(Y=>G.intersects(Y,B)),G=z.pop();return V},b=(M,B)=>(s("comp",M,B),M=x(M,B),s("caret",M),M=E(M,B),s("tildes",M),M=A(M,B),s("xrange",M),M=N(M,B),s("stars",M),M),_=M=>!M||M.toLowerCase()==="x"||M==="*",E=(M,B)=>M.trim().split(/\s+/).map(V=>C(V,B)).join(" "),C=(M,B)=>{const V=B.loose?a[u.TILDELOOSE]:a[u.TILDE];return M.replace(V,(z,G,Y,Q,L)=>{s("tilde",M,z,G,Y,Q,L);let U;return _(G)?U="":_(Y)?U=`>=${G}.0.0 <${+G+1}.0.0-0`:_(Q)?U=`>=${G}.${Y}.0 <${G}.${+Y+1}.0-0`:L?(s("replaceTilde pr",L),U=`>=${G}.${Y}.${Q}-${L} <${G}.${+Y+1}.0-0`):U=`>=${G}.${Y}.${Q} <${G}.${+Y+1}.0-0`,s("tilde return",U),U})},x=(M,B)=>M.trim().split(/\s+/).map(V=>T(V,B)).join(" "),T=(M,B)=>{s("caret",M,B);const V=B.loose?a[u.CARETLOOSE]:a[u.CARET],z=B.includePrerelease?"-0":"";return M.replace(V,(G,Y,Q,L,U)=>{s("caret",M,G,Y,Q,L,U);let K;return _(Y)?K="":_(Q)?K=`>=${Y}.0.0${z} <${+Y+1}.0.0-0`:_(L)?Y==="0"?K=`>=${Y}.${Q}.0${z} <${Y}.${+Q+1}.0-0`:K=`>=${Y}.${Q}.0${z} <${+Y+1}.0.0-0`:U?(s("replaceCaret pr",U),Y==="0"?Q==="0"?K=`>=${Y}.${Q}.${L}-${U} <${Y}.${Q}.${+L+1}-0`:K=`>=${Y}.${Q}.${L}-${U} <${Y}.${+Q+1}.0-0`:K=`>=${Y}.${Q}.${L}-${U} <${+Y+1}.0.0-0`):(s("no pr"),Y==="0"?Q==="0"?K=`>=${Y}.${Q}.${L}${z} <${Y}.${Q}.${+L+1}-0`:K=`>=${Y}.${Q}.${L}${z} <${Y}.${+Q+1}.0-0`:K=`>=${Y}.${Q}.${L} <${+Y+1}.0.0-0`),s("caret return",K),K})},A=(M,B)=>(s("replaceXRanges",M,B),M.split(/\s+/).map(V=>k(V,B)).join(" ")),k=(M,B)=>{M=M.trim();const V=B.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return M.replace(V,(z,G,Y,Q,L,U)=>{s("xRange",M,z,G,Y,Q,L,U);const K=_(Y),q=K||_(Q),X=q||_(L),Z=X;return G==="="&&Z&&(G=""),U=B.includePrerelease?"-0":"",K?G===">"||G==="<"?z="<0.0.0-0":z="*":G&&Z?(q&&(Q=0),L=0,G===">"?(G=">=",q?(Y=+Y+1,Q=0,L=0):(Q=+Q+1,L=0)):G==="<="&&(G="<",q?Y=+Y+1:Q=+Q+1),G==="<"&&(U="-0"),z=`${G+Y}.${Q}.${L}${U}`):q?z=`>=${Y}.0.0${U} <${+Y+1}.0.0-0`:X&&(z=`>=${Y}.${Q}.0${U} <${Y}.${+Q+1}.0-0`),s("xRange return",z),z})},N=(M,B)=>(s("replaceStars",M,B),M.trim().replace(a[u.STAR],"")),P=(M,B)=>(s("replaceGTE0",M,B),M.trim().replace(a[B.includePrerelease?u.GTE0PRE:u.GTE0],"")),D=M=>(B,V,z,G,Y,Q,L,U,K,q,X,Z,ae)=>(_(z)?V="":_(G)?V=`>=${z}.0.0${M?"-0":""}`:_(Y)?V=`>=${z}.${G}.0${M?"-0":""}`:Q?V=`>=${V}`:V=`>=${V}${M?"-0":""}`,_(K)?U="":_(q)?U=`<${+K+1}.0.0-0`:_(X)?U=`<${K}.${+q+1}.0-0`:Z?U=`<=${K}.${q}.${X}-${Z}`:M?U=`<${K}.${q}.${+X+1}-0`:U=`<=${U}`,`${V} ${U}`.trim()),j=(M,B,V)=>{for(let z=0;z<M.length;z++)if(!M[z].test(B))return!1;if(B.prerelease.length&&!V.includePrerelease){for(let z=0;z<M.length;z++)if(s(M[z].semver),M[z].semver!==i.ANY&&M[z].semver.prerelease.length>0){const G=M[z].semver;if(G.major===B.major&&G.minor===B.minor&&G.patch===B.patch)return!0}return!1}return!0};return pU}const EQt=H6e(),xQt=(e,t,n)=>{try{t=new EQt(t,n)}catch{return!1}return t.test(e)};var SQt=xQt,q6e=TXt(SQt);function TQt(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var CQt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function W6e(e,...t){for(const n of t)AQt(e,n);return e}function AQt(e,t){for(const n of Object.keys(t))OS(e,n,t[n],!0)}const Wf=cUt;let gI=mKt;const lD=typeof window<"u"?window:void 0;var L0e;gI===void 0&&((L0e=lD==null?void 0:lD.vl)!=null&&L0e.compile)&&(gI=lD.vl);const IQt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},kQt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},o2={vega:"Vega","vega-lite":"Vega-Lite"},C$={vega:Wf.version,"vega-lite":gI?gI.version:"not available"},RQt={vega:e=>e,"vega-lite":(e,t)=>gI.compile(e,{config:t}).spec},NQt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,PQt="chart-wrapper";function DQt(e){return typeof e=="function"}function C0e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${o2[r]} JSON Source`}function OQt(e,t){if(e.$schema){const n=L6e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${o2[n.library]}, but mode argument sets ${o2[t]??t}.`);const r=n.library;return q6e(C$[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${o2[r]} ${n.version}, but the current version of ${o2[r]} is v${C$[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function G6e(e){return!!(e&&"load"in e)}function A0e(e){return G6e(e)?e:Wf.loader(e)}function MQt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Dt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function $Qt(e,t,n={}){let r,i;Dt(t)?(i=A0e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=MQt(r),o=s.loader;(!i||o)&&(i=A0e(n.loader??o));const a=await I0e(s,i),u=await I0e(n,i),l={...W6e(u,a),config:DS(u.config??{},a.config??{})};return await FQt(e,r,l,i)}async function I0e(e,t){const n=Dt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Dt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function LQt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function FQt(e,t,n={},r){const i=n.theme?DS(gXt[n.theme],n.config??{}):n.config,s=av(n.actions)?n.actions:W6e({},IQt,n.actions??{}),o={...kQt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Wf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const x="vega-embed-style",{root:T,rootContainer:A}=LQt(c);if(!T.getElementById(x)){const k=document.createElement("style");k.id=x,k.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?CQt.toString():n.defaultStyle,A.appendChild(k)}}const f=OQt(t,n.mode);let d=RQt[f](t,i);if(f==="vega-lite"&&d.$schema){const x=L6e(d.$schema);q6e(C$.vega,`^${x.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${x.version}, but current version is v${C$.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const x=document.createElement("div");x.classList.add(PQt),c.appendChild(x),h=x}const p=n.patch;if(p&&(d=p instanceof Function?p(d):aF(d,p,!0,!1).newDocument),n.formatLocale&&Wf.formatLocale(n.formatLocale),n.timeFormatLocale&&Wf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const x in n.expressionFunctions){const T=n.expressionFunctions[x];"fn"in T?Wf.expressionFunction(x,T.fn,T.visitor):T instanceof Function&&Wf.expressionFunction(x,T)}const{ast:g}=n,y=Wf.parse(d,f==="vega-lite"?{}:i,{ast:g}),b=new(n.viewClass||Wf.View)(y,{loader:r,logLevel:u,renderer:a,...g?{expr:Wf.expressionInterpreter??n.expr??_Ut}:{}});if(b.addSignalListener("autosize",(x,T)=>{const{type:A}=T;A=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):A=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):A=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:x,tooltip:T}=n,A=x&&!G6e(x)?x==null?void 0:x.baseURL:void 0,k=DQt(T)?T:new SXt({baseURL:A,...T===!0?{}:T}).call;b.tooltip(k)}let{hover:_}=n;if(_===void 0&&(_=f==="vega"),_){const{hoverSet:x,updateSet:T}=typeof _=="boolean"?{}:_;b.hover(x,T)}n&&(n.width!=null&&b.width(n.width),n.height!=null&&b.height(n.height),n.padding!=null&&b.padding(n.padding)),await b.initialize(h,n.bind).runAsync();let E;if(s!==!1){let x=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const A=document.createElement("details");A.title=o.CLICK_TO_VIEW_ACTIONS,c.append(A),x=A;const k=document.createElement("summary");k.innerHTML=NQt,A.append(k),E=N=>{A.contains(N.target)||A.removeAttribute("open")},document.addEventListener("click",E)}const T=document.createElement("div");if(x.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const A of["svg","png"])if(s===!0||s.export===!0||s.export[A]){const k=o[`${A.toUpperCase()}_ACTION`],N=document.createElement("a"),P=Mt(n.scaleFactor)?n.scaleFactor[A]:n.scaleFactor;N.text=k,N.href="#",N.target="_blank",N.download=`${l}.${A}`,N.addEventListener("mousedown",async function(D){D.preventDefault();const j=await b.toImageURL(A,P);this.href=j}),T.append(N)}}if(s===!0||s.source!==!1){const A=document.createElement("a");A.text=o.SOURCE_ACTION,A.href="#",A.addEventListener("click",function(k){C0e(mB(t),n.sourceHeader??"",n.sourceFooter??"",f),k.preventDefault()}),T.append(A)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const A=document.createElement("a");A.text=o.COMPILED_ACTION,A.href="#",A.addEventListener("click",function(k){C0e(mB(d),n.sourceHeader??"",n.sourceFooter??"","vega"),k.preventDefault()}),T.append(A)}if(s===!0||s.editor!==!1){const A=n.editorUrl??"https://vega.github.io/editor/",k=document.createElement("a");k.text=o.EDITOR_ACTION,k.href="#",k.addEventListener("click",function(N){TQt(window,A,{config:i,mode:f,renderer:a,spec:mB(t)}),N.preventDefault()}),T.append(k)}}function C(){E&&document.removeEventListener("click",E),b.finalize()}return{view:b,spec:t,vgSpec:d,finalize:C,embedOptions:n}}function jQt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function BQt(e,t,n){n&&(jQt(n)?n(e.data(t)):e.change(t,Wf.changeset().remove(()=>!0).insert(n)))}function UQt(e,t){Object.keys(t).forEach(n=>{BQt(e,n,t[n])})}function Y6e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const K6e=()=>{};function mU(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function zQt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Y6e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!vD(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function k0e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function gU(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function a2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class X6e extends Jr.PureComponent{constructor(){super(...arguments),a2(this,"containerRef",Jr.createRef()),a2(this,"resultPromise",void 0),a2(this,"handleError",t=>{const{onError:n=K6e}=this.props;n(t,this.containerRef.current),console.warn(t)}),a2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Y6e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=zQt(gU(this.props),gU(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!bV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&k0e(a,s),i&&mU(a,i)),a.run()})}else bV(i,s)||this.modifyView(o=>{s&&k0e(o,s),i&&mU(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=gU(this.props);this.resultPromise=$Qt(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;mU(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Jr.createElement("div",{ref:this.containerRef,className:t,style:n})}}a2(X6e,"propTypes",{className:Dse.string,onError:Dse.func});function YH(){return YH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},YH.apply(this,arguments)}function KH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const VQt={};class Q6e extends Jr.PureComponent{constructor(){super(...arguments),KH(this,"vegaEmbed",Jr.createRef()),KH(this,"handleNewView",t=>{this.update();const{onNewView:n=K6e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){bV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{UQt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Jr.createElement(X6e,YH({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}KH(Q6e,"defaultProps",{data:VQt});function XH(){return XH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XH.apply(this,arguments)}function QH(e){return Jr.createElement(Q6e,XH({},e,{mode:"vega-lite"}))}function HQt({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=P$(!0),[o,a]=dd(),u=O.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=O.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=O.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(g=>Object.entries(g.answers).filter(([y])=>y.slice(0,y.lastIndexOf("_"))===n)).map(g=>g.filter(([y,b])=>b.endTime!==-1).map(([y,b])=>(b.endTime-b.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(y=>y.value)),p=Math.max(...e.options.map(y=>y.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return w.jsxs(Ux,{p:"lg",withBorder:!0,ref:o,children:[w.jsxs(Kt,{direction:"row",justify:"space-between",onClick:s,children:[w.jsxs(Kt,{align:"center",children:[e.type==="metadata"&&w.jsx(_We,{size:20}),e.type==="numerical"&&w.jsx(kWe,{size:20}),(e.type==="shortText"||e.type==="longText")&&w.jsx(mWe,{size:20}),e.type==="likert"&&w.jsx(xWe,{size:20}),e.type==="dropdown"&&w.jsx($We,{size:20}),e.type==="slider"&&w.jsx(cWe,{size:20}),e.type==="radio"&&w.jsx(PWe,{size:20}),e.type==="checkbox"&&w.jsx(LWe,{size:20}),e.type==="iframe"&&w.jsx(CWe,{size:20}),w.jsx(es,{order:5,ml:4,children:e.id})]}),w.jsx(bWe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),w.jsxs(M$,{in:i,mah:400,children:[w.jsx(De,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:w.jsx(DE,{})}),w.jsxs(OW,{cols:2,h:360,children:[w.jsx(jm,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?w.jsx(QH,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):w.jsxs(Kt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&w.jsx(l2,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&w.jsxs(w.Fragment,{children:[w.jsx(pt,{fw:700,children:"Response Values: "}),u.map((f,d)=>w.jsx(Kt,{align:"center",gap:"xs",children:w.jsx(pt,{children:f[e.id]})},d))]})]})}),w.jsx(jm,{mih:200,children:e.type==="metadata"?w.jsx(QH,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):w.jsxs(w.Fragment,{children:[w.jsx(pt,{fw:700,children:"Response Specification: "}),w.jsx(l2,{block:!0,children:JSON.stringify(e,null,2)}),w.jsx("br",{}),l&&w.jsxs(w.Fragment,{children:[w.jsx(pt,{fw:700,children:"Correct Answer: "}),w.jsx(l2,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function qQt({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&UAe(t.components[n],t),i=O.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?w.jsx(Kt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>w.jsx(HQt,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):w.jsx(Kt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:w.jsx(pt,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function WQt({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=O.useState([...n]),o=O.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=O.useMemo(()=>{let l=B0(e.sequence);return l=TG(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=zm();return w.jsxs(Ux,{shadow:"sm",p:"md",withBorder:!0,children:[w.jsx(Kt,{direction:"row",justify:"space-between",children:w.jsx(Ql.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:w.jsxs(Pi,{children:[w.jsx(Ql,{value:"completed",label:"Completed"}),w.jsx(Ql,{value:"inprogress",label:"In Progress"}),w.jsx(Ql,{value:"rejected",label:"Rejected"})]})})}),w.jsx(DE,{my:"xs"}),i.length===0?w.jsx(Kt,{justify:"center",align:"center",pt:"lg",pb:"md",children:w.jsx(pt,{children:"No data available."})}):w.jsxs(Kt,{direction:"row",children:[w.jsx(De,{w:340,children:w.jsx(mM,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),w.jsx(DE,{orientation:"vertical",mx:"md"}),w.jsx(qQt,{participantData:i,studyConfig:e,trialId:u})]})]})}function GQt({globalConfig:e}){const{studyId:t}=zm(),[n,r]=O.useState([]),[i,s]=O.useState(void 0),[o,a]=O.useState(!1),{storageEngine:u}=js(),l=gp(),{tab:c}=zm(),{user:f}=r_(),d=O.useCallback(async()=>{if(a(!0),t){const y=await M6(t,e);if(!y||!u)return;await u.initializeStudyDb(t,y);const b=await u.getAllParticipantsData();r(b),s(y),a(!1)}},[e,u,t]);O.useEffect(()=>{d()},[e,u,t,d]);const[h,p,g]=O.useMemo(()=>{const y=n.filter(E=>!E.rejected&&E.completed),b=n.filter(E=>!E.rejected&&!E.completed),_=n.filter(E=>E.rejected);return[y,b,_]},[n]);return w.jsxs(w.Fragment,{children:[w.jsx(O2,{studyIds:e.configsList}),w.jsx(Ui.Main,{children:w.jsxs(uf,{fluid:!0,style:{height:"100%",position:"relative"},children:[w.jsx(lc,{visible:o}),w.jsxs(Kt,{direction:"row",align:"center",children:[w.jsx(es,{order:5,children:t}),w.jsx(MRe,{completed:h.length,inProgress:p.length,rejected:g.length})]}),w.jsx(rc,{h:"xs"}),w.jsxs(ks,{variant:"outline",value:c,onChange:y=>l(`/analysis/stats/${t}/${y}`),style:{height:"100%"},children:[w.jsxs(ks.List,{children:[w.jsx(ks.Tab,{value:"table",leftSection:w.jsx(FWe,{size:16}),children:"Table View"}),w.jsx(ks.Tab,{value:"stats",leftSection:w.jsx(yWe,{size:16}),children:"Trial Stats"}),w.jsx(Li,{label:"Coming soon",position:"bottom",children:w.jsx(ks.Tab,{value:"replay",leftSection:w.jsx(NWe,{size:16}),disabled:!0,children:"Participant Replay"})}),w.jsx(ks.Tab,{value:"manage",leftSection:w.jsx(z1e,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),w.jsx(ks.Panel,{value:"table",pt:"xs",children:i&&w.jsx(nNt,{completed:h,inProgress:p,rejected:g,studyConfig:i,refresh:d})}),w.jsx(ks.Panel,{value:"stats",pt:"xs",children:i&&w.jsx(WQt,{studyConfig:i,completed:h,inprogress:p,rejected:g})}),w.jsx(ks.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),w.jsx(ks.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?w.jsx(cNt,{studyId:t,refresh:d}):w.jsx(uf,{mt:20,children:w.jsx(Wx,{title:"Unauthorized Access",variant:"light",color:"red",icon:w.jsx(B1e,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function R0e({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=r_(),{storageEngine:o}=js(),[a,u]=O.useState(!1),l=zm();return O.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?w.jsx(lc,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?w.jsx(KW,{to:"/login"}):w.jsx(w.Fragment,{children:e})}async function J6e(e,t){if(e instanceof Qf){t(!0);const n=new ym,r=xM();try{await qTt(r,n,PIe)}catch(i){PM({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function YQt(){const{user:e}=r_(),[t,n]=O.useState(!1),{storageEngine:r}=js();return O.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&PM({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?w.jsx(KW,{to:"/"}):w.jsx(uf,{children:w.jsx(Bb,{padding:"lg",children:w.jsxs(Kt,{align:"center",direction:"column",justify:"center",children:[w.jsx(Ub,{maw:200,mt:50,mb:100,src:`${cc}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),w.jsxs(w.Fragment,{children:[w.jsx(pt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),w.jsx(Sn,{onClick:()=>J6e(r,n),leftSection:w.jsx(jWe,{}),variant:"filled",children:"Sign In With Google"})]}),w.jsx(lc,{visible:t})]})})})}var dO={exports:{}},KQt=dO.exports,N0e;function XQt(){return N0e||(N0e=1,function(e,t){(function(n,r){e.exports=r()})(KQt,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",g="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(B){var V=["th","st","nd","rd"],z=B%100;return"["+B+(V[(z-20)%10]||V[z]||V[0])+"]"}},E=function(B,V,z){var G=String(B);return!G||G.length>=V?B:""+Array(V+1-G.length).join(z)+B},C={s:E,z:function(B){var V=-B.utcOffset(),z=Math.abs(V),G=Math.floor(z/60),Y=z%60;return(V<=0?"+":"-")+E(G,2,"0")+":"+E(Y,2,"0")},m:function B(V,z){if(V.date()<z.date())return-B(z,V);var G=12*(z.year()-V.year())+(z.month()-V.month()),Y=V.clone().add(G,f),Q=z-Y<0,L=V.clone().add(G+(Q?-1:1),f);return+(-(G+(z-Y)/(Q?Y-L:L-Y))||0)},a:function(B){return B<0?Math.ceil(B)||0:Math.floor(B)},p:function(B){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[B]||String(B||"").toLowerCase().replace(/s$/,"")},u:function(B){return B===void 0}},x="en",T={};T[x]=_;var A="$isDayjsObject",k=function(B){return B instanceof j||!(!B||!B[A])},N=function B(V,z,G){var Y;if(!V)return x;if(typeof V=="string"){var Q=V.toLowerCase();T[Q]&&(Y=Q),z&&(T[Q]=z,Y=Q);var L=V.split("-");if(!Y&&L.length>1)return B(L[0])}else{var U=V.name;T[U]=V,Y=U}return!G&&Y&&(x=Y),Y||!G&&x},P=function(B,V){if(k(B))return B.clone();var z=typeof V=="object"?V:{};return z.date=B,z.args=arguments,new j(z)},D=C;D.l=N,D.i=k,D.w=function(B,V){return P(B,{locale:V.$L,utc:V.$u,x:V.$x,$offset:V.$offset})};var j=function(){function B(z){this.$L=N(z.locale,null,!0),this.parse(z),this.$x=this.$x||z.x||{},this[A]=!0}var V=B.prototype;return V.parse=function(z){this.$d=function(G){var Y=G.date,Q=G.utc;if(Y===null)return new Date(NaN);if(D.u(Y))return new Date;if(Y instanceof Date)return new Date(Y);if(typeof Y=="string"&&!/Z$/i.test(Y)){var L=Y.match(y);if(L){var U=L[2]-1||0,K=(L[7]||"0").substring(0,3);return Q?new Date(Date.UTC(L[1],U,L[3]||1,L[4]||0,L[5]||0,L[6]||0,K)):new Date(L[1],U,L[3]||1,L[4]||0,L[5]||0,L[6]||0,K)}}return new Date(Y)}(z),this.init()},V.init=function(){var z=this.$d;this.$y=z.getFullYear(),this.$M=z.getMonth(),this.$D=z.getDate(),this.$W=z.getDay(),this.$H=z.getHours(),this.$m=z.getMinutes(),this.$s=z.getSeconds(),this.$ms=z.getMilliseconds()},V.$utils=function(){return D},V.isValid=function(){return this.$d.toString()!==g},V.isSame=function(z,G){var Y=P(z);return this.startOf(G)<=Y&&Y<=this.endOf(G)},V.isAfter=function(z,G){return P(z)<this.startOf(G)},V.isBefore=function(z,G){return this.endOf(G)<P(z)},V.$g=function(z,G,Y){return D.u(z)?this[G]:this.set(Y,z)},V.unix=function(){return Math.floor(this.valueOf()/1e3)},V.valueOf=function(){return this.$d.getTime()},V.startOf=function(z,G){var Y=this,Q=!!D.u(G)||G,L=D.p(z),U=function(be,Ce){var oe=D.w(Y.$u?Date.UTC(Y.$y,Ce,be):new Date(Y.$y,Ce,be),Y);return Q?oe:oe.endOf(l)},K=function(be,Ce){return D.w(Y.toDate()[be].apply(Y.toDate("s"),(Q?[0,0,0,0]:[23,59,59,999]).slice(Ce)),Y)},q=this.$W,X=this.$M,Z=this.$D,ae="set"+(this.$u?"UTC":"");switch(L){case h:return Q?U(1,0):U(31,11);case f:return Q?U(1,X):U(0,X+1);case c:var he=this.$locale().weekStart||0,ge=(q<he?q+7:q)-he;return U(Q?Z-ge:Z+(6-ge),X);case l:case p:return K(ae+"Hours",0);case u:return K(ae+"Minutes",1);case a:return K(ae+"Seconds",2);case o:return K(ae+"Milliseconds",3);default:return this.clone()}},V.endOf=function(z){return this.startOf(z,!1)},V.$set=function(z,G){var Y,Q=D.p(z),L="set"+(this.$u?"UTC":""),U=(Y={},Y[l]=L+"Date",Y[p]=L+"Date",Y[f]=L+"Month",Y[h]=L+"FullYear",Y[u]=L+"Hours",Y[a]=L+"Minutes",Y[o]=L+"Seconds",Y[s]=L+"Milliseconds",Y)[Q],K=Q===l?this.$D+(G-this.$W):G;if(Q===f||Q===h){var q=this.clone().set(p,1);q.$d[U](K),q.init(),this.$d=q.set(p,Math.min(this.$D,q.daysInMonth())).$d}else U&&this.$d[U](K);return this.init(),this},V.set=function(z,G){return this.clone().$set(z,G)},V.get=function(z){return this[D.p(z)]()},V.add=function(z,G){var Y,Q=this;z=Number(z);var L=D.p(G),U=function(X){var Z=P(Q);return D.w(Z.date(Z.date()+Math.round(X*z)),Q)};if(L===f)return this.set(f,this.$M+z);if(L===h)return this.set(h,this.$y+z);if(L===l)return U(1);if(L===c)return U(7);var K=(Y={},Y[a]=r,Y[u]=i,Y[o]=n,Y)[L]||1,q=this.$d.getTime()+z*K;return D.w(q,this)},V.subtract=function(z,G){return this.add(-1*z,G)},V.format=function(z){var G=this,Y=this.$locale();if(!this.isValid())return Y.invalidDate||g;var Q=z||"YYYY-MM-DDTHH:mm:ssZ",L=D.z(this),U=this.$H,K=this.$m,q=this.$M,X=Y.weekdays,Z=Y.months,ae=Y.meridiem,he=function(Ce,oe,re,xe){return Ce&&(Ce[oe]||Ce(G,Q))||re[oe].slice(0,xe)},ge=function(Ce){return D.s(U%12||12,Ce,"0")},be=ae||function(Ce,oe,re){var xe=Ce<12?"AM":"PM";return re?xe.toLowerCase():xe};return Q.replace(b,function(Ce,oe){return oe||function(re){switch(re){case"YY":return String(G.$y).slice(-2);case"YYYY":return D.s(G.$y,4,"0");case"M":return q+1;case"MM":return D.s(q+1,2,"0");case"MMM":return he(Y.monthsShort,q,Z,3);case"MMMM":return he(Z,q);case"D":return G.$D;case"DD":return D.s(G.$D,2,"0");case"d":return String(G.$W);case"dd":return he(Y.weekdaysMin,G.$W,X,2);case"ddd":return he(Y.weekdaysShort,G.$W,X,3);case"dddd":return X[G.$W];case"H":return String(U);case"HH":return D.s(U,2,"0");case"h":return ge(1);case"hh":return ge(2);case"a":return be(U,K,!0);case"A":return be(U,K,!1);case"m":return String(K);case"mm":return D.s(K,2,"0");case"s":return String(G.$s);case"ss":return D.s(G.$s,2,"0");case"SSS":return D.s(G.$ms,3,"0");case"Z":return L}return null}(Ce)||L.replace(":","")})},V.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},V.diff=function(z,G,Y){var Q,L=this,U=D.p(G),K=P(z),q=(K.utcOffset()-this.utcOffset())*r,X=this-K,Z=function(){return D.m(L,K)};switch(U){case h:Q=Z()/12;break;case f:Q=Z();break;case d:Q=Z()/3;break;case c:Q=(X-q)/6048e5;break;case l:Q=(X-q)/864e5;break;case u:Q=X/i;break;case a:Q=X/r;break;case o:Q=X/n;break;default:Q=X}return Y?Q:D.a(Q)},V.daysInMonth=function(){return this.endOf(f).$D},V.$locale=function(){return T[this.$L]},V.locale=function(z,G){if(!z)return this.$L;var Y=this.clone(),Q=N(z,G,!0);return Q&&(Y.$L=Q),Y},V.clone=function(){return D.w(this.$d,this)},V.toDate=function(){return new Date(this.valueOf())},V.toJSON=function(){return this.isValid()?this.toISOString():null},V.toISOString=function(){return this.$d.toISOString()},V.toString=function(){return this.$d.toUTCString()},B}(),M=j.prototype;return P.prototype=M,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function(B){M[B[1]]=function(V){return this.$g(V,B[0],B[1])}}),P.extend=function(B,V){return B.$i||(B(V,j,P),B.$i=!0),P},P.locale=N,P.isDayjs=k,P.unix=function(B){return P(1e3*B)},P.en=T[x],P.Ls=T,P.p={},P})}(dO)),dO.exports}var QQt=XQt();const Vt=Ru(QQt);function JQt({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Vt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function ZQt({formatter:e,...t}){return(e||JQt)(t)}function eJt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function Z6e({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=eJt({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?Z6e({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function tJt(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function nJt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function sne({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=tJt(i.key);if(s){i.preventDefault();const o=nJt(e);Z6e({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var hO={exports:{}},rJt=hO.exports,P0e;function iJt(){return P0e||(P0e=1,function(e,t){(function(n,r){e.exports=r()})(rJt,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var g=new Date(d),y=function(b,_){_===void 0&&(_={});var E=_.timeZoneName||"short",C=b+"|"+E,x=r[C];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:b,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:E}),r[C]=x),x}(h,p);return y.formatToParts(g)},l=function(d,h){for(var p=u(d,h),g=[],y=0;y<p.length;y+=1){var b=p[y],_=b.type,E=b.value,C=n[_];C>=0&&(g[C]=parseInt(E,10))}var x=g[3],T=x===24?0:x,A=g[0]+"-"+g[1]+"-"+g[2]+" "+T+":"+g[4]+":"+g[5]+":000",k=+d;return(o.utc(A).valueOf()-(k-=k%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),g=this.toDate(),y=g.toLocaleString("en-US",{timeZone:d}),b=Math.round((g-new Date(y))/1e3/60),_=o(y,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(g.getTimezoneOffset()/15)-b,!0);if(h){var E=_.utcOffset();_=_.add(p-E,"minute")}return _.$x.$timezone=d,_},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(g){return g.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var g=p&&h,y=p||h||a,b=l(+o(),y);if(typeof d!="string")return o(d).tz(y);var _=function(T,A,k){var N=T-60*A*1e3,P=l(N,k);if(A===P)return[N,A];var D=l(N-=60*(P-A)*1e3,k);return P===D?[N,P]:[T-60*Math.min(P,D)*1e3,Math.max(P,D)]}(o.utc(d,g).valueOf(),b,y),E=_[0],C=_[1],x=o(E).utcOffset(C);return x.$x.$timezone=y,x},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})}(hO)),hO.exports}var sJt=iJt();const oJt=Ru(sJt);var pO={exports:{}},aJt=pO.exports,D0e;function uJt(){return D0e||(D0e=1,function(e,t){(function(n,r){e.exports=r()})(aJt,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(g){var y={date:g,utc:!0,args:arguments};return new o(y)},u.utc=function(g){var y=a(this.toDate(),{locale:this.$L,utc:!0});return g?y.add(this.utcOffset(),n):y},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(g){g.utc&&(this.$u=!0),this.$utils().u(g.$offset)||(this.$offset=g.$offset),l.call(this,g)};var c=u.init;u.init=function(){if(this.$u){var g=this.$d;this.$y=g.getUTCFullYear(),this.$M=g.getUTCMonth(),this.$D=g.getUTCDate(),this.$W=g.getUTCDay(),this.$H=g.getUTCHours(),this.$m=g.getUTCMinutes(),this.$s=g.getUTCSeconds(),this.$ms=g.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(g,y){var b=this.$utils().u;if(b(g))return this.$u?0:b(this.$offset)?f.call(this):this.$offset;if(typeof g=="string"&&(g=function(x){x===void 0&&(x="");var T=x.match(r);if(!T)return null;var A=(""+T[0]).match(i)||["-",0,0],k=A[0],N=60*+A[1]+ +A[2];return N===0?0:k==="+"?N:-N}(g),g===null))return this;var _=Math.abs(g)<=16?60*g:g,E=this;if(y)return E.$offset=_,E.$u=g===0,E;if(g!==0){var C=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(E=this.local().add(_+C,n)).$offset=_,E.$x.$localOffset=C}else E=this.utc();return E};var d=u.format;u.format=function(g){var y=g||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,y)},u.valueOf=function(){var g=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*g},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(g){return g==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(g,y,b){if(g&&this.$u===g.$u)return p.call(this,g,y,b);var _=this.local(),E=a(g).local();return p.call(_,E,y,b)}}})}(pO)),pO.exports}var lJt=uJt();const cJt=Ru(lJt);Vt.extend(cJt);Vt.extend(oJt);function fJt(e,t){return t?Vt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const O0e=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=fJt(e,t);return n==="remove"&&(r*=-1),Vt(e).add(r,"minutes").toDate()};function Z0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>O0e(i,n,e)):O0e(t,n,e)}function dJt({minDate:e,maxDate:t,timezone:n}){const r=Z0("add",new Date,n);return!e&&!t?r:e&&Vt(r).isBefore(e)?e:t&&Vt(r).isAfter(t)?t:r}const hJt={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},pJt=O.createContext(hJt);function Sc(){const e=O.useContext(pJt),t=O.useCallback(o=>o||e.locale,[e.locale]),n=O.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=O.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=O.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=O.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function mJt(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function eFe({value:e,type:t,name:n,form:r}){return w.jsx("input",{type:"hidden",value:mJt(e,t),name:n,form:r})}eFe.displayName="@mantine/dates/HiddenDatesInput";var tFe={day:"m_396ce5cb"};const gJt={},yJt=(e,{size:t})=>({day:{"--day-size":Cn(t,"day-size")}}),one=Ze((e,t)=>{const n=Le("Day",gJt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:g,inRange:y,firstInRange:b,lastInRange:_,hidden:E,static:C,...x}=n,T=Nt({name:f||"Day",classes:tFe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yJt,rootSelector:"day"}),A=Sc();return w.jsx(Zs,{...T("day",{style:E?{display:"none"}:void 0}),component:C?"div":"button",ref:t,disabled:c,"data-today":Vt(l).isSame(Z0("add",new Date,A.getTimezone()),"day")||void 0,"data-hidden":E||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":y&&!c||void 0,"data-first-in-range":b&&!c||void 0,"data-last-in-range":_&&!c||void 0,"data-static":C||void 0,unstyled:a,...x,children:(g==null?void 0:g(l))||l.getDate()})});one.classes=tFe;one.displayName="@mantine/dates/Day";function vJt({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Vt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Vt(r).add(s,"days").locale(e).format(t)):i.push(t(Vt(r).add(s,"days").toDate()));return i}var nFe={weekday:"m_18a3eca"};const bJt={},_Jt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":zo(t),"--wr-spacing":Ps(t)}}),ane=Ze((e,t)=>{const n=Le("WeekdaysRow",bJt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,g=Nt({name:h||"WeekdaysRow",classes:nFe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Jt,rootSelector:"weekdaysRow"}),y=Sc(),b=vJt({locale:y.getLocale(l),format:f,firstDayOfWeek:y.getFirstDayOfWeek(c)}).map((_,E)=>w.jsx(d,{...g("weekday"),children:_},E));return w.jsx(De,{component:"tr",ref:t,...g("weekdaysRow"),...p,children:b})});ane.classes=nFe;ane.displayName="@mantine/dates/WeekdaysRow";function wJt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function EJt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function xJt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=wJt(s,t),a=EJt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function rFe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function iFe(e,t){return t instanceof Date?Vt(e).isAfter(Vt(t).subtract(1,"day"),"day"):!0}function sFe(e,t){return t instanceof Date?Vt(e).isBefore(Vt(t).add(1,"day"),"day"):!0}function SJt(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return sFe(c,n)&&iFe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||rFe(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Vt().isSame(c,"date"));return l||a[0]}var oFe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const TJt={withCellSpacing:!0},G4=Ze((e,t)=>{const n=Le("Month",TJt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:g,excludeDate:y,minDate:b,maxDate:_,renderDay:E,hideOutsideDates:C,hideWeekdays:x,getDayAriaLabel:T,static:A,__getDayRef:k,__onDayKeyDown:N,__onDayClick:P,__onDayMouseEnter:D,__preventFocus:j,__stopPropagation:M,withCellSpacing:B,size:V,...z}=n,G=Nt({name:l||"Month",classes:oFe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),Y=Sc(),Q=xJt({month:h,firstDayOfWeek:Y.getFirstDayOfWeek(f),consistentWeeks:Y.consistentWeeks}),L=SJt(Q,b,_,g,y,C,h),{resolvedClassNames:U,resolvedStyles:K}=lg({classNames:r,styles:o,props:n}),q=Q.map((X,Z)=>{const ae=X.map((he,ge)=>{const be=!rFe(he,h),Ce=(T==null?void 0:T(he))||Vt(he).locale(c||Y.locale).format("D MMMM YYYY"),oe=g==null?void 0:g(he),re=Vt(he).isSame(L,"date");return w.jsx("td",{...G("monthCell"),"data-with-spacing":B||void 0,children:w.jsx(one,{__staticSelector:l||"Month",classNames:U,styles:K,unstyled:a,"data-mantine-stop-propagation":M||void 0,renderDay:E,date:he,size:V,weekend:Y.getWeekendDays(p).includes(he.getDay()),outside:be,hidden:C?be:!1,"aria-label":Ce,static:A,disabled:(y==null?void 0:y(he))||!sFe(he,_)||!iFe(he,b),ref:xe=>k==null?void 0:k(Z,ge,xe),...oe,onKeyDown:xe=>{var Re;(Re=oe==null?void 0:oe.onKeyDown)==null||Re.call(oe,xe),N==null||N(xe,{rowIndex:Z,cellIndex:ge,date:he})},onMouseEnter:xe=>{var Re;(Re=oe==null?void 0:oe.onMouseEnter)==null||Re.call(oe,xe),D==null||D(xe,he)},onClick:xe=>{var Re;(Re=oe==null?void 0:oe.onClick)==null||Re.call(oe,xe),P==null||P(xe,he)},onMouseDown:xe=>{var Re;(Re=oe==null?void 0:oe.onMouseDown)==null||Re.call(oe,xe),j&&xe.preventDefault()},tabIndex:j||!re?-1:0})},he.toString())});return w.jsx("tr",{...G("monthRow"),children:ae},Z)});return w.jsxs(De,{component:"table",...G("month"),size:V,ref:t,...z,children:[!x&&w.jsx("thead",{...G("monthThead"),children:w.jsx(ane,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:V,classNames:U,styles:K,unstyled:a})}),w.jsx("tbody",{...G("monthTbody"),children:q})]})});G4.classes=oFe;G4.displayName="@mantine/dates/Month";var aFe={pickerControl:"m_dc6a3c71"};const CJt={},AJt=(e,{size:t})=>({pickerControl:{"--dpc-fz":zo(t),"--dpc-size":Cn(t,"dpc-size")}}),Y4=Ze((e,t)=>{const n=Le("PickerControl",CJt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...g}=n,y=Nt({name:d||"PickerControl",classes:aFe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AJt,rootSelector:"pickerControl"});return w.jsx(Zs,{...y("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...g})});Y4.classes=aFe;Y4.displayName="@mantine/dates/PickerControl";function uFe(e,t,n){return!t&&!n?!1:!!(t&&Vt(e).isBefore(t,"year")||n&&Vt(e).isAfter(n,"year"))}function IJt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!uFe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Vt().isSame(a,"year"));return o||i[0]}function lFe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var cFe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const kJt={yearsListFormat:"YYYY",withCellSpacing:!0},K4=Ze((e,t)=>{const n=Le("YearsList",kJt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:g,__getControlRef:y,__onControlKeyDown:b,__onControlClick:_,__onControlMouseEnter:E,__preventFocus:C,__stopPropagation:x,withCellSpacing:T,size:A,...k}=n,N=Nt({name:g||"YearsList",classes:cFe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),P=Sc(),D=lFe(l),j=IJt(D,d,h,p),M=D.map((B,V)=>{const z=B.map((G,Y)=>{const Q=p==null?void 0:p(G),L=Vt(G).isSame(j,"year");return w.jsx("td",{...N("yearsListCell"),"data-with-spacing":T||void 0,children:w.jsx(Y4,{...N("yearsListControl"),size:A,unstyled:a,"data-mantine-stop-propagation":x||void 0,disabled:uFe(G,d,h),ref:U=>y==null?void 0:y(V,Y,U),...Q,onKeyDown:U=>{var K;(K=Q==null?void 0:Q.onKeyDown)==null||K.call(Q,U),b==null||b(U,{rowIndex:V,cellIndex:Y,date:G})},onClick:U=>{var K;(K=Q==null?void 0:Q.onClick)==null||K.call(Q,U),_==null||_(U,G)},onMouseEnter:U=>{var K;(K=Q==null?void 0:Q.onMouseEnter)==null||K.call(Q,U),E==null||E(U,G)},onMouseDown:U=>{var K;(K=Q==null?void 0:Q.onMouseDown)==null||K.call(Q,U),C&&U.preventDefault()},tabIndex:C||!L?-1:0,children:Vt(G).locale(P.getLocale(f)).format(c)})},Y)});return w.jsx("tr",{...N("yearsListRow"),children:z},V)});return w.jsx(De,{component:"table",ref:t,size:A,...N("yearsList"),...k,children:w.jsx("tbody",{children:M})})});K4.classes=cFe;K4.displayName="@mantine/dates/YearsList";function fFe(e,t,n){return!t&&!n?!1:!!(t&&Vt(e).isBefore(t,"month")||n&&Vt(e).isAfter(n,"month"))}function RJt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!fFe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Vt().isSame(a,"month"));return o||i[0]}function NJt(e){const t=Vt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Vt(t).add(r,"months").toDate()),r+=1;return n}var dFe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const PJt={monthsListFormat:"MMM",withCellSpacing:!0},X4=Ze((e,t)=>{const n=Le("MonthsList",PJt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:g,__getControlRef:y,__onControlKeyDown:b,__onControlClick:_,__onControlMouseEnter:E,__preventFocus:C,__stopPropagation:x,withCellSpacing:T,size:A,...k}=n,N=Nt({name:l||"MonthsList",classes:dFe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),P=Sc(),D=NJt(c),j=RJt(D,h,p,g),M=D.map((B,V)=>{const z=B.map((G,Y)=>{const Q=g==null?void 0:g(G),L=Vt(G).isSame(j,"month");return w.jsx("td",{...N("monthsListCell"),"data-with-spacing":T||void 0,children:w.jsx(Y4,{...N("monthsListControl"),size:A,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":x||void 0,disabled:fFe(G,h,p),ref:U=>y==null?void 0:y(V,Y,U),...Q,onKeyDown:U=>{var K;(K=Q==null?void 0:Q.onKeyDown)==null||K.call(Q,U),b==null||b(U,{rowIndex:V,cellIndex:Y,date:G})},onClick:U=>{var K;(K=Q==null?void 0:Q.onClick)==null||K.call(Q,U),_==null||_(U,G)},onMouseEnter:U=>{var K;(K=Q==null?void 0:Q.onMouseEnter)==null||K.call(Q,U),E==null||E(U,G)},onMouseDown:U=>{var K;(K=Q==null?void 0:Q.onMouseDown)==null||K.call(Q,U),C&&U.preventDefault()},tabIndex:C||!L?-1:0,children:Vt(G).locale(P.getLocale(d)).format(f)})},Y)});return w.jsx("tr",{...N("monthsListRow"),children:z},V)});return w.jsx(De,{component:"table",ref:t,size:A,...N("monthsList"),...k,children:w.jsx("tbody",{children:M})})});X4.classes=dFe;X4.displayName="@mantine/dates/MonthsList";var hFe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const DJt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},OJt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":Cn(t,"dch-control-size"),"--dch-fz":zo(t)}}),yv=Ze((e,t)=>{const n=Le("CalendarHeader",DJt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:g,label:y,nextDisabled:b,previousDisabled:_,hasNextLevel:E,levelControlAriaLabel:C,withNext:x,withPrevious:T,__staticSelector:A,__preventFocus:k,__stopPropagation:N,...P}=n,D=Nt({name:A||"CalendarHeader",classes:hFe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OJt,rootSelector:"calendarHeader"}),j=k?M=>M.preventDefault():void 0;return w.jsxs(De,{...D("calendarHeader"),ref:t,...P,children:[T&&w.jsx(Zs,{...D("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:j,disabled:_,"data-disabled":_||void 0,tabIndex:k||_?-1:0,"data-mantine-stop-propagation":N||void 0,children:c||w.jsx(NE,{...D("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),w.jsx(Zs,{component:E?"button":"div",...D("calendarHeaderLevel"),onClick:E?g:void 0,unstyled:a,onMouseDown:E?j:void 0,disabled:!E,"data-static":!E||void 0,"aria-label":C,tabIndex:k||!E?-1:0,"data-mantine-stop-propagation":N||void 0,children:y}),x&&w.jsx(Zs,{...D("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:j,disabled:b,"data-disabled":b||void 0,tabIndex:k||b?-1:0,"data-mantine-stop-propagation":N||void 0,children:l||w.jsx(NE,{...D("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});yv.classes=hFe;yv.displayName="@mantine/dates/CalendarHeader";function MJt(e){const t=lFe(e);return[t[0][0],t[3][0]]}const $Jt={decadeLabelFormat:"YYYY"},Q4=Ze((e,t)=>{const n=Le("DecadeLevel",$Jt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:g,previousIcon:y,nextLabel:b,previousLabel:_,onNext:E,onPrevious:C,nextDisabled:x,previousDisabled:T,levelControlAriaLabel:A,withNext:k,withPrevious:N,decadeLabelFormat:P,classNames:D,styles:j,unstyled:M,__staticSelector:B,__stopPropagation:V,size:z,...G}=n,Y=Sc(),[Q,L]=MJt(r),U={__staticSelector:B||"DecadeLevel",classNames:D,styles:j,unstyled:M,size:z},K=typeof x=="boolean"?x:o?!Vt(L).endOf("year").isBefore(o):!1,q=typeof T=="boolean"?T:s?!Vt(Q).startOf("year").isAfter(s):!1,X=(Z,ae)=>Vt(Z).locale(i||Y.locale).format(ae);return w.jsxs(De,{"data-decade-level":!0,size:z,ref:t,...G,children:[w.jsx(yv,{label:typeof P=="function"?P(Q,L):`${X(Q,P)}  ${X(L,P)}`,__preventFocus:p,__stopPropagation:V,nextIcon:g,previousIcon:y,nextLabel:b,previousLabel:_,onNext:E,onPrevious:C,nextDisabled:K,previousDisabled:q,hasNextLevel:!1,levelControlAriaLabel:A,withNext:k,withPrevious:N,...U}),w.jsx(K4,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:V,withCellSpacing:h,...U})]})});Q4.classes={...K4.classes,...yv.classes};Q4.displayName="@mantine/dates/DecadeLevel";const LJt={yearLabelFormat:"YYYY"},J4=Ze((e,t)=>{const n=Le("YearLevel",LJt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:g,previousIcon:y,nextLabel:b,previousLabel:_,onNext:E,onPrevious:C,onLevelClick:x,nextDisabled:T,previousDisabled:A,hasNextLevel:k,levelControlAriaLabel:N,withNext:P,withPrevious:D,yearLabelFormat:j,__staticSelector:M,__stopPropagation:B,size:V,classNames:z,styles:G,unstyled:Y,...Q}=n,L=Sc(),U={__staticSelector:M||"YearLevel",classNames:z,styles:G,unstyled:Y,size:V},K=typeof T=="boolean"?T:o?!Vt(r).endOf("year").isBefore(o):!1,q=typeof A=="boolean"?A:s?!Vt(r).startOf("year").isAfter(s):!1;return w.jsxs(De,{"data-year-level":!0,size:V,ref:t,...Q,children:[w.jsx(yv,{label:typeof j=="function"?j(r):Vt(r).locale(i||L.locale).format(j),__preventFocus:p,__stopPropagation:B,nextIcon:g,previousIcon:y,nextLabel:b,previousLabel:_,onNext:E,onPrevious:C,onLevelClick:x,nextDisabled:K,previousDisabled:q,hasNextLevel:k,levelControlAriaLabel:N,withNext:P,withPrevious:D,...U}),w.jsx(X4,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:B,withCellSpacing:h,...U})]})});J4.classes={...yv.classes,...X4.classes};J4.displayName="@mantine/dates/YearLevel";const FJt={monthLabelFormat:"MMMM YYYY"},Z4=Ze((e,t)=>{const n=Le("MonthLevel",FJt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:g,__getDayRef:y,__onDayKeyDown:b,__onDayClick:_,__onDayMouseEnter:E,withCellSpacing:C,__preventFocus:x,__stopPropagation:T,nextIcon:A,previousIcon:k,nextLabel:N,previousLabel:P,onNext:D,onPrevious:j,onLevelClick:M,nextDisabled:B,previousDisabled:V,hasNextLevel:z,levelControlAriaLabel:G,withNext:Y,withPrevious:Q,monthLabelFormat:L,classNames:U,styles:K,unstyled:q,__staticSelector:X,size:Z,static:ae,...he}=n,ge=Sc(),be={__staticSelector:X||"MonthLevel",classNames:U,styles:K,unstyled:q,size:Z},Ce=typeof B=="boolean"?B:f?!Vt(r).endOf("month").isBefore(f):!1,oe=typeof V=="boolean"?V:c?!Vt(r).startOf("month").isAfter(c):!1;return w.jsxs(De,{"data-month-level":!0,size:Z,ref:t,...he,children:[w.jsx(yv,{label:typeof L=="function"?L(r):Vt(r).locale(i||ge.locale).format(L),__preventFocus:x,__stopPropagation:T,nextIcon:A,previousIcon:k,nextLabel:N,previousLabel:P,onNext:D,onPrevious:j,onLevelClick:M,nextDisabled:Ce,previousDisabled:oe,hasNextLevel:z,levelControlAriaLabel:G,withNext:Y,withPrevious:Q,...be}),w.jsx(G4,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:g,__getDayRef:y,__onDayKeyDown:b,__onDayClick:_,__onDayMouseEnter:E,__preventFocus:x,__stopPropagation:T,static:ae,withCellSpacing:C,...be})]})});Z4.classes={...G4.classes,...yv.classes};Z4.displayName="@mantine/dates/MonthLevel";var pFe={levelsGroup:"m_30b26e33"};const jJt={},vv=Ze((e,t)=>{const n=Le("LevelsGroup",jJt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=Nt({name:l||"LevelsGroup",classes:pFe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return w.jsx(De,{ref:t,...f("levelsGroup"),...c})});vv.classes=pFe;vv.displayName="@mantine/dates/LevelsGroup";const BJt={numberOfColumns:1},e5=Ze((e,t)=>{const n=Le("DecadeLevelGroup",BJt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:g,previousLabel:y,onNext:b,onPrevious:_,nextDisabled:E,previousDisabled:C,classNames:x,styles:T,unstyled:A,__staticSelector:k,__stopPropagation:N,numberOfColumns:P,levelControlAriaLabel:D,decadeLabelFormat:j,size:M,vars:B,...V}=n,z=O.useRef([]),G=Array(P).fill(0).map((Y,Q)=>{const L=Vt(r).add(Q*10,"years").toDate();return w.jsx(Q4,{size:M,yearsListFormat:a,decade:L,withNext:Q===P-1,withPrevious:Q===0,decadeLabelFormat:j,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(U,K)=>sne({levelIndex:Q,rowIndex:K.rowIndex,cellIndex:K.cellIndex,event:U,controlsRef:z}),__getControlRef:(U,K,q)=>{Array.isArray(z.current[Q])||(z.current[Q]=[]),Array.isArray(z.current[Q][U])||(z.current[Q][U]=[]),z.current[Q][U][K]=q},levelControlAriaLabel:typeof D=="function"?D(L):D,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:N,nextIcon:h,previousIcon:p,nextLabel:g,previousLabel:y,onNext:b,onPrevious:_,nextDisabled:E,previousDisabled:C,getYearControlProps:u,__staticSelector:k||"DecadeLevelGroup",classNames:x,styles:T,unstyled:A,withCellSpacing:f},Q)});return w.jsx(vv,{classNames:x,styles:T,__staticSelector:k||"DecadeLevelGroup",ref:t,size:M,unstyled:A,...V,children:G})});e5.classes={...vv.classes,...Q4.classes};e5.displayName="@mantine/dates/DecadeLevelGroup";const UJt={numberOfColumns:1},t5=Ze((e,t)=>{const n=Le("YearLevelGroup",UJt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:g,previousLabel:y,onNext:b,onPrevious:_,onLevelClick:E,nextDisabled:C,previousDisabled:x,hasNextLevel:T,classNames:A,styles:k,unstyled:N,__staticSelector:P,__stopPropagation:D,numberOfColumns:j,levelControlAriaLabel:M,yearLabelFormat:B,size:V,vars:z,...G}=n,Y=O.useRef([]),Q=Array(j).fill(0).map((L,U)=>{const K=Vt(r).add(U,"years").toDate();return w.jsx(J4,{size:V,monthsListFormat:a,year:K,withNext:U===j-1,withPrevious:U===0,yearLabelFormat:B,__stopPropagation:D,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(q,X)=>sne({levelIndex:U,rowIndex:X.rowIndex,cellIndex:X.cellIndex,event:q,controlsRef:Y}),__getControlRef:(q,X,Z)=>{Array.isArray(Y.current[U])||(Y.current[U]=[]),Array.isArray(Y.current[U][q])||(Y.current[U][q]=[]),Y.current[U][q][X]=Z},levelControlAriaLabel:typeof M=="function"?M(K):M,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:g,previousLabel:y,onNext:b,onPrevious:_,onLevelClick:E,nextDisabled:C,previousDisabled:x,hasNextLevel:T,getMonthControlProps:u,classNames:A,styles:k,unstyled:N,__staticSelector:P||"YearLevelGroup",withCellSpacing:f},U)});return w.jsx(vv,{classNames:A,styles:k,__staticSelector:P||"YearLevelGroup",ref:t,size:V,unstyled:N,...G,children:Q})});t5.classes={...J4.classes,...vv.classes};t5.displayName="@mantine/dates/YearLevelGroup";const zJt={numberOfColumns:1},n5=Ze((e,t)=>{const n=Le("MonthLevelGroup",zJt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:g,__onDayClick:y,__onDayMouseEnter:b,withCellSpacing:_,__preventFocus:E,nextIcon:C,previousIcon:x,nextLabel:T,previousLabel:A,onNext:k,onPrevious:N,onLevelClick:P,nextDisabled:D,previousDisabled:j,hasNextLevel:M,classNames:B,styles:V,unstyled:z,numberOfColumns:G,levelControlAriaLabel:Y,monthLabelFormat:Q,__staticSelector:L,__stopPropagation:U,size:K,static:q,vars:X,...Z}=n,ae=O.useRef([]),he=Array(G).fill(0).map((ge,be)=>{const Ce=Vt(r).add(be,"months").toDate();return w.jsx(Z4,{month:Ce,withNext:be===G-1,withPrevious:be===0,monthLabelFormat:Q,__stopPropagation:U,__onDayClick:y,__onDayMouseEnter:b,__onDayKeyDown:(oe,re)=>sne({levelIndex:be,rowIndex:re.rowIndex,cellIndex:re.cellIndex,event:oe,controlsRef:ae}),__getDayRef:(oe,re,xe)=>{Array.isArray(ae.current[be])||(ae.current[be]=[]),Array.isArray(ae.current[be][oe])||(ae.current[be][oe]=[]),ae.current[be][oe][re]=xe},levelControlAriaLabel:typeof Y=="function"?Y(Ce):Y,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:g,__preventFocus:E,nextIcon:C,previousIcon:x,nextLabel:T,previousLabel:A,onNext:k,onPrevious:N,onLevelClick:P,nextDisabled:D,previousDisabled:j,hasNextLevel:M,classNames:B,styles:V,unstyled:z,__staticSelector:L||"MonthLevelGroup",size:K,static:q,withCellSpacing:_},be)});return w.jsx(vv,{classNames:B,styles:V,__staticSelector:L||"MonthLevelGroup",ref:t,size:K,...Z,children:he})});n5.classes={...vv.classes,...Z4.classes};n5.displayName="@mantine/dates/MonthLevelGroup";var mFe={input:"m_6fa5e2aa"};const VJt={},r5=Ze((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:g,clearable:y,onClear:b,clearButtonProps:_,rightSection:E,shouldClear:C,readOnly:x,disabled:T,value:A,name:k,form:N,type:P,...D}=rve("PickerInputBase",VJt,e),j=E||(y&&C&&!x&&!T?w.jsx(dg,{variant:"transparent",onClick:b,unstyled:a,size:n.size||"sm",..._}):null),M=()=>{P==="range"&&Array.isArray(A)&&A[0]&&!A[1]&&b(),h.close()};return w.jsxs(w.Fragment,{children:[c==="modal"&&!x&&w.jsx(ls,{opened:p,onClose:M,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),w.jsx(zi.Wrapper,{...r,children:w.jsxs(ca,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||x,onClose:()=>{var B;(B=u==null?void 0:u.onClose)==null||B.call(u),M()},children:[w.jsx(ca.Target,{children:w.jsx(zi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":x||void 0,disabled:T,component:"button",type:"button",multiline:!0,onClick:B=>{g==null||g(B),h.toggle()},rightSection:j,...n,ref:t,classNames:{...s,input:xs(mFe.input,s==null?void 0:s.input)},...D,children:d||w.jsx(zi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),w.jsx(ca.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),w.jsx(eFe,{value:A,name:k,form:N,type:P})]})});r5.classes=mFe;r5.displayName="@mantine/dates/PickerInputBase";const M0e=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function une({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=O.useRef(e),o=Sc(),[a,u,l]=eo({value:Z0("add",t,o.getTimezone(),!i),defaultValue:Z0("add",n,o.getTimezone(),!i),finalValue:M0e(e),onChange:f=>{r==null||r(Z0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:M0e(e),u(c))),[c,u,l]}function yU(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function HJt(e){return e===0?"month":e===1?"year":"decade"}function vC(e,t,n){return HJt(Ch(yU(e,0),yU(t,0),yU(n,2)))}const qJt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},i5=Ze((e,t)=>{const n=Le("Calendar",qJt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:g,onMonthSelect:y,onYearMouseEnter:b,onMonthMouseEnter:_,__updateDateOnYearSelect:E,__updateDateOnMonthSelect:C,firstDayOfWeek:x,weekdayFormat:T,weekendDays:A,getDayProps:k,excludeDate:N,renderDay:P,hideOutsideDates:D,hideWeekdays:j,getDayAriaLabel:M,monthLabelFormat:B,nextIcon:V,previousIcon:z,__onDayClick:G,__onDayMouseEnter:Y,withCellSpacing:Q,monthsListFormat:L,getMonthControlProps:U,yearLabelFormat:K,yearsListFormat:q,getYearControlProps:X,decadeLabelFormat:Z,classNames:ae,styles:he,unstyled:ge,minDate:be,maxDate:Ce,locale:oe,__staticSelector:re,size:xe,__preventFocus:Re,__stopPropagation:Ke,onNextDecade:Qe,onPreviousDecade:ke,onNextYear:Ue,onPreviousYear:rt,onNextMonth:ft,onPreviousMonth:Rt,static:st,__timezoneApplied:Ie,...kt}=n,{resolvedClassNames:Ot,resolvedStyles:Ne}=lg({classNames:ae,styles:he,props:n}),[ze,ot]=eo({value:a?vC(a,s,i):void 0,defaultValue:o?vC(o,s,i):void 0,finalValue:vC(void 0,s,i),onChange:u}),[St,$t]=une({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!Ie}),Vn={__staticSelector:re||"Calendar",styles:Ne,classNames:Ot,unstyled:ge,size:xe},Yr=Sc(),tr=h||d||1,vr=St||Z0("add",new Date,Yr.getTimezone()),Fn=()=>{const kn=Vt(vr).add(tr,"month").toDate();ft==null||ft(kn),$t(kn)},Un=()=>{const kn=Vt(vr).subtract(tr,"month").toDate();Rt==null||Rt(kn),$t(kn)},ur=()=>{const kn=Vt(vr).add(tr,"year").toDate();Ue==null||Ue(kn),$t(kn)},lr=()=>{const kn=Vt(vr).subtract(tr,"year").toDate();rt==null||rt(kn),$t(kn)},Us=()=>{const kn=Vt(vr).add(10*tr,"year").toDate();Qe==null||Qe(kn),$t(kn)},Si=()=>{const kn=Vt(vr).subtract(10*tr,"year").toDate();ke==null||ke(kn),$t(kn)};return w.jsxs(De,{ref:t,size:xe,"data-calendar":!0,...kt,children:[ze==="month"&&w.jsx(n5,{month:vr,minDate:be,maxDate:Ce,firstDayOfWeek:x,weekdayFormat:T,weekendDays:A,getDayProps:k,excludeDate:N,renderDay:P,hideOutsideDates:D,hideWeekdays:j,getDayAriaLabel:M,onNext:Fn,onPrevious:Un,hasNextLevel:i!=="month",onLevelClick:()=>ot("year"),numberOfColumns:d,locale:oe,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:V,previousLabel:p==null?void 0:p.previousMonth,previousIcon:z,monthLabelFormat:B,__onDayClick:G,__onDayMouseEnter:Y,__preventFocus:Re,__stopPropagation:Ke,static:st,withCellSpacing:Q,...Vn}),ze==="year"&&w.jsx(t5,{year:vr,numberOfColumns:d,minDate:be,maxDate:Ce,monthsListFormat:L,getMonthControlProps:U,locale:oe,onNext:ur,onPrevious:lr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>ot("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:V,previousLabel:p==null?void 0:p.previousYear,previousIcon:z,yearLabelFormat:K,__onControlMouseEnter:_,__onControlClick:(kn,ii)=>{C&&$t(ii),ot(vC("month",s,i)),y==null||y(ii)},__preventFocus:Re,__stopPropagation:Ke,withCellSpacing:Q,...Vn}),ze==="decade"&&w.jsx(e5,{decade:vr,minDate:be,maxDate:Ce,yearsListFormat:q,getYearControlProps:X,locale:oe,onNext:Us,onPrevious:Si,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:V,previousLabel:p==null?void 0:p.previousDecade,previousIcon:z,decadeLabelFormat:Z,__onControlMouseEnter:b,__onControlClick:(kn,ii)=>{E&&$t(ii),ot(vC("year",s,i)),g==null||g(ii)},__preventFocus:Re,__stopPropagation:Ke,withCellSpacing:Q,...Vn})]})});i5.classes={...e5.classes,...t5.classes,...n5.classes};i5.displayName="@mantine/dates/Calendar";function WJt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:b,onNextMonth:_,onPreviousMonth:E,onNextYear:C,onPreviousYear:x,onNextDecade:T,onPreviousDecade:A,withCellSpacing:k,__updateDateOnYearSelect:N,__updateDateOnMonthSelect:P,firstDayOfWeek:D,weekdayFormat:j,weekendDays:M,getDayProps:B,excludeDate:V,renderDay:z,hideOutsideDates:G,hideWeekdays:Y,getDayAriaLabel:Q,monthLabelFormat:L,monthsListFormat:U,getMonthControlProps:K,yearLabelFormat:q,yearsListFormat:X,getYearControlProps:Z,decadeLabelFormat:ae,allowSingleDateInRange:he,allowDeselect:ge,minDate:be,maxDate:Ce,locale:oe,...re}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:b,onNextMonth:_,onPreviousMonth:E,onNextYear:C,onPreviousYear:x,onNextDecade:T,onPreviousDecade:A,withCellSpacing:k,__updateDateOnYearSelect:N,__updateDateOnMonthSelect:P,firstDayOfWeek:D,weekdayFormat:j,weekendDays:M,getDayProps:B,excludeDate:V,renderDay:z,hideOutsideDates:G,hideWeekdays:Y,getDayAriaLabel:Q,monthLabelFormat:L,monthsListFormat:U,getMonthControlProps:K,yearLabelFormat:q,yearsListFormat:X,getYearControlProps:Z,decadeLabelFormat:ae,allowSingleDateInRange:he,allowDeselect:ge,minDate:be,maxDate:Ce,locale:oe},others:re}}function $0e(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Vt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Vt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function GJt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=une({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=O.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=O.useState(null),g=T=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Vt(T).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const A=[T,f];A.sort((k,N)=>k.getTime()-N.getTime()),c(A),p(null),d(null);return}if(l[0]&&!l[1]&&Vt(T).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([T,null]),p(null),d(T);return}if(e==="multiple"){l.some(A=>Vt(A).isSame(T,t))?c(l.filter(A=>!Vt(A).isSame(T,t))):c([...l,T]);return}l&&o&&Vt(T).isSame(l,t)?c(null):c(T)},y=T=>f instanceof Date&&h instanceof Date?$0e(T,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?$0e(T,l):!1,b=e==="range"?T=>{a==null||a(T),p(null)}:a,_=T=>l[0]instanceof Date&&Vt(T).isSame(l[0],t)?!(h&&Vt(h).isBefore(l[0])):!1,E=T=>l[1]instanceof Date?Vt(T).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Vt(h).isBefore(l[0])&&Vt(T).isSame(l[0],t),C=T=>{if(e==="range")return{selected:l.some(k=>k&&Vt(k).isSame(T,t)),inRange:y(T),firstInRange:_(T),lastInRange:E(T),"data-autofocus":!!l[0]&&Vt(l[0]).isSame(T,t)||void 0};if(e==="multiple")return{selected:l.some(k=>k&&Vt(k).isSame(T,t)),"data-autofocus":!!l[0]&&Vt(l[0]).isSame(T,t)||void 0};const A=Vt(l).isSame(T,t);return{selected:A,"data-autofocus":A||void 0}},x=e==="range"&&f?p:()=>{};return O.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:g,onRootMouseLeave:b,onHoveredDateChange:x,getControlProps:C,_value:l,setValue:c}}const YJt={type:"default",defaultLevel:"month",numberOfColumns:1},s5=Ze((e,t)=>{const n=Le("DatePicker",YJt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:g,hideOutsideDates:y,__onDayMouseEnter:b,__onDayClick:_,__timezoneApplied:E,...C}=n,{onDateChange:x,onRootMouseLeave:T,onHoveredDateChange:A,getControlProps:k}=GJt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!E}),{resolvedClassNames:N,resolvedStyles:P}=lg({classNames:r,styles:i,props:n}),D=Sc();return w.jsx(i5,{ref:t,minLevel:"month",classNames:N,styles:P,__staticSelector:c||"DatePicker",onMouseLeave:T,numberOfColumns:g,hideOutsideDates:y??g!==1,__onDayMouseEnter:(j,M)=>{A(M),b==null||b(j,M)},__onDayClick:(j,M)=>{x(M),_==null||_(j,M)},getDayProps:j=>({...k(j),...f==null?void 0:f(j)}),...C,date:Z0("add",C.date,D.getTimezone(),E),__timezoneApplied:!0})});s5.classes=i5.classes;s5.displayName="@mantine/dates/DatePicker";function KJt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Sc(),[f,d]=P$(!1),[h,p]=une({type:e,value:t,defaultValue:n,onChange:r}),g=ZQt({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),y=E=>{o&&(e==="default"&&d.close(),e==="range"&&E[0]&&E[1]&&d.close()),p(a&&e==="multiple"?[...E].sort((C,x)=>C.getTime()-x.getTime()):E)},b=()=>y(e==="range"?[null,null]:e==="multiple"?[]:null),_=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:y,onClear:b,shouldClear:_,formattedValue:g,dropdownOpened:f,dropdownHandlers:d}}const XJt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},lne=Ze((e,t)=>{const n=Le("DatePickerInput",XJt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:g,dropdownType:y,sortDates:b,minDate:_,maxDate:E,vars:C,defaultDate:x,valueFormatter:T,...A}=n,{resolvedClassNames:k,resolvedStyles:N}=lg({classNames:c,styles:f,props:n}),{calendarProps:P,others:D}=WJt(A),{_value:j,setValue:M,formattedValue:B,dropdownHandlers:V,dropdownOpened:z,onClear:G,shouldClear:Y}=KJt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:b,valueFormatter:T}),Q=Array.isArray(j)?j[0]||x:j||x,L=Sc();return w.jsx(r5,{formattedValue:B,dropdownOpened:z,dropdownHandlers:V,classNames:k,styles:N,unstyled:d,ref:t,onClear:G,shouldClear:Y,value:j,size:p,variant:g,dropdownType:y,...D,type:r,__staticSelector:"DatePickerInput",children:w.jsx(s5,{...P,size:p,variant:g,type:r,value:j,defaultDate:Q||dJt({maxDate:E,minDate:_,timezone:L.getTimezone()}),onChange:M,locale:l,classNames:k,styles:N,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:y==="popover",minDate:_,maxDate:E,date:Z0("add",P.date,L.getTimezone()),__timezoneApplied:!0})})});lne.classes={...r5.classes,...s5.classes};lne.displayName="@mantine/dates/DatePickerInput";function QJt(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat().filter(r=>r!==-1);return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function JJt({studyId:e,allParticipants:t}){const n=gp(),[r,i]=dd(),s=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(g=>g.endTime).filter(g=>g!==-1))).filter(p=>Number.isFinite(p)),[o,a]=O.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=O.useMemo(()=>{const p=t.filter(b=>!b.rejected&&b.completed),g=t.filter(b=>!b.rejected&&!b.completed),y=t.filter(b=>b.rejected);return[p,g,y,p.filter(b=>QJt(b.answers,o))]},[t,o]),d=O.useMemo(()=>{var p,g;return f.length>0?[{Date:(p=o[0])==null?void 0:p.getTime(),Participants:0},...f.map(y=>Math.max(...Object.values(y.answers).map(b=>b.endTime).flat().filter(b=>b!==-1))).sort((y,b)=>y-b).map((y,b)=>({Date:y,Participants:b})),{Date:(g=o[1])==null?void 0:g.getTime(),Participants:f.length}]:[]},[f,o]),h=O.useMemo(()=>{var p,g;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=o[0])==null?void 0:p.getTime(),(g=o[1])==null?void 0:g.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]);return w.jsx(uf,{children:w.jsxs(Bb,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[w.jsxs(Kt,{align:"center",mb:"xs",justify:"space-between",children:[w.jsxs(Kt,{direction:"row",align:"center",children:[w.jsx(es,{order:5,children:e}),w.jsx(MRe,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),w.jsxs(Pi,{children:[w.jsx(bQ,{allParticipants:t,studyId:e}),w.jsx(Li,{label:"Analyze and manage study data",children:w.jsx(Sn,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${cc}analysis/stats/${e}`,children:w.jsx(vWe,{})})})]})]}),w.jsx(lne,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?w.jsxs(w.Fragment,{children:[w.jsx(pt,{mt:16,children:"Finished Participants"}),w.jsx(QH,{spec:h,actions:!1})]}):w.jsx(De,{h:293.4,children:w.jsx(uc,{style:{height:"100%"},children:w.jsx(pt,{children:"Not enough participants for chart"})})})]})})}function ZJt({globalConfig:e}){const[t,n]=O.useState(!1),[r,i]=O.useState({}),[s,o]=O.useState({}),{storageEngine:a}=js(),{user:u}=r_();O.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async g=>{const y=await M6(g,e);if(a){if(f[g]=await a.getAllParticipantsDataByStudy(g),y===null)return;if(a instanceof Qf){const b=await a.getModes(g);d[g]=b.analyticsInterfacePubliclyAccessible}}};await(async()=>{const g=e.configsList.map(y=>h(y));try{await Promise.all(g),i(f),o(d)}catch(y){console.error("Error fetching data:",y)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?w.jsx(gu.Col,{span:{md:12,xl:6},children:w.jsx(JJt,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return w.jsxs(w.Fragment,{children:[w.jsx(O2,{studyIds:e.configsList}),w.jsx(Ui.Main,{children:w.jsx(uf,{fluid:!0,children:w.jsxs(De,{children:[w.jsx(es,{mb:20,order:4,children:"Your Studies:"}),w.jsxs(gu,{children:[l.length>0?l:w.jsx(uf,{mt:100,children:w.jsx(pt,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),w.jsx(lc,{visible:t})]})]})})})]})}function eZt(){const{user:e,triggerAuth:t}=r_(),{storageEngine:n}=js(),[r,i]=O.useState(!1),[s,o]=O.useState([]),[a,u]=O.useState(!1),[l,c]=O.useState(!1),[f,d]=O.useState(!1),[h,p]=O.useState(!1),[g,y]=O.useState(!1),[b,_]=O.useState(""),[E,C]=O.useState(null),x=H_e({initialValues:{email:""},validate:{email:ont("Invalid email")}});O.useEffect(()=>{(async()=>{if(u(!0),n instanceof Qf){const M=await(n==null?void 0:n.getUserManagementData("authentication"));i(M==null?void 0:M.isEnabled);const B=await(n==null?void 0:n.getUserManagementData("adminUsers"));B&&B.adminUsersList&&o(B==null?void 0:B.adminUsersList.map(V=>V.email))}else i(!1);u(!1)})()},[n]);const T=async()=>{if(u(!0),n instanceof Qf){const j=await J6e(n,u);j&&j.email?(C({email:j.email,uid:j.uid}),p(!0)):y(!0)}u(!1)},A=async j=>{u(!0),n instanceof Qf&&j&&(await n.changeAuth(!0),await n.addAdminUser(j),o([j.email]),i(!0),t()),p(!1),u(!1)},k=async()=>{if(u(!0),n instanceof Qf){await n.addAdminUser({email:x.values.email,uid:null});const j=await n.getUserManagementData("adminUsers");o(j==null?void 0:j.adminUsersList.map(M=>M.email))}u(!1),c(!1),x.setValues({email:""})},N=j=>{d(!0),_(j)},P=async()=>{if(u(!0),n instanceof Qf){await n.removeAdminUser(b);const j=await n.getUserManagementData("adminUsers");o(j==null?void 0:j.adminUsersList.map(M=>M.email))}d(!1),u(!1)},D=O.useMemo(()=>n instanceof Qf,[n]);return w.jsxs(w.Fragment,{children:[w.jsx(uf,{children:w.jsxs(Bb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[w.jsx(es,{mb:20,order:3,children:"Authentication"}),r?w.jsx(Kt,{children:w.jsx(pt,{children:"Authentication is enabled."})}):w.jsxs(Kt,{justify:"space-between",children:[w.jsx(De,{children:w.jsx(pt,{children:"Authentication is currently disabled."})}),w.jsx(Li,{label:"You can only enable auth when using Firebase",disabled:D,children:w.jsx(Sn,{onClick:j=>D?T():j.preventDefault(),color:"green","data-disabled":D?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?w.jsxs(Kt,{mt:40,direction:"column",children:[w.jsxs(Kt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[w.jsx(es,{order:6,children:"Enabled Users"}),w.jsx(JW,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(j=>{var M;return w.jsxs(Kt,{justify:"space-between",mb:10,children:[w.jsx(pt,{children:j}),j===((M=e.user)==null?void 0:M.email)?w.jsx(pt,{color:"blue",size:"xs",children:"You"}):w.jsx(Fb,{variant:"subtle",onClick:()=>N(j),children:w.jsx(H1e,{color:"red"})})]},j)}):null]}):null]})}),w.jsx(ls,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:w.jsxs(De,{component:"form",onSubmit:x.onSubmit(()=>k()),children:[w.jsx(bm,{leftSection:w.jsx(hWe,{}),placeholder:"User Gmail Account",...x.getInputProps("email")}),w.jsxs(Kt,{mt:30,justify:"right",children:[w.jsx(Sn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),w.jsx(Sn,{type:"submit",children:"Save"})]})]})}),w.jsxs(ls,{opened:f,size:"large",onClose:()=>d(!1),title:w.jsxs(pt,{fw:700,children:["Remove",b,"?"]}),children:[w.jsxs(pt,{mt:40,children:["Are you sure you want to remove",w.jsx("b",{children:b})," ","as an administrator?"]}),w.jsxs(Kt,{mt:40,justify:"right",children:[w.jsx(Sn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),w.jsx(Sn,{onClick:()=>P(),children:"Yes, I'm sure."})]})]}),w.jsxs(ls,{opened:h,size:"md",onClose:()=>p(!1),title:w.jsx(pt,{fw:700,children:"Enable Authentication?"}),children:[w.jsxs(pt,{mt:40,children:["User"," ",w.jsx("b",{children:E==null?void 0:E.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),w.jsxs(Kt,{mt:40,justify:"right",children:[w.jsx(Sn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),w.jsx(Sn,{onClick:()=>A(E),children:"Yes, I'm sure."})]})]}),w.jsxs(ls,{opened:g,size:"md",onClose:()=>y(!1),title:w.jsx(pt,{fw:700,children:"An Error Occurred."}),children:[w.jsxs(pt,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",w.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),w.jsx(Kt,{mt:40,justify:"right",children:w.jsx(Sn,{mr:5,onClick:()=>y(!1),children:"Okay"})})]}),w.jsx(lc,{visible:a})]})}class tZt extends DRe{constructor(){super("localStorage");qu(this,"studyDatabase");qu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await Ow.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await NM(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await NM(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await Ow.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=RM();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Ow.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=RM();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await Ow.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await Ow.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function nZt(){let e;{const t=new tZt;await t.connect(),e=t}return e}function Ew({title:e}){const t=Hy();return O.useEffect(()=>{document.title=e},[t,e]),null}async function rZt(){const t=await(await fetch(`${cc}global.json`)).text();return IEt(t)}function iZt(){const[e,t]=O.useState(null),[n,r]=O.useState({});O.useEffect(()=>{async function a(){e&&r(await ZEt(e))}a()},[e]),O.useEffect(()=>{e||rZt().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=js();O.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await nZt();s(u)}a()},[s,i]);const o=async a=>i instanceof Qf?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?w.jsx(nWe,{basename:cc,children:w.jsx(ZRt,{children:w.jsx(uWe,{children:w.jsx(Ui,{padding:"md",header:{height:70},children:w.jsxs(Jqe,{children:[w.jsx(tm,{path:"/",element:w.jsxs(w.Fragment,{children:[w.jsx(Ew,{title:"ReVISit | Home"}),w.jsx(O2,{studyIds:e.configsList}),w.jsx(pet,{globalConfig:e,studyConfigs:n})]})}),w.jsx(tm,{path:"/:studyId/*",element:w.jsxs(w.Fragment,{children:[w.jsx(Ew,{title:"ReVISit | Study"}),w.jsx(ext,{globalConfig:e})]})}),w.jsx(tm,{path:"/analysis/dashboard",element:w.jsxs(w.Fragment,{children:[w.jsx(Ew,{title:"ReVISit | Analysis"}),w.jsx(ZJt,{globalConfig:e})]})}),w.jsx(tm,{path:"/analysis",element:w.jsx(qz,{to:"/analysis/dashboard"})}),w.jsx(tm,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:w.jsxs(w.Fragment,{children:[w.jsx(Ew,{title:"ReVISit | Analysis"}),w.jsx(R0e,{paramToCheck:"studyId",paramCallback:o,children:w.jsx(GQt,{globalConfig:e})})]})}),w.jsx(tm,{path:"/analysis/stats/:studyId",element:w.jsx(qz,{to:"./table",replace:!0})}),w.jsx(tm,{path:"/settings",element:w.jsxs(R0e,{children:[w.jsx(Ew,{title:"ReVISit | Settings"}),w.jsx(O2,{studyIds:e.configsList}),w.jsx(Ui.Main,{children:w.jsx(eZt,{})})]})}),w.jsx(tm,{path:"/login",element:w.jsxs(w.Fragment,{children:[w.jsx(Ew,{title:"ReVISit | Login"}),w.jsx(O2,{studyIds:e.configsList}),w.jsx(Ui.Main,{children:w.jsx(YQt,{})})]})})]})})})})}):null}P4e.createRoot(document.getElementById("root")).render(w.jsx(Jr.StrictMode,{children:w.jsx(uqe,{children:w.jsxs(aye,{children:[w.jsx(yg,{}),w.jsx(iZt,{})]})})}))});export default sZt();
